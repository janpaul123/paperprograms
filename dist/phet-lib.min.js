function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(_){o=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var r=t&&t.prototype instanceof h?t:h,a=Object.create(r.prototype),s=new k(i||[]);return a._invoke=function(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return w()}for(n.method=r,n.arg=a;;){var s=n.delegate;if(s){var o=b(s,n);if(o){if(o===c)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=u(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,n,s),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(_){return{type:"throw",arg:_}}}e.wrap=l;var c={};function h(){}function d(){}function p(){}var f={};o(f,r,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(V([])));g&&g!==t&&n.call(g,r)&&(f=g);var y=p.prototype=h.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){var i;this._invoke=function(r,a){function s(){return new t((function(i,s){!function i(r,a,s,o){var l=u(e[r],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,s,o)}),(function(e){i("throw",e,s,o)})):t.resolve(h).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,o)}))}o(l.arg)}(r,a,i,s)}))}return i=i?i.then(s,s):s()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var i=u(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function V(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:w}}function w(){return{value:void 0,done:!0}}return d.prototype=p,o(y,"constructor",p),o(p,"constructor",d),d.displayName=o(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,s,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(A.prototype),o(A.prototype,a,(function(){return this})),e.AsyncIterator=A,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var s=new A(l(t,n,i,r),a);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},v(y),o(y,s,"Generator"),o(y,r,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=V,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var o=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(o&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:V(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function asyncGeneratorStep(e,t,n,i,r,a,s){try{var o=e[a](s),l=o.value}catch(u){return void n(u)}o.done?t(l):Promise.resolve(l).then(i,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function s(e){asyncGeneratorStep(a,i,r,s,o,"next",e)}function o(e){asyncGeneratorStep(a,i,r,s,o,"throw",e)}s(void 0)}))}}function set(e,t,n,i){return(set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,i){var r,a=_superPropBase(e,t);if(a){if((r=Object.getOwnPropertyDescriptor(a,t)).set)return r.set.call(i,n),!0;if(!r.writable)return!1}if(r=Object.getOwnPropertyDescriptor(i,t)){if(!r.writable)return!1;r.value=n,Object.defineProperty(i,t,r)}else _defineProperty(i,t,n);return!0})(e,t,n,i)}function _set(e,t,n,i,r){if(!set(e,t,n,i||e)&&r)throw new Error("failed to set property");return n}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)})(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&_setPrototypeOf(r,n.prototype),r}).apply(null,arguments)}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],s=!0,o=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(l){o=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(o)throw r}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=_superPropBase(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var e,t,n,i,r,a,s,o,l;window.phet=window.phet||{},phet.chipper=phet.chipper||{},phet.chipper.packageObject={name:"phet-lib",version:"0.0.0",license:"MIT",repository:{type:"git",url:"https://github.com/phetsims/phet-lib.git"},devDependencies:{grunt:"~1.5.3"},phet:{supportedBrands:["phet","adapted-from-phet"],requirejsNamespace:"PHET_LIB",buildStandalone:!0,requiresLodash:!1,requiresJQuery:!1,assignGlobals:{scenery:"SCENERY/main","phet-lib":"main",kite:"KITE/main",dot:"DOT/main",axon:"AXON/main",phetCore:"PHET_CORE/main",utteranceQueue:"UTTERANCE_QUEUE/main"},finalizeJS:"scenery.Utils.polyfillRequestAnimationFrame();",preload:["../sherpa/lib/jquery-2.1.0.min.js","../sherpa/lib/lodash-4.17.4.min.js","../sherpa/lib/himalaya-1.1.0.js","../sherpa/lib/linebreak-1.1.0.js","../sherpa/lib/flatqueue-1.2.1.js","../sherpa/lib/he-1.1.1.js","../sherpa/lib/TextEncoderLite-3c9f6f0.js","../sherpa/lib/base64-js-1.2.0.js","../sherpa/lib/seedrandom-2.4.2.js","../sherpa/lib/FileSaver-b8054a2.js","../sherpa/lib/poly-decomp-0.3.0.js","../sherpa/lib/three-r104.js","../query-string-machine/js/QueryStringMachine.js","../chipper/js/initialize-globals.js"],supportsOutputJS:!0},eslintConfig:{extends:"../chipper/eslint/sim_eslintrc.js"}},phet.chipper.stringPath="../",phet.chipper.locale="en",phet.chipper.loadModules=function(){},phet.chipper.strings={en:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},am:{"SCENERY_PHET/webglWarning.body":"‪WebGL አልነቃም ወይም አይገኝም። የበለጠ ለማወቅ ጠቅ ያድርጉ።‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ይቅርታ፣ የግራፊክስ ስህተት ተከስቷል።‬","SCENERY_PHET/webglWarning.contextLossReload":"‪እንደገና ጫን/ኝ‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪ሁሉንም ደረጃዎች አጠናቅቀዋል!‬","VEGAS/done":"‪ተሰርቷል‬","VEGAS/startOver":"‪እንደገና ጀምር‬","VEGAS/label.level":"‪ደረጃ {0}‬","VEGAS/pattern.0challenge.1max":"‪{0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ደጋግማችሁ ሞክሩ‬","VEGAS/excellent":"‪እጅግ በጣም ጥሩ ነው።‬","VEGAS/great":"‪ጎበዝ!‬","VEGAS/good":"‪ጥሩ!‬","VEGAS/label.score.max":"‪ነጥብ {0} ከ {1}‬","VEGAS/label.time":"‪ሰአት፡ {0}‬","VEGAS/yourNewBest":"‪(የአንተ/ቺ አዲሱ ምርጥ!)‬","VEGAS/pattern.0yourBest":"‪(የአንተ/ቺ ምርጥ፡ {0})‬","VEGAS/continue":"‪ቀጥል/ይ‬","VEGAS/newLevel":"‪አዲስ ደረጃ‬","VEGAS/keepGoing":"‪ቀጥል‬","VEGAS/score":"‪ነጥብ፡‬","VEGAS/pattern.score.number":"‪ነጥብ፡ {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ar_MA:{"SCENERY_PHET/webglWarning.body":"‫WebGL غير مشغل أو غير متوفر. اضغط هنا للمزيد من المعلومات.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‫{{units}} {{distance}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫عفوا، هناك خطأ في الكرافيك‬","SCENERY_PHET/webglWarning.contextLossReload":"‫اعادة التشغيل‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‫لقد اجتزت بنجاح جميع المستويات !‬","VEGAS/done":"‫تم‬","VEGAS/startOver":"‫ابدأ من جديد‬","VEGAS/label.level":"‫المستوى: {0}‬","VEGAS/pattern.0challenge.1max":"‫السؤال {0} من {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫استمر في المحاولة‬","VEGAS/excellent":"‫ممتاز !‬","VEGAS/great":"‫جيد !‬","VEGAS/good":"‫جيد !‬","VEGAS/label.score.max":"‫الرضيد: {0} من {1}‬","VEGAS/label.time":"‫الزمن : {0}‬","VEGAS/yourNewBest":"‫الأفضل بالنسبة لك‬","VEGAS/pattern.0yourBest":"‫(الأفضل بالنسبة لك: {0})‬","VEGAS/continue":"‫تابع‬","VEGAS/newLevel":"‫مستوى جديد‬","VEGAS/keepGoing":"‫استمر‬","VEGAS/score":"‫الرصيد‬","VEGAS/pattern.score.number":"‫الرصيد: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ar_SA:{"SCENERY_PHET/webglWarning.body":"‫WebGL غير ممكّن أو غير متوفر. اضغط لتتعلم المزيد‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫عذرًا ، لقد حدث خطأ في الرسومات‬","SCENERY_PHET/webglWarning.contextLossReload":"‫اعادة تحميل‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‫لقد أكملت جميع المستويات!‬","VEGAS/done":"‫تم‬","VEGAS/startOver":"‫البدء من جديد‬","VEGAS/label.level":"‫المستوي:\n{0}‬","VEGAS/pattern.0challenge.1max":"‫التحدي من {0} الى {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫استمر بالكتابة‬","VEGAS/excellent":"‫ممتاز‬","VEGAS/great":"‫عظيم !‬","VEGAS/good":"‫جيد !‬","VEGAS/label.score.max":"‫النتيجة\n: {0} out of {1}‬","VEGAS/label.time":"‫الزمن\n: {0}‬","VEGAS/yourNewBest":"‫الأفضل الجديد‬","VEGAS/pattern.0yourBest":"‫(الأفضل : {0})‬","VEGAS/continue":"‫استمرار‬","VEGAS/newLevel":"‫مستوى جديد‬","VEGAS/keepGoing":"‫استمر‬","VEGAS/score":"‫النتيجة‬","VEGAS/pattern.score.number":"‫النتيجة {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ar:{"SCENERY_PHET/webglWarning.body":"‫WebGL غير ممكّن أو غير متوفر. اضغط لتتعلم المزيد‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫عذرًا ، لقد حدث خطأ في الرسومات‬","SCENERY_PHET/webglWarning.contextLossReload":"‫اعادة تحميل‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‫لقد أكملت جميع المستويات!‬","VEGAS/done":"‫تم‬","VEGAS/startOver":"‫ابدأ من جديد‬","VEGAS/label.level":"‫المستوي:{0}‬","VEGAS/pattern.0challenge.1max":"‫التحدي {0} من {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫حاول مرة أخرى‬","VEGAS/excellent":"‫ممتاز!‬","VEGAS/great":"‫رائع!‬","VEGAS/good":"‫جيد!‬","VEGAS/label.score.max":"‫الدرجة: {0} من {1}‬","VEGAS/label.time":"‫الزمن: {0}‬","VEGAS/yourNewBest":"‫الأفضل الجديد‬","VEGAS/pattern.0yourBest":"‫(الأفضل : {0})‬","VEGAS/continue":"‫تابع‬","VEGAS/newLevel":"‫مستوى جديد‬","VEGAS/keepGoing":"‫استمر‬","VEGAS/score":"‫الدرجة:‬","VEGAS/pattern.score.number":"‫الدرجة: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ay:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},az:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Yenidən başlat‬","VEGAS/label.level":"‪Səviyyə: {0}‬","VEGAS/pattern.0challenge.1max":"‪Yarış  {0} / {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Yenidən Sına‬","VEGAS/excellent":"‪Möhtəşəm!‬","VEGAS/great":"‪Əla!‬","VEGAS/good":"‪Yaxşı!‬","VEGAS/label.score.max":"‪Xalınız:  {0} / {1}‬","VEGAS/label.time":"‪Vaxt: {0}‬","VEGAS/yourNewBest":"‪(Yeni ən yaxşı nəticənizt!)‬","VEGAS/pattern.0yourBest":"‪(Ən yaxşı nəticəniz: {0})‬","VEGAS/continue":"‪Davam et‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Xaliniz‬","VEGAS/pattern.score.number":"‪Xalınız: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},be:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Перазапусціць‬","VEGAS/label.level":"‪Узровень: {0}‬","VEGAS/pattern.0challenge.1max":"‪Заданне {0} з {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Працягвайце спрабаваць‬","VEGAS/excellent":"‪Выдатна!‬","VEGAS/great":"‪Выдатна!‬","VEGAS/good":"‪Добра!‬","VEGAS/label.score.max":"‪Рахунак: {0} з {1}‬","VEGAS/label.time":"‪Час: {0}‬","VEGAS/yourNewBest":"‪(Ваш новы лепшы!)‬","VEGAS/pattern.0yourBest":"‪(Ваш лепшы: {0})‬","VEGAS/continue":"‪Працягваць‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},bg:{"SCENERY_PHET/webglWarning.body":"‪WebGL не е активиран или не е наличен. Кликнете, за да научите повече.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Съжалявам възникна грешка с графиката.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Презареди‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Завършихте всички нива!‬","VEGAS/done":"‪Готово‬","VEGAS/startOver":"‪Започни отначало‬","VEGAS/label.level":"‪Ниво: {0}‬","VEGAS/pattern.0challenge.1max":"‪Задача {0} от {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Опитай пак‬","VEGAS/excellent":"‪Отлично‬","VEGAS/great":"‪Браво‬","VEGAS/good":"‪Добре‬","VEGAS/label.score.max":"‪Резултат: {0} от {1}‬","VEGAS/label.time":"‪Време: {0}‬","VEGAS/yourNewBest":"‪(Твоят нов най-добър резултат!)‬","VEGAS/pattern.0yourBest":"‪(Твоят най-добър резултат: {0})‬","VEGAS/continue":"‪Продължи‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Резултат‬","VEGAS/pattern.score.number":"‪Резултат: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},bn:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪পুনরায় লোড করো‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪তুমি সমস্ত লেভেল অতিক্রম করেছো‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪চেষ্টা চালিয়ে যাও‬","VEGAS/excellent":"‪চমৎকার‬","VEGAS/great":"‪আসাধারন‬","VEGAS/good":"‪ভাল‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪চালিয়ে যাও‬","VEGAS/newLevel":"‪নতুন লেভেল‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪স্কোর‬","VEGAS/pattern.score.number":"‪স্কোর: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},bo:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪དགོངས་སེལ་ཞུ། རིས་དབྱིབས་ནོར་སྐྱོན་ཕྱིན་འདུག།‬","SCENERY_PHET/webglWarning.contextLossReload":"‪བསྐྱར་འཇུག‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪མུ་མཐུད་ཚོད་བྱེད‬","VEGAS/excellent":"‪ཤིན་ཏུ་ལེགས།‬","VEGAS/great":"‪ཤིན་ཏུ་ལེགས།‬","VEGAS/good":"‪ལེགས།‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪མུ་མཐུད‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},bs:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ponovo učitaj‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Kompletirani svi nivoi! Aferim!‬","VEGAS/done":"‪Gotovo‬","VEGAS/startOver":"‪Početi ponovo‬","VEGAS/label.level":"‪Nivo: {0}‬","VEGAS/pattern.0challenge.1max":"‪Izazov {0} od {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Nastavi pokušavati‬","VEGAS/excellent":"‪Odlično!‬","VEGAS/great":"‪Genijalno!‬","VEGAS/good":"‪Dobro!‬","VEGAS/label.score.max":"‪Rezultat: {0} od {1}‬","VEGAS/label.time":"‪Vrijeme: {0}‬","VEGAS/yourNewBest":"‪(Tvoj novi najbolji rezultat!)‬","VEGAS/pattern.0yourBest":"‪(Tvoj najbolji rezultat: {0})‬","VEGAS/continue":"‪Nastavi‬","VEGAS/newLevel":"‪Novi nivo‬","VEGAS/keepGoing":"‪Nastavi‬","VEGAS/score":"‪Rezultat:‬","VEGAS/pattern.score.number":"‪Rezultat: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ca:{"SCENERY_PHET/webglWarning.body":"‪WebGL no està activat o disponible. Premeu per saber més.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Disculpeu, error amb els gràfics‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recarrega‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Has completat tots els nivells!‬","VEGAS/done":"‪Fet‬","VEGAS/startOver":"‪Torna a Començar‬","VEGAS/label.level":"‪Nivell: {0}‬","VEGAS/pattern.0challenge.1max":"‪Resultats {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Segueix Intentant-ho‬","VEGAS/excellent":"‪Excel·lent!‬","VEGAS/great":"‪Molt bé!‬","VEGAS/good":"‪Bé!‬","VEGAS/label.score.max":"‪Puntuació: {0} encerts de {1}‬","VEGAS/label.time":"‪Temps: {0}‬","VEGAS/yourNewBest":"‪(El teu millor actual!)‬","VEGAS/pattern.0yourBest":"‪(El teu millor: {0})‬","VEGAS/continue":"‪Continua‬","VEGAS/newLevel":"‪Nivell Nou‬","VEGAS/keepGoing":"‪No t'aturis‬","VEGAS/score":"‪Puntuació:‬","VEGAS/pattern.score.number":"‪Puntuació {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},cs:{"SCENERY_PHET/webglWarning.body":"‪WebGL není povoleno nebo není dostupné. Klepněte pro další informace.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Bohužel, objevila se chyba grafiky.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Načíst znovu‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Dokončili jste všechny úrovně!‬","VEGAS/done":"‪Hotovo‬","VEGAS/startOver":"‪Pokračovat od začátku‬","VEGAS/label.level":"‪Kolo: {0}‬","VEGAS/pattern.0challenge.1max":"‪Výzva {0} z {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Nevzdávejte se‬","VEGAS/excellent":"‪Výborně!‬","VEGAS/great":"‪Skvěle!‬","VEGAS/good":"‪Dobře!‬","VEGAS/label.score.max":"‪Skóre: {0} z {1}‬","VEGAS/label.time":"‪Čas: {0}‬","VEGAS/yourNewBest":"‪(Váš nový nejlepší!)‬","VEGAS/pattern.0yourBest":"‪(Váš nejlepší: {0})‬","VEGAS/continue":"‪Pokračovat‬","VEGAS/newLevel":"‪Nová úroveň‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Skóre:‬","VEGAS/pattern.score.number":"‪Skóre: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},cy:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ail-lwytho‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Cychwyn Eto‬","VEGAS/label.level":"‪Lefel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Her {0} o {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Daliwch i drio‬","VEGAS/excellent":"‪Ardderchog!‬","VEGAS/great":"‪Grêt!‬","VEGAS/good":"‪Da!‬","VEGAS/label.score.max":"‪Sgôr: {0} allan o {1}‬","VEGAS/label.time":"‪Amser: {0}‬","VEGAS/yourNewBest":"‪(Eich Gorau Newydd!)‬","VEGAS/pattern.0yourBest":"‪Eich Gorau: {0}‬","VEGAS/continue":"‪Parhau‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},da:{"SCENERY_PHET/webglWarning.body":"‪WebGL er ikke tilsluttet eller ikke tilgængelig. Klik for at lære mere.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}}{{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Beklager, en grafikfejl er opstået‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Genstart‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Du har klaret alle niveauer!‬","VEGAS/done":"‪Slut‬","VEGAS/startOver":"‪Genstart‬","VEGAS/label.level":"‪Niveau: {0}‬","VEGAS/pattern.0challenge.1max":"‪Udfordring {0} af {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Bliv ved‬","VEGAS/excellent":"‪Fremragende!‬","VEGAS/great":"‪Enestående!‬","VEGAS/good":"‪Godt!‬","VEGAS/label.score.max":"‪Score: {0} ud af {1}‬","VEGAS/label.time":"‪Tid: {0}‬","VEGAS/yourNewBest":"‪(Din nye bedste!)‬","VEGAS/pattern.0yourBest":"‪(Din bedste: {0})‬","VEGAS/continue":"‪Fortsæt‬","VEGAS/newLevel":"‪Nyt niveau‬","VEGAS/keepGoing":"‪Bliv ved‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},de:{"SCENERY_PHET/webglWarning.body":"‪WebGL nicht aktiv oder nicht verfügbar. Klicken für Informationen.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, ein Grafikfehler ist aufgetreten‬","SCENERY_PHET/webglWarning.contextLossReload":"‪neu laden‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Du hast alle Stufen bearbeitet!‬","VEGAS/done":"‪Fertig‬","VEGAS/startOver":"‪Nochmal beginnen‬","VEGAS/label.level":"‪Niveau: {0}‬","VEGAS/pattern.0challenge.1max":"‪Herausforderung {0} von {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Weiter versuchen‬","VEGAS/excellent":"‪Hervorragend!‬","VEGAS/great":"‪Super!‬","VEGAS/good":"‪Gut!‬","VEGAS/label.score.max":"‪Resultat: {0} von {1}‬","VEGAS/label.time":"‪Zeit {0}‬","VEGAS/yourNewBest":"‪(Dein neuer Rekord!)‬","VEGAS/pattern.0yourBest":"‪(Dein Rekord: {0})‬","VEGAS/continue":"‪Weiter‬","VEGAS/newLevel":"‪Neues Niveau‬","VEGAS/keepGoing":"‪Mach weiter‬","VEGAS/score":"‪Resultat:‬","VEGAS/pattern.score.number":"‪Resultat: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},el:{"SCENERY_PHET/webglWarning.body":"‪Το WebGL δεν έχει ενεργοποιηθεί ή δεν είναι διαθέσιμο. Κάντε κλικ για να μάθετε περισσότερα.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Συγγνώμη, αλλά συνέβη ένα σφάλμα γραφικών‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Επαναφόρτωση‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Ολοκλήρωσες όλα τα επίπεδα‬","VEGAS/done":"‪Ολοκληρώθηκε‬","VEGAS/startOver":"‪Επανεκκίνηση‬","VEGAS/label.level":"‪Επίπεδο: {0}‬","VEGAS/pattern.0challenge.1max":"‪Βήμα {0} από {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Προσπάθησε πάλι‬","VEGAS/excellent":"‪Εξαιρετικά!‬","VEGAS/great":"‪Περίφημα!‬","VEGAS/good":"‪Πολύ καλά!‬","VEGAS/label.score.max":"‪Βαθμολογία: {0} από {1}‬","VEGAS/label.time":"‪Χρόνος: {0}‬","VEGAS/yourNewBest":"‪(Η καλύτερη νέα βαθμολογία σας!)‬","VEGAS/pattern.0yourBest":"‪(Η καλύτερη βαθμολογία σας: {0})‬","VEGAS/continue":"‪Συνέχεια‬","VEGAS/newLevel":"‪Νέο επίπεδο‬","VEGAS/keepGoing":"‪Συνέχισε‬","VEGAS/score":"‪Βαθμολογία:‬","VEGAS/pattern.score.number":"‪Βαθμολογία: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},es_ES:{"SCENERY_PHET/webglWarning.body":"‪WebGL no está activado o no está disponible. Haz click para saber más.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Lo lamentamos, ha ocurrido un error gráfico.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recargar‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Has completado todos los niveles!‬","VEGAS/done":"‪Hecho‬","VEGAS/startOver":"‪Empezar de nuevo‬","VEGAS/label.level":"‪Nivel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Desafío {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Sigue intentándolo‬","VEGAS/excellent":"‪¡Excelente!‬","VEGAS/great":"‪¡Genial!‬","VEGAS/good":"‪¡Bien!‬","VEGAS/label.score.max":"‪Puntuación: {0} sobre {1}‬","VEGAS/label.time":"‪Tiempo: {0}‬","VEGAS/yourNewBest":"‪(¡Tu nuevo récord!)‬","VEGAS/pattern.0yourBest":"‪(Tu récord: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪Nuevo Nivel‬","VEGAS/keepGoing":"‪Sigue intentando‬","VEGAS/score":"‪Puntuación:‬","VEGAS/pattern.score.number":"‪Puntuación: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},es_MX:{"SCENERY_PHET/webglWarning.body":"‪WebGL no está habilitado o no está disponible. Haz click para aprender mas.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Lo sentimos, se ha producido un error de gráficos.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recargar‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪¡Haz completado todos los niveles!‬","VEGAS/done":"‪Terminado‬","VEGAS/startOver":"‪Empezar de nuevo‬","VEGAS/label.level":"‪Nivel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Reto {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Sigue intentando‬","VEGAS/excellent":"‪¡Excelente!‬","VEGAS/great":"‪¡Muy bien!‬","VEGAS/good":"‪¡Bien!‬","VEGAS/label.score.max":"‪Puntuación: {0} de {1}‬","VEGAS/label.time":"‪Tiempo: {0}‬","VEGAS/yourNewBest":"‪(¡Tu nueva mejor puntuación!)‬","VEGAS/pattern.0yourBest":"‪(Tu mejor puntuación: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪Nuevo Nivel‬","VEGAS/keepGoing":"‪Sigue intentando‬","VEGAS/score":"‪Puntuación‬","VEGAS/pattern.score.number":"‪Puntuación: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},es_PE:{"SCENERY_PHET/webglWarning.body":"‪WebGL no está habilitado o no está disponible. Haz click para aprender mas.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Lo sentimos, ha ocurrido un error de gráficos‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Volver a Cargar‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪¡Completaste todos los niveles!‬","VEGAS/done":"‪Ya‬","VEGAS/startOver":"‪Comenzar de nuevo‬","VEGAS/label.level":"‪Nivel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Desafío {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Sigue intentándolo‬","VEGAS/excellent":"‪¡Excelente!‬","VEGAS/great":"‪¡Magnífico!‬","VEGAS/good":"‪¡Bien!‬","VEGAS/label.score.max":"‪Puntuación: {0} falta {1}‬","VEGAS/label.time":"‪Tiempo: {0}‬","VEGAS/yourNewBest":"‪(¡Tu nuevo mejor puntaje!‬","VEGAS/pattern.0yourBest":"‪(Tu mejor puntaje: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪Nuevo Nivel‬","VEGAS/keepGoing":"‪Sigue adelante‬","VEGAS/score":"‪Puntaje‬","VEGAS/pattern.score.number":"‪Puntaje: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},es:{"SCENERY_PHET/webglWarning.body":"‪WebGL no está habilitado o no está disponible. Haz click para aprender mas.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Lo sentimos, se ha producido un error de gráficos.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recargar‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Has completado todos los niveles!‬","VEGAS/done":"‪Hecho‬","VEGAS/startOver":"‪Empezar de nuevo‬","VEGAS/label.level":"‪Nivel: {0}‬","VEGAS/pattern.0challenge.1max":"‪Reto {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Sigue intentando‬","VEGAS/excellent":"‪¡Excelente!‬","VEGAS/great":"‪¡Muy Bien!‬","VEGAS/good":"‪¡Bien!‬","VEGAS/label.score.max":"‪Puntuación: {0} de {1}‬","VEGAS/label.time":"‪Tiempo: {0}‬","VEGAS/yourNewBest":"‪(¡Nueva mejor puntuación!)‬","VEGAS/pattern.0yourBest":"‪(Mejor puntuación: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪Nuevo Nivel‬","VEGAS/keepGoing":"‪Sigue intentando‬","VEGAS/score":"‪Puntuación:‬","VEGAS/pattern.score.number":"‪Puntuación: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},et:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Vabandust, tekkis viga.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Alusta uuesti‬","VEGAS/label.level":"‪Tase: {0}‬","VEGAS/pattern.0challenge.1max":"‪Ülesanne: {0} / {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Proovi veel‬","VEGAS/excellent":"‪Suurepärane!‬","VEGAS/great":"‪Väga hea!‬","VEGAS/good":"‪Tubli!‬","VEGAS/label.score.max":"‪Punkte: {0} / {1}‬","VEGAS/label.time":"‪Aeg {0}‬","VEGAS/yourNewBest":"‪(Uus parim tulemus!)‬","VEGAS/pattern.0yourBest":"‪(Parim tulemus: {0})‬","VEGAS/continue":"‪Jätka‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},eu:{"SCENERY_PHET/webglWarning.body":"‪WebGL ez dago gaituta edo ez dago erabilgarri. Egin klik gehiago jakiteko.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Berriro kargatu‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Berriro kargatu‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Maila guztiak bete dituzu!‬","VEGAS/done":"‪Egina‬","VEGAS/startOver":"‪Hasi berriro‬","VEGAS/label.level":"‪Maila: {0}‬","VEGAS/pattern.0challenge.1max":"‪Desafioa: {0} ({1}etik)‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Saiatu berriro‬","VEGAS/excellent":"‪Bikain!‬","VEGAS/great":"‪Oso ondo!‬","VEGAS/good":"‪Ondo!‬","VEGAS/label.score.max":"‪Puntuazioa: {1}etik {0}‬","VEGAS/label.time":"‪Denbora: {0}‬","VEGAS/yourNewBest":"‪(Zure azken hoberena!)‬","VEGAS/pattern.0yourBest":"‪(Zure hoberena: {0})‬","VEGAS/continue":"‪Jarraitu‬","VEGAS/newLevel":"‪Maila berria‬","VEGAS/keepGoing":"‪Segi aurrera‬","VEGAS/score":"‪Puntuaketa:‬","VEGAS/pattern.score.number":"‪Puntuaketa: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},fa:{"SCENERY_PHET/webglWarning.body":"‫WebGL فعال نشده یا در دسترس نیست. برای اطلاعات بیشتر کلیک کنید.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‫{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫متاسفیم، یک اشکال گرافیکی پیش آمد.‬","SCENERY_PHET/webglWarning.contextLossReload":"‫بارگذاری مجدد‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‫شما همه سطح ها را کامل کرده اید!‬","VEGAS/done":"‫انجام شد‬","VEGAS/startOver":"‫از نو شروع کن‬","VEGAS/label.level":"‫{0} :سطح‬","VEGAS/pattern.0challenge.1max":"‫چالش {0} از {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫دوباره امتحان کن‬","VEGAS/excellent":"‫عالی!‬","VEGAS/great":"‫بسیار خوب!‬","VEGAS/good":"‫خوب است!‬","VEGAS/label.score.max":"‫امتیاز: {0} از {1}‬","VEGAS/label.time":"‫زمان: {0}‬","VEGAS/yourNewBest":"‫(رکورد جدید شما!)‬","VEGAS/pattern.0yourBest":"‫(بهترین عملکرد شما: {0})‬","VEGAS/continue":"‫ادامه دادن‬","VEGAS/newLevel":"‫سطح جدید‬","VEGAS/keepGoing":"‫ادامه بده‬","VEGAS/score":"‫امتیاز:‬","VEGAS/pattern.score.number":"‫امتیاز: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},fi:{"SCENERY_PHET/webglWarning.body":"‪WebGL ei ole saatavilla. Klikkaa lisätietoa.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Grafiikassa tapahtui virhe.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Lataa uudelleen‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Aloita alusta‬","VEGAS/label.level":"‪Taso: {0}‬","VEGAS/pattern.0challenge.1max":"‪Haaste {0}/{1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Jatka yrittämistä‬","VEGAS/excellent":"‪Erinomaista!‬","VEGAS/great":"‪Hienoa!‬","VEGAS/good":"‪Hyvä!‬","VEGAS/label.score.max":"‪Pisteet: {0} / {1}‬","VEGAS/label.time":"‪Aika: {0}‬","VEGAS/yourNewBest":"‪(Uusi ennätyksesi!)‬","VEGAS/pattern.0yourBest":"‪(Paras tuloksesi: {0})‬","VEGAS/continue":"‪Jatka‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Pisteet:‬","VEGAS/pattern.score.number":"‪Pisteet: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},fo:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Tú ert liðugur við allar banarnar!‬","VEGAS/done":"‪Liðugt‬","VEGAS/startOver":"‪Byrja aftur‬","VEGAS/label.level":"‪Bani: {0}‬","VEGAS/pattern.0challenge.1max":"‪Avbjóðing {0} av {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Royn víðari‬","VEGAS/excellent":"‪Sera Flott!‬","VEGAS/great":"‪Flott!‬","VEGAS/good":"‪Gott!‬","VEGAS/label.score.max":"‪Stig: {0} út av {1}‬","VEGAS/label.time":"‪Tíð: {0}‬","VEGAS/yourNewBest":"‪(Nýggj háskora!)‬","VEGAS/pattern.0yourBest":"‪(Háskora: {0})‬","VEGAS/continue":"‪Víðari‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Stig:‬","VEGAS/pattern.score.number":"‪Stig: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},fr:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Désolé, une erreur graphique s'est produite‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recharger‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Tu as complété tous les niveaux!‬","VEGAS/done":"‪Fait‬","VEGAS/startOver":"‪Recommencez‬","VEGAS/label.level":"‪Niveau : {0}‬","VEGAS/pattern.0challenge.1max":"‪Défi {0} sur {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Essayez encore‬","VEGAS/excellent":"‪Excellent !‬","VEGAS/great":"‪Bravo !‬","VEGAS/good":"‪Bien !‬","VEGAS/label.score.max":"‪Score : {0} sur {1}‬","VEGAS/label.time":"‪Temps : {0}‬","VEGAS/yourNewBest":"‪(Votre nouveau meilleur score!)‬","VEGAS/pattern.0yourBest":"‪(Votre meilleur score: {0})‬","VEGAS/continue":"‪Continuer‬","VEGAS/newLevel":"‪Nouveau Niveau‬","VEGAS/keepGoing":"‪Continuer‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ga:{"SCENERY_PHET/webglWarning.body":"‪Níl WebGL cumasaithe nó níl ar fáil. Cliceáil chun teacht ar bhreis faisnéise.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Ár leithscéal, tharla earráid grafaicí.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Athlódáil‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Tosaigh Arís‬","VEGAS/label.level":"‪Leibhéal: {0}‬","VEGAS/pattern.0challenge.1max":"‪Dúshlán: {0} as {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Coinnigh ort‬","VEGAS/excellent":"‪Thar barr!‬","VEGAS/great":"‪Iontach ar fad!‬","VEGAS/good":"‪Go maith!‬","VEGAS/label.score.max":"‪Scór: {0} as {1}‬","VEGAS/label.time":"‪Am: {0}‬","VEGAS/yourNewBest":"‪(Do scór nua is fearr!)‬","VEGAS/pattern.0yourBest":"‪(Do scór is fearr: {0})‬","VEGAS/continue":"‪Lean ar aghaidh‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},gu:{"SCENERY_PHET/webglWarning.body":"‪WebGL સક્ષમ નથી અથવા ઉપલબ્ધ નથી. વધુ જાણવા માટે ક્લિક કરો.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪માફ કરશો, એક ગ્રાફિક્સ ભૂલ આવી છે.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪ફરી લોડ કરો‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪તમે બધા લેવલ પૂર્ણ કર્યા છે !‬","VEGAS/done":"‪થઈ ગયું‬","VEGAS/startOver":"‪ફરી શરુ કરો‬","VEGAS/label.level":"‪લેવલ : {0}‬","VEGAS/pattern.0challenge.1max":"‪ચેલેન્જ  {1} માંથી {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪પ્રયત્નો ચાલુ રાખો‬","VEGAS/excellent":"‪ખુબ સરસ‬","VEGAS/great":"‪સરસ‬","VEGAS/good":"‪વાહ !‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪સમય :{0}‬","VEGAS/yourNewBest":"‪(આપનો નવો રેકોર્ડ )‬","VEGAS/pattern.0yourBest":"‪(આપનો રેકોર્ડ : {0})‬","VEGAS/continue":"‪ચાલુ રાખો‬","VEGAS/newLevel":"‪નવું લેવલ‬","VEGAS/keepGoing":"‪ચાલુ રાખો.‬","VEGAS/score":"‪સ્કોર :‬","VEGAS/pattern.score.number":"‪સ્કોર : {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ha:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}}{{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Yi haƙuri,  kuren hotuna ya faru‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Sake saukewa‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪sake daga farko‬","VEGAS/label.level":"‪Mataki: {0}‬","VEGAS/pattern.0challenge.1max":"‪Kalubale {0} na {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ci gaba da ƙoƙari‬","VEGAS/excellent":"‪Da Ƙyau ƙwarai!‬","VEGAS/great":"‪Yayi kyau!‬","VEGAS/good":"‪Da Ƙyau!‬","VEGAS/label.score.max":"‪Maki: {0} daga cikin {1}‬","VEGAS/label.time":"‪Lokaci: {0}‬","VEGAS/yourNewBest":"‪(Wani Mafi kyau naka!)‬","VEGAS/pattern.0yourBest":"‪(Mafi kyau naka: {0})‬","VEGAS/continue":"‪Ci gaba‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪maki‬","VEGAS/pattern.score.number":"‪Maki:  {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},hi:{"SCENERY_PHET/webglWarning.body":"‪WebGL चालू या उपलब्ध नहीं है। अधिक जानने के लिए क्लिक करें।‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪क्षमा करें, एक ग्राफ़िक त्रुटि हुई है।‬","SCENERY_PHET/webglWarning.contextLossReload":"‪पुनः लोड करें‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪आपने सभी स्तर पूरे कर लिए !‬","VEGAS/done":"‪पूर्ण हुआ‬","VEGAS/startOver":"‪प्रारंभ करें‬","VEGAS/label.level":"‪स्तर : {0}‬","VEGAS/pattern.0challenge.1max":"‪चुनौती : {1} में से {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪कोशिश करते रहो‬","VEGAS/excellent":"‪अति उत्कृष्ट‬","VEGAS/great":"‪शाबाश !‬","VEGAS/good":"‪अच्छा !‬","VEGAS/label.score.max":"‪प्राप्तांक : {1} में से {0}‬","VEGAS/label.time":"‪समय : {0}‬","VEGAS/yourNewBest":"‪(आपका नया सर्वोच्च अंक !)‬","VEGAS/pattern.0yourBest":"‪(आपका सर्वोच्च अंक  : {0})‬","VEGAS/continue":"‪जारी रखिये‬","VEGAS/newLevel":"‪नया स्तर‬","VEGAS/keepGoing":"‪जारी रखें‬","VEGAS/score":"‪प्राप्तांक  :‬","VEGAS/pattern.score.number":"‪प्राप्तांक :{{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},hr:{"SCENERY_PHET/webglWarning.body":"‪WebGL nije omogućen ili je nedostupan. Kliknite kako biste saznali više.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Nažalost, došlo je do grafičke pogreške.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ponovno učitati‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Uradili ste sve nivoe!‬","VEGAS/done":"‪Gotovo‬","VEGAS/startOver":"‪Pokreni ponovo‬","VEGAS/label.level":"‪Razina: {0}‬","VEGAS/pattern.0challenge.1max":"‪Izazov {0} od {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Nastavi pokušavati‬","VEGAS/excellent":"‪Izvrsno!‬","VEGAS/great":"‪Izvrsno!‬","VEGAS/good":"‪Dobro!‬","VEGAS/label.score.max":"‪Bodovi: {0} od {1}‬","VEGAS/label.time":"‪Vrijeme: {0}‬","VEGAS/yourNewBest":"‪(Tvoj novi najbolji rezultat)‬","VEGAS/pattern.0yourBest":"‪(Tvoj najbolji rezultat  {0})‬","VEGAS/continue":"‪Nastavi‬","VEGAS/newLevel":"‪Novi nivo‬","VEGAS/keepGoing":"‪Samo naprijed‬","VEGAS/score":"‪Rezultat:‬","VEGAS/pattern.score.number":"‪rezultat:  {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ht:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Rechaje‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Ou konplete tout nivo yo!‬","VEGAS/done":"‪Fini‬","VEGAS/startOver":"‪Rekòmanse‬","VEGAS/label.level":"‪Nivo: {0}‬","VEGAS/pattern.0challenge.1max":"‪Defi {0} nan {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Kontinye Eseye‬","VEGAS/excellent":"‪Ekselan!‬","VEGAS/great":"‪Fòmidab!‬","VEGAS/good":"‪Byen!‬","VEGAS/label.score.max":"‪Pwen: {0} sou {1}‬","VEGAS/label.time":"‪Tan: {0}‬","VEGAS/yourNewBest":"","VEGAS/pattern.0yourBest":"","VEGAS/continue":"‪Kontinye‬","VEGAS/newLevel":"‪Nouvo Nivo‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Pwen‬","VEGAS/pattern.score.number":"‪Pwen: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},hu:{"SCENERY_PHET/webglWarning.body":"‪A WebGL nincs engedélyezve vagy nem elérhető. Bővebb részletekért kattintson ide.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Elnézést, grafikai hiba adódott‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Újratöltés‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Újrakezdés‬","VEGAS/label.level":"‪Szint: {0}‬","VEGAS/pattern.0challenge.1max":"‪{0}. próba {1} közül‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Gyakorold még‬","VEGAS/excellent":"‪Kiváló!‬","VEGAS/great":"‪Remek!‬","VEGAS/good":"‪Jó!‬","VEGAS/label.score.max":"‪Pontszám: {0} (max.: {1})‬","VEGAS/label.time":"‪Idő: {0}‬","VEGAS/yourNewBest":"‪(Csúcsot javítottál!)‬","VEGAS/pattern.0yourBest":"‪(Eddigi csúcsod: {0})‬","VEGAS/continue":"‪Tovább‬","VEGAS/newLevel":"‪Új szint‬","VEGAS/keepGoing":"‪Tovább‬","VEGAS/score":"‪Pontszám:‬","VEGAS/pattern.score.number":"‪Pontszám: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},hy:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Դուք ավարտեցիք բոլոր մակարդակները‬","VEGAS/done":"‪Կատարած‬","VEGAS/startOver":"‪Սկսել նորից‬","VEGAS/label.level":"‪Մակարդակ՝ {0}‬","VEGAS/pattern.0challenge.1max":"‪Մարտահրավեր {0}-ը {1}-ից‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Շարունակեք փորձել‬","VEGAS/excellent":"‪Գերազանց‬","VEGAS/great":"‪Հոյակապ‬","VEGAS/good":"‪Լավ‬","VEGAS/label.score.max":"‪Գնահատական՝  {0} {1}-ից‬","VEGAS/label.time":"‪Ժամանակ՝ {0}‬","VEGAS/yourNewBest":"‪(Ձեր նոր լավագույնը)‬","VEGAS/pattern.0yourBest":"‪(Ձեր լավագույնը ՝ {0})‬","VEGAS/continue":"‪Շարունակել‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Գնահատական՝‬","VEGAS/pattern.score.number":"‪Գնահատական {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ig:{"SCENERY_PHET/webglWarning.body":"‪WebGL enweghị ike ma ọ bụ adịghị; pịa ka ịmụtakwu ihe‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Ndo, mperi eserese emela.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Mee-ọzọ‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Mezue ọkwa niile!‬","VEGAS/done":"‪Zuru-ezu‬","VEGAS/startOver":"‪Malite‬","VEGAS/label.level":"‪Amangiri:{0}‬","VEGAS/pattern.0challenge.1max":"‪Ọrụ {0} nke {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Nọgide Na-Agbalị‬","VEGAS/excellent":"‪Oke!‬","VEGAS/great":"‪Oke!‬","VEGAS/good":"‪Nke Ọma!‬","VEGAS/label.score.max":"‪Ụgwọ ọrụ: {0} si {1}‬","VEGAS/label.time":"‪Oge: {0}‬","VEGAS/yourNewBest":"‪(Kacha Mma Gị)‬","VEGAS/pattern.0yourBest":"‪(Nke Kacha Mma: {0})‬","VEGAS/continue":"‪Gaa-n'ihu‬","VEGAS/newLevel":"‪Ọkwa ọhụrụ‬","VEGAS/keepGoing":"‪Gaa N'ihu‬","VEGAS/score":"‪ụgwọ ọrụ‬","VEGAS/pattern.score.number":"‪Ụgwọ ọrụ: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},in:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Kamu telah menyelesaikan semua level!‬","VEGAS/done":"‪Selesai‬","VEGAS/startOver":"‪Memulai‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Tantangan {0} dari {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Coba Lagi‬","VEGAS/excellent":"‪Sangat bagus‬","VEGAS/great":"‪Hebat!‬","VEGAS/good":"‪Bagus!‬","VEGAS/label.score.max":"‪Skor : {0} dari {1}‬","VEGAS/label.time":"‪Waktu : {0}‬","VEGAS/yourNewBest":"‪(Skor Terbaik‬","VEGAS/pattern.0yourBest":"‪(Skor Terbaikmu: {0})‬","VEGAS/continue":"‪Lanjutkan‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Skor:‬","VEGAS/pattern.score.number":"‪Skor: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},is:{"SCENERY_PHET/webglWarning.body":"‪WebGL er ekki virkt eða ekki til staðar. Smelltu fyrir frekari upplýsingar‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Því miður hefur grafísk villa átt sér stað‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Endurhlaða‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Þú hefur lokið öllum erfiðleikastigunum!‬","VEGAS/done":"‪Lokið‬","VEGAS/startOver":"‪Byrja aftur‬","VEGAS/label.level":"‪Erfiðleikastig: {0}‬","VEGAS/pattern.0challenge.1max":"‪Þraut {0} af {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ekki gefast upp‬","VEGAS/excellent":"‪Frábært!‬","VEGAS/great":"‪Flott!‬","VEGAS/good":"‪Gott!‬","VEGAS/label.score.max":"‪Stig: {0} af {1}‬","VEGAS/label.time":"‪Tími: {0}‬","VEGAS/yourNewBest":"‪(Nýtt persónulegt met!)‬","VEGAS/pattern.0yourBest":"‪(Persónulegt met: {0})‬","VEGAS/continue":"‪Halda áfram‬","VEGAS/newLevel":"‪Nýtt stig‬","VEGAS/keepGoing":"‪Halda áfram‬","VEGAS/score":"‪Stig:‬","VEGAS/pattern.score.number":"‪Stig: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},it:{"SCENERY_PHET/webglWarning.body":"‪WebGL non è abilitato o non disponibile. Clicca per sapere di più.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Scusa, c'è un errore nella grafica‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ricarica‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Hai completato tutti i livelli!‬","VEGAS/done":"‪Fatto‬","VEGAS/startOver":"‪Ricomincia‬","VEGAS/label.level":"‪Livello: {0}‬","VEGAS/pattern.0challenge.1max":"‪Partita {0} di {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Allenati‬","VEGAS/excellent":"‪Eccellente!‬","VEGAS/great":"‪Grande!‬","VEGAS/good":"‪Ottimo!‬","VEGAS/label.score.max":"‪Punteggio: {0} su {1}‬","VEGAS/label.time":"‪Tempo: {0}‬","VEGAS/yourNewBest":"‪(Il tuo nuovo record!)‬","VEGAS/pattern.0yourBest":"‪(Il tuo punteggio migliore: {0})‬","VEGAS/continue":"‪Continua‬","VEGAS/newLevel":"‪Nuovo livello‬","VEGAS/keepGoing":"‪Continua così‬","VEGAS/score":"‪Punteggio:‬","VEGAS/pattern.score.number":"‪Punteggio: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},iw:{"SCENERY_PHET/webglWarning.body":"‫WebGL לא מאופשר או זמין. לחצו ללמוד עוד‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫סליחה, חלה שגיאת גרפיקה.‬","SCENERY_PHET/webglWarning.contextLossReload":"‫טען מחדש‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‫השלמת את כל הרמות!‬","VEGAS/done":"‫סיום‬","VEGAS/startOver":"‫התחלה מחדש‬","VEGAS/label.level":"‫רמה: {0}‬","VEGAS/pattern.0challenge.1max":"‫אתגר {0} מ {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫המשיכו לנסות‬","VEGAS/excellent":"‫מצוין!‬","VEGAS/great":"‫מעולה!‬","VEGAS/good":"‫טוב מאוד!‬","VEGAS/label.score.max":"‫ניקוד: {0} מתוך {1}‬","VEGAS/label.time":"‫זמן: {0}‬","VEGAS/yourNewBest":"‫(השיא החדש שלך!)‬","VEGAS/pattern.0yourBest":"‫(השיא שלך: {0})‬","VEGAS/continue":"‫המשך‬","VEGAS/newLevel":"‫השלב הבא‬","VEGAS/keepGoing":"‫המשיכו הלאה‬","VEGAS/score":"‫ציון:‬","VEGAS/pattern.score.number":"‫ציון: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ja:{"SCENERY_PHET/webglWarning.body":"‪WebGLは利用できません。詳細はこちら。‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪図表に問題が起きました。‬","SCENERY_PHET/webglWarning.contextLossReload":"‪再読込みする‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪全レベルをコンプリートしました！‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪最初からやり直す‬","VEGAS/label.level":"‪レベル: {0}‬","VEGAS/pattern.0challenge.1max":"‪{0} / {1} 問‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪トライ!トライ！‬","VEGAS/excellent":"‪よくできました！‬","VEGAS/great":"‪すばらしい！‬","VEGAS/good":"‪いいね！‬","VEGAS/label.score.max":"‪正解：{0} 点 / {1} 点‬","VEGAS/label.time":"‪時間: {0}‬","VEGAS/yourNewBest":"‪最高点更新‬","VEGAS/pattern.0yourBest":"‪最高点: {0}‬","VEGAS/continue":"‪続ける‬","VEGAS/newLevel":"‪新しいレベル‬","VEGAS/keepGoing":"‪続けてください‬","VEGAS/score":"‪スコア‬","VEGAS/pattern.score.number":"‪スコア: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ka:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪გადატვირთვა‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪ხელახლა დაწყება‬","VEGAS/label.level":"‪საფეხური: {0}‬","VEGAS/pattern.0challenge.1max":"‪თავსატეხი {0}  {1}-დან‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪სცადე განმეორებით‬","VEGAS/excellent":"‪საუკეთესოა!‬","VEGAS/great":"‪მაგარია!‬","VEGAS/good":"‪კარგია!‬","VEGAS/label.score.max":"‪ქულა: {1}-დან {0}‬","VEGAS/label.time":"‪დრო: {0}‬","VEGAS/yourNewBest":"‪(შენი ახალი საუკეთესო!)‬","VEGAS/pattern.0yourBest":"‪(შენი საუკეთესო ქულაა: {0})‬","VEGAS/continue":"‪გააგრძელე‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪ქულა :‬","VEGAS/pattern.score.number":"‪ქულა : {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ki:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},kk:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Сіз барлық деңгейді өттіңіз!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Басынан бастау‬","VEGAS/label.level":"‪Деңгей: {0}‬","VEGAS/pattern.0challenge.1max":"‪Тапсырма {0}/{1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Қайтадан бастау‬","VEGAS/excellent":"‪Керемет!‬","VEGAS/great":"‪Өте жақсы!‬","VEGAS/good":"‪Жақсы!‬","VEGAS/label.score.max":"‪Балл саны: {0}/{1}‬","VEGAS/label.time":"‪Уақыты: {0}‬","VEGAS/yourNewBest":"‪(Сіздің жаңа рекордыңыз!)‬","VEGAS/pattern.0yourBest":"‪(Сіздің рекордыңыз: {0})‬","VEGAS/continue":"‪Жалғастыру‬","VEGAS/newLevel":"‪Жаңа деңгей‬","VEGAS/keepGoing":"‪Жалғастыр‬","VEGAS/score":"‪Балл саны:‬","VEGAS/pattern.score.number":"‪Балл саны: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},kn:{"SCENERY_PHET/webglWarning.body":"‪WebGLಅನ್ನು ಸಕ್ರಿಯಗೊಳಿಸಿಲ್ಲ ಅಥವಾ ಲಭ್ಯವಿಲ್ಲ.   ಹೆಚ್ಚು ತಿಳಿಯಲು ಕ್ಲಿಕ್\r\n  ಮಾಡಿ.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ಕ್ಷಮಿಸಿ, ಗ್ರ್ಯಾಫಿಕ್ ದೋಷ ಸಂಭವಿಸಿದೆ‬","SCENERY_PHET/webglWarning.contextLossReload":"‪ಮರುಪ್ರಯತ್ನಿಸಿ‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪ಪುನಃ ಆರಂಭಿಸಿ‬","VEGAS/label.level":"‪ಮಟ್ಟ {0}‬","VEGAS/pattern.0challenge.1max":"‪ಸವಾಲು  {0} ಪೈಕಿ {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ಪ್ರಯತ್ನಿಸುತ್ತಲೇ ಇರಿ‬","VEGAS/excellent":"‪ಅತ್ಯುತ್ತಮ!‬","VEGAS/great":"‪ಅದ್ಭುತ!‬","VEGAS/good":"‪ಉತ್ತಮ!‬","VEGAS/label.score.max":"‪ಅಂಕ: {0} ಪೈಕಿ{1}‬","VEGAS/label.time":"‪ಸಮಯ: {0}‬","VEGAS/yourNewBest":"‪( ನಿಮ್ಮ ಹೊಸ ಅತ್ಯುತ್ತಮ !)‬","VEGAS/pattern.0yourBest":"‪(ನಿಮ್ಮ ಅತ್ಯುತ್ತಮ : {0})‬","VEGAS/continue":"‪ಮುಂದುವರಿಸಿ‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪ಅಂಕ:‬","VEGAS/pattern.score.number":"‪ಅಂಕ : {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ko:{"SCENERY_PHET/webglWarning.body":"‪WebGL을 사용할 수 없습니다. 더 자세한 내용을 보시려면 클릭하세요‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪미안합니다. 그래프 오류가 발생했습니다.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪다시 로드‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪이 수준을 끝냈습니다!‬","VEGAS/done":"‪완료‬","VEGAS/startOver":"‪다시 시작‬","VEGAS/label.level":"‪수준: {0}‬","VEGAS/pattern.0challenge.1max":"‪{1} 중에서 {0} 도전‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪계속 해보세요‬","VEGAS/excellent":"‪잘 했어요!‬","VEGAS/great":"‪그렇죠!‬","VEGAS/good":"‪좋아요!‬","VEGAS/label.score.max":"‪점수: {1} 점 만점에 {0}점‬","VEGAS/label.time":"‪시간: {0}‬","VEGAS/yourNewBest":"‪새로운 최고 점수!‬","VEGAS/pattern.0yourBest":"‪최고 점수: {0}‬","VEGAS/continue":"‪계속‬","VEGAS/newLevel":"‪새로운 수준!‬","VEGAS/keepGoing":"‪계속 하세요‬","VEGAS/score":"‪점수:‬","VEGAS/pattern.score.number":"‪점수: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ku_TR:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ku:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},lg:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},lo:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ຂໍອະໄພ, ເສັ້ນທີ່ປະກົດຢູ່ມີບັນຫາ‬","SCENERY_PHET/webglWarning.contextLossReload":"‪ໂຫລດຊໍ້າ‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪ທ່ານສຳເລັດທຸກລະດັບ!‬","VEGAS/done":"‪ສຳເລັດ‬","VEGAS/startOver":"‪ເລີ່ມຕົ້ນໃໝ່‬","VEGAS/label.level":"‪ລະດັບ: {0}‬","VEGAS/pattern.0challenge.1max":"‪ທ້າທາຍ {0} ໃນ {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ພະຍາຍາມຕໍ່ໄປ‬","VEGAS/excellent":"‪ເກັ່ງຫຼາຍ!‬","VEGAS/great":"‪ດີຫຼາຍ!‬","VEGAS/good":"‪ດີ‬","VEGAS/label.score.max":"‪ຄະແນນ: {0} ຈາກທັງໝົດ {1}‬","VEGAS/label.time":"‪ເວລາ: {0}‬","VEGAS/yourNewBest":"‪(ສະຖິຕິໃໝ່ຂອງທ່ານ!)‬","VEGAS/pattern.0yourBest":"‪(ດີຫຼາຍ: {0})‬","VEGAS/continue":"‪ສືບຕໍ່‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪ຄະແນນ:‬","VEGAS/pattern.score.number":"‪ຄະແນນ: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},lt:{"SCENERY_PHET/webglWarning.body":"‪WebGL yra neįjungtas arba nepasiekiamas. Spustelk, kad sužinotum daugiau.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Atsiprašome, įvyko grafikos klaida.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Perkrauti‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Užbaigei visus lygius!‬","VEGAS/done":"‪Baigta‬","VEGAS/startOver":"‪Pradėti iš naujo‬","VEGAS/label.level":"‪Lygis: {0}‬","VEGAS/pattern.0challenge.1max":"‪Iššūkis  {0} iš {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Pabandyk dar kartą‬","VEGAS/excellent":"‪Puikiai!‬","VEGAS/great":"‪Labai gerai!‬","VEGAS/good":"‪Gerai!‬","VEGAS/label.score.max":"‪Taškai: {0} iš {1}‬","VEGAS/label.time":"‪Laikas: {0}‬","VEGAS/yourNewBest":"‪(Tavo naujas rekordas)‬","VEGAS/pattern.0yourBest":"‪(Geriausias rezultatas {0})‬","VEGAS/continue":"‪Pratęsti‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Taškai:‬","VEGAS/pattern.score.number":"‪Taškai: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},lv:{"SCENERY_PHET/webglWarning.body":"‪WebGL nav ieslēgts vai pieejams. Noklikšķiniet, lai uzzinātu vairāk.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Atvainojiet, radās grafiskās apstrādes kļūda.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Pārlādēt‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Tu pabeidzi visus līmeņus!‬","VEGAS/done":"‪Labi‬","VEGAS/startOver":"‪Sākt no jauna‬","VEGAS/label.level":"‪{0}. līmenis‬","VEGAS/pattern.0challenge.1max":"‪{0}. uzdevums no {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Turpini mēģināt‬","VEGAS/excellent":"‪Izcili!‬","VEGAS/great":"‪Lieliski!‬","VEGAS/good":"‪Labi!‬","VEGAS/label.score.max":"‪Rezultāts: {0} no {1}‬","VEGAS/label.time":"‪Laiks: {0}‬","VEGAS/yourNewBest":"‪(Jauns labākais rezultāts!)‬","VEGAS/pattern.0yourBest":"‪(Labākais rezultāts: {0})‬","VEGAS/continue":"‪Turpināt‬","VEGAS/newLevel":"‪Jauns līmenis‬","VEGAS/keepGoing":"‪Tā turpini‬","VEGAS/score":"‪Rezultāts‬","VEGAS/pattern.score.number":"‪Rezultāts: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},mi:{"SCENERY_PHET/webglWarning.body":"‪Kāore e taea te WebGL, kāore i te whakaritea rānei. Pāwhiritia ki ako anō.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Tāmata‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Kua oti i a koe ngā taumata katoa!‬","VEGAS/done":"‪Kua Oti‬","VEGAS/startOver":"‪Tīmata Anō‬","VEGAS/label.level":"‪Taumata: {0}‬","VEGAS/pattern.0challenge.1max":"‪Wero {0} o {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Kia kaha tonu‬","VEGAS/excellent":"‪Ka Mau Te Wehi!‬","VEGAS/great":"‪Ka Rawe!‬","VEGAS/good":"‪Ka Pai!‬","VEGAS/label.score.max":"‪Whiwhinga: {0} o {1}‬","VEGAS/label.time":"‪Wā: {0}‬","VEGAS/yourNewBest":"‪(Tāhau nā Pai Rawa hou!)‬","VEGAS/pattern.0yourBest":"‪(Tāhau na pai rawa: {0})‬","VEGAS/continue":"‪Haere tonu‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Piro:‬","VEGAS/pattern.score.number":"‪Piro: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},mn:{"SCENERY_PHET/webglWarning.body":"‪WebGL нь боломжгүй. Нэмж суралцахыг товш.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Уучлаарай, Дэлгэцийн алдаа‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Дахих‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Бүх түвшинг гүйцээлээ!‬","VEGAS/done":"‪Гүйцээ‬","VEGAS/startOver":"‪Бүр Эхлүүлэх‬","VEGAS/label.level":"‪Түвшин: {0}‬","VEGAS/pattern.0challenge.1max":"‪Үе {1}-ийн {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Дахин оролдох‬","VEGAS/excellent":"‪Онц сайн!‬","VEGAS/great":"‪Онц!‬","VEGAS/good":"‪Сайн!‬","VEGAS/label.score.max":"‪Оноо: {1}-с {0}‬","VEGAS/label.time":"‪Хугацаа: {0}‬","VEGAS/yourNewBest":"‪(Таны шинэ дээд амжилт!)‬","VEGAS/pattern.0yourBest":"‪(Таны дээд амжилт: {0})‬","VEGAS/continue":"‪Үргэлжлүүлэх‬","VEGAS/newLevel":"‪Шинэ түвшин‬","VEGAS/keepGoing":"‪Үргэлжлүүл‬","VEGAS/score":"‪Оноо:‬","VEGAS/pattern.score.number":"‪Оноо: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},mr:{"SCENERY_PHET/webglWarning.body":"‪WebGL सक्षम नाही किंवा उपलब्ध नाही. आधिक जाणून घेण्यासाठी क्लिक करा‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ग्राफीक त्रूटी उत्पन‬","SCENERY_PHET/webglWarning.contextLossReload":"‪पुन्हा सुरु करा‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪पुन्हा सुरु करा‬","VEGAS/label.level":"‪पातळी: {0}‬","VEGAS/pattern.0challenge.1max":"‪आव्हान {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪प्रयत्न करा‬","VEGAS/excellent":"‪अप्रतिम‬","VEGAS/great":"‪मस्त !‬","VEGAS/good":"‪शाब्बास!‬","VEGAS/label.score.max":"‪गुण : {0} पैकी  {1}‬","VEGAS/label.time":"‪वेळ : {0}‬","VEGAS/yourNewBest":"‪(तुमचे नविन सर्वोत्तम गुण)‬","VEGAS/pattern.0yourBest":"‪(तुमचे सर्वोत्तम गुण : {0})‬","VEGAS/continue":"‪पुढे‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪गुण‬","VEGAS/pattern.score.number":"‪गुण : {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ms:{"SCENERY_PHET/webglWarning.body":"‪WebGL tidak dibolehkan atau tidak tersedia. Klik untuk mengetahui lebih lanjut.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Maaf, ralat grafik telah berlaku.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Semua tahap telah selesai!‬","VEGAS/done":"‪Selesai‬","VEGAS/startOver":"‪Mula Semula‬","VEGAS/label.level":"‪Tahap {0}‬","VEGAS/pattern.0challenge.1max":"‪Cabaran {0} daripada {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Teruskan Mencuba‬","VEGAS/excellent":"‪Terbaik!‬","VEGAS/great":"‪Tahniah!‬","VEGAS/good":"‪Bagus!‬","VEGAS/label.score.max":"‪Markah: {0} daripada {1}‬","VEGAS/label.time":"‪Masa: {0}‬","VEGAS/yourNewBest":"‪(Memecah Rekod Terbaik!)‬","VEGAS/pattern.0yourBest":"‪(Rekod Terbaik: {0})‬","VEGAS/continue":"‪Teruskan‬","VEGAS/newLevel":"‪Tahap Baru‬","VEGAS/keepGoing":"‪Teruskan‬","VEGAS/score":"‪Markah:‬","VEGAS/pattern.score.number":"‪Markah: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},mt:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Skuzana, zball grafiku fis-sehh.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Erga Llodja‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Erga' Ibda‬","VEGAS/label.level":"‪Lvell:{0}}‬","VEGAS/pattern.0challenge.1max":"‪Sfida {0} minn {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ibqa' pprova‬","VEGAS/excellent":"‪Eccellenti!‬","VEGAS/great":"‪Prosit!‬","VEGAS/good":"‪Tajjeb!‬","VEGAS/label.score.max":"‪Punti: {0} minn {1}‬","VEGAS/label.time":"‪Hin:{0}‬","VEGAS/yourNewBest":"‪(L-ahjar rizultat li gibt sa issa!)‬","VEGAS/pattern.0yourBest":"‪(L-ahjar rizultat li gibt:{0})‬","VEGAS/continue":"‪Kompli‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},my:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪အဆင့်အားလုံး အောင်မြင်စွာဖြေဆိုနိုင်ပါသည်‬","VEGAS/done":"‪ပြီးဆုံးပါပြီ‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ဆက်ကြိုးစားပါ‬","VEGAS/excellent":"‪တော်လိုက်တာ!‬","VEGAS/great":"‪အလွန်တော်တာပဲ!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪အကောင်းဆုံး စံချိန်ရလာဒ်‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪ဆက်သွားပါ‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪ရလာဒ်‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},nb:{"SCENERY_PHET/webglWarning.body":"‪WebGL er ikke aktivert eller tilgjengelig. Klikk for å lære mer om dette.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Beklager, grafikkfeil‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Start på nytt‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start på nytt‬","VEGAS/label.level":"‪Nivå: {0}‬","VEGAS/pattern.0challenge.1max":"‪Forsøk {0} av {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Prøv igjen‬","VEGAS/excellent":"‪Bravo!‬","VEGAS/great":"‪Supert!‬","VEGAS/good":"‪Fint!‬","VEGAS/label.score.max":"‪Resultat:  {0} av{1}‬","VEGAS/label.time":"‪Tid: {0}‬","VEGAS/yourNewBest":"‪{Din nye beste}‬","VEGAS/pattern.0yourBest":"‪(Din beste: {0})‬","VEGAS/continue":"‪Fortsett‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ne:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},nl:{"SCENERY_PHET/webglWarning.body":"‪WebGL is niet actief of beschikbaar. Klik om meer te weten te komen.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Er trad een grafische fout op‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Opnieuw inladen‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Je bent klaar op alle niveau's‬","VEGAS/done":"‪Klaar‬","VEGAS/startOver":"‪Start opnieuw‬","VEGAS/label.level":"‪Niveau: {0}‬","VEGAS/pattern.0challenge.1max":"‪Uitdaging {0} van {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Probeer nog eens‬","VEGAS/excellent":"‪Uitstekend!‬","VEGAS/great":"‪Geweldig!‬","VEGAS/good":"‪Goed!‬","VEGAS/label.score.max":"‪Score: {0} van {1}‬","VEGAS/label.time":"‪Tijd: {0}‬","VEGAS/yourNewBest":"‪(Je nieuwste beste!)‬","VEGAS/pattern.0yourBest":"‪(Je beste: {0})‬","VEGAS/continue":"‪Doe voort‬","VEGAS/newLevel":"‪Nieuw niveau‬","VEGAS/keepGoing":"‪Doe zo voort‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},nn:{"SCENERY_PHET/webglWarning.body":"‪v‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Beklagar, grafikkfeil‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Last på nytt‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Du har fullført alle nivåa!‬","VEGAS/done":"‪Ferdig‬","VEGAS/startOver":"‪Start på ny‬","VEGAS/label.level":"‪Nivå: {0}‬","VEGAS/pattern.0challenge.1max":"‪Utfordring {0} av {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ikkje gje opp‬","VEGAS/excellent":"‪Fantastisk!‬","VEGAS/great":"‪Bra!‬","VEGAS/good":"‪Godt!‬","VEGAS/label.score.max":"‪Poeng: {0} av {1}‬","VEGAS/label.time":"‪Tid: {0}‬","VEGAS/yourNewBest":"‪(Ny personleg rekord!)‬","VEGAS/pattern.0yourBest":"‪(Personleg rekord: {0})‬","VEGAS/continue":"‪Fortsett‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Poengsum:‬","VEGAS/pattern.score.number":"‪Poengsum: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ny:{"SCENERY_PHET/webglWarning.body":"‪WebGL siyoyatsidwa kapena palibe. Dinani kuti mudziwe zambiri.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Pepani, cholakwika chajambula chachitika.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Kuikanso‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Mwamaliza magawo onse!‬","VEGAS/done":"‪Zachitika‬","VEGAS/startOver":"‪Yambani Kachiwiri‬","VEGAS/label.level":"‪Gawo: {0}‬","VEGAS/pattern.0challenge.1max":"‪Ntchito {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Pitirizani Kuyesera‬","VEGAS/excellent":"‪Wakhoza bwino kwambiri!‬","VEGAS/great":"‪Wakhoza bwino‬","VEGAS/good":"‪Wakhoza!‬","VEGAS/label.score.max":"‪Wapeza: {0} pa {1}‬","VEGAS/label.time":"‪Nthawi:  {0}‬","VEGAS/yourNewBest":"‪(Wubwino wanu watsopano!)‬","VEGAS/pattern.0yourBest":"‪(Wubwino wanu: {0})‬","VEGAS/continue":"‪Pitirizani‬","VEGAS/newLevel":"‪Gawo Latsopano‬","VEGAS/keepGoing":"‪Kapitiriranibe‬","VEGAS/score":"‪Wapeza:‬","VEGAS/pattern.score.number":"‪Wapeza: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},om:{"SCENERY_PHET/webglWarning.body":"‪WebGL hin dandeessifamne ykn hin argamu. Caalaatti baruuf cuqaasaa.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Dhiifama, Dogongora giraafiksitu uumame‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Irra deebin fe'i‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Sadarkalee hunda Xumurteetta!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Irratti Jalqabi‬","VEGAS/label.level":"‪Sadarkaa: {0}‬","VEGAS/pattern.0challenge.1max":"‪Danqaa  {0} Gaaffota {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Yaali itti-fufu‬","VEGAS/excellent":"‪Baay'ee Baay'ee Gaarii!‬","VEGAS/great":"‪Baay'ee Gaariidha!‬","VEGAS/good":"‪Gaariidha!‬","VEGAS/label.score.max":"‪Qabxii: {1} keessaa {0}‬","VEGAS/label.time":"‪Yeroo: {0}‬","VEGAS/yourNewBest":"‪(waan haaraa siif caalu!)‬","VEGAS/pattern.0yourBest":"‪(kan siif caalu: {0})‬","VEGAS/continue":"‪Itti-fufi‬","VEGAS/newLevel":"‪Sadarkaa Haaraa‬","VEGAS/keepGoing":"‪Adeemsa Itti-fufi‬","VEGAS/score":"‪Qabxii:‬","VEGAS/pattern.score.number":"‪Qabxii: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},or:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},pl:{"SCENERY_PHET/webglWarning.body":"‪WebGL jest wyłączony lub niedostępny. Kliknij, aby dowiedzieć się więcej.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Przepraszamy, wystąpił błąd graficzny.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Odśwież‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Ukończyłeś wszystkie poziomy!‬","VEGAS/done":"‪Gotowe‬","VEGAS/startOver":"‪Zacznij od nowa‬","VEGAS/label.level":"‪Poziom: {0}‬","VEGAS/pattern.0challenge.1max":"‪Zadanie {0} z {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Próbuj dalej‬","VEGAS/excellent":"‪Doskonale!‬","VEGAS/great":"‪Świetnie !‬","VEGAS/good":"‪Dobrze!‬","VEGAS/label.score.max":"‪Wynik: {0} z {1}‬","VEGAS/label.time":"‪Czas: {0}‬","VEGAS/yourNewBest":"‪(Twój nowy rekord!)‬","VEGAS/pattern.0yourBest":"‪(Twój rekord: {0})‬","VEGAS/continue":"‪Kontynuuj‬","VEGAS/newLevel":"‪Nowy poziom‬","VEGAS/keepGoing":"‪Kontynuuj‬","VEGAS/score":"‪Wynik:‬","VEGAS/pattern.score.number":"‪Wynik: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},pt_BR:{"SCENERY_PHET/webglWarning.body":"‪WebGL não habilitado ou indisponível. Clique para saber mais.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Desculpe-nos, ocorreu um erro gráfico.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recarregar‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Você completou todos os níveis!‬","VEGAS/done":"‪Feito‬","VEGAS/startOver":"‪Reiniciar‬","VEGAS/label.level":"‪Nível: {0}‬","VEGAS/pattern.0challenge.1max":"‪Desafio {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Continue Tentando‬","VEGAS/excellent":"‪Excelente!‬","VEGAS/great":"‪Muito bem!‬","VEGAS/good":"‪Bom!‬","VEGAS/label.score.max":"‪Pontos: {0} de {1}‬","VEGAS/label.time":"‪Tempo: {0}‬","VEGAS/yourNewBest":"‪(Sua nova melhor marca!)‬","VEGAS/pattern.0yourBest":"‪(Sua melhor marca: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪Novo Nível‬","VEGAS/keepGoing":"‪Continue‬","VEGAS/score":"‪Pontos:‬","VEGAS/pattern.score.number":"‪Pontos: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},pt:{"SCENERY_PHET/webglWarning.body":"‪WebGL não está habilitado ou não está disponível. Clique para saber mais.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Desculpe, ocorreu um erro gráfico.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Recarregar‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Completaste os níveis todos!‬","VEGAS/done":"‪Feito‬","VEGAS/startOver":"‪Recomeçar‬","VEGAS/label.level":"‪Nível: {0}‬","VEGAS/pattern.0challenge.1max":"‪Desafio {0} de {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Volta a tentar...‬","VEGAS/excellent":"‪Excelente!‬","VEGAS/great":"‪Excelente Trabalho !‬","VEGAS/good":"‪Correto !‬","VEGAS/label.score.max":"‪Resultado: {0} em {1}‬","VEGAS/label.time":"‪Tempo: {0}‬","VEGAS/yourNewBest":"‪(O teu novo Recorde!)‬","VEGAS/pattern.0yourBest":"‪(O teu recorde: {0})‬","VEGAS/continue":"‪Continuar‬","VEGAS/newLevel":"‪Novo nível‬","VEGAS/keepGoing":"‪Continua‬","VEGAS/score":"‪Resultado:‬","VEGAS/pattern.score.number":"‪Resultado: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ro:{"SCENERY_PHET/webglWarning.body":"‪WebGL nu este activat sau nu este disponibil. Faceți clic pentru a afla mai multe.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Ne pare rău, a apărut o eroare grafică.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reînoiește‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Ai terminat toate nivelele!‬","VEGAS/done":"‪Gata‬","VEGAS/startOver":"‪De la început‬","VEGAS/label.level":"‪Nivelul: {0}‬","VEGAS/pattern.0challenge.1max":"‪Întrebarea {0} din {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Mai încearcă‬","VEGAS/excellent":"‪Excelent!‬","VEGAS/great":"‪Grozav!‬","VEGAS/good":"‪Bine!‬","VEGAS/label.score.max":"‪Scor: {0} din {1}‬","VEGAS/label.time":"‪Cronometru: {0}‬","VEGAS/yourNewBest":"‪(Nou record personal!)‬","VEGAS/pattern.0yourBest":"‪(Record personal: {0})‬","VEGAS/continue":"‪Continuă‬","VEGAS/newLevel":"‪Nivel nou‬","VEGAS/keepGoing":"‪Continuă‬","VEGAS/score":"‪Scor:‬","VEGAS/pattern.score.number":"‪Scor: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ru:{"SCENERY_PHET/webglWarning.body":"‪WebGL не активирован или не установлен. Нажмите здесь чтобы узнать больше.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Извините, произошла ошибка‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Перезагрузить‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Вы прошли все уровни!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Новая игра‬","VEGAS/label.level":"‪Уровень: {0}‬","VEGAS/pattern.0challenge.1max":"‪Задание {0} из {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Попробуйте снова‬","VEGAS/excellent":"‪Превосходно!‬","VEGAS/great":"‪Отлично!‬","VEGAS/good":"‪Хорошо!‬","VEGAS/label.score.max":"‪Баллы: {0} из {1}‬","VEGAS/label.time":"‪Время: {0}‬","VEGAS/yourNewBest":"‪(Ваш новый рекорд!)‬","VEGAS/pattern.0yourBest":"‪(Ваш рекорд: {0})‬","VEGAS/continue":"‪Продолжить‬","VEGAS/newLevel":"‪Новый уровень‬","VEGAS/keepGoing":"‪Продолжай‬","VEGAS/score":"‪Баллы:‬","VEGAS/pattern.score.number":"‪Баллы: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},rw:{"SCENERY_PHET/webglWarning.body":"‪WebGL ntabwo ishoboye cyangwa ntishobora kuboneka. Kanda kugirango wige byinshi.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Ihangane, habaye ikosa ry'ishusho‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ongera usubiremo‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Wasoje hose!‬","VEGAS/done":"‪Byakozwe‬","VEGAS/startOver":"‪Tangira‬","VEGAS/label.level":"‪Urwego: {0}‬","VEGAS/pattern.0challenge.1max":"‪Ikibazo  {0} muri {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Komeza Ugerageze‬","VEGAS/excellent":"‪Byiza cyane!‬","VEGAS/great":"‪Byiza!‬","VEGAS/good":"‪Byiza!‬","VEGAS/label.score.max":"‪Amanota{0} kuri {1}‬","VEGAS/label.time":"‪Igihe: {0}‬","VEGAS/yourNewBest":"‪(Ibyiza byawe bishya!)‬","VEGAS/pattern.0yourBest":"‪(Ibyiza byawe:{0})‬","VEGAS/continue":"‪Gukomeza‬","VEGAS/newLevel":"‪Urwego rushya‬","VEGAS/keepGoing":"‪Komeza‬","VEGAS/score":"‪Amanota:‬","VEGAS/pattern.score.number":"‪Amanota:{{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},sd:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},si:{"SCENERY_PHET/webglWarning.body":"‪WebGL සක්‍රිය කර නැත හෝ ලබාගත නොහැකිය. වැඩිදුර දැනගැනීමට ක්ලික් කරන්න‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪සමාවන්න, චිත්‍රක දෝෂයක් පැන නැගී ඇත.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪නැවත ප්‍රවේශනය කරන්න‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪ඔබ සියලු මට්ටම් සම්පූර්ණ කළා !‬","VEGAS/done":"‪ඉවරයි‬","VEGAS/startOver":"‪නැවත අරඹන්න‬","VEGAS/label.level":"‪මට්ටම: {0}‬","VEGAS/pattern.0challenge.1max":"‪අභියෝගය {1} හි {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪දිගටම උත්සාහ කරන්න‬","VEGAS/excellent":"‪විශිෂ්ටයි!‬","VEGAS/great":"‪විශිෂ්ටයි!‬","VEGAS/good":"‪හොඳයි!‬","VEGAS/label.score.max":"‪ලකුණු: {1}න් {0}‬","VEGAS/label.time":"‪කාලය: {0}‬","VEGAS/yourNewBest":"‪(ඔබේ නවතම, හොඳම!)‬","VEGAS/pattern.0yourBest":"‪(ඔබේ හොඳම: {0})‬","VEGAS/continue":"‪නොකඩවාම කරගෙන යන්න‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪ලකුණු:‬","VEGAS/pattern.score.number":"‪ලකුණු: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},sk:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Prepáčte, došlo k chybe v grafike‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Opäť načítať‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Začať odznova‬","VEGAS/label.level":"‪Úroveň: {0}‬","VEGAS/pattern.0challenge.1max":"‪Výzva {0} z {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Skúšaj ďalej‬","VEGAS/excellent":"‪Vynikajúco!‬","VEGAS/great":"‪Skvelé!‬","VEGAS/good":"‪Dobré!‬","VEGAS/label.score.max":"‪Skóre: {0} z {1}‬","VEGAS/label.time":"‪Čas: {0}‬","VEGAS/yourNewBest":"‪(Tvoje nové maximum!)‬","VEGAS/pattern.0yourBest":"‪(Tvoje maximum: {0})‬","VEGAS/continue":"‪Pokračovať‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},sl:{"SCENERY_PHET/webglWarning.body":"‪WebGL ni omogočen ali ni na voljo. Kliknite za več.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Oprostite, prišlo je do napake v grafiki.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ponovno naloži‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Rešili ste vse nivoje težavnosti!‬","VEGAS/done":"‪Narejeno‬","VEGAS/startOver":"‪Začni znova‬","VEGAS/label.level":"‪Težavnost: {0}‬","VEGAS/pattern.0challenge.1max":"‪Izziv {0} od {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Ne odnehaj‬","VEGAS/excellent":"‪Odlično!‬","VEGAS/great":"‪Super!‬","VEGAS/good":"‪Dobro!‬","VEGAS/label.score.max":"‪Rezultat: {0} od {1}‬","VEGAS/label.time":"‪Čas: {0}‬","VEGAS/yourNewBest":"‪(Tvoj nov najboljši rezultat!)‬","VEGAS/pattern.0yourBest":"‪(Tvoj najboljši rezultat: {0})‬","VEGAS/continue":"‪Nadaljuj‬","VEGAS/newLevel":"‪Nava raven‬","VEGAS/keepGoing":"‪Nadaljuj‬","VEGAS/score":"‪Rezultat‬","VEGAS/pattern.score.number":"‪Rezultat: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},sq:{"SCENERY_PHET/webglWarning.body":"‪WebGL nuk është e lejuar. Kliko për të mësuar më shumë.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Na falni, ka ndodhur një gabim grafik‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ringarko‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Kompletuat të gjitha nivelet‬","VEGAS/done":"‪Kryer‬","VEGAS/startOver":"‪Rifillo‬","VEGAS/label.level":"‪Niveli: {0}‬","VEGAS/pattern.0challenge.1max":"‪Sfido {0} prej {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Vazhdo të provosh‬","VEGAS/excellent":"‪Shkëlqyeshëm!‬","VEGAS/great":"‪Mrekulli!‬","VEGAS/good":"‪Mirë!‬","VEGAS/label.score.max":"‪Pikët: {0} nga {1}‬","VEGAS/label.time":"‪Koha: {0}‬","VEGAS/yourNewBest":"‪(Rezultati i ri më i mirë!)‬","VEGAS/pattern.0yourBest":"‪(Rezultati më i mirë: {0})‬","VEGAS/continue":"‪Vazhdo‬","VEGAS/newLevel":"‪Nivel i ri‬","VEGAS/keepGoing":"‪Vazhdo‬","VEGAS/score":"‪Pikët:‬","VEGAS/pattern.score.number":"‪Pikët: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},sr:{"SCENERY_PHET/webglWarning.body":"‪WebGL није омогућен или није доступан. Кликните да бисте сазнали више.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Извините, дошло је до графичке грешке‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Поново учитај‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Комплетирани сви нивои! Свака част!‬","VEGAS/done":"‪Готово‬","VEGAS/startOver":"‪Почни изнова‬","VEGAS/label.level":"‪Ниво: {0}‬","VEGAS/pattern.0challenge.1max":"‪Избор {0} до {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Настави да покушаваш‬","VEGAS/excellent":"‪Изванредно!‬","VEGAS/great":"‪Браво!‬","VEGAS/good":"‪Одлично!‬","VEGAS/label.score.max":"‪Укупно: {0}  од {1}‬","VEGAS/label.time":"‪Време: {0}‬","VEGAS/yourNewBest":"‪(Твој нови рекорд!)‬","VEGAS/pattern.0yourBest":"‪(Твој рекорд: {0})‬","VEGAS/continue":"‪Настави‬","VEGAS/newLevel":"‪Нови ниво‬","VEGAS/keepGoing":"‪Настави‬","VEGAS/score":"‪Резултат:‬","VEGAS/pattern.score.number":"‪Резултат: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},st:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪t'sela hape‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Qala Qalong‬","VEGAS/label.level":"‪Boleng: {0}‬","VEGAS/pattern.0challenge.1max":"‪Teko {0} ea {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Leka Hape‬","VEGAS/excellent":"‪U nepile Haholo-holo‬","VEGAS/great":"‪U nepile haholo‬","VEGAS/good":"‪U nepile‬","VEGAS/label.score.max":"‪Moputso:{0}holimo ho{1}‬","VEGAS/label.time":"‪Nako: {0}‬","VEGAS/yourNewBest":"‪Bokhoni ba hau bo botle‬","VEGAS/pattern.0yourBest":"‪Bokhoni ba hau: {0}‬","VEGAS/continue":"‪Tsoela pele‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Moputso‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},sv:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Ledsen, ett grafikfel har uppstått‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Ladda på nytt‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Du slutförde alla nivåer!‬","VEGAS/done":"‪Klart‬","VEGAS/startOver":"‪Börja om‬","VEGAS/label.level":"‪Nivå: {0}‬","VEGAS/pattern.0challenge.1max":"‪Utmaning {0} av {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Försök igen‬","VEGAS/excellent":"‪Utmärkt!‬","VEGAS/great":"‪Mycket bra!‬","VEGAS/good":"‪Bra!‬","VEGAS/label.score.max":"‪Poäng: {0} av {1}‬","VEGAS/label.time":"‪Tid: {0}‬","VEGAS/yourNewBest":"‪(Ditt nya rekord!)‬","VEGAS/pattern.0yourBest":"‪(Ditt rekord: {0})‬","VEGAS/continue":"‪Fortsätt‬","VEGAS/newLevel":"‪Ny nivå‬","VEGAS/keepGoing":"‪Fortsätt‬","VEGAS/score":"‪Poäng:‬","VEGAS/pattern.score.number":"‪Poäng: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},sw:{"SCENERY_PHET/webglWarning.body":"‪WebGL haijawashwa au haipatikani.Bofya ili kujifunza zaidi.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Samahani, kosa la kimchoro limetokea‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reloadi‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Umemaliza levo zote‬","VEGAS/done":"‪Imefanyika‬","VEGAS/startOver":"‪Anza Upya‬","VEGAS/label.level":"‪Kiwango: {0}‬","VEGAS/pattern.0challenge.1max":"‪Changamoto {0} ya {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Endelea kujaribu‬","VEGAS/excellent":"‪Safi Sana!‬","VEGAS/great":"‪Safi!‬","VEGAS/good":"‪Nzuri!‬","VEGAS/label.score.max":"‪Alama: {0} toka {1}‬","VEGAS/label.time":"‪Muda: {0}‬","VEGAS/yourNewBest":"‪(Matokeo yako ya bora mpya!)‬","VEGAS/pattern.0yourBest":"‪(Matokeo yako ya bora: {0})‬","VEGAS/continue":"‪Endelea‬","VEGAS/newLevel":"‪Kiwango Kipya‬","VEGAS/keepGoing":"‪Endelea‬","VEGAS/score":"‪Alama:‬","VEGAS/pattern.score.number":"‪Alama: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ta:{"SCENERY_PHET/webglWarning.body":"‪WebGL இயக்கநிலை படுத்தப்படவில்லை அல்லது கிடைக்கக் கூடியதாயில்லை. மேலும் அறிய கிளிக் செய்க‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪மன்னிக்கவும், ஒரு வரைவியல்  வழு ஏற்பட்டுள்ளது‬","SCENERY_PHET/webglWarning.contextLossReload":"‪மீள ஏற்று‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪எல்லா மட்டங்களையும் நிறைவு செய்துள்ளீர்கள்‬","VEGAS/done":"‪முடிவடைந்தது‬","VEGAS/startOver":"‪மீண்டும் ஆரம்பி‬","VEGAS/label.level":"‪மட்டம் : {0}‬","VEGAS/pattern.0challenge.1max":"‪சவால்   {1} இன் {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪முயற்சி செய்துகொண்டிரு‬","VEGAS/excellent":"‪தலைசிறந்தது‬","VEGAS/great":"‪சிறப்பானது‬","VEGAS/good":"‪நன்று‬","VEGAS/label.score.max":"‪புள்ளி: {1} இல்  {0}‬","VEGAS/label.time":"‪நேரம் : {0}‬","VEGAS/yourNewBest":"‪( உமது சிறந்த புதியது)‬","VEGAS/pattern.0yourBest":"‪(உமது சிறந்தது: {0})‬","VEGAS/continue":"‪தொடர்ந்து‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪புள்ளி‬","VEGAS/pattern.score.number":"‪புள்ளி: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},te:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪మన్నించండి, గ్రాఫిక్స్ తప్పిదం దొర్లింది‬","SCENERY_PHET/webglWarning.contextLossReload":"‪తిరిగి ఆరభించు‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪నీవు అన్ని స్థాయిలనూ పూర్తి చేసావు!‬","VEGAS/done":"‪పూర్తయింది‬","VEGAS/startOver":"‪తిరిగి మొదలు పెట్టు‬","VEGAS/label.level":"‪స్థాయి: {0}‬","VEGAS/pattern.0challenge.1max":"‪సవాలు {1} లో {0}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪ప్రయత్నిస్తూనే ఉండండి‬","VEGAS/excellent":"‪అత్యద్భుతం!‬","VEGAS/great":"‪అద్భుతం!‬","VEGAS/good":"‪శభాష్!‬","VEGAS/label.score.max":"‪స్కోర్: {1} లో  {0}‬","VEGAS/label.time":"‪కాలం: {0}‬","VEGAS/yourNewBest":"‪(నీ కొంగొత్త ఉత్తమ ఫలితం!)‬","VEGAS/pattern.0yourBest":"‪(నీ ఉత్తమ ఫలితం: {0})‬","VEGAS/continue":"‪కొనసాగించు‬","VEGAS/newLevel":"‪కొంగొత్త స్థాయి‬","VEGAS/keepGoing":"‪సాగుతూనే ఉండు‬","VEGAS/score":"‪స్కోర్‬","VEGAS/pattern.score.number":"‪స్కోర్: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},tg:{"SCENERY_PHET/webglWarning.body":"‪WebGL фаъол ё дастрас нест. Барои гирифтани маълумоти бештар клик кунед.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Бубахшед, хатои графикӣ рух дод.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Аз нав бор кунед‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Шумо ҳамаи сатҳҳоро анҷом додед!‬","VEGAS/done":"‪Иҷро шуд‬","VEGAS/startOver":"‪Аз нав‬","VEGAS/label.level":"‪Саҳти: {0}‬","VEGAS/pattern.0challenge.1max":"‪Масъалаи {0} аз {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}: {1}: {2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}: {1}‬","VEGAS/keepTrying":"‪Кӯшиш карданро давом диҳед‬","VEGAS/excellent":"‪Беҳтарин!‬","VEGAS/great":"‪Олиҷаноб!‬","VEGAS/good":"‪Хуб!‬","VEGAS/label.score.max":"‪Баҳогузорӣ: {0} аз {1}‬","VEGAS/label.time":"‪Вақт: {0}‬","VEGAS/yourNewBest":"‪(Натиҷаи беҳтарини нави шумо!)‬","VEGAS/pattern.0yourBest":"‪(Натиҷаи беҳтарини шумо: {0})‬","VEGAS/continue":"‪Идома‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Ҳисоб:‬","VEGAS/pattern.score.number":"‪Хол: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},th:{"SCENERY_PHET/webglWarning.body":"‪WebGL ไม่เปิดทำงานหรือไม่พร้อม ให้กดเพื่อเรียนรู้เพิ่มเติม‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪ขออภัย การแสดงผลกราฟิกมีข้อผิดพลาด‬","SCENERY_PHET/webglWarning.contextLossReload":"‪แสดงผลใหม่อีกครั้ง‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪เริ่มใหม่ตั้งแต่ต้น‬","VEGAS/label.level":"‪ระดับ: {0}‬","VEGAS/pattern.0challenge.1max":"‪ความท้าทาย {0} ของ {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪พยายามใหม่นะ‬","VEGAS/excellent":"‪สุดยอด!‬","VEGAS/great":"‪ระดับเยี่ยม!‬","VEGAS/good":"‪ระดับดี!‬","VEGAS/label.score.max":"‪คะแนน: {0} จากทั้งหมด {1}‬","VEGAS/label.time":"‪เวลาที่ใช้: {0}‬","VEGAS/yourNewBest":"‪ผลที่ดีที่สุดอันใหม่!‬","VEGAS/pattern.0yourBest":"‪ผลที่ดีที่สุด: {0}‬","VEGAS/continue":"‪ดำเนินการต่อ‬","VEGAS/newLevel":"‪เลือกระดับใหม่‬","VEGAS/keepGoing":"‪ทำต่อไป‬","VEGAS/score":"‪คะแนน‬","VEGAS/pattern.score.number":"‪คะแนน: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},tk:{"SCENERY_PHET/webglWarning.body":"‪WebGL işledilmedik ýa-da elýeterli däl. Goşmaça maglumat üçin basyň.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Bagyşlaň, grafika ýalňyşlygy çykdy.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Gaýtadan ýükle‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Siz ähli derejeleri tamamladyňyz!‬","VEGAS/done":"‪Tamamlandy‬","VEGAS/startOver":"‪Täzeden başla‬","VEGAS/label.level":"‪Dereje: {0}‬","VEGAS/pattern.0challenge.1max":"‪Mesele {0} / {1} jemi‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Synanyşmaga dowam et‬","VEGAS/excellent":"‪Örän gowy!‬","VEGAS/great":"‪Berekella!‬","VEGAS/good":"‪Gowy!‬","VEGAS/label.score.max":"‪Utuk: {0} out of {1}‬","VEGAS/label.time":"‪Wagt:{0}‬","VEGAS/yourNewBest":"‪(Täze iň gowy netijäňiz!)‬","VEGAS/pattern.0yourBest":"‪(Iň gowy netijäňiz: {0})‬","VEGAS/continue":"‪Dowam et‬","VEGAS/newLevel":"‪Täze dereje‬","VEGAS/keepGoing":"‪Dowam et‬","VEGAS/score":"‪Utuk:‬","VEGAS/pattern.score.number":"‪Utuk: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},tl:{"SCENERY_PHET/webglWarning.body":"‪Ang WebGL ay hindi pinagana o hindi magagamit. I-click para matuto pa.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Paumanhin, may naganap na graphics error.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Start Over‬","VEGAS/label.level":"‪Level: {0}‬","VEGAS/pattern.0challenge.1max":"‪Challenge {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Keep Trying‬","VEGAS/excellent":"‪Excellent!‬","VEGAS/great":"‪Great!‬","VEGAS/good":"‪Good!‬","VEGAS/label.score.max":"‪Score: {0} out of {1}‬","VEGAS/label.time":"‪Time: {0}‬","VEGAS/yourNewBest":"‪(Your New Best!)‬","VEGAS/pattern.0yourBest":"‪(Your Best: {0})‬","VEGAS/continue":"‪Continue‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Score:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},tn:{"SCENERY_PHET/webglWarning.body":"‪WebGL ga e yo kgotsa e emisitswe. Tobetsa go tsaya dintlha ka botlalo‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Re itshwarele, poso ya setshwantsho sa maranyane e diragetse‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Tsenya gape‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Simolola gape‬","VEGAS/label.level":"‪Selekanyo: {0}‬","VEGAS/pattern.0challenge.1max":"‪Teko {0} ya {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Nna o leke‬","VEGAS/excellent":"‪O dirile ka bokgabana‬","VEGAS/great":"‪Maiteko a ako godimo!‬","VEGAS/good":"‪O dirile sentle!‬","VEGAS/label.score.max":"‪Maduo: {0} go tswa mo go {1}‬","VEGAS/label.time":"‪Nako: {0}‬","VEGAS/yourNewBest":"‪(Phitlhelelo ya gago e e ko godimo e ncha!)‬","VEGAS/pattern.0yourBest":"‪(Phitlhelelo ya gago e e ko godimo: {0})‬","VEGAS/continue":"‪Tswelela‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Maduo‬","VEGAS/pattern.score.number":"‪Maduo: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},tr:{"SCENERY_PHET/webglWarning.body":"‪WebGL kullanılabilir yada yüklü değil. Daha fazla bilgi almak için tıklayın.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Üzgünüz, bir grafik hatası oluştu.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Tekrar Yükle‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Tüm seviyeleri tamamladınız!‬","VEGAS/done":"‪tamam‬","VEGAS/startOver":"‪Yeniden Başla‬","VEGAS/label.level":"‪Seviye: {0}‬","VEGAS/pattern.0challenge.1max":"‪Görev {0} / {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}: {1}: {2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}: {1}‬","VEGAS/keepTrying":"‪Denemeye Devam et‬","VEGAS/excellent":"‪Mükemmel‬","VEGAS/great":"‪Müthiş!‬","VEGAS/good":"‪İyi!‬","VEGAS/label.score.max":"‪Skor: {0} / {1}‬","VEGAS/label.time":"‪Zaman: {0}‬","VEGAS/yourNewBest":"‪(Yeni Rekorun!)‬","VEGAS/pattern.0yourBest":"‪(Rekorun: {0})‬","VEGAS/continue":"‪devam et‬","VEGAS/newLevel":"‪Yeni Seviye‬","VEGAS/keepGoing":"‪Devam Et‬","VEGAS/score":"‪Skor‬","VEGAS/pattern.score.number":"‪Puan: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},tw:{"SCENERY_PHET/webglWarning.body":"‪Abɛɛfo ntentan GL ensɔɛ anaa ebi ni ho. Mia na sua bebiree.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Kafra, grafiks nfomsoɔ aba.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Sane bue biom‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Wawie wo gyinap3n no nyinaa‬","VEGAS/done":"‪Wie‬","VEGAS/startOver":"‪Hyɛ aseɛ‬","VEGAS/label.level":"‪Gyinapɛn: {0}‬","VEGAS/pattern.0challenge.1max":"‪Di asi {0} mu {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Koso sɔ hwɛ‬","VEGAS/excellent":"‪Deɛ wayɛ adeɛ paa ara‬","VEGAS/great":"‪Deɛ ɛso‬","VEGAS/good":"‪Papa anaasɛ deɛ ɛyɛ‬","VEGAS/label.score.max":"‪Nya: {0} ɛmu {1}‬","VEGAS/label.time":"‪Berɛ: {0}‬","VEGAS/yourNewBest":"‪Foforɔ a wayɛ ade paa‬","VEGAS/pattern.0yourBest":"‪Deɛ wayɛ ade paa:{0}‬","VEGAS/continue":"‪Toaso‬","VEGAS/newLevel":"‪Gyinapɛn Foforoɔ‬","VEGAS/keepGoing":"‪Kɔ Soaa Kɔ‬","VEGAS/score":"‪Nya:‬","VEGAS/pattern.score.number":"‪Nya: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},uk:{"SCENERY_PHET/webglWarning.body":"‪WebGL не ввімкнено або недоступно. Клацніть, щоб дізнатися більше.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪На жаль, сталася помилка графіки.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Перезавантажити‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Ви завершили всі рівні!‬","VEGAS/done":"‪Готово‬","VEGAS/startOver":"‪Почати знову‬","VEGAS/label.level":"‪Рівень: {0}‬","VEGAS/pattern.0challenge.1max":"‪Спроби {0} з {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Продовжуй спроби‬","VEGAS/excellent":"‪Чудово!‬","VEGAS/great":"‪Вищий клас!‬","VEGAS/good":"‪Добре!‬","VEGAS/label.score.max":"‪Рахунок: {0} з {1}‬","VEGAS/label.time":"‪Час: {0}‬","VEGAS/yourNewBest":"‪(Ваш новий найкращий результат!)‬","VEGAS/pattern.0yourBest":"‪(Ваш найкращий результат: {0})‬","VEGAS/continue":"‪Продовжити‬","VEGAS/newLevel":"‪Новий рівень‬","VEGAS/keepGoing":"‪Продовжуй‬","VEGAS/score":"‪Рахунок:‬","VEGAS/pattern.score.number":"‪Рахунок: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},ur:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‫معزرت، گرافکس خراب ہو گئی ہے‬","SCENERY_PHET/webglWarning.contextLossReload":"‫دوبارہ شروع کریں‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‫آپ نے تمام درجات مکمل کرلئے ہیں!‬","VEGAS/done":"‫مکمل‬","VEGAS/startOver":"‫پھر سے شروع کرئیے‬","VEGAS/label.level":"‫سطح: {0}‬","VEGAS/pattern.0challenge.1max":"‫{1} میں موجود {0} چیلنج‬","VEGAS/pattern.0hours.1minutes.2seconds":"‫{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‫{0}:{1}‬","VEGAS/keepTrying":"‫کوشش کرتے جائیں‬","VEGAS/excellent":"‫شاندار!‬","VEGAS/great":"‫زبردست!‬","VEGAS/good":"‫اچھا!‬","VEGAS/label.score.max":"‫سکور: {1} میں سے {0}‬","VEGAS/label.time":"‫وقت: {0}‬","VEGAS/yourNewBest":"‫(آپ کا جد ید بہترین مظاہرہ)‬","VEGAS/pattern.0yourBest":"‫((آپ کا بہترین مظاہرہ: {0}‬","VEGAS/continue":"‫جاری‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‫سکور (نشان)‬","VEGAS/pattern.score.number":"‫سکور: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},uz:{"SCENERY_PHET/webglWarning.body":"‪WebGL o‘rnatilmagan yoki mavjud emas. Ko‘proq ma'lumot uchun bu yerga bosing.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Uzr, tasvirda xatolik sodir bo‘ldi‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Qayta yuklash‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Siz hamma bosqichni yakunladingiz‬","VEGAS/done":"‪Bajarildi‬","VEGAS/startOver":"‪Boshidan urunib ko‘rish‬","VEGAS/label.level":"‪Daraja:{0}‬","VEGAS/pattern.0challenge.1max":"‪Topshiriq {0} / {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Qayta urinish‬","VEGAS/excellent":"‪Qoyilmaqom!‬","VEGAS/great":"‪Zo‘r!‬","VEGAS/good":"‪Yaxshi‬","VEGAS/label.score.max":"‪Natija: {1} dan {0}‬","VEGAS/label.time":"‪Vaqt: {0}‬","VEGAS/yourNewBest":"‪(Yangi rekord!)‬","VEGAS/pattern.0yourBest":"‪(Rekord: {0})‬","VEGAS/continue":"‪Davom ettirish‬","VEGAS/newLevel":"‪Yangi bosqich‬","VEGAS/keepGoing":"‪Ushlab turish yoki qo‘yib yuborish‬","VEGAS/score":"‪Natija:‬","VEGAS/pattern.score.number":"‪Hisob: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},vi:{"SCENERY_PHET/webglWarning.body":"‪WebGL chưa được kích hoạt hoặc không có. Click để có thêm thông tin.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Xin lỗi, đã có lỗi đồ hoạ.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Nạp lại‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Bạn đã hoàn thành mọi câu đố!‬","VEGAS/done":"‪Xong‬","VEGAS/startOver":"‪Trở lại từ đầu‬","VEGAS/label.level":"‪Mức độ: {0}‬","VEGAS/pattern.0challenge.1max":"‪Câu đố {0}/{1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}: {1}‬","VEGAS/keepTrying":"‪Tiếp tục‬","VEGAS/excellent":"‪Tuyệt vời!‬","VEGAS/great":"‪Giỏi!‬","VEGAS/good":"‪Tốt!‬","VEGAS/label.score.max":"‪Điểm: {0} / {1}‬","VEGAS/label.time":"‪Thời gian: {0}‬","VEGAS/yourNewBest":"‪(Kỷ lục mới!)‬","VEGAS/pattern.0yourBest":"‪(Điểm cao nhất: {0})‬","VEGAS/continue":"‪Tiếp tục‬","VEGAS/newLevel":"‪Mức mới‬","VEGAS/keepGoing":"‪Tiếp tục‬","VEGAS/score":"‪Điểm:‬","VEGAS/pattern.score.number":"‪Điểm: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},wo:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪Matal Nga Toluwal Yëp!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Jeematal‬","VEGAS/label.level":"‪Toluway: {0}‬","VEGAS/pattern.0challenge.1max":"‪Jongante {0} Ci {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Jeematal‬","VEGAS/excellent":"‪Mucc Ayib!‬","VEGAS/great":"‪Mucc Ayib Na!‬","VEGAS/good":"‪Bax Na!‬","VEGAS/label.score.max":"‪Ngóop Gi: {0} Lu Bokul {1}‬","VEGAS/label.time":"‪Waxtu: {0}‬","VEGAS/yourNewBest":"‪( Sa Lugën Bu Bees! )‬","VEGAS/pattern.0yourBest":"‪( Sa Lugën: {0} )‬","VEGAS/continue":"‪Di Dem‬","VEGAS/newLevel":"‪Toluway Bu Bees‬","VEGAS/keepGoing":"‪Yegalel‬","VEGAS/score":"‪Say Poñ‬","VEGAS/pattern.score.number":"‪Say Poñ: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},yo:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪You completed all levels!‬","VEGAS/done":"‪Done‬","VEGAS/startOver":"‪Sẹ̀sẹ̀bẹ̀rẹ̀‬","VEGAS/label.level":"‪Ipèlè: {0}‬","VEGAS/pattern.0challenge.1max":"‪Ipènijà {0} of {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪Gbiyanju si iwaju sii‬","VEGAS/excellent":"‪Tayọ‬","VEGAS/great":"‪Dara ju!‬","VEGAS/good":"‪O dara!‬","VEGAS/label.score.max":"‪Máàkì: {0} out of {1}‬","VEGAS/label.time":"‪Akoko: {0}‬","VEGAS/yourNewBest":"‪(Ipaare tinun to dara ju lo !)‬","VEGAS/pattern.0yourBest":"‪(Ipaare todara ju lo: {0} )‬","VEGAS/continue":"‪Tesiwaju‬","VEGAS/newLevel":"‪New Level‬","VEGAS/keepGoing":"‪Keep Going‬","VEGAS/score":"‪Máàkì:‬","VEGAS/pattern.score.number":"‪Score: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},zh_CN:{"SCENERY_PHET/webglWarning.body":"‪WebGL未开启或不可用，点击获取更多信息‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪抱歉，发生了一个图形错误‬","SCENERY_PHET/webglWarning.contextLossReload":"‪重新加载‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪你已经完成所有等级‬","VEGAS/done":"‪完成‬","VEGAS/startOver":"‪重新开始‬","VEGAS/label.level":"‪等级: {0}‬","VEGAS/pattern.0challenge.1max":"‪挑战 {0} / {1}‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪继续努力‬","VEGAS/excellent":"‪完美！‬","VEGAS/great":"‪太好了！‬","VEGAS/good":"‪很好！‬","VEGAS/label.score.max":"‪得分: {0} 总分 {1}‬","VEGAS/label.time":"‪时间: {0}‬","VEGAS/yourNewBest":"‪(你最新最棒的!)‬","VEGAS/pattern.0yourBest":"‪(你最好的: {0})‬","VEGAS/continue":"‪继续‬","VEGAS/newLevel":"‪新级别‬","VEGAS/keepGoing":"‪继续‬","VEGAS/score":"‪分数:‬","VEGAS/pattern.score.number":"‪分数: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},zh_HK:{"SCENERY_PHET/webglWarning.body":"‪WebGL is not enabled or not available. Click to learn more.‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪Sorry, a graphics error has occurred.‬","SCENERY_PHET/webglWarning.contextLossReload":"‪Reload‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪你已完成所有關卡!‬","VEGAS/done":"‪完成‬","VEGAS/startOver":"‪重新開始‬","VEGAS/label.level":"‪第 {0} 關‬","VEGAS/pattern.0challenge.1max":"‪第 {0} 關 / 共 {1} 關‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪繼續嘗試‬","VEGAS/excellent":"‪非常好!‬","VEGAS/great":"‪很好!‬","VEGAS/good":"‪好!‬","VEGAS/label.score.max":"‪分數:{1}分之中的{0}分‬","VEGAS/label.time":"‪時間:{0}‬","VEGAS/yourNewBest":"‪(你的最佳成績!)‬","VEGAS/pattern.0yourBest":"‪(你的最佳成績: {0} 分)‬","VEGAS/continue":"‪繼續‬","VEGAS/newLevel":"‪新關卡‬","VEGAS/keepGoing":"‪繼續努力‬","VEGAS/score":"‪得分:‬","VEGAS/pattern.score.number":"‪得分: {{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"},zh_TW:{"SCENERY_PHET/webglWarning.body":"‪WebGL 未開啟或無法使用。點擊以瞭解詳情。‬","SCENERY_PHET/measuringTapeReadoutPattern":"‪{{distance}} {{units}}‬","SCENERY_PHET/webglWarning.contextLossFailure":"‪抱歉，發生了錯誤。‬","SCENERY_PHET/webglWarning.contextLossReload":"‪重新載入‬","SCENERY_PHET/a11y.simSection.controlArea":"‪Control Area‬","SCENERY_PHET/a11y.simSection.screenSummary.keyboardShortcutsHint":"‪If needed, check out keyboard shortcuts under Sim Resources.‬","SCENERY_PHET/a11y.simSection.screenSummary.multiScreenIntro":"‪The {{screen}} changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.screenSummary.singleScreenIntroPattern":"‪{{sim}} is an interactive sim. It changes as you play with it. It has a Play Area and a Control Area.‬","SCENERY_PHET/a11y.simSection.playArea":"‪Play Area‬","SCENERY_PHET/a11y.close":"‪Close‬","VEGAS/youCompletedAllLevels":"‪您破完所有關卡了！‬","VEGAS/done":"‪完成‬","VEGAS/startOver":"‪重新開始‬","VEGAS/label.level":"‪關卡：{0}‬","VEGAS/pattern.0challenge.1max":"‪第 {0} 關 / 共 {1} 關‬","VEGAS/pattern.0hours.1minutes.2seconds":"‪{0}:{1}:{2}‬","VEGAS/pattern.0minutes.1seconds":"‪{0}:{1}‬","VEGAS/keepTrying":"‪繼續加油‬","VEGAS/excellent":"‪太厲害了！‬","VEGAS/great":"‪太好了！‬","VEGAS/good":"‪很好！‬","VEGAS/label.score.max":"‪得分：共 {1} 分, 得到 {0} 分‬","VEGAS/label.time":"‪時間: {0}‬","VEGAS/yourNewBest":"‪您剛創了新紀錄！‬","VEGAS/pattern.0yourBest":"‪(您的最佳紀錄：{0})‬","VEGAS/continue":"‪繼續‬","VEGAS/newLevel":"‪新關卡‬","VEGAS/keepGoing":"‪繼續加油‬","VEGAS/score":"‪得分：‬","VEGAS/pattern.score.number":"‪得分：{{score}}‬","SUN/a11y.close":"‪Close‬","SUN/a11y.closed":"‪Closed‬","SUN/a11y.titleClosePattern":"‪{{title}}, Close.‬","SUN/a11y.numberSpinnerRoleDescription":"‪number spinner‬"}},phet.chipper.stringMetadata={},function(e,t){"object"==("undefined"==typeof module?"undefined":_typeof(module))&&"object"==_typeof(module.exports)?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,(function(e,t){var n=[],i=n.slice,r=n.concat,a=n.push,s=n.indexOf,o={},l=o.toString,u=o.hasOwnProperty,c="".trim,h={},d=e.document,p="2.1.0",f=function e(t,n){return new e.fn.init(t,n)},m=/^-ms-/,g=/-([\da-z])/gi,y=function(e,t){return t.toUpperCase()};function v(e){var t=e.length,n=f.type(e);return"function"!==n&&!f.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}f.fn=f.prototype={jquery:p,constructor:f,selector:"",length:0,toArray:function(){return i.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:i.call(this)},pushStack:function(e){var t=f.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return f.each(this,e,t)},map:function(e){return this.pushStack(f.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:a,sort:n.sort,splice:n.splice},f.extend=f.fn.extend=function(){var e,t,n,i,r,a,s=arguments[0]||{},o=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[o]||{},o++),"object"==_typeof(s)||f.isFunction(s)||(s={}),o===l&&(s=this,o--);l>o;o++)if(null!=(e=arguments[o]))for(t in e)n=s[t],s!==(i=e[t])&&(u&&i&&(f.isPlainObject(i)||(r=f.isArray(i)))?(r?(r=!1,a=n&&f.isArray(n)?n:[]):a=n&&f.isPlainObject(n)?n:{},s[t]=f.extend(u,a,i)):void 0!==i&&(s[t]=i));return s},f.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===f.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isPlainObject:function(e){if("object"!==f.type(e)||e.nodeType||f.isWindow(e))return!1;try{if(e.constructor&&!u.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==_typeof(e)||"function"==typeof e?o[l.call(e)]||"object":_typeof(e)},globalEval:function(e){var t,n=eval;(e=f.trim(e))&&(1===e.indexOf("use strict")?((t=d.createElement("script")).text=e,d.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(m,"ms-").replace(g,y)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,r=e.length,a=v(e);if(n){if(a)for(;r>i&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(a)for(;r>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":c.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(v(Object(e))?f.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,s=!n;a>r;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,n){var i,a=0,s=e.length,o=[];if(v(e))for(;s>a;a++)null!=(i=t(e[a],a,n))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&o.push(i);return r.apply([],o)},guid:1,proxy:function(e,t){var n,r,a;return"string"==typeof t&&(n=e[t],t=e,e=n),f.isFunction(e)?(r=i.call(arguments,2),(a=function(){return e.apply(t||this,r.concat(i.call(arguments)))}).guid=e.guid=e.guid||f.guid++,a):void 0},now:Date.now,support:h}),f.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){o["[object "+t+"]"]=t.toLowerCase()}));var A=function(e){var t,n,i,r,a,s,o,l,u,c,h,d,p,f,m,g,y,v="sizzle"+-new Date,A=e.document,b=0,S=0,E=ie(),k=ie(),V=ie(),w=function(e,t){return e===t&&(u=!0),0},_="undefined",C={}.hasOwnProperty,x=[],P=x.pop,T=x.push,M=x.push,L=x.slice,I=x.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",q=N.replace("w","w#"),O="\\["+D+"*("+N+")"+D+"*(?:([*^$|!~]?=)"+D+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+q+")|)|)"+D+"*\\]",B=":("+N+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+O.replace(3,8)+")*)|.*)\\)|)",G=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g"),H=new RegExp("^"+D+"*,"+D+"*"),F=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),Y=new RegExp("="+D+"*([^\\]'\"]*?)"+D+"*\\]","g"),z=new RegExp(B),U=new RegExp("^"+q+"$"),W={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},j=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=/'|\\/g,$=new RegExp("\\\\([\\da-f]{1,6}"+D+"?|("+D+")|.)","ig"),te=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{M.apply(x=L.call(A.childNodes),A.childNodes),x[A.childNodes.length].nodeType}catch(ee){M={apply:x.length?function(e,t){T.apply(e,L.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function ne(e,t,i,r){var a,s,o,l,u,d,m,g,b,S;if((t?t.ownerDocument||t:A)!==h&&c(t),i=i||[],!e||"string"!=typeof e)return i;if(1!==(l=(t=t||h).nodeType)&&9!==l)return[];if(p&&!r){if(a=K.exec(e))if(o=a[1]){if(9===l){if(!(s=t.getElementById(o))||!s.parentNode)return i;if(s.id===o)return i.push(s),i}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&y(t,s)&&s.id===o)return i.push(s),i}else{if(a[2])return M.apply(i,t.getElementsByTagName(e)),i;if((o=a[3])&&n.getElementsByClassName&&t.getElementsByClassName)return M.apply(i,t.getElementsByClassName(o)),i}if(n.qsa&&(!f||!f.test(e))){if(g=m=v,b=t,S=9===l&&e,1===l&&"object"!==t.nodeName.toLowerCase()){for(d=pe(e),(m=t.getAttribute("id"))?g=m.replace(Z,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=d.length;u--;)d[u]=g+fe(d[u]);b=J.test(e)&&he(t.parentNode)||t,S=d.join(",")}if(S)try{return M.apply(i,b.querySelectorAll(S)),i}catch(E){}finally{m||t.removeAttribute("id")}}}return Se(e.replace(G,"$1"),t,i,r)}function ie(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function re(e){return e[v]=!0,e}function ae(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function se(e,t){for(var n=e.split("|"),r=e.length;r--;)i.attrHandle[n[r]]=t}function oe(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function le(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ue(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ce(e){return re((function(t){return t=+t,re((function(n,i){for(var r,a=e([],n.length,t),s=a.length;s--;)n[r=a[s]]&&(n[r]=!(i[r]=n[r]))}))}))}function he(e){return e&&_typeof(e.getElementsByTagName)!==_&&e}for(t in n=ne.support={},a=ne.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},c=ne.setDocument=function(e){var t,r=e?e.ownerDocument||e:A,s=r.defaultView;return r!==h&&9===r.nodeType&&r.documentElement?(h=r,d=r.documentElement,p=!a(r),s&&s!==s.top&&(s.addEventListener?s.addEventListener("unload",(function(){c()}),!1):s.attachEvent&&s.attachEvent("onunload",(function(){c()}))),n.attributes=ae((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ae((function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(r.getElementsByClassName)&&ae((function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length})),n.getById=ae((function(e){return d.appendChild(e).id=v,!r.getElementsByName||!r.getElementsByName(v).length})),n.getById?(i.find.ID=function(e,t){if(_typeof(t.getElementById)!==_&&p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace($,te);return function(e){return e.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(e){var t=e.replace($,te);return function(e){var n=_typeof(e.getAttributeNode)!==_&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=n.getElementsByTagName?function(e,t){return _typeof(t.getElementsByTagName)!==_?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},i.find.CLASS=n.getElementsByClassName&&function(e,t){return _typeof(t.getElementsByClassName)!==_&&p?t.getElementsByClassName(e):void 0},m=[],f=[],(n.qsa=Q.test(r.querySelectorAll))&&(ae((function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&f.push("[*^$]="+D+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+D+"*(?:value|"+R+")"),e.querySelectorAll(":checked").length||f.push(":checked")})),ae((function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+D+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")}))),(n.matchesSelector=Q.test(g=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ae((function(e){n.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",B)})),f=f.length&&new RegExp(f.join("|")),m=m.length&&new RegExp(m.join("|")),t=Q.test(d.compareDocumentPosition),y=t||Q.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},w=t?function(e,t){if(e===t)return u=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===r||e.ownerDocument===A&&y(A,e)?-1:t===r||t.ownerDocument===A&&y(A,t)?1:l?I.call(l,e)-I.call(l,t):0:4&i?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,a=e.parentNode,s=t.parentNode,o=[e],c=[t];if(!a||!s)return e===r?-1:t===r?1:a?-1:s?1:l?I.call(l,e)-I.call(l,t):0;if(a===s)return oe(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;o[i]===c[i];)i++;return i?oe(o[i],c[i]):o[i]===A?-1:c[i]===A?1:0},r):h},ne.matches=function(e,t){return ne(e,null,null,t)},ne.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&c(e),t=t.replace(Y,"='$1']"),!(!n.matchesSelector||!p||m&&m.test(t)||f&&f.test(t)))try{var i=g.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return ne(t,h,null,[e]).length>0},ne.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ne.attr=function(e,t){(e.ownerDocument||e)!==h&&c(e);var r=i.attrHandle[t.toLowerCase()],a=r&&C.call(i.attrHandle,t.toLowerCase())?r(e,t,!p):void 0;return void 0!==a?a:n.attributes||!p?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},ne.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ne.uniqueSort=function(e){var t,i=[],r=0,a=0;if(u=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(w),u){for(;t=e[a++];)t===e[a]&&(r=i.push(a));for(;r--;)e.splice(i[r],1)}return l=null,e},r=ne.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=ne.selectors={cacheLength:50,createPseudo:re,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,te),e[3]=(e[4]||e[5]||"").replace($,te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ne.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ne.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return W.CHILD.test(e[0])?null:(e[3]&&void 0!==e[4]?e[2]=e[4]:n&&z.test(n)&&(t=pe(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace($,te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+D+")"+e+"("+D+"|$)"))&&E(e,(function(e){return t.test("string"==typeof e.className&&e.className||_typeof(e.getAttribute)!==_&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=ne.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,h,d,p,f,m=a!==s?"nextSibling":"previousSibling",g=t.parentNode,y=o&&t.nodeName.toLowerCase(),A=!l&&!o;if(g){if(a){for(;m;){for(h=t;h=h[m];)if(o?h.nodeName.toLowerCase()===y:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&A){for(p=(u=(c=g[v]||(g[v]={}))[e]||[])[0]===b&&u[1],d=u[0]===b&&u[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===t){c[e]=[b,p,d];break}}else if(A&&(u=(t[v]||(t[v]={}))[e])&&u[0]===b)d=u[1];else for(;(h=++p&&h&&h[m]||(d=p=0)||f.pop())&&((o?h.nodeName.toLowerCase()!==y:1!==h.nodeType)||!++d||(A&&((h[v]||(h[v]={}))[e]=[b,d]),h!==t)););return(d-=r)===i||d%i==0&&d/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ne.error("unsupported pseudo: "+e);return r[v]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?re((function(e,n){for(var i,a=r(e,t),s=a.length;s--;)e[i=I.call(e,a[s])]=!(n[i]=a[s])})):function(e){return r(e,0,n)}):r}},pseudos:{not:re((function(e){var t=[],n=[],i=s(e.replace(G,"$1"));return i[v]?re((function(e,t,n,r){for(var a,s=i(e,null,r,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))})):function(e,r,a){return t[0]=e,i(t,null,a,n),!n.pop()}})),has:re((function(e){return function(t){return ne(e,t).length>0}})),contains:re((function(e){return function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}})),lang:re((function(e){return U.test(e||"")||ne.error("unsupported lang: "+e),e=e.replace($,te).toLowerCase(),function(t){var n;do{if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return j.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ce((function(){return[0]})),last:ce((function(e,t){return[t-1]})),eq:ce((function(e,t,n){return[0>n?n+t:n]})),even:ce((function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e})),odd:ce((function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e})),lt:ce((function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e})),gt:ce((function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=le(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ue(t);function de(){}function pe(e,t){var n,r,a,s,o,l,u,c=k[e+" "];if(c)return t?0:c.slice(0);for(o=e,l=[],u=i.preFilter;o;){for(s in(!n||(r=H.exec(o)))&&(r&&(o=o.slice(r[0].length)||o),l.push(a=[])),n=!1,(r=F.exec(o))&&(n=r.shift(),a.push({value:n,type:r[0].replace(G," ")}),o=o.slice(n.length)),i.filter)!(r=W[s].exec(o))||u[s]&&!(r=u[s](r))||(n=r.shift(),a.push({value:n,type:s,matches:r}),o=o.slice(n.length));if(!n)break}return t?o.length:o?ne.error(e):k(e,l).slice(0)}function fe(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function me(e,t,n){var i=t.dir,r=n&&"parentNode"===i,a=S++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,a)}:function(t,n,s){var o,l,u=[b,a];if(s){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if((o=(l=t[v]||(t[v]={}))[i])&&o[0]===b&&o[1]===a)return u[2]=o[2];if(l[i]=u,u[2]=e(t,n,s))return!0}}}function ge(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function ye(e,t,n,i,r){for(var a,s=[],o=0,l=e.length,u=null!=t;l>o;o++)(a=e[o])&&(!n||n(a,i,r))&&(s.push(a),u&&t.push(o));return s}function ve(e,t,n,i,r,a){return i&&!i[v]&&(i=ve(i)),r&&!r[v]&&(r=ve(r,a)),re((function(a,s,o,l){var u,c,h,d=[],p=[],f=s.length,m=a||function(e,t,n){for(var i=0,r=t.length;r>i;i++)ne(e,t[i],n);return n}(t||"*",o.nodeType?[o]:o,[]),g=!e||!a&&t?m:ye(m,d,e,o,l),y=n?r||(a?e:f||i)?[]:s:g;if(n&&n(g,y,o,l),i)for(u=ye(y,p),i(u,[],o,l),c=u.length;c--;)(h=u[c])&&(y[p[c]]=!(g[p[c]]=h));if(a){if(r||e){if(r){for(u=[],c=y.length;c--;)(h=y[c])&&u.push(g[c]=h);r(null,y=[],u,l)}for(c=y.length;c--;)(h=y[c])&&(u=r?I.call(a,h):d[c])>-1&&(a[u]=!(s[u]=h))}}else y=ye(y===s?y.splice(f,y.length):y),r?r(null,s,y,l):M.apply(s,y)}))}function Ae(e){for(var t,n,r,a=e.length,s=i.relative[e[0].type],l=s||i.relative[" "],u=s?1:0,c=me((function(e){return e===t}),l,!0),h=me((function(e){return I.call(t,e)>-1}),l,!0),d=[function(e,n,i){return!s&&(i||n!==o)||((t=n).nodeType?c(e,n,i):h(e,n,i))}];a>u;u++)if(n=i.relative[e[u].type])d=[me(ge(d),n)];else{if((n=i.filter[e[u].type].apply(null,e[u].matches))[v]){for(r=++u;a>r&&!i.relative[e[r].type];r++);return ve(u>1&&ge(d),u>1&&fe(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(G,"$1"),n,r>u&&Ae(e.slice(u,r)),a>r&&Ae(e=e.slice(r)),a>r&&fe(e))}d.push(n)}return ge(d)}function be(e,t){var n=t.length>0,r=e.length>0,a=function(a,s,l,u,c){var d,p,f,m=0,g="0",y=a&&[],v=[],A=o,S=a||r&&i.find.TAG("*",c),E=b+=null==A?1:Math.random()||.1,k=S.length;for(c&&(o=s!==h&&s);g!==k&&null!=(d=S[g]);g++){if(r&&d){for(p=0;f=e[p++];)if(f(d,s,l)){u.push(d);break}c&&(b=E)}n&&((d=!f&&d)&&m--,a&&y.push(d))}if(m+=g,n&&g!==m){for(p=0;f=t[p++];)f(y,v,s,l);if(a){if(m>0)for(;g--;)y[g]||v[g]||(v[g]=P.call(u));v=ye(v)}M.apply(u,v),c&&!a&&v.length>0&&m+t.length>1&&ne.uniqueSort(u)}return c&&(b=E,o=A),y};return n?re(a):a}function Se(e,t,r,a){var o,l,u,c,h,d=pe(e);if(!a&&1===d.length){if((l=d[0]=d[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&n.getById&&9===t.nodeType&&p&&i.relative[l[1].type]){if(!(t=(i.find.ID(u.matches[0].replace($,te),t)||[])[0]))return r;e=e.slice(l.shift().value.length)}for(o=W.needsContext.test(e)?0:l.length;o--&&(u=l[o],!i.relative[c=u.type]);)if((h=i.find[c])&&(a=h(u.matches[0].replace($,te),J.test(l[0].type)&&he(t.parentNode)||t))){if(l.splice(o,1),!(e=a.length&&fe(l)))return M.apply(r,a),r;break}}return s(e,d)(a,t,!p,r,J.test(e)&&he(t.parentNode)||t),r}return de.prototype=i.filters=i.pseudos,i.setFilters=new de,s=ne.compile=function(e,t){var n,i=[],r=[],a=V[e+" "];if(!a){for(t||(t=pe(e)),n=t.length;n--;)(a=Ae(t[n]))[v]?i.push(a):r.push(a);a=V(e,be(r,i))}return a},n.sortStable=v.split("").sort(w).join("")===v,n.detectDuplicates=!!u,c(),n.sortDetached=ae((function(e){return 1&e.compareDocumentPosition(h.createElement("div"))})),ae((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||se("type|href|height|width",(function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ae((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||se("value",(function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue})),ae((function(e){return null==e.getAttribute("disabled")}))||se(R,(function(e,t,n){var i;return n?void 0:!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),ne}(e);f.find=A,(f.expr=A.selectors)[":"]=f.expr.pseudos,f.unique=A.uniqueSort,f.text=A.getText,f.isXMLDoc=A.isXML,f.contains=A.contains;var b=f.expr.match.needsContext,S=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,E=/^.[^:#\[\.,]*$/;function k(e,t,n){if(f.isFunction(t))return f.grep(e,(function(e,i){return!!t.call(e,i,e)!==n}));if(t.nodeType)return f.grep(e,(function(e){return e===t!==n}));if("string"==typeof t){if(E.test(t))return f.filter(t,e,n);t=f.filter(t,e)}return f.grep(e,(function(e){return s.call(t,e)>=0!==n}))}f.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?f.find.matchesSelector(i,e)?[i]:[]:f.find.matches(e,f.grep(t,(function(e){return 1===e.nodeType})))},f.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(f(e).filter((function(){for(t=0;n>t;t++)if(f.contains(r[t],this))return!0})));for(t=0;n>t;t++)f.find(e,r[t],i);return(i=this.pushStack(n>1?f.unique(i):i)).selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&b.test(e)?f(e):e||[],!1).length}});var V,w=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(f.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:w.exec(e))||!n[1]&&t)return!t||t.jquery?(t||V).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof f?t[0]:t,f.merge(this,f.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:d,!0)),S.test(n[1])&&f.isPlainObject(t))for(n in t)f.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(i=d.getElementById(n[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=d,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):f.isFunction(e)?void 0!==V.ready?V.ready(e):e(f):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),f.makeArray(e,this))}).prototype=f.fn,V=f(d);var _=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};function x(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}f.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&f(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),f.fn.extend({has:function(e){var t=f(e,this),n=t.length;return this.filter((function(){for(var e=0;n>e;e++)if(f.contains(this,t[e]))return!0}))},closest:function(e,t){for(var n,i=0,r=this.length,a=[],s=b.test(e)||"string"!=typeof e?f(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&f.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?f.unique(a):a)},index:function(e){return e?"string"==typeof e?s.call(f(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(f.unique(f.merge(this.get(),f(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),f.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return f.dir(e,"parentNode")},parentsUntil:function(e,t,n){return f.dir(e,"parentNode",n)},next:function(e){return x(e,"nextSibling")},prev:function(e){return x(e,"previousSibling")},nextAll:function(e){return f.dir(e,"nextSibling")},prevAll:function(e){return f.dir(e,"previousSibling")},nextUntil:function(e,t,n){return f.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return f.dir(e,"previousSibling",n)},siblings:function(e){return f.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return f.sibling(e.firstChild)},contents:function(e){return e.contentDocument||f.merge([],e.childNodes)}},(function(e,t){f.fn[e]=function(n,i){var r=f.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=f.filter(i,r)),this.length>1&&(C[e]||f.unique(r),_.test(e)&&r.reverse()),this.pushStack(r)}}));var P,T=/\S+/g,M={};function L(){d.removeEventListener("DOMContentLoaded",L,!1),e.removeEventListener("load",L,!1),f.ready()}f.Callbacks=function(e){e="string"==typeof e?M[e]||function(e){var t=M[e]={};return f.each(e.match(T)||[],(function(e,n){t[n]=!0})),t}(e):f.extend({},e);var t,n,i,r,a,s,o=[],l=!e.once&&[],u=function u(h){for(t=e.memory&&h,n=!0,s=r||0,r=0,a=o.length,i=!0;o&&a>s;s++)if(!1===o[s].apply(h[0],h[1])&&e.stopOnFalse){t=!1;break}i=!1,o&&(l?l.length&&u(l.shift()):t?o=[]:c.disable())},c={add:function(){if(o){var n=o.length;!function t(n){f.each(n,(function(n,i){var r=f.type(i);"function"===r?e.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==r&&t(i)}))}(arguments),i?a=o.length:t&&(r=n,u(t))}return this},remove:function(){return o&&f.each(arguments,(function(e,t){for(var n;(n=f.inArray(t,o,n))>-1;)o.splice(n,1),i&&(a>=n&&a--,s>=n&&s--)})),this},has:function(e){return e?f.inArray(e,o)>-1:!(!o||!o.length)},empty:function(){return o=[],a=0,this},disable:function(){return o=l=t=void 0,this},disabled:function(){return!o},lock:function(){return l=void 0,t||c.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!o||n&&!l||(t=[e,(t=t||[]).slice?t.slice():t],i?l.push(t):u(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},f.extend({Deferred:function(e){var t=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return f.Deferred((function(n){f.each(t,(function(t,a){var s=f.isFunction(e[t])&&e[t];r[a[1]]((function(){var e=s&&s.apply(this,arguments);e&&f.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===i?n.promise():this,s?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?f.extend(e,i):i}},r={};return i.pipe=i.then,f.each(t,(function(e,a){var s=a[2],o=a[3];i[a[1]]=s.add,o&&s.add((function(){n=o}),t[1^e][2].disable,t[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?i:this,arguments),this},r[a[0]+"With"]=s.fireWith})),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,r,a=0,s=i.call(arguments),o=s.length,l=1!==o||e&&f.isFunction(e.promise)?o:0,u=1===l?e:f.Deferred(),c=function(e,n,r){return function(a){n[e]=this,r[e]=arguments.length>1?i.call(arguments):a,r===t?u.notifyWith(n,r):--l||u.resolveWith(n,r)}};if(o>1)for(t=new Array(o),n=new Array(o),r=new Array(o);o>a;a++)s[a]&&f.isFunction(s[a].promise)?s[a].promise().done(c(a,r,s)).fail(u.reject).progress(c(a,n,t)):--l;return l||u.resolveWith(r,s),u.promise()}}),f.fn.ready=function(e){return f.ready.promise().done(e),this},f.extend({isReady:!1,readyWait:1,holdReady:function(e){e?f.readyWait++:f.ready(!0)},ready:function(e){(!0===e?--f.readyWait:f.isReady)||(f.isReady=!0,!0!==e&&--f.readyWait>0||(P.resolveWith(d,[f]),f.fn.trigger&&f(d).trigger("ready").off("ready")))}}),f.ready.promise=function(t){return P||(P=f.Deferred(),"complete"===d.readyState?setTimeout(f.ready):(d.addEventListener("DOMContentLoaded",L,!1),e.addEventListener("load",L,!1))),P.promise(t)},f.ready.promise();var I=f.access=function(e,t,n,i,r,a,s){var o=0,l=e.length,u=null==n;if("object"===f.type(n))for(o in r=!0,n)f.access(e,t,o,n[o],!0,a,s);else if(void 0!==i&&(r=!0,f.isFunction(i)||(s=!0),u&&(s?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(f(e),n)})),t))for(;l>o;o++)t(e[o],n,s?i:i.call(e[o],o,t(e[o],n)));return r?e:u?t.call(e):l?t(e[0],n):a};function R(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=f.expando+Math.random()}f.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},R.uid=1,R.accepts=f.acceptData,R.prototype={key:function(e){if(!R.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=R.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,f.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),a=this.cache[r];if("string"==typeof t)a[t]=n;else if(f.isEmptyObject(a))f.extend(this.cache[r],t);else for(i in t)a[i]=t[i];return a},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(i=this.get(e,t))?i:this.get(e,f.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,a=this.key(e),s=this.cache[a];if(void 0===t)this.cache[a]={};else{f.isArray(t)?i=t.concat(t.map(f.camelCase)):(r=f.camelCase(t),t in s?i=[t,r]:i=(i=r)in s?[i]:i.match(T)||[]),n=i.length;for(;n--;)delete s[i[n]]}},hasData:function(e){return!f.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var D=new R,N=new R,q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function B(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(O,"-$1").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:q.test(n)?f.parseJSON(n):n)}catch(r){}N.set(e,t,n)}else n=void 0;return n}f.extend({hasData:function(e){return N.hasData(e)||D.hasData(e)},data:function(e,t,n){return N.access(e,t,n)},removeData:function(e,t){N.remove(e,t)},_data:function(e,t,n){return D.access(e,t,n)},_removeData:function(e,t){D.remove(e,t)}}),f.fn.extend({data:function(e,t){var n,i,r,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(r=N.get(a),1===a.nodeType&&!D.get(a,"hasDataAttrs"))){for(n=s.length;n--;)0===(i=s[n].name).indexOf("data-")&&(i=f.camelCase(i.slice(5)),B(a,i,r[i]));D.set(a,"hasDataAttrs",!0)}return r}return"object"==_typeof(e)?this.each((function(){N.set(this,e)})):I(this,(function(t){var n,i=f.camelCase(e);if(a&&void 0===t){if(void 0!==(n=N.get(a,e)))return n;if(void 0!==(n=N.get(a,i)))return n;if(void 0!==(n=B(a,i,void 0)))return n}else this.each((function(){var n=N.get(this,i);N.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&N.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){N.remove(this,e)}))}}),f.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=D.get(e,t),n&&(!i||f.isArray(n)?i=D.access(e,t,f.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){var n=f.queue(e,t=t||"fx"),i=n.length,r=n.shift(),a=f._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,(function(){f.dequeue(e,t)}),a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return D.get(e,n)||D.access(e,n,{empty:f.Callbacks("once memory").add((function(){D.remove(e,[t+"queue",n])}))})}}),f.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?f.queue(this[0],e):void 0===t?this:this.each((function(){var n=f.queue(this,e,t);f._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&f.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){f.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=f.Deferred(),a=this,s=this.length,o=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=D.get(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}});var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,H=["Top","Right","Bottom","Left"],F=function(e,t){return"none"===f.css(e=t||e,"display")||!f.contains(e.ownerDocument,e)},Y=/^(?:checkbox|radio)$/i;!function(){var e=d.createDocumentFragment().appendChild(d.createElement("div"));e.innerHTML="<input type='radio' checked='checked' name='t'/>",h.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var z="undefined";h.focusinBubbles="onfocusin"in e;var U=/^key/,W=/^(?:mouse|contextmenu)|click/,j=/^(?:focusinfocus|focusoutblur)$/,X=/^([^.]*)(?:\.(.+)|)$/;function Q(){return!0}function K(){return!1}function J(){try{return d.activeElement}catch(e){}}f.event={global:{},add:function(e,t,n,i,r){var a,s,o,l,u,c,h,d,p,m,g,y=D.get(e);if(y)for(n.handler&&(n=(a=n).handler,r=a.selector),n.guid||(n.guid=f.guid++),(l=y.events)||(l=y.events={}),(s=y.handle)||(s=y.handle=function(t){return _typeof(f)!==z&&f.event.triggered!==t.type?f.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(T)||[""]).length;u--;)p=g=(o=X.exec(t[u])||[])[1],m=(o[2]||"").split(".").sort(),p&&(h=f.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,h=f.event.special[p]||{},c=f.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&f.expr.match.needsContext.test(r),namespace:m.join(".")},a),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,m,s)||e.addEventListener&&e.addEventListener(p,s,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),f.event.global[p]=!0)},remove:function(e,t,n,i,r){var a,s,o,l,u,c,h,d,p,m,g,y=D.hasData(e)&&D.get(e);if(y&&(l=y.events)){for(u=(t=(t||"").match(T)||[""]).length;u--;)if(p=g=(o=X.exec(t[u])||[])[1],m=(o[2]||"").split(".").sort(),p){for(h=f.event.special[p]||{},d=l[p=(i?h.delegateType:h.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=d.length;a--;)c=d[a],!r&&g!==c.origType||n&&n.guid!==c.guid||o&&!o.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(e,c));s&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,m,y.handle)||f.removeEvent(e,p,y.handle),delete l[p])}else for(p in l)f.event.remove(e,p+t[u],n,i,!0);f.isEmptyObject(l)&&(delete y.handle,D.remove(e,"events"))}},trigger:function(t,n,i,r){var a,s,o,l,c,h,p,m=[i||d],g=u.call(t,"type")?t.type:t,y=u.call(t,"namespace")?t.namespace.split("."):[];if(s=o=i=i||d,3!==i.nodeType&&8!==i.nodeType&&!j.test(g+f.event.triggered)&&(g.indexOf(".")>=0&&(y=g.split("."),g=y.shift(),y.sort()),c=g.indexOf(":")<0&&"on"+g,(t=t[f.expando]?t:new f.Event(g,"object"==_typeof(t)&&t)).isTrigger=r?2:3,t.namespace=y.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:f.makeArray(n,[t]),p=f.event.special[g]||{},r||!p.trigger||!1!==p.trigger.apply(i,n))){if(!r&&!p.noBubble&&!f.isWindow(i)){for(l=p.delegateType||g,j.test(l+g)||(s=s.parentNode);s;s=s.parentNode)m.push(s),o=s;o===(i.ownerDocument||d)&&m.push(o.defaultView||o.parentWindow||e)}for(a=0;(s=m[a++])&&!t.isPropagationStopped();)t.type=a>1?l:p.bindType||g,(h=(D.get(s,"events")||{})[t.type]&&D.get(s,"handle"))&&h.apply(s,n),(h=c&&s[c])&&h.apply&&f.acceptData(s)&&(t.result=h.apply(s,n),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||p._default&&!1!==p._default.apply(m.pop(),n)||!f.acceptData(i)||c&&f.isFunction(i[g])&&!f.isWindow(i)&&((o=i[c])&&(i[c]=null),f.event.triggered=g,i[g](),f.event.triggered=void 0,o&&(i[c]=o)),t.result}},dispatch:function(e){e=f.event.fix(e);var t,n,r,a,s,o=[],l=i.call(arguments),u=(D.get(this,"events")||{})[e.type]||[],c=f.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(o=f.event.handlers.call(this,e,u),t=0;(a=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,n=0;(s=a.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,void 0!==(r=((f.event.special[s.origType]||{}).handle||s.handler).apply(a.elem,l))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,a,s=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(i=[],n=0;o>n;n++)void 0===i[r=(a=t[n]).selector+" "]&&(i[r]=a.needsContext?f(r,this).index(l)>=0:f.find(r,this,null,[l]).length),i[r]&&i.push(a);i.length&&s.push({elem:l,handlers:i})}return o<t.length&&s.push({elem:this,handlers:t.slice(o)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,a=t.button;return null==e.pageX&&null!=t.clientX&&(i=(n=e.target.ownerDocument||d).documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[f.expando])return e;var t,n,i,r=e.type,a=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=W.test(r)?this.mouseHooks:U.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new f.Event(a),t=i.length;t--;)e[n=i[t]]=a[n];return e.target||(e.target=d),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==J()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===J()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&f.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return f.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=f.extend(new f.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?f.event.trigger(r,null,t):f.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},f.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},(f.Event=function(e,t){return this instanceof f.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.getPreventDefault&&e.getPreventDefault()?Q:K):this.type=e,t&&f.extend(this,t),this.timeStamp=e&&e.timeStamp||f.now(),void(this[f.expando]=!0)):new f.Event(e,t)}).prototype={isDefaultPrevented:K,isPropagationStopped:K,isImmediatePropagationStopped:K,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Q,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Q,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Q,this.stopPropagation()}},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},(function(e,t){f.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,a=e.handleObj;return(!r||r!==i&&!f.contains(i,r))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),h.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){f.event.simulate(t,e.target,f.event.fix(e),!0)};f.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=D.access(i,t);r||i.addEventListener(e,n,!0),D.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=D.access(i,t)-1;r?D.access(i,t,r):(i.removeEventListener(e,n,!0),D.remove(i,t))}}})),f.fn.extend({on:function(e,t,n,i,r){var a,s;if("object"==_typeof(e)){for(s in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(s,t,n,e[s],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),!1===i)i=K;else if(!i)return this;return 1===r&&(a=i,(i=function(e){return f().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=f.guid++)),this.each((function(){f.event.add(this,e,i,n,t)}))},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,f(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==_typeof(e)){for(r in e)this.off(r,t,e[r]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=K),this.each((function(){f.event.remove(this,e,n,t)}))},trigger:function(e,t){return this.each((function(){f.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];return n?f.event.trigger(e,t,n,!0):void 0}});var Z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$=/<([\w:]+)/,ee=/<|&#?\w+;/,te=/<(?:script|style|link)/i,ne=/checked\s*(?:[^=]|=\s*.checked.)/i,ie=/^$|\/(?:java|ecma)script/i,re=/^true\/(.*)/,ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,se={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function oe(e,t){return f.nodeName(e,"table")&&f.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function le(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ue(e){var t=re.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ce(e,t){for(var n=0,i=e.length;i>n;n++)D.set(e[n],"globalEval",!t||D.get(t[n],"globalEval"))}function he(e,t){var n,i,r,a,s,o,l,u;if(1===t.nodeType){if(D.hasData(e)&&(a=D.access(e),s=D.set(t,a),u=a.events))for(r in delete s.handle,s.events={},u)for(n=0,i=u[r].length;i>n;n++)f.event.add(t,r,u[r][n]);N.hasData(e)&&(o=N.access(e),l=f.extend({},o),N.set(t,l))}}function de(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&f.nodeName(e,t)?f.merge([e],n):n}function pe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Y.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}se.optgroup=se.option,se.tbody=se.tfoot=se.colgroup=se.caption=se.thead,se.th=se.td,f.extend({clone:function(e,t,n){var i,r,a,s,o=e.cloneNode(!0),l=f.contains(e.ownerDocument,e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||f.isXMLDoc(e)))for(s=de(o),i=0,r=(a=de(e)).length;r>i;i++)pe(a[i],s[i]);if(t)if(n)for(a=a||de(e),s=s||de(o),i=0,r=a.length;r>i;i++)he(a[i],s[i]);else he(e,o);return(s=de(o,"script")).length>0&&ce(s,!l&&de(e,"script")),o},buildFragment:function(e,t,n,i){for(var r,a,s,o,l,u,c=t.createDocumentFragment(),h=[],d=0,p=e.length;p>d;d++)if((r=e[d])||0===r)if("object"===f.type(r))f.merge(h,r.nodeType?[r]:r);else if(ee.test(r)){for(a=a||c.appendChild(t.createElement("div")),s=($.exec(r)||["",""])[1].toLowerCase(),o=se[s]||se._default,a.innerHTML=o[1]+r.replace(Z,"<$1></$2>")+o[2],u=o[0];u--;)a=a.lastChild;f.merge(h,a.childNodes),(a=c.firstChild).textContent=""}else h.push(t.createTextNode(r));for(c.textContent="",d=0;r=h[d++];)if((!i||-1===f.inArray(r,i))&&(l=f.contains(r.ownerDocument,r),a=de(c.appendChild(r),"script"),l&&ce(a),n))for(u=0;r=a[u++];)ie.test(r.type||"")&&n.push(r);return c},cleanData:function(e){for(var t,n,i,r,a,s,o=f.event.special,l=0;void 0!==(n=e[l]);l++){if(f.acceptData(n)&&((a=n[D.expando])&&(t=D.cache[a]))){if((i=Object.keys(t.events||{})).length)for(s=0;void 0!==(r=i[s]);s++)o[r]?f.event.remove(n,r):f.removeEvent(n,r,t.handle);D.cache[a]&&delete D.cache[a]}delete N.cache[n[N.expando]]}}}),f.fn.extend({text:function(e){return I(this,(function(e){return void 0===e?f.text(this):this.empty().each((function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return this.domManip(arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||oe(this,e).appendChild(e)}))},prepend:function(){return this.domManip(arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=oe(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return this.domManip(arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},remove:function(e,t){for(var n,i=e?f.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||f.cleanData(de(n)),n.parentNode&&(t&&f.contains(n.ownerDocument,n)&&ce(de(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(f.cleanData(de(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return f.clone(this,e,t)}))},html:function(e){return I(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!te.test(e)&&!se[($.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Z,"<$1></$2>");try{for(;i>n;n++)1===(t=this[n]||{}).nodeType&&(f.cleanData(de(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,(function(t){e=this.parentNode,f.cleanData(de(this)),e&&e.replaceChild(t,this)})),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=r.apply([],e);var n,i,a,s,o,l,u=0,c=this.length,d=this,p=c-1,m=e[0],g=f.isFunction(m);if(g||c>1&&"string"==typeof m&&!h.checkClone&&ne.test(m))return this.each((function(n){var i=d.eq(n);g&&(e[0]=m.call(this,n,i.html())),i.domManip(e,t)}));if(c&&(i=(n=f.buildFragment(e,this[0].ownerDocument,!1,this)).firstChild,1===n.childNodes.length&&(n=i),i)){for(s=(a=f.map(de(n,"script"),le)).length;c>u;u++)o=n,u!==p&&(o=f.clone(o,!0,!0),s&&f.merge(a,de(o,"script"))),t.call(this[u],o,u);if(s)for(l=a[a.length-1].ownerDocument,f.map(a,ue),u=0;s>u;u++)o=a[u],ie.test(o.type||"")&&!D.access(o,"globalEval")&&f.contains(l,o)&&(o.src?f._evalUrl&&f._evalUrl(o.src):f.globalEval(o.textContent.replace(ae,"")))}return this}}),f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){f.fn[e]=function(e){for(var n,i=[],r=f(e),s=r.length-1,o=0;s>=o;o++)n=o===s?this:this.clone(!0),f(r[o])[t](n),a.apply(i,n.get());return this.pushStack(i)}}));var fe,me={};function ge(t,n){var i=f(n.createElement(t)).appendTo(n.body),r=e.getDefaultComputedStyle?e.getDefaultComputedStyle(i[0]).display:f.css(i[0],"display");return i.detach(),r}function ye(e){var t=d,n=me[e];return n||("none"!==(n=ge(e,t))&&n||((t=(fe=(fe||f("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=ge(e,t),fe.detach()),me[e]=n),n}var ve=/^margin/,Ae=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),be=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};function Se(e,t,n){var i,r,a,s,o=e.style;return(n=n||be(e))&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||f.contains(e.ownerDocument,e)||(s=f.style(e,t)),Ae.test(s)&&ve.test(t)&&(i=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=i,o.minWidth=r,o.maxWidth=a)),void 0!==s?s+"":s}function Ee(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){var t,n,i=d.documentElement,r=d.createElement("div"),a=d.createElement("div");function s(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",i.appendChild(r);var s=e.getComputedStyle(a,null);t="1%"!==s.top,n="4px"===s.width,i.removeChild(r)}a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===a.style.backgroundClip,r.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",r.appendChild(a),e.getComputedStyle&&f.extend(h,{pixelPosition:function(){return s(),t},boxSizingReliable:function(){return null==n&&s(),n},reliableMarginRight:function(){var t,n=a.appendChild(d.createElement("div"));return n.style.cssText=a.style.cssText="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",n.style.marginRight=n.style.width="0",a.style.width="1px",i.appendChild(r),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(r),a.innerHTML="",t}})}(),f.swap=function(e,t,n,i){var r,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];for(a in r=n.apply(e,i||[]),t)e.style[a]=s[a];return r};var ke=/^(none|table(?!-c[ea]).+)/,Ve=new RegExp("^("+G+")(.*)$","i"),we=new RegExp("^([+-])=("+G+")","i"),_e={position:"absolute",visibility:"hidden",display:"block"},Ce={letterSpacing:0,fontWeight:400},xe=["Webkit","O","Moz","ms"];function Pe(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=xe.length;r--;)if((t=xe[r]+n)in e)return t;return i}function Te(e,t,n){var i=Ve.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function Me(e,t,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>a;a+=2)"margin"===n&&(s+=f.css(e,n+H[a],!0,r)),i?("content"===n&&(s-=f.css(e,"padding"+H[a],!0,r)),"margin"!==n&&(s-=f.css(e,"border"+H[a]+"Width",!0,r))):(s+=f.css(e,"padding"+H[a],!0,r),"padding"!==n&&(s+=f.css(e,"border"+H[a]+"Width",!0,r)));return s}function Le(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=be(e),s="border-box"===f.css(e,"boxSizing",!1,a);if(0>=r||null==r){if((0>(r=Se(e,t,a))||null==r)&&(r=e.style[t]),Ae.test(r))return r;i=s&&(h.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+Me(e,t,n||(s?"border":"content"),i,a)+"px"}function Ie(e,t){for(var n,i,r,a=[],s=0,o=e.length;o>s;s++)(i=e[s]).style&&(a[s]=D.get(i,"olddisplay"),n=i.style.display,t?(a[s]||"none"!==n||(i.style.display=""),""===i.style.display&&F(i)&&(a[s]=D.access(i,"olddisplay",ye(i.nodeName)))):a[s]||(r=F(i),(n&&"none"!==n||!r)&&D.set(i,"olddisplay",r?n:f.css(i,"display"))));for(s=0;o>s;s++)(i=e[s]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[s]||"":"none"));return e}function Re(e,t,n,i,r){return new Re.prototype.init(e,t,n,i,r)}f.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Se(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=f.camelCase(t),l=e.style;return t=f.cssProps[o]||(f.cssProps[o]=Pe(l,o)),s=f.cssHooks[t]||f.cssHooks[o],void 0===n?s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t]:("string"===(a=_typeof(n))&&(r=we.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(f.css(e,t)),a="number"),void(null!=n&&n==n&&("number"!==a||f.cssNumber[o]||(n+="px"),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]="",l[t]=n))))}},css:function(e,t,n,i){var r,a,s,o=f.camelCase(t);return t=f.cssProps[o]||(f.cssProps[o]=Pe(e.style,o)),(s=f.cssHooks[t]||f.cssHooks[o])&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=Se(e,t,i)),"normal"===r&&t in Ce&&(r=Ce[t]),""===n||n?(a=parseFloat(r),!0===n||f.isNumeric(a)?a||0:r):r}}),f.each(["height","width"],(function(e,t){f.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&ke.test(f.css(e,"display"))?f.swap(e,_e,(function(){return Le(e,t,i)})):Le(e,t,i):void 0},set:function(e,n,i){var r=i&&be(e);return Te(0,n,i?Me(e,t,i,"border-box"===f.css(e,"boxSizing",!1,r),r):0)}}})),f.cssHooks.marginRight=Ee(h.reliableMarginRight,(function(e,t){return t?f.swap(e,{display:"inline-block"},Se,[e,"marginRight"]):void 0})),f.each({margin:"",padding:"",border:"Width"},(function(e,t){f.cssHooks[e+t]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+H[i]+t]=a[i]||a[i-2]||a[0];return r}},ve.test(e)||(f.cssHooks[e+t].set=Te)})),f.fn.extend({css:function(e,t){return I(this,(function(e,t,n){var i,r,a={},s=0;if(f.isArray(t)){for(i=be(e),r=t.length;r>s;s++)a[t[s]]=f.css(e,t[s],!1,i);return a}return void 0!==n?f.style(e,t,n):f.css(e,t)}),e,t,arguments.length>1)},show:function(){return Ie(this,!0)},hide:function(){return Ie(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){F(this)?f(this).show():f(this).hide()}))}}),f.Tween=Re,Re.prototype={constructor:Re,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(f.cssNumber[n]?"":"px")},cur:function(){var e=Re.propHooks[this.prop];return e&&e.get?e.get(this):Re.propHooks._default.get(this)},run:function(e){var t,n=Re.propHooks[this.prop];return this.pos=t=this.options.duration?f.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Re.propHooks._default.set(this),this}},Re.prototype.init.prototype=Re.prototype,Re.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=f.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){f.fx.step[e.prop]?f.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[f.cssProps[e.prop]]||f.cssHooks[e.prop])?f.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Re.propHooks.scrollTop=Re.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},f.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},(f.fx=Re.prototype.init).step={};var De,Ne,qe=/^(?:toggle|show|hide)$/,Oe=new RegExp("^(?:([+-])=|)("+G+")([a-z%]*)$","i"),Be=/queueHooks$/,Ge=[function(e,t,n){var i,r,a,s,o,l,u,c=this,h={},d=e.style,p=e.nodeType&&F(e),m=D.get(e,"fxshow");for(i in n.queue||(null==(o=f._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,c.always((function(){c.always((function(){o.unqueued--,f.queue(e,"fx").length||o.empty.fire()}))}))),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"none"===(u=f.css(e,"display"))&&(u=ye(e.nodeName)),"inline"===u&&"none"===f.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",c.always((function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}))),t)if(r=t[i],qe.exec(r)){if(delete t[i],a=a||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;p=!0}h[i]=m&&m[i]||f.style(e,i)}if(!f.isEmptyObject(h))for(i in m?"hidden"in m&&(p=m.hidden):m=D.access(e,"fxshow",{}),a&&(m.hidden=!p),p?f(e).show():c.done((function(){f(e).hide()})),c.done((function(){var t;for(t in D.remove(e,"fxshow"),h)f.style(e,t,h[t])})),h)s=ze(p?m[i]:0,i,c),i in m||(m[i]=s.start,p&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}],He={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=Oe.exec(t),a=r&&r[3]||(f.cssNumber[e]?"":"px"),s=(f.cssNumber[e]||"px"!==a&&+i)&&Oe.exec(f.css(n.elem,e)),o=1,l=20;if(s&&s[3]!==a){a=a||s[3],r=r||[],s=+i||1;do{s/=o=o||".5",f.style(n.elem,e,s+a)}while(o!==(o=n.cur()/i)&&1!==o&&--l)}return r&&(s=n.start=+s||+i||0,n.unit=a,n.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),n}]};function Fe(){return setTimeout((function(){De=void 0})),De=f.now()}function Ye(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)r["margin"+(n=H[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function ze(e,t,n){for(var i,r=(He[t]||[]).concat(He["*"]),a=0,s=r.length;s>a;a++)if(i=r[a].call(n,t,e))return i}function Ue(e,t,n){var i,r,a=0,s=Ge.length,o=f.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var t=De||Fe(),n=Math.max(0,u.startTime+u.duration-t),i=1-(n/u.duration||0),a=0,s=u.tweens.length;s>a;a++)u.tweens[a].run(i);return o.notifyWith(e,[u,i,n]),1>i&&s?n:(o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:f.extend({},t),opts:f.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:De||Fe(),duration:n.duration,tweens:[],createTween:function(t,n){var i=f.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?o.resolveWith(e,[u,t]):o.rejectWith(e,[u,t]),this}}),c=u.props;for(function(e,t){var n,i,r,a,s;for(n in e)if(r=t[i=f.camelCase(n)],a=e[n],f.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(s=f.cssHooks[i])&&"expand"in s)for(n in a=s.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=r);else t[i]=r}(c,u.opts.specialEasing);s>a;a++)if(i=Ge[a].call(u,e,c,u.opts))return i;return f.map(c,ze,u),f.isFunction(u.opts.start)&&u.opts.start.call(e,u),f.fx.timer(f.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}f.Animation=f.extend(Ue,{tweener:function(e,t){f.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],He[n]=He[n]||[],He[n].unshift(t)},prefilter:function(e,t){t?Ge.unshift(e):Ge.push(e)}}),f.speed=function(e,t,n){var i=e&&"object"==_typeof(e)?f.extend({},e):{complete:n||!n&&t||f.isFunction(e)&&e,duration:e,easing:n&&t||t&&!f.isFunction(t)&&t};return i.duration=f.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in f.fx.speeds?f.fx.speeds[i.duration]:f.fx.speeds._default,(null==i.queue||!0===i.queue)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){f.isFunction(i.old)&&i.old.call(this),i.queue&&f.dequeue(this,i.queue)},i},f.fn.extend({fadeTo:function(e,t,n,i){return this.filter(F).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=f.isEmptyObject(e),a=f.speed(t,n,i),s=function(){var t=Ue(this,f.extend({},e),a);(r||D.get(this,"finish"))&&t.stop(!0)};return s.finish=s,r||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",a=f.timers,s=D.get(this);if(r)s[r]&&s[r].stop&&i(s[r]);else for(r in s)s[r]&&s[r].stop&&Be.test(r)&&i(s[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(n),t=!1,a.splice(r,1));(t||!n)&&f.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=D.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],a=f.timers,s=i?i.length:0;for(n.finish=!0,f.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),f.each(["toggle","show","hide"],(function(e,t){var n=f.fn[t];f.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(Ye(t,!0),e,i,r)}})),f.each({slideDown:Ye("show"),slideUp:Ye("hide"),slideToggle:Ye("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){f.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),f.timers=[],f.fx.tick=function(){var e,t=0,n=f.timers;for(De=f.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||f.fx.stop(),De=void 0},f.fx.timer=function(e){f.timers.push(e),e()?f.fx.start():f.timers.pop()},f.fx.interval=13,f.fx.start=function(){Ne||(Ne=setInterval(f.fx.tick,f.fx.interval))},f.fx.stop=function(){clearInterval(Ne),Ne=null},f.fx.speeds={slow:600,fast:200,_default:400},f.fn.delay=function(e,t){return e=f.fx&&f.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}}))},function(){var e=d.createElement("input"),t=d.createElement("select"),n=t.appendChild(d.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=n.selected,t.disabled=!0,h.optDisabled=!n.disabled,(e=d.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var We,je=f.expr.attrHandle;f.fn.extend({attr:function(e,t){return I(this,f.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){f.removeAttr(this,e)}))}}),f.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return _typeof(e.getAttribute)===z?f.prop(e,t,n):(1===a&&f.isXMLDoc(e)||(t=t.toLowerCase(),i=f.attrHooks[t]||(f.expr.match.bool.test(t)?We:void 0)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=f.find.attr(e,t))?void 0:r:null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void f.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,a=t&&t.match(T);if(a&&1===e.nodeType)for(;n=a[r++];)i=f.propFix[n]||n,f.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&f.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),We={set:function(e,t,n){return!1===t?f.removeAttr(e,n):e.setAttribute(n,n),n}},f.each(f.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=je[t]||f.find.attr;je[t]=function(e,t,i){var r,a;return i||(a=je[t],je[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,je[t]=a),r}}));var Xe=/^(?:input|select|textarea|button)$/i;f.fn.extend({prop:function(e,t){return I(this,f.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[f.propFix[e]||e]}))}}),f.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var i,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return(1!==a||!f.isXMLDoc(e))&&(t=f.propFix[t]||t,r=f.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||Xe.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),h.optSelected||(f.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),f.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){f.propFix[this.toLowerCase()]=this}));var Qe=/[\t\r\n\f]/g;f.fn.extend({addClass:function(e){var t,n,i,r,a,s,o="string"==typeof e&&e,l=0,u=this.length;if(f.isFunction(e))return this.each((function(t){f(this).addClass(e.call(this,t,this.className))}));if(o)for(t=(e||"").match(T)||[];u>l;l++)if(i=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace(Qe," "):" ")){for(a=0;r=t[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");s=f.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,i,r,a,s,o=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(f.isFunction(e))return this.each((function(t){f(this).removeClass(e.call(this,t,this.className))}));if(o)for(t=(e||"").match(T)||[];u>l;l++)if(i=1===(n=this[l]).nodeType&&(n.className?(" "+n.className+" ").replace(Qe," "):"")){for(a=0;r=t[a++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");s=e?f.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=_typeof(e);return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(f.isFunction(e)?function(n){f(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=f(this),a=e.match(T)||[];t=a[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===z||"boolean"===n)&&(this.className&&D.set(this,"__className__",this.className),this.className=this.className||!1===e?"":D.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Qe," ").indexOf(t)>=0)return!0;return!1}});var Ke=/\r/g;f.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=f.isFunction(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,f(this).val()):e)?r="":"number"==typeof r?r+="":f.isArray(r)&&(r=f.map(r,(function(e){return null==e?"":e+""}))),(t=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=f.valHooks[r.type]||f.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Ke,""):null==n?"":n:void 0}}),f.extend({valHooks:{select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,a="select-one"===e.type||0>r,s=a?null:[],o=a?r+1:i.length,l=0>r?o:a?r:0;o>l;l++)if(!(!(n=i[l]).selected&&l!==r||(h.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&f.nodeName(n.parentNode,"optgroup"))){if(t=f(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,a=f.makeArray(t),s=r.length;s--;)((i=r[s]).selected=f.inArray(f(i).val(),a)>=0)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),f.each(["radio","checkbox"],(function(){f.valHooks[this]={set:function(e,t){return f.isArray(t)?e.checked=f.inArray(f(e).val(),t)>=0:void 0}},h.checkOn||(f.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(e,t){f.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),f.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Je=f.now(),Ze=/\?/;f.parseJSON=function(e){return JSON.parse(e+"")},f.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&f.error("Invalid XML: "+e),t};var $e,et,tt=/#.*$/,nt=/([?&])_=[^&]*/,it=/^(.*?):[ \t]*([^\r\n]*)$/gm,rt=/^(?:GET|HEAD)$/,at=/^\/\//,st=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ot={},lt={},ut="*/".concat("*");try{et=location.href}catch(Tt){(et=d.createElement("a")).href="",et=et.href}function ct(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,a=t.toLowerCase().match(T)||[];if(f.isFunction(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function ht(e,t,n,i){var r={},a=e===lt;function s(o){var l;return r[o]=!0,f.each(e[o]||[],(function(e,o){var u=o(t,n,i);return"string"!=typeof u||a||r[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),s(u),!1)})),l}return s(t.dataTypes[0])||!r["*"]&&s("*")}function dt(e,t){var n,i,r=f.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&f.extend(!0,e,i),e}$e=st.exec(et.toLowerCase())||[],f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:et,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test($e[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ut,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?dt(dt(e,f.ajaxSettings),t):dt(f.ajaxSettings,e)},ajaxPrefilter:ct(ot),ajaxTransport:ct(lt),ajax:function(e,t){"object"==_typeof(e)&&(t=e,e=void 0);var n,i,r,a,s,o,l,u,c=f.ajaxSetup({},t=t||{}),h=c.context||c,d=c.context&&(h.nodeType||h.jquery)?f(h):f.event,p=f.Deferred(),m=f.Callbacks("once memory"),g=c.statusCode||{},y={},v={},A=0,b="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===A){if(!a)for(a={};t=it.exec(r);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===A?r:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return A||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return A||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>A)for(t in e)g[t]=[g[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),k(0,t),this}};if(p.promise(S).complete=m.add,S.success=S.done,S.error=S.fail,c.url=((e||c.url||et)+"").replace(tt,"").replace(at,$e[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=f.trim(c.dataType||"*").toLowerCase().match(T)||[""],null==c.crossDomain&&(o=st.exec(c.url.toLowerCase()),c.crossDomain=!(!o||o[1]===$e[1]&&o[2]===$e[2]&&(o[3]||("http:"===o[1]?"80":"443"))===($e[3]||("http:"===$e[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=f.param(c.data,c.traditional)),ht(ot,c,t,S),2===A)return S;for(u in(l=c.global)&&0==f.active++&&f.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!rt.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(Ze.test(i)?"&":"?")+c.data,delete c.data),!1===c.cache&&(c.url=nt.test(i)?i.replace(nt,"$1_="+Je++):i+(Ze.test(i)?"&":"?")+"_="+Je++)),c.ifModified&&(f.lastModified[i]&&S.setRequestHeader("If-Modified-Since",f.lastModified[i]),f.etag[i]&&S.setRequestHeader("If-None-Match",f.etag[i])),(c.data&&c.hasContent&&!1!==c.contentType||t.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+ut+"; q=0.01":""):c.accepts["*"]),c.headers)S.setRequestHeader(u,c.headers[u]);if(c.beforeSend&&(!1===c.beforeSend.call(h,S,c)||2===A))return S.abort();for(u in b="abort",{success:1,error:1,complete:1})S[u](c[u]);if(n=ht(lt,c,t,S)){S.readyState=1,l&&d.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(s=setTimeout((function(){S.abort("timeout")}),c.timeout));try{A=1,n.send(y,k)}catch(E){if(!(2>A))throw E;k(-1,E)}}else k(-1,"No Transport");function k(e,t,a,o){var u,y,v,b,E,k=t;2!==A&&(A=2,s&&clearTimeout(s),n=void 0,r=o||"",S.readyState=e>0?4:0,u=e>=200&&300>e||304===e,a&&(b=function(e,t,n){for(var i,r,a,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}s||(s=r)}a=a||s}return a?(a!==l[0]&&l.unshift(a),n[a]):void 0}(c,S,a)),b=function(e,t,n,i){var r,a,s,o,l,u={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)u[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(s=u[l+" "+a]||u["* "+a]))for(r in u)if((o=r.split(" "))[1]===a&&(s=u[l+" "+o[0]]||u["* "+o[0]])){!0===s?s=u[r]:!0!==u[r]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(c,b,S,u),u?(c.ifModified&&((E=S.getResponseHeader("Last-Modified"))&&(f.lastModified[i]=E),(E=S.getResponseHeader("etag"))&&(f.etag[i]=E)),204===e||"HEAD"===c.type?k="nocontent":304===e?k="notmodified":(k=b.state,y=b.data,u=!(v=b.error))):(v=k,(e||!k)&&(k="error",0>e&&(e=0))),S.status=e,S.statusText=(t||k)+"",u?p.resolveWith(h,[y,k,S]):p.rejectWith(h,[S,k,v]),S.statusCode(g),g=void 0,l&&d.trigger(u?"ajaxSuccess":"ajaxError",[S,c,u?y:v]),m.fireWith(h,[S,k]),l&&(d.trigger("ajaxComplete",[S,c]),--f.active||f.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return f.get(e,t,n,"json")},getScript:function(e,t){return f.get(e,void 0,t,"script")}}),f.each(["get","post"],(function(e,t){f[t]=function(e,n,i,r){return f.isFunction(n)&&(r=r||i,i=n,n=void 0),f.ajax({url:e,type:t,dataType:r,data:n,success:i})}})),f.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){f.fn[t]=function(e){return this.on(t,e)}})),f._evalUrl=function(e){return f.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},f.fn.extend({wrapAll:function(e){var t;return f.isFunction(e)?this.each((function(t){f(this).wrapAll(e.call(this,t))})):(this[0]&&(t=f(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this)},wrapInner:function(e){return this.each(f.isFunction(e)?function(t){f(this).wrapInner(e.call(this,t))}:function(){var t=f(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=f.isFunction(e);return this.each((function(n){f(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(){return this.parent().each((function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)})).end()}}),f.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},f.expr.filters.visible=function(e){return!f.expr.filters.hidden(e)};var pt=/%20/g,ft=/\[\]$/,mt=/\r?\n/g,gt=/^(?:submit|button|image|reset|file)$/i,yt=/^(?:input|select|textarea|keygen)/i;function vt(e,t,n,i){var r;if(f.isArray(t))f.each(t,(function(t,r){n||ft.test(e)?i(e,r):vt(e+"["+("object"==_typeof(r)?t:"")+"]",r,n,i)}));else if(n||"object"!==f.type(t))i(e,t);else for(r in t)vt(e+"["+r+"]",t[r],n,i)}f.param=function(e,t){var n,i=[],r=function(e,t){t=f.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=f.ajaxSettings&&f.ajaxSettings.traditional),f.isArray(e)||e.jquery&&!f.isPlainObject(e))f.each(e,(function(){r(this.name,this.value)}));else for(n in e)vt(n,e[n],t,r);return i.join("&").replace(pt,"+")},f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=f.prop(this,"elements");return e?f.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!f(this).is(":disabled")&&yt.test(this.nodeName)&&!gt.test(e)&&(this.checked||!Y.test(e))})).map((function(e,t){var n=f(this).val();return null==n?null:f.isArray(n)?f.map(n,(function(e){return{name:t.name,value:e.replace(mt,"\r\n")}})):{name:t.name,value:n.replace(mt,"\r\n")}})).get()}}),f.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var At=0,bt={},St={0:200,1223:204},Et=f.ajaxSettings.xhr();e.ActiveXObject&&f(e).on("unload",(function(){for(var e in bt)bt[e]()})),h.cors=!!Et&&"withCredentials"in Et,h.ajax=Et=!!Et,f.ajaxTransport((function(e){var t;return h.cors||Et&&!e.crossDomain?{send:function(n,i){var r,a=e.xhr(),s=++At;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)a[r]=e.xhrFields[r];for(r in e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)a.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete bt[s],t=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?i(a.status,a.statusText):i(St[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:void 0,a.getAllResponseHeaders()))}},a.onload=t(),a.onerror=t("error"),t=bt[s]=t("abort"),a.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}:void 0})),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return f.globalEval(e),e}}}),f.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),f.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain)return{send:function(i,r){t=f("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),d.head.appendChild(t[0])},abort:function(){n&&n()}}}));var kt=[],Vt=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=kt.pop()||f.expando+"_"+Je++;return this[e]=!0,e}}),f.ajaxPrefilter("json jsonp",(function(t,n,i){var r,a,s,o=!1!==t.jsonp&&(Vt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=f.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Vt,"$1"+r):!1!==t.jsonp&&(t.url+=(Ze.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||f.error(r+" was not called"),s[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){s=arguments},i.always((function(){e[r]=a,t[r]&&(t.jsonpCallback=n.jsonpCallback,kt.push(r)),s&&f.isFunction(a)&&a(s[0]),s=a=void 0})),"script"):void 0})),f.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||d;var i=S.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=f.buildFragment([e],t,r),r&&r.length&&f(r).remove(),f.merge([],i.childNodes))};var wt=f.fn.load;f.fn.load=function(e,t,n){if("string"!=typeof e&&wt)return wt.apply(this,arguments);var i,r,a,s=this,o=e.indexOf(" ");return o>=0&&(i=e.slice(o),e=e.slice(0,o)),f.isFunction(t)?(n=t,t=void 0):t&&"object"==_typeof(t)&&(r="POST"),s.length>0&&f.ajax({url:e,type:r,dataType:"html",data:t}).done((function(e){a=arguments,s.html(i?f("<div>").append(f.parseHTML(e)).find(i):e)})).complete(n&&function(e,t){s.each(n,a||[e.responseText,t,e])}),this},f.expr.filters.animated=function(e){return f.grep(f.timers,(function(t){return e===t.elem})).length};var _t=e.document.documentElement;function Ct(e){return f.isWindow(e)?e:9===e.nodeType&&e.defaultView}f.offset={setOffset:function(e,t,n){var i,r,a,s,o,l,u=f.css(e,"position"),c=f(e),h={};"static"===u&&(e.style.position="relative"),o=c.offset(),a=f.css(e,"top"),l=f.css(e,"left"),("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1?(s=(i=c.position()).top,r=i.left):(s=parseFloat(a)||0,r=parseFloat(l)||0),f.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(h.top=t.top-o.top+s),null!=t.left&&(h.left=t.left-o.left+r),"using"in t?t.using.call(e,h):c.css(h)}},f.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){f.offset.setOffset(this,e,t)}));var t,n,i=this[0],r={top:0,left:0},a=i&&i.ownerDocument;return a?(t=a.documentElement,f.contains(t,i)?(_typeof(i.getBoundingClientRect)!==z&&(r=i.getBoundingClientRect()),n=Ct(a),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===f.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),f.nodeName(e[0],"html")||(i=e.offset()),i.top+=f.css(e[0],"borderTopWidth",!0),i.left+=f.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-f.css(n,"marginTop",!0),left:t.left-i.left-f.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||_t;e&&!f.nodeName(e,"html")&&"static"===f.css(e,"position");)e=e.offsetParent;return e||_t}))}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,n){var i="pageYOffset"===n;f.fn[t]=function(r){return I(this,(function(t,r,a){var s=Ct(t);return void 0===a?s?s[n]:t[r]:void(s?s.scrollTo(i?e.pageXOffset:a,i?a:e.pageYOffset):t[r]=a)}),t,r,arguments.length,null)}})),f.each(["top","left"],(function(e,t){f.cssHooks[t]=Ee(h.pixelPosition,(function(e,n){return n?(n=Se(e,t),Ae.test(n)?f(e).position()[t]+"px":n):void 0}))})),f.each({Height:"height",Width:"width"},(function(e,t){f.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){f.fn[i]=function(i,r){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===r?"margin":"border");return I(this,(function(t,n,i){var r;return f.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?f.css(t,n,s):f.style(t,n,i,s)}),t,a?i:void 0,a,null)}}))})),f.fn.size=function(){return this.length},f.fn.andSelf=f.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return f}));var xt=e.jQuery,Pt=e.$;return f.noConflict=function(t){return e.$===f&&(e.$=Pt),t&&e.jQuery===f&&(e.jQuery=xt),f},_typeof(t)===z&&(e.jQuery=e.$=f),f})),function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t,n,i){for(var r=-1,a=null==e?0:e.length;++r<a;){var s=e[r];t(i,s,n(s),e)}return i}function r(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function a(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function s(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function o(e,t){for(var n=-1,i=null==e?0:e.length,r=0,a=[];++n<i;){var s=e[n];t(s,n,e)&&(a[r++]=s)}return a}function l(e,t){return!(null==e||!e.length)&&-1<y(e,t,0)}function u(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function c(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function h(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function d(e,t,n,i){var r=-1,a=null==e?0:e.length;for(i&&a&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);return n}function p(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function f(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function m(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function g(e,t,n,i){var r=e.length;for(n+=i?1:-1;i?n--:++n<r;)if(t(e[n],n,e))return n;return-1}function y(e,t,n){if(t==t)e:{--n;for(var i=e.length;++n<i;)if(e[n]===t){e=n;break e}e=-1}else e=g(e,A,n);return e}function v(e,t,n,i){--n;for(var r=e.length;++n<r;)if(i(e[n],t))return n;return-1}function A(e){return e!=e}function b(e,t){var n=null==e?0:e.length;return n?V(e,t)/n:G}function S(e){return function(t){return null==t?O:t[e]}}function E(e){return function(t){return null==e?O:e[t]}}function k(e,t,n,i,r){return r(e,(function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)})),n}function V(e,t){for(var n,i=-1,r=e.length;++i<r;){var a=t(e[i]);a!==O&&(n=n===O?a:n+a)}return n}function w(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function _(e){return function(t){return e(t)}}function C(e,t){return c(t,(function(t){return e[t]}))}function x(e,t){return e.has(t)}function P(e,t){for(var n=-1,i=e.length;++n<i&&-1<y(t,e[n],0););return n}function T(e,t){for(var n=e.length;n--&&-1<y(t,e[n],0););return n}function M(e){return"\\"+Re[e]}function L(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function I(e,t){return function(n){return e(t(n))}}function R(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var s=e[n];s!==t&&"__lodash_placeholder__"!==s||(e[n]="__lodash_placeholder__",a[r++]=n)}return a}function D(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function N(e){if(xe.test(e)){for(var t=_e.lastIndex=0;_e.test(e);)++t;e=t}else e=Ke(e);return e}function q(e){return xe.test(e)?e.match(_e)||[]:e.split("")}var O,B=1/0,G=NaN,H=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],F=/\b__p\+='';/g,Y=/\b(__p\+=)''\+/g,z=/(__e\(.*?\)|\b__t\))\+'';/g,U=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,j=RegExp(U.source),X=RegExp(W.source),Q=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,ee=/^\./,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(ne.source),re=/^\s+|\s+$/g,ae=/^\s+/,se=/\s+$/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,Ae=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ee="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",ke="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+Ee,Ve=RegExp("['’]","g"),we=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),_e=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])"+Ee,"g"),Ce=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+",ke].join("|"),"g"),xe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Pe=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Te="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Me={};Me["[object Float32Array]"]=Me["[object Float64Array]"]=Me["[object Int8Array]"]=Me["[object Int16Array]"]=Me["[object Int32Array]"]=Me["[object Uint8Array]"]=Me["[object Uint8ClampedArray]"]=Me["[object Uint16Array]"]=Me["[object Uint32Array]"]=!0,Me["[object Arguments]"]=Me["[object Array]"]=Me["[object ArrayBuffer]"]=Me["[object Boolean]"]=Me["[object DataView]"]=Me["[object Date]"]=Me["[object Error]"]=Me["[object Function]"]=Me["[object Map]"]=Me["[object Number]"]=Me["[object Object]"]=Me["[object RegExp]"]=Me["[object Set]"]=Me["[object String]"]=Me["[object WeakMap]"]=!1;var Le={};Le["[object Arguments]"]=Le["[object Array]"]=Le["[object ArrayBuffer]"]=Le["[object DataView]"]=Le["[object Boolean]"]=Le["[object Date]"]=Le["[object Float32Array]"]=Le["[object Float64Array]"]=Le["[object Int8Array]"]=Le["[object Int16Array]"]=Le["[object Int32Array]"]=Le["[object Map]"]=Le["[object Number]"]=Le["[object Object]"]=Le["[object RegExp]"]=Le["[object Set]"]=Le["[object String]"]=Le["[object Symbol]"]=Le["[object Uint8Array]"]=Le["[object Uint8ClampedArray]"]=Le["[object Uint16Array]"]=Le["[object Uint32Array]"]=!0,Le["[object Error]"]=Le["[object Function]"]=Le["[object WeakMap]"]=!1;var Ie,Re={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},De=parseFloat,Ne=parseInt,qe="object"==("undefined"==typeof global?"undefined":_typeof(global))&&global&&global.Object===Object&&global,Oe="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,Be=qe||Oe||Function("return this")(),Ge="object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&exports&&!exports.nodeType&&exports,He=Ge&&"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module&&!module.nodeType&&module,Fe=He&&He.exports===Ge,Ye=Fe&&qe.process;e:{try{Ie=Ye&&Ye.binding&&Ye.binding("util");break e}catch(e){}Ie=void 0}var ze=Ie&&Ie.isArrayBuffer,Ue=Ie&&Ie.isDate,We=Ie&&Ie.isMap,je=Ie&&Ie.isRegExp,Xe=Ie&&Ie.isSet,Qe=Ie&&Ie.isTypedArray,Ke=S("length"),Je=E({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ze=E({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),$e=E({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),et=function E(Ee){function ke(e){if(Zi(e)&&!Bs(e)&&!(e instanceof Re)){if(e instanceof Ie)return e;if(Gr.call(e,"__wrapped__"))return Vi(e)}return new Ie(e)}function _e(){}function Ie(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=O}function Re(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function qe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ge(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function He(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ge;++t<n;)this.add(e[t])}function Ye(e){this.size=(this.__data__=new Oe(e)).size}function Ke(e,t){var n,i=Bs(e),r=!i&&Os(e),a=!i&&!r&&Hs(e),s=!i&&!r&&!a&&Ws(e),o=(r=(i=i||r||a||s)?w(e.length,Rr):[]).length;for(n in e)!t&&!Gr.call(e,n)||i&&("length"==n||a&&("offset"==n||"parent"==n)||s&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||hi(n,o))||r.push(n);return r}function tt(e){var t=e.length;return t?e[jt(0,t-1)]:O}function nt(e,t){return bi(Vn(e),ht(t,0,e.length))}function it(e){return bi(Vn(e))}function rt(e,t,n){(n===O||zi(e[t],n))&&(n!==O||t in e)||ut(e,t,n)}function at(e,t,n){var i=e[t];Gr.call(e,t)&&zi(i,n)&&(n!==O||t in e)||ut(e,t,n)}function st(e,t){for(var n=e.length;n--;)if(zi(e[n][0],t))return n;return-1}function ot(e,t,n,i){return Oa(e,(function(e,r,a){t(i,e,n(e),a)})),i}function lt(e,t){return e&&wn(t,dr(t),e)}function ut(e,t,n){"__proto__"==t&&ra?ra(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ct(e,t){for(var n=-1,i=t.length,r=Cr(i),a=null==e;++n<i;)r[n]=a?O:cr(e,t[n]);return r}function ht(e,t,n){return e==e&&(n!==O&&(e=e<=n?e:n),t!==O&&(e=e>=t?e:t)),e}function dt(e,t,n,i,a,s){var o,l=1&t,u=2&t,c=4&t;if(n&&(o=a?n(e,i,a,s):n(e)),o!==O)return o;if(!Ji(e))return e;if(i=Bs(e)){if(o=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Gr.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return Vn(e,o)}else{var h=Qa(e),d="[object Function]"==h||"[object GeneratorFunction]"==h;if(Hs(e))return vn(e,l);if("[object Object]"==h||"[object Arguments]"==h||d&&!a){if(o=u||d?{}:li(e),!l)return u?function(e,t){return wn(e,Xa(e),t)}(e,function(e,t){return e&&wn(t,pr(t),e)}(o,e)):function(e,t){return wn(e,ja(e),t)}(e,lt(o,e))}else{if(!Le[h])return a?e:{};o=ui(e,h,dt,l)}}if(s||(s=new Ye),a=s.get(e))return a;s.set(e,o);u=c?u?ei:$n:u?pr:dr;var p=i?O:u(e);return r(p||e,(function(i,r){p&&(i=e[r=i]),at(o,r,dt(i,t,n,r,e,s))})),o}function pt(e,t,n){var i=n.length;if(null==e)return!i;for(e=Lr(e);i--;){var r=n[i],a=t[r],s=e[r];if(s===O&&!(r in e)||!a(s))return!1}return!0}function ft(e,t,n){if("function"!=typeof e)throw new Dr("Expected a function");return Za((function(){e.apply(O,n)}),t)}function mt(e,t,n,i){var r=-1,a=l,s=!0,o=e.length,h=[],d=t.length;if(!o)return h;n&&(t=c(t,_(n))),i?(a=u,s=!1):200<=t.length&&(a=x,s=!1,t=new He(t));e:for(;++r<o;){var p=e[r],f=null==n?p:n(p);p=i||0!==p?p:0;if(s&&f==f){for(var m=d;m--;)if(t[m]===f)continue e;h.push(p)}else a(t,f,i)||h.push(p)}return h}function gt(e,t){var n=!0;return Oa(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function yt(e,t,n){for(var i=-1,r=e.length;++i<r;){var a=e[i],s=t(a);if(null!=s&&(o===O?s==s&&!nr(s):n(s,o)))var o=s,l=a}return l}function vt(e,t){var n=[];return Oa(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function At(e,t,n,i,r){var a=-1,s=e.length;for(n||(n=ci),r||(r=[]);++a<s;){var o=e[a];0<t&&n(o)?1<t?At(o,t-1,n,i,r):h(r,o):i||(r[r.length]=o)}return r}function bt(e,t){return e&&Ga(e,t,dr)}function St(e,t){return e&&Ha(e,t,dr)}function Et(e,t){return o(t,(function(t){return Xi(e[t])}))}function kt(e,t){for(var n=0,i=(t=gn(t,e)).length;null!=e&&n<i;)e=e[Si(t[n++])];return n&&n==i?e:O}function Vt(e,t,n){return t=t(e),Bs(e)?t:h(t,n(e))}function wt(e){if(null==e)e=e===O?"[object Undefined]":"[object Null]";else if(ia&&ia in Lr(e)){var t=Gr.call(e,ia),n=e[ia];try{e[ia]=O;var i=!0}catch(e){}var r=Yr.call(e);i&&(t?e[ia]=n:delete e[ia]),e=r}else e=Yr.call(e);return e}function _t(e,t){return e>t}function Ct(e,t){return null!=e&&Gr.call(e,t)}function xt(e,t){return null!=e&&t in Lr(e)}function Pt(e,t,n){for(var i=n?u:l,r=e[0].length,a=e.length,s=a,o=Cr(a),h=1/0,d=[];s--;){var p=e[s];s&&t&&(p=c(p,_(t))),h=ga(p.length,h),o[s]=!n&&(t||120<=r&&120<=p.length)?new He(s&&p):O}p=e[0];var f=-1,m=o[0];e:for(;++f<r&&d.length<h;){var g=p[f],y=t?t(g):g;g=n||0!==g?g:0;if(m?!x(m,y):!i(d,y,n)){for(s=a;--s;){var v=o[s];if(v?!x(v,y):!i(e[s],y,n))continue e}m&&m.push(y),d.push(g)}}return d}function Tt(e,t,i){return null==(t=null==(e=2>(t=gn(t,e)).length?e:kt(e,en(t,0,-1)))?e:e[Si(Pi(t))])?O:n(t,e,i)}function Mt(e){return Zi(e)&&"[object Arguments]"==wt(e)}function Lt(e,t,n,i,r){if(e===t)t=!0;else if(null==e||null==t||!Zi(e)&&!Zi(t))t=e!=e&&t!=t;else e:{var a,s,o=Bs(e),l=Bs(t),u="[object Object]"==(a="[object Arguments]"==(a=o?"[object Array]":Qa(e))?"[object Object]":a);l="[object Object]"==(s="[object Arguments]"==(s=l?"[object Array]":Qa(t))?"[object Object]":s);if((s=a==s)&&Hs(e)){if(!Hs(t)){t=!1;break e}o=!0,u=!1}if(s&&!u)r||(r=new Ye),t=o||Ws(e)?Jn(e,t,n,i,Lt,r):function(e,t,n,i,r,a,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!a(new Qr(e),new Qr(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return zi(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=L;case"[object Set]":if(o||(o=D),e.size!=t.size&&!(1&i))break;return(n=s.get(e))?n==t:(i|=2,s.set(e,t),t=Jn(o(e),o(t),i,r,a,s),s.delete(e),t);case"[object Symbol]":if(Da)return Da.call(e)==Da.call(t)}return!1}(e,t,a,n,i,Lt,r);else{if(!(1&n)&&(o=u&&Gr.call(e,"__wrapped__"),a=l&&Gr.call(t,"__wrapped__"),o||a)){e=o?e.value():e,t=a?t.value():t,r||(r=new Ye),t=Lt(e,t,n,i,r);break e}if(s)t:if(r||(r=new Ye),o=1&n,a=$n(e),l=a.length,s=$n(t).length,l==s||o){for(u=l;u--;){var c=a[u];if(!(o?c in t:Gr.call(t,c))){t=!1;break t}}if((s=r.get(e))&&r.get(t))t=s==t;else{s=!0,r.set(e,t),r.set(t,e);for(var h=o;++u<l;){var d=e[c=a[u]],p=t[c];if(i)var f=o?i(p,d,c,t,e,r):i(d,p,c,e,t,r);if(f===O?d!==p&&!Lt(d,p,n,i,r):!f){s=!1;break}h||(h="constructor"==c)}s&&!h&&((n=e.constructor)!=(i=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof i&&i instanceof i)&&(s=!1)),r.delete(e),r.delete(t),t=s}}else t=!1;else t=!1}}return t}function It(e,t,n,i){var r=n.length,a=r,s=!i;if(null==e)return!a;for(e=Lr(e);r--;){var o=n[r];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++r<a;){var l=(o=n[r])[0],u=e[l],c=o[1];if(s&&o[2]){if(u===O&&!(l in e))return!1}else{if(o=new Ye,i)var h=i(u,c,l,e,t,o);if(h===O?!Lt(c,u,3,i,o):!h)return!1}}return!0}function Rt(e){return!(!Ji(e)||Fr&&Fr in e)&&(Xi(e)?Wr:ge).test(Ei(e))}function Dt(e){return"function"==typeof e?e:null==e?br:"object"==_typeof(e)?Bs(e)?Gt(e[0],e[1]):Bt(e):Vr(e)}function Nt(e){if(!mi(e))return fa(e);var t,n=[];for(t in Lr(e))Gr.call(e,t)&&"constructor"!=t&&n.push(t);return n}function qt(e,t){return e<t}function Ot(e,t){var n=-1,i=Ui(e)?Cr(e.length):[];return Oa(e,(function(e,r,a){i[++n]=t(e,r,a)})),i}function Bt(e){var t=ai(e);return 1==t.length&&t[0][2]?gi(t[0][0],t[0][1]):function(n){return n===e||It(n,e,t)}}function Gt(e,t){return pi(e)&&t==t&&!Ji(t)?gi(Si(e),t):function(n){var i=cr(n,e);return i===O&&i===t?hr(n,e):Lt(t,i,3)}}function Ht(e,t,n,i,r){e!==t&&Ga(t,(function(a,s){if(Ji(a)){r||(r=new Ye);var o=r,l=e[s],u=t[s];if(f=o.get(u))rt(e,s,f);else{var c=(f=i?i(l,u,s+"",e,t,o):O)===O;if(c){var h=Bs(u),d=!h&&Hs(u),p=!h&&!d&&Ws(u),f=u;h||d||p?Bs(l)?f=l:Wi(l)?f=Vn(l):d?(c=!1,f=vn(u,!0)):p?(c=!1,f=bn(u,!0)):f=[]:er(u)||Os(u)?(f=l,Os(l)?f=lr(l):(!Ji(l)||n&&Xi(l))&&(f=li(u))):c=!1}c&&(o.set(u,f),Ht(f,u,n,i,o),o.delete(u)),rt(e,s,f)}}else(o=i?i(e[s],a,s+"",e,t,r):O)===O&&(o=a),rt(e,s,o)}),pr)}function Ft(e,t){var n=e.length;if(n)return hi(t+=0>t?n:0,n)?e[t]:O}function Yt(e,t,n){var i=-1;return t=c(t.length?t:[br],_(ii())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}(e=Ot(e,(function(e){return{a:c(t,(function(t){return t(e)})),b:++i,c:e}})),(function(e,t){var i;e:{i=-1;for(var r=e.a,a=t.a,s=r.length,o=n.length;++i<s;){var l=Sn(r[i],a[i]);if(l){i=i>=o?l:l*("desc"==n[i]?-1:1);break e}}i=e.b-t.b}return i}))}function zt(e,t,n){for(var i=-1,r=t.length,a={};++i<r;){var s=t[i],o=kt(e,s);n(o,s)&&Zt(a,gn(s,e),o)}return a}function Ut(e,t,n,i){var r=i?v:y,a=-1,s=t.length,o=e;for(e===t&&(t=Vn(t)),n&&(o=c(e,_(n)));++a<s;){var l=0,u=t[a];for(u=n?n(u):u;-1<(l=r(o,u,l,i));)o!==e&&ea.call(o,l,1),ea.call(e,l,1)}return e}function Wt(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==a){var a=r;hi(r)?ea.call(e,r,1):un(e,r)}}}function jt(e,t){return e+ua(Aa()*(t-e+1))}function Xt(e,t){var n="";if(!e||1>t||9007199254740991<t)return n;do{t%2&&(n+=e),(t=ua(t/2))&&(e+=e)}while(t);return n}function Qt(e,t){return $a(yi(e,t,br),e+"")}function Kt(e){return tt(mr(e))}function Jt(e,t){var n=mr(e);return bi(n,ht(t,0,n.length))}function Zt(e,t,n,i){if(!Ji(e))return e;for(var r=-1,a=(t=gn(t,e)).length,s=a-1,o=e;null!=o&&++r<a;){var l=Si(t[r]),u=n;if(r!=s){var c=o[l];(u=i?i(c,l,o):O)===O&&(u=Ji(c)?c:hi(t[r+1])?[]:{})}at(o,l,u),o=o[l]}return e}function $t(e){return bi(mr(e))}function en(e,t,n){var i=-1,r=e.length;for(0>t&&(t=-t>r?0:r+t),0>(n=n>r?r:n)&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0,n=Cr(r);++i<r;)n[i]=e[i+t];return n}function tn(e,t){var n;return Oa(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function nn(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&2147483647>=r){for(;i<r;){var a=i+r>>>1,s=e[a];null!==s&&!nr(s)&&(n?s<=t:s<t)?i=a+1:r=a}return r}return rn(e,t,br,n)}function rn(e,t,n,i){t=n(t);for(var r=0,a=null==e?0:e.length,s=t!=t,o=null===t,l=nr(t),u=t===O;r<a;){var c=ua((r+a)/2),h=n(e[c]),d=h!==O,p=null===h,f=h==h,m=nr(h);(s?i||f:u?f&&(i||d):o?f&&d&&(i||!p):l?f&&d&&!p&&(i||!m):!p&&!m&&(i?h<=t:h<t))?r=c+1:a=c}return ga(a,4294967294)}function an(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var s=e[n],o=t?t(s):s;if(!n||!zi(o,l)){var l=o;a[r++]=0===s?0:s}}return a}function sn(e){return"number"==typeof e?e:nr(e)?G:+e}function on(e){if("string"==typeof e)return e;if(Bs(e))return c(e,on)+"";if(nr(e))return Na?Na.call(e):"";var t=e+"";return"0"==t&&1/e==-B?"-0":t}function ln(e,t,n){var i=-1,r=l,a=e.length,s=!0,o=[],c=o;if(n)s=!1,r=u;else if(200<=a){if(r=t?null:Ua(e))return D(r);s=!1,r=x,c=new He}else c=t?[]:o;e:for(;++i<a;){var h=e[i],d=t?t(h):h;h=n||0!==h?h:0;if(s&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),o.push(h)}else r(c,d,n)||(c!==o&&c.push(d),o.push(h))}return o}function un(e,t){return null==(e=2>(t=gn(t,e)).length?e:kt(e,en(t,0,-1)))||delete e[Si(Pi(t))]}function cn(e,t,n,i){for(var r=e.length,a=i?r:-1;(i?a--:++a<r)&&t(e[a],a,e););return n?en(e,i?0:a,i?a+1:r):en(e,i?a+1:0,i?r:a)}function hn(e,t){var n=e;return n instanceof Re&&(n=n.value()),d(t,(function(e,t){return t.func.apply(t.thisArg,h([e],t.args))}),n)}function dn(e,t,n){var i=e.length;if(2>i)return i?ln(e[0]):[];for(var r=-1,a=Cr(i);++r<i;)for(var s=e[r],o=-1;++o<i;)o!=r&&(a[r]=mt(a[r]||s,e[o],t,n));return ln(At(a,1),t,n)}function pn(e,t,n){for(var i=-1,r=e.length,a=t.length,s={};++i<r;)n(s,e[i],i<a?t[i]:O);return s}function fn(e){return Wi(e)?e:[]}function mn(e){return"function"==typeof e?e:br}function gn(e,t){return Bs(e)?e:pi(e,t)?[e]:es(ur(e))}function yn(e,t,n){var i=e.length;return n=n===O?i:n,!t&&n>=i?e:en(e,t,n)}function vn(e,t){if(t)return e.slice();var n=e.length;n=Kr?Kr(n):new e.constructor(n);return e.copy(n),n}function An(e){var t=new e.constructor(e.byteLength);return new Qr(t).set(new Qr(e)),t}function bn(e,t){return new e.constructor(t?An(e.buffer):e.buffer,e.byteOffset,e.length)}function Sn(e,t){if(e!==t){var n=e!==O,i=null===e,r=e==e,a=nr(e),s=t!==O,o=null===t,l=t==t,u=nr(t);if(!o&&!u&&!a&&e>t||a&&s&&l&&!o&&!u||i&&s&&l||!n&&l||!r)return 1;if(!i&&!a&&!u&&e<t||u&&n&&r&&!i&&!a||o&&n&&r||!s&&r||!l)return-1}return 0}function En(e,t,n,i){var r=-1,a=e.length,s=n.length,o=-1,l=t.length,u=ma(a-s,0),c=Cr(l+u);for(i=!i;++o<l;)c[o]=t[o];for(;++r<s;)(i||r<a)&&(c[n[r]]=e[r]);for(;u--;)c[o++]=e[r++];return c}function kn(e,t,n,i){var r=-1,a=e.length,s=-1,o=n.length,l=-1,u=t.length,c=ma(a-o,0),h=Cr(c+u);for(i=!i;++r<c;)h[r]=e[r];for(c=r;++l<u;)h[c+l]=t[l];for(;++s<o;)(i||r<a)&&(h[c+n[s]]=e[r++]);return h}function Vn(e,t){var n=-1,i=e.length;for(t||(t=Cr(i));++n<i;)t[n]=e[n];return t}function wn(e,t,n,i){var r=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var o=t[a],l=i?i(n[o],e[o],o,n,e):O;l===O&&(l=e[o]),r?ut(n,o,l):at(n,o,l)}return n}function _n(e,t){return function(n,r){var a=Bs(n)?i:ot,s=t?t():{};return a(n,e,ii(r,2),s)}}function Cn(e){return Qt((function(t,n){var i=-1,r=n.length,a=1<r?n[r-1]:O,s=2<r?n[2]:O;a=3<e.length&&"function"==typeof a?(r--,a):O;for(s&&di(n[0],n[1],s)&&(a=3>r?O:a,r=1),t=Lr(t);++i<r;)(s=n[i])&&e(t,s,i,a);return t}))}function xn(e,t){return function(n,i){if(null==n)return n;if(!Ui(n))return e(n,i);for(var r=n.length,a=t?r:-1,s=Lr(n);(t?a--:++a<r)&&!1!==i(s[a],a,s););return n}}function Pn(e){return function(t,n,i){for(var r=-1,a=Lr(t),s=(i=i(t)).length;s--;){var o=i[e?s:++r];if(!1===n(a[o],o,a))break}return t}}function Tn(e){return function(t){t=ur(t);var n=xe.test(t)?q(t):O,i=n?n[0]:t.charAt(0);return t=n?yn(n,1).join(""):t.slice(1),i[e]()+t}}function Mn(e){return function(t){return d(vr(yr(t).replace(Ve,"")),e,"")}}function Ln(e){return function(){switch((t=arguments).length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var t,n=qa(e.prototype);return Ji(t=e.apply(n,t))?t:n}}function In(e,t,i){var r=Ln(e);return function a(){for(var s=arguments.length,o=Cr(s),l=s,u=ni(a);l--;)o[l]=arguments[l];return(s-=(l=3>s&&o[0]!==u&&o[s-1]!==u?[]:R(o,u)).length)<i?zn(e,t,Nn,a.placeholder,O,o,l,O,O,i-s):n(this&&this!==Be&&this instanceof a?r:e,this,o)}}function Rn(e){return function(t,n,i){var r=Lr(t);if(!Ui(t)){var a=ii(n,3);t=dr(t),n=function(e){return a(r[e],e,r)}}return-1<(n=e(t,n,i))?r[a?t[n]:n]:O}}function Dn(e){return Zn((function(t){var n=t.length,i=n,r=Ie.prototype.thru;for(e&&t.reverse();i--;){if("function"!=typeof(s=t[i]))throw new Dr("Expected a function");if(r&&!a&&"wrapper"==ti(s))var a=new Ie([],!0)}for(i=a?i:n;++i<n;){var s,o="wrapper"==(r=ti(s=t[i]))?Wa(s):O;a=o&&fi(o[0])&&424==o[1]&&!o[4].length&&1==o[9]?a[ti(o[0])].apply(a,o[3]):1==s.length&&fi(s)?a[r]():a.thru(s)}return function(){var e=(r=arguments)[0];if(a&&1==r.length&&Bs(e))return a.plant(e).value();for(var i=0,r=n?t[i].apply(this,r):e;++i<n;)r=t[i].call(this,r);return r}}))}function Nn(e,t,n,i,r,a,s,o,l,u){var c=128&t,h=1&t,d=2&t,p=24&t,f=512&t,m=d?O:Ln(e);return function g(){for(var y=arguments.length,v=Cr(y),A=y;A--;)v[A]=arguments[A];if(p){var b,S=ni(g);A=v.length;for(b=0;A--;)v[A]===S&&++b}if(i&&(v=En(v,i,r,p)),a&&(v=kn(v,a,s,p)),y-=b,p&&y<u)return S=R(v,S),zn(e,t,Nn,g.placeholder,n,v,S,o,l,u-y);if(S=h?n:this,A=d?S[e]:e,y=v.length,o){b=v.length;for(var E=ga(o.length,b),k=Vn(v);E--;){var V=o[E];v[E]=hi(V,b)?k[V]:O}}else f&&1<y&&v.reverse();return c&&l<y&&(v.length=l),this&&this!==Be&&this instanceof g&&(A=m||Ln(A)),A.apply(S,v)}}function qn(e,t){return function(n,i){return function(e,t,n){var i={};return bt(e,(function(e,r,a){t(i,n(e),r,a)})),i}(n,e,t(i))}}function On(e,t){return function(n,i){var r;if(n===O&&i===O)return t;if(n!==O&&(r=n),i!==O){if(r===O)return i;"string"==typeof n||"string"==typeof i?(n=on(n),i=on(i)):(n=sn(n),i=sn(i)),r=e(n,i)}return r}}function Bn(e){return Zn((function(t){return t=c(t,_(ii())),Qt((function(i){var r=this;return e(t,(function(e){return n(e,r,i)}))}))}))}function Gn(e,t){var n=(t=t===O?" ":on(t)).length;return 2>n?n?Xt(t,e):t:(n=Xt(t,la(e/N(t))),xe.test(t)?yn(q(n),0,e).join(""):n.slice(0,e))}function Hn(e,t,i,r){var a=1&t,s=Ln(e);return function t(){for(var o=-1,l=arguments.length,u=-1,c=r.length,h=Cr(c+l),d=this&&this!==Be&&this instanceof t?s:e;++u<c;)h[u]=r[u];for(;l--;)h[u++]=arguments[++o];return n(d,a?i:this,h)}}function Fn(e){return function(t,n,i){i&&"number"!=typeof i&&di(t,n,i)&&(n=i=O),t=rr(t),n===O?(n=t,t=0):n=rr(n),i=i===O?t<n?1:-1:rr(i);var r=-1;n=ma(la((n-t)/(i||1)),0);for(var a=Cr(n);n--;)a[e?n:++r]=t,t+=i;return a}}function Yn(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=or(t),n=or(n)),e(t,n)}}function zn(e,t,n,i,r,a,s,o,l,u){var c=8&t;return 4&(t=(t|(c?32:64))&~(c?64:32))||(t&=-4),r=[e,t,r,c?a:O,c?s:O,a=c?O:a,s=c?O:s,o,l,u],n=n.apply(O,r),fi(e)&&Ja(n,r),n.placeholder=i,vi(n,e,t)}function Un(e){var t=Mr[e];return function(e,n){if(e=or(e),n=null==n?0:ga(ar(n),292)){var i=(ur(e)+"e").split("e");return+((i=(ur(i=t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}function Wn(e){return function(t){var n=Qa(t);return"[object Map]"==n?L(t):"[object Set]"==n?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return c(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function jn(e,t,n,i,r,a,s,o){var l=2&t;if(!l&&"function"!=typeof e)throw new Dr("Expected a function");var u=i?i.length:0;if(u||(t&=-97,i=r=O),s=s===O?s:ma(ar(s),0),o=o===O?o:ar(o),u-=r?r.length:0,64&t){var c=i,h=r;i=r=O}var d=l?O:Wa(e);return a=[e,t,n,i,r,c,h,a,s,o],d&&(t=(n=a[1])|(e=d[1]),i=128==e&&8==n||128==e&&256==n&&a[7].length<=d[8]||384==e&&d[7].length<=d[8]&&8==n,131>t||i)&&(1&e&&(a[2]=d[2],t|=1&n?0:4),(n=d[3])&&(i=a[3],a[3]=i?En(i,n,d[4]):n,a[4]=i?R(a[3],"__lodash_placeholder__"):d[4]),(n=d[5])&&(i=a[5],a[5]=i?kn(i,n,d[6]):n,a[6]=i?R(a[5],"__lodash_placeholder__"):d[6]),(n=d[7])&&(a[7]=n),128&e&&(a[8]=null==a[8]?d[8]:ga(a[8],d[8])),null==a[9]&&(a[9]=d[9]),a[0]=d[0],a[1]=t),e=a[0],t=a[1],n=a[2],i=a[3],r=a[4],!(o=a[9]=a[9]===O?l?0:e.length:ma(a[9]-u,0))&&24&t&&(t&=-25),vi((d?Fa:Ja)(t&&1!=t?8==t||16==t?In(e,t,o):32!=t&&33!=t||r.length?Nn.apply(O,a):Hn(e,t,n,i):function(e,t,n){var i=1&t,r=Ln(e);return function t(){return(this&&this!==Be&&this instanceof t?r:e).apply(i?n:this,arguments)}}(e,t,n),a),e,t)}function Xn(e,t,n,i){return e===O||zi(e,qr[n])&&!Gr.call(i,n)?t:e}function Qn(e,t,n,i,r,a){return Ji(e)&&Ji(t)&&(a.set(t,e),Ht(e,t,O,Qn,a),a.delete(t)),e}function Kn(e){return er(e)?O:e}function Jn(e,t,n,i,r,a){var s=1&n,o=e.length;if(o!=(l=t.length)&&!(s&&l>o))return!1;if((l=a.get(e))&&a.get(t))return l==t;var l=-1,u=!0,c=2&n?new He:O;for(a.set(e,t),a.set(t,e);++l<o;){var h=e[l],d=t[l];if(i)var p=s?i(d,h,l,t,e,a):i(h,d,l,e,t,a);if(p!==O){if(p)continue;u=!1;break}if(c){if(!f(t,(function(e,t){if(!x(c,t)&&(h===e||r(h,e,n,i,a)))return c.push(t)}))){u=!1;break}}else if(h!==d&&!r(h,d,n,i,a)){u=!1;break}}return a.delete(e),a.delete(t),u}function Zn(e){return $a(yi(e,O,Ci),e+"")}function $n(e){return Vt(e,dr,ja)}function ei(e){return Vt(e,pr,Xa)}function ti(e){for(var t=e.name+"",n=xa[t],i=Gr.call(xa,t)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==e)return r.name}return t}function ni(e){return(Gr.call(ke,"placeholder")?ke:e).placeholder}function ii(){var e=(e=ke.iteratee||Sr)===Sr?Dt:e;return arguments.length?e(arguments[0],arguments[1]):e}function ri(e,t){var n=e.__data__,i=_typeof(t);return("string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function ai(e){for(var t=dr(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,r==r&&!Ji(r)]}return t}function si(e,t){var n=null==e?O:e[t];return Rt(n)?n:O}function oi(e,t,n){for(var i=-1,r=(t=gn(t,e)).length,a=!1;++i<r;){var s=Si(t[i]);if(!(a=null!=e&&n(e,s)))break;e=e[s]}return a||++i!=r?a:!!(r=null==e?0:e.length)&&Ki(r)&&hi(s,r)&&(Bs(e)||Os(e))}function li(e){return"function"!=typeof e.constructor||mi(e)?{}:qa(Jr(e))}function ui(n,i,r,a){var s=n.constructor;switch(i){case"[object ArrayBuffer]":return An(n);case"[object Boolean]":case"[object Date]":return new s(+n);case"[object DataView]":return i=a?An(n.buffer):n.buffer,new n.constructor(i,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return bn(n,a);case"[object Map]":return d(i=a?r(L(n),1):L(n),e,new n.constructor);case"[object Number]":case"[object String]":return new s(n);case"[object RegExp]":return(i=new n.constructor(n.source,pe.exec(n))).lastIndex=n.lastIndex,i;case"[object Set]":return d(i=a?r(D(n),1):D(n),t,new n.constructor);case"[object Symbol]":return Da?Lr(Da.call(n)):{}}}function ci(e){return Bs(e)||Os(e)||!!(ta&&e&&e[ta])}function hi(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||ve.test(e))&&-1<e&&0==e%1&&e<t}function di(e,t,n){if(!Ji(n))return!1;var i=_typeof(t);return!!("number"==i?Ui(n)&&hi(t,n.length):"string"==i&&t in n)&&zi(n[t],e)}function pi(e,t){if(Bs(e))return!1;var n=_typeof(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!nr(e))||$.test(e)||!Z.test(e)||null!=t&&e in Lr(t)}function fi(e){var t=ti(e),n=ke[t];return"function"==typeof n&&t in Re.prototype&&(e===n||!!(t=Wa(n))&&e===t[0])}function mi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||qr)}function gi(e,t){return function(n){return null!=n&&n[e]===t&&(t!==O||e in Lr(n))}}function yi(e,t,i){return t=ma(t===O?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=ma(r.length-t,0),o=Cr(s);++a<s;)o[a]=r[t+a];for(a=-1,s=Cr(t+1);++a<t;)s[a]=r[a];return s[t]=i(o),n(e,this,s)}}function vi(e,t,n){var i=t+"";t=$a;var r,a=ki;return n=a(r=(r=i.match(le))?r[1].split(ue):[],n),(a=n.length)&&(n[r=a-1]=(1<a?"& ":"")+n[r],n=n.join(2<a?", ":" "),i=i.replace(oe,"{\n/* [wrapped with "+n+"] */\n")),t(e,i)}function Ai(e){var t=0,n=0;return function(){var i=ya(),r=16-(i-n);if(n=i,0<r){if(800<=++t)return arguments[0]}else t=0;return e.apply(O,arguments)}}function bi(e,t){var n=-1,i=(r=e.length)-1;for(t=t===O?r:t;++n<t;){var r,a=e[r=jt(n,i)];e[r]=e[n],e[n]=a}return e.length=t,e}function Si(e){if("string"==typeof e||nr(e))return e;var t=e+"";return"0"==t&&1/e==-B?"-0":t}function Ei(e){if(null!=e){try{return Br.call(e)}catch(e){}return e+""}return""}function ki(e,t){return r(H,(function(n){var i="_."+n[0];t&n[1]&&!l(e,i)&&e.push(i)})),e.sort()}function Vi(e){if(e instanceof Re)return e.clone();var t=new Ie(e.__wrapped__,e.__chain__);return t.__actions__=Vn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function wi(e,t,n){var i=null==e?0:e.length;return i?(0>(n=null==n?0:ar(n))&&(n=ma(i+n,0)),g(e,ii(t,3),n)):-1}function _i(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return n!==O&&(r=ar(n),r=0>n?ma(i+r,0):ga(r,i-1)),g(e,ii(t,3),r,!0)}function Ci(e){return null!=e&&e.length?At(e,1):[]}function xi(e){return e&&e.length?e[0]:O}function Pi(e){var t=null==e?0:e.length;return t?e[t-1]:O}function Ti(e,t){return e&&e.length&&t&&t.length?Ut(e,t):e}function Mi(e){return null==e?e:ba.call(e)}function Li(e){if(!e||!e.length)return[];var t=0;return e=o(e,(function(e){if(Wi(e))return t=ma(e.length,t),!0})),w(t,(function(t){return c(e,S(t))}))}function Ii(e,t){if(!e||!e.length)return[];var i=Li(e);return null==t?i:c(i,(function(e){return n(t,O,e)}))}function Ri(e){return(e=ke(e)).__chain__=!0,e}function Di(e,t){return t(e)}function Ni(e,t){return(Bs(e)?r:Oa)(e,ii(t,3))}function qi(e,t){return(Bs(e)?a:Ba)(e,ii(t,3))}function Oi(e,t){return(Bs(e)?c:Ot)(e,ii(t,3))}function Bi(e,t,n){return t=n?O:t,t=e&&null==t?e.length:t,jn(e,128,O,O,O,O,t)}function Gi(e,t){var n;if("function"!=typeof t)throw new Dr("Expected a function");return e=ar(e),function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=O),n}}function Hi(e,t,n){function i(t){var n=l,i=u;return l=u=O,f=t,h=e.apply(i,n)}function r(e){var n=e-p;return e-=f,p===O||n>=t||0>n||g&&e>=c}function a(){var e=Cs();if(r(e))return s(e);var n,i=Za;n=e-f,e=t-(e-p),n=g?ga(e,c-n):e,d=i(a,n)}function s(e){return d=O,y&&l?i(e):(l=u=O,h)}function o(){var e=Cs(),n=r(e);if(l=arguments,u=this,p=e,n){if(d===O)return f=e=p,d=Za(a,t),m?i(e):h;if(g)return d=Za(a,t),i(p)}return d===O&&(d=Za(a,t)),h}var l,u,c,h,d,p,f=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new Dr("Expected a function");return t=or(t)||0,Ji(n)&&(m=!!n.leading,c=(g="maxWait"in n)?ma(or(n.maxWait)||0,t):c,y="trailing"in n?!!n.trailing:y),o.cancel=function(){d!==O&&za(d),f=0,l=p=u=d=O},o.flush=function(){return d===O?h:s(Cs())},o}function Fi(e,t){function n(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;return a.has(r)?a.get(r):(i=e.apply(this,i),n.cache=a.set(r,i)||a,i)}if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Dr("Expected a function");return n.cache=new(Fi.Cache||Ge),n}function Yi(e){if("function"!=typeof e)throw new Dr("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function zi(e,t){return e===t||e!=e&&t!=t}function Ui(e){return null!=e&&Ki(e.length)&&!Xi(e)}function Wi(e){return Zi(e)&&Ui(e)}function ji(e){if(!Zi(e))return!1;var t=wt(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!er(e)}function Xi(e){return!!Ji(e)&&("[object Function]"==(e=wt(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)}function Qi(e){return"number"==typeof e&&e==ar(e)}function Ki(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e}function Ji(e){var t=_typeof(e);return null!=e&&("object"==t||"function"==t)}function Zi(e){return null!=e&&"object"==_typeof(e)}function $i(e){return"number"==typeof e||Zi(e)&&"[object Number]"==wt(e)}function er(e){return!(!Zi(e)||"[object Object]"!=wt(e))&&(null===(e=Jr(e))||"function"==typeof(e=Gr.call(e,"constructor")&&e.constructor)&&e instanceof e&&Br.call(e)==zr)}function tr(e){return"string"==typeof e||!Bs(e)&&Zi(e)&&"[object String]"==wt(e)}function nr(e){return"symbol"==_typeof(e)||Zi(e)&&"[object Symbol]"==wt(e)}function ir(e){if(!e)return[];if(Ui(e))return tr(e)?q(e):Vn(e);if(na&&e[na]){e=e[na]();for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}return("[object Map]"==(t=Qa(e))?L:"[object Set]"==t?D:mr)(e)}function rr(e){return e?(e=or(e))===B||e===-B?17976931348623157e292*(0>e?-1:1):e==e?e:0:0===e?e:0}function ar(e){var t=(e=rr(e))%1;return e==e?t?e-t:e:0}function sr(e){return e?ht(ar(e),0,4294967295):0}function or(e){if("number"==typeof e)return e;if(nr(e))return G;if(Ji(e)&&(e=Ji(e="function"==typeof e.valueOf?e.valueOf():e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(re,"");var t=me.test(e);return t||ye.test(e)?Ne(e.slice(2),t?2:8):fe.test(e)?G:+e}function lr(e){return wn(e,pr(e))}function ur(e){return null==e?"":on(e)}function cr(e,t,n){return(e=null==e?O:kt(e,t))===O?n:e}function hr(e,t){return null!=e&&oi(e,t,xt)}function dr(e){return Ui(e)?Ke(e):Nt(e)}function pr(e){if(Ui(e))e=Ke(e,!0);else if(Ji(e)){var t,n=mi(e),i=[];for(t in e)("constructor"!=t||!n&&Gr.call(e,t))&&i.push(t);e=i}else{if(t=[],null!=e)for(n in Lr(e))t.push(n);e=t}return e}function fr(e,t){if(null==e)return{};var n=c(ei(e),(function(e){return[e]}));return t=ii(t),zt(e,n,(function(e,n){return t(e,n[0])}))}function mr(e){return null==e?[]:C(e,dr(e))}function gr(e){return Ao(ur(e).toLowerCase())}function yr(e){return(e=ur(e))&&e.replace(Ae,Je).replace(we,"")}function vr(e,t,n){return e=ur(e),(t=n?O:t)===O?Pe.test(e)?e.match(Ce)||[]:e.match(ce)||[]:e.match(t)||[]}function Ar(e){return function(){return e}}function br(e){return e}function Sr(e){return Dt("function"==typeof e?e:dt(e,1))}function Er(e,t,n){var i=dr(t),a=Et(t,i);null!=n||Ji(t)&&(a.length||!i.length)||(n=t,t=e,e=this,a=Et(t,dr(t)));var s=!(Ji(n)&&"chain"in n&&!n.chain),o=Xi(e);return r(a,(function(n){var i=t[n];e[n]=i,o&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Vn(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,h([this.value()],arguments))})})),e}function kr(){}function Vr(e){return pi(e)?S(Si(e)):function(e){return function(t){return kt(t,e)}}(e)}function wr(){return[]}function _r(){return!1}var Cr=(Ee=null==Ee?Be:et.defaults(Be.Object(),Ee,et.pick(Be,Te))).Array,xr=Ee.Date,Pr=Ee.Error,Tr=Ee.Function,Mr=Ee.Math,Lr=Ee.Object,Ir=Ee.RegExp,Rr=Ee.String,Dr=Ee.TypeError,Nr=Cr.prototype,qr=Lr.prototype,Or=Ee["__core-js_shared__"],Br=Tr.prototype.toString,Gr=qr.hasOwnProperty,Hr=0,Fr=function(){var e=/[^.]+$/.exec(Or&&Or.keys&&Or.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Yr=qr.toString,zr=Br.call(Lr),Ur=Be._,Wr=Ir("^"+Br.call(Gr).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jr=Fe?Ee.Buffer:O,Xr=Ee.Symbol,Qr=Ee.Uint8Array,Kr=jr?jr.f:O,Jr=I(Lr.getPrototypeOf,Lr),Zr=Lr.create,$r=qr.propertyIsEnumerable,ea=Nr.splice,ta=Xr?Xr.isConcatSpreadable:O,na=Xr?Xr.iterator:O,ia=Xr?Xr.toStringTag:O,ra=function(){try{var e=si(Lr,"defineProperty");return e({},"",{}),e}catch(e){}}(),aa=Ee.clearTimeout!==Be.clearTimeout&&Ee.clearTimeout,sa=xr&&xr.now!==Be.Date.now&&xr.now,oa=Ee.setTimeout!==Be.setTimeout&&Ee.setTimeout,la=Mr.ceil,ua=Mr.floor,ca=Lr.getOwnPropertySymbols,ha=jr?jr.isBuffer:O,da=Ee.isFinite,pa=Nr.join,fa=I(Lr.keys,Lr),ma=Mr.max,ga=Mr.min,ya=xr.now,va=Ee.parseInt,Aa=Mr.random,ba=Nr.reverse,Sa=si(Ee,"DataView"),Ea=si(Ee,"Map"),ka=si(Ee,"Promise"),Va=si(Ee,"Set"),wa=si(Ee,"WeakMap"),_a=si(Lr,"create"),Ca=wa&&new wa,xa={},Pa=Ei(Sa),Ta=Ei(Ea),Ma=Ei(ka),La=Ei(Va),Ia=Ei(wa),Ra=Xr?Xr.prototype:O,Da=Ra?Ra.valueOf:O,Na=Ra?Ra.toString:O,qa=function(){function e(){}return function(t){return Ji(t)?Zr?Zr(t):(e.prototype=t,t=new e,e.prototype=O,t):{}}}();ke.templateSettings={escape:Q,evaluate:K,interpolate:J,variable:"",imports:{_:ke}},ke.prototype=_e.prototype,ke.prototype.constructor=ke,Ie.prototype=qa(_e.prototype),Ie.prototype.constructor=Ie,Re.prototype=qa(_e.prototype),Re.prototype.constructor=Re,qe.prototype.clear=function(){this.__data__=_a?_a(null):{},this.size=0},qe.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},qe.prototype.get=function(e){var t=this.__data__;return _a?"__lodash_hash_undefined__"===(e=t[e])?O:e:Gr.call(t,e)?t[e]:O},qe.prototype.has=function(e){var t=this.__data__;return _a?t[e]!==O:Gr.call(t,e)},qe.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=_a&&t===O?"__lodash_hash_undefined__":t,this},Oe.prototype.clear=function(){this.__data__=[],this.size=0},Oe.prototype.delete=function(e){var t=this.__data__;return!(0>(e=st(t,e))||(e==t.length-1?t.pop():ea.call(t,e,1),--this.size,0))},Oe.prototype.get=function(e){var t=this.__data__;return 0>(e=st(t,e))?O:t[e][1]},Oe.prototype.has=function(e){return-1<st(this.__data__,e)},Oe.prototype.set=function(e,t){var n=this.__data__,i=st(n,e);return 0>i?(++this.size,n.push([e,t])):n[i][1]=t,this},Ge.prototype.clear=function(){this.size=0,this.__data__={hash:new qe,map:new(Ea||Oe),string:new qe}},Ge.prototype.delete=function(e){return e=ri(this,e).delete(e),this.size-=e?1:0,e},Ge.prototype.get=function(e){return ri(this,e).get(e)},Ge.prototype.has=function(e){return ri(this,e).has(e)},Ge.prototype.set=function(e,t){var n=ri(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},He.prototype.add=He.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},He.prototype.has=function(e){return this.__data__.has(e)},Ye.prototype.clear=function(){this.__data__=new Oe,this.size=0},Ye.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Ye.prototype.get=function(e){return this.__data__.get(e)},Ye.prototype.has=function(e){return this.__data__.has(e)},Ye.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Oe){var i=n.__data__;if(!Ea||199>i.length)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ge(i)}return n.set(e,t),this.size=n.size,this};var Oa=xn(bt),Ba=xn(St,!0),Ga=Pn(),Ha=Pn(!0),Fa=Ca?function(e,t){return Ca.set(e,t),e}:br,Ya=ra?function(e,t){return ra(e,"toString",{configurable:!0,enumerable:!1,value:Ar(t),writable:!0})}:br,za=aa||function(e){return Be.clearTimeout(e)},Ua=Va&&1/D(new Va([,-0]))[1]==B?function(e){return new Va(e)}:kr,Wa=Ca?function(e){return Ca.get(e)}:kr,ja=ca?function(e){return null==e?[]:(e=Lr(e),o(ca(e),(function(t){return $r.call(e,t)})))}:wr,Xa=ca?function(e){for(var t=[];e;)h(t,ja(e)),e=Jr(e);return t}:wr,Qa=wt;(Sa&&"[object DataView]"!=Qa(new Sa(new ArrayBuffer(1)))||Ea&&"[object Map]"!=Qa(new Ea)||ka&&"[object Promise]"!=Qa(ka.resolve())||Va&&"[object Set]"!=Qa(new Va)||wa&&"[object WeakMap]"!=Qa(new wa))&&(Qa=function(e){var t=wt(e);if(e=(e="[object Object]"==t?e.constructor:O)?Ei(e):"")switch(e){case Pa:return"[object DataView]";case Ta:return"[object Map]";case Ma:return"[object Promise]";case La:return"[object Set]";case Ia:return"[object WeakMap]"}return t});var Ka=Or?Xi:_r,Ja=Ai(Fa),Za=oa||function(e,t){return Be.setTimeout(e,t)},$a=Ai(Ya),es=function(e){var t=(e=Fi(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}((function(e){var t=[];return ee.test(e)&&t.push(""),e.replace(te,(function(e,n,i,r){t.push(i?r.replace(he,"$1"):n||e)})),t})),ts=Qt((function(e,t){return Wi(e)?mt(e,At(t,1,Wi,!0)):[]})),ns=Qt((function(e,t){var n=Pi(t);return Wi(n)&&(n=O),Wi(e)?mt(e,At(t,1,Wi,!0),ii(n,2)):[]})),is=Qt((function(e,t){var n=Pi(t);return Wi(n)&&(n=O),Wi(e)?mt(e,At(t,1,Wi,!0),O,n):[]})),rs=Qt((function(e){var t=c(e,fn);return t.length&&t[0]===e[0]?Pt(t):[]})),as=Qt((function(e){var t=Pi(e),n=c(e,fn);return t===Pi(n)?t=O:n.pop(),n.length&&n[0]===e[0]?Pt(n,ii(t,2)):[]})),ss=Qt((function(e){var t=Pi(e),n=c(e,fn);return(t="function"==typeof t?t:O)&&n.pop(),n.length&&n[0]===e[0]?Pt(n,O,t):[]})),os=Qt(Ti),ls=Zn((function(e,t){var n=null==e?0:e.length,i=ct(e,t);return Wt(e,c(t,(function(e){return hi(e,n)?+e:e})).sort(Sn)),i})),us=Qt((function(e){return ln(At(e,1,Wi,!0))})),cs=Qt((function(e){var t=Pi(e);return Wi(t)&&(t=O),ln(At(e,1,Wi,!0),ii(t,2))})),hs=Qt((function(e){var t="function"==typeof(t=Pi(e))?t:O;return ln(At(e,1,Wi,!0),O,t)})),ds=Qt((function(e,t){return Wi(e)?mt(e,t):[]})),ps=Qt((function(e){return dn(o(e,Wi))})),fs=Qt((function(e){var t=Pi(e);return Wi(t)&&(t=O),dn(o(e,Wi),ii(t,2))})),ms=Qt((function(e){var t="function"==typeof(t=Pi(e))?t:O;return dn(o(e,Wi),O,t)})),gs=Qt(Li),ys=Qt((function(e){var t="function"==typeof(t=1<(t=e.length)?e[t-1]:O)?(e.pop(),t):O;return Ii(e,t)})),vs=Zn((function(e){function t(t){return ct(t,e)}var n=e.length,i=n?e[0]:0,r=this.__wrapped__;return!(1<n||this.__actions__.length)&&r instanceof Re&&hi(i)?((r=r.slice(i,+i+(n?1:0))).__actions__.push({func:Di,args:[t],thisArg:O}),new Ie(r,this.__chain__).thru((function(e){return n&&!e.length&&e.push(O),e}))):this.thru(t)})),As=_n((function(e,t,n){Gr.call(e,n)?++e[n]:ut(e,n,1)})),bs=Rn(wi),Ss=Rn(_i),Es=_n((function(e,t,n){Gr.call(e,n)?e[n].push(t):ut(e,n,[t])})),ks=Qt((function(e,t,i){var r=-1,a="function"==typeof t,s=Ui(e)?Cr(e.length):[];return Oa(e,(function(e){s[++r]=a?n(t,e,i):Tt(e,t,i)})),s})),Vs=_n((function(e,t,n){ut(e,n,t)})),ws=_n((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]})),_s=Qt((function(e,t){if(null==e)return[];var n=t.length;return 1<n&&di(e,t[0],t[1])?t=[]:2<n&&di(t[0],t[1],t[2])&&(t=[t[0]]),Yt(e,At(t,1),[])})),Cs=sa||function(){return Be.Date.now()},xs=Qt((function(e,t,n){var i=1;if(n.length){var r=R(n,ni(xs));i=32|i}return jn(e,i,t,n,r)})),Ps=Qt((function(e,t,n){var i=3;if(n.length){var r=R(n,ni(Ps));i=32|i}return jn(t,i,e,n,r)})),Ts=Qt((function(e,t){return ft(e,1,t)})),Ms=Qt((function(e,t,n){return ft(e,or(t)||0,n)}));Fi.Cache=Ge;var Ls=Qt((function(e,t){var i=(t=1==t.length&&Bs(t[0])?c(t[0],_(ii())):c(At(t,1),_(ii()))).length;return Qt((function(r){for(var a=-1,s=ga(r.length,i);++a<s;)r[a]=t[a].call(this,r[a]);return n(e,this,r)}))})),Is=Qt((function(e,t){return jn(e,32,O,t,R(t,ni(Is)))})),Rs=Qt((function(e,t){return jn(e,64,O,t,R(t,ni(Rs)))})),Ds=Zn((function(e,t){return jn(e,256,O,O,O,t)})),Ns=Yn(_t),qs=Yn((function(e,t){return e>=t})),Os=Mt(function(){return arguments}())?Mt:function(e){return Zi(e)&&Gr.call(e,"callee")&&!$r.call(e,"callee")},Bs=Cr.isArray,Gs=ze?_(ze):function(e){return Zi(e)&&"[object ArrayBuffer]"==wt(e)},Hs=ha||_r,Fs=Ue?_(Ue):function(e){return Zi(e)&&"[object Date]"==wt(e)},Ys=We?_(We):function(e){return Zi(e)&&"[object Map]"==Qa(e)},zs=je?_(je):function(e){return Zi(e)&&"[object RegExp]"==wt(e)},Us=Xe?_(Xe):function(e){return Zi(e)&&"[object Set]"==Qa(e)},Ws=Qe?_(Qe):function(e){return Zi(e)&&Ki(e.length)&&!!Me[wt(e)]},js=Yn(qt),Xs=Yn((function(e,t){return e<=t})),Qs=Cn((function(e,t){if(mi(t)||Ui(t))wn(t,dr(t),e);else for(var n in t)Gr.call(t,n)&&at(e,n,t[n])})),Ks=Cn((function(e,t){wn(t,pr(t),e)})),Js=Cn((function(e,t,n,i){wn(t,pr(t),e,i)})),Zs=Cn((function(e,t,n,i){wn(t,dr(t),e,i)})),$s=Zn(ct),eo=Qt((function(e){return e.push(O,Xn),n(Js,O,e)})),to=Qt((function(e){return e.push(O,Qn),n(so,O,e)})),no=qn((function(e,t,n){e[t]=n}),Ar(br)),io=qn((function(e,t,n){Gr.call(e,t)?e[t].push(n):e[t]=[n]}),ii),ro=Qt(Tt),ao=Cn((function(e,t,n){Ht(e,t,n)})),so=Cn((function(e,t,n,i){Ht(e,t,n,i)})),oo=Zn((function(e,t){var n={};if(null==e)return n;var i=!1;t=c(t,(function(t){return t=gn(t,e),i||(i=1<t.length),t})),wn(e,ei(e),n),i&&(n=dt(n,7,Kn));for(var r=t.length;r--;)un(n,t[r]);return n})),lo=Zn((function(e,t){return null==e?{}:function(e,t){return zt(e,t,(function(t,n){return hr(e,n)}))}(e,t)})),uo=Wn(dr),co=Wn(pr),ho=Mn((function(e,t,n){return t=t.toLowerCase(),e+(n?gr(t):t)})),po=Mn((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),fo=Mn((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),mo=Tn("toLowerCase"),go=Mn((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()})),yo=Mn((function(e,t,n){return e+(n?" ":"")+Ao(t)})),vo=Mn((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ao=Tn("toUpperCase"),bo=Qt((function(e,t){try{return n(e,O,t)}catch(e){return ji(e)?e:new Pr(e)}})),So=Zn((function(e,t){return r(t,(function(t){t=Si(t),ut(e,t,xs(e[t],e))})),e})),Eo=Dn(),ko=Dn(!0),Vo=Qt((function(e,t){return function(n){return Tt(n,e,t)}})),wo=Qt((function(e,t){return function(n){return Tt(e,n,t)}})),_o=Bn(c),Co=Bn(s),xo=Bn(f),Po=Fn(),To=Fn(!0),Mo=On((function(e,t){return e+t}),0),Lo=Un("ceil"),Io=On((function(e,t){return e/t}),1),Ro=Un("floor"),Do=On((function(e,t){return e*t}),1),No=Un("round"),qo=On((function(e,t){return e-t}),0);return ke.after=function(e,t){if("function"!=typeof t)throw new Dr("Expected a function");return e=ar(e),function(){if(1>--e)return t.apply(this,arguments)}},ke.ary=Bi,ke.assign=Qs,ke.assignIn=Ks,ke.assignInWith=Js,ke.assignWith=Zs,ke.at=$s,ke.before=Gi,ke.bind=xs,ke.bindAll=So,ke.bindKey=Ps,ke.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Bs(e)?e:[e]},ke.chain=Ri,ke.chunk=function(e,t,n){if(t=(n?di(e,t,n):t===O)?1:ma(ar(t),0),!(n=null==e?0:e.length)||1>t)return[];for(var i=0,r=0,a=Cr(la(n/t));i<n;)a[r++]=en(e,i,i+=t);return a},ke.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var a=e[t];a&&(r[i++]=a)}return r},ke.concat=function(){var e=arguments.length;if(!e)return[];for(var t=Cr(e-1),n=arguments[0];e--;)t[e-1]=arguments[e];return h(Bs(n)?Vn(n):[n],At(t,1))},ke.cond=function(e){var t=null==e?0:e.length,i=ii();return e=t?c(e,(function(e){if("function"!=typeof e[1])throw new Dr("Expected a function");return[i(e[0]),e[1]]})):[],Qt((function(i){for(var r=-1;++r<t;){var a=e[r];if(n(a[0],this,i))return n(a[1],this,i)}}))},ke.conforms=function(e){return function(e){var t=dr(e);return function(n){return pt(n,e,t)}}(dt(e,1))},ke.constant=Ar,ke.countBy=As,ke.create=function(e,t){var n=qa(e);return null==t?n:lt(n,t)},ke.curry=function e(t,n,i){return(t=jn(t,8,O,O,O,O,O,n=i?O:n)).placeholder=e.placeholder,t},ke.curryRight=function e(t,n,i){return(t=jn(t,16,O,O,O,O,O,n=i?O:n)).placeholder=e.placeholder,t},ke.debounce=Hi,ke.defaults=eo,ke.defaultsDeep=to,ke.defer=Ts,ke.delay=Ms,ke.difference=ts,ke.differenceBy=ns,ke.differenceWith=is,ke.drop=function(e,t,n){var i=null==e?0:e.length;return i?en(e,0>(t=n||t===O?1:ar(t))?0:t,i):[]},ke.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?en(e,0,0>(t=i-(t=n||t===O?1:ar(t)))?0:t):[]},ke.dropRightWhile=function(e,t){return e&&e.length?cn(e,ii(t,3),!0,!0):[]},ke.dropWhile=function(e,t){return e&&e.length?cn(e,ii(t,3),!0):[]},ke.fill=function(e,t,n,i){var r=null==e?0:e.length;if(!r)return[];for(n&&"number"!=typeof n&&di(e,t,n)&&(n=0,i=r),r=e.length,0>(n=ar(n))&&(n=-n>r?0:r+n),0>(i=i===O||i>r?r:ar(i))&&(i+=r),i=n>i?0:sr(i);n<i;)e[n++]=t;return e},ke.filter=function(e,t){return(Bs(e)?o:vt)(e,ii(t,3))},ke.flatMap=function(e,t){return At(Oi(e,t),1)},ke.flatMapDeep=function(e,t){return At(Oi(e,t),B)},ke.flatMapDepth=function(e,t,n){return n=n===O?1:ar(n),At(Oi(e,t),n)},ke.flatten=Ci,ke.flattenDeep=function(e){return null!=e&&e.length?At(e,B):[]},ke.flattenDepth=function(e,t){return null!=e&&e.length?At(e,t=t===O?1:ar(t)):[]},ke.flip=function(e){return jn(e,512)},ke.flow=Eo,ke.flowRight=ko,ke.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},ke.functions=function(e){return null==e?[]:Et(e,dr(e))},ke.functionsIn=function(e){return null==e?[]:Et(e,pr(e))},ke.groupBy=Es,ke.initial=function(e){return null!=e&&e.length?en(e,0,-1):[]},ke.intersection=rs,ke.intersectionBy=as,ke.intersectionWith=ss,ke.invert=no,ke.invertBy=io,ke.invokeMap=ks,ke.iteratee=Sr,ke.keyBy=Vs,ke.keys=dr,ke.keysIn=pr,ke.map=Oi,ke.mapKeys=function(e,t){var n={};return t=ii(t,3),bt(e,(function(e,i,r){ut(n,t(e,i,r),e)})),n},ke.mapValues=function(e,t){var n={};return t=ii(t,3),bt(e,(function(e,i,r){ut(n,i,t(e,i,r))})),n},ke.matches=function(e){return Bt(dt(e,1))},ke.matchesProperty=function(e,t){return Gt(e,dt(t,1))},ke.memoize=Fi,ke.merge=ao,ke.mergeWith=so,ke.method=Vo,ke.methodOf=wo,ke.mixin=Er,ke.negate=Yi,ke.nthArg=function(e){return e=ar(e),Qt((function(t){return Ft(t,e)}))},ke.omit=oo,ke.omitBy=function(e,t){return fr(e,Yi(ii(t)))},ke.once=function(e){return Gi(2,e)},ke.orderBy=function(e,t,n,i){return null==e?[]:(Bs(t)||(t=null==t?[]:[t]),Bs(n=i?O:n)||(n=null==n?[]:[n]),Yt(e,t,n))},ke.over=_o,ke.overArgs=Ls,ke.overEvery=Co,ke.overSome=xo,ke.partial=Is,ke.partialRight=Rs,ke.partition=ws,ke.pick=lo,ke.pickBy=fr,ke.property=Vr,ke.propertyOf=function(e){return function(t){return null==e?O:kt(e,t)}},ke.pull=os,ke.pullAll=Ti,ke.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Ut(e,t,ii(n,2)):e},ke.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Ut(e,t,O,n):e},ke.pullAt=ls,ke.range=Po,ke.rangeRight=To,ke.rearg=Ds,ke.reject=function(e,t){return(Bs(e)?o:vt)(e,Yi(ii(t,3)))},ke.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],a=e.length;for(t=ii(t,3);++i<a;){var s=e[i];t(s,i,e)&&(n.push(s),r.push(i))}return Wt(e,r),n},ke.rest=function(e,t){if("function"!=typeof e)throw new Dr("Expected a function");return Qt(e,t=t===O?t:ar(t))},ke.reverse=Mi,ke.sampleSize=function(e,t,n){return t=(n?di(e,t,n):t===O)?1:ar(t),(Bs(e)?nt:Jt)(e,t)},ke.set=function(e,t,n){return null==e?e:Zt(e,t,n)},ke.setWith=function(e,t,n,i){return i="function"==typeof i?i:O,null==e?e:Zt(e,t,n,i)},ke.shuffle=function(e){return(Bs(e)?it:$t)(e)},ke.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&di(e,t,n)?(t=0,n=i):(t=null==t?0:ar(t),n=n===O?i:ar(n)),en(e,t,n)):[]},ke.sortBy=_s,ke.sortedUniq=function(e){return e&&e.length?an(e):[]},ke.sortedUniqBy=function(e,t){return e&&e.length?an(e,ii(t,2)):[]},ke.split=function(e,t,n){return n&&"number"!=typeof n&&di(e,t,n)&&(t=n=O),(n=n===O?4294967295:n>>>0)?(e=ur(e))&&("string"==typeof t||null!=t&&!zs(t))&&(!(t=on(t))&&xe.test(e))?yn(q(e),0,n):e.split(t,n):[]},ke.spread=function(e,t){if("function"!=typeof e)throw new Dr("Expected a function");return t=null==t?0:ma(ar(t),0),Qt((function(i){var r=i[t];return i=yn(i,0,t),r&&h(i,r),n(e,this,i)}))},ke.tail=function(e){var t=null==e?0:e.length;return t?en(e,1,t):[]},ke.take=function(e,t,n){return e&&e.length?en(e,0,0>(t=n||t===O?1:ar(t))?0:t):[]},ke.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?en(e,0>(t=i-(t=n||t===O?1:ar(t)))?0:t,i):[]},ke.takeRightWhile=function(e,t){return e&&e.length?cn(e,ii(t,3),!1,!0):[]},ke.takeWhile=function(e,t){return e&&e.length?cn(e,ii(t,3)):[]},ke.tap=function(e,t){return t(e),e},ke.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Dr("Expected a function");return Ji(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Hi(e,t,{leading:i,maxWait:t,trailing:r})},ke.thru=Di,ke.toArray=ir,ke.toPairs=uo,ke.toPairsIn=co,ke.toPath=function(e){return Bs(e)?c(e,Si):nr(e)?[e]:Vn(es(ur(e)))},ke.toPlainObject=lr,ke.transform=function(e,t,n){var i=Bs(e),a=i||Hs(e)||Ws(e);if(t=ii(t,4),null==n){var s=e&&e.constructor;n=a?i?new s:[]:Ji(e)&&Xi(s)?qa(Jr(e)):{}}return(a?r:bt)(e,(function(e,i,r){return t(n,e,i,r)})),n},ke.unary=function(e){return Bi(e,1)},ke.union=us,ke.unionBy=cs,ke.unionWith=hs,ke.uniq=function(e){return e&&e.length?ln(e):[]},ke.uniqBy=function(e,t){return e&&e.length?ln(e,ii(t,2)):[]},ke.uniqWith=function(e,t){return t="function"==typeof t?t:O,e&&e.length?ln(e,O,t):[]},ke.unset=function(e,t){return null==e||un(e,t)},ke.unzip=Li,ke.unzipWith=Ii,ke.update=function(e,t,n){return null==e?e:Zt(e,t,mn(n)(kt(e,t)),void 0)},ke.updateWith=function(e,t,n,i){return i="function"==typeof i?i:O,null!=e&&(e=Zt(e,t,mn(n)(kt(e,t)),i)),e},ke.values=mr,ke.valuesIn=function(e){return null==e?[]:C(e,pr(e))},ke.without=ds,ke.words=vr,ke.wrap=function(e,t){return Is(mn(t),e)},ke.xor=ps,ke.xorBy=fs,ke.xorWith=ms,ke.zip=gs,ke.zipObject=function(e,t){return pn(e||[],t||[],at)},ke.zipObjectDeep=function(e,t){return pn(e||[],t||[],Zt)},ke.zipWith=ys,ke.entries=uo,ke.entriesIn=co,ke.extend=Ks,ke.extendWith=Js,Er(ke,ke),ke.add=Mo,ke.attempt=bo,ke.camelCase=ho,ke.capitalize=gr,ke.ceil=Lo,ke.clamp=function(e,t,n){return n===O&&(n=t,t=O),n!==O&&(n=(n=or(n))==n?n:0),t!==O&&(t=(t=or(t))==t?t:0),ht(or(e),t,n)},ke.clone=function(e){return dt(e,4)},ke.cloneDeep=function(e){return dt(e,5)},ke.cloneDeepWith=function(e,t){return dt(e,5,t="function"==typeof t?t:O)},ke.cloneWith=function(e,t){return dt(e,4,t="function"==typeof t?t:O)},ke.conformsTo=function(e,t){return null==t||pt(e,t,dr(t))},ke.deburr=yr,ke.defaultTo=function(e,t){return null==e||e!=e?t:e},ke.divide=Io,ke.endsWith=function(e,t,n){e=ur(e),t=on(t);var i=e.length;i=n=n===O?i:ht(ar(n),0,i);return 0<=(n-=t.length)&&e.slice(n,i)==t},ke.eq=zi,ke.escape=function(e){return(e=ur(e))&&X.test(e)?e.replace(W,Ze):e},ke.escapeRegExp=function(e){return(e=ur(e))&&ie.test(e)?e.replace(ne,"\\$&"):e},ke.every=function(e,t,n){var i=Bs(e)?s:gt;return n&&di(e,t,n)&&(t=O),i(e,ii(t,3))},ke.find=bs,ke.findIndex=wi,ke.findKey=function(e,t){return m(e,ii(t,3),bt)},ke.findLast=Ss,ke.findLastIndex=_i,ke.findLastKey=function(e,t){return m(e,ii(t,3),St)},ke.floor=Ro,ke.forEach=Ni,ke.forEachRight=qi,ke.forIn=function(e,t){return null==e?e:Ga(e,ii(t,3),pr)},ke.forInRight=function(e,t){return null==e?e:Ha(e,ii(t,3),pr)},ke.forOwn=function(e,t){return e&&bt(e,ii(t,3))},ke.forOwnRight=function(e,t){return e&&St(e,ii(t,3))},ke.get=cr,ke.gt=Ns,ke.gte=qs,ke.has=function(e,t){return null!=e&&oi(e,t,Ct)},ke.hasIn=hr,ke.head=xi,ke.identity=br,ke.includes=function(e,t,n,i){return e=Ui(e)?e:mr(e),n=n&&!i?ar(n):0,i=e.length,0>n&&(n=ma(i+n,0)),tr(e)?n<=i&&-1<e.indexOf(t,n):!!i&&-1<y(e,t,n)},ke.indexOf=function(e,t,n){var i=null==e?0:e.length;return i?(0>(n=null==n?0:ar(n))&&(n=ma(i+n,0)),y(e,t,n)):-1},ke.inRange=function(e,t,n){return t=rr(t),n===O?(n=t,t=0):n=rr(n),(e=or(e))>=ga(t,n)&&e<ma(t,n)},ke.invoke=ro,ke.isArguments=Os,ke.isArray=Bs,ke.isArrayBuffer=Gs,ke.isArrayLike=Ui,ke.isArrayLikeObject=Wi,ke.isBoolean=function(e){return!0===e||!1===e||Zi(e)&&"[object Boolean]"==wt(e)},ke.isBuffer=Hs,ke.isDate=Fs,ke.isElement=function(e){return Zi(e)&&1===e.nodeType&&!er(e)},ke.isEmpty=function(e){if(null==e)return!0;if(Ui(e)&&(Bs(e)||"string"==typeof e||"function"==typeof e.splice||Hs(e)||Ws(e)||Os(e)))return!e.length;var t=Qa(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(mi(e))return!Nt(e).length;for(var n in e)if(Gr.call(e,n))return!1;return!0},ke.isEqual=function(e,t){return Lt(e,t)},ke.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:O)?n(e,t):O;return i===O?Lt(e,t,O,n):!!i},ke.isError=ji,ke.isFinite=function(e){return"number"==typeof e&&da(e)},ke.isFunction=Xi,ke.isInteger=Qi,ke.isLength=Ki,ke.isMap=Ys,ke.isMatch=function(e,t){return e===t||It(e,t,ai(t))},ke.isMatchWith=function(e,t,n){return n="function"==typeof n?n:O,It(e,t,ai(t),n)},ke.isNaN=function(e){return $i(e)&&e!=+e},ke.isNative=function(e){if(Ka(e))throw new Pr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Rt(e)},ke.isNil=function(e){return null==e},ke.isNull=function(e){return null===e},ke.isNumber=$i,ke.isObject=Ji,ke.isObjectLike=Zi,ke.isPlainObject=er,ke.isRegExp=zs,ke.isSafeInteger=function(e){return Qi(e)&&-9007199254740991<=e&&9007199254740991>=e},ke.isSet=Us,ke.isString=tr,ke.isSymbol=nr,ke.isTypedArray=Ws,ke.isUndefined=function(e){return e===O},ke.isWeakMap=function(e){return Zi(e)&&"[object WeakMap]"==Qa(e)},ke.isWeakSet=function(e){return Zi(e)&&"[object WeakSet]"==wt(e)},ke.join=function(e,t){return null==e?"":pa.call(e,t)},ke.kebabCase=po,ke.last=Pi,ke.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;if(n!==O&&(r=0>(r=ar(n))?ma(i+r,0):ga(r,i-1)),t==t){for(n=r+1;n--&&e[n]!==t;);e=n}else e=g(e,A,r,!0);return e},ke.lowerCase=fo,ke.lowerFirst=mo,ke.lt=js,ke.lte=Xs,ke.max=function(e){return e&&e.length?yt(e,br,_t):O},ke.maxBy=function(e,t){return e&&e.length?yt(e,ii(t,2),_t):O},ke.mean=function(e){return b(e,br)},ke.meanBy=function(e,t){return b(e,ii(t,2))},ke.min=function(e){return e&&e.length?yt(e,br,qt):O},ke.minBy=function(e,t){return e&&e.length?yt(e,ii(t,2),qt):O},ke.stubArray=wr,ke.stubFalse=_r,ke.stubObject=function(){return{}},ke.stubString=function(){return""},ke.stubTrue=function(){return!0},ke.multiply=Do,ke.nth=function(e,t){return e&&e.length?Ft(e,ar(t)):O},ke.noConflict=function(){return Be._===this&&(Be._=Ur),this},ke.noop=kr,ke.now=Cs,ke.pad=function(e,t,n){e=ur(e);var i=(t=ar(t))?N(e):0;return!t||i>=t?e:Gn(ua(t=(t-i)/2),n)+e+Gn(la(t),n)},ke.padEnd=function(e,t,n){e=ur(e);var i=(t=ar(t))?N(e):0;return t&&i<t?e+Gn(t-i,n):e},ke.padStart=function(e,t,n){e=ur(e);var i=(t=ar(t))?N(e):0;return t&&i<t?Gn(t-i,n)+e:e},ke.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),va(ur(e).replace(ae,""),t||0)},ke.random=function(e,t,n){if(n&&"boolean"!=typeof n&&di(e,t,n)&&(t=n=O),n===O&&("boolean"==typeof t?(n=t,t=O):"boolean"==typeof e&&(n=e,e=O)),e===O&&t===O?(e=0,t=1):(e=rr(e),t===O?(t=e,e=0):t=rr(t)),e>t){var i=e;e=t,t=i}return n||e%1||t%1?(n=Aa(),ga(e+n*(t-e+De("1e-"+((n+"").length-1))),t)):jt(e,t)},ke.reduce=function(e,t,n){var i=Bs(e)?d:k,r=3>arguments.length;return i(e,ii(t,4),n,r,Oa)},ke.reduceRight=function(e,t,n){var i=Bs(e)?p:k,r=3>arguments.length;return i(e,ii(t,4),n,r,Ba)},ke.repeat=function(e,t,n){return t=(n?di(e,t,n):t===O)?1:ar(t),Xt(ur(e),t)},ke.replace=function(){var e=arguments,t=ur(e[0]);return 3>e.length?t:t.replace(e[1],e[2])},ke.result=function(e,t,n){var i=-1,r=(t=gn(t,e)).length;for(r||(r=1,e=O);++i<r;){var a=null==e?O:e[Si(t[i])];a===O&&(i=r,a=n),e=Xi(a)?a.call(e):a}return e},ke.round=No,ke.runInContext=E,ke.sample=function(e){return(Bs(e)?tt:Kt)(e)},ke.size=function(e){if(null==e)return 0;if(Ui(e))return tr(e)?N(e):e.length;var t=Qa(e);return"[object Map]"==t||"[object Set]"==t?e.size:Nt(e).length},ke.snakeCase=go,ke.some=function(e,t,n){var i=Bs(e)?f:tn;return n&&di(e,t,n)&&(t=O),i(e,ii(t,3))},ke.sortedIndex=function(e,t){return nn(e,t)},ke.sortedIndexBy=function(e,t,n){return rn(e,t,ii(n,2))},ke.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=nn(e,t);if(i<n&&zi(e[i],t))return i}return-1},ke.sortedLastIndex=function(e,t){return nn(e,t,!0)},ke.sortedLastIndexBy=function(e,t,n){return rn(e,t,ii(n,2),!0)},ke.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=nn(e,t,!0)-1;if(zi(e[n],t))return n}return-1},ke.startCase=yo,ke.startsWith=function(e,t,n){return e=ur(e),n=null==n?0:ht(ar(n),0,e.length),t=on(t),e.slice(n,n+t.length)==t},ke.subtract=qo,ke.sum=function(e){return e&&e.length?V(e,br):0},ke.sumBy=function(e,t){return e&&e.length?V(e,ii(t,2)):0},ke.template=function(e,t,n){var i=ke.templateSettings;n&&di(e,t,n)&&(t=O),e=ur(e),t=Js({},t,i,Xn);var r,a,s=dr(n=Js({},t.imports,i.imports,Xn)),o=C(n,s),l=0;n=t.interpolate||be;var u="__p+='";n=Ir((t.escape||be).source+"|"+n.source+"|"+(n===J?de:be).source+"|"+(t.evaluate||be).source+"|$","g");var c="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,(function(t,n,i,s,o,c){return i||(i=s),u+=e.slice(l,c).replace(Se,M),n&&(r=!0,u+="'+__e("+n+")+'"),o&&(a=!0,u+="';"+o+";\n__p+='"),i&&(u+="'+((__t=("+i+"))==null?'':__t)+'"),l=c+t.length,t})),u+="';",(t=t.variable)||(u="with(obj){"+u+"}"),u=(a?u.replace(F,""):u).replace(Y,"$1").replace(z,"$1;"),u="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(r?",__e=_.escape":"")+(a?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+u+"return __p}",(t=bo((function(){return Tr(s,c+"return "+u).apply(O,o)}))).source=u,ji(t))throw t;return t},ke.times=function(e,t){if(1>(e=ar(e))||9007199254740991<e)return[];var n=4294967295,i=ga(e,4294967295);for(e-=4294967295,i=w(i,t=ii(t));++n<e;)t(n);return i},ke.toFinite=rr,ke.toInteger=ar,ke.toLength=sr,ke.toLower=function(e){return ur(e).toLowerCase()},ke.toNumber=or,ke.toSafeInteger=function(e){return e?ht(ar(e),-9007199254740991,9007199254740991):0===e?e:0},ke.toString=ur,ke.toUpper=function(e){return ur(e).toUpperCase()},ke.trim=function(e,t,n){return(e=ur(e))&&(n||t===O)?e.replace(re,""):e&&(t=on(t))?yn(e=q(e),t=P(e,n=q(t)),n=T(e,n)+1).join(""):e},ke.trimEnd=function(e,t,n){return(e=ur(e))&&(n||t===O)?e.replace(se,""):e&&(t=on(t))?yn(e=q(e),0,t=T(e,q(t))+1).join(""):e},ke.trimStart=function(e,t,n){return(e=ur(e))&&(n||t===O)?e.replace(ae,""):e&&(t=on(t))?yn(e=q(e),t=P(e,q(t))).join(""):e},ke.truncate=function(e,t){var n=30,i="...";if(Ji(t)){var r="separator"in t?t.separator:r;n="length"in t?ar(t.length):n,i="omission"in t?on(t.omission):i}var a=(e=ur(e)).length;if(xe.test(e)){var s=q(e);a=s.length}if(n>=a)return e;if(1>(a=n-N(i)))return i;if(n=s?yn(s,0,a).join(""):e.slice(0,a),r===O)return n+i;if(s&&(a+=n.length-a),zs(r)){if(e.slice(a).search(r)){var o=n;for(r.global||(r=Ir(r.source,ur(pe.exec(r))+"g")),r.lastIndex=0;s=r.exec(o);)var l=s.index;n=n.slice(0,l===O?a:l)}}else e.indexOf(on(r),a)!=a&&(-1<(r=n.lastIndexOf(r))&&(n=n.slice(0,r)));return n+i},ke.unescape=function(e){return(e=ur(e))&&j.test(e)?e.replace(U,$e):e},ke.uniqueId=function(e){var t=++Hr;return ur(e)+t},ke.upperCase=vo,ke.upperFirst=Ao,ke.each=Ni,ke.eachRight=qi,ke.first=xi,Er(ke,function(){var e={};return bt(ke,(function(t,n){Gr.call(ke.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),ke.VERSION="4.17.4",r("bind bindKey curry curryRight partial partialRight".split(" "),(function(e){ke[e].placeholder=ke})),r(["drop","take"],(function(e,t){Re.prototype[e]=function(n){n=n===O?1:ma(ar(n),0);var i=this.__filtered__&&!t?new Re(this):this.clone();return i.__filtered__?i.__takeCount__=ga(n,i.__takeCount__):i.__views__.push({size:ga(n,4294967295),type:e+(0>i.__dir__?"Right":"")}),i},Re.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),r(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;Re.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ii(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),r(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Re.prototype[e]=function(){return this[n](1).value()[0]}})),r(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Re.prototype[e]=function(){return this.__filtered__?new Re(this):this[n](1)}})),Re.prototype.compact=function(){return this.filter(br)},Re.prototype.find=function(e){return this.filter(e).head()},Re.prototype.findLast=function(e){return this.reverse().find(e)},Re.prototype.invokeMap=Qt((function(e,t){return"function"==typeof e?new Re(this):this.map((function(n){return Tt(n,e,t)}))})),Re.prototype.reject=function(e){return this.filter(Yi(ii(e)))},Re.prototype.slice=function(e,t){e=ar(e);var n=this;return n.__filtered__&&(0<e||0>t)?new Re(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==O&&(n=0>(t=ar(t))?n.dropRight(-t):n.take(t-e)),n)},Re.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Re.prototype.toArray=function(){return this.take(4294967295)},bt(Re.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=ke[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);r&&(ke.prototype[t]=function(){function t(e){return e=r.apply(ke,h([e],o)),i&&d?e[0]:e}var s=this.__wrapped__,o=i?[1]:arguments,l=s instanceof Re,u=o[0],c=l||Bs(s);c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,p=!!this.__actions__.length;u=a&&!d,l=l&&!p;return!a&&c?(s=l?s:new Re(this),(s=e.apply(s,o)).__actions__.push({func:Di,args:[t],thisArg:O}),new Ie(s,d)):u&&l?e.apply(this,o):(s=this.thru(t),u?i?s.value()[0]:s.value():s)})})),r("pop push shift sort splice unshift".split(" "),(function(e){var t=Nr[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);ke.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Bs(r)?r:[],e)}return this[n]((function(n){return t.apply(Bs(n)?n:[],e)}))}})),bt(Re.prototype,(function(e,t){var n=ke[t];if(n){var i=n.name+"";(xa[i]||(xa[i]=[])).push({name:t,func:n})}})),xa[Nn(O,2).name]=[{name:"wrapper",func:O}],Re.prototype.clone=function(){var e=new Re(this.__wrapped__);return e.__actions__=Vn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Vn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Vn(this.__views__),e},Re.prototype.reverse=function(){if(this.__filtered__){var e=new Re(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Re.prototype.value=function(){var e,t=this.__wrapped__.value(),n=this.__dir__,i=Bs(t),r=0>n,a=i?t.length:0;e=a;for(var s=this.__views__,o=0,l=-1,u=s.length;++l<u;){var c=s[l],h=c.size;switch(c.type){case"drop":o+=h;break;case"dropRight":e-=h;break;case"take":e=ga(e,o+h);break;case"takeRight":o=ma(o,e-h)}}if(s=(e={start:o,end:e}).start,e=(o=e.end)-s,s=r?o:s-1,l=(o=this.__iteratees__).length,u=0,c=ga(e,this.__takeCount__),!i||!r&&a==e&&c==e)return hn(t,this.__actions__);i=[];e:for(;e--&&u<c;){for(r=-1,a=t[s+=n];++r<l;){h=(d=o[r]).type;var d=(0,d.iteratee)(a);if(2==h)a=d;else if(!d){if(1==h)continue e;break e}}i[u++]=a}return i},ke.prototype.at=vs,ke.prototype.chain=function(){return Ri(this)},ke.prototype.commit=function(){return new Ie(this.value(),this.__chain__)},ke.prototype.next=function(){this.__values__===O&&(this.__values__=ir(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?O:this.__values__[this.__index__++]}},ke.prototype.plant=function(e){for(var t,n=this;n instanceof _e;){var i=Vi(n);i.__index__=0,i.__values__=O,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t},ke.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof Re?(this.__actions__.length&&(e=new Re(this)),(e=e.reverse()).__actions__.push({func:Di,args:[Mi],thisArg:O}),new Ie(e,this.__chain__)):this.thru(Mi)},ke.prototype.toJSON=ke.prototype.valueOf=ke.prototype.value=function(){return hn(this.__wrapped__,this.__actions__)},ke.prototype.first=ke.prototype.head,na&&(ke.prototype[na]=function(){return this}),ke}();"function"==typeof define&&"object"==_typeof(define.amd)&&define.amd?(Be._=et,define((function(){return et}))):He?((He.exports=et)._=et,Ge._=et):Be._=et}.call(this),window.assertions=window.assertions||{},window.assertions.assertFunction=window.assertions.assertFunction||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!e){var r;n=n.filter((function(e){return!!n})),window.navigator&&"Microsoft Internet Explorer"===window.navigator.appName&&n.push("stack=\n".concat((new Error).stack));var a=n.length>0?"Assertion failed: ":"Assertion failed";throw console&&console.log&&(r=console).log.apply(r,[a].concat(_toConsumableArray(n))),window.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters.debugger,new Error(a+n.join("\n "))}},window.assert=window.assert||null,window.assertSlow=window.assertSlow||null,window.assertions.enableAssert=function(){window.assert=window.assertions.assertFunction,window.console&&window.console.log&&window.console.log("enabling assert")},window.assertions.disableAssert=function(){window.assert=null,window.console&&window.console.log&&window.console.log("disabling assert")},window.assertions.enableAssertSlow=function(){window.assertSlow=window.assertions.assertFunction,window.console&&window.console.log&&window.console.log("enabling assertSlow")},window.assertions.disableAssertSlow=function(){window.assertSlow=null,window.console&&window.console.log&&window.console.log("disabling assertSlow")},function(){window.phetio=window.phetio||{};window.phetio.PhetioIDUtils={append:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.forEach((function(t){e+="."+t})),e},getComponentName:function(e){var t=e.lastIndexOf(".");return-1===t?e:e.substring(t+1,e.length)},getParentID:function(e){var t=e.lastIndexOf(".");return-1===t?null:e.substring(0,t)},getDOMElementID:function(e){return"phetioID:".concat(e)},getScreenID:function(e){for(var t=[],n=e.split("."),i=0;i<n.length;i++){var r=n[i];t.push(r);var a=r.indexOf("Screen");if(a>0&&a+"Screen".length===r.length)return t.join(".")}return null},getGroupElementIndex:function(e){return Number(e.split(window.phetio.PhetioIDUtils.GROUP_SEPARATOR)[1])},isAncestor:function(e,t){for(var n=e.split("."),i=t.split("."),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return t!==e},SEPARATOR:".",GROUP_SEPARATOR:"_",INTER_TERM_SEPARATOR:"-",GENERAL_COMPONENT_NAME:"general",GLOBAL_COMPONENT_NAME:"global",HOME_SCREEN_COMPONENT_NAME:"homeScreen",MODEL_COMPONENT_NAME:"model",VIEW_COMPONENT_NAME:"view",CONTROLLER_COMPONENT_NAME:"controller",COLORS_COMPONENT_NAME:"colors"}}(),function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).himalaya=e()}}((function(){return function e(t,n,i){function r(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){var n=t[s][1][e];return r(n||e)}),c,c.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";var i=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/compat.js",t="cde94accf38c67a096269c512dfb0f1bca69a38a",n=new(0,function(){}.constructor)("return this")(),i="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/compat.js",statementMap:{0:{start:{line:10,column:2},end:{line:10,column:72}},1:{start:{line:14,column:16},end:{line:14,column:62}},2:{start:{line:15,column:20},end:{line:15,column:56}},3:{start:{line:16,column:2},end:{line:16,column:48}},4:{start:{line:20,column:2},end:{line:20,column:56}},5:{start:{line:24,column:2},end:{line:24,column:42}},6:{start:{line:28,column:14},end:{line:28,column:26}},7:{start:{line:29,column:2},end:{line:29,column:29}},8:{start:{line:29,column:17},end:{line:29,column:29}},9:{start:{line:31,column:22},end:{line:31,column:34}},10:{start:{line:32,column:23},end:{line:32,column:47}},11:{start:{line:33,column:20},end:{line:33,column:70}},12:{start:{line:34,column:2},end:{line:38,column:3}},13:{start:{line:35,column:20},end:{line:35,column:40}},14:{start:{line:36,column:4},end:{line:36,column:46}},15:{start:{line:36,column:35},end:{line:36,column:46}},16:{start:{line:37,column:4},end:{line:37,column:55}},17:{start:{line:37,column:44},end:{line:37,column:55}},18:{start:{line:40,column:2},end:{line:40,column:14}}},fnMap:{0:{name:"startsWith",decl:{start:{line:9,column:16},end:{line:9,column:26}},loc:{start:{line:9,column:57},end:{line:11,column:1}},line:9},1:{name:"endsWith",decl:{start:{line:13,column:16},end:{line:13,column:24}},loc:{start:{line:13,column:55},end:{line:17,column:1}},line:13},2:{name:"stringIncludes",decl:{start:{line:19,column:16},end:{line:19,column:30}},loc:{start:{line:19,column:61},end:{line:21,column:1}},line:19},3:{name:"isRealNaN",decl:{start:{line:23,column:16},end:{line:23,column:25}},loc:{start:{line:23,column:30},end:{line:25,column:1}},line:23},4:{name:"arrayIncludes",decl:{start:{line:27,column:16},end:{line:27,column:29}},loc:{start:{line:27,column:63},end:{line:41,column:1}},line:27}},branchMap:{0:{loc:{start:{line:10,column:20},end:{line:10,column:33}},type:"binary-expr",locations:[{start:{line:10,column:20},end:{line:10,column:28}},{start:{line:10,column:32},end:{line:10,column:33}}],line:10},1:{loc:{start:{line:14,column:17},end:{line:14,column:39}},type:"binary-expr",locations:[{start:{line:14,column:17},end:{line:14,column:25}},{start:{line:14,column:29},end:{line:14,column:39}}],line:14},2:{loc:{start:{line:16,column:9},end:{line:16,column:48}},type:"binary-expr",locations:[{start:{line:16,column:9},end:{line:16,column:25}},{start:{line:16,column:29},end:{line:16,column:48}}],line:16},3:{loc:{start:{line:20,column:35},end:{line:20,column:48}},type:"binary-expr",locations:[{start:{line:20,column:35},end:{line:20,column:43}},{start:{line:20,column:47},end:{line:20,column:48}}],line:20},4:{loc:{start:{line:24,column:9},end:{line:24,column:42}},type:"binary-expr",locations:[{start:{line:24,column:9},end:{line:24,column:30}},{start:{line:24,column:34},end:{line:24,column:42}}],line:24},5:{loc:{start:{line:29,column:2},end:{line:29,column:29}},type:"if",locations:[{start:{line:29,column:2},end:{line:29,column:29}},{start:{line:29,column:2},end:{line:29,column:29}}],line:29},6:{loc:{start:{line:33,column:20},end:{line:33,column:70}},type:"cond-expr",locations:[{start:{line:33,column:39},end:{line:33,column:50}},{start:{line:33,column:53},end:{line:33,column:70}}],line:33},7:{loc:{start:{line:36,column:4},end:{line:36,column:46}},type:"if",locations:[{start:{line:36,column:4},end:{line:36,column:46}},{start:{line:36,column:4},end:{line:36,column:46}}],line:36},8:{loc:{start:{line:37,column:4},end:{line:37,column:55}},type:"if",locations:[{start:{line:37,column:4},end:{line:37,column:55}},{start:{line:37,column:4},end:{line:37,column:55}}],line:37},9:{loc:{start:{line:37,column:8},end:{line:37,column:42}},type:"binary-expr",locations:[{start:{line:37,column:8},end:{line:37,column:20}},{start:{line:37,column:24},end:{line:37,column:42}}],line:37}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0},f:{0:0,1:0,2:0,3:0,4:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},a=n[i]||(n[i]={});return a[e]&&a[e].hash===t?a[e]:(r.hash=t,a[e]=r)}();function r(e){return i.f[3]++,i.s[5]++,i.b[4][0]++,"number"==typeof e&&(i.b[4][1]++,isNaN(e))}Object.defineProperty(n,"__esModule",{value:!0}),n.startsWith=function(e,t,n){return i.f[0]++,i.s[0]++,e.substr((i.b[0][0]++,n||(i.b[0][1]++,0)),t.length)===t},n.endsWith=function(e,t,n){i.f[1]++;var r=(i.s[1]++,i.b[1][0]++,(n||(i.b[1][1]++,e.length))-t.length),a=(i.s[2]++,e.lastIndexOf(t,r));return i.s[3]++,i.b[2][0]++,-1!==a&&(i.b[2][1]++,a===r)},n.stringIncludes=function(e,t,n){return i.f[2]++,i.s[4]++,-1!==e.indexOf(t,(i.b[3][0]++,n||(i.b[3][1]++,0)))},n.isRealNaN=r,n.arrayIncludes=function(e,t,n){i.f[4]++;var a=(i.s[6]++,e.length);if(i.s[7]++,0===a)return i.b[5][0]++,i.s[8]++,!1;i.b[5][1]++;var s=(i.s[9]++,0|n),o=(i.s[10]++,r(t)),l=(i.s[11]++,s>=0?(i.b[6][0]++,s):(i.b[6][1]++,a+s));i.s[12]++;for(;l<a;){var u=(i.s[13]++,e[l++]);if(i.s[14]++,u===t)return i.b[7][0]++,i.s[15]++,!0;if(i.b[7][1]++,i.s[16]++,i.b[9][0]++,o&&(i.b[9][1]++,r(u)))return i.b[8][0]++,i.s[17]++,!0;i.b[8][1]++}return i.s[18]++,!1}},{}],2:[function(e,t,n){"use strict";var i=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/format.js",t="ef8c4d14fa58c2bce23a58bf5d7c370846a07329",n=new(0,function(){}.constructor)("return this")(),i="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/format.js",statementMap:{0:{start:{line:2,column:14},end:{line:2,column:30}},1:{start:{line:3,column:2},end:{line:3,column:30}},2:{start:{line:3,column:18},end:{line:3,column:30}},3:{start:{line:4,column:2},end:{line:4,column:57}},4:{start:{line:8,column:14},end:{line:8,column:27}},5:{start:{line:9,column:14},end:{line:9,column:28}},6:{start:{line:10,column:23},end:{line:10,column:49}},7:{start:{line:11,column:2},end:{line:13,column:3}},8:{start:{line:12,column:4},end:{line:12,column:28}},9:{start:{line:14,column:2},end:{line:14,column:12}},10:{start:{line:18,column:2},end:{line:32,column:4}},11:{start:{line:19,column:17},end:{line:19,column:26}},12:{start:{line:20,column:23},end:{line:27,column:39}},13:{start:{line:28,column:4},end:{line:30,column:5}},14:{start:{line:29,column:6},end:{line:29,column:41}},15:{start:{line:31,column:4},end:{line:31,column:21}},16:{start:{line:36,column:2},end:{line:43,column:4}},17:{start:{line:37,column:18},end:{line:37,column:50}},18:{start:{line:38,column:16},end:{line:38,column:24}},19:{start:{line:39,column:18},end:{line:41,column:12}},20:{start:{line:42,column:4},end:{line:42,column:23}}},fnMap:{0:{name:"splitHead",decl:{start:{line:1,column:16},end:{line:1,column:25}},loc:{start:{line:1,column:37},end:{line:5,column:1}},line:1},1:{name:"unquote",decl:{start:{line:7,column:16},end:{line:7,column:23}},loc:{start:{line:7,column:30},end:{line:15,column:1}},line:7},2:{name:"format",decl:{start:{line:17,column:16},end:{line:17,column:22}},loc:{start:{line:17,column:40},end:{line:33,column:1}},line:17},3:{name:"(anonymous_3)",decl:{start:{line:18,column:19},end:{line:18,column:20}},loc:{start:{line:18,column:27},end:{line:32,column:3}},line:18},4:{name:"formatAttributes",decl:{start:{line:35,column:16},end:{line:35,column:32}},loc:{start:{line:35,column:46},end:{line:44,column:1}},line:35},5:{name:"(anonymous_5)",decl:{start:{line:36,column:24},end:{line:36,column:25}},loc:{start:{line:36,column:37},end:{line:43,column:3}},line:36}},branchMap:{0:{loc:{start:{line:3,column:2},end:{line:3,column:30}},type:"if",locations:[{start:{line:3,column:2},end:{line:3,column:30}},{start:{line:3,column:2},end:{line:3,column:30}}],line:3},1:{loc:{start:{line:10,column:23},end:{line:10,column:49}},type:"binary-expr",locations:[{start:{line:10,column:23},end:{line:10,column:34}},{start:{line:10,column:38},end:{line:10,column:49}}],line:10},2:{loc:{start:{line:11,column:2},end:{line:13,column:3}},type:"if",locations:[{start:{line:11,column:2},end:{line:13,column:3}},{start:{line:11,column:2},end:{line:13,column:3}}],line:11},3:{loc:{start:{line:11,column:6},end:{line:11,column:45}},type:"binary-expr",locations:[{start:{line:11,column:6},end:{line:11,column:18}},{start:{line:11,column:22},end:{line:11,column:45}}],line:11},4:{loc:{start:{line:20,column:23},end:{line:27,column:39}},type:"cond-expr",locations:[{start:{line:21,column:8},end:{line:26,column:7}},{start:{line:27,column:8},end:{line:27,column:39}}],line:20},5:{loc:{start:{line:28,column:4},end:{line:30,column:5}},type:"if",locations:[{start:{line:28,column:4},end:{line:30,column:5}},{start:{line:28,column:4},end:{line:30,column:5}}],line:28},6:{loc:{start:{line:39,column:18},end:{line:41,column:12}},type:"cond-expr",locations:[{start:{line:40,column:8},end:{line:40,column:25}},{start:{line:41,column:8},end:{line:41,column:12}}],line:39}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},f:{0:0,1:0,2:0,3:0,4:0,5:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},a=n[i]||(n[i]={});return a[e]&&a[e].hash===t?a[e]:(r.hash=t,a[e]=r)}();function r(e,t){i.f[0]++;var n=(i.s[0]++,e.indexOf(t));return i.s[1]++,-1===n?(i.b[0][0]++,i.s[2]++,[e]):(i.b[0][1]++,i.s[3]++,[e.slice(0,n),e.slice(n+t.length)])}function a(e){i.f[1]++;var t=(i.s[4]++,e.charAt(0)),n=(i.s[5]++,e.length-1),r=(i.s[6]++,i.b[1][0]++,'"'===t||(i.b[1][1]++,"'"===t));return i.s[7]++,i.b[3][0]++,r&&(i.b[3][1]++,t===e.charAt(n))?(i.b[2][0]++,i.s[8]++,e.slice(1,n)):(i.b[2][1]++,i.s[9]++,e)}function s(e){return i.f[4]++,i.s[16]++,e.map((function(e){i.f[5]++;var t=(i.s[17]++,r(e.trim(),"=")),n=(i.s[18]++,t[0]),s=(i.s[19]++,"string"==typeof t[1]?(i.b[6][0]++,a(t[1])):(i.b[6][1]++,null));return i.s[20]++,{key:n,value:s}}))}Object.defineProperty(n,"__esModule",{value:!0}),n.splitHead=r,n.unquote=a,n.format=function e(t,n){return i.f[2]++,i.s[10]++,t.map((function(t){i.f[3]++;var r=(i.s[11]++,t.type),a=(i.s[12]++,"element"===r?(i.b[4][0]++,{type:r,tagName:t.tagName.toLowerCase(),attributes:s(t.attributes),children:e(t.children,n)}):(i.b[4][1]++,{type:r,content:t.content}));return i.s[13]++,n.includePositions?(i.b[5][0]++,i.s[14]++,a.position=t.position):i.b[5][1]++,i.s[15]++,a}))},n.formatAttributes=s},{}],3:[function(e,t,n){"use strict";var i=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/index.js",t="a91ca68b6320b199fa63e4cbd37dce6857e0c43d",n=new(0,function(){}.constructor)("return this")(),i="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/index.js",statementMap:{0:{start:{line:12,column:29},end:{line:18,column:1}},1:{start:{line:21,column:17},end:{line:21,column:36}},2:{start:{line:22,column:16},end:{line:22,column:39}},3:{start:{line:23,column:2},end:{line:23,column:31}},4:{start:{line:27,column:2},end:{line:27,column:29}}},fnMap:{0:{name:"parse",decl:{start:{line:20,column:16},end:{line:20,column:21}},loc:{start:{line:20,column:53},end:{line:24,column:1}},line:20},1:{name:"stringify",decl:{start:{line:26,column:16},end:{line:26,column:25}},loc:{start:{line:26,column:57},end:{line:28,column:1}},line:26}},branchMap:{0:{loc:{start:{line:20,column:28},end:{line:20,column:51}},type:"default-arg",locations:[{start:{line:20,column:38},end:{line:20,column:51}}],line:20},1:{loc:{start:{line:26,column:32},end:{line:26,column:55}},type:"default-arg",locations:[{start:{line:26,column:42},end:{line:26,column:55}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0],1:[0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},a=n[i]||(n[i]={});return a[e]&&a[e].hash===t?a[e]:(r.hash=t,a[e]=r)}();Object.defineProperty(n,"__esModule",{value:!0}),n.parseDefaults=void 0,n.parse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i.b[0][0]++,c);i.f[0]++;var n=(i.s[1]++,(0,r.default)(e,t)),o=(i.s[2]++,(0,a.default)(n,t));return i.s[3]++,(0,s.format)(o,t)},n.stringify=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i.b[1][0]++,c);return i.f[1]++,i.s[4]++,(0,o.toHTML)(e,t)};var r=u(e("./lexer")),a=u(e("./parser")),s=e("./format"),o=e("./stringify"),l=e("./tags");function u(e){return e&&e.__esModule?e:{default:e}}var c=n.parseDefaults=(i.s[0]++,{voidTags:l.voidTags,closingTags:l.closingTags,childlessTags:l.childlessTags,closingTagAncestorBreakers:l.closingTagAncestorBreakers,includePositions:!1})},{"./format":2,"./lexer":4,"./parser":5,"./stringify":6,"./tags":7}],4:[function(e,t,n){"use strict";var i=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/lexer.js",t="99f1269b85a36e02e6fcfa2eb5c9423a8a428848",n=new(0,function(){}.constructor)("return this")(),i="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/lexer.js",statementMap:{0:{start:{line:9,column:16},end:{line:9,column:30}},1:{start:{line:10,column:14},end:{line:10,column:42}},2:{start:{line:11,column:2},end:{line:19,column:3}},3:{start:{line:12,column:17},end:{line:12,column:30}},4:{start:{line:13,column:4},end:{line:18,column:5}},5:{start:{line:14,column:6},end:{line:14,column:21}},6:{start:{line:15,column:6},end:{line:15,column:25}},7:{start:{line:17,column:6},end:{line:17,column:23}},8:{start:{line:23,column:14},end:{line:23,column:34}},9:{start:{line:24,column:2},end:{line:24,column:41}},10:{start:{line:28,column:2},end:{line:32,column:3}},11:{start:{line:36,column:2},end:{line:40,column:3}},12:{start:{line:44,column:16},end:{line:49,column:3}},13:{start:{line:50,column:2},end:{line:50,column:12}},14:{start:{line:51,column:2},end:{line:51,column:21}},15:{start:{line:55,column:42},end:{line:55,column:47}},16:{start:{line:56,column:14},end:{line:56,column:24}},17:{start:{line:57,column:2},end:{line:72,column:3}},18:{start:{line:58,column:18},end:{line:58,column:38}},19:{start:{line:59,column:4},end:{line:59,column:18}},20:{start:{line:60,column:4},end:{line:71,column:5}},21:{start:{line:61,column:24},end:{line:61,column:57}},22:{start:{line:62,column:6},end:{line:70,column:7}},23:{start:{line:63,column:8},end:{line:63,column:25}},24:{start:{line:65,column:24},end:{line:65,column:37}},25:{start:{line:66,column:24},end:{line:66,column:45}},26:{start:{line:67,column:8},end:{line:69,column:9}},27:{start:{line:68,column:10},end:{line:68,column:36}},28:{start:{line:75,column:21},end:{line:75,column:34}},29:{start:{line:77,column:2},end:{line:87,column:3}},30:{start:{line:78,column:20},end:{line:78,column:43}},31:{start:{line:79,column:4},end:{line:81,column:5}},32:{start:{line:80,column:6},end:{line:80,column:20}},33:{start:{line:82,column:17},end:{line:82,column:40}},34:{start:{line:83,column:4},end:{line:85,column:5}},35:{start:{line:84,column:6},end:{line:84,column:20}},36:{start:{line:86,column:4},end:{line:86,column:23}},37:{start:{line:91,column:15},end:{line:91,column:21}},38:{start:{line:92,column:26},end:{line:92,column:31}},39:{start:{line:93,column:16},end:{line:93,column:48}},40:{start:{line:94,column:2},end:{line:94,column:40}},41:{start:{line:94,column:34},end:{line:94,column:40}},42:{start:{line:95,column:2},end:{line:97,column:3}},43:{start:{line:96,column:4},end:{line:96,column:24}},44:{start:{line:99,column:16},end:{line:99,column:38}},45:{start:{line:100,column:18},end:{line:100,column:52}},46:{start:{line:101,column:2},end:{line:101,column:38}},47:{start:{line:102,column:14},end:{line:102,column:36}},48:{start:{line:103,column:2},end:{line:103,column:60}},49:{start:{line:107,column:26},end:{line:107,column:31}},50:{start:{line:108,column:16},end:{line:108,column:38}},51:{start:{line:109,column:2},end:{line:109,column:32}},52:{start:{line:110,column:19},end:{line:110,column:53}},53:{start:{line:111,column:19},end:{line:111,column:33}},54:{start:{line:112,column:2},end:{line:114,column:3}},55:{start:{line:113,column:4},end:{line:113,column:40}},56:{start:{line:116,column:18},end:{line:116,column:55}},57:{start:{line:117,column:2},end:{line:117,column:41}},58:{start:{line:118,column:2},end:{line:125,column:4}},59:{start:{line:129,column:26},end:{line:129,column:31}},60:{start:{line:131,column:23},end:{line:131,column:53}},61:{start:{line:132,column:18},end:{line:132,column:36}},62:{start:{line:133,column:18},end:{line:133,column:40}},63:{start:{line:134,column:4},end:{line:134,column:46}},64:{start:{line:135,column:4},end:{line:135,column:68}},65:{start:{line:137,column:18},end:{line:137,column:35}},66:{start:{line:138,column:2},end:{line:138,column:25}},67:{start:{line:140,column:22},end:{line:140,column:48}},68:{start:{line:141,column:18},end:{line:141,column:35}},69:{start:{line:142,column:4},end:{line:142,column:46}},70:{start:{line:143,column:16},end:{line:143,column:38}},71:{start:{line:144,column:4},end:{line:144,column:64}},72:{start:{line:146,column:2},end:{line:146,column:16}},73:{start:{line:150,column:19},end:{line:150,column:23}},74:{start:{line:152,column:2},end:{line:152,column:30}},75:{start:{line:156,column:26},end:{line:156,column:31}},76:{start:{line:157,column:14},end:{line:157,column:24}},77:{start:{line:158,column:14},end:{line:158,column:28}},78:{start:{line:159,column:2},end:{line:164,column:3}},79:{start:{line:160,column:17},end:{line:160,column:34}},80:{start:{line:161,column:22},end:{line:161,column:79}},81:{start:{line:162,column:4},end:{line:162,column:24}},82:{start:{line:162,column:19},end:{line:162,column:24}},83:{start:{line:163,column:4},end:{line:163,column:11}},84:{start:{line:166,column:12},end:{line:166,column:21}},85:{start:{line:167,column:2},end:{line:172,column:3}},86:{start:{line:168,column:17},end:{line:168,column:32}},87:{start:{line:169,column:22},end:{line:169,column:79}},88:{start:{line:170,column:4},end:{line:170,column:25}},89:{start:{line:170,column:20},end:{line:170,column:25}},90:{start:{line:171,column:4},end:{line:171,column:9}},91:{start:{line:174,column:2},end:{line:174,column:34}},92:{start:{line:175,column:18},end:{line:175,column:39}},93:{start:{line:176,column:2},end:{line:179,column:4}},94:{start:{line:180,column:2},end:{line:180,column:16}},95:{start:{line:184,column:34},end:{line:184,column:39}},96:{start:{line:185,column:15},end:{line:185,column:29}},97:{start:{line:186,column:14},end:{line:186,column:18}},98:{start:{line:187,column:18},end:{line:187,column:24}},99:{start:{line:188,column:16},end:{line:188,column:18}},100:{start:{line:189,column:14},end:{line:189,column:24}},101:{start:{line:190,column:2},end:{line:227,column:3}},102:{start:{line:191,column:17},end:{line:191,column:35}},103:{start:{line:192,column:4},end:{line:199,column:5}},104:{start:{line:193,column:25},end:{line:193,column:39}},105:{start:{line:194,column:6},end:{line:196,column:7}},106:{start:{line:195,column:8},end:{line:195,column:20}},107:{start:{line:197,column:6},end:{line:197,column:14}},108:{start:{line:198,column:6},end:{line:198,column:14}},109:{start:{line:201,column:21},end:{line:201,column:49}},110:{start:{line:202,column:4},end:{line:207,column:5}},111:{start:{line:203,column:6},end:{line:205,column:7}},112:{start:{line:204,column:8},end:{line:204,column:48}},113:{start:{line:206,column:6},end:{line:206,column:11}},114:{start:{line:209,column:22},end:{line:209,column:44}},115:{start:{line:210,column:4},end:{line:217,column:5}},116:{start:{line:211,column:6},end:{line:213,column:7}},117:{start:{line:212,column:8},end:{line:212,column:48}},118:{start:{line:214,column:6},end:{line:214,column:28}},119:{start:{line:215,column:6},end:{line:215,column:14}},120:{start:{line:216,column:6},end:{line:216,column:14}},121:{start:{line:219,column:25},end:{line:219,column:54}},122:{start:{line:220,column:4},end:{line:224,column:5}},123:{start:{line:221,column:6},end:{line:221,column:18}},124:{start:{line:222,column:6},end:{line:222,column:14}},125:{start:{line:223,column:6},end:{line:223,column:14}},126:{start:{line:226,column:4},end:{line:226,column:12}},127:{start:{line:228,column:2},end:{line:228,column:37}},128:{start:{line:230,column:15},end:{line:230,column:27}},129:{start:{line:231,column:15},end:{line:231,column:26}},130:{start:{line:232,column:2},end:{line:269,column:3}},131:{start:{line:233,column:17},end:{line:233,column:25}},132:{start:{line:234,column:22},end:{line:234,column:46}},133:{start:{line:235,column:4},end:{line:253,column:5}},134:{start:{line:236,column:25},end:{line:236,column:37}},135:{start:{line:237,column:6},end:{line:252,column:7}},136:{start:{line:238,column:8},end:{line:243,column:9}},137:{start:{line:239,column:26},end:{line:239,column:43}},138:{start:{line:240,column:10},end:{line:240,column:47}},139:{start:{line:241,column:10},end:{line:241,column:16}},140:{start:{line:242,column:10},end:{line:242,column:18}},141:{start:{line:244,column:26},end:{line:244,column:38}},142:{start:{line:245,column:8},end:{line:245,column:14}},143:{start:{line:246,column:8},end:{line:251,column:9}},144:{start:{line:247,column:26},end:{line:247,column:48}},145:{start:{line:248,column:10},end:{line:248,column:47}},146:{start:{line:249,column:10},end:{line:249,column:16}},147:{start:{line:250,column:10},end:{line:250,column:18}},148:{start:{line:254,column:4},end:{line:266,column:5}},149:{start:{line:255,column:25},end:{line:255,column:37}},150:{start:{line:256,column:6},end:{line:261,column:7}},151:{start:{line:257,column:24},end:{line:257,column:41}},152:{start:{line:258,column:8},end:{line:258,column:45}},153:{start:{line:259,column:8},end:{line:259,column:14}},154:{start:{line:260,column:8},end:{line:260,column:16}},155:{start:{line:263,column:22},end:{line:263,column:39}},156:{start:{line:264,column:6},end:{line:264,column:43}},157:{start:{line:265,column:6},end:{line:265,column:14}},158:{start:{line:268,column:4},end:{line:268,column:38}},159:{start:{line:272,column:13},end:{line:272,column:20}},160:{start:{line:275,column:34},end:{line:275,column:39}},161:{start:{line:276,column:22},end:{line:276,column:43}},162:{start:{line:277,column:14},end:{line:277,column:24}},163:{start:{line:278,column:14},end:{line:278,column:28}},164:{start:{line:279,column:2},end:{line:311,column:3}},165:{start:{line:280,column:20},end:{line:280,column:44}},166:{start:{line:281,column:4},end:{line:284,column:5}},167:{start:{line:282,column:6},end:{line:282,column:20}},168:{start:{line:283,column:6},end:{line:283,column:11}},169:{start:{line:286,column:29},end:{line:286,column:51}},170:{start:{line:287,column:4},end:{line:287,column:48}},171:{start:{line:288,column:21},end:{line:288,column:66}},172:{start:{line:289,column:17},end:{line:289,column:33}},173:{start:{line:290,column:4},end:{line:293,column:5}},174:{start:{line:291,column:6},end:{line:291,column:37}},175:{start:{line:292,column:6},end:{line:292,column:14}},176:{start:{line:295,column:4},end:{line:306,column:5}},177:{start:{line:296,column:24},end:{line:296,column:46}},178:{start:{line:297,column:6},end:{line:297,column:42}},179:{start:{line:298,column:6},end:{line:305,column:8}},180:{start:{line:308,column:4},end:{line:308,column:39}},181:{start:{line:309,column:4},end:{line:309,column:56}},182:{start:{line:310,column:4},end:{line:310,column:9}}},fnMap:{0:{name:"feedPosition",decl:{start:{line:8,column:16},end:{line:8,column:28}},loc:{start:{line:8,column:50},end:{line:20,column:1}},line:8},1:{name:"jumpPosition",decl:{start:{line:22,column:16},end:{line:22,column:28}},loc:{start:{line:22,column:50},end:{line:25,column:1}},line:22},2:{name:"makeInitialPosition",decl:{start:{line:27,column:16},end:{line:27,column:35}},loc:{start:{line:27,column:39},end:{line:33,column:1}},line:27},3:{name:"copyPosition",decl:{start:{line:35,column:16},end:{line:35,column:28}},loc:{start:{line:35,column:40},end:{line:41,column:1}},line:35},4:{name:"lexer",decl:{start:{line:43,column:24},end:{line:43,column:29}},loc:{start:{line:43,column:45},end:{line:52,column:1}},line:43},5:{name:"lex",decl:{start:{line:54,column:16},end:{line:54,column:19}},loc:{start:{line:54,column:28},end:{line:73,column:1}},line:54},6:{name:"findTextEnd",decl:{start:{line:76,column:16},end:{line:76,column:27}},loc:{start:{line:76,column:41},end:{line:88,column:1}},line:76},7:{name:"lexText",decl:{start:{line:90,column:16},end:{line:90,column:23}},loc:{start:{line:90,column:32},end:{line:104,column:1}},line:90},8:{name:"lexComment",decl:{start:{line:106,column:16},end:{line:106,column:26}},loc:{start:{line:106,column:35},end:{line:126,column:1}},line:106},9:{name:"lexTag",decl:{start:{line:128,column:16},end:{line:128,column:22}},loc:{start:{line:128,column:31},end:{line:147,column:1}},line:128},10:{name:"isWhitespaceChar",decl:{start:{line:151,column:16},end:{line:151,column:32}},loc:{start:{line:151,column:40},end:{line:153,column:1}},line:151},11:{name:"lexTagName",decl:{start:{line:155,column:16},end:{line:155,column:26}},loc:{start:{line:155,column:35},end:{line:181,column:1}},line:155},12:{name:"lexTagAttributes",decl:{start:{line:183,column:16},end:{line:183,column:32}},loc:{start:{line:183,column:41},end:{line:270,column:1}},line:183},13:{name:"lexSkipTag",decl:{start:{line:274,column:16},end:{line:274,column:26}},loc:{start:{line:274,column:44},end:{line:312,column:1}},line:274}},branchMap:{0:{loc:{start:{line:13,column:4},end:{line:18,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:18,column:5}},{start:{line:13,column:4},end:{line:18,column:5}}],line:13},1:{loc:{start:{line:60,column:4},end:{line:71,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:71,column:5}},{start:{line:60,column:4},end:{line:71,column:5}}],line:60},2:{loc:{start:{line:62,column:6},end:{line:70,column:7}},type:"if",locations:[{start:{line:62,column:6},end:{line:70,column:7}},{start:{line:62,column:6},end:{line:70,column:7}}],line:62},3:{loc:{start:{line:67,column:8},end:{line:69,column:9}},type:"if",locations:[{start:{line:67,column:8},end:{line:69,column:9}},{start:{line:67,column:8},end:{line:69,column:9}}],line:67},4:{loc:{start:{line:79,column:4},end:{line:81,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:81,column:5}},{start:{line:79,column:4},end:{line:81,column:5}}],line:79},5:{loc:{start:{line:83,column:4},end:{line:85,column:5}},type:"if",locations:[{start:{line:83,column:4},end:{line:85,column:5}},{start:{line:83,column:4},end:{line:85,column:5}}],line:83},6:{loc:{start:{line:83,column:8},end:{line:83,column:63}},type:"binary-expr",locations:[{start:{line:83,column:8},end:{line:83,column:20}},{start:{line:83,column:24},end:{line:83,column:36}},{start:{line:83,column:40},end:{line:83,column:63}}],line:83},7:{loc:{start:{line:94,column:2},end:{line:94,column:40}},type:"if",locations:[{start:{line:94,column:2},end:{line:94,column:40}},{start:{line:94,column:2},end:{line:94,column:40}}],line:94},8:{loc:{start:{line:95,column:2},end:{line:97,column:3}},type:"if",locations:[{start:{line:95,column:2},end:{line:97,column:3}},{start:{line:95,column:2},end:{line:97,column:3}}],line:95},9:{loc:{start:{line:112,column:2},end:{line:114,column:3}},type:"if",locations:[{start:{line:112,column:2},end:{line:114,column:3}},{start:{line:112,column:2},end:{line:114,column:3}}],line:112},10:{loc:{start:{line:134,column:32},end:{line:134,column:45}},type:"cond-expr",locations:[{start:{line:134,column:40},end:{line:134,column:41}},{start:{line:134,column:44},end:{line:134,column:45}}],line:134},11:{loc:{start:{line:142,column:32},end:{line:142,column:45}},type:"cond-expr",locations:[{start:{line:142,column:40},end:{line:142,column:41}},{start:{line:142,column:44},end:{line:142,column:45}}],line:142},12:{loc:{start:{line:161,column:24},end:{line:161,column:78}},type:"binary-expr",locations:[{start:{line:161,column:24},end:{line:161,column:46}},{start:{line:161,column:50},end:{line:161,column:62}},{start:{line:161,column:66},end:{line:161,column:78}}],line:161},13:{loc:{start:{line:162,column:4},end:{line:162,column:24}},type:"if",locations:[{start:{line:162,column:4},end:{line:162,column:24}},{start:{line:162,column:4},end:{line:162,column:24}}],line:162},14:{loc:{start:{line:169,column:24},end:{line:169,column:78}},type:"binary-expr",locations:[{start:{line:169,column:24},end:{line:169,column:46}},{start:{line:169,column:50},end:{line:169,column:62}},{start:{line:169,column:66},end:{line:169,column:78}}],line:169},15:{loc:{start:{line:170,column:4},end:{line:170,column:25}},type:"if",locations:[{start:{line:170,column:4},end:{line:170,column:25}},{start:{line:170,column:4},end:{line:170,column:25}}],line:170},16:{loc:{start:{line:192,column:4},end:{line:199,column:5}},type:"if",locations:[{start:{line:192,column:4},end:{line:199,column:5}},{start:{line:192,column:4},end:{line:199,column:5}}],line:192},17:{loc:{start:{line:194,column:6},end:{line:196,column:7}},type:"if",locations:[{start:{line:194,column:6},end:{line:196,column:7}},{start:{line:194,column:6},end:{line:196,column:7}}],line:194},18:{loc:{start:{line:201,column:21},end:{line:201,column:49}},type:"binary-expr",locations:[{start:{line:201,column:21},end:{line:201,column:33}},{start:{line:201,column:37},end:{line:201,column:49}}],line:201},19:{loc:{start:{line:202,column:4},end:{line:207,column:5}},type:"if",locations:[{start:{line:202,column:4},end:{line:207,column:5}},{start:{line:202,column:4},end:{line:207,column:5}}],line:202},20:{loc:{start:{line:203,column:6},end:{line:205,column:7}},type:"if",locations:[{start:{line:203,column:6},end:{line:205,column:7}},{start:{line:203,column:6},end:{line:205,column:7}}],line:203},21:{loc:{start:{line:210,column:4},end:{line:217,column:5}},type:"if",locations:[{start:{line:210,column:4},end:{line:217,column:5}},{start:{line:210,column:4},end:{line:217,column:5}}],line:210},22:{loc:{start:{line:211,column:6},end:{line:213,column:7}},type:"if",locations:[{start:{line:211,column:6},end:{line:213,column:7}},{start:{line:211,column:6},end:{line:213,column:7}}],line:211},23:{loc:{start:{line:219,column:25},end:{line:219,column:54}},type:"binary-expr",locations:[{start:{line:219,column:25},end:{line:219,column:38}},{start:{line:219,column:42},end:{line:219,column:54}}],line:219},24:{loc:{start:{line:220,column:4},end:{line:224,column:5}},type:"if",locations:[{start:{line:220,column:4},end:{line:224,column:5}},{start:{line:220,column:4},end:{line:224,column:5}}],line:220},25:{loc:{start:{line:235,column:4},end:{line:253,column:5}},type:"if",locations:[{start:{line:235,column:4},end:{line:253,column:5}},{start:{line:235,column:4},end:{line:253,column:5}}],line:235},26:{loc:{start:{line:237,column:6},end:{line:252,column:7}},type:"if",locations:[{start:{line:237,column:6},end:{line:252,column:7}},{start:{line:237,column:6},end:{line:252,column:7}}],line:237},27:{loc:{start:{line:237,column:10},end:{line:237,column:51}},type:"binary-expr",locations:[{start:{line:237,column:10},end:{line:237,column:20}},{start:{line:237,column:24},end:{line:237,column:51}}],line:237},28:{loc:{start:{line:238,column:8},end:{line:243,column:9}},type:"if",locations:[{start:{line:238,column:8},end:{line:243,column:9}},{start:{line:238,column:8},end:{line:243,column:9}}],line:238},29:{loc:{start:{line:246,column:8},end:{line:251,column:9}},type:"if",locations:[{start:{line:246,column:8},end:{line:251,column:9}},{start:{line:246,column:8},end:{line:251,column:9}}],line:246},30:{loc:{start:{line:254,column:4},end:{line:266,column:5}},type:"if",locations:[{start:{line:254,column:4},end:{line:266,column:5}},{start:{line:254,column:4},end:{line:266,column:5}}],line:254},31:{loc:{start:{line:256,column:6},end:{line:261,column:7}},type:"if",locations:[{start:{line:256,column:6},end:{line:261,column:7}},{start:{line:256,column:6},end:{line:261,column:7}}],line:256},32:{loc:{start:{line:256,column:10},end:{line:256,column:56}},type:"binary-expr",locations:[{start:{line:256,column:10},end:{line:256,column:20}},{start:{line:256,column:24},end:{line:256,column:56}}],line:256},33:{loc:{start:{line:281,column:4},end:{line:284,column:5}},type:"if",locations:[{start:{line:281,column:4},end:{line:284,column:5}},{start:{line:281,column:4},end:{line:284,column:5}}],line:281},34:{loc:{start:{line:290,column:4},end:{line:293,column:5}},type:"if",locations:[{start:{line:290,column:4},end:{line:293,column:5}},{start:{line:290,column:4},end:{line:293,column:5}}],line:290},35:{loc:{start:{line:295,column:4},end:{line:306,column:5}},type:"if",locations:[{start:{line:295,column:4},end:{line:306,column:5}},{start:{line:295,column:4},end:{line:306,column:5}}],line:295}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0,85:0,86:0,87:0,88:0,89:0,90:0,91:0,92:0,93:0,94:0,95:0,96:0,97:0,98:0,99:0,100:0,101:0,102:0,103:0,104:0,105:0,106:0,107:0,108:0,109:0,110:0,111:0,112:0,113:0,114:0,115:0,116:0,117:0,118:0,119:0,120:0,121:0,122:0,123:0,124:0,125:0,126:0,127:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:0,136:0,137:0,138:0,139:0,140:0,141:0,142:0,143:0,144:0,145:0,146:0,147:0,148:0,149:0,150:0,151:0,152:0,153:0,154:0,155:0,156:0,157:0,158:0,159:0,160:0,161:0,162:0,163:0,164:0,165:0,166:0,167:0,168:0,169:0,170:0,171:0,172:0,173:0,174:0,175:0,176:0,177:0,178:0,179:0,180:0,181:0,182:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0,0],13:[0,0],14:[0,0,0],15:[0,0],16:[0,0],17:[0,0],18:[0,0],19:[0,0],20:[0,0],21:[0,0],22:[0,0],23:[0,0],24:[0,0],25:[0,0],26:[0,0],27:[0,0],28:[0,0],29:[0,0],30:[0,0],31:[0,0],32:[0,0],33:[0,0],34:[0,0],35:[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},a=n[i]||(n[i]={});return a[e]&&a[e].hash===t?a[e]:(r.hash=t,a[e]=r)}();Object.defineProperty(n,"__esModule",{value:!0}),n.feedPosition=a,n.jumpPosition=s,n.makeInitialPosition=o,n.copyPosition=l,n.default=function(e,t){i.f[4]++;var n=(i.s[12]++,{str:e,options:t,position:o(),tokens:[]});return i.s[13]++,u(n),i.s[14]++,n.tokens},n.lex=u,n.findTextEnd=h,n.lexText=d,n.lexComment=p,n.lexTag=f,n.isWhitespaceChar=g,n.lexTagName=y,n.lexTagAttributes=v,n.lexSkipTag=b;var r=e("./compat");function a(e,t,n){i.f[0]++;var r=(i.s[0]++,e.index),a=(i.s[1]++,e.index=r+n);i.s[2]++;for(var s=r;s<a;s++){var o=(i.s[3]++,t.charAt(s));i.s[4]++,"\n"===o?(i.b[0][0]++,i.s[5]++,e.line++,i.s[6]++,e.column=0):(i.b[0][1]++,i.s[7]++,e.column++)}}function s(e,t,n){i.f[1]++;var r=(i.s[8]++,n-e.index);return i.s[9]++,a(e,t,r)}function o(){return i.f[2]++,i.s[10]++,{index:0,column:0,line:0}}function l(e){return i.f[3]++,i.s[11]++,{index:e.index,line:e.line,column:e.column}}function u(e){i.f[5]++;var t=(i.s[15]++,e),n=t.str,a=t.options.childlessTags,s=(i.s[16]++,n.length);for(i.s[17]++;e.position.index<s;){var o=(i.s[18]++,e.position.index);if(i.s[19]++,d(e),i.s[20]++,e.position.index===o){i.b[1][0]++;var l=(i.s[21]++,(0,r.startsWith)(n,"!--",o+1));if(i.s[22]++,l)i.b[2][0]++,i.s[23]++,p(e);else{i.b[2][1]++;var u=(i.s[24]++,f(e)),c=(i.s[25]++,u.toLowerCase());i.s[26]++,(0,r.arrayIncludes)(a,c)?(i.b[3][0]++,i.s[27]++,b(u,e)):i.b[3][1]++}}else i.b[1][1]++}}var c=(i.s[28]++,/[A-Za-z0-9]/);function h(e,t){for(i.f[6]++,i.s[29]++;;){var n=(i.s[30]++,e.indexOf("<",t));if(i.s[31]++,-1===n)return i.b[4][0]++,i.s[32]++,n;i.b[4][1]++;var r=(i.s[33]++,e.charAt(n+1));if(i.s[34]++,i.b[6][0]++,"/"===r||(i.b[6][1]++,"!"===r)||(i.b[6][2]++,c.test(r)))return i.b[5][0]++,i.s[35]++,n;i.b[5][1]++,i.s[36]++,t=n+1}}function d(e){i.f[7]++;var t=(i.s[37]++,"text"),n=(i.s[38]++,e),r=n.str,a=n.position,o=(i.s[39]++,h(r,a.index));if(i.s[40]++,o===a.index)return i.b[7][0]++,void i.s[41]++;i.b[7][1]++,i.s[42]++,-1===o?(i.b[8][0]++,i.s[43]++,o=r.length):i.b[8][1]++;var u=(i.s[44]++,l(a)),c=(i.s[45]++,r.slice(a.index,o));i.s[46]++,s(a,r,o);var d=(i.s[47]++,l(a));i.s[48]++,e.tokens.push({type:t,content:c,position:{start:u,end:d}})}function p(e){i.f[8]++;var t=(i.s[49]++,e),n=t.str,r=t.position,o=(i.s[50]++,l(r));i.s[51]++,a(r,n,4);var u=(i.s[52]++,n.indexOf("--\x3e",r.index)),c=(i.s[53]++,u+3);i.s[54]++,-1===u?(i.b[9][0]++,i.s[55]++,u=c=n.length):i.b[9][1]++;var h=(i.s[56]++,n.slice(r.index,u));i.s[57]++,s(r,n,c),i.s[58]++,e.tokens.push({type:"comment",content:h,position:{start:o,end:l(r)}})}function f(e){i.f[9]++;var t=(i.s[59]++,e),n=t.str,r=t.position,s=(i.s[60]++,n.charAt(r.index+1)),o=(i.s[61]++,"/"===s),u=(i.s[62]++,l(r));i.s[63]++,a(r,n,o?(i.b[10][0]++,2):(i.b[10][1]++,1)),i.s[64]++,e.tokens.push({type:"tag-start",close:o,position:{start:u}});var c=(i.s[65]++,y(e));i.s[66]++,v(e);var h=(i.s[67]++,n.charAt(r.index)),d=(i.s[68]++,"/"===h);i.s[69]++,a(r,n,d?(i.b[11][0]++,2):(i.b[11][1]++,1));var p=(i.s[70]++,l(r));return i.s[71]++,e.tokens.push({type:"tag-end",close:d,position:{end:p}}),i.s[72]++,c}var m=(i.s[73]++,/\s/);function g(e){return i.f[10]++,i.s[74]++,m.test(e)}function y(e){i.f[11]++;var t=(i.s[75]++,e),n=t.str,r=t.position,a=(i.s[76]++,n.length),o=(i.s[77]++,r.index);for(i.s[78]++;o<a;){var l=(i.s[79]++,n.charAt(o)),u=(i.s[80]++,i.b[12][0]++,!(g(l)||(i.b[12][1]++,"/"===l)||(i.b[12][2]++,">"===l)));if(i.s[81]++,u){i.b[13][0]++,i.s[82]++;break}i.b[13][1]++,i.s[83]++,o++}var c=(i.s[84]++,o+1);for(i.s[85]++;c<a;){var h=(i.s[86]++,n.charAt(c)),d=(i.s[87]++,i.b[14][0]++,!(g(h)||(i.b[14][1]++,"/"===h)||(i.b[14][2]++,">"===h)));if(i.s[88]++,!d){i.b[15][0]++,i.s[89]++;break}i.b[15][1]++,i.s[90]++,c++}i.s[91]++,s(r,n,c);var p=(i.s[92]++,n.slice(o,c));return i.s[93]++,e.tokens.push({type:"tag",content:p}),i.s[94]++,p}function v(e){i.f[12]++;var t=(i.s[95]++,e),n=t.str,a=t.position,o=t.tokens,l=(i.s[96]++,a.index),u=(i.s[97]++,null),c=(i.s[98]++,l),h=(i.s[99]++,[]),d=(i.s[100]++,n.length);for(i.s[101]++;l<d;){var p=(i.s[102]++,n.charAt(l));if(i.s[103]++,u){i.b[16][0]++;var f=(i.s[104]++,p===u);i.s[105]++,f?(i.b[17][0]++,i.s[106]++,u=null):i.b[17][1]++,i.s[107]++,l++,i.s[108]++}else{i.b[16][1]++;var m=(i.s[109]++,i.b[18][0]++,"/"===p||(i.b[18][1]++,">"===p));if(i.s[110]++,m){i.b[19][0]++,i.s[111]++,l!==c?(i.b[20][0]++,i.s[112]++,h.push(n.slice(c,l))):i.b[20][1]++,i.s[113]++;break}i.b[19][1]++;var y=(i.s[114]++,g(p));if(i.s[115]++,y)i.b[21][0]++,i.s[116]++,l!==c?(i.b[22][0]++,i.s[117]++,h.push(n.slice(c,l))):i.b[22][1]++,i.s[118]++,c=l+1,i.s[119]++,l++,i.s[120]++;else{i.b[21][1]++;var v=(i.s[121]++,i.b[23][0]++,"'"===p||(i.b[23][1]++,'"'===p));i.s[122]++,v?(i.b[24][0]++,i.s[123]++,u=p,i.s[124]++,l++,i.s[125]++):(i.b[24][1]++,i.s[126]++,l++)}}}i.s[127]++,s(a,n,l);var A=(i.s[128]++,h.length),b=(i.s[129]++,"attribute");i.s[130]++;for(var S=0;S<A;S++){var E=(i.s[131]++,h[S]),k=(i.s[132]++,-1===E.indexOf("="));if(i.s[133]++,k){i.b[25][0]++;var V=(i.s[134]++,h[S+1]);if(i.s[135]++,i.b[27][0]++,V&&(i.b[27][1]++,(0,r.startsWith)(V,"="))){if(i.b[26][0]++,i.s[136]++,V.length>1){i.b[28][0]++;var w=(i.s[137]++,E+V);i.s[138]++,o.push({type:b,content:w}),i.s[139]++,S+=1,i.s[140]++;continue}i.b[28][1]++;var _=(i.s[141]++,h[S+2]);if(i.s[142]++,S+=1,i.s[143]++,_){i.b[29][0]++;var C=(i.s[144]++,E+"="+_);i.s[145]++,o.push({type:b,content:C}),i.s[146]++,S+=1,i.s[147]++;continue}i.b[29][1]++}else i.b[26][1]++}else i.b[25][1]++;if(i.s[148]++,(0,r.endsWith)(E,"=")){i.b[30][0]++;var x=(i.s[149]++,h[S+1]);if(i.s[150]++,i.b[32][0]++,x&&(i.b[32][1]++,!(0,r.stringIncludes)(x,"="))){i.b[31][0]++;var P=(i.s[151]++,E+x);i.s[152]++,o.push({type:b,content:P}),i.s[153]++,S+=1,i.s[154]++;continue}i.b[31][1]++;var T=(i.s[155]++,E.slice(0,-1));i.s[156]++,o.push({type:b,content:T}),i.s[157]++}else i.b[30][1]++,i.s[158]++,o.push({type:b,content:E})}}var A=(i.s[159]++,[].push);function b(e,t){i.f[13]++;var n=(i.s[160]++,t),r=n.str,a=n.position,o=n.tokens,u=(i.s[161]++,e.toLowerCase()),c=(i.s[162]++,r.length),h=(i.s[163]++,a.index);for(i.s[164]++;h<c;){var p=(i.s[165]++,r.indexOf("</",h));if(i.s[166]++,-1===p){i.b[33][0]++,i.s[167]++,d(t),i.s[168]++;break}i.b[33][1]++;var m=(i.s[169]++,l(a));i.s[170]++,s(m,r,p);var g=(i.s[171]++,{str:r,position:m,tokens:[]}),y=(i.s[172]++,f(g));if(i.s[173]++,u===y.toLowerCase()){if(i.b[34][1]++,i.s[176]++,p!==a.index){i.b[35][0]++;var v=(i.s[177]++,l(a));i.s[178]++,s(a,r,p),i.s[179]++,o.push({type:"text",content:r.slice(v.index,p),position:{start:v,end:l(a)}})}else i.b[35][1]++;i.s[180]++,A.apply(o,g.tokens),i.s[181]++,s(a,r,g.position.index),i.s[182]++;break}i.b[34][0]++,i.s[174]++,h=g.position.index,i.s[175]++}}},{"./compat":1}],5:[function(e,t,n){"use strict";var i=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/parser.js",t="10fb0478bb046c7059c47c8225586b7e30f48474",n=new(0,function(){}.constructor)("return this")(),i="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/parser.js",statementMap:{0:{start:{line:4,column:15},end:{line:4,column:44}},1:{start:{line:5,column:16},end:{line:5,column:59}},2:{start:{line:6,column:2},end:{line:6,column:14}},3:{start:{line:7,column:2},end:{line:7,column:22}},4:{start:{line:11,column:21},end:{line:11,column:39}},5:{start:{line:12,column:2},end:{line:24,column:3}},6:{start:{line:13,column:23},end:{line:13,column:39}},7:{start:{line:14,column:4},end:{line:23,column:5}},8:{start:{line:15,column:28},end:{line:15,column:55}},9:{start:{line:16,column:6},end:{line:18,column:7}},10:{start:{line:17,column:8},end:{line:17,column:13}},11:{start:{line:19,column:6},end:{line:21,column:7}},12:{start:{line:20,column:8},end:{line:20,column:19}},13:{start:{line:22,column:6},end:{line:22,column:20}},14:{start:{line:25,column:2},end:{line:25,column:14}},15:{start:{line:29,column:2},end:{line:29,column:45}},16:{start:{line:30,column:2},end:{line:32,column:3}},17:{start:{line:31,column:4},end:{line:31,column:47}},18:{start:{line:33,column:2},end:{line:33,column:25}},19:{start:{line:37,column:28},end:{line:37,column:33}},20:{start:{line:38,column:16},end:{line:38,column:21}},21:{start:{line:39,column:14},end:{line:39,column:46}},22:{start:{line:40,column:14},end:{line:40,column:27}},23:{start:{line:41,column:17},end:{line:41,column:22}},24:{start:{line:42,column:2},end:{line:132,column:3}},25:{start:{line:43,column:18},end:{line:43,column:32}},26:{start:{line:44,column:4},end:{line:48,column:5}},27:{start:{line:45,column:6},end:{line:45,column:23}},28:{start:{line:46,column:6},end:{line:46,column:14}},29:{start:{line:47,column:6},end:{line:47,column:14}},30:{start:{line:50,column:21},end:{line:50,column:37}},31:{start:{line:51,column:4},end:{line:51,column:12}},32:{start:{line:52,column:20},end:{line:52,column:50}},33:{start:{line:53,column:4},end:{line:73,column:5}},34:{start:{line:54,column:18},end:{line:54,column:30}},35:{start:{line:55,column:25},end:{line:55,column:30}},36:{start:{line:56,column:6},end:{line:61,column:7}},37:{start:{line:57,column:8},end:{line:60,column:9}},38:{start:{line:58,column:10},end:{line:58,column:29}},39:{start:{line:59,column:10},end:{line:59,column:15}},40:{start:{line:62,column:6},end:{line:66,column:7}},41:{start:{line:63,column:25},end:{line:63,column:39}},42:{start:{line:64,column:8},end:{line:64,column:46}},43:{start:{line:64,column:41},end:{line:64,column:46}},44:{start:{line:65,column:8},end:{line:65,column:16}},45:{start:{line:67,column:6},end:{line:72,column:7}},46:{start:{line:68,column:8},end:{line:68,column:88}},47:{start:{line:69,column:8},end:{line:69,column:13}},48:{start:{line:71,column:8},end:{line:71,column:16}},49:{start:{line:75,column:25},end:{line:75,column:68}},50:{start:{line:76,column:34},end:{line:76,column:46}},51:{start:{line:77,column:4},end:{line:80,column:5}},52:{start:{line:78,column:56},end:{line:78,column:63}},53:{start:{line:79,column:6},end:{line:79,column:77}},54:{start:{line:82,column:4},end:{line:95,column:5}},55:{start:{line:85,column:25},end:{line:85,column:41}},56:{start:{line:86,column:6},end:{line:94,column:7}},57:{start:{line:87,column:8},end:{line:92,column:9}},58:{start:{line:88,column:10},end:{line:88,column:86}},59:{start:{line:89,column:32},end:{line:89,column:48}},60:{start:{line:90,column:10},end:{line:90,column:47}},61:{start:{line:91,column:10},end:{line:91,column:15}},62:{start:{line:93,column:8},end:{line:93,column:39}},63:{start:{line:97,column:21},end:{line:97,column:23}},64:{start:{line:99,column:4},end:{line:104,column:5}},65:{start:{line:100,column:6},end:{line:100,column:32}},66:{start:{line:101,column:6},end:{line:101,column:45}},67:{start:{line:101,column:40},end:{line:101,column:45}},68:{start:{line:102,column:6},end:{line:102,column:40}},69:{start:{line:103,column:6},end:{line:103,column:14}},70:{start:{line:106,column:4},end:{line:106,column:12}},71:{start:{line:107,column:21},end:{line:107,column:23}},72:{start:{line:108,column:21},end:{line:111,column:5}},73:{start:{line:112,column:24},end:{line:118,column:5}},74:{start:{line:119,column:4},end:{line:119,column:27}},75:{start:{line:121,column:24},end:{line:121,column:86}},76:{start:{line:122,column:4},end:{line:131,column:5}},77:{start:{line:123,column:19},end:{line:123,column:60}},78:{start:{line:124,column:25},end:{line:124,column:57}},79:{start:{line:125,column:6},end:{line:125,column:23}},80:{start:{line:126,column:6},end:{line:126,column:32}},81:{start:{line:127,column:31},end:{line:127,column:52}},82:{start:{line:128,column:6},end:{line:130,column:7}},83:{start:{line:129,column:8},end:{line:129,column:66}},84:{start:{line:133,column:2},end:{line:133,column:23}}},fnMap:{0:{name:"parser",decl:{start:{line:3,column:24},end:{line:3,column:30}},loc:{start:{line:3,column:49},end:{line:8,column:1}},line:3},1:{name:"hasTerminalParent",decl:{start:{line:10,column:16},end:{line:10,column:33}},loc:{start:{line:10,column:62},end:{line:26,column:1}},line:10},2:{name:"rewindStack",decl:{start:{line:28,column:16},end:{line:28,column:27}},loc:{start:{line:28,column:81},end:{line:34,column:1}},line:28},3:{name:"parse",decl:{start:{line:36,column:16},end:{line:36,column:21}},loc:{start:{line:36,column:30},end:{line:134,column:1}},line:36}},branchMap:{0:{loc:{start:{line:12,column:2},end:{line:24,column:3}},type:"if",locations:[{start:{line:12,column:2},end:{line:24,column:3}},{start:{line:12,column:2},end:{line:24,column:3}}],line:12},1:{loc:{start:{line:16,column:6},end:{line:18,column:7}},type:"if",locations:[{start:{line:16,column:6},end:{line:18,column:7}},{start:{line:16,column:6},end:{line:18,column:7}}],line:16},2:{loc:{start:{line:19,column:6},end:{line:21,column:7}},type:"if",locations:[{start:{line:19,column:6},end:{line:21,column:7}},{start:{line:19,column:6},end:{line:21,column:7}}],line:19},3:{loc:{start:{line:44,column:4},end:{line:48,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:48,column:5}},{start:{line:44,column:4},end:{line:48,column:5}}],line:44},4:{loc:{start:{line:53,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:73,column:5}},{start:{line:53,column:4},end:{line:73,column:5}}],line:53},5:{loc:{start:{line:57,column:8},end:{line:60,column:9}},type:"if",locations:[{start:{line:57,column:8},end:{line:60,column:9}},{start:{line:57,column:8},end:{line:60,column:9}}],line:57},6:{loc:{start:{line:64,column:8},end:{line:64,column:46}},type:"if",locations:[{start:{line:64,column:8},end:{line:64,column:46}},{start:{line:64,column:8},end:{line:64,column:46}}],line:64},7:{loc:{start:{line:67,column:6},end:{line:72,column:7}},type:"if",locations:[{start:{line:67,column:6},end:{line:72,column:7}},{start:{line:67,column:6},end:{line:72,column:7}}],line:67},8:{loc:{start:{line:77,column:4},end:{line:80,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:80,column:5}},{start:{line:77,column:4},end:{line:80,column:5}}],line:77},9:{loc:{start:{line:82,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:95,column:5}},{start:{line:82,column:4},end:{line:95,column:5}}],line:82},10:{loc:{start:{line:87,column:8},end:{line:92,column:9}},type:"if",locations:[{start:{line:87,column:8},end:{line:92,column:9}},{start:{line:87,column:8},end:{line:92,column:9}}],line:87},11:{loc:{start:{line:101,column:6},end:{line:101,column:45}},type:"if",locations:[{start:{line:101,column:6},end:{line:101,column:45}},{start:{line:101,column:6},end:{line:101,column:45}}],line:101},12:{loc:{start:{line:121,column:26},end:{line:121,column:85}},type:"binary-expr",locations:[{start:{line:121,column:26},end:{line:121,column:41}},{start:{line:121,column:45},end:{line:121,column:85}}],line:121},13:{loc:{start:{line:122,column:4},end:{line:131,column:5}},type:"if",locations:[{start:{line:122,column:4},end:{line:131,column:5}},{start:{line:122,column:4},end:{line:131,column:5}}],line:122},14:{loc:{start:{line:128,column:6},end:{line:130,column:7}},type:"if",locations:[{start:{line:128,column:6},end:{line:130,column:7}},{start:{line:128,column:6},end:{line:130,column:7}}],line:128}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0,71:0,72:0,73:0,74:0,75:0,76:0,77:0,78:0,79:0,80:0,81:0,82:0,83:0,84:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0],12:[0,0],13:[0,0],14:[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},a=n[i]||(n[i]={});return a[e]&&a[e].hash===t?a[e]:(r.hash=t,a[e]=r)}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){i.f[0]++;var n=(i.s[0]++,{tagName:null,children:[]}),r=(i.s[1]++,{tokens:e,options:t,cursor:0,stack:[n]});return i.s[2]++,o(r),i.s[3]++,n.children},n.hasTerminalParent=a,n.rewindStack=s,n.parse=o;var r=e("./compat");function a(e,t,n){i.f[1]++;var a=(i.s[4]++,n[e]);if(i.s[5]++,a){i.b[0][0]++;var s=(i.s[6]++,t.length-1);for(i.s[7]++;s>=0;){var o=(i.s[8]++,t[s].tagName);if(i.s[9]++,o===e){i.b[1][0]++,i.s[10]++;break}if(i.b[1][1]++,i.s[11]++,(0,r.arrayIncludes)(a,o))return i.b[2][0]++,i.s[12]++,!0;i.b[2][1]++,i.s[13]++,s--}}else i.b[0][1]++;return i.s[14]++,!1}function s(e,t,n,r){i.f[2]++,i.s[15]++,e[t].position.end=r,i.s[16]++;for(var a=t+1,s=e.length;a<s;a++)i.s[17]++,e[a].position.end=n;i.s[18]++,e.splice(t)}function o(e){i.f[3]++;var t=(i.s[19]++,e),n=t.tokens,l=t.options,u=(i.s[20]++,e).stack,c=(i.s[21]++,u[u.length-1].children),h=(i.s[22]++,n.length),d=(i.s[23]++,e).cursor;for(i.s[24]++;d<h;){var p=(i.s[25]++,n[d]);if(i.s[26]++,"tag-start"===p.type){i.b[3][1]++;var f=(i.s[30]++,n[++d]);i.s[31]++,d++;var m=(i.s[32]++,f.content.toLowerCase());if(i.s[33]++,p.close){i.b[4][0]++;var g=(i.s[34]++,u.length),y=(i.s[35]++,!1);for(i.s[36]++;--g>-1;){if(i.s[37]++,u[g].tagName===m){i.b[5][0]++,i.s[38]++,y=!0,i.s[39]++;break}i.b[5][1]++}for(i.s[40]++;d<h;){var v=(i.s[41]++,n[d]);if(i.s[42]++,"tag-end"!==v.type){i.b[6][0]++,i.s[43]++;break}i.b[6][1]++,i.s[44]++,d++}if(i.s[45]++,y){i.b[7][0]++,i.s[46]++,s(u,g,p.position.start,n[d-1].position.end),i.s[47]++;break}i.b[7][1]++,i.s[48]++}else{i.b[4][1]++;var A=(i.s[49]++,(0,r.arrayIncludes)(l.closingTags,m)),b=(i.s[50]++,A);if(i.s[51]++,b){i.b[8][0]++;var S=(i.s[52]++,l).closingTagAncestorBreakers;i.s[53]++,b=!a(m,u,S)}else i.b[8][1]++;if(i.s[54]++,b){i.b[9][0]++;var E=(i.s[55]++,u.length-1);for(i.s[56]++;E>0;){if(i.s[57]++,m===u[E].tagName){i.b[10][0]++,i.s[58]++,s(u,E,p.position.start,p.position.start);var k=(i.s[59]++,E-1);i.s[60]++,c=u[k].children,i.s[61]++;break}i.b[10][1]++,i.s[62]++,E-=1}}else i.b[9][1]++;var V=(i.s[63]++,[]),w=void 0;for(i.s[64]++;d<h;){if(i.s[65]++,w=n[d],i.s[66]++,"tag-end"===w.type){i.b[11][0]++,i.s[67]++;break}i.b[11][1]++,i.s[68]++,V.push(w.content),i.s[69]++,d++}i.s[70]++,d++;var _=(i.s[71]++,[]),C=(i.s[72]++,{start:p.position.start,end:w.position.end}),x=(i.s[73]++,{type:"element",tagName:f.content,attributes:V,children:_,position:C});i.s[74]++,c.push(x);var P=(i.s[75]++,i.b[12][0]++,!(w.close||(i.b[12][1]++,(0,r.arrayIncludes)(l.voidTags,m))));if(i.s[76]++,P){i.b[13][0]++;var T=(i.s[77]++,u.push({tagName:m,children:_,position:C})),M=(i.s[78]++,{tokens:n,options:l,cursor:d,stack:u});i.s[79]++,o(M),i.s[80]++,d=M.cursor;var L=(i.s[81]++,u.length===T);i.s[82]++,L?(i.b[14][0]++,i.s[83]++,x.position.end=n[d-1].position.end):i.b[14][1]++}else i.b[13][1]++}}else i.b[3][0]++,i.s[27]++,c.push(p),i.s[28]++,d++,i.s[29]++}i.s[84]++,e.cursor=d}},{"./compat":1}],6:[function(e,t,n){"use strict";var i=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/stringify.js",t="4a6a4628f3d12bd91f868fee07f716c74df89307",n=new(0,function(){}.constructor)("return this")(),i="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/stringify.js",statementMap:{0:{start:{line:4,column:2},end:{line:12,column:8}},1:{start:{line:5,column:25},end:{line:5,column:34}},2:{start:{line:6,column:4},end:{line:8,column:5}},3:{start:{line:7,column:6},end:{line:7,column:30}},4:{start:{line:9,column:24},end:{line:9,column:50}},5:{start:{line:10,column:18},end:{line:10,column:42}},6:{start:{line:11,column:4},end:{line:11,column:53}},7:{start:{line:16,column:2},end:{line:28,column:13}},8:{start:{line:17,column:4},end:{line:19,column:5}},9:{start:{line:18,column:6},end:{line:18,column:25}},10:{start:{line:20,column:4},end:{line:22,column:5}},11:{start:{line:21,column:6},end:{line:21,column:37}},12:{start:{line:23,column:44},end:{line:23,column:48}},13:{start:{line:24,column:26},end:{line:24,column:80}},14:{start:{line:25,column:4},end:{line:27,column:94}}},fnMap:{0:{name:"formatAttributes",decl:{start:{line:3,column:16},end:{line:3,column:32}},loc:{start:{line:3,column:46},end:{line:13,column:1}},line:3},1:{name:"(anonymous_1)",decl:{start:{line:4,column:27},end:{line:4,column:28}},loc:{start:{line:4,column:49},end:{line:12,column:3}},line:4},2:{name:"toHTML",decl:{start:{line:15,column:16},end:{line:15,column:22}},loc:{start:{line:15,column:39},end:{line:29,column:1}},line:15},3:{name:"(anonymous_3)",decl:{start:{line:16,column:18},end:{line:16,column:19}},loc:{start:{line:16,column:26},end:{line:28,column:3}},line:16}},branchMap:{0:{loc:{start:{line:6,column:4},end:{line:8,column:5}},type:"if",locations:[{start:{line:6,column:4},end:{line:8,column:5}},{start:{line:6,column:4},end:{line:8,column:5}}],line:6},1:{loc:{start:{line:10,column:18},end:{line:10,column:42}},type:"cond-expr",locations:[{start:{line:10,column:32},end:{line:10,column:35}},{start:{line:10,column:38},end:{line:10,column:42}}],line:10},2:{loc:{start:{line:17,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:19,column:5}},{start:{line:17,column:4},end:{line:19,column:5}}],line:17},3:{loc:{start:{line:20,column:4},end:{line:22,column:5}},type:"if",locations:[{start:{line:20,column:4},end:{line:22,column:5}},{start:{line:20,column:4},end:{line:22,column:5}}],line:20},4:{loc:{start:{line:25,column:11},end:{line:27,column:94}},type:"cond-expr",locations:[{start:{line:26,column:8},end:{line:26,column:53}},{start:{line:27,column:8},end:{line:27,column:94}}],line:25}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},f:{0:0,1:0,2:0,3:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},a=n[i]||(n[i]={});return a[e]&&a[e].hash===t?a[e]:(r.hash=t,a[e]=r)}();Object.defineProperty(n,"__esModule",{value:!0}),n.formatAttributes=a,n.toHTML=s;var r=e("./compat");function a(e){return i.f[0]++,i.s[0]++,e.reduce((function(e,t){i.f[1]++;var n=(i.s[1]++,t),r=n.key,a=n.value;if(i.s[2]++,null===a)return i.b[0][0]++,i.s[3]++,e+" "+r;i.b[0][1]++;var s=(i.s[4]++,-1!==a.indexOf("'")),o=(i.s[5]++,s?(i.b[1][0]++,'"'):(i.b[1][1]++,"'"));return i.s[6]++,e+" "+r+"="+o+a+o}),"")}function s(e,t){return i.f[2]++,i.s[7]++,e.map((function(e){if(i.f[3]++,i.s[8]++,"text"===e.type)return i.b[2][0]++,i.s[9]++,e.content;if(i.b[2][1]++,i.s[10]++,"comment"===e.type)return i.b[3][0]++,i.s[11]++,"\x3c!--"+e.content+"--\x3e";i.b[3][1]++;var n=(i.s[12]++,e),o=n.tagName,l=n.attributes,u=n.children,c=(i.s[13]++,(0,r.arrayIncludes)(t.voidTags,o.toLowerCase()));return i.s[14]++,c?(i.b[4][0]++,"<"+o+a(l)+">"):(i.b[4][1]++,"<"+o+a(l)+">"+s(u,t)+"</"+o+">")})).join("")}n.default={toHTML:s}},{"./compat":1}],7:[function(e,t,n){"use strict";var i=function(){var e="/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/tags.js",t="6039b9f65d15797c952509955976acf6930e65a4",n=new(0,function(){}.constructor)("return this")(),i="__coverage__",r={path:"/Users/chrisandrejewski/Desktop/Work/github-repos/himalaya/src/tags.js",statementMap:{0:{start:{line:5,column:29},end:{line:5,column:60}},1:{start:{line:11,column:27},end:{line:14,column:1}},2:{start:{line:23,column:42},end:{line:32,column:1}},3:{start:{line:38,column:24},end:{line:42,column:1}}},fnMap:{},branchMap:{},s:{0:0,1:0,2:0,3:0},f:{},b:{},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},a=n[i]||(n[i]={});return a[e]&&a[e].hash===t?a[e]:(r.hash=t,a[e]=r)}();Object.defineProperty(n,"__esModule",{value:!0});n.childlessTags=(i.s[0]++,["style","script","template"]),n.closingTags=(i.s[1]++,["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"]),n.closingTagAncestorBreakers=(i.s[2]++,{li:["ul","ol","menu"],dt:["dl"],dd:["dl"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table"],td:["table"]}),n.voidTags=(i.s[3]++,["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"])},{}]},{},[3])(3)})),window.LineBreaker=(n=function(){function e(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function t(t,n){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=n,this.destLen=0,this.ltree=new e,this.dtree=new e}var n=new e,i=new e,r=new Uint8Array(30),a=new Uint16Array(30),s=new Uint8Array(30),o=new Uint16Array(30),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=new e,c=new Uint8Array(320);function h(e,t,n,i){var r,a;for(r=0;r<n;++r)e[r]=0;for(r=0;r<30-n;++r)e[r+n]=r/n|0;for(a=i,r=0;r<30;++r)t[r]=a,a+=1<<e[r]}var d=new Uint16Array(16);function p(e,t,n,i){var r,a;for(r=0;r<16;++r)e.table[r]=0;for(r=0;r<i;++r)e.table[t[n+r]]++;for(e.table[0]=0,a=0,r=0;r<16;++r)d[r]=a,a+=e.table[r];for(r=0;r<i;++r)t[n+r]&&(e.trans[d[t[n+r]]++]=r)}function f(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function m(e,t,n){if(!t)return n;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var i=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,i+n}function g(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=0,i=0,r=0,a=e.tag;do{i=2*i+(1&a),a>>>=1,++r,n+=t.table[r],i-=t.table[r]}while(i>=0);return e.tag=a,e.bitcount-=r,t.trans[n+i]}function y(e,t,n){var i,r,a,s,o,h;for(i=m(e,5,257),r=m(e,5,1),a=m(e,4,4),s=0;s<19;++s)c[s]=0;for(s=0;s<a;++s){var d=m(e,3,0);c[l[s]]=d}for(p(u,c,0,19),o=0;o<i+r;){var f=g(e,u);switch(f){case 16:var y=c[o-1];for(h=m(e,2,3);h;--h)c[o++]=y;break;case 17:for(h=m(e,3,3);h;--h)c[o++]=0;break;case 18:for(h=m(e,7,11);h;--h)c[o++]=0;break;default:c[o++]=f}}p(t,c,0,i),p(n,c,i,r)}function v(e,t,n){for(;;){var i,l,u,c,h=g(e,t);if(256===h)return 0;if(h<256)e.dest[e.destLen++]=h;else for(i=m(e,r[h-=257],a[h]),l=g(e,n),c=u=e.destLen-m(e,s[l],o[l]);c<u+i;++c)e.dest[e.destLen++]=e.dest[c]}}function A(e){for(var t,n;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}return function(e,t){var n;for(n=0;n<7;++n)e.table[n]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,n=0;n<24;++n)e.trans[n]=256+n;for(n=0;n<144;++n)e.trans[24+n]=n;for(n=0;n<8;++n)e.trans[168+n]=280+n;for(n=0;n<112;++n)e.trans[176+n]=144+n;for(n=0;n<5;++n)t.table[n]=0;for(t.table[5]=32,n=0;n<32;++n)t.trans[n]=n}(n,i),h(r,a,4,3),h(s,o,2,1),r[28]=0,a[28]=258,function(e,r){var a,s,o=new t(e,r);do{switch(a=f(o),m(o,2,0)){case 0:s=A(o);break;case 1:s=v(o,n,i);break;case 2:y(o,o.ltree,o.dtree),s=v(o,o.ltree,o.dtree);break;default:s=-3}if(0!==s)throw new Error("Data error")}while(!a);return o.destLen<o.dest.length?"function"==typeof o.dest.slice?o.dest.slice(0,o.destLen):o.dest.subarray(0,o.destLen):o.dest}}(),e=18===new Uint8Array(new Uint32Array([305419896]).buffer)[0],t=function(e,t,n){var i=e[t];e[t]=e[n],e[n]=i},i=function(n){e&&function(e){for(var n=e.length,i=0;i<n;i+=4)t(e,i,i+3),t(e,i+1,i+2)}(n)},r=new(function(){function e(t){_classCallCheck(this,e);var r="function"==typeof t.readUInt32BE&&"function"==typeof t.slice;if(r||t instanceof Uint8Array){var a;if(r)this.highStart=t.readUInt32LE(0),this.errorValue=t.readUInt32LE(4),a=t.readUInt32LE(8),t=t.slice(12);else{var s=new DataView(t.buffer);this.highStart=s.getUint32(0,!0),this.errorValue=s.getUint32(4,!0),a=s.getUint32(8,!0),t=t.subarray(12)}t=n(t,new Uint8Array(a)),t=n(t,new Uint8Array(a)),i(t),this.data=new Uint32Array(t.buffer)}else{var o=t;this.data=o.data,this.highStart=o.highStart,this.errorValue=o.errorValue}}return _createClass(e,[{key:"get",value:function(e){var t;return e<0||e>1114111?this.errorValue:e<55296||e>56319&&e<=65535?(t=(this.data[e>>5]<<2)+(31&e),this.data[t]):e<=65535?(t=(this.data[2048+(e-55296>>5)]<<2)+(31&e),this.data[t]):e<this.highStart?(t=this.data[2080+(e>>11)],t=((t=this.data[t+(e>>5&63)])<<2)+(31&e),this.data[t]):this.data[this.data.length-4]}}]),e}())(function(e){for(var t=window.atob(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}("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")),a=[[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,3,4,4,4,4,4,4,4,4,4,4,4],[0,4,4,1,1,4,4,4,4,1,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,4,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[4,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,1],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,1],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,1,0,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,0,0,1,1,1,1,1,1,1,0,0,4,2,4,1,1,1,1,1,0,1,1,1,0],[1,4,4,1,1,1,4,4,4,0,0,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,0,1,4,4,4,0,0,1,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,0,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,4,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,1,1,1,1,1,1,4,2,4,1,1,1,1,1,1,1,1,1,1],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,1,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,1,1,1,1,0,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,1,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,1,0,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,0,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,1,0,0,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,1,1,0],[0,4,4,1,1,1,4,4,4,0,1,0,0,0,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[1,4,4,1,1,1,4,4,4,1,1,1,1,1,0,1,1,1,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0],[0,4,4,1,1,0,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,2,4,0,0,0,0,0,0,0,0,1,0]],s=function(e){switch(e){case 33:return 12;case 39:case 40:case 42:return 12;case 35:return 5;default:return e}},o=function(e){switch(e){case 37:case 38:return 34;case 41:return 22;default:return e}},l=_createClass((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,e),this.position=t,this.required=n})),function(){function e(t){_classCallCheck(this,e),this.string=t,this.pos=0,this.lastPos=0,this.curClass=null,this.nextClass=null,this.LB8a=!1,this.LB21a=!1,this.LB30a=0}return _createClass(e,[{key:"nextCodePoint",value:function(){var e=this.string.charCodeAt(this.pos++),t=this.string.charCodeAt(this.pos);return 55296<=e&&e<=56319&&56320<=t&&t<=57343?(this.pos++,1024*(e-55296)+(t-56320)+65536):e}},{key:"nextCharClass",value:function(){return s(r.get(this.nextCodePoint()))}},{key:"getSimpleBreak",value:function(){switch(this.nextClass){case 41:return!1;case 34:case 37:case 38:return this.curClass=34,!1;case 36:return this.curClass=36,!1}return null}},{key:"getPairTableBreak",value:function(e){var t=!1;switch(a[this.curClass][this.nextClass]){case 0:t=!0;break;case 1:t=41===e;break;case 2:if(!(t=41===e))return t=!1;break;case 3:if(41!==e)return t}return this.LB8a&&(t=!1),!this.LB21a||16!==this.curClass&&17!==this.curClass?this.LB21a=13===this.curClass:(t=!1,this.LB21a=!1),28===this.curClass?(this.LB30a++,2==this.LB30a&&28===this.nextClass&&(t=!0,this.LB30a=0)):this.LB30a=0,this.curClass=this.nextClass,t}},{key:"nextBreak",value:function(){if(null==this.curClass){var e=this.nextCharClass();this.curClass=o(e),this.nextClass=e,this.LB8a=31===e,this.LB30a=0}for(;this.pos<this.string.length;){this.lastPos=this.pos;var t=this.nextClass;if(this.nextClass=this.nextCharClass(),34===this.curClass||36===this.curClass&&37!==this.nextClass)return this.curClass=o(s(this.nextClass)),new l(this.lastPos,!0);var n=this.getSimpleBreak();if(null===n&&(n=this.getPairTableBreak(t)),this.LB8a=31===this.nextClass,n)return new l(this.lastPos)}return this.lastPos<this.string.length?(this.lastPos=this.string.length,new l(this.string.length)):null}}]),e}());var u=function(){function e(){_classCallCheck(this,e),this.ids=[],this.values=[],this.length=0}return _createClass(e,[{key:"clear",value:function(){this.length=0}},{key:"push",value:function(e,t){var n=this.length++;for(this.ids[n]=e,this.values[n]=t;n>0;){var i=n-1>>1,r=this.values[i];if(t>=r)break;this.ids[n]=this.ids[i],this.values[n]=r,n=i}this.ids[n]=e,this.values[n]=t}},{key:"pop",value:function(){if(0!==this.length){var e=this.ids[0];if(this.length--,this.length>0){for(var t=this.ids[0]=this.ids[this.length],n=this.values[0]=this.values[this.length],i=this.length>>1,r=0;r<i;){var a=1+(r<<1),s=a+1,o=this.ids[a],l=this.values[a],u=this.values[s];if(s<this.length&&u<l&&(a=s,o=this.ids[s],l=u),l>=n)break;this.ids[r]=o,this.values[r]=l,r=a}this.ids[r]=t,this.values[r]=n}return e}}},{key:"peek",value:function(){if(0!==this.length)return this.ids[0]}},{key:"peekValue",value:function(){if(0!==this.length)return this.values[0]}}]),e}();function c(){}function h(){}window.FlatQueue=u,function(e){var t="object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&exports,n="object"==("undefined"==typeof module?"undefined":_typeof(module))&&module&&module.exports==t&&module,i="object"==("undefined"==typeof global?"undefined":_typeof(global))&&global;i.global!==i&&i.window!==i||(e=i);var r=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[\x01-\x7F]/g,s=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,o=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,l={"­":"shy","‌":"zwnj","‍":"zwj","‎":"lrm","⁣":"ic","⁢":"it","⁡":"af","‏":"rlm","​":"ZeroWidthSpace","⁠":"NoBreak","̑":"DownBreve","⃛":"tdot","⃜":"DotDot","\t":"Tab","\n":"NewLine"," ":"puncsp"," ":"MediumSpace"," ":"thinsp"," ":"hairsp"," ":"emsp13"," ":"ensp"," ":"emsp14"," ":"emsp"," ":"numsp"," ":"nbsp","  ":"ThickSpace","‾":"oline",_:"lowbar","‐":"dash","–":"ndash","—":"mdash","―":"horbar",",":"comma",";":"semi","⁏":"bsemi",":":"colon","⩴":"Colone","!":"excl","¡":"iexcl","?":"quest","¿":"iquest",".":"period","‥":"nldr","…":"mldr","·":"middot","'":"apos","‘":"lsquo","’":"rsquo","‚":"sbquo","‹":"lsaquo","›":"rsaquo",'"':"quot","“":"ldquo","”":"rdquo","„":"bdquo","«":"laquo","»":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","⌈":"lceil","⌉":"rceil","⌊":"lfloor","⌋":"rfloor","⦅":"lopar","⦆":"ropar","⦋":"lbrke","⦌":"rbrke","⦍":"lbrkslu","⦎":"rbrksld","⦏":"lbrksld","⦐":"rbrkslu","⦑":"langd","⦒":"rangd","⦓":"lparlt","⦔":"rpargt","⦕":"gtlPar","⦖":"ltrPar","⟦":"lobrk","⟧":"robrk","⟨":"lang","⟩":"rang","⟪":"Lang","⟫":"Rang","⟬":"loang","⟭":"roang","❲":"lbbrk","❳":"rbbrk","‖":"Vert","§":"sect","¶":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","‰":"permil","‱":"pertenk","†":"dagger","‡":"Dagger","•":"bull","⁃":"hybull","′":"prime","″":"Prime","‴":"tprime","⁗":"qprime","‵":"bprime","⁁":"caret","`":"grave","´":"acute","˜":"tilde","^":"Hat","¯":"macr","˘":"breve","˙":"dot","¨":"die","˚":"ring","˝":"dblac","¸":"cedil","˛":"ogon","ˆ":"circ","ˇ":"caron","°":"deg","©":"copy","®":"reg","℗":"copysr","℘":"wp","℞":"rx","℧":"mho","℩":"iiota","←":"larr","↚":"nlarr","→":"rarr","↛":"nrarr","↑":"uarr","↓":"darr","↔":"harr","↮":"nharr","↕":"varr","↖":"nwarr","↗":"nearr","↘":"searr","↙":"swarr","↝":"rarrw","↝̸":"nrarrw","↞":"Larr","↟":"Uarr","↠":"Rarr","↡":"Darr","↢":"larrtl","↣":"rarrtl","↤":"mapstoleft","↥":"mapstoup","↦":"map","↧":"mapstodown","↩":"larrhk","↪":"rarrhk","↫":"larrlp","↬":"rarrlp","↭":"harrw","↰":"lsh","↱":"rsh","↲":"ldsh","↳":"rdsh","↵":"crarr","↶":"cularr","↷":"curarr","↺":"olarr","↻":"orarr","↼":"lharu","↽":"lhard","↾":"uharr","↿":"uharl","⇀":"rharu","⇁":"rhard","⇂":"dharr","⇃":"dharl","⇄":"rlarr","⇅":"udarr","⇆":"lrarr","⇇":"llarr","⇈":"uuarr","⇉":"rrarr","⇊":"ddarr","⇋":"lrhar","⇌":"rlhar","⇐":"lArr","⇍":"nlArr","⇑":"uArr","⇒":"rArr","⇏":"nrArr","⇓":"dArr","⇔":"iff","⇎":"nhArr","⇕":"vArr","⇖":"nwArr","⇗":"neArr","⇘":"seArr","⇙":"swArr","⇚":"lAarr","⇛":"rAarr","⇝":"zigrarr","⇤":"larrb","⇥":"rarrb","⇵":"duarr","⇽":"loarr","⇾":"roarr","⇿":"hoarr","∀":"forall","∁":"comp","∂":"part","∂̸":"npart","∃":"exist","∄":"nexist","∅":"empty","∇":"Del","∈":"in","∉":"notin","∋":"ni","∌":"notni","϶":"bepsi","∏":"prod","∐":"coprod","∑":"sum","+":"plus","±":"pm","÷":"div","×":"times","<":"lt","≮":"nlt","<⃒":"nvlt","=":"equals","≠":"ne","=⃥":"bne","⩵":"Equal",">":"gt","≯":"ngt",">⃒":"nvgt","¬":"not","|":"vert","¦":"brvbar","−":"minus","∓":"mp","∔":"plusdo","⁄":"frasl","∖":"setmn","∗":"lowast","∘":"compfn","√":"Sqrt","∝":"prop","∞":"infin","∟":"angrt","∠":"ang","∠⃒":"nang","∡":"angmsd","∢":"angsph","∣":"mid","∤":"nmid","∥":"par","∦":"npar","∧":"and","∨":"or","∩":"cap","∩︀":"caps","∪":"cup","∪︀":"cups","∫":"int","∬":"Int","∭":"tint","⨌":"qint","∮":"oint","∯":"Conint","∰":"Cconint","∱":"cwint","∲":"cwconint","∳":"awconint","∴":"there4","∵":"becaus","∶":"ratio","∷":"Colon","∸":"minusd","∺":"mDDot","∻":"homtht","∼":"sim","≁":"nsim","∼⃒":"nvsim","∽":"bsim","∽̱":"race","∾":"ac","∾̳":"acE","∿":"acd","≀":"wr","≂":"esim","≂̸":"nesim","≃":"sime","≄":"nsime","≅":"cong","≇":"ncong","≆":"simne","≈":"ap","≉":"nap","≊":"ape","≋":"apid","≋̸":"napid","≌":"bcong","≍":"CupCap","≭":"NotCupCap","≍⃒":"nvap","≎":"bump","≎̸":"nbump","≏":"bumpe","≏̸":"nbumpe","≐":"doteq","≐̸":"nedot","≑":"eDot","≒":"efDot","≓":"erDot","≔":"colone","≕":"ecolon","≖":"ecir","≗":"cire","≙":"wedgeq","≚":"veeeq","≜":"trie","≟":"equest","≡":"equiv","≢":"nequiv","≡⃥":"bnequiv","≤":"le","≰":"nle","≤⃒":"nvle","≥":"ge","≱":"nge","≥⃒":"nvge","≦":"lE","≦̸":"nlE","≧":"gE","≧̸":"ngE","≨︀":"lvnE","≨":"lnE","≩":"gnE","≩︀":"gvnE","≪":"ll","≪̸":"nLtv","≪⃒":"nLt","≫":"gg","≫̸":"nGtv","≫⃒":"nGt","≬":"twixt","≲":"lsim","≴":"nlsim","≳":"gsim","≵":"ngsim","≶":"lg","≸":"ntlg","≷":"gl","≹":"ntgl","≺":"pr","⊀":"npr","≻":"sc","⊁":"nsc","≼":"prcue","⋠":"nprcue","≽":"sccue","⋡":"nsccue","≾":"prsim","≿":"scsim","≿̸":"NotSucceedsTilde","⊂":"sub","⊄":"nsub","⊂⃒":"vnsub","⊃":"sup","⊅":"nsup","⊃⃒":"vnsup","⊆":"sube","⊈":"nsube","⊇":"supe","⊉":"nsupe","⊊︀":"vsubne","⊊":"subne","⊋︀":"vsupne","⊋":"supne","⊍":"cupdot","⊎":"uplus","⊏":"sqsub","⊏̸":"NotSquareSubset","⊐":"sqsup","⊐̸":"NotSquareSuperset","⊑":"sqsube","⋢":"nsqsube","⊒":"sqsupe","⋣":"nsqsupe","⊓":"sqcap","⊓︀":"sqcaps","⊔":"sqcup","⊔︀":"sqcups","⊕":"oplus","⊖":"ominus","⊗":"otimes","⊘":"osol","⊙":"odot","⊚":"ocir","⊛":"oast","⊝":"odash","⊞":"plusb","⊟":"minusb","⊠":"timesb","⊡":"sdotb","⊢":"vdash","⊬":"nvdash","⊣":"dashv","⊤":"top","⊥":"bot","⊧":"models","⊨":"vDash","⊭":"nvDash","⊩":"Vdash","⊮":"nVdash","⊪":"Vvdash","⊫":"VDash","⊯":"nVDash","⊰":"prurel","⊲":"vltri","⋪":"nltri","⊳":"vrtri","⋫":"nrtri","⊴":"ltrie","⋬":"nltrie","⊴⃒":"nvltrie","⊵":"rtrie","⋭":"nrtrie","⊵⃒":"nvrtrie","⊶":"origof","⊷":"imof","⊸":"mumap","⊹":"hercon","⊺":"intcal","⊻":"veebar","⊽":"barvee","⊾":"angrtvb","⊿":"lrtri","⋀":"Wedge","⋁":"Vee","⋂":"xcap","⋃":"xcup","⋄":"diam","⋅":"sdot","⋆":"Star","⋇":"divonx","⋈":"bowtie","⋉":"ltimes","⋊":"rtimes","⋋":"lthree","⋌":"rthree","⋍":"bsime","⋎":"cuvee","⋏":"cuwed","⋐":"Sub","⋑":"Sup","⋒":"Cap","⋓":"Cup","⋔":"fork","⋕":"epar","⋖":"ltdot","⋗":"gtdot","⋘":"Ll","⋘̸":"nLl","⋙":"Gg","⋙̸":"nGg","⋚︀":"lesg","⋚":"leg","⋛":"gel","⋛︀":"gesl","⋞":"cuepr","⋟":"cuesc","⋦":"lnsim","⋧":"gnsim","⋨":"prnsim","⋩":"scnsim","⋮":"vellip","⋯":"ctdot","⋰":"utdot","⋱":"dtdot","⋲":"disin","⋳":"isinsv","⋴":"isins","⋵":"isindot","⋵̸":"notindot","⋶":"notinvc","⋷":"notinvb","⋹":"isinE","⋹̸":"notinE","⋺":"nisd","⋻":"xnis","⋼":"nis","⋽":"notnivc","⋾":"notnivb","⌅":"barwed","⌆":"Barwed","⌌":"drcrop","⌍":"dlcrop","⌎":"urcrop","⌏":"ulcrop","⌐":"bnot","⌒":"profline","⌓":"profsurf","⌕":"telrec","⌖":"target","⌜":"ulcorn","⌝":"urcorn","⌞":"dlcorn","⌟":"drcorn","⌢":"frown","⌣":"smile","⌭":"cylcty","⌮":"profalar","⌶":"topbot","⌽":"ovbar","⌿":"solbar","⍼":"angzarr","⎰":"lmoust","⎱":"rmoust","⎴":"tbrk","⎵":"bbrk","⎶":"bbrktbrk","⏜":"OverParenthesis","⏝":"UnderParenthesis","⏞":"OverBrace","⏟":"UnderBrace","⏢":"trpezium","⏧":"elinters","␣":"blank","─":"boxh","│":"boxv","┌":"boxdr","┐":"boxdl","└":"boxur","┘":"boxul","├":"boxvr","┤":"boxvl","┬":"boxhd","┴":"boxhu","┼":"boxvh","═":"boxH","║":"boxV","╒":"boxdR","╓":"boxDr","╔":"boxDR","╕":"boxdL","╖":"boxDl","╗":"boxDL","╘":"boxuR","╙":"boxUr","╚":"boxUR","╛":"boxuL","╜":"boxUl","╝":"boxUL","╞":"boxvR","╟":"boxVr","╠":"boxVR","╡":"boxvL","╢":"boxVl","╣":"boxVL","╤":"boxHd","╥":"boxhD","╦":"boxHD","╧":"boxHu","╨":"boxhU","╩":"boxHU","╪":"boxvH","╫":"boxVh","╬":"boxVH","▀":"uhblk","▄":"lhblk","█":"block","░":"blk14","▒":"blk12","▓":"blk34","□":"squ","▪":"squf","▫":"EmptyVerySmallSquare","▭":"rect","▮":"marker","▱":"fltns","△":"xutri","▴":"utrif","▵":"utri","▸":"rtrif","▹":"rtri","▽":"xdtri","▾":"dtrif","▿":"dtri","◂":"ltrif","◃":"ltri","◊":"loz","○":"cir","◬":"tridot","◯":"xcirc","◸":"ultri","◹":"urtri","◺":"lltri","◻":"EmptySmallSquare","◼":"FilledSmallSquare","★":"starf","☆":"star","☎":"phone","♀":"female","♂":"male","♠":"spades","♣":"clubs","♥":"hearts","♦":"diams","♪":"sung","✓":"check","✗":"cross","✠":"malt","✶":"sext","❘":"VerticalSeparator","⟈":"bsolhsub","⟉":"suphsol","⟵":"xlarr","⟶":"xrarr","⟷":"xharr","⟸":"xlArr","⟹":"xrArr","⟺":"xhArr","⟼":"xmap","⟿":"dzigrarr","⤂":"nvlArr","⤃":"nvrArr","⤄":"nvHarr","⤅":"Map","⤌":"lbarr","⤍":"rbarr","⤎":"lBarr","⤏":"rBarr","⤐":"RBarr","⤑":"DDotrahd","⤒":"UpArrowBar","⤓":"DownArrowBar","⤖":"Rarrtl","⤙":"latail","⤚":"ratail","⤛":"lAtail","⤜":"rAtail","⤝":"larrfs","⤞":"rarrfs","⤟":"larrbfs","⤠":"rarrbfs","⤣":"nwarhk","⤤":"nearhk","⤥":"searhk","⤦":"swarhk","⤧":"nwnear","⤨":"toea","⤩":"tosa","⤪":"swnwar","⤳":"rarrc","⤳̸":"nrarrc","⤵":"cudarrr","⤶":"ldca","⤷":"rdca","⤸":"cudarrl","⤹":"larrpl","⤼":"curarrm","⤽":"cularrp","⥅":"rarrpl","⥈":"harrcir","⥉":"Uarrocir","⥊":"lurdshar","⥋":"ldrushar","⥎":"LeftRightVector","⥏":"RightUpDownVector","⥐":"DownLeftRightVector","⥑":"LeftUpDownVector","⥒":"LeftVectorBar","⥓":"RightVectorBar","⥔":"RightUpVectorBar","⥕":"RightDownVectorBar","⥖":"DownLeftVectorBar","⥗":"DownRightVectorBar","⥘":"LeftUpVectorBar","⥙":"LeftDownVectorBar","⥚":"LeftTeeVector","⥛":"RightTeeVector","⥜":"RightUpTeeVector","⥝":"RightDownTeeVector","⥞":"DownLeftTeeVector","⥟":"DownRightTeeVector","⥠":"LeftUpTeeVector","⥡":"LeftDownTeeVector","⥢":"lHar","⥣":"uHar","⥤":"rHar","⥥":"dHar","⥦":"luruhar","⥧":"ldrdhar","⥨":"ruluhar","⥩":"rdldhar","⥪":"lharul","⥫":"llhard","⥬":"rharul","⥭":"lrhard","⥮":"udhar","⥯":"duhar","⥰":"RoundImplies","⥱":"erarr","⥲":"simrarr","⥳":"larrsim","⥴":"rarrsim","⥵":"rarrap","⥶":"ltlarr","⥸":"gtrarr","⥹":"subrarr","⥻":"suplarr","⥼":"lfisht","⥽":"rfisht","⥾":"ufisht","⥿":"dfisht","⦚":"vzigzag","⦜":"vangrt","⦝":"angrtvbd","⦤":"ange","⦥":"range","⦦":"dwangle","⦧":"uwangle","⦨":"angmsdaa","⦩":"angmsdab","⦪":"angmsdac","⦫":"angmsdad","⦬":"angmsdae","⦭":"angmsdaf","⦮":"angmsdag","⦯":"angmsdah","⦰":"bemptyv","⦱":"demptyv","⦲":"cemptyv","⦳":"raemptyv","⦴":"laemptyv","⦵":"ohbar","⦶":"omid","⦷":"opar","⦹":"operp","⦻":"olcross","⦼":"odsold","⦾":"olcir","⦿":"ofcir","⧀":"olt","⧁":"ogt","⧂":"cirscir","⧃":"cirE","⧄":"solb","⧅":"bsolb","⧉":"boxbox","⧍":"trisb","⧎":"rtriltri","⧏":"LeftTriangleBar","⧏̸":"NotLeftTriangleBar","⧐":"RightTriangleBar","⧐̸":"NotRightTriangleBar","⧜":"iinfin","⧝":"infintie","⧞":"nvinfin","⧣":"eparsl","⧤":"smeparsl","⧥":"eqvparsl","⧫":"lozf","⧴":"RuleDelayed","⧶":"dsol","⨀":"xodot","⨁":"xoplus","⨂":"xotime","⨄":"xuplus","⨆":"xsqcup","⨍":"fpartint","⨐":"cirfnint","⨑":"awint","⨒":"rppolint","⨓":"scpolint","⨔":"npolint","⨕":"pointint","⨖":"quatint","⨗":"intlarhk","⨢":"pluscir","⨣":"plusacir","⨤":"simplus","⨥":"plusdu","⨦":"plussim","⨧":"plustwo","⨩":"mcomma","⨪":"minusdu","⨭":"loplus","⨮":"roplus","⨯":"Cross","⨰":"timesd","⨱":"timesbar","⨳":"smashp","⨴":"lotimes","⨵":"rotimes","⨶":"otimesas","⨷":"Otimes","⨸":"odiv","⨹":"triplus","⨺":"triminus","⨻":"tritime","⨼":"iprod","⨿":"amalg","⩀":"capdot","⩂":"ncup","⩃":"ncap","⩄":"capand","⩅":"cupor","⩆":"cupcap","⩇":"capcup","⩈":"cupbrcap","⩉":"capbrcup","⩊":"cupcup","⩋":"capcap","⩌":"ccups","⩍":"ccaps","⩐":"ccupssm","⩓":"And","⩔":"Or","⩕":"andand","⩖":"oror","⩗":"orslope","⩘":"andslope","⩚":"andv","⩛":"orv","⩜":"andd","⩝":"ord","⩟":"wedbar","⩦":"sdote","⩪":"simdot","⩭":"congdot","⩭̸":"ncongdot","⩮":"easter","⩯":"apacir","⩰":"apE","⩰̸":"napE","⩱":"eplus","⩲":"pluse","⩳":"Esim","⩷":"eDDot","⩸":"equivDD","⩹":"ltcir","⩺":"gtcir","⩻":"ltquest","⩼":"gtquest","⩽":"les","⩽̸":"nles","⩾":"ges","⩾̸":"nges","⩿":"lesdot","⪀":"gesdot","⪁":"lesdoto","⪂":"gesdoto","⪃":"lesdotor","⪄":"gesdotol","⪅":"lap","⪆":"gap","⪇":"lne","⪈":"gne","⪉":"lnap","⪊":"gnap","⪋":"lEg","⪌":"gEl","⪍":"lsime","⪎":"gsime","⪏":"lsimg","⪐":"gsiml","⪑":"lgE","⪒":"glE","⪓":"lesges","⪔":"gesles","⪕":"els","⪖":"egs","⪗":"elsdot","⪘":"egsdot","⪙":"el","⪚":"eg","⪝":"siml","⪞":"simg","⪟":"simlE","⪠":"simgE","⪡":"LessLess","⪡̸":"NotNestedLessLess","⪢":"GreaterGreater","⪢̸":"NotNestedGreaterGreater","⪤":"glj","⪥":"gla","⪦":"ltcc","⪧":"gtcc","⪨":"lescc","⪩":"gescc","⪪":"smt","⪫":"lat","⪬":"smte","⪬︀":"smtes","⪭":"late","⪭︀":"lates","⪮":"bumpE","⪯":"pre","⪯̸":"npre","⪰":"sce","⪰̸":"nsce","⪳":"prE","⪴":"scE","⪵":"prnE","⪶":"scnE","⪷":"prap","⪸":"scap","⪹":"prnap","⪺":"scnap","⪻":"Pr","⪼":"Sc","⪽":"subdot","⪾":"supdot","⪿":"subplus","⫀":"supplus","⫁":"submult","⫂":"supmult","⫃":"subedot","⫄":"supedot","⫅":"subE","⫅̸":"nsubE","⫆":"supE","⫆̸":"nsupE","⫇":"subsim","⫈":"supsim","⫋︀":"vsubnE","⫋":"subnE","⫌︀":"vsupnE","⫌":"supnE","⫏":"csub","⫐":"csup","⫑":"csube","⫒":"csupe","⫓":"subsup","⫔":"supsub","⫕":"subsub","⫖":"supsup","⫗":"suphsub","⫘":"supdsub","⫙":"forkv","⫚":"topfork","⫛":"mlcp","⫤":"Dashv","⫦":"Vdashl","⫧":"Barv","⫨":"vBar","⫩":"vBarv","⫫":"Vbar","⫬":"Not","⫭":"bNot","⫮":"rnmid","⫯":"cirmid","⫰":"midcir","⫱":"topcir","⫲":"nhpar","⫳":"parsim","⫽":"parsl","⫽⃥":"nparsl","♭":"flat","♮":"natur","♯":"sharp","¤":"curren","¢":"cent",$:"dollar","£":"pound","¥":"yen","€":"euro","¹":"sup1","½":"half","⅓":"frac13","¼":"frac14","⅕":"frac15","⅙":"frac16","⅛":"frac18","²":"sup2","⅔":"frac23","⅖":"frac25","³":"sup3","¾":"frac34","⅗":"frac35","⅜":"frac38","⅘":"frac45","⅚":"frac56","⅝":"frac58","⅞":"frac78","𝒶":"ascr","𝕒":"aopf","𝔞":"afr","𝔸":"Aopf","𝔄":"Afr","𝒜":"Ascr","ª":"ordf","á":"aacute","Á":"Aacute","à":"agrave","À":"Agrave","ă":"abreve","Ă":"Abreve","â":"acirc","Â":"Acirc","å":"aring","Å":"angst","ä":"auml","Ä":"Auml","ã":"atilde","Ã":"Atilde","ą":"aogon","Ą":"Aogon","ā":"amacr","Ā":"Amacr","æ":"aelig","Æ":"AElig","𝒷":"bscr","𝕓":"bopf","𝔟":"bfr","𝔹":"Bopf","ℬ":"Bscr","𝔅":"Bfr","𝔠":"cfr","𝒸":"cscr","𝕔":"copf","ℭ":"Cfr","𝒞":"Cscr","ℂ":"Copf","ć":"cacute","Ć":"Cacute","ĉ":"ccirc","Ĉ":"Ccirc","č":"ccaron","Č":"Ccaron","ċ":"cdot","Ċ":"Cdot","ç":"ccedil","Ç":"Ccedil","℅":"incare","𝔡":"dfr","ⅆ":"dd","𝕕":"dopf","𝒹":"dscr","𝒟":"Dscr","𝔇":"Dfr","ⅅ":"DD","𝔻":"Dopf","ď":"dcaron","Ď":"Dcaron","đ":"dstrok","Đ":"Dstrok","ð":"eth","Ð":"ETH","ⅇ":"ee","ℯ":"escr","𝔢":"efr","𝕖":"eopf","ℰ":"Escr","𝔈":"Efr","𝔼":"Eopf","é":"eacute","É":"Eacute","è":"egrave","È":"Egrave","ê":"ecirc","Ê":"Ecirc","ě":"ecaron","Ě":"Ecaron","ë":"euml","Ë":"Euml","ė":"edot","Ė":"Edot","ę":"eogon","Ę":"Eogon","ē":"emacr","Ē":"Emacr","𝔣":"ffr","𝕗":"fopf","𝒻":"fscr","𝔉":"Ffr","𝔽":"Fopf","ℱ":"Fscr","ﬀ":"fflig","ﬃ":"ffilig","ﬄ":"ffllig","ﬁ":"filig",fj:"fjlig","ﬂ":"fllig","ƒ":"fnof","ℊ":"gscr","𝕘":"gopf","𝔤":"gfr","𝒢":"Gscr","𝔾":"Gopf","𝔊":"Gfr","ǵ":"gacute","ğ":"gbreve","Ğ":"Gbreve","ĝ":"gcirc","Ĝ":"Gcirc","ġ":"gdot","Ġ":"Gdot","Ģ":"Gcedil","𝔥":"hfr","ℎ":"planckh","𝒽":"hscr","𝕙":"hopf","ℋ":"Hscr","ℌ":"Hfr","ℍ":"Hopf","ĥ":"hcirc","Ĥ":"Hcirc","ℏ":"hbar","ħ":"hstrok","Ħ":"Hstrok","𝕚":"iopf","𝔦":"ifr","𝒾":"iscr","ⅈ":"ii","𝕀":"Iopf","ℐ":"Iscr","ℑ":"Im","í":"iacute","Í":"Iacute","ì":"igrave","Ì":"Igrave","î":"icirc","Î":"Icirc","ï":"iuml","Ï":"Iuml","ĩ":"itilde","Ĩ":"Itilde","İ":"Idot","į":"iogon","Į":"Iogon","ī":"imacr","Ī":"Imacr","ĳ":"ijlig","Ĳ":"IJlig","ı":"imath","𝒿":"jscr","𝕛":"jopf","𝔧":"jfr","𝒥":"Jscr","𝔍":"Jfr","𝕁":"Jopf","ĵ":"jcirc","Ĵ":"Jcirc","ȷ":"jmath","𝕜":"kopf","𝓀":"kscr","𝔨":"kfr","𝒦":"Kscr","𝕂":"Kopf","𝔎":"Kfr","ķ":"kcedil","Ķ":"Kcedil","𝔩":"lfr","𝓁":"lscr","ℓ":"ell","𝕝":"lopf","ℒ":"Lscr","𝔏":"Lfr","𝕃":"Lopf","ĺ":"lacute","Ĺ":"Lacute","ľ":"lcaron","Ľ":"Lcaron","ļ":"lcedil","Ļ":"Lcedil","ł":"lstrok","Ł":"Lstrok","ŀ":"lmidot","Ŀ":"Lmidot","𝔪":"mfr","𝕞":"mopf","𝓂":"mscr","𝔐":"Mfr","𝕄":"Mopf","ℳ":"Mscr","𝔫":"nfr","𝕟":"nopf","𝓃":"nscr","ℕ":"Nopf","𝒩":"Nscr","𝔑":"Nfr","ń":"nacute","Ń":"Nacute","ň":"ncaron","Ň":"Ncaron","ñ":"ntilde","Ñ":"Ntilde","ņ":"ncedil","Ņ":"Ncedil","№":"numero","ŋ":"eng","Ŋ":"ENG","𝕠":"oopf","𝔬":"ofr","ℴ":"oscr","𝒪":"Oscr","𝔒":"Ofr","𝕆":"Oopf","º":"ordm","ó":"oacute","Ó":"Oacute","ò":"ograve","Ò":"Ograve","ô":"ocirc","Ô":"Ocirc","ö":"ouml","Ö":"Ouml","ő":"odblac","Ő":"Odblac","õ":"otilde","Õ":"Otilde","ø":"oslash","Ø":"Oslash","ō":"omacr","Ō":"Omacr","œ":"oelig","Œ":"OElig","𝔭":"pfr","𝓅":"pscr","𝕡":"popf","ℙ":"Popf","𝔓":"Pfr","𝒫":"Pscr","𝕢":"qopf","𝔮":"qfr","𝓆":"qscr","𝒬":"Qscr","𝔔":"Qfr","ℚ":"Qopf","ĸ":"kgreen","𝔯":"rfr","𝕣":"ropf","𝓇":"rscr","ℛ":"Rscr","ℜ":"Re","ℝ":"Ropf","ŕ":"racute","Ŕ":"Racute","ř":"rcaron","Ř":"Rcaron","ŗ":"rcedil","Ŗ":"Rcedil","𝕤":"sopf","𝓈":"sscr","𝔰":"sfr","𝕊":"Sopf","𝔖":"Sfr","𝒮":"Sscr","Ⓢ":"oS","ś":"sacute","Ś":"Sacute","ŝ":"scirc","Ŝ":"Scirc","š":"scaron","Š":"Scaron","ş":"scedil","Ş":"Scedil","ß":"szlig","𝔱":"tfr","𝓉":"tscr","𝕥":"topf","𝒯":"Tscr","𝔗":"Tfr","𝕋":"Topf","ť":"tcaron","Ť":"Tcaron","ţ":"tcedil","Ţ":"Tcedil","™":"trade","ŧ":"tstrok","Ŧ":"Tstrok","𝓊":"uscr","𝕦":"uopf","𝔲":"ufr","𝕌":"Uopf","𝔘":"Ufr","𝒰":"Uscr","ú":"uacute","Ú":"Uacute","ù":"ugrave","Ù":"Ugrave","ŭ":"ubreve","Ŭ":"Ubreve","û":"ucirc","Û":"Ucirc","ů":"uring","Ů":"Uring","ü":"uuml","Ü":"Uuml","ű":"udblac","Ű":"Udblac","ũ":"utilde","Ũ":"Utilde","ų":"uogon","Ų":"Uogon","ū":"umacr","Ū":"Umacr","𝔳":"vfr","𝕧":"vopf","𝓋":"vscr","𝔙":"Vfr","𝕍":"Vopf","𝒱":"Vscr","𝕨":"wopf","𝓌":"wscr","𝔴":"wfr","𝒲":"Wscr","𝕎":"Wopf","𝔚":"Wfr","ŵ":"wcirc","Ŵ":"Wcirc","𝔵":"xfr","𝓍":"xscr","𝕩":"xopf","𝕏":"Xopf","𝔛":"Xfr","𝒳":"Xscr","𝔶":"yfr","𝓎":"yscr","𝕪":"yopf","𝒴":"Yscr","𝔜":"Yfr","𝕐":"Yopf","ý":"yacute","Ý":"Yacute","ŷ":"ycirc","Ŷ":"Ycirc","ÿ":"yuml","Ÿ":"Yuml","𝓏":"zscr","𝔷":"zfr","𝕫":"zopf","ℨ":"Zfr","ℤ":"Zopf","𝒵":"Zscr","ź":"zacute","Ź":"Zacute","ž":"zcaron","Ž":"Zcaron","ż":"zdot","Ż":"Zdot","Ƶ":"imped","þ":"thorn","Þ":"THORN","ŉ":"napos","α":"alpha","Α":"Alpha","β":"beta","Β":"Beta","γ":"gamma","Γ":"Gamma","δ":"delta","Δ":"Delta","ε":"epsi","ϵ":"epsiv","Ε":"Epsilon","ϝ":"gammad","Ϝ":"Gammad","ζ":"zeta","Ζ":"Zeta","η":"eta","Η":"Eta","θ":"theta","ϑ":"thetav","Θ":"Theta","ι":"iota","Ι":"Iota","κ":"kappa","ϰ":"kappav","Κ":"Kappa","λ":"lambda","Λ":"Lambda","μ":"mu","µ":"micro","Μ":"Mu","ν":"nu","Ν":"Nu","ξ":"xi","Ξ":"Xi","ο":"omicron","Ο":"Omicron","π":"pi","ϖ":"piv","Π":"Pi","ρ":"rho","ϱ":"rhov","Ρ":"Rho","σ":"sigma","Σ":"Sigma","ς":"sigmaf","τ":"tau","Τ":"Tau","υ":"upsi","Υ":"Upsilon","ϒ":"Upsi","φ":"phi","ϕ":"phiv","Φ":"Phi","χ":"chi","Χ":"Chi","ψ":"psi","Ψ":"Psi","ω":"omega","Ω":"ohm","а":"acy","А":"Acy","б":"bcy","Б":"Bcy","в":"vcy","В":"Vcy","г":"gcy","Г":"Gcy","ѓ":"gjcy","Ѓ":"GJcy","д":"dcy","Д":"Dcy","ђ":"djcy","Ђ":"DJcy","е":"iecy","Е":"IEcy","ё":"iocy","Ё":"IOcy","є":"jukcy","Є":"Jukcy","ж":"zhcy","Ж":"ZHcy","з":"zcy","З":"Zcy","ѕ":"dscy","Ѕ":"DScy","и":"icy","И":"Icy","і":"iukcy","І":"Iukcy","ї":"yicy","Ї":"YIcy","й":"jcy","Й":"Jcy","ј":"jsercy","Ј":"Jsercy","к":"kcy","К":"Kcy","ќ":"kjcy","Ќ":"KJcy","л":"lcy","Л":"Lcy","љ":"ljcy","Љ":"LJcy","м":"mcy","М":"Mcy","н":"ncy","Н":"Ncy","њ":"njcy","Њ":"NJcy","о":"ocy","О":"Ocy","п":"pcy","П":"Pcy","р":"rcy","Р":"Rcy","с":"scy","С":"Scy","т":"tcy","Т":"Tcy","ћ":"tshcy","Ћ":"TSHcy","у":"ucy","У":"Ucy","ў":"ubrcy","Ў":"Ubrcy","ф":"fcy","Ф":"Fcy","х":"khcy","Х":"KHcy","ц":"tscy","Ц":"TScy","ч":"chcy","Ч":"CHcy","џ":"dzcy","Џ":"DZcy","ш":"shcy","Ш":"SHcy","щ":"shchcy","Щ":"SHCHcy","ъ":"hardcy","Ъ":"HARDcy","ы":"ycy","Ы":"Ycy","ь":"softcy","Ь":"SOFTcy","э":"ecy","Э":"Ecy","ю":"yucy","Ю":"YUcy","я":"yacy","Я":"YAcy","ℵ":"aleph","ℶ":"beth","ℷ":"gimel","ℸ":"daleth"},u=/["&'<>`]/g,c={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},h=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,d=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)([=a-zA-Z0-9])?/g,f={aacute:"á",Aacute:"Á",abreve:"ă",Abreve:"Ă",ac:"∾",acd:"∿",acE:"∾̳",acirc:"â",Acirc:"Â",acute:"´",acy:"а",Acy:"А",aelig:"æ",AElig:"Æ",af:"⁡",afr:"𝔞",Afr:"𝔄",agrave:"à",Agrave:"À",alefsym:"ℵ",aleph:"ℵ",alpha:"α",Alpha:"Α",amacr:"ā",Amacr:"Ā",amalg:"⨿",amp:"&",AMP:"&",and:"∧",And:"⩓",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",Aogon:"Ą",aopf:"𝕒",Aopf:"𝔸",ap:"≈",apacir:"⩯",ape:"≊",apE:"⩰",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",aring:"å",Aring:"Å",ascr:"𝒶",Ascr:"𝒜",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",Bcy:"Б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",beta:"β",Beta:"Β",beth:"ℶ",between:"≬",bfr:"𝔟",Bfr:"𝔅",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bNot:"⫭",bopf:"𝕓",Bopf:"𝔹",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxhD:"╥",boxHd:"╤",boxHD:"╦",boxhu:"┴",boxhU:"╨",boxHu:"╧",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpe:"≏",bumpE:"⪮",bumpeq:"≏",Bumpeq:"≎",cacute:"ć",Cacute:"Ć",cap:"∩",Cap:"⋒",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",ccaron:"č",Ccaron:"Č",ccedil:"ç",Ccedil:"Ç",ccirc:"ĉ",Ccirc:"Ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",Cdot:"Ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",chcy:"ч",CHcy:"Ч",check:"✓",checkmark:"✓",chi:"χ",Chi:"Χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cire:"≗",cirE:"⧃",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",colone:"≔",Colone:"⩴",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",cscr:"𝒸",Cscr:"𝒞",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",Cup:"⋓",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",dArr:"⇓",Darr:"↡",dash:"‐",dashv:"⊣",Dashv:"⫤",dbkarow:"⤏",dblac:"˝",dcaron:"ď",Dcaron:"Ď",dcy:"д",Dcy:"Д",dd:"ⅆ",DD:"ⅅ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",delta:"δ",Delta:"Δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",Dfr:"𝔇",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",DJcy:"Ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",Dopf:"𝔻",dot:"˙",Dot:"¨",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",downarrow:"↓",Downarrow:"⇓",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",Dscr:"𝒟",dscy:"ѕ",DScy:"Ѕ",dsol:"⧶",dstrok:"đ",Dstrok:"Đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",DZcy:"Џ",dzigrarr:"⟿",eacute:"é",Eacute:"É",easter:"⩮",ecaron:"ě",Ecaron:"Ě",ecir:"≖",ecirc:"ê",Ecirc:"Ê",ecolon:"≕",ecy:"э",Ecy:"Э",eDDot:"⩷",edot:"ė",eDot:"≑",Edot:"Ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",Efr:"𝔈",eg:"⪚",egrave:"è",Egrave:"È",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",Emacr:"Ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",eng:"ŋ",ENG:"Ŋ",ensp:" ",eogon:"ę",Eogon:"Ę",eopf:"𝕖",Eopf:"𝔼",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",Epsilon:"Ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",esim:"≂",Esim:"⩳",eta:"η",Eta:"Η",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",fcy:"ф",Fcy:"Ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",Ffr:"𝔉",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",Fopf:"𝔽",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",gamma:"γ",Gamma:"Γ",gammad:"ϝ",Gammad:"Ϝ",gap:"⪆",gbreve:"ğ",Gbreve:"Ğ",Gcedil:"Ģ",gcirc:"ĝ",Gcirc:"Ĝ",gcy:"г",Gcy:"Г",gdot:"ġ",Gdot:"Ġ",ge:"≥",gE:"≧",gel:"⋛",gEl:"⪌",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",Gfr:"𝔊",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",GJcy:"Ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",Gopf:"𝔾",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",gscr:"ℊ",Gscr:"𝒢",gsim:"≳",gsime:"⪎",gsiml:"⪐",gt:">",Gt:"≫",GT:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",HARDcy:"Ъ",harr:"↔",hArr:"⇔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",hcirc:"ĥ",Hcirc:"Ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",hstrok:"ħ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",iacute:"í",Iacute:"Í",ic:"⁣",icirc:"î",Icirc:"Î",icy:"и",Icy:"И",Idot:"İ",iecy:"е",IEcy:"Е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",igrave:"ì",Igrave:"Ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",IJlig:"Ĳ",Im:"ℑ",imacr:"ī",Imacr:"Ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",Int:"∬",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",iocy:"ё",IOcy:"Ё",iogon:"į",Iogon:"Į",iopf:"𝕚",Iopf:"𝕀",iota:"ι",Iota:"Ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",Itilde:"Ĩ",iukcy:"і",Iukcy:"І",iuml:"ï",Iuml:"Ï",jcirc:"ĵ",Jcirc:"Ĵ",jcy:"й",Jcy:"Й",jfr:"𝔧",Jfr:"𝔍",jmath:"ȷ",jopf:"𝕛",Jopf:"𝕁",jscr:"𝒿",Jscr:"𝒥",jsercy:"ј",Jsercy:"Ј",jukcy:"є",Jukcy:"Є",kappa:"κ",Kappa:"Κ",kappav:"ϰ",kcedil:"ķ",Kcedil:"Ķ",kcy:"к",Kcy:"К",kfr:"𝔨",Kfr:"𝔎",kgreen:"ĸ",khcy:"х",KHcy:"Х",kjcy:"ќ",KJcy:"Ќ",kopf:"𝕜",Kopf:"𝕂",kscr:"𝓀",Kscr:"𝒦",lAarr:"⇚",lacute:"ĺ",Lacute:"Ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",Lambda:"Λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larr:"←",lArr:"⇐",Larr:"↞",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",lAtail:"⤛",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",Lcaron:"Ľ",lcedil:"ļ",Lcedil:"Ļ",lceil:"⌈",lcub:"{",lcy:"л",Lcy:"Л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",leftarrow:"←",Leftarrow:"⇐",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",Leftrightarrow:"⇔",LeftRightArrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",leg:"⋚",lEg:"⪋",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",Lfr:"𝔏",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",LJcy:"Љ",ll:"≪",Ll:"⋘",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",lmidot:"ŀ",Lmidot:"Ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",Longleftarrow:"⟸",LongLeftArrow:"⟵",longleftrightarrow:"⟷",Longleftrightarrow:"⟺",LongLeftRightArrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",Longrightarrow:"⟹",LongRightArrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",Lopf:"𝕃",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",Lstrok:"Ł",lt:"<",Lt:"≪",LT:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",Map:"⤅",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",Mcy:"М",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",mfr:"𝔪",Mfr:"𝔐",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",Mopf:"𝕄",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",mu:"μ",Mu:"Μ",multimap:"⊸",mumap:"⊸",nabla:"∇",nacute:"ń",Nacute:"Ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",Ncaron:"Ň",ncedil:"ņ",Ncedil:"Ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",Ncy:"Н",ndash:"–",ne:"≠",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",nfr:"𝔫",Nfr:"𝔑",nge:"≱",ngE:"≧̸",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",ngt:"≯",nGt:"≫⃒",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",NJcy:"Њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nle:"≰",nlE:"≦̸",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nlt:"≮",nLt:"≪⃒",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",not:"¬",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrarr:"↛",nrArr:"⇏",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",Nscr:"𝒩",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsube:"⊈",nsubE:"⫅̸",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupe:"⊉",nsupE:"⫆̸",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntilde:"ñ",Ntilde:"Ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",Nu:"Ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",oacute:"ó",Oacute:"Ó",oast:"⊛",ocir:"⊚",ocirc:"ô",Ocirc:"Ô",ocy:"о",Ocy:"О",odash:"⊝",odblac:"ő",Odblac:"Ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",OElig:"Œ",ofcir:"⦿",ofr:"𝔬",Ofr:"𝔒",ogon:"˛",ograve:"ò",Ograve:"Ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",Omacr:"Ō",omega:"ω",Omega:"Ω",omicron:"ο",Omicron:"Ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",Oopf:"𝕆",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",or:"∨",Or:"⩔",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",oscr:"ℴ",Oscr:"𝒪",oslash:"ø",Oslash:"Ø",osol:"⊘",otilde:"õ",Otilde:"Õ",otimes:"⊗",Otimes:"⨷",otimesas:"⨶",ouml:"ö",Ouml:"Ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",pcy:"п",Pcy:"П",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",Pfr:"𝔓",phi:"φ",Phi:"Φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",Pi:"Π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",pr:"≺",Pr:"⪻",prap:"⪷",prcue:"≼",pre:"⪯",prE:"⪳",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",Pscr:"𝒫",psi:"ψ",Psi:"Ψ",puncsp:" ",qfr:"𝔮",Qfr:"𝔔",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",qscr:"𝓆",Qscr:"𝒬",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",racute:"ŕ",Racute:"Ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarr:"→",rArr:"⇒",Rarr:"↠",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",Rarrtl:"⤖",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",Rcaron:"Ř",rcedil:"ŗ",Rcedil:"Ŗ",rceil:"⌉",rcub:"}",rcy:"р",Rcy:"Р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",Rho:"Ρ",rhov:"ϱ",RightAngleBracket:"⟩",rightarrow:"→",Rightarrow:"⇒",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",sacute:"ś",Sacute:"Ś",sbquo:"‚",sc:"≻",Sc:"⪼",scap:"⪸",scaron:"š",Scaron:"Š",sccue:"≽",sce:"⪰",scE:"⪴",scedil:"ş",Scedil:"Ş",scirc:"ŝ",Scirc:"Ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",Scy:"С",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",Sfr:"𝔖",sfrown:"⌢",sharp:"♯",shchcy:"щ",SHCHcy:"Щ",shcy:"ш",SHcy:"Ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",sigma:"σ",Sigma:"Σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",SOFTcy:"Ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",Sopf:"𝕊",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",Sscr:"𝒮",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",Star:"⋆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",sube:"⊆",subE:"⫅",subedot:"⫃",submult:"⫁",subne:"⊊",subnE:"⫋",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup:"⊃",Sup:"⋑",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supe:"⊇",supE:"⫆",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supne:"⊋",supnE:"⫌",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",tau:"τ",Tau:"Τ",tbrk:"⎴",tcaron:"ť",Tcaron:"Ť",tcedil:"ţ",Tcedil:"Ţ",tcy:"т",Tcy:"Т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",Tfr:"𝔗",there4:"∴",therefore:"∴",Therefore:"∴",theta:"θ",Theta:"Θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",thorn:"þ",THORN:"Þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",Topf:"𝕋",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",Tscr:"𝒯",tscy:"ц",TScy:"Ц",tshcy:"ћ",TSHcy:"Ћ",tstrok:"ŧ",Tstrok:"Ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uacute:"ú",Uacute:"Ú",uarr:"↑",uArr:"⇑",Uarr:"↟",Uarrocir:"⥉",ubrcy:"ў",Ubrcy:"Ў",ubreve:"ŭ",Ubreve:"Ŭ",ucirc:"û",Ucirc:"Û",ucy:"у",Ucy:"У",udarr:"⇅",udblac:"ű",Udblac:"Ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",Ufr:"𝔘",ugrave:"ù",Ugrave:"Ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",Umacr:"Ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",uogon:"ų",Uogon:"Ų",uopf:"𝕦",Uopf:"𝕌",uparrow:"↑",Uparrow:"⇑",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",updownarrow:"↕",Updownarrow:"⇕",UpDownArrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",upsilon:"υ",Upsilon:"Υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",Uring:"Ů",urtri:"◹",uscr:"𝓊",Uscr:"𝒰",utdot:"⋰",utilde:"ũ",Utilde:"Ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uuml:"ü",Uuml:"Ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",vcy:"в",Vcy:"В",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",vee:"∨",Vee:"⋁",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",vfr:"𝔳",Vfr:"𝔙",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",Vopf:"𝕍",vprop:"∝",vrtri:"⊳",vscr:"𝓋",Vscr:"𝒱",vsubne:"⊊︀",vsubnE:"⫋︀",vsupne:"⊋︀",vsupnE:"⫌︀",Vvdash:"⊪",vzigzag:"⦚",wcirc:"ŵ",Wcirc:"Ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",wfr:"𝔴",Wfr:"𝔚",wopf:"𝕨",Wopf:"𝕎",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",Wscr:"𝒲",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",Xfr:"𝔛",xharr:"⟷",xhArr:"⟺",xi:"ξ",Xi:"Ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",Xopf:"𝕏",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",xscr:"𝓍",Xscr:"𝒳",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacute:"ý",Yacute:"Ý",yacy:"я",YAcy:"Я",ycirc:"ŷ",Ycirc:"Ŷ",ycy:"ы",Ycy:"Ы",yen:"¥",yfr:"𝔶",Yfr:"𝔜",yicy:"ї",YIcy:"Ї",yopf:"𝕪",Yopf:"𝕐",yscr:"𝓎",Yscr:"𝒴",yucy:"ю",YUcy:"Ю",yuml:"ÿ",Yuml:"Ÿ",zacute:"ź",Zacute:"Ź",zcaron:"ž",Zcaron:"Ž",zcy:"з",Zcy:"З",zdot:"ż",Zdot:"Ż",zeetrf:"ℨ",ZeroWidthSpace:"​",zeta:"ζ",Zeta:"Ζ",zfr:"𝔷",Zfr:"ℨ",zhcy:"ж",ZHcy:"Ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",zscr:"𝓏",Zscr:"𝒵",zwj:"‍",zwnj:"‌"},m={aacute:"á",Aacute:"Á",acirc:"â",Acirc:"Â",acute:"´",aelig:"æ",AElig:"Æ",agrave:"à",Agrave:"À",amp:"&",AMP:"&",aring:"å",Aring:"Å",atilde:"ã",Atilde:"Ã",auml:"ä",Auml:"Ä",brvbar:"¦",ccedil:"ç",Ccedil:"Ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",Eacute:"É",ecirc:"ê",Ecirc:"Ê",egrave:"è",Egrave:"È",eth:"ð",ETH:"Ð",euml:"ë",Euml:"Ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",iacute:"í",Iacute:"Í",icirc:"î",Icirc:"Î",iexcl:"¡",igrave:"ì",Igrave:"Ì",iquest:"¿",iuml:"ï",Iuml:"Ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",Ntilde:"Ñ",oacute:"ó",Oacute:"Ó",ocirc:"ô",Ocirc:"Ô",ograve:"ò",Ograve:"Ò",ordf:"ª",ordm:"º",oslash:"ø",Oslash:"Ø",otilde:"õ",Otilde:"Õ",ouml:"ö",Ouml:"Ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",THORN:"Þ",times:"×",uacute:"ú",Uacute:"Ú",ucirc:"û",Ucirc:"Û",ugrave:"ù",Ugrave:"Ù",uml:"¨",uuml:"ü",Uuml:"Ü",yacute:"ý",Yacute:"Ý",yen:"¥",yuml:"ÿ"},g={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},y=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],v=String.fromCharCode,A={}.hasOwnProperty,b=function(e,t){return A.call(e,t)},S=function(e,t){if(!e)return t;var n,i={};for(n in t)i[n]=b(e,n)?e[n]:t[n];return i},E=function(e,t){var n="";return e>=55296&&e<=57343||e>1114111?(t&&w("character reference outside the permissible Unicode range"),"�"):b(g,e)?(t&&w("disallowed character reference"),g[e]):(t&&function(e,t){for(var n=-1,i=e.length;++n<i;)if(e[n]==t)return!0;return!1}(y,e)&&w("disallowed character reference"),e>65535&&(n+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),n+=v(e))},k=function(e){return"&#x"+e.toString(16).toUpperCase()+";"},V=function(e){return"&#"+e+";"},w=function(e){throw Error("Parse error: "+e)},_=function e(t,n){(n=S(n,e.options)).strict&&d.test(t)&&w("forbidden code point");var i=n.encodeEverything,c=n.useNamedReferences,h=n.allowUnsafeSymbols,p=n.decimal?V:k,f=function(e){return p(e.charCodeAt(0))};return i?(t=t.replace(a,(function(e){return c&&b(l,e)?"&"+l[e]+";":f(e)})),c&&(t=t.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),c&&(t=t.replace(o,(function(e){return"&"+l[e]+";"})))):c?(h||(t=t.replace(u,(function(e){return"&"+l[e]+";"}))),t=(t=t.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;")).replace(o,(function(e){return"&"+l[e]+";"}))):h||(t=t.replace(u,f)),t.replace(r,(function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return p(1024*(t-55296)+n-56320+65536)})).replace(s,f)};_.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var C=function e(t,n){var i=(n=S(n,e.options)).strict;return i&&h.test(t)&&w("malformed character reference"),t.replace(p,(function(e,t,r,a,s,o,l,u){var c,h,d,p,g,y;return t?(d=t,h=r,i&&!h&&w("character reference was not terminated by a semicolon"),c=parseInt(d,10),E(c,i)):a?(p=a,h=s,i&&!h&&w("character reference was not terminated by a semicolon"),c=parseInt(p,16),E(c,i)):o?b(f,g=o)?f[g]:(i&&w("named character reference was not terminated by a semicolon"),e):(g=l,(y=u)&&n.isAttributeValue?(i&&"="==y&&w("`&` did not start a character reference"),e):(i&&w("named character reference was not terminated by a semicolon"),m[g]+(y||"")))}))};C.options={isAttributeValue:!1,strict:!1};var x={version:"1.1.1",encode:_,decode:C,escape:function(e){return e.replace(u,(function(e){return c[e]}))},unescape:C};if("function"==typeof define&&"object"==_typeof(define.amd)&&define.amd)define((function(){return x}));else if(t&&!t.nodeType)if(n)n.exports=x;else for(var P in x)b(x,P)&&(t[P]=x[P]);else e.he=x}(this),function(){"use strict";function e(e,t){var n;t=t||1/0;for(var i=e.length,r=null,a=[],s=0;s<i;s++){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&((t-=3)>-1&&a.push(239,191,189),r=null);if(n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<2097152))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function t(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}c.prototype.encode=function(t){return"undefined"==typeof Uint8Array?e(t):new Uint8Array(e(t))},h.prototype.decode=function(e){return function(e,n,i){var r="",a="";i=Math.min(e.length,i||1/0);for(var s=n=n||0;s<i;s++)e[s]<=127?(r+=t(a)+String.fromCharCode(e[s]),a=""):a+="%"+e[s].toString(16);return r+t(a)}(e,0,e.length)}}(),function(){"use strict";window.byteLength=function(e){return 3*e.length/4-s(e)},window.toByteArray=function(e){var i,r,a,o,l,u,c=e.length;l=s(e),u=new n(3*c/4-l),a=l>0?c-4:c;var h=0;for(i=0,r=0;i<a;i+=4,r+=3)o=t[e.charCodeAt(i)]<<18|t[e.charCodeAt(i+1)]<<12|t[e.charCodeAt(i+2)]<<6|t[e.charCodeAt(i+3)],u[h++]=o>>16&255,u[h++]=o>>8&255,u[h++]=255&o;2===l?(o=t[e.charCodeAt(i)]<<2|t[e.charCodeAt(i+1)]>>4,u[h++]=255&o):1===l&&(o=t[e.charCodeAt(i)]<<10|t[e.charCodeAt(i+1)]<<4|t[e.charCodeAt(i+2)]>>2,u[h++]=o>>8&255,u[h++]=255&o);return u},window.fromByteArray=function(t){for(var n,i=t.length,r=i%3,a="",s=[],l=0,u=i-r;l<u;l+=16383)s.push(o(t,l,l+16383>u?u:l+16383));1===r?(n=t[i-1],a+=e[n>>2],a+=e[n<<4&63],a+="=="):2===r&&(n=(t[i-2]<<8)+t[i-1],a+=e[n>>10],a+=e[n>>4&63],a+=e[n<<2&63],a+="=");return s.push(a),s.join("")};for(var e=[],t=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,a=i.length;r<a;++r)e[r]=i[r],t[i.charCodeAt(r)]=r;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(t,n,i){for(var r,a,s=[],o=n;o<i;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(e[(a=r)>>18&63]+e[a>>12&63]+e[a>>6&63]+e[63&a]);return s.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63}(),function(e,t){var n,i=this,r=t.pow(256,6),a=t.pow(2,52),s=2*a;function o(o,d,p){var f=[],m=c(function e(t,n){var i,r=[],a=_typeof(t);if(n&&"object"==a)for(i in t)try{r.push(e(t[i],n-1))}catch(s){}return r.length?r:"string"==a?t:t+"\0"}((d=1==d?{entropy:!0}:d||{}).entropy?[o,h(e)]:null==o?function(){try{if(n)return h(n.randomBytes(256));var t=new Uint8Array(256);return(i.crypto||i.msCrypto).getRandomValues(t),h(t)}catch(s){var r=i.navigator,a=r&&r.plugins;return[+new Date,i,a,i.screen,h(e)]}}():o,3),f),g=new l(f),y=function(){for(var e=g.g(6),t=r,n=0;e<a;)e=256*(e+n),t*=256,n=g.g(1);for(;e>=s;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|g.g(4)},y.quick=function(){return g.g(4)/4294967296},y.double=y,c(h(g.S),e),(d.pass||p||function(e,n,i,r){return r&&(r.S&&u(r,g),e.state=function(){return u(g,{})}),i?(t.random=e,n):e})(y,m,"global"in d?d.global:this==t,d.state)}function l(e){var t,n=e.length,i=this,r=0,a=i.i=i.j=0,s=i.S=[];for(n||(e=[n++]);r<256;)s[r]=r++;for(r=0;r<256;r++)s[r]=s[a=255&a+e[r%n]+(t=s[r])],s[a]=t;(i.g=function(e){for(var t,n=0,r=i.i,a=i.j,s=i.S;e--;)t=s[r=255&r+1],n=256*n+s[255&(s[r]=s[a=255&a+t])+(s[a]=t)];return i.i=r,i.j=a,n})(256)}function u(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function c(e,t){for(var n,i=e+"",r=0;r<i.length;)t[255&r]=255&(n^=19*t[255&r])+i.charCodeAt(r++);return h(t)}function h(e){return String.fromCharCode.apply(0,e)}if(t.seedrandom=o,c(t.random(),e),"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){module.exports=o;try{n=require("crypto")}catch(d){}}else"function"==typeof define&&define.amd&&define((function(){return o}))}([],Math);/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var d,p,f=f||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r=!e.externalHost&&"download"in i,a=e.webkitRequestFileSystem,s=e.requestFileSystem||a||e.mozRequestFileSystem,o=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},l=0,u=[],c=function(){for(var e=u.length;e--;){var t=u[e];"string"==typeof t?n().revokeObjectURL(t):t.remove()}u.length=0},h=function(e,t,n){for(var i=(t=[].concat(t)).length;i--;){var r=e["on"+t[i]];if("function"==typeof r)try{r.call(e,n||e)}catch(a){o(a)}}},d=function(o,c){var d,p,f,m,g,y=this,v=o.type,A=!1,b=function(){var e=n().createObjectURL(o);return u.push(e),e},S=function(){h(y,"writestart progress write writeend".split(" "))},E=function(){!A&&d||(d=b()),p?p.location.href=d:window.open(d,"_blank"),y.readyState=y.DONE,S()},k=function(e){return function(){if(y.readyState!==y.DONE)return e.apply(this,arguments)}},V={create:!0,exclusive:!1};if(y.readyState=y.INIT,c||(c="download"),r)return d=b(),i.href=d,i.download=c,m=i,(g=t.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),m.dispatchEvent(g),y.readyState=y.DONE,void S();e.chrome&&v&&"application/octet-stream"!==v&&(f=o.slice||o.webkitSlice,o=f.call(o,0,o.size,"application/octet-stream"),A=!0),a&&"download"!==c&&(c+=".download"),("application/octet-stream"===v||a)&&(p=e),s?(l+=o.size,s(e.TEMPORARY,l,k((function(e){e.root.getDirectory("saved",V,k((function(e){var t=function(){e.getFile(c,V,k((function(e){e.createWriter(k((function(t){t.onwriteend=function(t){p.location.href=e.toURL(),u.push(e),y.readyState=y.DONE,h(y,"writeend",t)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&E()},"writestart progress write abort".split(" ").forEach((function(e){t["on"+e]=y["on"+e]})),t.write(o),y.abort=function(){t.abort(),y.readyState=y.DONE},y.readyState=y.WRITING})),E)})),E)};e.getFile(c,{create:!1},k((function(e){e.remove(),t()})),k((function(e){e.code===e.NOT_FOUND_ERR?t():E()})))})),E)})),E)):E()},p=d.prototype,f=function(e,t){return new d(e,t)};return p.abort=function(){this.readyState=this.DONE,h(this,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,e.addEventListener("unload",c,!1),f.unload=function(){c(),e.removeEventListener("unload",c,!1)},f}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=f:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],(function(){return f})),function(e){if("object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.decomp=e()}}((function(){return function e(t,n,i){function r(s,o){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){var n=t[s][1][e];return r(n||e)}),u,u.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){function i(e,t,n){n=n||0;var i,r,a,s,o,l,u,c=[0,0];return i=e[1][1]-e[0][1],r=e[0][0]-e[1][0],a=i*e[0][0]+r*e[0][1],s=t[1][1]-t[0][1],o=t[0][0]-t[1][0],l=s*t[0][0]+o*t[0][1],k(u=i*o-s*r,0,n)||(c[0]=(o*a-r*l)/u,c[1]=(i*l-s*a)/u),c}function r(e,t,n,i){var r=t[0]-e[0],a=t[1]-e[1],s=i[0]-n[0],o=i[1]-n[1];if(s*a-o*r==0)return!1;var l=(r*(n[1]-e[1])+a*(e[0]-n[0]))/(s*a-o*r),u=(s*(e[1]-n[1])+o*(n[0]-e[0]))/(o*r-s*a);return l>=0&&l<=1&&u>=0&&u<=1}function a(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function s(e,t,n){return a(e,t,n)>0}function o(e,t,n){return a(e,t,n)>=0}function l(e,t,n){return a(e,t,n)<0}function u(e,t,n){return a(e,t,n)<=0}t.exports={decomp:function(e){var t=function e(t){for(var n=[],i=[],r=[],a=[],s=Number.MAX_VALUE,o=0;o<t.length;++o)if(g(t,o))for(var l=0;l<t.length;++l)if(A(t,o,l)){i=e(S(t,o,l,a)),r=e(S(t,l,o,a));for(var u=0;u<r.length;u++)i.push(r[u]);i.length<s&&(n=i,s=i.length,n.push([f(t,o),f(t,l)]))}return n}(e);return t.length>0?function e(t,n){if(0===n.length)return[t];if(n instanceof Array&&n.length&&n[0]instanceof Array&&2===n[0].length&&n[0][0]instanceof Array){for(var i=[t],r=0;r<n.length;r++)for(var a=n[r],s=0;s<i.length;s++){var o=i[s],l=e(o,a);if(l){i.splice(s,1),i.push(l[0],l[1]);break}}return i}a=n,r=t.indexOf(a[0]),s=t.indexOf(a[1]);return-1!==r&&-1!==s&&[S(t,r,s),S(t,s,r)]}(e,t):[e]},quickDecomp:function e(t,n,i,r,a,c,h){c=c||100,h=h||0,a=a||25,n=void 0!==n?n:[],i=i||[],r=r||[];var d=[0,0],y=[0,0],v=[0,0],A=0,S=0,k=0,V=0,w=0,_=0,C=0,x=[],P=[],T=t,M=t;if(M.length<3)return n;if(++h>c)return console.warn("quickDecomp: max level ("+c+") reached."),n;for(var L=0;L<t.length;++L)if(g(T,L)){i.push(T[L]),A=S=Number.MAX_VALUE;for(var I=0;I<t.length;++I)s(f(T,L-1),f(T,L),f(T,I))&&u(f(T,L-1),f(T,L),f(T,I-1))&&(v=E(f(T,L-1),f(T,L),f(T,I),f(T,I-1)),l(f(T,L+1),f(T,L),v)&&(k=p(T[L],v))<S&&(S=k,y=v,_=I)),s(f(T,L+1),f(T,L),f(T,I+1))&&u(f(T,L+1),f(T,L),f(T,I))&&(v=E(f(T,L+1),f(T,L),f(T,I),f(T,I+1)),s(f(T,L-1),f(T,L),v)&&(k=p(T[L],v))<A&&(A=k,d=v,w=I));if(_===(w+1)%t.length)v[0]=(y[0]+d[0])/2,v[1]=(y[1]+d[1])/2,r.push(v),L<w?(m(x,T,L,w+1),x.push(v),P.push(v),0!==_&&m(P,T,_,T.length),m(P,T,0,L+1)):(0!==L&&m(x,T,L,T.length),m(x,T,0,w+1),x.push(v),P.push(v),m(P,T,_,L+1));else{if(_>w&&(w+=t.length),V=Number.MAX_VALUE,w<_)return n;for(I=_;I<=w;++I)o(f(T,L-1),f(T,L),f(T,I))&&u(f(T,L+1),f(T,L),f(T,I))&&(k=p(f(T,L),f(T,I)))<V&&b(T,L,I)&&(V=k,C=I%t.length);L<C?(m(x,T,L,C+1),0!==C&&m(P,T,C,M.length),m(P,T,0,L+1)):(0!==L&&m(x,T,L,M.length),m(x,T,0,C+1),m(P,T,C,L+1))}return x.length<P.length?(e(x,n,i,r,a,c,h),e(P,n,i,r,a,c,h)):(e(P,n,i,r,a,c,h),e(x,n,i,r,a,c,h)),n}return n.push(t),n},isSimple:function(e){var t,n=e;for(t=0;t<n.length-1;t++)for(var i=0;i<t-1;i++)if(r(n[t],n[t+1],n[i],n[i+1]))return!1;for(t=1;t<n.length-2;t++)if(r(n[0],n[n.length-1],n[t],n[t+1]))return!1;return!0},removeCollinearPoints:function(e,t){for(var n=0,i=e.length-1;e.length>3&&i>=0;--i)d(f(e,i-1),f(e,i),f(e,i+1),t)&&(e.splice(i%e.length,1),n++);return n},removeDuplicatePoints:function(e,t){for(var n=e.length-1;n>=1;--n)for(var i=e[n],r=n-1;r>=0;--r)V(i,e[r],t)&&e.splice(n,1)},makeCCW:function(e){for(var t=0,n=e,i=1;i<e.length;++i)(n[i][1]<n[t][1]||n[i][1]===n[t][1]&&n[i][0]>n[t][0])&&(t=i);return!s(f(e,t-1),f(e,t),f(e,t+1))&&(function(e){for(var t=[],n=e.length,i=0;i!==n;i++)t.push(e.pop());for(i=0;i!==n;i++)e[i]=t[i]}(e),!0)}};var c=[],h=[];function d(e,t,n,i){if(i){var r=c,s=h;r[0]=t[0]-e[0],r[1]=t[1]-e[1],s[0]=n[0]-t[0],s[1]=n[1]-t[1];var o=r[0]*s[0]+r[1]*s[1],l=Math.sqrt(r[0]*r[0]+r[1]*r[1]),u=Math.sqrt(s[0]*s[0]+s[1]*s[1]);return Math.acos(o/(l*u))<i}return 0===a(e,t,n)}function p(e,t){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function f(e,t){var n=e.length;return e[t<0?t%n+n:t%n]}function m(e,t,n,i){for(var r=n;r<i;r++)e.push(t[r])}function g(e,t){return l(f(e,t-1),f(e,t),f(e,t+1))}var y=[],v=[];function A(e,t,n){var r,a,s=y,l=v;if(o(f(e,t+1),f(e,t),f(e,n))&&u(f(e,t-1),f(e,t),f(e,n)))return!1;a=p(f(e,t),f(e,n));for(var c=0;c!==e.length;++c)if((c+1)%e.length!==t&&c!==t&&o(f(e,t),f(e,n),f(e,c+1))&&u(f(e,t),f(e,n),f(e,c))&&(s[0]=f(e,t),s[1]=f(e,n),l[0]=f(e,c),l[1]=f(e,c+1),r=i(s,l),p(f(e,t),r)<a))return!1;return!0}function b(e,t,n){for(var i=0;i!==e.length;++i)if(i!==t&&i!==n&&(i+1)%e.length!==t&&(i+1)%e.length!==n&&r(f(e,t),f(e,n),f(e,i),f(e,i+1)))return!1;return!0}function S(e,t,n,i){var r=i||[];if(function(e){e.length=0}(r),t<n)for(var a=t;a<=n;a++)r.push(e[a]);else{for(a=0;a<=n;a++)r.push(e[a]);for(a=t;a<e.length;a++)r.push(e[a])}return r}function E(e,t,n,i,r){r=r||0;var a=t[1]-e[1],s=e[0]-t[0],o=a*e[0]+s*e[1],l=i[1]-n[1],u=n[0]-i[0],c=l*n[0]+u*n[1],h=a*u-l*s;return k(h,0,r)?[0,0]:[(u*o-s*c)/h,(a*c-l*o)/h]}function k(e,t,n){return n=n||0,Math.abs(e-t)<=n}function V(e,t,n){return k(e[0],t[0],n)&&k(e[1],t[1],n)}},{}]},{},[1])(1)})),function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).THREE={})}(this,(function(e){"use strict";function t(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});var n,i,r,a={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*a.DEG2RAD},radToDeg:function(e){return e*a.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function s(e,t){this.x=e||0,this.y=t||0}function o(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}function l(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function u(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(s.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(s.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}}),Object.assign(o,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,a,s){var o=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3],h=r[a+0],d=r[a+1],p=r[a+2],f=r[a+3];if(c!==f||o!==h||l!==d||u!==p){var m=1-s,g=o*h+l*d+u*p+c*f,y=g>=0?1:-1,v=1-g*g;if(v>Number.EPSILON){var A=Math.sqrt(v),b=Math.atan2(A,g*y);m=Math.sin(m*b)/A,s=Math.sin(s*b)/A}var S=s*y;if(o=o*m+h*S,l=l*m+d*S,u=u*m+p*S,c=c*m+f*S,m===1-s){var E=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=E,l*=E,u*=E,c*=E}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(o.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(o.prototype,{isQuaternion:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,a=e.order,s=Math.cos,o=Math.sin,l=s(n/2),u=s(i/2),c=s(r/2),h=o(n/2),d=o(i/2),p=o(r/2);return"XYZ"===a?(this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p):"YXZ"===a?(this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p):"ZXY"===a?(this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p):"ZYX"===a?(this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p):"YZX"===a?(this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p):"XZY"===a&&(this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],a=n[8],s=n[1],o=n[5],l=n[9],u=n[2],c=n[6],h=n[10],d=i+o+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-l)*t,this._y=(a-u)*t,this._z=(s-r)*t):i>o&&i>h?(t=2*Math.sqrt(1+i-o-h),this._w=(c-l)/t,this._x=.25*t,this._y=(r+s)/t,this._z=(a+u)/t):o>h?(t=2*Math.sqrt(1+o-i-h),this._w=(a-u)/t,this._x=(r+s)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+h-i-o),this._w=(s-r)/t,this._x=(a+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(a.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,u=t._w;return this._x=n*u+a*s+i*l-r*o,this._y=i*u+a*o+r*s-n*l,this._z=r*u+a*l+n*o-i*s,this._w=a*u-n*s-i*o-r*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,s=a*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var o=1-s*s;if(o<=Number.EPSILON){var l=1-t;return this._w=l*a+t*this._w,this._x=l*n+t*this._x,this._y=l*i+t*this._y,this._z=l*r+t*this._z,this.normalize()}var u=Math.sqrt(o),c=Math.atan2(u,s),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=r*h+this._z*d,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(l.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(i=new o,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(i.setFromEuler(e))}),applyAxisAngle:function(){var e=new o;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*i-s*n,u=o*n+s*t-r*i,c=o*i+r*n-a*t,h=-r*t-a*n-s*i;return this.x=l*o+h*-r+u*-s-c*-a,this.y=u*o+h*-a+c*-r-l*-s,this.z=c*o+h*-s+l*-a-u*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-r*s,this.y=r*a-n*o,this.z=n*s-i*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:(n=new l,function(e){return n.copy(this).projectOnVector(e),this.sub(n)}),reflect:function(){var e=new l;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(a.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(u.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,a,s,o,l){var u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=t,u[4]=r,u[5]=o,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new l;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[3],o=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],g=i[6],y=i[1],v=i[4],A=i[7],b=i[2],S=i[5],E=i[8];return r[0]=a*f+s*y+o*b,r[3]=a*m+s*v+o*S,r[6]=a*g+s*A+o*E,r[1]=l*f+u*y+c*b,r[4]=l*m+u*v+c*S,r[7]=l*g+u*A+c*E,r[2]=h*f+d*y+p*b,r[5]=h*m+d*v+p*S,r[8]=h*g+d*A+p*E,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*a*u-t*s*l-n*r*u+n*s*o+i*r*l-i*a*o},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],a=n[1],s=n[2],o=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],p=d*l-u*h,f=u*c-d*o,m=h*o-l*c,g=r*p+a*f+s*m;if(0===g){var y="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(y);return console.warn(y),this.identity()}var v=1/g;return i[0]=p*v,i[1]=(s*h-d*a)*v,i[2]=(u*a-s*l)*v,i[3]=f*v,i[4]=(d*r-s*c)*v,i[5]=(s*o-u*r)*v,i[6]=m*v,i[7]=(a*c-h*r)*v,i[8]=(l*r-a*o)*v,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,a,s){var o=Math.cos(r),l=Math.sin(r);this.set(n*o,n*l,-n*(o*a+l*s)+a+e,-i*l,i*o,-i*(-l*a+o*s)+s+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],s=i[6],o=i[1],l=i[4],u=i[7];return i[0]=t*r+n*o,i[3]=t*a+n*l,i[6]=t*s+n*u,i[1]=-n*r+t*o,i[4]=-n*a+t*l,i[7]=-n*s+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var c,h,d,p,f,m,g,y,v,A,b,S,E,k,V={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===r&&(r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),r.width=e.width,r.height=e.height;var n=r.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=r}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},w=0;function _(e,t,n,i,r,o,l,c,h,d){Object.defineProperty(this,"id",{value:w++}),this.uuid=a.generateUUID(),this.name="",this.image=void 0!==e?e:_.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:_.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==i?i:1001,this.magFilter=void 0!==r?r:1006,this.minFilter=void 0!==o?o:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==l?l:1023,this.type=void 0!==c?c:1009,this.offset=new s(0,0),this.repeat=new s(1,1),this.center=new s(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new u,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:3e3,this.version=0,this.onUpdate=null}function C(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function x(e,t,n){this.width=e,this.height=t,this.scissor=new C(0,0,e,t),this.scissorTest=!1,this.viewport=new C(0,0,e,t),n=n||{},this.texture=new _(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function P(e,t,n){x.call(this,e,t,n),this.samples=4}function T(e,t,n){x.call(this,e,t,n)}function M(e,t,n,i,r,a,s,o,l,u,c,h){_.call(this,null,a,s,o,l,u,i,r,c,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==u?u:1003,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function L(e,t){this.min=void 0!==e?e:new l(1/0,1/0,1/0),this.max=void 0!==t?t:new l(-1/0,-1/0,-1/0)}function I(e,t){this.center=void 0!==e?e:new l,this.radius=void 0!==t?t:0}function R(e,t){this.normal=void 0!==e?e:new l(1,0,0),this.constant=void 0!==t?t:0}function D(e,t,n,i,r,a){this.planes=[void 0!==e?e:new R,void 0!==t?t:new R,void 0!==n?n:new R,void 0!==i?i:new R,void 0!==r?r:new R,void 0!==a?a:new R]}function N(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}_.DEFAULT_IMAGE=void 0,_.DEFAULT_MAPPING=300,_.prototype=Object.assign(Object.create(t.prototype),{constructor:_,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=a.generateUUID()),!t&&void 0===e.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var s=0,o=i.length;s<o;s++)r.push(V.getDataURL(i[s]))}else r=V.getDataURL(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(_.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(C.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,a=e.elements,s=a[0],o=a[4],l=a[8],u=a[1],c=a[5],h=a[9],d=a[2],p=a[6],f=a[10];if(Math.abs(o-u)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(o+u)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(s+c+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(s+1)/2,g=(c+1)/2,y=(f+1)/2,v=(o+u)/4,A=(l+d)/4,b=(h+p)/4;return m>g&&m>y?m<.01?(n=0,i=.707106781,r=.707106781):(i=v/(n=Math.sqrt(m)),r=A/n):g>y?g<.01?(n=.707106781,i=0,r=.707106781):(n=v/(i=Math.sqrt(g)),r=b/i):y<.01?(n=.707106781,i=.707106781,r=0):(n=A/(r=Math.sqrt(y)),i=b/r),this.set(n,i,r,t),this}var S=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(u-o)*(u-o));return Math.abs(S)<.001&&(S=1),this.x=(p-h)/S,this.y=(l-d)/S,this.z=(u-o)/S,this.w=Math.acos((s+c+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return void 0===c&&(c=new C,h=new C),c.set(e,e,e,e),h.set(t,t,t,t),this.clamp(c,h)},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),x.prototype=Object.assign(Object.create(t.prototype),{constructor:x,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),P.prototype=Object.assign(Object.create(x.prototype),{constructor:P,isWebGLMultisampleRenderTarget:!0,copy:function(e){return x.prototype.copy.call(this,e),this.samples=e.samples,this}}),T.prototype=Object.create(x.prototype),T.prototype.constructor=T,T.prototype.isWebGLRenderTargetCube=!0,M.prototype=Object.create(_.prototype),M.prototype.constructor=M,M.prototype.isDataTexture=!0,Object.assign(L.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,l=e.length;o<l;o+=3){var u=e[o],c=e[o+1],h=e[o+2];u<t&&(t=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>s&&(s=h)}return this.min.set(t,n,i),this.max.set(r,a,s),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,l=e.count;o<l;o++){var u=e.getX(o),c=e.getY(o),h=e.getZ(o);u<t&&(t=u),c<n&&(n=c),h<i&&(i=h),u>r&&(r=u),c>a&&(a=c),h>s&&(s=h)}return this.min.set(t,n,i),this.max.set(r,a,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new l;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new l),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new l),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,i=new l;function r(r){var a=r.geometry;if(void 0!==a)if(a.isGeometry){var s=a.vertices;for(t=0,n=s.length;t<n;t++)i.copy(s[t]),i.applyMatrix4(r.matrixWorld),e.expandByPoint(i)}else if(a.isBufferGeometry){var o=a.attributes.position;if(void 0!==o)for(t=0,n=o.count;t<n;t++)i.fromBufferAttribute(o,t).applyMatrix4(r.matrixWorld),e.expandByPoint(i)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(r),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new l),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(p=new l,function(e){return this.clampPoint(e.center,p),p.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(){var e=new l,t=new l,n=new l,i=new l,r=new l,a=new l,s=new l,o=new l,u=new l,c=new l;function h(i){var r,a;for(r=0,a=i.length-3;r<=a;r+=3){s.fromArray(i,r);var o=u.x*Math.abs(s.x)+u.y*Math.abs(s.y)+u.z*Math.abs(s.z),l=e.dot(s),c=t.dot(s),h=n.dot(s);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>o)return!1}return!0}return function(s){if(this.isEmpty())return!1;this.getCenter(o),u.subVectors(this.max,o),e.subVectors(s.a,o),t.subVectors(s.b,o),n.subVectors(s.c,o),i.subVectors(t,e),r.subVectors(n,t),a.subVectors(e,n);var l=[0,-i.z,i.y,0,-r.z,r.y,0,-a.z,a.y,i.z,0,-i.x,r.z,0,-r.x,a.z,0,-a.x,-i.y,i.x,0,-r.y,r.x,0,-a.y,a.x,0];return!!h(l)&&(!!h(l=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(i,r),h(l=[c.x,c.y,c.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new l),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new l;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new l;return function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(d=[new l,new l,new l,new l,new l,new l,new l,new l],function(e){return this.isEmpty()||(d[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),d[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),d[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),d[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),d[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),d[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),d[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),d[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(d)),this}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(I.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(f=new L,function(e,t){var n=this.center;void 0!==t?n.copy(t):f.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new l),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new L),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(R.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new l,t=new l;return function(n,i,r){var a=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new l),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new l;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new l);var i=t.delta(e),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/r;return a<0||a>1?void 0:n.copy(i).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new l),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new l,t=new u;return function(n,i){var r=i||t.getNormalMatrix(n),a=this.coplanarPoint(e).applyMatrix4(n),s=this.normal.applyMatrix3(r).normalize();return this.constant=-a.dot(s),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(D.prototype,{set:function(e,t,n,i,r,a){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],y=n[14],v=n[15];return t[0].setComponents(s-i,c-o,f-h,v-m).normalize(),t[1].setComponents(s+i,c+o,f+h,v+m).normalize(),t[2].setComponents(s+r,c+l,f+d,v+g).normalize(),t[3].setComponents(s-r,c-l,f-d,v-g).normalize(),t[4].setComponents(s-a,c-u,f-p,v-y).normalize(),t[5].setComponents(s+a,c+u,f+p,v+y).normalize(),this},intersectsObject:(g=new I,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),g.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(g)}),intersectsSprite:function(){var e=new I;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:(m=new l,function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(m.x=i.normal.x>0?e.max.x:e.min.x,m.y=i.normal.y>0?e.max.y:e.min.y,m.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(m)<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}),Object.assign(N.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,a,s,o,l,u,c,h,d,p,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new N).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new l;return function(t){var n=this.elements,i=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),s=1/e.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*a,n[5]=i[5]*a,n[6]=i[6]*a,n[7]=0,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),s=Math.sin(n),o=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var h=a*u,d=a*c,p=s*u,f=s*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=d+p*l,t[5]=h-f*l,t[9]=-s*o,t[2]=f-h*l,t[6]=p+d*l,t[10]=a*o}else if("YXZ"===e.order){var m=o*u,g=o*c,y=l*u,v=l*c;t[0]=m+v*s,t[4]=y*s-g,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-s,t[2]=g*s-y,t[6]=v+m*s,t[10]=a*o}else if("ZXY"===e.order){m=o*u,g=o*c,y=l*u,v=l*c;t[0]=m-v*s,t[4]=-a*c,t[8]=y+g*s,t[1]=g+y*s,t[5]=a*u,t[9]=v-m*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){h=a*u,d=a*c,p=s*u,f=s*c;t[0]=o*u,t[4]=p*l-d,t[8]=h*l+f,t[1]=o*c,t[5]=f*l+h,t[9]=d*l-p,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){var A=a*o,b=a*l,S=s*o,E=s*l;t[0]=o*u,t[4]=E-A*c,t[8]=S*c+b,t[1]=c,t[5]=a*u,t[9]=-s*u,t[2]=-l*u,t[6]=b*c+S,t[10]=A-E*c}else if("XZY"===e.order){A=a*o,b=a*l,S=s*o,E=s*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=A*c+E,t[5]=a*u,t[9]=b*c-S,t[2]=S*c-b,t[6]=s*u,t[10]=E*c+A}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(E=new l(0,0,0),k=new l(1,1,1),function(e){return this.compose(E,e,k)}),lookAt:(A=new l,b=new l,S=new l,function(e,t,n){var i=this.elements;return S.subVectors(e,t),0===S.lengthSq()&&(S.z=1),S.normalize(),A.crossVectors(n,S),0===A.lengthSq()&&(1===Math.abs(n.z)?S.x+=1e-4:S.z+=1e-4,S.normalize(),A.crossVectors(n,S)),A.normalize(),b.crossVectors(S,A),i[0]=A.x,i[4]=b.x,i[8]=S.x,i[1]=A.y,i[5]=b.y,i[9]=S.y,i[2]=A.z,i[6]=b.z,i[10]=S.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],s=n[4],o=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],y=n[3],v=n[7],A=n[11],b=n[15],S=i[0],E=i[4],k=i[8],V=i[12],w=i[1],_=i[5],C=i[9],x=i[13],P=i[2],T=i[6],M=i[10],L=i[14],I=i[3],R=i[7],D=i[11],N=i[15];return r[0]=a*S+s*w+o*P+l*I,r[4]=a*E+s*_+o*T+l*R,r[8]=a*k+s*C+o*M+l*D,r[12]=a*V+s*x+o*L+l*N,r[1]=u*S+c*w+h*P+d*I,r[5]=u*E+c*_+h*T+d*R,r[9]=u*k+c*C+h*M+d*D,r[13]=u*V+c*x+h*L+d*N,r[2]=p*S+f*w+m*P+g*I,r[6]=p*E+f*_+m*T+g*R,r[10]=p*k+f*C+m*M+g*D,r[14]=p*V+f*x+m*L+g*N,r[3]=y*S+v*w+A*P+b*I,r[7]=y*E+v*_+A*T+b*R,r[11]=y*k+v*C+A*M+b*D,r[15]=y*V+v*x+A*L+b*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new l;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+r*o*c-i*l*c-r*s*h+n*l*h+i*s*d-n*o*d)+e[7]*(+t*o*d-t*l*h+r*a*h-i*a*d+i*l*u-r*o*u)+e[11]*(+t*l*c-t*s*d-r*a*c+n*a*d+r*s*u-n*l*u)+e[15]*(-i*s*u-t*o*c+t*s*h+i*a*c-n*a*h+n*o*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],c=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],g=i[12],y=i[13],v=i[14],A=i[15],b=p*v*h-y*f*h+y*c*m-u*v*m-p*c*A+u*f*A,S=g*f*h-d*v*h-g*c*m+l*v*m+d*c*A-l*f*A,E=d*y*h-g*p*h+g*u*m-l*y*m-d*u*A+l*p*A,k=g*p*c-d*y*c-g*u*f+l*y*f+d*u*v-l*p*v,V=r*b+a*S+s*E+o*k;if(0===V){var w="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(w);return console.warn(w),this.identity()}var _=1/V;return n[0]=b*_,n[1]=(y*f*o-p*v*o-y*s*m+a*v*m+p*s*A-a*f*A)*_,n[2]=(u*v*o-y*c*o+y*s*h-a*v*h-u*s*A+a*c*A)*_,n[3]=(p*c*o-u*f*o-p*s*h+a*f*h+u*s*m-a*c*m)*_,n[4]=S*_,n[5]=(d*v*o-g*f*o+g*s*m-r*v*m-d*s*A+r*f*A)*_,n[6]=(g*c*o-l*v*o-g*s*h+r*v*h+l*s*A-r*c*A)*_,n[7]=(l*f*o-d*c*o+d*s*h-r*f*h-l*s*m+r*c*m)*_,n[8]=E*_,n[9]=(g*p*o-d*y*o-g*a*m+r*y*m+d*a*A-r*p*A)*_,n[10]=(l*y*o-g*u*o+g*a*h-r*y*h-l*a*A+r*u*A)*_,n[11]=(d*u*o-l*p*o-d*a*h+r*p*h+l*a*m-r*u*m)*_,n[12]=k*_,n[13]=(d*y*s-g*p*s+g*a*f-r*y*f-d*a*v+r*p*v)*_,n[14]=(g*u*s-l*y*s-g*a*c+r*y*c+l*a*v-r*u*v)*_,n[15]=(l*p*s-d*u*s+d*a*c-r*p*c-l*a*f+r*u*f)*_,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,s=e.y,o=e.z,l=r*a,u=r*s;return this.set(l*a+n,l*s-i*o,l*o+i*s,0,l*s+i*o,u*s+n,u*o-i*a,0,l*o-i*s,u*o+i*a,r*o*o+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var i=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,u=a+a,c=s+s,h=r*l,d=r*u,p=r*c,f=a*u,m=a*c,g=s*c,y=o*l,v=o*u,A=o*c,b=n.x,S=n.y,E=n.z;return i[0]=(1-(f+g))*b,i[1]=(d+A)*b,i[2]=(p-v)*b,i[3]=0,i[4]=(d-A)*S,i[5]=(1-(h+g))*S,i[6]=(m+y)*S,i[7]=0,i[8]=(p+v)*E,i[9]=(m-y)*E,i[10]=(1-(h+f))*E,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this},decompose:(y=new l,v=new N,function(e,t,n){var i=this.elements,r=y.set(i[0],i[1],i[2]).length(),a=y.set(i[4],i[5],i[6]).length(),s=y.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],v.copy(this);var o=1/r,l=1/a,u=1/s;return v.elements[0]*=o,v.elements[1]*=o,v.elements[2]*=o,v.elements[4]*=l,v.elements[5]*=l,v.elements[6]*=l,v.elements[8]*=u,v.elements[9]*=u,v.elements[10]*=u,t.setFromRotationMatrix(v),n.x=r,n.y=a,n.z=s,this}),makePerspective:function(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,o=2*r/(t-e),l=2*r/(n-i),u=(t+e)/(t-e),c=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return s[0]=o,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=l,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,n,i,r,a){var s=this.elements,o=1/(t-e),l=1/(n-i),u=1/(a-r),c=(t+e)*o,h=(n+i)*l,d=(a+r)*u;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});var q={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor;\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"};function O(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function B(e){for(var t={},n=0;n<e.length;n++){var i=O(e[n]);for(var r in i)t[r]=i[r]}return t}var G,H,F,Y={clone:O,merge:B},z={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function U(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(U.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,i){if(t=a.euclideanModulo(t,1),n=a.clamp(n,0,1),i=a.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,s=2*i-r;this.r=e(s,r,t+1/3),this.g=e(s,r,t),this.b=e(s,r,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,Number(i[1]))/255,this.g=Math.min(255,Number(i[2]))/255,this.b=Math.min(255,Number(i[3]))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,Number(i[1]))/100,this.g=Math.min(100,Number(i[2]))/100,this.b=Math.min(100,Number(i[3]))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=Number(i[1])/360,o=Number(i[2])/100,l=Number(i[3])/100;return t(i[5]),this.setHSL(s,o,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,c=(u=n[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=z[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,a=this.b,s=Math.max(i,r,a),o=Math.min(i,r,a),l=(o+s)/2;if(o===s)t=0,n=0;else{var u=s-o;switch(n=l<=.5?u/(s+o):u/(2-s-o),s){case i:t=(r-a)/u+(r<a?6:0);break;case r:t=(a-i)/u+2;break;case a:t=(i-r)/u+4}t/=6}return e.h=t,e.s=n,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(F={},function(e,t,n){return this.getHSL(F),F.h+=e,F.s+=t,F.l+=n,this.setHSL(F.h,F.s,F.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:(G={h:0,s:0,l:0},H={h:0,s:0,l:0},function(e,t){this.getHSL(G),e.getHSL(H);var n=a.lerp(G.h,H.h,t),i=a.lerp(G.s,H.s,t),r=a.lerp(G.l,H.l,t);return this.setHSL(n,i,r),this}),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var W,j={common:{diffuse:{value:new U(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new u},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new s(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new U(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new U(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new u}},sprite:{diffuse:{value:new U(15658734)},opacity:{value:1},center:{value:new s(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new u}}},X={basic:{uniforms:B([j.common,j.specularmap,j.envmap,j.aomap,j.lightmap,j.fog]),vertexShader:q.meshbasic_vert,fragmentShader:q.meshbasic_frag},lambert:{uniforms:B([j.common,j.specularmap,j.envmap,j.aomap,j.lightmap,j.emissivemap,j.fog,j.lights,{emissive:{value:new U(0)}}]),vertexShader:q.meshlambert_vert,fragmentShader:q.meshlambert_frag},phong:{uniforms:B([j.common,j.specularmap,j.envmap,j.aomap,j.lightmap,j.emissivemap,j.bumpmap,j.normalmap,j.displacementmap,j.gradientmap,j.fog,j.lights,{emissive:{value:new U(0)},specular:{value:new U(1118481)},shininess:{value:30}}]),vertexShader:q.meshphong_vert,fragmentShader:q.meshphong_frag},standard:{uniforms:B([j.common,j.envmap,j.aomap,j.lightmap,j.emissivemap,j.bumpmap,j.normalmap,j.displacementmap,j.roughnessmap,j.metalnessmap,j.fog,j.lights,{emissive:{value:new U(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:q.meshphysical_vert,fragmentShader:q.meshphysical_frag},matcap:{uniforms:B([j.common,j.bumpmap,j.normalmap,j.displacementmap,j.fog,{matcap:{value:null}}]),vertexShader:q.meshmatcap_vert,fragmentShader:q.meshmatcap_frag},points:{uniforms:B([j.points,j.fog]),vertexShader:q.points_vert,fragmentShader:q.points_frag},dashed:{uniforms:B([j.common,j.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:q.linedashed_vert,fragmentShader:q.linedashed_frag},depth:{uniforms:B([j.common,j.displacementmap]),vertexShader:q.depth_vert,fragmentShader:q.depth_frag},normal:{uniforms:B([j.common,j.bumpmap,j.normalmap,j.displacementmap,{opacity:{value:1}}]),vertexShader:q.normal_vert,fragmentShader:q.normal_frag},sprite:{uniforms:B([j.sprite,j.fog]),vertexShader:q.sprite_vert,fragmentShader:q.sprite_frag},background:{uniforms:{uvTransform:{value:new u},t2D:{value:null}},vertexShader:q.background_vert,fragmentShader:q.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:q.cube_vert,fragmentShader:q.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:q.equirect_vert,fragmentShader:q.equirect_frag},distanceRGBA:{uniforms:B([j.common,j.displacementmap,{referencePosition:{value:new l},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:q.distanceRGBA_vert,fragmentShader:q.distanceRGBA_frag},shadow:{uniforms:B([j.lights,j.fog,{color:{value:new U(0)},opacity:{value:1}}]),vertexShader:q.shadow_vert,fragmentShader:q.shadow_frag}};function Q(){var e=null,t=!1,n=null;function i(r,a){!1!==t&&(n(r,a),e.requestAnimationFrame(i))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(i),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function K(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);void 0===r?t.set(n,function(t,n){var i=t.array,r=t.dynamic?35048:35044,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,i,r),t.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:i instanceof Uint8Array&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(n,i)):r.version<n.version&&(!function(t,n,i){var r=n.array,a=n.updateRange;e.bindBuffer(i,t),!1===n.dynamic?e.bufferData(i,r,35044):-1===a.count?e.bufferSubData(i,0,r):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}(r.buffer,n,i),r.version=n.version)}}}function J(e,t,n,i,r,a){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new l,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new U,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function Z(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||Z.DefaultOrder}function $(){this.mask=1}X.physical={uniforms:B([X.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:q.meshphysical_vert,fragmentShader:q.meshphysical_frag},Object.assign(J.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),Z.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Z.DefaultOrder="XYZ",Object.defineProperties(Z.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Z.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=a.clamp,r=e.elements,s=r[0],o=r[4],l=r[8],u=r[1],c=r[5],h=r[9],d=r[2],p=r[6],f=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(l,f),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-d,s),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(u,s))):"ZYX"===t?(this._y=Math.asin(-i(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(p,f),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===t?(this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(l,f))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(p,c),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new N;return function(t,n,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(W=new o,function(e){return W.setFromEuler(this),this.setFromQuaternion(W,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new l(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign($.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var ee,te,ne,ie,re=0;function ae(){Object.defineProperty(this,"id",{value:re++}),this.uuid=a.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ae.DefaultUp.clone();var e=new l,t=new Z,n=new o,i=new l(1,1,1);t.onChange((function(){n.setFromEuler(t,!1)})),n.onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new N},normalMatrix:{value:new u}}),this.matrix=new N,this.matrixWorld=new N,this.matrixAutoUpdate=ae.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new $,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}ae.DefaultUp=new l(0,1,0),ae.DefaultMatrixAutoUpdate=!0,ae.prototype=Object.assign(Object.create(t.prototype),{constructor:ae,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(ie=new o,function(e,t){return ie.setFromAxisAngle(e,t),this.quaternion.multiply(ie),this}),rotateOnWorldAxis:function(){var e=new o;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new l(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new l(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new l(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new l;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new l(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new l(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new l(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(ne=new N,function(e){return e.applyMatrix4(ne.getInverse(this.matrixWorld))}),lookAt:function(){var e=new o,t=new N,n=new l,i=new l;return function(r,a,s){r.isVector3?n.copy(r):n.set(r,a,s);var o=this.parent;this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(i,n,this.up):t.lookAt(n,i,this.up),this.quaternion.setFromRotationMatrix(t),o&&(t.extractRotation(o.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new l),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(ee=new l,te=new l,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new o),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ee,e,te),e}),getWorldScale:function(){var e=new l,t=new o;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new l),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new l),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(i.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var s=a.shapes;if(Array.isArray(s))for(var o=0,l=s.length;o<l;o++){var u=s[o];r(e.shapes,u)}else r(e.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(o=0,l=this.material.length;o<l;o++)c.push(r(e.materials,this.material[o]));i.material=c}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(t){var h=m(e.geometries),d=m(e.materials),p=m(e.textures),f=m(e.images);s=m(e.shapes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),s.length>0&&(n.shapes=s)}return n.object=i,n;function m(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}});var se,oe,le=0;function ue(){Object.defineProperty(this,"id",{value:le+=2}),this.uuid=a.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function ce(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function he(e,t,n){ce.call(this,new Int8Array(e),t,n)}function de(e,t,n){ce.call(this,new Uint8Array(e),t,n)}function pe(e,t,n){ce.call(this,new Uint8ClampedArray(e),t,n)}function fe(e,t,n){ce.call(this,new Int16Array(e),t,n)}function me(e,t,n){ce.call(this,new Uint16Array(e),t,n)}function ge(e,t,n){ce.call(this,new Int32Array(e),t,n)}function ye(e,t,n){ce.call(this,new Uint32Array(e),t,n)}function ve(e,t,n){ce.call(this,new Float32Array(e),t,n)}function Ae(e,t,n){ce.call(this,new Float64Array(e),t,n)}function be(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Se(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}ue.prototype=Object.assign(Object.create(t.prototype),{constructor:ue,isGeometry:!0,applyMatrix:function(e){for(var t=(new u).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var a=0,s=r.vertexNormals.length;a<s;a++)r.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new N;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new N;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new N;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new N;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new N;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:(oe=new ae,function(e){oe.lookAt(e),oe.updateMatrix(),this.applyMatrix(oe.matrix)}),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes,r=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,u=void 0!==i.uv?i.uv.array:void 0,c=void 0!==i.uv2?i.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var h=0,d=0;h<r.length;h+=3,d+=2)t.vertices.push((new l).fromArray(r,h)),void 0!==o&&t.colors.push((new U).fromArray(o,h));function p(e,n,i,r){var h=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()],d=new J(e,n,i,void 0===a?[]:[(new l).fromArray(a,3*e),(new l).fromArray(a,3*n),(new l).fromArray(a,3*i)],h,r);t.faces.push(d),void 0!==u&&t.faceVertexUvs[0].push([(new s).fromArray(u,2*e),(new s).fromArray(u,2*n),(new s).fromArray(u,2*i)]),void 0!==c&&t.faceVertexUvs[1].push([(new s).fromArray(c,2*e),(new s).fromArray(c,2*n),(new s).fromArray(c,2*i)])}var f=e.groups;if(f.length>0)for(h=0;h<f.length;h++)for(var m=f[h],g=m.start,y=(d=g,g+m.count);d<y;d+=3)void 0!==n?p(n[d],n[d+1],n[d+2],m.materialIndex):p(d,d+1,d+2,m.materialIndex);else if(void 0!==n)for(h=0;h<n.length;h+=3)p(n[h],n[h+1],n[h+2]);else for(h=0;h<r.length/3;h+=3)p(h,h+1,h+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(se=new l,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(se).negate(),this.translate(se.x,se.y,se.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new N;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new l,t=new l,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],s=this.vertices[r.b],o=this.vertices[r.c];e.subVectors(o,s),t.subVectors(a,s),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,a,s;for(void 0===e&&(e=!0),s=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)s[t]=new l;if(e){var o,u,c,h=new l,d=new l;for(i=0,r=this.faces.length;i<r;i++)a=this.faces[i],o=this.vertices[a.a],u=this.vertices[a.b],c=this.vertices[a.c],h.subVectors(c,u),d.subVectors(o,u),h.cross(d),s[a.a].add(h),s[a.b].add(h),s[a.c].add(h)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)s[(a=this.faces[i]).a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)s[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var p=(a=this.faces[i]).vertexNormals;3===p.length?(p[0].copy(s[a.a]),p[1].copy(s[a.b]),p[2].copy(s[a.c])):(p[0]=s[a.a].clone(),p[1]=s[a.b].clone(),p[2]=s[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var a=new ue;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s=this.morphNormals[e].faceNormals,o=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)u=new l,c={a:new l,b:new l,c:new l},s.push(u),o.push(c)}var u,c,h=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],u=h.faceNormals[n],c=h.vertexNormals[n],u.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new L),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new I),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,l=e.faces,c=this.faceVertexUvs[0],h=e.faceVertexUvs[0],d=this.colors,p=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new u).getNormalMatrix(t));for(var f=0,m=s.length;f<m;f++){var g=s[f].clone();void 0!==t&&g.applyMatrix4(t),a.push(g)}for(f=0,m=p.length;f<m;f++)d.push(p[f].clone());for(f=0,m=l.length;f<m;f++){var y,v,A,b=l[f],S=b.vertexNormals,E=b.vertexColors;(y=new J(b.a+r,b.b+r,b.c+r)).normal.copy(b.normal),void 0!==i&&y.normal.applyMatrix3(i).normalize();for(var k=0,V=S.length;k<V;k++)v=S[k].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),y.vertexNormals.push(v);y.color.copy(b.color);for(k=0,V=E.length;k<V;k++)A=E[k],y.vertexColors.push(A.clone());y.materialIndex=b.materialIndex+n,o.push(y)}for(f=0,m=h.length;f<m;f++){var w=h[f],_=[];if(void 0!==w){for(k=0,V=w.length;k<V;k++)_.push(w[k].clone());c.push(_)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,a,s,o,l={},u=[],c=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===l[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(l[t]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[t]];var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=c[r.a],r.b=c[r.b],r.c=c[r.c],a=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(a[p]===a[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),s=0,o=this.faceVertexUvs.length;s<o;s++)this.faceVertexUvs[s].splice(f,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new l(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var i,r,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===t&&(i=[]),s&&s.length===t&&(r=[]);for(n=0;n<t;n++){var o=e[n]._id;i&&i.push(a[o]),r&&r.push(s[o])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}var s=[],o=[],l={},u=[],c={},h=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=void 0!==this.faceVertexUvs[0][r],m=p.normal.length()>0,g=p.vertexNormals.length>0,y=1!==p.color.r||1!==p.color.g||1!==p.color.b,v=p.vertexColors.length>0,A=0;if(A=k(A,0,0),A=k(A,1,!0),A=k(A,2,!1),A=k(A,3,f),A=k(A,4,m),A=k(A,5,g),A=k(A,6,y),A=k(A,7,v),s.push(A),s.push(p.a,p.b,p.c),s.push(p.materialIndex),f){var b=this.faceVertexUvs[0][r];s.push(_(b[0]),_(b[1]),_(b[2]))}if(m&&s.push(V(p.normal)),g){var S=p.vertexNormals;s.push(V(S[0]),V(S[1]),V(S[2]))}if(y&&s.push(w(p.color)),v){var E=p.vertexColors;s.push(w(E[0]),w(E[1]),w(E[2]))}}function k(e,t,n){return n?e|1<<t:e&~(1<<t)}function V(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]||(l[t]=o.length/3,o.push(e.x,e.y,e.z)),l[t]}function w(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]||(c[t]=u.length,u.push(e.getHex())),c[t]}function _(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]||(d[t]=h.length/2,h.push(e.x,e.y)),d[t]}return e.data={},e.data.vertices=i,e.data.normals=o,u.length>0&&(e.data.colors=u),h.length>0&&(e.data.uvs=[h]),e.data.faces=s,e},clone:function(){return(new ue).copy(this)},copy:function(e){var t,n,i,r,a,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var o=e.vertices;for(t=0,n=o.length;t<n;t++)this.vertices.push(o[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=c.length;i<r;i++){var h=c[i],d=[];for(a=0,s=h.length;a<s;a++){var p=h[a];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],i=0,r=f[t].vertices.length;i<r;i++)m.vertices.push(f[t].vertices[i].clone());if(void 0!==f[t].normals)for(m.normals=[],i=0,r=f[t].normals.length;i<r;i++)m.normals.push(f[t].normals[i].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,n=g.length;t<n;t++){var y={};if(void 0!==g[t].vertexNormals)for(y.vertexNormals=[],i=0,r=g[t].vertexNormals.length;i<r;i++){var v=g[t].vertexNormals[i],A={};A.a=v.a.clone(),A.b=v.b.clone(),A.c=v.c.clone(),y.vertexNormals.push(A)}if(void 0!==g[t].faceNormals)for(y.faceNormals=[],i=0,r=g[t].faceNormals.length;i<r;i++)y.faceNormals.push(g[t].faceNormals[i].clone());this.morphNormals.push(y)}var b=e.skinWeights;for(t=0,n=b.length;t<n;t++)this.skinWeights.push(b[t].clone());var S=e.skinIndices;for(t=0,n=S.length;t<n;t++)this.skinIndices.push(S[t].clone());var E=e.lineDistances;for(t=0,n=E.length;t<n;t++)this.lineDistances.push(E[t]);var k=e.boundingBox;null!==k&&(this.boundingBox=k.clone());var V=e.boundingSphere;return null!==V&&(this.boundingSphere=V.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ce.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(ce.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new U),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new s),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new l),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new C),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),he.prototype=Object.create(ce.prototype),he.prototype.constructor=he,de.prototype=Object.create(ce.prototype),de.prototype.constructor=de,pe.prototype=Object.create(ce.prototype),pe.prototype.constructor=pe,fe.prototype=Object.create(ce.prototype),fe.prototype.constructor=fe,me.prototype=Object.create(ce.prototype),me.prototype.constructor=me,ge.prototype=Object.create(ce.prototype),ge.prototype.constructor=ge,ye.prototype=Object.create(ce.prototype),ye.prototype.constructor=ye,ve.prototype=Object.create(ce.prototype),ve.prototype.constructor=ve,Ae.prototype=Object.create(ce.prototype),Ae.prototype.constructor=Ae,Object.assign(be.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,a=0;a<r.length;a++){var s=r[a];s.materialIndex!==i&&(i=s.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:i})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,l=e.morphTargets,u=l.length;if(u>0){t=[];for(var c=0;c<u;c++)t[c]={name:l[c].name,data:[]};this.morphTargets.position=t}var h,d=e.morphNormals,p=d.length;if(p>0){h=[];for(c=0;c<p;c++)h[c]={name:d[c].name,data:[]};this.morphTargets.normal=h}var f=e.skinIndices,m=e.skinWeights,g=f.length===i.length,y=m.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<n.length;c++){var v=n[c];this.vertices.push(i[v.a],i[v.b],i[v.c]);var A=v.vertexNormals;if(3===A.length)this.normals.push(A[0],A[1],A[2]);else{var b=v.normal;this.normals.push(b,b,b)}var S,E=v.vertexColors;if(3===E.length)this.colors.push(E[0],E[1],E[2]);else{var k=v.color;this.colors.push(k,k,k)}if(!0===a)void 0!==(S=r[0][c])?this.uvs.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new s,new s,new s));if(!0===o)void 0!==(S=r[1][c])?this.uvs2.push(S[0],S[1],S[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new s,new s,new s));for(var V=0;V<u;V++){var w=l[V].vertices;t[V].data.push(w[v.a],w[v.b],w[v.c])}for(V=0;V<p;V++){var _=d[V].vertexNormals[c];h[V].data.push(_.a,_.b,_.c)}g&&this.skinIndices.push(f[v.a],f[v.b],f[v.c]),y&&this.skinWeights.push(m[v.a],m[v.b],m[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Ee=1;function ke(){Object.defineProperty(this,"id",{value:Ee+=2}),this.uuid=a.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Ve(e,t,n,i,r,a){ue.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new we(e,t,n,i,r,a)),this.mergeVertices()}function we(e,t,n,i,r,a){ke.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var s=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var o=[],u=[],c=[],h=[],d=0,p=0;function f(e,t,n,i,r,a,f,m,g,y,v){var A,b,S=a/g,E=f/y,k=a/2,V=f/2,w=m/2,_=g+1,C=y+1,x=0,P=0,T=new l;for(b=0;b<C;b++){var M=b*E-V;for(A=0;A<_;A++){var L=A*S-k;T[e]=L*i,T[t]=M*r,T[n]=w,u.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=m>0?1:-1,c.push(T.x,T.y,T.z),h.push(A/g),h.push(1-b/y),x+=1}}for(b=0;b<y;b++)for(A=0;A<g;A++){var I=d+A+_*b,R=d+A+_*(b+1),D=d+(A+1)+_*(b+1),N=d+(A+1)+_*b;o.push(I,R,N),o.push(R,D,N),P+=6}s.addGroup(p,P,v),p+=P,d+=x}f("z","y","x",-1,-1,n,t,e,a,r,0),f("z","y","x",1,-1,n,t,-e,a,r,1),f("x","z","y",1,1,e,n,t,i,a,2),f("x","z","y",1,-1,e,n,-t,i,a,3),f("x","y","z",1,-1,e,t,n,i,r,4),f("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.addAttribute("position",new ve(u,3)),this.addAttribute("normal",new ve(c,3)),this.addAttribute("uv",new ve(h,2))}function _e(e,t,n,i){ue.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Ce(e,t,n,i)),this.mergeVertices()}function Ce(e,t,n,i){ke.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,a,s=(e=e||1)/2,o=(t=t||1)/2,l=Math.floor(n)||1,u=Math.floor(i)||1,c=l+1,h=u+1,d=e/l,p=t/u,f=[],m=[],g=[],y=[];for(a=0;a<h;a++){var v=a*p-o;for(r=0;r<c;r++){var A=r*d-s;m.push(A,-v,0),g.push(0,0,1),y.push(r/l),y.push(1-a/u)}}for(a=0;a<u;a++)for(r=0;r<l;r++){var b=r+c*a,S=r+c*(a+1),E=r+1+c*(a+1),k=r+1+c*a;f.push(b,S,k),f.push(S,E,k)}this.setIndex(f),this.addAttribute("position",new ve(m,3)),this.addAttribute("normal",new ve(g,3)),this.addAttribute("uv",new ve(y,2))}ke.prototype=Object.assign(Object.create(t.prototype),{constructor:ke,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Se(e)>65535?ye:me)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new ce(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new u).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);var i=this.attributes.tangent;void 0!==i&&((new u).getNormalMatrix(e).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new N;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new N;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new N;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new N;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new N;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ae;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new l;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new ve(3*t.vertices.length,3),i=new ve(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new ve(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new ve(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new be).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new ce(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new ce(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new ce(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new ce(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new ce(a,2).copyVector2sArray(e.uvs2))}for(var s in this.groups=e.groups,e.morphTargets){for(var o=[],l=e.morphTargets[s],u=0,c=l.length;u<c;u++){var h=l[u],d=new ve(3*h.data.length,3);d.name=h.name,o.push(d.copyVector3sArray(h.data))}this.morphAttributes[s]=o}if(e.skinIndices.length>0){var p=new ve(4*e.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new ve(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){var e=new L;return function(){null===this.boundingBox&&(this.boundingBox=new L);var t=this.attributes.position,n=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),n)for(var i=0,r=n.length;i<r;i++){var a=n[i];e.setFromBufferAttribute(a),this.boundingBox.expandByPoint(e.min),this.boundingBox.expandByPoint(e.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var e=new L,t=new L,n=new l;return function(){null===this.boundingSphere&&(this.boundingSphere=new I);var i=this.attributes.position,r=this.morphAttributes.position;if(i){var a=this.boundingSphere.center;if(e.setFromBufferAttribute(i),r)for(var s=0,o=r.length;s<o;s++){var l=r[s];t.setFromBufferAttribute(l),e.expandByPoint(t.min),e.expandByPoint(t.max)}e.getCenter(a);var u=0;for(s=0,o=i.count;s<o;s++)n.fromBufferAttribute(i,s),u=Math.max(u,a.distanceToSquared(n));if(r)for(s=0,o=r.length;s<o;s++)for(var c=0,h=(l=r[s]).count;c<h;c++)n.fromBufferAttribute(l,c),u=Math.max(u,a.distanceToSquared(n));this.boundingSphere.radius=Math.sqrt(u),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new ce(new Float32Array(n.length),3));else for(var i=t.normal.array,r=0,a=i.length;r<a;r++)i[r]=0;var s,o,u,c=t.normal.array,h=new l,d=new l,p=new l,f=new l,m=new l;if(e){var g=e.array;for(r=0,a=e.count;r<a;r+=3)s=3*g[r+0],o=3*g[r+1],u=3*g[r+2],h.fromArray(n,s),d.fromArray(n,o),p.fromArray(n,u),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),c[s]+=f.x,c[s+1]+=f.y,c[s+2]+=f.z,c[o]+=f.x,c[o+1]+=f.y,c[o+2]+=f.z,c[u]+=f.x,c[u+1]+=f.y,c[u+2]+=f.z}else for(r=0,a=n.length;r<a;r+=9)h.fromArray(n,r),d.fromArray(n,r+3),p.fromArray(n,r+6),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),c[r]=f.x,c[r+1]=f.y,c[r+2]=f.z,c[r+3]=f.x,c[r+4]=f.y,c[r+5]=f.z,c[r+6]=f.x,c[r+7]=f.y,c[r+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,a=e.attributes[i],s=a.array,o=a.itemSize*t,l=Math.min(s.length,r.length-o),u=0,c=o;u<l;u++,c++)r[c]=s[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new l;return function(){for(var t=this.attributes.normal,n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=new n.constructor(t.length*i),a=0,s=0,o=0,l=t.length;o<l;o++){a=t[o]*i;for(var u=0;u<i;u++)r[s++]=n[a++]}return new ce(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new ke,n=this.index.array,i=this.attributes;for(var r in i){var a=e(i[r],n);t.addAttribute(r,a)}var s=this.morphAttributes;for(r in s){for(var o=[],l=s[r],u=0,c=l.length;u<c;u++){a=e(l[u],n);o.push(a)}t.morphAttributes[r]=o}for(var h=this.groups,d=(u=0,h.length);u<d;u++){var p=h[u];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var a={itemSize:(d=r[n]).itemSize,type:d.array.constructor.name,array:Array.prototype.slice.call(d.array),normalized:d.normalized};""!==d.name&&(a.name=d.name),e.data.attributes[n]=a}var s={},o=!1;for(var n in this.morphAttributes){for(var l=this.morphAttributes[n],u=[],c=0,h=l.length;c<h;c++){var d;a={itemSize:(d=l[c]).itemSize,type:d.array.constructor.name,array:Array.prototype.slice.call(d.array),normalized:d.normalized};""!==d.name&&(a.name=d.name),u.push(a)}u.length>0&&(s[n]=u,o=!0)}o&&(e.data.morphAttributes=s);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return(new ke).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var a=e.attributes;for(t in a){var s=a[t];this.addAttribute(t,s.clone())}var o=e.morphAttributes;for(t in o){var l=[],u=o[t];for(n=0,i=u.length;n<i;n++)l.push(u[n].clone());this.morphAttributes[t]=l}var c=e.groups;for(n=0,i=c.length;n<i;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ve.prototype=Object.create(ue.prototype),Ve.prototype.constructor=Ve,we.prototype=Object.create(ke.prototype),we.prototype.constructor=we,_e.prototype=Object.create(ue.prototype),_e.prototype.constructor=_e,Ce.prototype=Object.create(ke.prototype),Ce.prototype.constructor=Ce;var xe=0;function Pe(){Object.defineProperty(this,"id",{value:xe++}),this.uuid=a.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}Pe.prototype=Object.assign(Object.create(t.prototype),{constructor:Pe,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Te,Me,Le,Ie,Re,De,Ne,qe,Oe,Be,Ge,He;function Fe(e){Pe.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Ye(e,t){this.origin=void 0!==e?e:new l,this.direction=void 0!==t?t:new l}function ze(e,t,n){this.a=void 0!==e?e:new l,this.b=void 0!==t?t:new l,this.c=void 0!==n?n:new l}function Ue(e){Pe.call(this),this.type="MeshBasicMaterial",this.color=new U(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function We(e,t){ae.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new ke,this.material=void 0!==t?t:new Ue({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function je(e,t,n,i){var r,a,s=new U(0),o=0,l=null,u=0;function c(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),c(s,o=void 0!==t?t:1)},getClearAlpha:function(){return o},setClearAlpha:function(e){c(s,o=e)},render:function(t,i,h,d){var p=i.background,f=e.vr,m=f.getSession&&f.getSession();if(m&&"additive"===m.environmentBlendMode&&(p=null),null===p?(c(s,o),l=null,u=0):p&&p.isColor&&(c(p,1),d=!0,l=null,u=0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===a&&((a=new We(new we(1,1,1),new Fe({type:"BackgroundCubeMaterial",uniforms:O(X.cube.uniforms),vertexShader:X.cube.vertexShader,fragmentShader:X.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(a));var g=p.isWebGLRenderTargetCube?p.texture:p;a.material.uniforms.tCube.value=g,a.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,l===p&&u===g.version||(a.material.needsUpdate=!0,l=p,u=g.version),t.unshift(a,a.geometry,a.material,0,0,null)}else p&&p.isTexture&&(void 0===r&&((r=new We(new Ce(2,2),new Fe({type:"BackgroundMaterial",uniforms:O(X.background.uniforms),vertexShader:X.background.vertexShader,fragmentShader:X.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),r.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&u===p.version||(r.material.needsUpdate=!0,l=p,u=p.version),t.unshift(r,r.geometry,r.material,0,0,null))}}}function Xe(e,t,n,i){var r;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r)},this.renderInstances=function(a,s,o){var l;if(i.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[i.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,s,o,a.maxInstancedCount),n.update(o,r,a.maxInstancedCount)}}function Qe(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,s=void 0!==n.precision?n.precision:"highp",o=r(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);var l=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),c=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=c>0,v=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:v,floatVertexTextures:y&&v,maxSamples:a?e.getParameter(36183):0}}function Ke(){var e=this,t=null,n=0,i=!1,r=!1,a=new R,s=new u,o={value:null,needsUpdate:!1};function l(){o.value!==t&&(o.value=t,o.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,i,r){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=o.value,!0!==r||null===u){var c=i+4*l,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===u||u.length<c)&&(u=new Float32Array(c));for(var d=0,p=i;d!==l;++d,p+=4)a.copy(t[d]).applyMatrix4(h,s),a.normal.toArray(u,p),u[p+3]=a.constant}o.value=u,o.needsUpdate=!0}return e.numPlanes=l,u}this.uniform=o,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,a){var s=0!==e.length||r||0!==n||i;return i=r,t=c(e,a,0),n=e.length,s},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,l()},this.setState=function(e,a,s,u,h,d){if(!i||null===e||0===e.length||r&&!s)r?c(null):l();else{var p=r?0:n,f=4*p,m=h.clippingState||null;o.value=m,m=c(e,u,f,d);for(var g=0;g!==f;++g)m[g]=t[g];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=p}}}function Je(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}function Ze(e,t,n){var i={},r={};function a(e){var s=e.target,o=i[s.id];for(var l in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[l]);s.removeEventListener("dispose",a),delete i[s.id];var u=r[o.id];u&&(t.remove(u),delete r[o.id]),n.memory.geometries--}return{get:function(e,t){var r=i[t.id];return r||(t.addEventListener("dispose",a),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new ke).setFromObject(e)),r=t._bufferGeometry),i[t.id]=r,n.memory.geometries++,r)},update:function(e){var n=e.index,i=e.attributes;for(var r in null!==n&&t.update(n,34963),i)t.update(i[r],34962);var a=e.morphAttributes;for(var r in a)for(var s=a[r],o=0,l=s.length;o<l;o++)t.update(s[o],34962)},getWireframeAttribute:function(e){var n=r[e.id];if(n)return n;var i,a=[],s=e.index,o=e.attributes;if(null!==s)for(var l=0,u=(i=s.array).length;l<u;l+=3){var c=i[l+0],h=i[l+1],d=i[l+2];a.push(c,h,h,d,d,c)}else for(l=0,u=(i=o.position.array).length/3-1;l<u;l+=3){c=l+0,h=l+1,d=l+2;a.push(c,h,h,d,d,c)}return n=new(Se(a)>65535?ye:me)(a,1),t.update(n,34963),r[e.id]=n,n}}}function $e(e,t,n,i){var r,a,s;this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,a,t*s),n.update(i,r)},this.renderInstances=function(o,l,u){var c;if(i.isWebGL2)c=e;else if(null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[i.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,u,a,l*s,o.maxInstancedCount),n.update(u,r,o.maxInstancedCount)}}function et(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(i=i||1,t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 5:case 6:t.triangles+=i*(e-2);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function tt(e,t){return Math.abs(t[1])-Math.abs(e[1])}function nt(e){var t={},n=new Float32Array(8);return{update:function(i,r,a,s){var o=i.morphTargetInfluences,l=o.length,u=t[r.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];t[r.id]=u}var h=a.morphTargets&&r.morphAttributes.position,d=a.morphNormals&&r.morphAttributes.normal;for(c=0;c<l;c++){0!==(p=u[c])[1]&&(h&&r.removeAttribute("morphTarget"+c),d&&r.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++){(p=u[c])[0]=c,p[1]=o[c]}for(u.sort(tt),c=0;c<8;c++){var p;if(p=u[c]){var f=p[0],m=p[1];if(m){h&&r.addAttribute("morphTarget"+c,h[f]),d&&r.addAttribute("morphNormal"+c,d[f]),n[c]=m;continue}}n[c]=0}s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function it(e,t){var n={};return{update:function(i){var r=t.render.frame,a=i.geometry,s=e.get(i,a);return n[s.id]!==r&&(a.isGeometry&&s.updateFromObject(i),e.update(s),n[s.id]=r),s},dispose:function(){n={}}}}function rt(e,t,n,i,r,a,s,o,l,u){e=void 0!==e?e:[],t=void 0!==t?t:301,s=void 0!==s?s:1022,_.call(this,e,t,n,i,r,a,s,o,l,u),this.flipY=!1}function at(e,t,n,i){_.call(this,null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1}function st(e,t,n,i){_.call(this,null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1}Fe.prototype=Object.create(Pe.prototype),Fe.prototype.constructor=Fe,Fe.prototype.isShaderMaterial=!0,Fe.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=O(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Fe.prototype.toJSON=function(e){var t=Pe.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var i=this.uniforms[n].value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var r={};for(var a in this.extensions)!0===this.extensions[a]&&(r[a]=!0);return Object.keys(r).length>0&&(t.extensions=r),t},Object.assign(Ye.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new l),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new l;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new l),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new l;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(Me=new l,Le=new l,Ie=new l,function(e,t,n,i){Me.copy(e).add(t).multiplyScalar(.5),Le.copy(t).sub(e).normalize(),Ie.copy(this.origin).sub(Me);var r,a,s,o,l=.5*e.distanceTo(t),u=-this.direction.dot(Le),c=Ie.dot(this.direction),h=-Ie.dot(Le),d=Ie.lengthSq(),p=Math.abs(1-u*u);if(p>0)if(a=u*c-h,o=l*p,(r=u*h-c)>=0)if(a>=-o)if(a<=o){var f=1/p;s=(r*=f)*(r+u*(a*=f)+2*c)+a*(u*r+a+2*h)+d}else a=l,s=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+d;else a=-l,s=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+d;else a<=-o?s=-(r=Math.max(0,-(-u*l+c)))*r+(a=r>0?-l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d:a<=o?(r=0,s=(a=Math.min(Math.max(-l,-h),l))*(a+2*h)+d):s=-(r=Math.max(0,-(u*l+c)))*r+(a=r>0?l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d;else a=u>0?-l:l,s=-(r=Math.max(0,-(u*a+c)))*r+a*(a+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(Le).multiplyScalar(a).add(Me),s}),intersectSphere:function(){var e=new l;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,a=t.radius*t.radius;if(r>a)return null;var s=Math.sqrt(a-r),o=i-s,l=i+s;return o<0&&l<0?null:o<0?this.at(l,n):this.at(o,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,a,s,o,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(r=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),c>=0?(s=(e.min.z-h.z)*c,o=(e.max.z-h.z)*c):(s=(e.max.z-h.z)*c,o=(e.min.z-h.z)*c),n>o||s>i?null:((s>n||n!=n)&&(n=s),(o<i||i!=i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:(Te=new l,function(e){return null!==this.intersectBox(e,Te)}),intersectTriangle:function(){var e=new l,t=new l,n=new l,i=new l;return function(r,a,s,o,l){t.subVectors(a,r),n.subVectors(s,r),i.crossVectors(t,n);var u,c=this.direction.dot(i);if(c>0){if(o)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}e.subVectors(this.origin,r);var h=u*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=u*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>c)return null;var p=-u*e.dot(i);return p<0?null:this.at(p/c,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(ze,{getNormal:(De=new l,function(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new l),i.subVectors(n,t),De.subVectors(e,t),i.cross(De);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}),getBarycoord:function(){var e=new l,t=new l,n=new l;return function(i,r,a,s,o){e.subVectors(s,r),t.subVectors(a,r),n.subVectors(i,r);var u=e.dot(e),c=e.dot(t),h=e.dot(n),d=t.dot(t),p=t.dot(n),f=u*d-c*c;if(void 0===o&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),o=new l),0===f)return o.set(-2,-1,-1);var m=1/f,g=(d*h-c*p)*m,y=(u*p-c*h)*m;return o.set(1-g-y,y,g)}}(),containsPoint:function(){var e=new l;return function(t,n,i,r){return ze.getBarycoord(t,n,i,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:(Re=new l,function(e,t,n,i,r,a,s,o){return this.getBarycoord(e,t,n,i,Re),o.set(0,0),o.addScaledVector(r,Re.x),o.addScaledVector(a,Re.y),o.addScaledVector(s,Re.z),o})}),Object.assign(ze.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new l,t=new l;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new l),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return ze.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new l),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return ze.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ze.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,n,i,r){return ze.getUV(e,this.a,this.b,this.c,t,n,i,r)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:(Ne=new l,qe=new l,Oe=new l,Be=new l,Ge=new l,He=new l,function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new l);var n,i,r=this.a,a=this.b,s=this.c;Ne.subVectors(a,r),qe.subVectors(s,r),Be.subVectors(e,r);var o=Ne.dot(Be),u=qe.dot(Be);if(o<=0&&u<=0)return t.copy(r);Ge.subVectors(e,a);var c=Ne.dot(Ge),h=qe.dot(Ge);if(c>=0&&h<=c)return t.copy(a);var d=o*h-c*u;if(d<=0&&o>=0&&c<=0)return n=o/(o-c),t.copy(r).addScaledVector(Ne,n);He.subVectors(e,s);var p=Ne.dot(He),f=qe.dot(He);if(f>=0&&p<=f)return t.copy(s);var m=p*u-o*f;if(m<=0&&u>=0&&f<=0)return i=u/(u-f),t.copy(r).addScaledVector(qe,i);var g=c*f-p*h;if(g<=0&&h-c>=0&&p-f>=0)return Oe.subVectors(s,a),i=(h-c)/(h-c+(p-f)),t.copy(a).addScaledVector(Oe,i);var y=1/(g+m+d);return n=m*y,i=d*y,t.copy(r).addScaledVector(Ne,n).addScaledVector(qe,i)}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Ue.prototype=Object.create(Pe.prototype),Ue.prototype.constructor=Ue,Ue.prototype.isMeshBasicMaterial=!0,Ue.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},We.prototype=Object.assign(Object.create(ae.prototype),{constructor:We,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ae.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var s=r[a[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var o=i.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var e=new N,t=new Ye,n=new I,i=new l,r=new l,a=new l,o=new l,u=new l,c=new l,h=new l,d=new l,p=new l,f=new s,m=new s,g=new s,y=new l,v=new l;function A(e,t,n,i,r,a,s,o){if(null===(1===t.side?i.intersectTriangle(s,a,r,!0,o):i.intersectTriangle(r,a,s,2!==t.side,o)))return null;v.copy(o),v.applyMatrix4(e.matrixWorld);var l=n.ray.origin.distanceTo(v);return l<n.near||l>n.far?null:{distance:l,point:v.clone(),object:e}}function b(e,t,n,l,v,b,S,E,k,V){i.fromBufferAttribute(v,E),r.fromBufferAttribute(v,k),a.fromBufferAttribute(v,V);var w=e.morphTargetInfluences;if(t.morphTargets&&b&&w){h.set(0,0,0),d.set(0,0,0),p.set(0,0,0);for(var _=0,C=b.length;_<C;_++){var x=w[_],P=b[_];0!==x&&(o.fromBufferAttribute(P,E),u.fromBufferAttribute(P,k),c.fromBufferAttribute(P,V),h.addScaledVector(o.sub(i),x),d.addScaledVector(u.sub(r),x),p.addScaledVector(c.sub(a),x))}i.add(h),r.add(d),a.add(p)}var T=A(e,t,n,l,i,r,a,y);if(T){S&&(f.fromBufferAttribute(S,E),m.fromBufferAttribute(S,k),g.fromBufferAttribute(S,V),T.uv=ze.getUV(y,i,r,a,f,m,g,new s));var M=new J(E,k,V);ze.getNormal(i,r,a,M.normal),T.face=M}return T}return function(i,r){var a,o=this.geometry,l=this.material,u=this.matrixWorld;if(void 0!==l&&(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(u),!1!==i.ray.intersectsSphere(n)&&(e.getInverse(u),t.copy(i.ray).applyMatrix4(e),null===o.boundingBox||!1!==t.intersectsBox(o.boundingBox))))if(o.isBufferGeometry){var c,h,d,p,v,S,E,k,V,w=o.index,_=o.attributes.position,C=o.morphAttributes.position,x=o.attributes.uv,P=o.groups,T=o.drawRange;if(null!==w)if(Array.isArray(l))for(p=0,S=P.length;p<S;p++)for(V=l[(k=P[p]).materialIndex],v=Math.max(k.start,T.start),E=Math.min(k.start+k.count,T.start+T.count);v<E;v+=3)c=w.getX(v),h=w.getX(v+1),d=w.getX(v+2),(a=b(this,V,i,t,_,C,x,c,h,d))&&(a.faceIndex=Math.floor(v/3),a.face.materialIndex=k.materialIndex,r.push(a));else for(p=Math.max(0,T.start),S=Math.min(w.count,T.start+T.count);p<S;p+=3)c=w.getX(p),h=w.getX(p+1),d=w.getX(p+2),(a=b(this,l,i,t,_,C,x,c,h,d))&&(a.faceIndex=Math.floor(p/3),r.push(a));else if(void 0!==_)if(Array.isArray(l))for(p=0,S=P.length;p<S;p++)for(V=l[(k=P[p]).materialIndex],v=Math.max(k.start,T.start),E=Math.min(k.start+k.count,T.start+T.count);v<E;v+=3)(a=b(this,V,i,t,_,C,x,c=v,h=v+1,d=v+2))&&(a.faceIndex=Math.floor(v/3),a.face.materialIndex=k.materialIndex,r.push(a));else for(p=Math.max(0,T.start),S=Math.min(_.count,T.start+T.count);p<S;p+=3)(a=b(this,l,i,t,_,C,x,c=p,h=p+1,d=p+2))&&(a.faceIndex=Math.floor(p/3),r.push(a))}else if(o.isGeometry){var M,L,I,R,D=Array.isArray(l),N=o.vertices,q=o.faces,O=o.faceVertexUvs[0];O.length>0&&(R=O);for(var B=0,G=q.length;B<G;B++){var H=q[B],F=D?l[H.materialIndex]:l;if(void 0!==F&&(M=N[H.a],L=N[H.b],I=N[H.c],a=A(this,F,i,t,M,L,I,y))){if(R&&R[B]){var Y=R[B];f.copy(Y[0]),m.copy(Y[1]),g.copy(Y[2]),a.uv=ze.getUV(y,M,L,I,f,m,g,new s)}a.face=H,a.faceIndex=B,r.push(a)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),rt.prototype=Object.create(_.prototype),rt.prototype.constructor=rt,rt.prototype.isCubeTexture=!0,Object.defineProperty(rt.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),at.prototype=Object.create(_.prototype),at.prototype.constructor=at,at.prototype.isDataTexture2DArray=!0,st.prototype=Object.create(_.prototype),st.prototype.constructor=st,st.prototype.isDataTexture3D=!0;var ot=new _,lt=new at,ut=new st,ct=new rt,ht=[],dt=[],pt=new Float32Array(16),ft=new Float32Array(9),mt=new Float32Array(4);function gt(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=ht[r];if(void 0===a&&(a=new Float32Array(r),ht[r]=a),0!==t){i.toArray(a,0);for(var s=1,o=0;s!==t;++s)o+=n,e[s].toArray(a,o)}return a}function yt(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function vt(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function At(e,t){var n=dt[t];void 0===n&&(n=new Int32Array(t),dt[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function bt(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function St(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Et(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(yt(n,t))return;e.uniform2fv(this.addr,t),vt(n,t)}}function kt(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(yt(n,t))return;e.uniform3fv(this.addr,t),vt(n,t)}}function Vt(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(yt(n,t))return;e.uniform4fv(this.addr,t),vt(n,t)}}function wt(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(yt(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),vt(n,t)}else{if(yt(n,i))return;mt.set(i),e.uniformMatrix2fv(this.addr,!1,mt),vt(n,i)}}function _t(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(yt(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),vt(n,t)}else{if(yt(n,i))return;ft.set(i),e.uniformMatrix3fv(this.addr,!1,ft),vt(n,i)}}function Ct(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(yt(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),vt(n,t)}else{if(yt(n,i))return;pt.set(i),e.uniformMatrix4fv(this.addr,!1,pt),vt(n,i)}}function xt(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||ot,r)}function Pt(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||lt,r)}function Tt(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||ut,r)}function Mt(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||ct,r)}function Lt(e,t){var n=this.cache;yt(n,t)||(e.uniform2iv(this.addr,t),vt(n,t))}function It(e,t){var n=this.cache;yt(n,t)||(e.uniform3iv(this.addr,t),vt(n,t))}function Rt(e,t){var n=this.cache;yt(n,t)||(e.uniform4iv(this.addr,t),vt(n,t))}function Dt(e,t){var n=this.cache;yt(n,t)||(e.uniform1fv(this.addr,t),vt(n,t))}function Nt(e,t){var n=this.cache;yt(n,t)||(e.uniform1iv(this.addr,t),vt(n,t))}function qt(e,t){var n=this.cache,i=gt(t,this.size,2);yt(n,i)||(e.uniform2fv(this.addr,i),this.updateCache(i))}function Ot(e,t){var n=this.cache,i=gt(t,this.size,3);yt(n,i)||(e.uniform3fv(this.addr,i),this.updateCache(i))}function Bt(e,t){var n=this.cache,i=gt(t,this.size,4);yt(n,i)||(e.uniform4fv(this.addr,i),this.updateCache(i))}function Gt(e,t){var n=this.cache,i=gt(t,this.size,4);yt(n,i)||(e.uniformMatrix2fv(this.addr,!1,i),this.updateCache(i))}function Ht(e,t){var n=this.cache,i=gt(t,this.size,9);yt(n,i)||(e.uniformMatrix3fv(this.addr,!1,i),this.updateCache(i))}function Ft(e,t){var n=this.cache,i=gt(t,this.size,16);yt(n,i)||(e.uniformMatrix4fv(this.addr,!1,i),this.updateCache(i))}function Yt(e,t,n){var i=this.cache,r=t.length,a=At(n,r);!1===yt(i,a)&&(e.uniform1iv(this.addr,a),vt(i,a));for(var s=0;s!==r;++s)n.safeSetTexture2D(t[s]||ot,a[s])}function zt(e,t,n){var i=this.cache,r=t.length,a=At(n,r);!1===yt(i,a)&&(e.uniform1iv(this.addr,a),vt(i,a));for(var s=0;s!==r;++s)n.safeSetTextureCube(t[s]||ct,a[s])}function Ut(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return bt;case 35664:return Et;case 35665:return kt;case 35666:return Vt;case 35674:return wt;case 35675:return _t;case 35676:return Ct;case 35678:case 36198:return xt;case 35679:return Tt;case 35680:return Mt;case 36289:return Pt;case 5124:case 35670:return St;case 35667:case 35671:return Lt;case 35668:case 35672:return It;case 35669:case 35673:return Rt}}(t.type)}function Wt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Dt;case 35664:return qt;case 35665:return Ot;case 35666:return Bt;case 35674:return Gt;case 35675:return Ht;case 35676:return Ft;case 35678:return Yt;case 35680:return zt;case 5124:case 35670:return Nt;case 35667:case 35671:return Lt;case 35668:case 35672:return It;case 35669:case 35673:return Rt}}(t.type)}function jt(e){this.id=e,this.seq=[],this.map={}}Wt.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),vt(t,e)},jt.prototype.setValue=function(e,t,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var s=i[r];s.setValue(e,t[s.id],n)}};var Xt=/([\w\d_]+)(\])?(\[|\.)?/g;function Qt(e,t){e.seq.push(t),e.map[t.id]=t}function Kt(e,t,n){var i=e.name,r=i.length;for(Xt.lastIndex=0;;){var a=Xt.exec(i),s=Xt.lastIndex,o=a[1],l="]"===a[2],u=a[3];if(l&&(o|=0),void 0===u||"["===u&&s+2===r){Qt(n,void 0===u?new Ut(o,e,t):new Wt(o,e,t));break}var c=n.map[o];void 0===c&&Qt(n,c=new jt(o)),n=c}}function Jt(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),i=0;i<n;++i){var r=e.getActiveUniform(t,i);Kt(r,e.getUniformLocation(t,r.name),this)}}function Zt(e,t,n,i){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!0===i&&(!1===e.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===t?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n))),r}Jt.prototype.setValue=function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)},Jt.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},Jt.upload=function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var s=t[r],o=n[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,i)}},Jt.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n};var $t=0;function en(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function tn(e,t){var n=en(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function nn(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;case 5:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function rn(e){return""!==e}function an(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function sn(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function on(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var n=q[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return on(n)}))}function ln(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(e,t,n,i){for(var r="",a=Number(t);a<Number(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]");return r}))}function un(e,t,n,i,r,a,s,o){var l=e.context,u=i.defines,c=r.vertexShader,h=r.fragmentShader,d="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?d="SHADOWMAP_TYPE_PCF":2===a.shadowMapType&&(d="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(i.envMap.mapping){case 301:case 302:p="ENVMAP_TYPE_CUBE";break;case 306:case 307:p="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:p="ENVMAP_TYPE_EQUIREC";break;case 305:p="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case 302:case 304:f="ENVMAP_MODE_REFRACTION"}switch(i.combine){case 0:m="ENVMAP_BLENDING_MULTIPLY";break;case 1:m="ENVMAP_BLENDING_MIX";break;case 2:m="ENVMAP_BLENDING_ADD"}}var g,y,v,A,b,S=e.gammaFactor>0?e.gammaFactor:1,E=s.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(rn).join("\n")}(i.extensions,a,t),k=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(u),V=l.createProgram();if(i.isRawShaderMaterial?((g=[k].filter(rn).join("\n")).length>0&&(g+="\n"),(y=[E,k].filter(rn).join("\n")).length>0&&(y+="\n")):(g=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,k,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+S,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+d:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rn).join("\n"),y=[E,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,k,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+S,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.envMap?"#define "+f:"",a.envMap?"#define "+m:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+d:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(s.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?q.tonemapping_pars_fragment:"",0!==a.toneMapping?nn("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?q.encodings_pars_fragment:"",a.mapEncoding?tn("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?tn("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?tn("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?tn("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(v="linearToOutputTexel",A=a.outputEncoding,b=en(A),"vec4 "+v+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(rn).join("\n")),c=sn(c=an(c=on(c),a),a),h=sn(h=an(h=on(h),a),a),c=ln(c),h=ln(h),s.isWebGL2&&!i.isRawShaderMaterial){var w=!1,_=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==c.match(_)&&null!==h.match(_)&&(w=!0,c=c.replace(_,""),h=h.replace(_,"")),g=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y}var C,x,P=y+h,T=Zt(l,35633,g+c,e.debug.checkShaderErrors),M=Zt(l,35632,P,e.debug.checkShaderErrors);if(l.attachShader(V,T),l.attachShader(V,M),void 0!==i.index0AttributeName?l.bindAttribLocation(V,0,i.index0AttributeName):!0===a.morphTargets&&l.bindAttribLocation(V,0,"position"),l.linkProgram(V),e.debug.checkShaderErrors){var L=l.getProgramInfoLog(V).trim(),I=l.getShaderInfoLog(T).trim(),R=l.getShaderInfoLog(M).trim(),D=!0,N=!0;!1===l.getProgramParameter(V,35714)?(D=!1,console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(V,35715),"gl.getProgramInfoLog",L,I,R)):""!==L?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",L):""!==I&&""!==R||(N=!1),N&&(this.diagnostics={runnable:D,material:i,programLog:L,vertexShader:{log:I,prefix:g},fragmentShader:{log:R,prefix:y}})}return l.deleteShader(T),l.deleteShader(M),this.getUniforms=function(){return void 0===C&&(C=new Jt(l,V,o)),C},this.getAttributes=function(){return void 0===x&&(x=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var a=e.getActiveAttrib(t,r).name;n[a]=e.getAttribLocation(t,a)}return n}(l,V)),x},this.destroy=function(){l.deleteProgram(V),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=$t++,this.code=n,this.usedTimes=1,this.program=V,this.vertexShader=T,this.fragmentShader=M,this}function cn(e,t,n,i){var r=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=3e3,3e3===n&&t&&(n=3007),n}this.getParameters=function(t,i,r,s,l,u,c){var h=a[t.type],d=c.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),a=Math.min(r,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(c):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var f=e.getRenderTarget();return{shaderID:h,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:o(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:o(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:o(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:o(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:o(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:l,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&r.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var a=0;a<s.length;a++)i.push(n[s[a]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.push(e.gammaFactor),i.join()},this.acquireProgram=function(a,s,o,l){for(var u,c=0,h=r.length;c<h;c++){var d=r[c];if(d.code===l){++(u=d).usedTimes;break}}return void 0===u&&(u=new un(e,t,l,a,s,o,n,i),r.push(u)),u},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function hn(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function dn(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function pn(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function fn(){var e=[],t=0,n=[],i=[],r={id:-1};function a(n,i,a,s,o,l){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:i,material:a,program:a.program||r,groupOrder:s,renderOrder:n.renderOrder,z:o,group:l},e[t]=u):(u.id=n.id,u.object=n,u.geometry=i,u.material=a,u.program=a.program||r,u.groupOrder=s,u.renderOrder=n.renderOrder,u.z=o,u.group=l),t++,u}return{opaque:n,transparent:i,init:function(){t=0,n.length=0,i.length=0},push:function(e,t,r,s,o,l){var u=a(e,t,r,s,o,l);(!0===r.transparent?i:n).push(u)},unshift:function(e,t,r,s,o,l){var u=a(e,t,r,s,o,l);(!0===r.transparent?i:n).unshift(u)},sort:function(){n.length>1&&n.sort(dn),i.length>1&&i.sort(pn)}}}function mn(){var e={};function t(n){var i=n.target;i.removeEventListener("dispose",t),delete e[i.id]}return{get:function(n,i){var r,a=e[n.id];return void 0===a?(r=new fn,e[n.id]={},e[n.id][i.id]=r,n.addEventListener("dispose",t)):void 0===(r=a[i.id])&&(r=new fn,a[i.id]=r),r},dispose:function(){e={}}}}function gn(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new l,color:new U,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new s};break;case"SpotLight":n={position:new l,direction:new l,color:new U,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new s};break;case"PointLight":n={position:new l,color:new U,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new s,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new l,skyColor:new U,groundColor:new U};break;case"RectAreaLight":n={color:new U,position:new l,halfWidth:new l,halfHeight:new l}}return e[t.id]=n,n}}}var yn=0;function vn(){for(var e=new gn,t={id:yn++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=0;n<9;n++)t.probe.push(new l);var i=new l,r=new N,a=new N;return{setup:function(n,s,o){for(var l=0,u=0,c=0,h=0;h<9;h++)t.probe[h].set(0,0,0);for(var d=0,p=0,f=0,m=0,g=0,y=o.matrixWorldInverse,v=(h=0,n.length);h<v;h++){var A=n[h],b=A.color,S=A.intensity,E=A.distance,k=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)l+=b.r*S,u+=b.g*S,c+=b.b*S;else if(A.isLightProbe)for(var V=0;V<9;V++)t.probe[V].addScaledVector(A.sh.coefficients[V],S);else if(A.isDirectionalLight){if((_=e.get(A)).color.copy(A.color).multiplyScalar(A.intensity),_.direction.setFromMatrixPosition(A.matrixWorld),i.setFromMatrixPosition(A.target.matrixWorld),_.direction.sub(i),_.direction.transformDirection(y),_.shadow=A.castShadow,A.castShadow){var w=A.shadow;_.shadowBias=w.bias,_.shadowRadius=w.radius,_.shadowMapSize=w.mapSize}t.directionalShadowMap[d]=k,t.directionalShadowMatrix[d]=A.shadow.matrix,t.directional[d]=_,d++}else if(A.isSpotLight){if((_=e.get(A)).position.setFromMatrixPosition(A.matrixWorld),_.position.applyMatrix4(y),_.color.copy(b).multiplyScalar(S),_.distance=E,_.direction.setFromMatrixPosition(A.matrixWorld),i.setFromMatrixPosition(A.target.matrixWorld),_.direction.sub(i),_.direction.transformDirection(y),_.coneCos=Math.cos(A.angle),_.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),_.decay=A.decay,_.shadow=A.castShadow,A.castShadow){w=A.shadow;_.shadowBias=w.bias,_.shadowRadius=w.radius,_.shadowMapSize=w.mapSize}t.spotShadowMap[f]=k,t.spotShadowMatrix[f]=A.shadow.matrix,t.spot[f]=_,f++}else if(A.isRectAreaLight){(_=e.get(A)).color.copy(b).multiplyScalar(S),_.position.setFromMatrixPosition(A.matrixWorld),_.position.applyMatrix4(y),a.identity(),r.copy(A.matrixWorld),r.premultiply(y),a.extractRotation(r),_.halfWidth.set(.5*A.width,0,0),_.halfHeight.set(0,.5*A.height,0),_.halfWidth.applyMatrix4(a),_.halfHeight.applyMatrix4(a),t.rectArea[m]=_,m++}else if(A.isPointLight){if((_=e.get(A)).position.setFromMatrixPosition(A.matrixWorld),_.position.applyMatrix4(y),_.color.copy(A.color).multiplyScalar(A.intensity),_.distance=A.distance,_.decay=A.decay,_.shadow=A.castShadow,A.castShadow){w=A.shadow;_.shadowBias=w.bias,_.shadowRadius=w.radius,_.shadowMapSize=w.mapSize,_.shadowCameraNear=w.camera.near,_.shadowCameraFar=w.camera.far}t.pointShadowMap[p]=k,t.pointShadowMatrix[p]=A.shadow.matrix,t.point[p]=_,p++}else if(A.isHemisphereLight){var _;(_=e.get(A)).direction.setFromMatrixPosition(A.matrixWorld),_.direction.transformDirection(y),_.direction.normalize(),_.skyColor.copy(A.color).multiplyScalar(S),_.groundColor.copy(A.groundColor).multiplyScalar(S),t.hemi[g]=_,g++}}t.ambient[0]=l,t.ambient[1]=u,t.ambient[2]=c,t.directional.length=d,t.spot.length=f,t.rectArea.length=m,t.point.length=p,t.hemi.length=g,t.hash.stateID=t.id,t.hash.directionalLength=d,t.hash.pointLength=p,t.hash.spotLength=f,t.hash.rectAreaLength=m,t.hash.hemiLength=g,t.hash.shadowsLength=s.length},state:t}}function An(){var e=new vn,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function bn(){var e={};function t(n){var i=n.target;i.removeEventListener("dispose",t),delete e[i.id]}return{get:function(n,i){var r;return void 0===e[n.id]?(r=new An,e[n.id]={},e[n.id][i.id]=r,n.addEventListener("dispose",t)):void 0===e[n.id][i.id]?(r=new An,e[n.id][i.id]=r):r=e[n.id][i.id],r},dispose:function(){e={}}}}function Sn(e){Pe.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function En(e){Pe.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new l,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function kn(e,t,n){for(var i=new D,r=new N,a=new s,o=new s(n,n),u=new l,c=new l,h=new Array(4),d=new Array(4),p={},f={0:1,1:0,2:2},m=[new l(1,0,0),new l(-1,0,0),new l(0,0,1),new l(0,0,-1),new l(0,1,0),new l(0,-1,0)],g=[new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,0,1),new l(0,0,-1)],y=[new C,new C,new C,new C,new C,new C],v=0;4!==v;++v){var A=0!=(1&v),b=0!=(2&v),S=new Sn({depthPacking:3201,morphTargets:A,skinning:b});h[v]=S;var E=new En({morphTargets:A,skinning:b});d[v]=E}var k=this;function V(t,n,i,r,a,s){var o=t.geometry,l=null,u=h,c=t.customDepthMaterial;if(i&&(u=d,c=t.customDistanceMaterial),c)l=c;else{var m=!1;n.morphTargets&&(o&&o.isBufferGeometry?m=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(m=o.morphTargets&&o.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var g=0;m&&(g|=1),t.isSkinnedMesh&&n.skinning&&(g|=2),l=u[g]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var y=l.uuid,v=n.uuid,A=p[y];void 0===A&&(A={},p[y]=A);var b=A[v];void 0===b&&(b=l.clone(),A[v]=b),l=b}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:f[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=a,l.farDistance=s),l}function w(n,r,a,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var o=t.update(n),l=n.material;if(Array.isArray(l))for(var u=o.groups,h=0,d=u.length;h<d;h++){var p=u[h],f=l[p.materialIndex];if(f&&f.visible){var m=V(n,f,s,c,a.near,a.far);e.renderBufferDirect(a,null,o,m,n,p)}}else if(l.visible){m=V(n,l,s,c,a.near,a.far);e.renderBufferDirect(a,null,o,m,n,null)}}for(var g=n.children,y=0,v=g.length;y<v;y++)w(g[y],r,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1!==k.enabled&&(!1!==k.autoUpdate||!1!==k.needsUpdate)&&0!==t.length){var l,h=e.getRenderTarget(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var v=t[p],A=v.shadow,b=v&&v.isPointLight;if(void 0!==A){var S=A.camera;if(a.copy(A.mapSize),a.min(o),b){var E=a.x,V=a.y;y[0].set(2*E,V,E,V),y[1].set(0,V,E,V),y[2].set(3*E,V,E,V),y[3].set(E,V,E,V),y[4].set(3*E,0,E,V),y[5].set(E,0,E,V),a.x*=4,a.y*=2}if(null===A.map){var _={minFilter:1003,magFilter:1003,format:1023};A.map=new x(a.x,a.y,_),A.map.texture.name=v.name+".shadowMap",S.updateProjectionMatrix()}A.isSpotLightShadow&&A.update(v);var C=A.map,P=A.matrix;c.setFromMatrixPosition(v.matrixWorld),S.position.copy(c),b?(l=6,P.makeTranslation(-c.x,-c.y,-c.z)):(l=1,u.setFromMatrixPosition(v.target.matrixWorld),S.lookAt(u),S.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(S.projectionMatrix),P.multiply(S.matrixWorldInverse)),e.setRenderTarget(C),e.clear();for(var T=0;T<l;T++){if(b){u.copy(S.position),u.add(m[T]),S.up.copy(g[T]),S.lookAt(u),S.updateMatrixWorld();var M=y[T];d.viewport(M)}r.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),i.setFromMatrix(r),w(n,s,S,b)}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}k.needsUpdate=!1,e.setRenderTarget(h)}}}function Vn(e,t,n,i){var r=new function(){var t=!1,n=new C,i=null,r=new C(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,s,o){!0===o&&(t*=s,i*=s,a*=s),n.set(t,i,a,s),!1===r.equals(n)&&(e.clearColor(t,i,a,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},a=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?G(2929):H(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},s=new function(){var t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,u=null;return{setTest:function(e){e?G(2960):H(2960)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&a===s||(e.stencilFunc(t,n,s),i=t,r=n,a=s)},setOp:function(t,n,i){s===t&&o===n&&l===i||(e.stencilOp(t,n,i),s=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,s=null,o=null,l=null,u=null}}},o=e.getParameter(34921),l=new Uint8Array(o),u=new Uint8Array(o),c=new Uint8Array(o),h={},d=null,p=null,f=null,m=null,g=null,y=null,v=null,A=null,b=null,S=null,E=!1,k=null,V=null,w=null,_=null,x=null,P=e.getParameter(35661),T=!1,M=0,L=e.getParameter(7938);-1!==L.indexOf("WebGL")?(M=parseFloat(/^WebGL\ ([0-9])/.exec(L)[1]),T=M>=1):-1!==L.indexOf("OpenGL ES")&&(M=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(L)[1]),T=M>=2);var I=null,R={},D=new C,N=new C;function q(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var s=0;s<i;s++)e.texImage2D(n+s,0,6408,1,1,0,6408,5121,r);return a}var O={};function B(n,r){(l[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),c[n]!==r)&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),c[n]=r)}function G(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function H(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}function F(t,i,r,a,s,o,l,u){if(0!==t){if(f||(G(3042),f=!0),5===t)s=s||i,o=o||r,l=l||a,i===g&&s===A||(e.blendEquationSeparate(n.convert(i),n.convert(s)),g=i,A=s),r===y&&a===v&&o===b&&l===S||(e.blendFuncSeparate(n.convert(r),n.convert(a),n.convert(o),n.convert(l)),y=r,v=a,b=o,S=l),m=t,E=null;else if(t!==m||u!==E){if(100===g&&100===A||(e.blendEquation(32774),g=100,A=100),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,v=null,b=null,S=null,m=t,E=u}}else f&&(H(3042),f=!1)}function Y(t){k!==t&&(t?e.frontFace(2304):e.frontFace(2305),k=t)}function z(t){0!==t?(G(2884),t!==V&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):H(2884),V=t}function U(t,n,i){t?(G(32823),_===n&&x===i||(e.polygonOffset(n,i),_=n,x=i)):H(32823)}function W(t){void 0===t&&(t=33984+P-1),I!==t&&(e.activeTexture(t),I=t)}return O[3553]=q(3553,3553,1),O[34067]=q(34067,34069,6),r.setClear(0,0,0,1),a.setClear(1),s.setClear(0),G(2929),a.setFunc(3),Y(!1),z(1),G(2884),F(0),{buffers:{color:r,depth:a,stencil:s},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(e){B(e,0)},enableAttributeAndDivisor:B,disableUnusedAttributes:function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==l[t]&&(e.disableVertexAttribArray(t),u[t]=0)},enable:G,disable:H,getCompressedTextureFormats:function(){if(null===d&&(d=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(34467),i=0;i<n.length;i++)d.push(n[i]);return d},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:F,setMaterial:function(e,t){2===e.side?H(2884):G(2884);var n=1===e.side;t&&(n=!n),Y(n),1===e.blending&&!1===e.transparent?F(0):F(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),r.setMask(e.colorWrite),U(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:Y,setCullFace:z,setLineWidth:function(t){t!==w&&(T&&e.lineWidth(t),w=t)},setPolygonOffset:U,setScissorTest:function(e){e?G(3089):H(3089)},activeTexture:W,bindTexture:function(t,n){null===I&&W();var i=R[I];void 0===i&&(i={type:void 0,texture:void 0},R[I]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||O[t]),i.type=t,i.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===D.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);h={},d=null,I=null,R={},p=null,m=null,k=null,V=null,r.reset(),a.reset(),s.reset()}}}function wn(e,t,n,i,r,s,o){var l,u={},c="undefined"!=typeof OffscreenCanvas;function h(e,t){return c?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function d(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var s=t?a.floorPowerOfTwo:Math.floor,o=s(r*e.width),u=s(r*e.height);void 0===l&&(l=h(o,u));var c=n?h(o,u):l;return c.width=o,c.height=u,c.getContext("2d").drawImage(e,0,0,o,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+u+")."),c}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function p(e){return a.isPowerOfTwo(e.width)&&a.isPowerOfTwo(e.height)}function f(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function m(t,n,r,a){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function g(e,n){if(!r.isWebGL2)return e;var i=e;return 6403===e&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===e&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===e&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325===i||33326===i||34842===i||34836===i?t.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function y(e){return 1003===e||1004===e||1005===e?9728:9729}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=i.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),i.remove(t)}(n),n.isVideoTexture&&delete u[n.id],o.memory.textures--}function A(t){var n=t.target;n.removeEventListener("dispose",A),function(t){var n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}(n),o.memory.textures--}var b=0;function S(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=e.id,n=o.render.frame;u[t]!==n&&(u[t]=n,e.update())}(e),e.version>0&&r.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void _(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}function E(t,a){var o=i.get(t);if(6===t.image.length)if(t.version>0&&o.__version!==t.version){w(o,t),n.activeTexture(33984+a),n.bindTexture(34067,o.__webglTexture),e.pixelStorei(37440,t.flipY);for(var l=t&&t.isCompressedTexture,u=t.image[0]&&t.image[0].isDataTexture,c=[],h=0;h<6;h++)c[h]=l||u?u?t.image[h].image:t.image[h]:d(t.image[h],!1,!0,r.maxCubemapSize);var y=c[0],v=p(y)||r.isWebGL2,A=s.convert(t.format),b=s.convert(t.type),S=g(A,b);V(34067,t,v);for(h=0;h<6;h++)if(l)for(var E,k=c[h].mipmaps,_=0,C=k.length;_<C;_++)E=k[_],1023!==t.format&&1022!==t.format?n.getCompressedTextureFormats().indexOf(A)>-1?n.compressedTexImage2D(34069+h,_,S,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+h,_,S,E.width,E.height,0,A,b,E.data);else u?n.texImage2D(34069+h,0,S,c[h].width,c[h].height,0,A,b,c[h].data):n.texImage2D(34069+h,0,S,A,b,c[h]);o.__maxMipLevel=l?k.length-1:0,f(t,v)&&m(34067,t,y.width,y.height),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+a),n.bindTexture(34067,o.__webglTexture)}function k(e,t){n.activeTexture(33984+t),n.bindTexture(34067,i.get(e).__webglTexture)}function V(n,a,o){var l;if(o?(e.texParameteri(n,10242,s.convert(a.wrapS)),e.texParameteri(n,10243,s.convert(a.wrapT)),32879!==n&&35866!==n||e.texParameteri(n,32882,s.convert(a.wrapR)),e.texParameteri(n,10240,s.convert(a.magFilter)),e.texParameteri(n,10241,s.convert(a.minFilter))):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,y(a.magFilter)),e.texParameteri(n,10241,y(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=t.get("EXT_texture_filter_anisotropic")){if(1015===a.type&&null===t.get("OES_texture_float_linear"))return;if(1016===a.type&&null===(r.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function w(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",v),t.__webglTexture=e.createTexture(),o.memory.textures++)}function _(t,i,a){var o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),w(t,i),n.activeTexture(33984+a),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment);var l=function(e){return!r.isWebGL2&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(i)&&!1===p(i.image),u=d(i.image,l,!1,r.maxTextureSize),c=p(u)||r.isWebGL2,h=s.convert(i.format),y=s.convert(i.type),v=g(h,y);V(o,i,c);var A,b=i.mipmaps;if(i.isDepthTexture){if(v=6402,1015===i.type){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");v=36012}else r.isWebGL2&&(v=33189);1026===i.format&&6402===v&&1012!==i.type&&1014!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=1012,y=s.convert(i.type)),1027===i.format&&(v=34041,1020!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=1020,y=s.convert(i.type))),n.texImage2D(3553,0,v,u.width,u.height,0,h,y,null)}else if(i.isDataTexture)if(b.length>0&&c){for(var S=0,E=b.length;S<E;S++)A=b[S],n.texImage2D(3553,S,v,A.width,A.height,0,h,y,A.data);i.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,v,u.width,u.height,0,h,y,u.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(S=0,E=b.length;S<E;S++)A=b[S],1023!==i.format&&1022!==i.format?n.getCompressedTextureFormats().indexOf(h)>-1?n.compressedTexImage2D(3553,S,v,A.width,A.height,0,A.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,S,v,A.width,A.height,0,h,y,A.data);t.__maxMipLevel=b.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,v,u.width,u.height,u.depth,0,h,y,u.data),t.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,v,u.width,u.height,u.depth,0,h,y,u.data),t.__maxMipLevel=0;else if(b.length>0&&c){for(S=0,E=b.length;S<E;S++)A=b[S],n.texImage2D(3553,S,v,h,y,A);i.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(3553,0,v,h,y,u),t.__maxMipLevel=0;f(i,c)&&m(3553,i,u.width,u.height),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function C(t,r,a,o){var l=s.convert(r.texture.format),u=s.convert(r.texture.type),c=g(l,u);n.texImage2D(o,0,c,r.width,r.height,0,l,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,o,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function x(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(i){var r=T(n);e.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(i){r=T(n);e.renderbufferStorageMultisample(36161,r,34041,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var a=g(s.convert(n.texture.format),s.convert(n.texture.type));if(i){r=T(n);e.renderbufferStorageMultisample(36161,r,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height)}e.bindRenderbuffer(36161,null)}function P(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),S(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(1026===n.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,r,0);else{if(1027!==n.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),x(n.__webglDepthbuffer[a],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),x(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function T(e){return r.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,e.samples):0}var M=!1,L=!1;this.allocateTextureUnit=function(){var e=b;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),b+=1,e},this.resetTextureUnits=function(){b=0},this.setTexture2D=S,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?_(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?_(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=E,this.setTextureCubeDynamic=k,this.setupRenderTarget=function(t){var a=i.get(t),l=i.get(t.texture);t.addEventListener("dispose",A),l.__webglTexture=e.createTexture(),o.memory.textures++;var u=!0===t.isWebGLRenderTargetCube,c=!0===t.isWebGLMultisampleRenderTarget,h=p(t)||r.isWebGL2;if(u){a.__webglFramebuffer=[];for(var d=0;d<6;d++)a.__webglFramebuffer[d]=e.createFramebuffer()}else if(a.__webglFramebuffer=e.createFramebuffer(),c)if(r.isWebGL2){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,a.__webglColorRenderbuffer);var y=g(s.convert(t.texture.format),s.convert(t.texture.type)),v=T(t);e.renderbufferStorageMultisample(36161,v,y,t.width,t.height),e.bindFramebuffer(36160,a.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,a.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),x(a.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,l.__webglTexture),V(34067,t.texture,h);for(d=0;d<6;d++)C(a.__webglFramebuffer[d],t,36064,34069+d);f(t.texture,h)&&m(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),V(3553,t.texture,h),C(a.__webglFramebuffer,t,36064,3553),f(t.texture,h)&&m(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&P(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(f(t,p(e)||r.isWebGL2)){var a=e.isWebGLRenderTargetCube?34067:3553,s=i.get(t).__webglTexture;n.bindTexture(a,s),m(a,t,e.width,e.height),n.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var n=i.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var a=t.width,s=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,a,s,0,0,a,s,o,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===M&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),M=!0),e=e.texture),S(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===L&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),L=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?E(e,t):k(e,t)}}function _n(e,t,n){return{convert:function(e){var i;if(1e3===e)return 10497;if(1001===e)return 33071;if(1002===e)return 33648;if(1003===e)return 9728;if(1004===e)return 9984;if(1005===e)return 9986;if(1006===e)return 9729;if(1007===e)return 9985;if(1008===e)return 9987;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e){if(n.isWebGL2)return 5131;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(100===e)return 32774;if(101===e)return 32778;if(102===e)return 32779;if(200===e)return 0;if(201===e)return 1;if(202===e)return 768;if(203===e)return 769;if(204===e)return 770;if(205===e)return 771;if(206===e)return 772;if(207===e)return 773;if(208===e)return 774;if(209===e)return 775;if(210===e)return 776;if((33776===e||33777===e||33778===e||33779===e)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(33776===e)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===e||35841===e||35842===e||35843===e)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(35840===e)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return e;if(103===e||104===e){if(n.isWebGL2){if(103===e)return 32775;if(104===e)return 32776}if(null!==(i=t.get("EXT_blend_minmax"))){if(103===e)return i.MIN_EXT;if(104===e)return i.MAX_EXT}}if(1020===e){if(n.isWebGL2)return 34042;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Cn(){ae.call(this),this.type="Group"}function xn(){ae.call(this),this.type="Camera",this.matrixWorldInverse=new N,this.projectionMatrix=new N,this.projectionMatrixInverse=new N}function Pn(e,t,n,i){xn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Tn(e){Pn.call(this),this.cameras=e||[]}Sn.prototype=Object.create(Pe.prototype),Sn.prototype.constructor=Sn,Sn.prototype.isMeshDepthMaterial=!0,Sn.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},En.prototype=Object.create(Pe.prototype),En.prototype.constructor=En,En.prototype.isMeshDistanceMaterial=!0,En.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Cn.prototype=Object.assign(Object.create(ae.prototype),{constructor:Cn,isGroup:!0}),xn.prototype=Object.assign(Object.create(ae.prototype),{constructor:xn,isCamera:!0,copy:function(e,t){return ae.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new l),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){ae.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Pn.prototype=Object.assign(Object.create(xn.prototype),{constructor:Pn,isPerspectiveCamera:!0,copy:function(e,t){return xn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*a.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*a.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*a.RAD2DEG*Math.atan(Math.tan(.5*a.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*a.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,s=this.view;if(null!==this.view&&this.view.enabled){var o=s.fullWidth,l=s.fullHeight;r+=s.offsetX*i/o,t-=s.offsetY*n/l,i*=s.width/o,n*=s.height/l}var u=this.filmOffset;0!==u&&(r+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=ae.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Tn.prototype=Object.assign(Object.create(Pn.prototype),{constructor:Tn,isArrayCamera:!0});var Mn,Ln,In,Rn,Dn,Nn,qn=new l,On=new l;function Bn(e,t,n){qn.setFromMatrixPosition(t.matrixWorld),On.setFromMatrixPosition(n.matrixWorld);var i=qn.distanceTo(On),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0],d=s*c,p=s*h,f=i/(-c+h),m=f*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var g=s+f,y=o+f,v=d-m,A=p+(i-m),b=l*o/y*g,S=u*o/y*g;e.projectionMatrix.makePerspective(v,A,b,S,g,y)}function Gn(e){var t=this,n=null,i=null,r=null,a=[],u=new N,c=new N,h=1,d="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",E,!1));var p=new N,f=new o,m=new l,g=new Pn;g.bounds=new C(0,0,.5,1),g.layers.enable(1);var y=new Pn;y.bounds=new C(.5,0,.5,1),y.layers.enable(2);var v=new Tn([g,y]);function A(){return null!==n&&!0===n.isPresenting}v.layers.enable(1),v.layers.enable(2);var b,S=new s;function E(){if(A()){var i=n.getEyeParameters("left"),r=i.renderWidth*h,a=i.renderHeight*h;b=e.getPixelRatio(),e.getSize(S),e.setDrawingBufferSize(2*r,a,1),w.start()}else t.enabled&&e.setDrawingBufferSize(S.width,S.height,b),w.stop()}var k=[];function V(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=t.length;n<r;n++){var a=t[n];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("Spatial Controller"))){if(i===e)return a;i++}}}this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new Cn).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),w.setContext(e)},this.setFramebufferScaleFactor=function(e){h=e},this.setFrameOfReferenceType=function(e){d=e},this.setPoseTarget=function(e){void 0!==e&&(r=e)},this.getCamera=function(e){var t="stage"===d?1.6:0;if(!1===A())return e.position.set(0,t,0),e.rotation.set(0,0,0),e;if(n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(i),"stage"===d){var s=n.stageParameters;s?u.fromArray(s.sittingToStandingTransform):u.makeTranslation(0,t,0)}var o=i.pose,l=null!==r?r:e;l.matrix.copy(u),l.matrix.decompose(l.position,l.quaternion,l.scale),null!==o.orientation&&(f.fromArray(o.orientation),l.quaternion.multiply(f)),null!==o.position&&(f.setFromRotationMatrix(u),m.fromArray(o.position),m.applyQuaternion(f),l.position.add(m)),l.updateMatrixWorld(),g.near=e.near,y.near=e.near,g.far=e.far,y.far=e.far,g.matrixWorldInverse.fromArray(i.leftViewMatrix),y.matrixWorldInverse.fromArray(i.rightViewMatrix),c.getInverse(u),"stage"===d&&(g.matrixWorldInverse.multiply(c),y.matrixWorldInverse.multiply(c));var h=l.parent;null!==h&&(p.getInverse(h.matrixWorld),g.matrixWorldInverse.multiply(p),y.matrixWorldInverse.multiply(p)),g.matrixWorld.getInverse(g.matrixWorldInverse),y.matrixWorld.getInverse(y.matrixWorldInverse),g.projectionMatrix.fromArray(i.leftProjectionMatrix),y.projectionMatrix.fromArray(i.rightProjectionMatrix),Bn(v,g,y);var b=n.getLayers();if(b.length){var S=b[0];null!==S.leftBounds&&4===S.leftBounds.length&&g.bounds.fromArray(S.leftBounds),null!==S.rightBounds&&4===S.rightBounds.length&&y.bounds.fromArray(S.rightBounds)}return function(){for(var e=0;e<a.length;e++){var t=a[e],n=V(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&t.position.set(.2,-.6,-.05),null!==i.position&&t.position.fromArray(i.position),null!==i.orientation&&t.quaternion.fromArray(i.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(u),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var r="Daydream Controller"===n.id?0:1;k[e]!==n.buttons[r].pressed&&(k[e]=n.buttons[r].pressed,!0===k[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),v},this.getStandingMatrix=function(){return u},this.isPresenting=A;var w=new Q;this.setAnimationLoop=function(e){w.setAnimationLoop(e),A()&&w.start()},this.submitFrame=function(){A()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",E)}}function Hn(e){var t=e.context,n=null,i=null,r=1,a=null,s="stage",o=null,l=[],u=[];function c(){return null!==i&&null!==a}var h=new Pn;h.layers.enable(1),h.viewport=new C;var d=new Pn;d.layers.enable(2),d.viewport=new C;var p=new Tn([h,d]);function f(e){var t=l[u.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function m(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),v.stop()}function g(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}p.layers.enable(1),p.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=l[e];return void 0===t&&((t=new Cn).matrixAutoUpdate=!1,t.visible=!1,l[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){r=e},this.setFrameOfReferenceType=function(e){s=e},this.setSession=function(n){null!==(i=n)&&(i.addEventListener("select",f),i.addEventListener("selectstart",f),i.addEventListener("selectend",f),i.addEventListener("end",m),i.baseLayer=new XRWebGLLayer(i,t,{framebufferScaleFactor:r}),i.requestFrameOfReference(s).then((function(t){a=t,e.setFramebuffer(i.baseLayer.framebuffer),v.setContext(i),v.start()})),u=i.getInputSources(),i.addEventListener("inputsourceschange",(function(){u=i.getInputSources(),console.log(u);for(var e=0;e<l.length;e++){l[e].userData.inputSource=u[e]}})))},this.getCamera=function(e){if(c()){var t=e.parent,n=p.cameras;g(p,t);for(var i=0;i<n.length;i++)g(n[i],t);e.matrixWorld.copy(p.matrixWorld);for(var r=e.children,a=(i=0,r.length);i<a;i++)r[i].updateMatrixWorld(!0);return Bn(p,h,d),p}return e},this.isPresenting=c;var y=null;var v=new Q;v.setAnimationLoop((function(e,t){if(null!==(o=t.getDevicePose(a)))for(var n=i.baseLayer,r=t.views,s=0;s<r.length;s++){var c=r[s],h=n.getViewport(c),d=o.getViewMatrix(c),f=p.cameras[s];f.matrix.fromArray(d).getInverse(f.matrix),f.projectionMatrix.fromArray(c.projectionMatrix),f.viewport.set(h.x,h.y,h.width,h.height),0===s&&p.matrix.copy(f.matrix)}for(s=0;s<l.length;s++){var m=l[s],g=u[s];if(g){var v=t.getInputPose(g,a);if(null!==v){"targetRay"in v?m.matrix.elements=v.targetRay.transformMatrix:"pointerMatrix"in v&&(m.matrix.elements=v.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}y&&y(e)})),this.setAnimationLoop=function(e){y=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new N},this.submitFrame=function(){}}function Fn(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,u=void 0!==e.antialias&&e.antialias,c=void 0===e.premultipliedAlpha||e.premultipliedAlpha,h=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,d=void 0!==e.powerPreference?e.powerPreference:"default",p=null,f=null;this.domElement=t,this.context=null,this.debug={checkShaderErrors:!1},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var m,g,y,v,A,b,S,E,k,V,w,_,x,P,T,L,I,R,q=this,B=!1,G=null,H=null,F=null,Y=-1,z={geometry:null,program:null,wireframe:!1},U=null,W=null,J=new C,Z=new C,$=null,ee=t.width,te=t.height,ne=1,ie=new C(0,0,ee,te),re=new C(0,0,ee,te),ae=!1,se=new D,oe=new Ke,le=!1,ue=!1,ce=new N,he=new l;function de(){return null===H?ne:1}try{var pe={alpha:i,depth:r,stencil:o,antialias:u,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:d};if(t.addEventListener("webglcontextlost",ye,!1),t.addEventListener("webglcontextrestored",ve,!1),null===(m=n||t.getContext("webgl",pe)||t.getContext("experimental-webgl",pe)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===m.getShaderPrecisionFormat&&(m.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Me){throw console.error("THREE.WebGLRenderer: "+Me.message),Me}function fe(){g=new Je(m),(y=new Qe(m,g,e)).isWebGL2||(g.get("WEBGL_depth_texture"),g.get("OES_texture_float"),g.get("OES_texture_half_float"),g.get("OES_texture_half_float_linear"),g.get("OES_standard_derivatives"),g.get("OES_element_index_uint"),g.get("ANGLE_instanced_arrays")),g.get("OES_texture_float_linear"),R=new _n(m,g,y),(v=new Vn(m,g,R,y)).scissor(Z.copy(re).multiplyScalar(ne)),v.viewport(J.copy(ie).multiplyScalar(ne)),A=new et(m),b=new hn,S=new wn(m,g,v,b,y,R,A),E=new K(m),k=new Ze(m,E,A),V=new it(k,A),T=new nt(m),w=new cn(q,g,y,S),_=new mn,x=new bn,P=new je(q,v,V,c),L=new Xe(m,g,A,y),I=new $e(m,g,A,y),A.programs=w.programs,q.context=m,q.capabilities=y,q.extensions=g,q.properties=b,q.renderLists=_,q.state=v,q.info=A}fe();var me="undefined"!=typeof navigator&&"xr"in navigator?new Hn(q):new Gn(q);this.vr=me;var ge=new kn(q,V,y.maxTextureSize);function ye(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),B=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),B=!1,fe()}function Ae(e){var t=e.target;t.removeEventListener("dispose",Ae),function(e){be(e),b.remove(e)}(t)}function be(e){var t=b.get(e).program;e.program=void 0,void 0!==t&&w.releaseProgram(t)}this.shadowMap=ge,this.getContext=function(){return m},this.getContextAttributes=function(){return m.getContextAttributes()},this.forceContextLoss=function(){var e=g.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=g.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(e){void 0!==e&&(ne=e,this.setSize(ee,te,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new s),e.set(ee,te)},this.setSize=function(e,n,i){me.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ee=e,te=n,t.width=e*ne,t.height=n*ne,!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new s),e.set(ee*ne,te*ne)},this.setDrawingBufferSize=function(e,n,i){ee=e,te=n,ne=i,t.width=e*i,t.height=n*i,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new C),e.copy(J)},this.getViewport=function(e){return e.copy(ie)},this.setViewport=function(e,t,n,i){e.isVector4?ie.set(e.x,e.y,e.z,e.w):ie.set(e,t,n,i),v.viewport(J.copy(ie).multiplyScalar(ne))},this.getScissor=function(e){return e.copy(re)},this.setScissor=function(e,t,n,i){e.isVector4?re.set(e.x,e.y,e.z,e.w):re.set(e,t,n,i),v.scissor(Z.copy(re).multiplyScalar(ne))},this.getScissorTest=function(){return ae},this.setScissorTest=function(e){v.setScissorTest(ae=e)},this.getClearColor=function(){return P.getClearColor()},this.setClearColor=function(){P.setClearColor.apply(P,arguments)},this.getClearAlpha=function(){return P.getClearAlpha()},this.setClearAlpha=function(){P.setClearAlpha.apply(P,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===n||n)&&(i|=1024),m.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ye,!1),t.removeEventListener("webglcontextrestored",ve,!1),_.dispose(),x.dispose(),b.dispose(),V.dispose(),me.dispose(),Ee.stop()},this.renderBufferImmediate=function(e,t){v.initAttributes();var n=b.get(e);e.hasPositions&&!n.position&&(n.position=m.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=m.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=m.createBuffer()),e.hasColors&&!n.color&&(n.color=m.createBuffer());var i=t.getAttributes();e.hasPositions&&(m.bindBuffer(34962,n.position),m.bufferData(34962,e.positionArray,35048),v.enableAttribute(i.position),m.vertexAttribPointer(i.position,3,5126,!1,0,0)),e.hasNormals&&(m.bindBuffer(34962,n.normal),m.bufferData(34962,e.normalArray,35048),v.enableAttribute(i.normal),m.vertexAttribPointer(i.normal,3,5126,!1,0,0)),e.hasUvs&&(m.bindBuffer(34962,n.uv),m.bufferData(34962,e.uvArray,35048),v.enableAttribute(i.uv),m.vertexAttribPointer(i.uv,2,5126,!1,0,0)),e.hasColors&&(m.bindBuffer(34962,n.color),m.bufferData(34962,e.colorArray,35048),v.enableAttribute(i.color),m.vertexAttribPointer(i.color,3,5126,!1,0,0)),v.disableUnusedAttributes(),m.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,a){var s=r.isMesh&&r.matrixWorld.determinant()<0;v.setMaterial(i,s);var o=Ce(e,t,i,r),l=!1;z.geometry===n.id&&z.program===o.id&&z.wireframe===(!0===i.wireframe)||(z.geometry=n.id,z.program=o.id,z.wireframe=!0===i.wireframe,l=!0),r.morphTargetInfluences&&(T.update(r,n,i,o),l=!0);var u,c=n.index,h=n.attributes.position,d=1;!0===i.wireframe&&(c=k.getWireframeAttribute(n),d=2);var p=L;null!==c&&(u=E.get(c),(p=I).setIndex(u)),l&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&&!y.isWebGL2&&null===g.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");v.initAttributes();var i=n.attributes,r=t.getAttributes(),a=e.defaultAttributeValues;for(var s in r){var o=r[s];if(o>=0){var l=i[s];if(void 0!==l){var u=l.normalized,c=l.itemSize,h=E.get(l);if(void 0===h)continue;var d=h.buffer,p=h.type,f=h.bytesPerElement;if(l.isInterleavedBufferAttribute){var A=l.data,b=A.stride,S=l.offset;A&&A.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(o,A.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=A.meshPerAttribute*A.count)):v.enableAttribute(o),m.bindBuffer(34962,d),m.vertexAttribPointer(o,c,p,u,b*f,S*f)}else l.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(o,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):v.enableAttribute(o),m.bindBuffer(34962,d),m.vertexAttribPointer(o,c,p,u,0,0)}else if(void 0!==a){var k=a[s];if(void 0!==k)switch(k.length){case 2:m.vertexAttrib2fv(o,k);break;case 3:m.vertexAttrib3fv(o,k);break;case 4:m.vertexAttrib4fv(o,k);break;default:m.vertexAttrib1fv(o,k)}}}}v.disableUnusedAttributes()}(i,o,n),null!==c&&m.bindBuffer(34963,u.buffer));var f=1/0;null!==c?f=c.count:void 0!==h&&(f=h.count);var A=n.drawRange.start*d,b=n.drawRange.count*d,S=null!==a?a.start*d:0,V=null!==a?a.count*d:1/0,w=Math.max(A,S),_=Math.min(f,A+b,S+V)-1,C=Math.max(0,_-w+1);if(0!==C){if(r.isMesh)if(!0===i.wireframe)v.setLineWidth(i.wireframeLinewidth*de()),p.setMode(1);else switch(r.drawMode){case 0:p.setMode(4);break;case 1:p.setMode(5);break;case 2:p.setMode(6)}else if(r.isLine){var x=i.linewidth;void 0===x&&(x=1),v.setLineWidth(x*de()),r.isLineSegments?p.setMode(1):r.isLineLoop?p.setMode(2):p.setMode(3)}else r.isPoints?p.setMode(0):r.isSprite&&p.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&p.renderInstances(n,w,C):p.render(w,C)}},this.compile=function(e,t){(f=x.get(e,t)).init(),e.traverse((function(e){e.isLight&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))})),f.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)_e(t.material[n],e.fog,t);else _e(t.material,e.fog,t)}))};var Se=null;var Ee=new Q;function ke(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||se.intersectsSprite(e)){i&&he.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ce);var r=V.update(e);(a=e.material).visible&&p.push(e,r,a,n,he.z,null)}}else if(e.isImmediateRenderObject)i&&he.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ce),p.push(e,null,e.material,n,he.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||se.intersectsObject(e))){i&&he.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ce);r=V.update(e);var a=e.material;if(Array.isArray(a))for(var s=r.groups,o=0,l=s.length;o<l;o++){var u=s[o],c=a[u.materialIndex];c&&c.visible&&p.push(e,r,c,n,he.z,u)}else a.visible&&p.push(e,r,a,n,he.z,null)}var h=e.children;for(o=0,l=h.length;o<l;o++)ke(h[o],t,n,i)}}function Ve(e,t,n,i){for(var r=0,a=e.length;r<a;r++){var s=e[r],o=s.object,l=s.geometry,u=void 0===i?s.material:i,c=s.group;if(n.isArrayCamera){W=n;for(var h=n.cameras,d=0,p=h.length;d<p;d++){var m=h[d];if(o.layers.test(m.layers)){if("viewport"in m)v.viewport(J.copy(m.viewport));else{var g=m.bounds,y=g.x*ee,A=g.y*te,b=g.z*ee,S=g.w*te;v.viewport(J.set(y,A,b,S).multiplyScalar(ne))}f.setupLights(m),we(o,t,m,l,u,c)}}}else W=null,we(o,t,n,l,u,c)}}function we(e,t,n,i,r,a){if(e.onBeforeRender(q,t,n,i,r,a),f=x.get(t,W||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){v.setMaterial(r);var s=Ce(n,t.fog,r,e);z.geometry=null,z.program=null,z.wireframe=!1,function(e,t){e.render((function(e){q.renderBufferImmediate(e,t)}))}(e,s)}else q.renderBufferDirect(n,t.fog,i,r,e,a);e.onAfterRender(q,t,n,i,r,a),f=x.get(t,W||n)}function _e(e,t,n){var i=b.get(e),r=f.state.lights,a=f.state.shadowsArray,s=i.lightsHash,o=r.state.hash,l=w.getParameters(e,r.state,a,t,oe.numPlanes,oe.numIntersection,n),u=w.getProgramCode(e,l),c=i.program,h=!0;if(void 0===c)e.addEventListener("dispose",Ae);else if(c.code!==u)be(e);else if(s.stateID!==o.stateID||s.directionalLength!==o.directionalLength||s.pointLength!==o.pointLength||s.spotLength!==o.spotLength||s.rectAreaLength!==o.rectAreaLength||s.hemiLength!==o.hemiLength||s.shadowsLength!==o.shadowsLength)s.stateID=o.stateID,s.directionalLength=o.directionalLength,s.pointLength=o.pointLength,s.spotLength=o.spotLength,s.rectAreaLength=o.rectAreaLength,s.hemiLength=o.hemiLength,s.shadowsLength=o.shadowsLength,h=!1;else{if(void 0!==l.shaderID)return;h=!1}if(h){if(l.shaderID){var d=X[l.shaderID];i.shader={name:e.type,uniforms:O(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,q),u=w.getProgramCode(e,l),c=w.acquireProgram(e,i.shader,l,u),i.program=c,e.program=c}var p=c.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<q.maxMorphTargets;m++)p["morphTarget"+m]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(m=0;m<q.maxMorphNormals;m++)p["morphNormal"+m]>=0&&e.numSupportedMorphNormals++}var g=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=oe.numPlanes,i.numIntersection=oe.numIntersection,g.clippingPlanes=oe.uniform),i.fog=t,void 0===s&&(i.lightsHash=s={}),s.stateID=o.stateID,s.directionalLength=o.directionalLength,s.pointLength=o.pointLength,s.spotLength=o.spotLength,s.rectAreaLength=o.rectAreaLength,s.hemiLength=o.hemiLength,s.shadowsLength=o.shadowsLength,e.lights&&(g.ambientLightColor.value=r.state.ambient,g.lightProbe.value=r.state.probe,g.directionalLights.value=r.state.directional,g.spotLights.value=r.state.spot,g.rectAreaLights.value=r.state.rectArea,g.pointLights.value=r.state.point,g.hemisphereLights.value=r.state.hemi,g.directionalShadowMap.value=r.state.directionalShadowMap,g.directionalShadowMatrix.value=r.state.directionalShadowMatrix,g.spotShadowMap.value=r.state.spotShadowMap,g.spotShadowMatrix.value=r.state.spotShadowMatrix,g.pointShadowMap.value=r.state.pointShadowMap,g.pointShadowMatrix.value=r.state.pointShadowMatrix);var y=i.program.getUniforms(),v=Jt.seqWithValue(y.seq,g);i.uniformsList=v}function Ce(e,t,n,i){S.resetTextureUnits();var r=b.get(n),s=f.state.lights,o=r.lightsHash,l=s.state.hash;if(le&&(ue||e!==U)){var u=e===U&&n.id===Y;oe.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,u)}!1===n.needsUpdate&&(void 0===r.program||n.fog&&r.fog!==t?n.needsUpdate=!0:(!n.lights||o.stateID===l.stateID&&o.directionalLength===l.directionalLength&&o.pointLength===l.pointLength&&o.spotLength===l.spotLength&&o.rectAreaLength===l.rectAreaLength&&o.hemiLength===l.hemiLength&&o.shadowsLength===l.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===oe.numPlanes&&r.numIntersection===oe.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(_e(n,t,i),n.needsUpdate=!1);var c,h,d=!1,p=!1,g=!1,A=r.program,E=A.getUniforms(),k=r.shader.uniforms;if(v.useProgram(A.program)&&(d=!0,p=!0,g=!0),n.id!==Y&&(Y=n.id,p=!0),d||U!==e){if(E.setValue(m,"projectionMatrix",e.projectionMatrix),y.logarithmicDepthBuffer&&E.setValue(m,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),U!==e&&(U=e,p=!0,g=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var V=E.map.cameraPosition;void 0!==V&&V.setValue(m,he.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&E.setValue(m,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){E.setOptional(m,i,"bindMatrix"),E.setOptional(m,i,"bindMatrixInverse");var w=i.skeleton;if(w){var _=w.bones;if(y.floatVertexTextures){if(void 0===w.boneTexture){var C=Math.sqrt(4*_.length);C=a.ceilPowerOfTwo(C),C=Math.max(C,4);var x=new Float32Array(C*C*4);x.set(w.boneMatrices);var P=new M(x,C,C,1023,1015);P.needsUpdate=!0,w.boneMatrices=x,w.boneTexture=P,w.boneTextureSize=C}E.setValue(m,"boneTexture",w.boneTexture,S),E.setValue(m,"boneTextureSize",w.boneTextureSize)}else E.setOptional(m,w,"boneMatrices")}}return p&&(E.setValue(m,"toneMappingExposure",q.toneMappingExposure),E.setValue(m,"toneMappingWhitePoint",q.toneMappingWhitePoint),n.lights&&(h=g,(c=k).ambientLightColor.needsUpdate=h,c.lightProbe.needsUpdate=h,c.directionalLights.needsUpdate=h,c.pointLights.needsUpdate=h,c.spotLights.needsUpdate=h,c.rectAreaLights.needsUpdate=h,c.hemisphereLights.needsUpdate=h),t&&n.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(k,t),n.isMeshBasicMaterial?xe(k,n):n.isMeshLambertMaterial?(xe(k,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(k,n)):n.isMeshPhongMaterial?(xe(k,n),n.isMeshToonMaterial?function(e,t){Pe(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(k,n):Pe(k,n)):n.isMeshStandardMaterial?(xe(k,n),n.isMeshPhysicalMaterial?function(e,t){Te(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(k,n):Te(k,n)):n.isMeshMatcapMaterial?(xe(k,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(k,n)):n.isMeshDepthMaterial?(xe(k,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(k,n)):n.isMeshDistanceMaterial?(xe(k,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(k,n)):n.isMeshNormalMaterial?(xe(k,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(k,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(k,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(k,n)):n.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*ne,e.scale.value=.5*te,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(k,n):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(k,n):n.isShadowMaterial&&(k.color.value.copy(n.color),k.opacity.value=n.opacity),void 0!==k.ltc_1&&(k.ltc_1.value=j.LTC_1),void 0!==k.ltc_2&&(k.ltc_2.value=j.LTC_2),Jt.upload(m,r.uniformsList,k,S)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Jt.upload(m,r.uniformsList,k,S),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&E.setValue(m,"center",i.center),E.setValue(m,"modelViewMatrix",i.modelViewMatrix),E.setValue(m,"normalMatrix",i.normalMatrix),E.setValue(m,"modelMatrix",i.matrixWorld),A}function xe(e,t){var n;e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=b.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function Pe(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Te(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}Ee.setAnimationLoop((function(e){me.isPresenting()||Se&&Se(e)})),"undefined"!=typeof window&&Ee.setContext(window),this.setAnimationLoop=function(e){Se=e,me.setAnimationLoop(e),Ee.start()},this.render=function(e,t){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),t&&t.isCamera){if(!B){z.geometry=null,z.program=null,z.wireframe=!1,Y=-1,U=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),me.enabled&&(t=me.getCamera(t)),(f=x.get(e,t)).init(),e.onBeforeRender(q,e,t,n||H),ce.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),se.setFromMatrix(ce),ue=this.localClippingEnabled,le=oe.init(this.clippingPlanes,ue,t),(p=_.get(e,t)).init(),ke(e,t,0,q.sortObjects),!0===q.sortObjects&&p.sort(),le&&oe.beginShadows();var r=f.state.shadowsArray;ge.render(r,e,t),f.setupLights(t),le&&oe.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),P.render(p,e,t,i);var a=p.opaque,s=p.transparent;if(e.overrideMaterial){var o=e.overrideMaterial;a.length&&Ve(a,e,t,o),s.length&&Ve(s,e,t,o)}else a.length&&Ve(a,e,t),s.length&&Ve(s,e,t);e.onAfterRender(q,e,t),null!==H&&(S.updateRenderTargetMipmap(H),S.updateMultisampleRenderTarget(H)),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),me.enabled&&me.submitFrame(),p=null,f=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){G=e},this.getRenderTarget=function(){return H},this.setRenderTarget=function(e,t,n){H=e,e&&void 0===b.get(e).__webglFramebuffer&&S.setupRenderTarget(e);var i=G,r=!1;if(e){var a=b.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(i=a[t||0],r=!0):i=e.isWebGLMultisampleRenderTarget?b.get(e).__webglMultisampledFramebuffer:a,J.copy(e.viewport),Z.copy(e.scissor),$=e.scissorTest}else J.copy(ie).multiplyScalar(ne),Z.copy(re).multiplyScalar(ne),$=ae;if(F!==i&&(m.bindFramebuffer(36160,i),F=i),v.viewport(J),v.scissor(Z),v.setScissorTest($),r){var s=b.get(e.texture);m.framebufferTexture2D(36160,36064,34069+(t||0),s.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,i,r,a){if(e&&e.isWebGLRenderTarget){var s=b.get(e).__webglFramebuffer;if(s){var o=!1;s!==F&&(m.bindFramebuffer(36160,s),o=!0);try{var l=e.texture,u=l.format,c=l.type;if(1023!==u&&R.convert(u)!==m.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(1009===c||R.convert(c)===m.getParameter(35738)||1015===c&&(y.isWebGL2||g.get("OES_texture_float")||g.get("WEBGL_color_buffer_float"))||1016===c&&(y.isWebGL2?g.get("EXT_color_buffer_float"):g.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===m.checkFramebufferStatus(36160)?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&m.readPixels(t,n,i,r,R.convert(u),R.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&m.bindFramebuffer(36160,F)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,a=R.convert(t.format);S.setTexture2D(t,0),m.copyTexImage2D(3553,n||0,a,e.x,e.y,i,r,0)},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,a=t.image.height,s=R.convert(n.format),o=R.convert(n.type);S.setTexture2D(n,0),t.isDataTexture?m.texSubImage2D(3553,i||0,e.x,e.y,r,a,s,o,t.image.data):m.texSubImage2D(3553,i||0,e.x,e.y,s,o,t.image)}}function Yn(e,t){this.name="",this.color=new U(e),this.density=void 0!==t?t:25e-5}function zn(e,t,n){this.name="",this.color=new U(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Un(){ae.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Wn(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function jn(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Xn(e){Pe.call(this),this.type="SpriteMaterial",this.color=new U(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function Qn(e){if(ae.call(this),this.type="Sprite",void 0===Mn){Mn=new ke;var t=new Wn(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Mn.setIndex([0,1,2,0,2,3]),Mn.addAttribute("position",new jn(t,3,0,!1)),Mn.addAttribute("uv",new jn(t,2,3,!1))}this.geometry=Mn,this.material=void 0!==e?e:new Xn,this.center=new s(.5,.5)}function Kn(){ae.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Jn(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),We.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new N,this.bindMatrixInverse=new N}function Zn(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new N)}}function $n(){ae.call(this),this.type="Bone"}function ei(e){Pe.call(this),this.type="LineBasicMaterial",this.color=new U(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function ti(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),ae.call(this),this.type="Line",this.geometry=void 0!==e?e:new ke,this.material=void 0!==t?t:new ei({color:16777215*Math.random()})}function ni(e,t){ti.call(this,e,t),this.type="LineSegments"}function ii(e,t){ti.call(this,e,t),this.type="LineLoop"}function ri(e){Pe.call(this),this.type="PointsMaterial",this.color=new U(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function ai(e,t){ae.call(this),this.type="Points",this.geometry=void 0!==e?e:new ke,this.material=void 0!==t?t:new ri({color:16777215*Math.random()})}function si(e,t,n,i,r,a,s,o,l){_.call(this,e,t,n,i,r,a,s,o,l),this.format=void 0!==s?s:1022,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1}function oi(e,t,n,i,r,a,s,o,l,u,c,h){_.call(this,null,a,s,o,l,u,i,r,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function li(e,t,n,i,r,a,s,o,l){_.call(this,e,t,n,i,r,a,s,o,l),this.needsUpdate=!0}function ui(e,t,n,i,r,a,s,o,l,u){if(1026!==(u=void 0!==u?u:1026)&&1027!==u)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===u&&(n=1012),void 0===n&&1027===u&&(n=1020),_.call(this,null,i,r,a,s,o,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==o?o:1003,this.flipY=!1,this.generateMipmaps=!1}function ci(e){ke.call(this),this.type="WireframeGeometry";var t,n,i,r,a,s,o,u,c,h,d=[],p=[0,0],f={},m=["a","b","c"];if(e&&e.isGeometry){var g=e.faces;for(t=0,i=g.length;t<i;t++){var y=g[t];for(n=0;n<3;n++)o=y[m[n]],u=y[m[(n+1)%3]],p[0]=Math.min(o,u),p[1]=Math.max(o,u),void 0===f[c=p[0]+","+p[1]]&&(f[c]={index1:p[0],index2:p[1]})}for(c in f)s=f[c],h=e.vertices[s.index1],d.push(h.x,h.y,h.z),h=e.vertices[s.index2],d.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var v,A,b,S,E,k,V;if(h=new l,null!==e.index){for(v=e.attributes.position,A=e.index,0===(b=e.groups).length&&(b=[{start:0,count:A.count,materialIndex:0}]),r=0,a=b.length;r<a;++r)for(t=E=(S=b[r]).start,i=E+S.count;t<i;t+=3)for(n=0;n<3;n++)o=A.getX(t+n),u=A.getX(t+(n+1)%3),p[0]=Math.min(o,u),p[1]=Math.max(o,u),void 0===f[c=p[0]+","+p[1]]&&(f[c]={index1:p[0],index2:p[1]});for(c in f)s=f[c],h.fromBufferAttribute(v,s.index1),d.push(h.x,h.y,h.z),h.fromBufferAttribute(v,s.index2),d.push(h.x,h.y,h.z)}else for(t=0,i=(v=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)k=3*t+n,h.fromBufferAttribute(v,k),d.push(h.x,h.y,h.z),V=3*t+(n+1)%3,h.fromBufferAttribute(v,V),d.push(h.x,h.y,h.z)}this.addAttribute("position",new ve(d,3))}function hi(e,t,n){ue.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new di(e,t,n)),this.mergeVertices()}function di(e,t,n){ke.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,a=[],s=[],o=[],u=[],c=1e-5,h=new l,d=new l,p=new l,f=new l,m=new l;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var g=t+1;for(i=0;i<=n;i++){var y=i/n;for(r=0;r<=t;r++){var v=r/t;e(v,y,d),s.push(d.x,d.y,d.z),v-c>=0?(e(v-c,y,p),f.subVectors(d,p)):(e(v+c,y,p),f.subVectors(p,d)),y-c>=0?(e(v,y-c,p),m.subVectors(d,p)):(e(v,y+c,p),m.subVectors(p,d)),h.crossVectors(f,m).normalize(),o.push(h.x,h.y,h.z),u.push(v,y)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var A=i*g+r,b=i*g+r+1,S=(i+1)*g+r+1,E=(i+1)*g+r;a.push(A,b,E),a.push(b,S,E)}this.setIndex(a),this.addAttribute("position",new ve(s,3)),this.addAttribute("normal",new ve(o,3)),this.addAttribute("uv",new ve(u,2))}function pi(e,t,n,i){ue.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new fi(e,t,n,i)),this.mergeVertices()}function fi(e,t,n,i){ke.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var r=[],a=[];function o(e,t,n,i){var r,a,s=Math.pow(2,i),o=[];for(r=0;r<=s;r++){o[r]=[];var l=e.clone().lerp(n,r/s),c=t.clone().lerp(n,r/s),h=s-r;for(a=0;a<=h;a++)o[r][a]=0===a&&r===s?l:l.clone().lerp(c,a/h)}for(r=0;r<s;r++)for(a=0;a<2*(s-r)-1;a++){var d=Math.floor(a/2);a%2==0?(u(o[r][d+1]),u(o[r+1][d]),u(o[r][d])):(u(o[r][d+1]),u(o[r+1][d+1]),u(o[r+1][d]))}}function u(e){r.push(e.x,e.y,e.z)}function c(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function h(e,t,n,i){i<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=i/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}function p(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){for(var n=new l,i=new l,r=new l,a=0;a<t.length;a+=3)c(t[a+0],n),c(t[a+1],i),c(t[a+2],r),o(n,i,r,e)}(i=i||0),function(e){for(var t=new l,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){for(var e=new l,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=d(e)/2/Math.PI+.5,i=p(e)/Math.PI+.5;a.push(n,1-i)}(function(){for(var e=new l,t=new l,n=new l,i=new l,o=new s,u=new s,c=new s,p=0,f=0;p<r.length;p+=9,f+=6){e.set(r[p+0],r[p+1],r[p+2]),t.set(r[p+3],r[p+4],r[p+5]),n.set(r[p+6],r[p+7],r[p+8]),o.set(a[f+0],a[f+1]),u.set(a[f+2],a[f+3]),c.set(a[f+4],a[f+5]),i.copy(e).add(t).add(n).divideScalar(3);var m=d(i);h(o,f+0,e,m),h(u,f+2,t,m),h(c,f+4,n,m)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],n=a[e+2],i=a[e+4],r=Math.max(t,n,i),s=Math.min(t,n,i);r>.9&&s<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new ve(r,3)),this.addAttribute("normal",new ve(r.slice(),3)),this.addAttribute("uv",new ve(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function mi(e,t){ue.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new gi(e,t)),this.mergeVertices()}function gi(e,t){fi.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function yi(e,t){ue.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new vi(e,t)),this.mergeVertices()}function vi(e,t){fi.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ai(e,t){ue.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new bi(e,t)),this.mergeVertices()}function bi(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];fi.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Si(e,t){ue.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ei(e,t)),this.mergeVertices()}function Ei(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];fi.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ki(e,t,n,i,r,a){ue.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new Vi(e,t,n,i,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function Vi(e,t,n,i,r){ke.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,u,c=new l,h=new l,d=new s,p=new l,f=[],m=[],g=[],y=[];function v(r){p=e.getPointAt(r/t,p);var s=a.normals[r],o=a.binormals[r];for(u=0;u<=i;u++){var l=u/i*Math.PI*2,d=Math.sin(l),g=-Math.cos(l);h.x=g*s.x+d*o.x,h.y=g*s.y+d*o.y,h.z=g*s.z+d*o.z,h.normalize(),m.push(h.x,h.y,h.z),c.x=p.x+n*h.x,c.y=p.y+n*h.y,c.z=p.z+n*h.z,f.push(c.x,c.y,c.z)}}!function(){for(o=0;o<t;o++)v(o);v(!1===r?t:0),function(){for(o=0;o<=t;o++)for(u=0;u<=i;u++)d.x=o/t,d.y=u/i,g.push(d.x,d.y)}(),function(){for(u=1;u<=t;u++)for(o=1;o<=i;o++){var e=(i+1)*(u-1)+(o-1),n=(i+1)*u+(o-1),r=(i+1)*u+o,a=(i+1)*(u-1)+o;y.push(e,n,a),y.push(n,r,a)}}()}(),this.setIndex(y),this.addAttribute("position",new ve(f,3)),this.addAttribute("normal",new ve(m,3)),this.addAttribute("uv",new ve(g,2))}function wi(e,t,n,i,r,a,s){ue.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new _i(e,t,n,i,r,a)),this.mergeVertices()}function _i(e,t,n,i,r,a){ke.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var s,o,u=[],c=[],h=[],d=[],p=new l,f=new l,m=new l,g=new l,y=new l,v=new l,A=new l;for(s=0;s<=n;++s){var b=s/n*r*Math.PI*2;for(x(b,r,a,e,m),x(b+.01,r,a,e,g),v.subVectors(g,m),A.addVectors(g,m),y.crossVectors(v,A),A.crossVectors(y,v),y.normalize(),A.normalize(),o=0;o<=i;++o){var S=o/i*Math.PI*2,E=-t*Math.cos(S),k=t*Math.sin(S);p.x=m.x+(E*A.x+k*y.x),p.y=m.y+(E*A.y+k*y.y),p.z=m.z+(E*A.z+k*y.z),c.push(p.x,p.y,p.z),f.subVectors(p,m).normalize(),h.push(f.x,f.y,f.z),d.push(s/n),d.push(o/i)}}for(o=1;o<=n;o++)for(s=1;s<=i;s++){var V=(i+1)*(o-1)+(s-1),w=(i+1)*o+(s-1),_=(i+1)*o+s,C=(i+1)*(o-1)+s;u.push(V,w,C),u.push(w,_,C)}function x(e,t,n,i,r){var a=Math.cos(e),s=Math.sin(e),o=n/t*e,l=Math.cos(o);r.x=i*(2+l)*.5*a,r.y=i*(2+l)*s*.5,r.z=i*Math.sin(o)*.5}this.setIndex(u),this.addAttribute("position",new ve(c,3)),this.addAttribute("normal",new ve(h,3)),this.addAttribute("uv",new ve(d,2))}function Ci(e,t,n,i,r){ue.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new xi(e,t,n,i,r)),this.mergeVertices()}function xi(e,t,n,i,r){ke.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,s,o=[],u=[],c=[],h=[],d=new l,p=new l,f=new l;for(a=0;a<=n;a++)for(s=0;s<=i;s++){var m=s/i*r,g=a/n*Math.PI*2;p.x=(e+t*Math.cos(g))*Math.cos(m),p.y=(e+t*Math.cos(g))*Math.sin(m),p.z=t*Math.sin(g),u.push(p.x,p.y,p.z),d.x=e*Math.cos(m),d.y=e*Math.sin(m),f.subVectors(p,d).normalize(),c.push(f.x,f.y,f.z),h.push(s/i),h.push(a/n)}for(a=1;a<=n;a++)for(s=1;s<=i;s++){var y=(i+1)*a+s-1,v=(i+1)*(a-1)+s-1,A=(i+1)*(a-1)+s,b=(i+1)*a+s;o.push(y,v,b),o.push(v,A,b)}this.setIndex(o),this.addAttribute("position",new ve(u,3)),this.addAttribute("normal",new ve(c,3)),this.addAttribute("uv",new ve(h,2))}Object.assign(Yn.prototype,{isFogExp2:!0,clone:function(){return new Yn(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(zn.prototype,{isFog:!0,clone:function(){return new zn(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Un.prototype=Object.assign(Object.create(ae.prototype),{constructor:Un,isScene:!0,copy:function(e,t){return ae.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=ae.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Wn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Wn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(jn.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(jn.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),Xn.prototype=Object.create(Pe.prototype),Xn.prototype.constructor=Xn,Xn.prototype.isSpriteMaterial=!0,Xn.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},Qn.prototype=Object.assign(Object.create(ae.prototype),{constructor:Qn,isSprite:!0,raycast:function(){var e=new l,t=new l,n=new l,i=new s,r=new s,a=new N,o=new l,u=new l,c=new l,h=new s,d=new s,p=new s;function f(e,t,n,s,o,l){i.subVectors(e,n).addScalar(.5).multiply(s),void 0!==o?(r.x=l*i.x-o*i.y,r.y=o*i.x+l*i.y):r.copy(i),e.copy(t),e.x+=r.x,e.y+=r.y,e.applyMatrix4(a)}return function(i,r){t.setFromMatrixScale(this.matrixWorld),a.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var l,m,g=this.material.rotation;0!==g&&(m=Math.cos(g),l=Math.sin(g));var y=this.center;f(o.set(-.5,-.5,0),n,y,t,l,m),f(u.set(.5,-.5,0),n,y,t,l,m),f(c.set(.5,.5,0),n,y,t,l,m),h.set(0,0),d.set(1,0),p.set(1,1);var v=i.ray.intersectTriangle(o,u,c,!1,e);if(null!==v||(f(u.set(-.5,.5,0),n,y,t,l,m),d.set(0,1),null!==(v=i.ray.intersectTriangle(o,c,u,!1,e)))){var A=i.ray.origin.distanceTo(e);A<i.near||A>i.far||r.push({distance:A,point:e.clone(),uv:ze.getUV(e,o,u,c,h,d,p,new s),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return ae.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Kn.prototype=Object.assign(Object.create(ae.prototype),{constructor:Kn,isLOD:!0,copy:function(e){ae.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(Ln=new l,function(e,t){Ln.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Ln);this.getObjectForDistance(n).raycast(e,t)}),update:function(){var e=new l,t=new l;return function(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);i[0].object.visible=!0;for(var a=1,s=i.length;a<s&&r>=i[a].distance;a++)i[a-1].object.visible=!1,i[a].object.visible=!0;for(;a<s;a++)i[a].object.visible=!1}}}(),toJSON:function(e){var t=ae.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Jn.prototype=Object.assign(Object.create(We.prototype),{constructor:Jn,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new C,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){We.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(Zn.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new N;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(In=new N,Rn=new N,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var s=e[r]?e[r].matrixWorld:Rn;In.multiplyMatrices(s,t[r]),In.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)}),clone:function(){return new Zn(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),$n.prototype=Object.assign(Object.create(ae.prototype),{constructor:$n,isBone:!0}),ei.prototype=Object.create(Pe.prototype),ei.prototype.constructor=ei,ei.prototype.isLineBasicMaterial=!0,ei.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},ti.prototype=Object.assign(Object.create(ae.prototype),{constructor:ti,isLine:!0,computeLineDistances:(Dn=new l,Nn=new l,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)Dn.fromBufferAttribute(t,i-1),Nn.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Dn.distanceTo(Nn);e.addAttribute("lineDistance",new ve(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices;for((n=e.lineDistances)[0]=0,i=1,r=a.length;i<r;i++)n[i]=n[i-1],n[i]+=a[i-1].distanceTo(a[i])}return this}),raycast:function(){var e=new N,t=new Ye,n=new I;return function(i,r){var a=i.linePrecision,s=this.geometry,o=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(o),n.radius+=a,!1!==i.ray.intersectsSphere(n)){e.getInverse(o),t.copy(i.ray).applyMatrix4(e);var u=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,h=new l,d=new l,p=new l,f=new l,m=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var g=s.index,y=s.attributes.position.array;if(null!==g)for(var v=g.array,A=0,b=v.length-1;A<b;A+=m){var S=v[A],E=v[A+1];if(h.fromArray(y,3*S),d.fromArray(y,3*E),!(t.distanceSqToSegment(h,d,f,p)>c))f.applyMatrix4(this.matrixWorld),(w=i.ray.origin.distanceTo(f))<i.near||w>i.far||r.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}else for(A=0,b=y.length/3-1;A<b;A+=m){if(h.fromArray(y,3*A),d.fromArray(y,3*A+3),!(t.distanceSqToSegment(h,d,f,p)>c))f.applyMatrix4(this.matrixWorld),(w=i.ray.origin.distanceTo(f))<i.near||w>i.far||r.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else if(s.isGeometry){var k=s.vertices,V=k.length;for(A=0;A<V-1;A+=m){var w;if(!(t.distanceSqToSegment(k[A],k[A+1],f,p)>c))f.applyMatrix4(this.matrixWorld),(w=i.ray.origin.distanceTo(f))<i.near||w>i.far||r.push({distance:w,point:p.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ni.prototype=Object.assign(Object.create(ti.prototype),{constructor:ni,isLineSegments:!0,computeLineDistances:function(){var e=new l,t=new l;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],a=0,s=i.count;a<s;a+=2)e.fromBufferAttribute(i,a),t.fromBufferAttribute(i,a+1),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+e.distanceTo(t);n.addAttribute("lineDistance",new ve(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var o=n.vertices;for(r=n.lineDistances,a=0,s=o.length;a<s;a+=2)e.copy(o[a]),t.copy(o[a+1]),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+e.distanceTo(t)}return this}}()}),ii.prototype=Object.assign(Object.create(ti.prototype),{constructor:ii,isLineLoop:!0}),ri.prototype=Object.create(Pe.prototype),ri.prototype.constructor=ri,ri.prototype.isPointsMaterial=!0,ri.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},ai.prototype=Object.assign(Object.create(ae.prototype),{constructor:ai,isPoints:!0,raycast:function(){var e=new N,t=new Ye,n=new I;return function(i,r){var a=this,s=this.geometry,o=this.matrixWorld,u=i.params.Points.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(o),n.radius+=u,!1!==i.ray.intersectsSphere(n)){e.getInverse(o),t.copy(i.ray).applyMatrix4(e);var c=u/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,d=new l,p=new l;if(s.isBufferGeometry){var f=s.index,m=s.attributes.position.array;if(null!==f)for(var g=f.array,y=0,v=g.length;y<v;y++){var A=g[y];d.fromArray(m,3*A),E(d,A)}else{y=0;for(var b=m.length/3;y<b;y++)d.fromArray(m,3*y),E(d,y)}}else{var S=s.vertices;for(y=0,b=S.length;y<b;y++)E(S[y],y)}}function E(e,n){var s=t.distanceSqToPoint(e);if(s<h){t.closestPointToPoint(e,p),p.applyMatrix4(o);var l=i.ray.origin.distanceTo(p);if(l<i.near||l>i.far)return;r.push({distance:l,distanceToRay:Math.sqrt(s),point:p.clone(),index:n,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),si.prototype=Object.assign(Object.create(_.prototype),{constructor:si,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),oi.prototype=Object.create(_.prototype),oi.prototype.constructor=oi,oi.prototype.isCompressedTexture=!0,li.prototype=Object.create(_.prototype),li.prototype.constructor=li,li.prototype.isCanvasTexture=!0,ui.prototype=Object.create(_.prototype),ui.prototype.constructor=ui,ui.prototype.isDepthTexture=!0,ci.prototype=Object.create(ke.prototype),ci.prototype.constructor=ci,hi.prototype=Object.create(ue.prototype),hi.prototype.constructor=hi,di.prototype=Object.create(ke.prototype),di.prototype.constructor=di,pi.prototype=Object.create(ue.prototype),pi.prototype.constructor=pi,fi.prototype=Object.create(ke.prototype),fi.prototype.constructor=fi,mi.prototype=Object.create(ue.prototype),mi.prototype.constructor=mi,gi.prototype=Object.create(fi.prototype),gi.prototype.constructor=gi,yi.prototype=Object.create(ue.prototype),yi.prototype.constructor=yi,vi.prototype=Object.create(fi.prototype),vi.prototype.constructor=vi,Ai.prototype=Object.create(ue.prototype),Ai.prototype.constructor=Ai,bi.prototype=Object.create(fi.prototype),bi.prototype.constructor=bi,Si.prototype=Object.create(ue.prototype),Si.prototype.constructor=Si,Ei.prototype=Object.create(fi.prototype),Ei.prototype.constructor=Ei,ki.prototype=Object.create(ue.prototype),ki.prototype.constructor=ki,Vi.prototype=Object.create(ke.prototype),Vi.prototype.constructor=Vi,Vi.prototype.toJSON=function(){var e=ke.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},wi.prototype=Object.create(ue.prototype),wi.prototype.constructor=wi,_i.prototype=Object.create(ke.prototype),_i.prototype.constructor=_i,Ci.prototype=Object.create(ue.prototype),Ci.prototype.constructor=Ci,xi.prototype=Object.create(ke.prototype),xi.prototype.constructor=xi;var Pi=function(e,t,n){n=n||2;var i,r,a,s,o,l,u,c=t&&t.length,h=c?t[0]*n:e.length,d=Ti(e,0,h,n,!0),p=[];if(!d)return p;if(c&&(d=function(e,t,n,i){var r,a,s,o,l,u=[];for(r=0,a=t.length;r<a;r++)s=t[r]*i,o=r<a-1?t[r+1]*i:e.length,(l=Ti(e,s,o,i,!1))===l.next&&(l.steiner=!0),u.push(Gi(l));for(u.sort(qi),r=0;r<u.length;r++)Oi(u[r],n),n=Mi(n,n.next);return n}(e,t,d,n)),e.length>80*n){i=a=e[0],r=s=e[1];for(var f=n;f<h;f+=n)(o=e[f])<i&&(i=o),(l=e[f+1])<r&&(r=l),o>a&&(a=o),l>s&&(s=l);u=0!==(u=Math.max(a-i,s-r))?1/u:0}return Li(d,p,n,i,r,u),p};function Ti(e,t,n,i,r){var a,s;if(r===function(e,t,n,i){for(var r=0,a=t,s=n-i;a<n;a+=i)r+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)s=Xi(a,e[a],e[a+1],s);else for(a=n-i;a>=t;a-=i)s=Xi(a,e[a],e[a+1],s);return s&&zi(s,s.next)&&(Qi(s),s=s.next),s}function Mi(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!zi(i,i.next)&&0!==Yi(i.prev,i,i.next))i=i.next;else{if(Qi(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Li(e,t,n,i,r,a,s){if(e){!s&&a&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=Bi(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,s,o,l,u=1;do{for(n=e,e=null,a=null,s=0;n;){for(s++,i=n,o=0,t=0;t<u&&(o++,i=i.nextZ);t++);for(l=u;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,u*=2}while(s>1)}(r)}(e,i,r,a);for(var o,l,u=e;e.prev!==e.next;)if(o=e.prev,l=e.next,a?Ri(e,i,r,a):Ii(e))t.push(o.i/n),t.push(e.i/n),t.push(l.i/n),Qi(e),e=l.next,u=l.next;else if((e=l)===u){s?1===s?Li(e=Di(e,t,n),t,n,i,r,a,2):2===s&&Ni(e,t,n,i,r,a):Li(Mi(e),t,n,i,r,a,1);break}}}function Ii(e){var t=e.prev,n=e,i=e.next;if(Yi(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Hi(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Yi(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Ri(e,t,n,i){var r=e.prev,a=e,s=e.next;if(Yi(r,a,s)>=0)return!1;for(var o=r.x<a.x?r.x<s.x?r.x:s.x:a.x<s.x?a.x:s.x,l=r.y<a.y?r.y<s.y?r.y:s.y:a.y<s.y?a.y:s.y,u=r.x>a.x?r.x>s.x?r.x:s.x:a.x>s.x?a.x:s.x,c=r.y>a.y?r.y>s.y?r.y:s.y:a.y>s.y?a.y:s.y,h=Bi(o,l,t,n,i),d=Bi(u,c,t,n,i),p=e.nextZ;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&Hi(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&Yi(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=e.prevZ;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&Hi(r.x,r.y,a.x,a.y,s.x,s.y,p.x,p.y)&&Yi(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function Di(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!zi(r,a)&&Ui(r,i,i.next,a)&&Wi(r,a)&&Wi(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),Qi(i),Qi(i.next),i=e=a),i=i.next}while(i!==e);return i}function Ni(e,t,n,i,r,a){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&Fi(s,o)){var l=ji(s,o);return s=Mi(s,s.next),l=Mi(l,l.next),Li(s,t,n,i,r,a),void Li(l,t,n,i,r,a)}o=o.next}s=s.next}while(s!==e)}function qi(e,t){return e.x-t.x}function Oi(e,t){if(t=function(e,t){var n,i=t,r=e.x,a=e.y,s=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var o=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=r&&o>s){if(s=o,o===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===s)return n.prev;var l,u=n,c=n.x,h=n.y,d=1/0;i=n.next;for(;i!==u;)r>=i.x&&i.x>=c&&r!==i.x&&Hi(a<h?r:s,a,c,h,a<h?s:r,a,i.x,i.y)&&((l=Math.abs(a-i.y)/(r-i.x))<d||l===d&&i.x>n.x)&&Wi(i,e)&&(n=i,d=l),i=i.next;return n}(e,t)){var n=ji(t,e);Mi(n,n.next)}}function Bi(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Gi(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Hi(e,t,n,i,r,a,s,o){return(r-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(i-o)-(n-s)*(t-o)>=0&&(n-s)*(a-o)-(r-s)*(i-o)>=0}function Fi(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ui(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Wi(e,t)&&Wi(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)}function Yi(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function zi(e,t){return e.x===t.x&&e.y===t.y}function Ui(e,t,n,i){return!!(zi(e,t)&&zi(n,i)||zi(e,i)&&zi(n,t))||Yi(e,t,n)>0!=Yi(e,t,i)>0&&Yi(n,i,e)>0!=Yi(n,i,t)>0}function Wi(e,t){return Yi(e.prev,e,e.next)<0?Yi(e,t,e.next)>=0&&Yi(e,e.prev,t)>=0:Yi(e,t,e.prev)<0||Yi(e,e.next,t)<0}function ji(e,t){var n=new Ki(e.i,e.x,e.y),i=new Ki(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Xi(e,t,n,i){var r=new Ki(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Qi(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ki(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Ji={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return Ji.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];Zi(e),$i(n,e);var a=e.length;t.forEach(Zi);for(var s=0;s<t.length;s++)i.push(a),a+=t[s].length,$i(n,t[s]);var o=Pi(n,i);for(s=0;s<o.length;s+=3)r.push(o.slice(s,s+3));return r}};function Zi(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function $i(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function er(e,t){ue.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new tr(e,t)),this.mergeVertices()}function tr(e,t){ke.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,i=[],r=[],a=0,o=e.length;a<o;a++){u(e[a])}function u(e){var a=[],o=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,c=void 0!==t.depth?t.depth:100,h=void 0===t.bevelEnabled||t.bevelEnabled,d=void 0!==t.bevelThickness?t.bevelThickness:6,p=void 0!==t.bevelSize?t.bevelSize:d-2,f=void 0!==t.bevelOffset?t.bevelOffset:0,m=void 0!==t.bevelSegments?t.bevelSegments:3,g=t.extrudePath,y=void 0!==t.UVGenerator?t.UVGenerator:nr;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);var v,A,b,S,E,k,V,w,_=!1;g&&(v=g.getSpacedPoints(u),_=!0,h=!1,A=g.computeFrenetFrames(u,!1),b=new l,S=new l,E=new l),h||(m=0,d=0,p=0,f=0);var C=e.extractPoints(o),x=C.shape,P=C.holes;if(!Ji.isClockWise(x))for(x=x.reverse(),V=0,w=P.length;V<w;V++)k=P[V],Ji.isClockWise(k)&&(P[V]=k.reverse());var T=Ji.triangulateShape(x,P),M=x;for(V=0,w=P.length;V<w;V++)k=P[V],x=x.concat(k);function L(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var I,R,D,N,q,O,B=x.length,G=T.length;function H(e,t,n){var i,r,a,o=e.x-t.x,l=e.y-t.y,u=n.x-e.x,c=n.y-e.y,h=o*o+l*l,d=o*c-l*u;if(Math.abs(d)>Number.EPSILON){var p=Math.sqrt(h),f=Math.sqrt(u*u+c*c),m=t.x-l/p,g=t.y+o/p,y=((n.x-c/f-m)*c-(n.y+u/f-g)*u)/(o*c-l*u),v=(i=m+o*y-e.x)*i+(r=g+l*y-e.y)*r;if(v<=2)return new s(i,r);a=Math.sqrt(v/2)}else{var A=!1;o>Number.EPSILON?u>Number.EPSILON&&(A=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(A=!0):Math.sign(l)===Math.sign(c)&&(A=!0),A?(i=-l,r=o,a=Math.sqrt(h)):(i=o,r=l,a=Math.sqrt(h/2))}return new s(i/a,r/a)}for(var F=[],Y=0,z=M.length,U=z-1,W=Y+1;Y<z;Y++,U++,W++)U===z&&(U=0),W===z&&(W=0),F[Y]=H(M[Y],M[U],M[W]);var j,X,Q=[],K=F.concat();for(V=0,w=P.length;V<w;V++){for(k=P[V],j=[],Y=0,U=(z=k.length)-1,W=Y+1;Y<z;Y++,U++,W++)U===z&&(U=0),W===z&&(W=0),j[Y]=H(k[Y],k[U],k[W]);Q.push(j),K=K.concat(j)}for(I=0;I<m;I++){for(D=I/m,N=d*Math.cos(D*Math.PI/2),R=p*Math.sin(D*Math.PI/2)+f,Y=0,z=M.length;Y<z;Y++)Z((q=L(M[Y],F[Y],R)).x,q.y,-N);for(V=0,w=P.length;V<w;V++)for(k=P[V],j=Q[V],Y=0,z=k.length;Y<z;Y++)Z((q=L(k[Y],j[Y],R)).x,q.y,-N)}for(R=p+f,Y=0;Y<B;Y++)q=h?L(x[Y],K[Y],R):x[Y],_?(S.copy(A.normals[0]).multiplyScalar(q.x),b.copy(A.binormals[0]).multiplyScalar(q.y),E.copy(v[0]).add(S).add(b),Z(E.x,E.y,E.z)):Z(q.x,q.y,0);for(X=1;X<=u;X++)for(Y=0;Y<B;Y++)q=h?L(x[Y],K[Y],R):x[Y],_?(S.copy(A.normals[X]).multiplyScalar(q.x),b.copy(A.binormals[X]).multiplyScalar(q.y),E.copy(v[X]).add(S).add(b),Z(E.x,E.y,E.z)):Z(q.x,q.y,c/u*X);for(I=m-1;I>=0;I--){for(D=I/m,N=d*Math.cos(D*Math.PI/2),R=p*Math.sin(D*Math.PI/2)+f,Y=0,z=M.length;Y<z;Y++)Z((q=L(M[Y],F[Y],R)).x,q.y,c+N);for(V=0,w=P.length;V<w;V++)for(k=P[V],j=Q[V],Y=0,z=k.length;Y<z;Y++)q=L(k[Y],j[Y],R),_?Z(q.x,q.y+v[u-1].y,v[u-1].x+N):Z(q.x,q.y,c+N)}function J(e,t){var n,i;for(Y=e.length;--Y>=0;){n=Y,(i=Y-1)<0&&(i=e.length-1);var r=0,a=u+2*m;for(r=0;r<a;r++){var s=B*r,o=B*(r+1);ee(t+n+s,t+i+s,t+i+o,t+n+o)}}}function Z(e,t,n){a.push(e),a.push(t),a.push(n)}function $(e,t,r){te(e),te(t),te(r);var a=i.length/3,s=y.generateTopUV(n,i,a-3,a-2,a-1);ne(s[0]),ne(s[1]),ne(s[2])}function ee(e,t,r,a){te(e),te(t),te(a),te(t),te(r),te(a);var s=i.length/3,o=y.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);ne(o[0]),ne(o[1]),ne(o[3]),ne(o[1]),ne(o[2]),ne(o[3])}function te(e){i.push(a[3*e+0]),i.push(a[3*e+1]),i.push(a[3*e+2])}function ne(e){r.push(e.x),r.push(e.y)}!function(){var e=i.length/3;if(h){var t=0,r=B*t;for(Y=0;Y<G;Y++)$((O=T[Y])[2]+r,O[1]+r,O[0]+r);for(r=B*(t=u+2*m),Y=0;Y<G;Y++)$((O=T[Y])[0]+r,O[1]+r,O[2]+r)}else{for(Y=0;Y<G;Y++)$((O=T[Y])[2],O[1],O[0]);for(Y=0;Y<G;Y++)$((O=T[Y])[0]+B*u,O[1]+B*u,O[2]+B*u)}n.addGroup(e,i.length/3-e,0)}(),function(){var e=i.length/3,t=0;for(J(M,t),t+=M.length,V=0,w=P.length;V<w;V++)J(k=P[V],t),t+=k.length;n.addGroup(e,i.length/3-e,1)}()}this.addAttribute("position",new ve(i,3)),this.addAttribute("uv",new ve(r,2)),this.computeVertexNormals()}er.prototype=Object.create(ue.prototype),er.prototype.constructor=er,er.prototype.toJSON=function(){var e=ue.prototype.toJSON.call(this);return ir(this.parameters.shapes,this.parameters.options,e)},tr.prototype=Object.create(ke.prototype),tr.prototype.constructor=tr,tr.prototype.toJSON=function(){var e=ke.prototype.toJSON.call(this);return ir(this.parameters.shapes,this.parameters.options,e)};var nr={generateTopUV:function(e,t,n,i,r){var a=t[3*n],o=t[3*n+1],l=t[3*i],u=t[3*i+1],c=t[3*r],h=t[3*r+1];return[new s(a,o),new s(l,u),new s(c,h)]},generateSideWallUV:function(e,t,n,i,r,a){var o=t[3*n],l=t[3*n+1],u=t[3*n+2],c=t[3*i],h=t[3*i+1],d=t[3*i+2],p=t[3*r],f=t[3*r+1],m=t[3*r+2],g=t[3*a],y=t[3*a+1],v=t[3*a+2];return Math.abs(l-h)<.01?[new s(o,1-u),new s(c,1-d),new s(p,1-m),new s(g,1-v)]:[new s(l,1-u),new s(h,1-d),new s(f,1-m),new s(y,1-v)]}};function ir(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var a=e[i];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function rr(e,t){ue.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new ar(e,t)),this.mergeVertices()}function ar(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ue;var i=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),tr.call(this,i,t),this.type="TextBufferGeometry"}function sr(e,t,n,i,r,a,s){ue.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new or(e,t,n,i,r,a,s)),this.mergeVertices()}function or(e,t,n,i,r,a,s){ke.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var o,u,c=(a=void 0!==a?a:0)+(s=void 0!==s?s:Math.PI),h=0,d=[],p=new l,f=new l,m=[],g=[],y=[],v=[];for(u=0;u<=n;u++){var A=[],b=u/n,S=0==u?.5/t:u==n?-.5/t:0;for(o=0;o<=t;o++){var E=o/t;p.x=-e*Math.cos(i+E*r)*Math.sin(a+b*s),p.y=e*Math.cos(a+b*s),p.z=e*Math.sin(i+E*r)*Math.sin(a+b*s),g.push(p.x,p.y,p.z),f.copy(p).normalize(),y.push(f.x,f.y,f.z),v.push(E+S,1-b),A.push(h++)}d.push(A)}for(u=0;u<n;u++)for(o=0;o<t;o++){var k=d[u][o+1],V=d[u][o],w=d[u+1][o],_=d[u+1][o+1];(0!==u||a>0)&&m.push(k,V,_),(u!==n-1||c<Math.PI)&&m.push(V,w,_)}this.setIndex(m),this.addAttribute("position",new ve(g,3)),this.addAttribute("normal",new ve(y,3)),this.addAttribute("uv",new ve(v,2))}function lr(e,t,n,i,r,a){ue.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new ur(e,t,n,i,r,a)),this.mergeVertices()}function ur(e,t,n,i,r,a){ke.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},e=e||.5,t=t||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,u,c,h=[],d=[],p=[],f=[],m=e,g=(t-e)/(i=void 0!==i?Math.max(1,i):1),y=new l,v=new s;for(u=0;u<=i;u++){for(c=0;c<=n;c++)o=r+c/n*a,y.x=m*Math.cos(o),y.y=m*Math.sin(o),d.push(y.x,y.y,y.z),p.push(0,0,1),v.x=(y.x/t+1)/2,v.y=(y.y/t+1)/2,f.push(v.x,v.y);m+=g}for(u=0;u<i;u++){var A=u*(n+1);for(c=0;c<n;c++){var b=o=c+A,S=o+n+1,E=o+n+2,k=o+1;h.push(b,S,k),h.push(S,E,k)}}this.setIndex(h),this.addAttribute("position",new ve(d,3)),this.addAttribute("normal",new ve(p,3)),this.addAttribute("uv",new ve(f,2))}function cr(e,t,n,i){ue.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new hr(e,t,n,i)),this.mergeVertices()}function hr(e,t,n,i){ke.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=a.clamp(i,0,2*Math.PI);var r,o,u,c=[],h=[],d=[],p=1/t,f=new l,m=new s;for(o=0;o<=t;o++){var g=n+o*p*i,y=Math.sin(g),v=Math.cos(g);for(u=0;u<=e.length-1;u++)f.x=e[u].x*y,f.y=e[u].y,f.z=e[u].x*v,h.push(f.x,f.y,f.z),m.x=o/t,m.y=u/(e.length-1),d.push(m.x,m.y)}for(o=0;o<t;o++)for(u=0;u<e.length-1;u++){var A=r=u+o*e.length,b=r+e.length,S=r+e.length+1,E=r+1;c.push(A,b,E),c.push(b,S,E)}if(this.setIndex(c),this.addAttribute("position",new ve(h,3)),this.addAttribute("uv",new ve(d,2)),this.computeVertexNormals(),i===2*Math.PI){var k=this.attributes.normal.array,V=new l,w=new l,_=new l;for(r=t*e.length*3,o=0,u=0;o<e.length;o++,u+=3)V.x=k[u+0],V.y=k[u+1],V.z=k[u+2],w.x=k[r+u+0],w.y=k[r+u+1],w.z=k[r+u+2],_.addVectors(V,w).normalize(),k[u+0]=k[r+u+0]=_.x,k[u+1]=k[r+u+1]=_.y,k[u+2]=k[r+u+2]=_.z}}function dr(e,t){ue.call(this),this.type="ShapeGeometry","object"===_typeof(t)&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new pr(e,t)),this.mergeVertices()}function pr(e,t){ke.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],r=[],a=[],s=0,o=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(s,o,l),s+=o,o=0;function u(e){var s,l,u,c=i.length/3,h=e.extractPoints(t),d=h.shape,p=h.holes;for(!1===Ji.isClockWise(d)&&(d=d.reverse()),s=0,l=p.length;s<l;s++)u=p[s],!0===Ji.isClockWise(u)&&(p[s]=u.reverse());var f=Ji.triangulateShape(d,p);for(s=0,l=p.length;s<l;s++)u=p[s],d=d.concat(u);for(s=0,l=d.length;s<l;s++){var m=d[s];i.push(m.x,m.y,0),r.push(0,0,1),a.push(m.x,m.y)}for(s=0,l=f.length;s<l;s++){var g=f[s],y=g[0]+c,v=g[1]+c,A=g[2]+c;n.push(y,v,A),o+=3}}this.setIndex(n),this.addAttribute("position",new ve(i,3)),this.addAttribute("normal",new ve(r,3)),this.addAttribute("uv",new ve(a,2))}function fr(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function mr(e,t){ke.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,s,o=[],l=Math.cos(a.DEG2RAD*t),u=[0,0],c={},h=["a","b","c"];e.isBufferGeometry?(s=new ue).fromBufferGeometry(e):s=e.clone(),s.mergeVertices(),s.computeFaceNormals();for(var d=s.vertices,p=s.faces,f=0,m=p.length;f<m;f++)for(var g=p[f],y=0;y<3;y++)n=g[h[y]],i=g[h[(y+1)%3]],u[0]=Math.min(n,i),u[1]=Math.max(n,i),void 0===c[r=u[0]+","+u[1]]?c[r]={index1:u[0],index2:u[1],face1:f,face2:void 0}:c[r].face2=f;for(r in c){var v=c[r];if(void 0===v.face2||p[v.face1].normal.dot(p[v.face2].normal)<=l){var A=d[v.index1];o.push(A.x,A.y,A.z),A=d[v.index2],o.push(A.x,A.y,A.z)}}this.addAttribute("position",new ve(o,3))}function gr(e,t,n,i,r,a,s,o){ue.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new yr(e,t,n,i,r,a,s,o)),this.mergeVertices()}function yr(e,t,n,i,r,a,o,u){ke.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:u};var c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,a=void 0!==a&&a,o=void 0!==o?o:0,u=void 0!==u?u:2*Math.PI;var h=[],d=[],p=[],f=[],m=0,g=[],y=n/2,v=0;function A(n){var r,a,g,A=new s,b=new l,S=0,E=!0===n?e:t,k=!0===n?1:-1;for(a=m,r=1;r<=i;r++)d.push(0,y*k,0),p.push(0,k,0),f.push(.5,.5),m++;for(g=m,r=0;r<=i;r++){var V=r/i*u+o,w=Math.cos(V),_=Math.sin(V);b.x=E*_,b.y=y*k,b.z=E*w,d.push(b.x,b.y,b.z),p.push(0,k,0),A.x=.5*w+.5,A.y=.5*_*k+.5,f.push(A.x,A.y),m++}for(r=0;r<i;r++){var C=a+r,x=g+r;!0===n?h.push(x,x+1,C):h.push(x+1,x,C),S+=3}c.addGroup(v,S,!0===n?1:2),v+=S}!function(){var a,s,A=new l,b=new l,S=0,E=(t-e)/n;for(s=0;s<=r;s++){var k=[],V=s/r,w=V*(t-e)+e;for(a=0;a<=i;a++){var _=a/i,C=_*u+o,x=Math.sin(C),P=Math.cos(C);b.x=w*x,b.y=-V*n+y,b.z=w*P,d.push(b.x,b.y,b.z),A.set(x,E,P).normalize(),p.push(A.x,A.y,A.z),f.push(_,1-V),k.push(m++)}g.push(k)}for(a=0;a<i;a++)for(s=0;s<r;s++){var T=g[s][a],M=g[s+1][a],L=g[s+1][a+1],I=g[s][a+1];h.push(T,M,I),h.push(M,L,I),S+=6}c.addGroup(v,S,0),v+=S}(),!1===a&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(h),this.addAttribute("position",new ve(d,3)),this.addAttribute("normal",new ve(p,3)),this.addAttribute("uv",new ve(f,2))}function vr(e,t,n,i,r,a,s){gr.call(this,0,e,t,n,i,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:s}}function Ar(e,t,n,i,r,a,s){yr.call(this,0,e,t,n,i,r,a,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:s}}function br(e,t,n,i){ue.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Sr(e,t,n,i)),this.mergeVertices()}function Sr(e,t,n,i){ke.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,a,o=[],u=[],c=[],h=[],d=new l,p=new s;for(u.push(0,0,0),c.push(0,0,1),h.push(.5,.5),a=0,r=3;a<=t;a++,r+=3){var f=n+a/t*i;d.x=e*Math.cos(f),d.y=e*Math.sin(f),u.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(u[r]/e+1)/2,p.y=(u[r+1]/e+1)/2,h.push(p.x,p.y)}for(r=1;r<=t;r++)o.push(r,r+1,0);this.setIndex(o),this.addAttribute("position",new ve(u,3)),this.addAttribute("normal",new ve(c,3)),this.addAttribute("uv",new ve(h,2))}rr.prototype=Object.create(ue.prototype),rr.prototype.constructor=rr,ar.prototype=Object.create(tr.prototype),ar.prototype.constructor=ar,sr.prototype=Object.create(ue.prototype),sr.prototype.constructor=sr,or.prototype=Object.create(ke.prototype),or.prototype.constructor=or,lr.prototype=Object.create(ue.prototype),lr.prototype.constructor=lr,ur.prototype=Object.create(ke.prototype),ur.prototype.constructor=ur,cr.prototype=Object.create(ue.prototype),cr.prototype.constructor=cr,hr.prototype=Object.create(ke.prototype),hr.prototype.constructor=hr,dr.prototype=Object.create(ue.prototype),dr.prototype.constructor=dr,dr.prototype.toJSON=function(){var e=ue.prototype.toJSON.call(this);return fr(this.parameters.shapes,e)},pr.prototype=Object.create(ke.prototype),pr.prototype.constructor=pr,pr.prototype.toJSON=function(){var e=ke.prototype.toJSON.call(this);return fr(this.parameters.shapes,e)},mr.prototype=Object.create(ke.prototype),mr.prototype.constructor=mr,gr.prototype=Object.create(ue.prototype),gr.prototype.constructor=gr,yr.prototype=Object.create(ke.prototype),yr.prototype.constructor=yr,vr.prototype=Object.create(gr.prototype),vr.prototype.constructor=vr,Ar.prototype=Object.create(yr.prototype),Ar.prototype.constructor=Ar,br.prototype=Object.create(ue.prototype),br.prototype.constructor=br,Sr.prototype=Object.create(ke.prototype),Sr.prototype.constructor=Sr;var Er=Object.freeze({WireframeGeometry:ci,ParametricGeometry:hi,ParametricBufferGeometry:di,TetrahedronGeometry:mi,TetrahedronBufferGeometry:gi,OctahedronGeometry:yi,OctahedronBufferGeometry:vi,IcosahedronGeometry:Ai,IcosahedronBufferGeometry:bi,DodecahedronGeometry:Si,DodecahedronBufferGeometry:Ei,PolyhedronGeometry:pi,PolyhedronBufferGeometry:fi,TubeGeometry:ki,TubeBufferGeometry:Vi,TorusKnotGeometry:wi,TorusKnotBufferGeometry:_i,TorusGeometry:Ci,TorusBufferGeometry:xi,TextGeometry:rr,TextBufferGeometry:ar,SphereGeometry:sr,SphereBufferGeometry:or,RingGeometry:lr,RingBufferGeometry:ur,PlaneGeometry:_e,PlaneBufferGeometry:Ce,LatheGeometry:cr,LatheBufferGeometry:hr,ShapeGeometry:dr,ShapeBufferGeometry:pr,ExtrudeGeometry:er,ExtrudeBufferGeometry:tr,EdgesGeometry:mr,ConeGeometry:vr,ConeBufferGeometry:Ar,CylinderGeometry:gr,CylinderBufferGeometry:yr,CircleGeometry:br,CircleBufferGeometry:Sr,BoxGeometry:Ve,BoxBufferGeometry:we});function kr(e){Pe.call(this),this.type="ShadowMaterial",this.color=new U(0),this.transparent=!0,this.setValues(e)}function Vr(e){Fe.call(this,e),this.type="RawShaderMaterial"}function wr(e){Pe.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new U(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function _r(e){wr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Cr(e){Pe.call(this),this.type="MeshPhongMaterial",this.color=new U(16777215),this.specular=new U(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function xr(e){Cr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Pr(e){Pe.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Tr(e){Pe.call(this),this.type="MeshLambertMaterial",this.color=new U(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new U(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Mr(e){Pe.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new U(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function Lr(e){ei.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}kr.prototype=Object.create(Pe.prototype),kr.prototype.constructor=kr,kr.prototype.isShadowMaterial=!0,kr.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this},Vr.prototype=Object.create(Fe.prototype),Vr.prototype.constructor=Vr,Vr.prototype.isRawShaderMaterial=!0,wr.prototype=Object.create(Pe.prototype),wr.prototype.constructor=wr,wr.prototype.isMeshStandardMaterial=!0,wr.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_r.prototype=Object.create(wr.prototype),_r.prototype.constructor=_r,_r.prototype.isMeshPhysicalMaterial=!0,_r.prototype.copy=function(e){return wr.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Cr.prototype=Object.create(Pe.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isMeshPhongMaterial=!0,Cr.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},xr.prototype=Object.create(Cr.prototype),xr.prototype.constructor=xr,xr.prototype.isMeshToonMaterial=!0,xr.prototype.copy=function(e){return Cr.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Pr.prototype=Object.create(Pe.prototype),Pr.prototype.constructor=Pr,Pr.prototype.isMeshNormalMaterial=!0,Pr.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Tr.prototype=Object.create(Pe.prototype),Tr.prototype.constructor=Tr,Tr.prototype.isMeshLambertMaterial=!0,Tr.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Mr.prototype=Object.create(Pe.prototype),Mr.prototype.constructor=Mr,Mr.prototype.isMeshMatcapMaterial=!0,Mr.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Lr.prototype=Object.create(ei.prototype),Lr.prototype.constructor=Lr,Lr.prototype.isLineDashedMaterial=!0,Lr.prototype.copy=function(e){return ei.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Ir=Object.freeze({ShadowMaterial:kr,SpriteMaterial:Xn,RawShaderMaterial:Vr,ShaderMaterial:Fe,PointsMaterial:ri,MeshPhysicalMaterial:_r,MeshStandardMaterial:wr,MeshPhongMaterial:Cr,MeshToonMaterial:xr,MeshNormalMaterial:Pr,MeshLambertMaterial:Tr,MeshDepthMaterial:Sn,MeshDistanceMaterial:En,MeshBasicMaterial:Ue,MeshMatcapMaterial:Mr,LineDashedMaterial:Lr,LineBasicMaterial:ei,Material:Pe}),Rr={arraySlice:function(e,t,n){return Rr.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,s=0;s!==i;++a)for(var o=n[a]*t,l=0;l!==t;++l)r[s++]=e[o+l];return r},flattenJSON:function(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var s=a[i];if(void 0!==s)if(Array.isArray(s))do{void 0!==(s=a[i])&&(t.push(a.time),n.push.apply(n,s)),a=e[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{void 0!==(s=a[i])&&(t.push(a.time),s.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{void 0!==(s=a[i])&&(t.push(a.time),n.push(s)),a=e[r++]}while(void 0!==a)}}};function Dr(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Nr(e,t,n,i){Dr.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function qr(e,t,n,i){Dr.call(this,e,t,n,i)}function Or(e,t,n,i){Dr.call(this,e,t,n,i)}function Br(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Rr.convertArray(t,this.TimeBufferType),this.values=Rr.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Gr(e,t,n){Br.call(this,e,t,n)}function Hr(e,t,n,i){Br.call(this,e,t,n,i)}function Fr(e,t,n,i){Br.call(this,e,t,n,i)}function Yr(e,t,n,i){Dr.call(this,e,t,n,i)}function zr(e,t,n,i){Br.call(this,e,t,n,i)}function Ur(e,t,n,i){Br.call(this,e,t,n,i)}function Wr(e,t,n,i){Br.call(this,e,t,n,i)}function jr(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=a.generateUUID(),this.duration<0&&this.resetDuration()}function Xr(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Fr;case"vector":case"vector2":case"vector3":case"vector4":return Wr;case"color":return Hr;case"quaternion":return zr;case"bool":case"boolean":return Gr;case"string":return Ur}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];Rr.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Dr.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===s)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=r)break e;var o=t[1];e<o&&(n=2,r=o);for(s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===s)break;if(i=r,e>=(r=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Dr.prototype,{beforeStart_:Dr.prototype.copySampleValue_,afterEnd_:Dr.prototype.copySampleValue_}),Nr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Nr,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,s=i[r],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=e,s=2*t-n;break;case 2402:s=t+i[r=i.length-2]-i[r+1];break;default:r=e,s=n}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=e,o=2*n-t;break;case 2402:a=1,o=n+i[1]-i[0];break;default:a=e-1,o=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-n),this._offsetPrev=r*u,this._offsetNext=a*u},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(i-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,y=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,v=(-1-d)*m+(1.5+d)*f+.5*p,A=d*m-d*f,b=0;b!==s;++b)r[b]=g*a[u+b]+y*a[l+b]+v*a[o+b]+A*a[c+b];return r}}),qr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:qr,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=(n-t)/(i-t),c=1-u,h=0;h!==s;++h)r[h]=a[l+h]*c+a[o+h]*u;return r}}),Or.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Or,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Br,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Rr.convertArray(e.times,Array),values:Rr.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(Br.prototype,{constructor:Br,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Or(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new qr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Nr(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var s=this.getValueSize();this.times=Rr.arraySlice(n,r,a),this.values=Rr.arraySlice(this.values,r*s,a*s)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,s=0;s!==r;s++){var o=n[s];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,o),e=!1;break}if(null!==a&&a>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,o,a),e=!1;break}a=o}if(void 0!==i&&Rr.isTypedArray(i)){s=0;for(var l=i.length;s!==l;++s){var u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,a=e.length-1,s=1;s<a;++s){var o=!1,l=e[s];if(l!==e[s+1]&&(1!==s||l!==l[0]))if(i)o=!0;else for(var u=s*n,c=u-n,h=u+n,d=0;d!==n;++d){var p=t[u+d];if(p!==t[c+d]||p!==t[h+d]){o=!0;break}}if(o){if(s!==r){e[r]=e[s];var f=s*n,m=r*n;for(d=0;d!==n;++d)t[m+d]=t[f+d]}++r}}if(a>0){e[r]=e[a];for(f=a*n,m=r*n,d=0;d!==n;++d)t[m+d]=t[f+d];++r}return r!==e.length&&(this.times=Rr.arraySlice(e,0,r),this.values=Rr.arraySlice(t,0,r*n)),this},clone:function(){var e=Rr.arraySlice(this.times,0),t=Rr.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),Gr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Gr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Hr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Hr,ValueTypeName:"color"}),Fr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Fr,ValueTypeName:"number"}),Yr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Yr,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=e*s,u=(n-t)/(i-t),c=l+s;l!==c;l+=4)o.slerpFlat(r,0,a,l-s,a,l,u);return r}}),zr.prototype=Object.assign(Object.create(Br.prototype),{constructor:zr,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Yr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Ur.prototype=Object.assign(Object.create(Br.prototype),{constructor:Ur,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Wr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Wr,ValueTypeName:"vector"}),Object.assign(jr,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(Xr(n[r]).scale(i));return new jr(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},r=0,a=n.length;r!==a;++r)t.push(Br.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,a=[],s=0;s<r;s++){var o=[],l=[];o.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);var u=Rr.getKeyframeOrder(o);o=Rr.sortedArray(o,1,u),l=Rr.sortedArray(l,1,u),i||0!==o[0]||(o.push(r),l.push(l[0])),a.push(new Fr(".morphTargetInfluences["+t[s].name+"]",o,l).scale(1/n))}return new jr(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,s=e.length;a<s;a++){var o=e[a],l=o.name.match(r);if(l&&l.length>1){var u=i[h=l[1]];u||(i[h]=u=[]),u.push(o)}}var c=[];for(var h in i)c.push(jr.CreateFromMorphTargetSequence(h,i[h],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],s=[];Rr.flattenJSON(n,a,s,i),0!==a.length&&r.push(new e(t,a,s))}},i=[],r=e.name||"default",a=e.length||-1,s=e.fps||30,o=e.hierarchy||[],l=0;l<o.length;l++){var u=o[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var d=0;d<u[h].morphTargets.length;d++)c[u[h].morphTargets[d]]=-1;for(var p in c){var f=[],m=[];for(d=0;d!==u[h].morphTargets.length;++d){var g=u[h];f.push(g.time),m.push(g.morphTarget===p?1:0)}i.push(new Fr(".morphTargetInfluence["+p+"]",f,m))}a=c.length*(s||1)}else{var y=".bones["+t[l].name+"]";n(Wr,y+".position",u,"pos",i),n(zr,y+".quaternion",u,"rot",i),n(Wr,y+".scale",u,"scl",i)}}return 0===i.length?null:new jr(r,a,i)}}),Object.assign(jr.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new jr(this.name,this.duration,e)}});var Qr={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Kr(e,t,n){var i=this,r=!1,a=0,s=0,o=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,s),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,s),a===s&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this}}var Jr=new Kr,Zr={};function $r(e){this.manager=void 0!==e?e:Jr}function ea(e){this.manager=void 0!==e?e:Jr}function ta(e){this.manager=void 0!==e?e:Jr,this._parser=null}function na(e){this.manager=void 0!==e?e:Jr,this._parser=null}function ia(e){this.manager=void 0!==e?e:Jr}function ra(e){this.manager=void 0!==e?e:Jr}function aa(e){this.manager=void 0!==e?e:Jr}function sa(){this.type="Curve",this.arcLengthDivisions=200}function oa(e,t,n,i,r,a,s,o){sa.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=s||!1,this.aRotation=o||0}function la(e,t,n,i,r,a){oa.call(this,e,t,n,n,i,r,a),this.type="ArcCurve"}function ua(){var e=0,t=0,n=0,i=0;function r(r,a,s,o){e=r,t=s,n=-3*r+3*a-2*s-o,i=2*r-2*a+s+o}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,s,o){var l=(t-e)/a-(n-e)/(a+s)+(n-t)/s,u=(n-t)/s-(i-t)/(s+o)+(i-n)/o;r(t,n,l*=s,u*=s)},calc:function(r){var a=r*r;return e+t*r+n*a+i*(a*r)}}}Object.assign($r.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Qr.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0===Zr[e]){var s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var o=s[1],l=!!s[2],u=s[3];u=decodeURIComponent(u),l&&(u=atob(u));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(u.length),p=0;p<u.length;p++)d[p]=u.charCodeAt(p);c="blob"===h?new Blob([d.buffer],{type:o}):d.buffer;break;case"document":var f=new DOMParser;c=f.parseFromString(u,o);break;case"json":c=JSON.parse(u);break;default:c=u}setTimeout((function(){t&&t(c),r.manager.itemEnd(e)}),0)}catch(y){setTimeout((function(){i&&i(y),r.manager.itemError(e),r.manager.itemEnd(e)}),0)}}else{Zr[e]=[],Zr[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",(function(t){var n=this.response;Qr.add(e,n);var i=Zr[e];if(delete Zr[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,s=i.length;a<s;a++){(o=i[a]).onLoad&&o.onLoad(n)}r.manager.itemEnd(e)}else{for(a=0,s=i.length;a<s;a++){var o;(o=i[a]).onError&&o.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}}),!1),m.addEventListener("progress",(function(t){for(var n=Zr[e],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var n=Zr[e];delete Zr[e];for(var i=0,a=n.length;i<a;i++){var s=n[i];s.onError&&s.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),m.addEventListener("abort",(function(t){var n=Zr[e];delete Zr[e];for(var i=0,a=n.length;i<a;i++){var s=n[i];s.onError&&s.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(e),m}Zr[e].push({onLoad:t,onProgress:n,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(ea.prototype,{load:function(e,t,n,i){var r=this,a=new $r(r.manager);a.setPath(r.path),a.load(e,(function(e){t(r.parse(JSON.parse(e)))}),n,i)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var i=jr.parse(e[n]);t.push(i)}return t},setPath:function(e){return this.path=e,this}}),Object.assign(ta.prototype,{load:function(e,t,n,i){var r=this,a=[],s=new oi;s.image=a;var o=new $r(this.manager);function l(l){o.load(e[l],(function(e){var n=r._parser(e,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(s.minFilter=1006),s.format=n.format,s.needsUpdate=!0,t&&t(s))}),n,i)}if(o.setPath(this.path),o.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,h=e.length;c<h;++c)l(c);else o.load(e,(function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,o=0;o<i;o++){a[o]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)a[o].mipmaps.push(n.mipmaps[o*n.mipmapCount+l]),a[o].format=n.format,a[o].width=n.width,a[o].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=1006),s.format=n.format,s.needsUpdate=!0,t&&t(s)}),n,i);return s},setPath:function(e){return this.path=e,this}}),Object.assign(na.prototype,{load:function(e,t,n,i){var r=this,a=new M,s=new $r(this.manager);return s.setResponseType("arraybuffer"),s.setPath(this.path),s.load(e,(function(e){var n=r._parser(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:1001,a.wrapT=void 0!==n.wrapT?n.wrapT:1001,a.magFilter=void 0!==n.magFilter?n.magFilter:1006,a.minFilter=void 0!==n.minFilter?n.minFilter:1008,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,t&&t(a,n))}),n,i),a},setPath:function(e){return this.path=e,this}}),Object.assign(ia.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Qr.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1),Qr.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ra.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=new rt,a=new ia(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var s=0;function o(n){a.load(e[n],(function(e){r.images[n]=e,6===++s&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(var l=0;l<e.length;++l)o(l);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(aa.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=new _,a=new ia(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){r.image=n;var i=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?1022:1023,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(sa.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=e;n++)a+=(t=this.getPoint(n/e)).distanceTo(r),i.push(a),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];for(var s,o=0,l=a-1;o<=l;)if((s=i[r=Math.floor(o+(l-o)/2)]-n)<0)o=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(a-1);var u=i[r];return(r+(n-u)/(i[r+1]-u))/(a-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r,s=new l,o=[],u=[],c=[],h=new l,d=new N;for(n=0;n<=e;n++)i=n/e,o[n]=this.getTangentAt(i),o[n].normalize();u[0]=new l,c[0]=new l;var p=Number.MAX_VALUE,f=Math.abs(o[0].x),m=Math.abs(o[0].y),g=Math.abs(o[0].z);for(f<=p&&(p=f,s.set(1,0,0)),m<=p&&(p=m,s.set(0,1,0)),g<=p&&s.set(0,0,1),h.crossVectors(o[0],s).normalize(),u[0].crossVectors(o[0],h),c[0].crossVectors(o[0],u[0]),n=1;n<=e;n++)u[n]=u[n-1].clone(),c[n]=c[n-1].clone(),h.crossVectors(o[n-1],o[n]),h.length()>Number.EPSILON&&(h.normalize(),r=Math.acos(a.clamp(o[n-1].dot(o[n]),-1,1)),u[n].applyMatrix4(d.makeRotationAxis(h,r))),c[n].crossVectors(o[n],u[n]);if(!0===t)for(r=Math.acos(a.clamp(u[0].dot(u[e]),-1,1)),r/=e,o[0].dot(h.crossVectors(u[0],u[e]))>0&&(r=-r),n=1;n<=e;n++)u[n].applyMatrix4(d.makeRotationAxis(o[n],r*n)),c[n].crossVectors(o[n],u[n]);return{tangents:o,normals:u,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),oa.prototype=Object.create(sa.prototype),oa.prototype.constructor=oa,oa.prototype.isEllipseCurve=!0,oa.prototype.getPoint=function(e,t){for(var n=t||new s,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,p=u-this.aY;l=d*c-p*h+this.aX,u=d*h+p*c+this.aY}return n.set(l,u)},oa.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},oa.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},oa.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},la.prototype=Object.create(oa.prototype),la.prototype.constructor=la,la.prototype.isArcCurve=!0;var ca=new l,ha=new ua,da=new ua,pa=new ua;function fa(e,t,n,i){sa.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function ma(e,t,n,i,r){var a=.5*(i-t),s=.5*(r-n),o=e*e;return(2*n-2*i+a+s)*(e*o)+(-3*n+3*i-2*a-s)*o+a*e+n}function ga(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function ya(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function va(e,t,n,i){sa.call(this),this.type="CubicBezierCurve",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s,this.v3=i||new s}function Aa(e,t,n,i){sa.call(this),this.type="CubicBezierCurve3",this.v0=e||new l,this.v1=t||new l,this.v2=n||new l,this.v3=i||new l}function ba(e,t){sa.call(this),this.type="LineCurve",this.v1=e||new s,this.v2=t||new s}function Sa(e,t){sa.call(this),this.type="LineCurve3",this.v1=e||new l,this.v2=t||new l}function Ea(e,t,n){sa.call(this),this.type="QuadraticBezierCurve",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s}function ka(e,t,n){sa.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new l,this.v1=t||new l,this.v2=n||new l}function Va(e){sa.call(this),this.type="SplineCurve",this.points=e||[]}fa.prototype=Object.create(sa.prototype),fa.prototype.constructor=fa,fa.prototype.isCatmullRomCurve3=!0,fa.prototype.getPoint=function(e,t){var n,i,r,a,s=t||new l,o=this.points,u=o.length,c=(u-(this.closed?0:1))*e,h=Math.floor(c),d=c-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/u)+1)*u:0===d&&h===u-1&&(h=u-2,d=1),this.closed||h>0?n=o[(h-1)%u]:(ca.subVectors(o[0],o[1]).add(o[0]),n=ca),i=o[h%u],r=o[(h+1)%u],this.closed||h+2<u?a=o[(h+2)%u]:(ca.subVectors(o[u-1],o[u-2]).add(o[u-1]),a=ca),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,f=Math.pow(n.distanceToSquared(i),p),m=Math.pow(i.distanceToSquared(r),p),g=Math.pow(r.distanceToSquared(a),p);m<1e-4&&(m=1),f<1e-4&&(f=m),g<1e-4&&(g=m),ha.initNonuniformCatmullRom(n.x,i.x,r.x,a.x,f,m,g),da.initNonuniformCatmullRom(n.y,i.y,r.y,a.y,f,m,g),pa.initNonuniformCatmullRom(n.z,i.z,r.z,a.z,f,m,g)}else"catmullrom"===this.curveType&&(ha.initCatmullRom(n.x,i.x,r.x,a.x,this.tension),da.initCatmullRom(n.y,i.y,r.y,a.y,this.tension),pa.initCatmullRom(n.z,i.z,r.z,a.z,this.tension));return s.set(ha.calc(d),da.calc(d),pa.calc(d)),s},fa.prototype.copy=function(e){sa.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},fa.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},fa.prototype.fromJSON=function(e){sa.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new l).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},va.prototype=Object.create(sa.prototype),va.prototype.constructor=va,va.prototype.isCubicBezierCurve=!0,va.prototype.getPoint=function(e,t){var n=t||new s,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(ya(e,i.x,r.x,a.x,o.x),ya(e,i.y,r.y,a.y,o.y)),n},va.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},va.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},va.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Aa.prototype=Object.create(sa.prototype),Aa.prototype.constructor=Aa,Aa.prototype.isCubicBezierCurve3=!0,Aa.prototype.getPoint=function(e,t){var n=t||new l,i=this.v0,r=this.v1,a=this.v2,s=this.v3;return n.set(ya(e,i.x,r.x,a.x,s.x),ya(e,i.y,r.y,a.y,s.y),ya(e,i.z,r.z,a.z,s.z)),n},Aa.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Aa.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Aa.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ba.prototype=Object.create(sa.prototype),ba.prototype.constructor=ba,ba.prototype.isLineCurve=!0,ba.prototype.getPoint=function(e,t){var n=t||new s;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ba.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ba.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},ba.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ba.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ba.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Sa.prototype=Object.create(sa.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isLineCurve3=!0,Sa.prototype.getPoint=function(e,t){var n=t||new l;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Sa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Sa.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Sa.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Sa.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ea.prototype=Object.create(sa.prototype),Ea.prototype.constructor=Ea,Ea.prototype.isQuadraticBezierCurve=!0,Ea.prototype.getPoint=function(e,t){var n=t||new s,i=this.v0,r=this.v1,a=this.v2;return n.set(ga(e,i.x,r.x,a.x),ga(e,i.y,r.y,a.y)),n},Ea.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ea.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ea.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ka.prototype=Object.create(sa.prototype),ka.prototype.constructor=ka,ka.prototype.isQuadraticBezierCurve3=!0,ka.prototype.getPoint=function(e,t){var n=t||new l,i=this.v0,r=this.v1,a=this.v2;return n.set(ga(e,i.x,r.x,a.x),ga(e,i.y,r.y,a.y),ga(e,i.z,r.z,a.z)),n},ka.prototype.copy=function(e){return sa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ka.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ka.prototype.fromJSON=function(e){return sa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Va.prototype=Object.create(sa.prototype),Va.prototype.constructor=Va,Va.prototype.isSplineCurve=!0,Va.prototype.getPoint=function(e,t){var n=t||new s,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,l=i[0===a?a:a-1],u=i[a],c=i[a>i.length-2?i.length-1:a+1],h=i[a>i.length-3?i.length-1:a+2];return n.set(ma(o,l.x,u.x,c.x,h.x),ma(o,l.y,u.y,c.y,h.y)),n},Va.prototype.copy=function(e){sa.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},Va.prototype.toJSON=function(){var e=sa.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},Va.prototype.fromJSON=function(e){sa.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new s).fromArray(i))}return this};var wa=Object.freeze({ArcCurve:la,CatmullRomCurve3:fa,CubicBezierCurve:va,CubicBezierCurve3:Aa,EllipseCurve:oa,LineCurve:ba,LineCurve3:Sa,QuadraticBezierCurve:Ea,QuadraticBezierCurve3:ka,SplineCurve:Va});function _a(){sa.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ca(e){_a.call(this),this.type="Path",this.currentPoint=new s,e&&this.setFromPoints(e)}function xa(e){Ca.call(this,e),this.uuid=a.generateUUID(),this.type="Shape",this.holes=[]}function Pa(e,t){ae.call(this),this.type="Light",this.color=new U(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Ta(e,t,n){Pa.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ae.DefaultUp),this.updateMatrix(),this.groundColor=new U(t)}function Ma(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new s(512,512),this.map=null,this.matrix=new N}function La(){Ma.call(this,new Pn(50,1,.5,500))}function Ia(e,t,n,i,r,a){Pa.call(this,e,t),this.type="SpotLight",this.position.copy(ae.DefaultUp),this.updateMatrix(),this.target=new ae,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new La}function Ra(e,t,n,i){Pa.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Ma(new Pn(90,1,.5,500))}function Da(e,t,n,i,r,a){xn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Na(){Ma.call(this,new Da(-5,5,5,-5,.5,500))}function qa(e,t){Pa.call(this,e,t),this.type="DirectionalLight",this.position.copy(ae.DefaultUp),this.updateMatrix(),this.target=new ae,this.shadow=new Na}function Oa(e,t){Pa.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Ba(e,t,n,i){Pa.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Ga(e){this.manager=void 0!==e?e:Jr,this.textures={}}_a.prototype=Object.assign(Object.create(sa.prototype),{constructor:_a,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ba(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,a=this.curves[i],s=a.getLength(),o=0===s?0:1-r/s;return a.getPointAt(o)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],s=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s),l=0;l<o.length;l++){var u=o[l];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){sa.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=sa.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){sa.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new wa[i.type]).fromJSON(i))}return this}}),Ca.prototype=Object.assign(Object.create(_a.prototype),{constructor:Ca,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new ba(this.currentPoint.clone(),new s(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var r=new Ea(this.currentPoint.clone(),new s(e,t),new s(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,r,a){var o=new va(this.currentPoint.clone(),new s(e,t),new s(n,i),new s(r,a));this.curves.push(o),this.currentPoint.set(r,a)},splineThru:function(e){var t=new Va([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,a){var s=this.currentPoint.x,o=this.currentPoint.y;this.absarc(e+s,t+o,n,i,r,a)},absarc:function(e,t,n,i,r,a){this.absellipse(e,t,n,n,i,r,a)},ellipse:function(e,t,n,i,r,a,s,o){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,n,i,r,a,s,o)},absellipse:function(e,t,n,i,r,a,s,o){var l=new oa(e,t,n,i,r,a,s,o);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return _a.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=_a.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return _a.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),xa.prototype=Object.assign(Object.create(Ca.prototype),{constructor:xa,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ca.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=Ca.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){Ca.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new Ca).fromJSON(i))}return this}}),Pa.prototype=Object.assign(Object.create(ae.prototype),{constructor:Pa,isLight:!0,copy:function(e){return ae.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ae.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Ta.prototype=Object.assign(Object.create(Pa.prototype),{constructor:Ta,isHemisphereLight:!0,copy:function(e){return Pa.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Ma.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),La.prototype=Object.assign(Object.create(Ma.prototype),{constructor:La,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*a.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),Ia.prototype=Object.assign(Object.create(Pa.prototype),{constructor:Ia,isSpotLight:!0,copy:function(e){return Pa.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ra.prototype=Object.assign(Object.create(Pa.prototype),{constructor:Ra,isPointLight:!0,copy:function(e){return Pa.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Da.prototype=Object.assign(Object.create(xn.prototype),{constructor:Da,isOrthographicCamera:!0,copy:function(e,t){return xn.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,s=i+t,o=i-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;a=(r+=c*(this.view.offsetX/l))+c*(this.view.width/l),o=(s-=h*(this.view.offsetY/u))-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=ae.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Na.prototype=Object.assign(Object.create(Ma.prototype),{constructor:Na}),qa.prototype=Object.assign(Object.create(Pa.prototype),{constructor:qa,isDirectionalLight:!0,copy:function(e){return Pa.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Oa.prototype=Object.assign(Object.create(Pa.prototype),{constructor:Oa,isAmbientLight:!0}),Ba.prototype=Object.assign(Object.create(Pa.prototype),{constructor:Ba,isRectAreaLight:!0,copy:function(e){return Pa.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Pa.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(Ga.prototype,{load:function(e,t,n,i){var r=this,a=new $r(r.manager);a.setPath(r.path),a.load(e,(function(e){t(r.parse(JSON.parse(e)))}),n,i)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new Ir[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.uniforms)for(var r in e.uniforms){var a=e.uniforms[r];switch(i.uniforms[r]={},a.type){case"t":i.uniforms[r].value=n(a.value);break;case"c":i.uniforms[r].value=(new U).setHex(a.value);break;case"v2":i.uniforms[r].value=(new s).fromArray(a.value);break;case"v3":i.uniforms[r].value=(new l).fromArray(a.value);break;case"v4":i.uniforms[r].value=(new C).fromArray(a.value);break;case"m3":i.uniforms[r].value=(new u).fromArray(a.value);case"m4":i.uniforms[r].value=(new N).fromArray(a.value);break;default:i.uniforms[r].value=a.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var o in e.extensions)i.extensions[o]=e.extensions[o];if(void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){var c=e.normalScale;!1===Array.isArray(c)&&(c=[c,c]),i.normalScale=(new s).fromArray(c)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),i},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var Ha={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Fa(e){this.manager=void 0!==e?e:Jr}Object.assign(Fa.prototype,{load:function(e,t,n,i){var r=this,a=new $r(r.manager);a.setPath(r.path),a.load(e,(function(e){t(r.parse(JSON.parse(e)))}),n,i)},parse:function(e){var t=new ke,n=e.data.index;if(void 0!==n){var i=new Ya[n.type](n.array);t.setIndex(new ce(i,1))}var r=e.data.attributes;for(var a in r){var s=r[a],o=new ce(i=new Ya[s.type](s.array),s.itemSize,s.normalized);void 0!==s.name&&(o.name=s.name),t.addAttribute(a,o)}var u=e.data.morphAttributes;if(u)for(var a in u){for(var c=u[a],h=[],d=0,p=c.length;d<p;d++){s=c[d],o=new ce(i=new Ya[s.type](s.array),s.itemSize,s.normalized);void 0!==s.name&&(o.name=s.name),h.push(o)}t.morphAttributes[a]=h}var f=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==f){d=0;for(var m=f.length;d!==m;++d){var g=f[d];t.addGroup(g.start,g.count,g.materialIndex)}}var y=e.data.boundingSphere;if(void 0!==y){var v=new l;void 0!==y.center&&v.fromArray(y.center),t.boundingSphere=new I(v,y.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var Ya={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function za(e){this.manager=void 0!==e?e:Jr,this.resourcePath=""}Object.assign(za.prototype,{crossOrigin:"anonymous",load:function(e,t,n,i){var r=this,a=void 0===this.path?Ha.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var s=new $r(r.manager);s.setPath(this.path),s.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(o){return void 0!==i&&i(o),void console.error("THREE:ObjectLoader: Can't parse "+e+".",o.message)}var s=a.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?r.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,(function(){void 0!==t&&t(o)})),a=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,i,s);return e.animations&&(o.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(o),o},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new xa).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new Fa,r=0,a=e.length;r<a;r++){var s,o=e[r];switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Er[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Er[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Er[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Er[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Er[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Er[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Er[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Er[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Er[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Er[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Er[o.type]((new wa[o.path.type]).fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Er[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Er[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],u=0,c=o.shapes.length;u<c;u++){var h=t[o.shapes[u]];l.push(h)}s=new Er[o.type](l,o.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],u=0,c=o.shapes.length;u<c;u++){h=t[o.shapes[u]];l.push(h)}var d=o.options.extrudePath;void 0!==d&&(o.options.extrudePath=(new wa[d.type]).fromJSON(d)),s=new Er[o.type](l,o.options);break;case"BufferGeometry":s=i.parse(o);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)s=(new THREE.LegacyJSONLoader).parse(o,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+o.type+'"');continue}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),n[o.uuid]=s}return n},parseMaterials:function(e,t){var n={},i={};if(void 0!==e){var r=new Ga;r.setTextures(t);for(var a=0,s=e.length;a<s;a++){var o=e[a];if("MultiMaterial"===o.type){for(var l=[],u=0;u<o.materials.length;u++){var c=o.materials[u];void 0===n[c.uuid]&&(n[c.uuid]=r.parse(c)),l.push(n[c.uuid])}i[o.uuid]=l}else void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=jr.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),t.push(r)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),a.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var a=new ia(new Kr(t));a.setCrossOrigin(this.crossOrigin);for(var s=0,o=e.length;s<o;s++){var l=e[s],u=l.url;if(Array.isArray(u)){i[l.uuid]=[];for(var c=0,h=u.length;c<h;c++){var d=u[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;i[l.uuid].push(r(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.resourcePath+l.url;i[l.uuid]=r(p)}}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var s,o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image),(s=Array.isArray(t[o.image])?new rt(t[o.image]):new _(t[o.image])).needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,Ka)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],Ja),s.wrapT=n(o.wrap[1],Ja)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,Za)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,Za)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),i[o.uuid]=s}return i},parseObject:function(e,t,n){var i;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new Un,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new U(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new zn(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Yn(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Pn(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Da(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Oa(e.color,e.intensity);break;case"DirectionalLight":i=new qa(e.color,e.intensity);break;case"PointLight":i=new Ra(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new Ba(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Ia(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new Ta(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var s=r(e.geometry),o=a(e.material);i=s.bones&&s.bones.length>0?new Jn(s,o):new We(s,o),void 0!==e.drawMode&&i.setDrawMode(e.drawMode);break;case"LOD":i=new Kn;break;case"Line":i=new ti(r(e.geometry),a(e.material),e.mode);break;case"LineLoop":i=new ii(r(e.geometry),a(e.material));break;case"LineSegments":i=new ni(r(e.geometry),a(e.material));break;case"PointCloud":case"Points":i=new ai(r(e.geometry),a(e.material));break;case"Sprite":i=new Qn(a(e.material));break;case"Group":i=new Cn;break;default:i=new ae}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var l=e.children,u=0;u<l.length;u++)i.add(this.parseObject(l[u],t,n));if("LOD"===e.type)for(var c=e.levels,h=0;h<c.length;h++){var d=c[h],p=i.getObjectByProperty("uuid",d.object);void 0!==p&&i.addLevel(p,d.distance)}return i}});var Ua,Wa,ja,Xa,Qa,Ka={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Ja={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Za={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};function $a(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Jr,this.options=void 0}function es(){this.type="ShapePath",this.color=new U,this.subPaths=[],this.currentPath=null}function ts(e){this.type="Font",this.data=e}function ns(e,t,n,i,r){var a=r.glyphs[e]||r.glyphs["?"];if(a){var s,o,l,u,c,h,d,p,f=new es;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),g=0,y=m.length;g<y;){switch(m[g++]){case"m":s=m[g++]*t+n,o=m[g++]*t+i,f.moveTo(s,o);break;case"l":s=m[g++]*t+n,o=m[g++]*t+i,f.lineTo(s,o);break;case"q":l=m[g++]*t+n,u=m[g++]*t+i,c=m[g++]*t+n,h=m[g++]*t+i,f.quadraticCurveTo(c,h,l,u);break;case"b":l=m[g++]*t+n,u=m[g++]*t+i,c=m[g++]*t+n,h=m[g++]*t+i,d=m[g++]*t+n,p=m[g++]*t+i,f.bezierCurveTo(c,h,d,p,l,u)}}return{offsetX:a.ha*t,path:f}}}function is(e){this.manager=void 0!==e?e:Jr}function rs(){}$a.prototype={constructor:$a,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Qr.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===r.options?createImageBitmap(e):createImageBitmap(e,r.options)})).then((function(n){Qr.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(es.prototype,{moveTo:function(e,t){this.currentPath=new Ca,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,a){this.currentPath.bezierCurveTo(e,t,n,i,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new xa;a.curves=r.curves,t.push(a)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var s=t[r],o=t[a],l=o.x-s.x,u=o.y-s.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(s=t[a],l=-l,o=t[r],u=-u),e.y<s.y||e.y>o.y)continue;if(e.y===s.y){if(e.x===s.x)return!0}else{var c=u*(e.x-s.x)-l*(e.y-s.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==s.y)continue;if(o.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=o.x)return!0}}return i}var r=Ji.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);var s,o,l,u=[];if(1===a.length)return o=a[0],(l=new xa).curves=o.curves,u.push(l),u;var c=!r(a[0].getPoints());c=e?!c:c;var h,d,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var y=0,v=a.length;y<v;y++)s=r(h=(o=a[y]).getPoints()),(s=e?!s:s)?(!c&&f[g]&&g++,f[g]={s:new xa,p:h},f[g].s.curves=o.curves,c&&g++,m[g]=[]):m[g].push({h:o,p:h[0]});if(!f[0])return n(a);if(f.length>1){for(var A=!1,b=[],S=0,E=f.length;S<E;S++)p[S]=[];for(S=0,E=f.length;S<E;S++)for(var k=m[S],V=0;V<k.length;V++){for(var w=k[V],_=!0,C=0;C<f.length;C++)i(w.p,f[C].p)&&(S!==C&&b.push({froms:S,tos:C,hole:V}),_?(_=!1,p[C].push(w)):A=!0);_&&p[S].push(w)}b.length>0&&(A||(m=p))}y=0;for(var x=f.length;y<x;y++){l=f[y].s,u.push(l);for(var P=0,T=(d=m[y]).length;P<T;P++)l.holes.push(d[P].h)}return u}}),Object.assign(ts.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],i=function(e,t,n){for(var i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,s=[],o=0,l=0,u=0;u<i.length;u++){var c=i[u];if("\n"===c)o=0,l-=a;else{var h=ns(c,r,o,l,n);o+=h.offsetX,s.push(h.path)}}return s}(e,t,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Object.assign(is.prototype,{load:function(e,t,n,i){var r=this,a=new $r(this.manager);a.setPath(this.path),a.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)}),n,i)},parse:function(e){return new ts(e)},setPath:function(e){return this.path=e,this}}),rs.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],a=t[n+1];if(r.test(e))return a}return null}},Object.assign(rs.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:(Ua={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},Wa=new U,ja=new aa,Xa=new Ga,function(e,t,n){var i={};function r(e,r,s,o,l){var u,c=t+e,h=rs.Handlers.get(c);null!==h?u=h.load(c):(ja.setCrossOrigin(n),u=ja.load(c)),void 0!==r&&(u.repeat.fromArray(r),1!==r[0]&&(u.wrapS=1e3),1!==r[1]&&(u.wrapT=1e3)),void 0!==s&&u.offset.fromArray(s),void 0!==o&&("repeat"===o[0]&&(u.wrapS=1e3),"mirror"===o[0]&&(u.wrapS=1002),"repeat"===o[1]&&(u.wrapT=1e3),"mirror"===o[1]&&(u.wrapT=1002)),void 0!==l&&(u.anisotropy=l);var d=a.generateUUID();return i[d]=u,d}var s={uuid:a.generateUUID(),type:"MeshLambertMaterial"};for(var o in e){var l=e[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":s.name=l;break;case"blending":s.blending=Ua[l];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":s.color=Wa.fromArray(l).getHex();break;case"colorSpecular":s.specular=Wa.fromArray(l).getHex();break;case"colorEmissive":s.emissive=Wa.fromArray(l).getHex();break;case"specularCoef":s.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(s.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(s.type="MeshPhongMaterial"),"standard"===l.toLowerCase()&&(s.type="MeshStandardMaterial");break;case"mapDiffuse":s.map=r(l,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":s.emissiveMap=r(l,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":s.lightMap=r(l,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":s.aoMap=r(l,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":s.bumpMap=r(l,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":s.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":s.normalMap=r(l,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":s.normalScale=l;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":s.specularMap=r(l,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":s.metalnessMap=r(l,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":s.roughnessMap=r(l,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":s.alphaMap=r(l,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":s.side=1;break;case"doubleSided":s.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),s.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":s[o]=l;break;case"vertexColors":!0===l&&(s.vertexColors=2),"face"===l&&(s.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,l)}}return"MeshBasicMaterial"===s.type&&delete s.emissive,"MeshPhongMaterial"!==s.type&&delete s.specular,s.opacity<1&&(s.transparent=!0),Xa.setTextures(i),Xa.parse(s)})});var as={getContext:function(){return void 0===Qa&&(Qa=new(window.AudioContext||window.webkitAudioContext)),Qa},setContext:function(e){Qa=e}};function ss(e){this.manager=void 0!==e?e:Jr}function os(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new l)}function ls(e,t){Pa.call(this,void 0,t),this.sh=void 0!==e?e:new os}function us(e,t,n){ls.call(this,void 0,n);var i=(new U).set(e),r=(new U).set(t),a=new l(i.r,i.g,i.b),s=new l(r.r,r.g,r.b),o=Math.sqrt(Math.PI),u=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(u)}function cs(e,t){ls.call(this,void 0,t);var n=(new U).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function hs(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Pn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Pn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(ss.prototype,{load:function(e,t,n,i){var r=new $r(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(e,(function(e){var n=e.slice(0);as.getContext().decodeAudioData(n,(function(e){t(e)}))}),n,i)},setPath:function(e){return this.path=e,this}}),Object.assign(os.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t=.282095*a[0],t+=.488603*a[1]*i,t+=.488603*a[2]*r,t+=.488603*a[3]*n,t+=1.092548*a[4]*(n*i),t+=1.092548*a[5]*(i*r),t+=.315392*a[6]*(3*r*r-1),t+=1.092548*a[7]*(n*r),t+=.546274*a[8]*(n*n-i*i)},getIrradianceAt:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t=.886227*a[0],t+=2*a[1]*.511664*i,t+=2*a[2]*.511664*r,t+=2*a[3]*.511664*n,t+=2*a[4]*.429043*n*i,t+=2*a[5]*.429043*i*r,t+=a[6]*(.743125*r*r-.247708),t+=2*a[7]*.429043*n*r,t+=.429043*a[8]*(n*n-i*i)},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e){for(var t=this.coefficients,n=0;n<9;n++)t[n].fromArray(e,3*n);return this},toArray:function(){for(var e=[],t=this.coefficients,n=0;n<9;n++)t[n].toArray(e,3*n);return e}}),Object.assign(os,{getBasisAt:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}),ls.prototype=Object.assign(Object.create(Pa.prototype),{constructor:ls,isLightProbe:!0,copy:function(e){return Pa.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return Pa.prototype.toJSON.call(this,e)}}),us.prototype=Object.assign(Object.create(ls.prototype),{constructor:us,isHemisphereLightProbe:!0,copy:function(e){return ls.prototype.copy.call(this,e),this},toJSON:function(e){return ls.prototype.toJSON.call(this,e)}}),cs.prototype=Object.assign(Object.create(ls.prototype),{constructor:cs,isAmbientLightProbe:!0,copy:function(e){return ls.prototype.copy.call(this,e),this},toJSON:function(e){return ls.prototype.toJSON.call(this,e)}}),Object.assign(hs.prototype,{update:function(){var e,t,n,i,r,s,o,l,u=new N,c=new N;return function(h){if(e!==this||t!==h.focus||n!==h.fov||i!==h.aspect*this.aspect||r!==h.near||s!==h.far||o!==h.zoom||l!==this.eyeSep){e=this,t=h.focus,n=h.fov,i=h.aspect*this.aspect,r=h.near,s=h.far,o=h.zoom;var d,p,f=h.projectionMatrix.clone(),m=(l=this.eyeSep/2)*r/t,g=r*Math.tan(a.DEG2RAD*n*.5)/o;c.elements[12]=-l,u.elements[12]=l,d=-g*i+m,p=g*i+m,f.elements[0]=2*r/(p-d),f.elements[8]=(p+d)/(p-d),this.cameraL.projectionMatrix.copy(f),d=-g*i-m,p=g*i-m,f.elements[0]=2*r/(p-d),f.elements[8]=(p+d)/(p-d),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(u)}}()});function ds(e,t,n,i){ae.call(this),this.type="CubeCamera";var r=new Pn(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new l(1,0,0)),this.add(r);var a=new Pn(90,1,e,t);a.up.set(0,-1,0),a.lookAt(new l(-1,0,0)),this.add(a);var s=new Pn(90,1,e,t);s.up.set(0,0,1),s.lookAt(new l(0,1,0)),this.add(s);var o=new Pn(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new l(0,-1,0)),this.add(o);var u=new Pn(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new l(0,0,1)),this.add(u);var c=new Pn(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new l(0,0,-1)),this.add(c),i=i||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new T(n,n,i),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),i=this.renderTarget,l=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,a),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,u),i.texture.generateMipmaps=l,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(n)},this.clear=function(e,t,n,i){for(var r=e.getRenderTarget(),a=this.renderTarget,s=0;s<6;s++)e.setRenderTarget(a,s),e.clear(t,n,i);e.setRenderTarget(r)}}function ps(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function fs(){ae.call(this),this.type="AudioListener",this.context=as.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function ms(e){ae.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function gs(e){ms.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function ys(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function vs(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}ds.prototype=Object.create(ae.prototype),ds.prototype.constructor=ds,Object.assign(ps.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),fs.prototype=Object.assign(Object.create(ae.prototype),{constructor:fs,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new l,t=new o,n=new l,i=new l,r=new ps;return function(a){ae.prototype.updateMatrixWorld.call(this,a);var s=this.context.listener,o=this.up;if(this.timeDelta=r.getDelta(),this.matrixWorld.decompose(e,t,n),i.set(0,0,-1).applyQuaternion(t),s.positionX){var l=this.context.currentTime+this.timeDelta;s.positionX.linearRampToValueAtTime(e.x,l),s.positionY.linearRampToValueAtTime(e.y,l),s.positionZ.linearRampToValueAtTime(e.z,l),s.forwardX.linearRampToValueAtTime(i.x,l),s.forwardY.linearRampToValueAtTime(i.y,l),s.forwardZ.linearRampToValueAtTime(i.z,l),s.upX.linearRampToValueAtTime(o.x,l),s.upY.linearRampToValueAtTime(o.y,l),s.upZ.linearRampToValueAtTime(o.z,l)}else s.setPosition(e.x,e.y,e.z),s.setOrientation(i.x,i.y,i.z,o.x,o.y,o.z)}}()}),ms.prototype=Object.assign(Object.create(ae.prototype),{constructor:ms,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),gs.prototype=Object.assign(Object.create(ms.prototype),{constructor:gs,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new l,t=new o,n=new l,i=new l;return function(r){if(ae.prototype.updateMatrixWorld.call(this,r),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(e,t,n),i.set(0,0,1).applyQuaternion(t);var a=this.panner;if(a.positionX){var s=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(e.x,s),a.positionY.linearRampToValueAtTime(e.y,s),a.positionZ.linearRampToValueAtTime(e.z,s),a.orientationX.linearRampToValueAtTime(i.x,s),a.orientationY.linearRampToValueAtTime(i.y,s),a.orientationZ.linearRampToValueAtTime(i.z,s)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(i.x,i.y,i.z)}}}()}),Object.assign(ys.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(vs.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var s=0;s!==i;++s)n[r+s]=n[s];a=t}else{var o=t/(a+=t);this._mixBufferRegion(n,r,0,o,i)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var s=3*t;this._mixBufferRegion(n,i,s,1-r,t)}for(var o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){a.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,i){o.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var a=1-i,s=0;s!==r;++s){var o=t+s;e[o]=e[o]*a+e[n+s]*i}}});var As,bs,Ss,Es,ks,Vs,ws,_s,Cs,xs,Ps,Ts,Ms,Ls;function Is(e,t,n){var i=n||Rs.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Rs(e,t,n){this.path=t,this.parsedPath=n||Rs.parseTrackName(t),this.node=Rs.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Ds(){this.uuid=a.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Ns(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,a=new Array(r),s={endingStart:2400,endingEnd:2400},o=0;o!==r;++o){var l=i[o].createInterpolant(null);a[o]=l,l.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function qs(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Os(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Bs(){ke.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Gs(e,t,n){Wn.call(this,e,t),this.meshPerAttribute=n||1}function Hs(e,t,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),ce.call(this,e,t,n),this.meshPerAttribute=i||1}function Fs(e,t,n,i){this.ray=new Ye(e,t),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Ys(e,t){return e.distance-t.distance}function zs(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,a=0,s=r.length;a<s;a++)zs(r[a],t,n,!0)}function Us(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Ws(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function js(e,t){this.min=void 0!==e?e:new s(1/0,1/0),this.max=void 0!==t?t:new s(-1/0,-1/0)}function Xs(e,t){this.start=void 0!==e?e:new l,this.end=void 0!==t?t:new l}function Qs(e){ae.call(this),this.material=e,this.render=function(){}}function Ks(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,s=0,o=this.object.geometry;o&&o.isGeometry?s=3*o.faces.length:o&&o.isBufferGeometry&&(s=o.attributes.normal.count);var l=new ke,u=new ve(2*s*3,3);l.addAttribute("position",u),ni.call(this,l,new ei({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Js(e,t){ae.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new ke,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var s=r/32*Math.PI*2,o=a/32*Math.PI*2;i.push(Math.cos(s),Math.sin(s),1,Math.cos(o),Math.sin(o),1)}n.addAttribute("position",new ve(i,3));var l=new ei({fog:!1});this.cone=new ni(n,l),this.add(this.cone),this.update()}function Zs(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new ke,i=[],r=[],a=new U(0,0,1),s=new U(0,1,0),o=0;o<t.length;o++){var l=t[o];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}n.addAttribute("position",new ve(i,3)),n.addAttribute("color",new ve(r,3));var u=new ei({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});ni.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function $s(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new or(t,4,2),r=new Ue({wireframe:!0,fog:!1});We.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function eo(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=new ke;n.addAttribute("position",new ve([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var i=new ei({fog:!1});ti.call(this,n,i);var r=new ke;r.addAttribute("position",new ve([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new We(r,new Ue({side:1,fog:!1}))),this.update()}function to(e,t,n){ae.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new vi(t);i.rotateY(.5*Math.PI),this.material=new Ue({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.addAttribute("color",new ce(a,3)),this.add(new We(i,this.material)),this.update()}function no(e,t){this.lightProbe=e,this.size=t;var n={GAMMA_OUTPUT:""},i=new Fe({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),r=new or(1,32,16);We.call(this,r,i),this.onBeforeRender()}function io(e,t,n,i){e=e||10,t=t||10,n=new U(void 0!==n?n:4473924),i=new U(void 0!==i?i:8947848);for(var r=t/2,a=e/t,s=e/2,o=[],l=[],u=0,c=0,h=-s;u<=t;u++,h+=a){o.push(-s,0,h,s,0,h),o.push(h,0,-s,h,0,s);var d=u===r?n:i;d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3,d.toArray(l,c),c+=3}var p=new ke;p.addAttribute("position",new ve(o,3)),p.addAttribute("color",new ve(l,3));var f=new ei({vertexColors:2});ni.call(this,p,f)}function ro(e,t,n,i,r,a){e=e||10,t=t||16,n=n||8,i=i||64,r=new U(void 0!==r?r:4473924),a=new U(void 0!==a?a:8947848);var s,o,l,u,c,h,d,p=[],f=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),s=Math.sin(l)*e,o=Math.cos(l)*e,p.push(0,0,0),p.push(s,0,o),d=1&u?r:a,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(u=0;u<=n;u++)for(d=1&u?r:a,h=e-e/n*u,c=0;c<i;c++)l=c/i*(2*Math.PI),s=Math.sin(l)*h,o=Math.cos(l)*h,p.push(s,0,o),f.push(d.r,d.g,d.b),l=(c+1)/i*(2*Math.PI),s=Math.sin(l)*h,o=Math.cos(l)*h,p.push(s,0,o),f.push(d.r,d.g,d.b);var m=new ke;m.addAttribute("position",new ve(p,3)),m.addAttribute("color",new ve(f,3));var g=new ei({vertexColors:2});ni.call(this,m,g)}function ao(e,t,n,i){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new ke,a=this.divisionsInnerAngle+2*this.divisionsOuterAngle,s=new Float32Array(3*(3*a+3));r.addAttribute("position",new ce(s,3));var o=new ei({color:65280}),l=new ei({color:16776960});ti.call(this,r,[l,o]),this.update()}function so(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,s=0,o=this.object.geometry;o&&o.isGeometry?s=o.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new ke,u=new ve(2*s*3,3);l.addAttribute("position",u),ni.call(this,l,new ei({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function oo(e,t,n){ae.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new ke;i.addAttribute("position",new ve([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new ei({fog:!1});this.lightPlane=new ti(i,r),this.add(this.lightPlane),(i=new ke).addAttribute("position",new ve([0,0,0,0,0,1],3)),this.targetLine=new ti(i,r),this.add(this.targetLine),this.update()}function lo(e){var t=new ke,n=new ei({color:16777215,vertexColors:1}),i=[],r=[],a={},s=new U(16755200),o=new U(16711680),l=new U(43775),u=new U(16777215),c=new U(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}h("n1","n2",s),h("n2","n4",s),h("n4","n3",s),h("n3","n1",s),h("f1","f2",s),h("f2","f4",s),h("f4","f3",s),h("f3","f1",s),h("n1","f1",s),h("n2","f2",s),h("n3","f3",s),h("n4","f4",s),h("p","n1",o),h("p","n2",o),h("p","n3",o),h("p","n4",o),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.addAttribute("position",new ve(i,3)),t.addAttribute("color",new ve(r,3)),ni.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function uo(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new ke;r.setIndex(new ce(n,1)),r.addAttribute("position",new ce(i,3)),ni.call(this,r,new ei({color:t})),this.matrixAutoUpdate=!1,this.update()}function co(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new ke;r.setIndex(new ce(i,1)),r.addAttribute("position",new ve([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ni.call(this,r,new ei({color:n})),this.geometry.computeBoundingSphere()}function ho(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new ke;r.addAttribute("position",new ve([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),ti.call(this,r,new ei({color:i}));var a=new ke;a.addAttribute("position",new ve([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new We(a,new Ue({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function po(e,t,n,i,r,a){ae.call(this),void 0===e&&(e=new l(0,0,1)),void 0===t&&(t=new l(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===Ps&&((Ps=new ke).addAttribute("position",new ve([0,0,0,0,1,0],3)),(Ts=new yr(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new ti(Ps,new ei({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new We(Ts,new Ue({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}function fo(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new ke;n.addAttribute("position",new ve(t,3)),n.addAttribute("color",new ve([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new ei({vertexColors:2});ni.call(this,n,i)}Object.assign(Is.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Rs,{Composite:Is,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Rs.Composite(e,t,n):new Rs(e,t,n)},sanitizeNodeName:(_s=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(_s,"")}),parseTrackName:(As="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",bs=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),Ss=/(WCOD+)?/.source.replace("WCOD",As),Es=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),ks=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Vs=new RegExp("^"+bs+Ss+Es+ks+"$"),ws=["material","materials","bones"],function(e){var t=Vs.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==ws.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var a=e(r.children);if(a)return a}return null}(e.children);if(i)return i}return null}}),Object.assign(Rs.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Rs.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===a){a=s;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var o=e[i];if(void 0!==o){var l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===r){r=s;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===r){r=s;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Rs.prototype,{_getValue_unbound:Rs.prototype.getValue,_setValue_unbound:Rs.prototype.setValue}),Object.assign(Ds.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],d=h.uuid,p=i[d];if(void 0===p){p=t++,i[d]=p,e.push(h);for(var f=0,m=o;f!==m;++f)s[f].push(new Rs(h,r[f],a[f]))}else if(p<n){l=e[p];var g=--n,y=e[g];i[y.uuid]=p,e[p]=y,i[d]=g,e[g]=h;for(f=0,m=o;f!==m;++f){var v=s[f],A=v[g],b=v[p];v[p]=A,void 0===b&&(b=new Rs(h,r[f],a[f])),v[g]=b}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,a=0,s=arguments.length;a!==s;++a){var o=arguments[a],l=o.uuid,u=n[l];if(void 0!==u&&u>=t){var c=t++,h=e[c];n[h.uuid]=u,e[u]=h,n[l]=c,e[c]=o;for(var d=0,p=r;d!==p;++d){var f=i[d],m=f[c],g=f[u];f[u]=m,f[c]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,s=0,o=arguments.length;s!==o;++s){var l=arguments[s],u=l.uuid,c=i[u];if(void 0!==c)if(delete i[u],c<n){var h=--n,d=e[h],p=e[v=--t];i[d.uuid]=c,e[c]=d,i[p.uuid]=h,e[h]=p,e.pop();for(var f=0,m=a;f!==m;++f){var g=(A=r[f])[h],y=A[v];A[c]=g,A[h]=y,A.pop()}}else{var v;i[(p=e[v=--t]).uuid]=c,e[c]=p,e.pop();for(f=0,m=a;f!==m;++f){var A;(A=r[f])[c]=A[v],A.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,a.push(e),s.push(t),r.push(c);for(var h=u,d=o.length;h!==d;++h){var p=o[h];c[h]=new Rs(p,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=n,a[n]=o,a.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}),Object.assign(Ns.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,s=i/r;e.warp(1,a,t),this.warp(s,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,s=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var o=a.parameterPositions,l=a.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/s,l[1]=t/s,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var s=this._updateTime(t),o=this._updateWeight(e);if(o>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(s),u[c].accumulate(i,o)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,i=this.loop,r=this._loopCount,a=2202===i;if(0===e)return-1===r?t:a&&1==(1&r)?n-t:t;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=n||t<0){var s=Math.floor(t/n);t-=n*s,r+=Math.abs(s);var o=this.repetitions-r;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(a&&1==(1&r))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,i.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=t,s[1]=r+e,o[1]=n,this}}),qs.prototype=Object.assign(Object.create(t.prototype),{constructor:qs,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,s=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName,u=l[o];void 0===u&&(u={},l[o]=u);for(var c=0;c!==r;++c){var h=i[c],d=h.name,p=u[d];if(void 0!==p)a[c]=p;else{if(void 0!==(p=a[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,o,d));continue}var f=t&&t._propertyBindings[c].binding.parsedPath;++(p=new vs(Rs.create(n,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,o,d),a[c]=p}s[c].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,s=r.length;a!==s;++a){var o=r[a];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var s=a.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,o[u]=l,o.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],a=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,s=a[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[r];e:{for(var u in s)break e;delete a[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new qr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?jr.findByName(n,e):e,a=null!==r?r.uuid:e,s=this._actionsByClip[a],o=null;if(void 0!==s){var l=s.actionByRoot[i];if(void 0!==l)return l;o=s.knownActions[0],null===r&&(r=o._clip)}if(null===r)return null;var u=new Ns(this,r,t);return this._bindAction(u,o),this._addInactiveAction(u,a,i),u},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?jr.findByName(n,e):e,a=r?r.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,s=0;s!==n;++s){t[s]._update(i,e,r,a)}var o=this._bindings,l=this._nActiveBindings;for(s=0;s!==l;++s)o[s].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,s=0,o=a.length;s!==o;++s){var l=a[s];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var s in a){var o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Os.prototype.clone=function(){return new Os(void 0===this.value.clone?this.value:this.value.clone())},Bs.prototype=Object.assign(Object.create(ke.prototype),{constructor:Bs,isInstancedBufferGeometry:!0,copy:function(e){return ke.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Gs.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Gs,isInstancedInterleavedBuffer:!0,copy:function(e){return Wn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Hs.prototype=Object.assign(Object.create(ce.prototype),{constructor:Hs,isInstancedBufferAttribute:!0,copy:function(e){return ce.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Fs.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var i=n||[];return zs(e,this,i,t),i.sort(Ys),i},intersectObjects:function(e,t,n){var i=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,a=e.length;r<a;r++)zs(e[r],this,i,t);return i.sort(Ys),i}}),Object.assign(Us.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(a.clamp(t/this.radius,-1,1))),this}}),Object.assign(Ws.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign(js.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new s;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new s),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new s),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new s),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new s),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new s;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Xs.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new l),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new l),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new l),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Cs=new l,xs=new l,function(e,t){Cs.subVectors(e,this.start),xs.subVectors(this.end,this.start);var n=xs.dot(xs),i=xs.dot(Cs)/n;return t&&(i=a.clamp(i,0,1)),i}),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new l),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Qs.prototype=Object.create(ae.prototype),Qs.prototype.constructor=Qs,Qs.prototype.isImmediateRenderObject=!0,Ks.prototype=Object.create(ni.prototype),Ks.prototype.constructor=Ks,Ks.prototype.update=function(){var e=new l,t=new l,n=new u;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,a=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var o=s.vertices,l=s.faces,u=0,c=0,h=l.length;c<h;c++)for(var d=l[c],p=0,f=d.vertexNormals.length;p<f;p++){var m=o[d[i[p]]],g=d.vertexNormals[p];e.copy(m).applyMatrix4(r),t.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}else if(s&&s.isBufferGeometry){var y=s.attributes.position,v=s.attributes.normal;for(u=0,p=0,f=y.count;p<f;p++)e.set(y.getX(p),y.getY(p),y.getZ(p)).applyMatrix4(r),t.set(v.getX(p),v.getY(p),v.getZ(p)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}a.needsUpdate=!0}}(),Js.prototype=Object.create(ae.prototype),Js.prototype.constructor=Js,Js.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Js.prototype.update=function(){var e=new l;return function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Zs.prototype=Object.create(ni.prototype),Zs.prototype.constructor=Zs,Zs.prototype.updateMatrixWorld=function(){var e=new l,t=new N,n=new N;return function(i){var r=this.bones,a=this.geometry,s=a.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var o=0,l=0;o<r.length;o++){var u=r[o];u.parent&&u.parent.isBone&&(t.multiplyMatrices(n,u.matrixWorld),e.setFromMatrixPosition(t),s.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(n,u.parent.matrixWorld),e.setFromMatrixPosition(t),s.setXYZ(l+1,e.x,e.y,e.z),l+=2)}a.getAttribute("position").needsUpdate=!0,ae.prototype.updateMatrixWorld.call(this,i)}}(),$s.prototype=Object.create(We.prototype),$s.prototype.constructor=$s,$s.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},$s.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},eo.prototype=Object.create(ti.prototype),eo.prototype.constructor=eo,eo.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},eo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},to.prototype=Object.create(ae.prototype),to.prototype.constructor=to,to.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},to.prototype.update=function(){var e=new l,t=new U,n=new U;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var a=0,s=r.count;a<s;a++){var o=a<s/2?t:n;r.setXYZ(a,o.r,o.g,o.b)}r.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),no.prototype=Object.create(We.prototype),no.prototype.constructor=no,no.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},no.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},io.prototype=Object.assign(Object.create(ni.prototype),{constructor:io,copy:function(e){return ni.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),ro.prototype=Object.create(ni.prototype),ro.prototype.constructor=ro,ao.prototype=Object.create(ti.prototype),ao.prototype.constructor=ao,ao.prototype.update=function(){var e,t,n=this.audio,i=this.range,r=this.divisionsInnerAngle,s=this.divisionsOuterAngle,o=a.degToRad(n.panner.coneInnerAngle),l=a.degToRad(n.panner.coneOuterAngle),u=o/2,c=l/2,h=0,d=0,p=this.geometry,f=p.attributes.position;function m(n,r,a,s){var o=(r-n)/a;for(f.setXYZ(h,0,0,0),d++,e=n;e<r;e+=o)t=h+d,f.setXYZ(t,Math.sin(e)*i,0,Math.cos(e)*i),f.setXYZ(t+1,Math.sin(Math.min(e+o,r))*i,0,Math.cos(Math.min(e+o,r))*i),f.setXYZ(t+2,0,0,0),d+=3;p.addGroup(h,d,s),h+=d,d=0}p.clearGroups(),m(-c,-u,s,0),m(-u,u,r,1),m(u,c,s,0),f.needsUpdate=!0,o===l&&(this.material[0].visible=!1)},ao.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},so.prototype=Object.create(ni.prototype),so.prototype.constructor=so,so.prototype.update=function(){var e=new l,t=new l,n=new u;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,a=this.object.geometry,s=a.vertices,o=a.faces,l=0,u=0,c=o.length;u<c;u++){var h=o[u],d=h.normal;e.copy(s[h.a]).add(s[h.b]).add(s[h.c]).divideScalar(3).applyMatrix4(i),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(l,e.x,e.y,e.z),l+=1,r.setXYZ(l,t.x,t.y,t.z),l+=1}r.needsUpdate=!0}}(),oo.prototype=Object.create(ae.prototype),oo.prototype.constructor=oo,oo.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},oo.prototype.update=function(){var e=new l,t=new l,n=new l;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(t),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t),this.targetLine.scale.z=n.length()}}(),lo.prototype=Object.create(ni.prototype),lo.prototype.constructor=lo,lo.prototype.update=function(){var e,t,n=new l,i=new xn;function r(r,a,s,o){n.set(a,s,o).unproject(i);var l=t[r];if(void 0!==l)for(var u=e.getAttribute("position"),c=0,h=l.length;c<h;c++)u.setXYZ(l[c],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;i.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),uo.prototype=Object.create(ni.prototype),uo.prototype.constructor=uo,uo.prototype.update=function(){var e=new L;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,i=e.max,r=this.geometry.attributes.position,a=r.array;a[0]=i.x,a[1]=i.y,a[2]=i.z,a[3]=n.x,a[4]=i.y,a[5]=i.z,a[6]=n.x,a[7]=n.y,a[8]=i.z,a[9]=i.x,a[10]=n.y,a[11]=i.z,a[12]=i.x,a[13]=i.y,a[14]=n.z,a[15]=n.x,a[16]=i.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=i.x,a[22]=n.y,a[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),uo.prototype.setFromObject=function(e){return this.object=e,this.update(),this},uo.prototype.copy=function(e){return ni.prototype.copy.call(this,e),this.object=e.object,this},uo.prototype.clone=function(){return(new this.constructor).copy(this)},co.prototype=Object.create(ni.prototype),co.prototype.constructor=co,co.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),ae.prototype.updateMatrixWorld.call(this,e))},ho.prototype=Object.create(ti.prototype),ho.prototype.constructor=ho,ho.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),ae.prototype.updateMatrixWorld.call(this,e)},po.prototype=Object.create(ae.prototype),po.prototype.constructor=po,po.prototype.setDirection=(Ls=new l,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Ls.set(e.z,0,-e.x).normalize(),Ms=Math.acos(e.y),this.quaternion.setFromAxisAngle(Ls,Ms))}),po.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},po.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},po.prototype.copy=function(e){return ae.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},po.prototype.clone=function(){return(new this.constructor).copy(this)},fo.prototype=Object.create(ni.prototype),fo.prototype.constructor=fo;function mo(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),fa.call(this,e),this.type="catmullrom",this.closed=!0}function go(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),fa.call(this,e),this.type="catmullrom"}function yo(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),fa.call(this,e),this.type="catmullrom"}sa.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(sa.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(_a.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new ue,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new l(r.x,r.y,r.z||0))}return t}}),Object.assign(Ca.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),mo.prototype=Object.create(fa.prototype),go.prototype=Object.create(fa.prototype),yo.prototype=Object.create(fa.prototype),Object.assign(yo.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),io.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Zs.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(rs.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ha.extractUrlBase(e)}}),Object.assign(za.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(js.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(L.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Xs.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(a,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),a.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),a.ceilPowerOfTwo(e)}}),Object.assign(u.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(N.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new l),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),R.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},o.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Ye.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ze.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ze,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ze.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ze.getNormal(e,t,n,i)}}),Object.assign(xa.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new er(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new dr(this,e)}}),Object.assign(s.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(l.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(C.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ue.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(ae.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(ae.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Kn.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Zn.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Jn.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(sa.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Pn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Pa.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(ce.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(ke.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(ke.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(tr.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Os.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Pe.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new U}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(Cr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Fe.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Fn.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}}),Object.defineProperties(Fn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(kn.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(T.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(x.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Gn.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),ms.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new ss).load(e,(function(e){t.setBuffer(e)})),this},ys.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},ds.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var vo={merge:function(e,t,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};V.crossOrigin=void 0,V.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new aa;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},V.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new ra;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},V.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},V.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Ao={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};e.WebGLMultisampleRenderTarget=P,e.WebGLRenderTargetCube=T,e.WebGLRenderTarget=x,e.WebGLRenderer=Fn,e.ShaderLib=X,e.UniformsLib=j,e.UniformsUtils=Y,e.ShaderChunk=q,e.FogExp2=Yn,e.Fog=zn,e.Scene=Un,e.Sprite=Qn,e.LOD=Kn,e.SkinnedMesh=Jn,e.Skeleton=Zn,e.Bone=$n,e.Mesh=We,e.LineSegments=ni,e.LineLoop=ii,e.Line=ti,e.Points=ai,e.Group=Cn,e.VideoTexture=si,e.DataTexture=M,e.DataTexture2DArray=at,e.DataTexture3D=st,e.CompressedTexture=oi,e.CubeTexture=rt,e.CanvasTexture=li,e.DepthTexture=ui,e.Texture=_,e.AnimationLoader=ea,e.CompressedTextureLoader=ta,e.DataTextureLoader=na,e.CubeTextureLoader=ra,e.TextureLoader=aa,e.ObjectLoader=za,e.MaterialLoader=Ga,e.BufferGeometryLoader=Fa,e.DefaultLoadingManager=Jr,e.LoadingManager=Kr,e.ImageLoader=ia,e.ImageBitmapLoader=$a,e.FontLoader=is,e.FileLoader=$r,e.Loader=rs,e.LoaderUtils=Ha,e.Cache=Qr,e.AudioLoader=ss,e.SpotLightShadow=La,e.SpotLight=Ia,e.PointLight=Ra,e.RectAreaLight=Ba,e.HemisphereLight=Ta,e.HemisphereLightProbe=us,e.DirectionalLightShadow=Na,e.DirectionalLight=qa,e.AmbientLight=Oa,e.AmbientLightProbe=cs,e.LightShadow=Ma,e.Light=Pa,e.LightProbe=ls,e.StereoCamera=hs,e.PerspectiveCamera=Pn,e.OrthographicCamera=Da,e.CubeCamera=ds,e.ArrayCamera=Tn,e.Camera=xn,e.AudioListener=fs,e.PositionalAudio=gs,e.AudioContext=as,e.AudioAnalyser=ys,e.Audio=ms,e.VectorKeyframeTrack=Wr,e.StringKeyframeTrack=Ur,e.QuaternionKeyframeTrack=zr,e.NumberKeyframeTrack=Fr,e.ColorKeyframeTrack=Hr,e.BooleanKeyframeTrack=Gr,e.PropertyMixer=vs,e.PropertyBinding=Rs,e.KeyframeTrack=Br,e.AnimationUtils=Rr,e.AnimationObjectGroup=Ds,e.AnimationMixer=qs,e.AnimationClip=jr,e.Uniform=Os,e.InstancedBufferGeometry=Bs,e.BufferGeometry=ke,e.Geometry=ue,e.InterleavedBufferAttribute=jn,e.InstancedInterleavedBuffer=Gs,e.InterleavedBuffer=Wn,e.InstancedBufferAttribute=Hs,e.Face3=J,e.Object3D=ae,e.Raycaster=Fs,e.Layers=$,e.EventDispatcher=t,e.Clock=ps,e.QuaternionLinearInterpolant=Yr,e.LinearInterpolant=qr,e.DiscreteInterpolant=Or,e.CubicInterpolant=Nr,e.Interpolant=Dr,e.Triangle=ze,e.Math=a,e.Spherical=Us,e.Cylindrical=Ws,e.Plane=R,e.Frustum=D,e.Sphere=I,e.Ray=Ye,e.Matrix4=N,e.Matrix3=u,e.Box3=L,e.Box2=js,e.Line3=Xs,e.Euler=Z,e.Vector4=C,e.Vector3=l,e.Vector2=s,e.Quaternion=o,e.Color=U,e.SphericalHarmonics3=os,e.ImmediateRenderObject=Qs,e.VertexNormalsHelper=Ks,e.SpotLightHelper=Js,e.SkeletonHelper=Zs,e.PointLightHelper=$s,e.RectAreaLightHelper=eo,e.HemisphereLightHelper=to,e.LightProbeHelper=no,e.GridHelper=io,e.PolarGridHelper=ro,e.PositionalAudioHelper=ao,e.FaceNormalsHelper=so,e.DirectionalLightHelper=oo,e.CameraHelper=lo,e.BoxHelper=uo,e.Box3Helper=co,e.PlaneHelper=ho,e.ArrowHelper=po,e.AxesHelper=fo,e.Shape=xa,e.Path=Ca,e.ShapePath=es,e.Font=ts,e.CurvePath=_a,e.Curve=sa,e.ImageUtils=V,e.ShapeUtils=Ji,e.WebGLUtils=_n,e.WireframeGeometry=ci,e.ParametricGeometry=hi,e.ParametricBufferGeometry=di,e.TetrahedronGeometry=mi,e.TetrahedronBufferGeometry=gi,e.OctahedronGeometry=yi,e.OctahedronBufferGeometry=vi,e.IcosahedronGeometry=Ai,e.IcosahedronBufferGeometry=bi,e.DodecahedronGeometry=Si,e.DodecahedronBufferGeometry=Ei,e.PolyhedronGeometry=pi,e.PolyhedronBufferGeometry=fi,e.TubeGeometry=ki,e.TubeBufferGeometry=Vi,e.TorusKnotGeometry=wi,e.TorusKnotBufferGeometry=_i,e.TorusGeometry=Ci,e.TorusBufferGeometry=xi,e.TextGeometry=rr,e.TextBufferGeometry=ar,e.SphereGeometry=sr,e.SphereBufferGeometry=or,e.RingGeometry=lr,e.RingBufferGeometry=ur,e.PlaneGeometry=_e,e.PlaneBufferGeometry=Ce,e.LatheGeometry=cr,e.LatheBufferGeometry=hr,e.ShapeGeometry=dr,e.ShapeBufferGeometry=pr,e.ExtrudeGeometry=er,e.ExtrudeBufferGeometry=tr,e.EdgesGeometry=mr,e.ConeGeometry=vr,e.ConeBufferGeometry=Ar,e.CylinderGeometry=gr,e.CylinderBufferGeometry=yr,e.CircleGeometry=br,e.CircleBufferGeometry=Sr,e.BoxGeometry=Ve,e.CubeGeometry=Ve,e.BoxBufferGeometry=we,e.ShadowMaterial=kr,e.SpriteMaterial=Xn,e.RawShaderMaterial=Vr,e.ShaderMaterial=Fe,e.PointsMaterial=ri,e.MeshPhysicalMaterial=_r,e.MeshStandardMaterial=wr,e.MeshPhongMaterial=Cr,e.MeshToonMaterial=xr,e.MeshNormalMaterial=Pr,e.MeshLambertMaterial=Tr,e.MeshDepthMaterial=Sn,e.MeshDistanceMaterial=En,e.MeshBasicMaterial=Ue,e.MeshMatcapMaterial=Mr,e.LineDashedMaterial=Lr,e.LineBasicMaterial=ei,e.Material=Pe,e.Float64BufferAttribute=Ae,e.Float32BufferAttribute=ve,e.Uint32BufferAttribute=ye,e.Int32BufferAttribute=ge,e.Uint16BufferAttribute=me,e.Int16BufferAttribute=fe,e.Uint8ClampedBufferAttribute=pe,e.Uint8BufferAttribute=de,e.Int8BufferAttribute=he,e.BufferAttribute=ce,e.ArcCurve=la,e.CatmullRomCurve3=fa,e.CubicBezierCurve=va,e.CubicBezierCurve3=Aa,e.EllipseCurve=oa,e.LineCurve=ba,e.LineCurve3=Sa,e.QuadraticBezierCurve=Ea,e.QuadraticBezierCurve3=ka,e.SplineCurve=Va,e.REVISION="104",e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=0,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=1,e.PCFSoftShadowMap=2,e.FrontSide=0,e.BackSide=1,e.DoubleSide=2,e.FlatShading=1,e.SmoothShading=2,e.NoColors=0,e.FaceColors=1,e.VertexColors=2,e.NoBlending=0,e.NormalBlending=1,e.AdditiveBlending=2,e.SubtractiveBlending=3,e.MultiplyBlending=4,e.CustomBlending=5,e.AddEquation=100,e.SubtractEquation=101,e.ReverseSubtractEquation=102,e.MinEquation=103,e.MaxEquation=104,e.ZeroFactor=200,e.OneFactor=201,e.SrcColorFactor=202,e.OneMinusSrcColorFactor=203,e.SrcAlphaFactor=204,e.OneMinusSrcAlphaFactor=205,e.DstAlphaFactor=206,e.OneMinusDstAlphaFactor=207,e.DstColorFactor=208,e.OneMinusDstColorFactor=209,e.SrcAlphaSaturateFactor=210,e.NeverDepth=0,e.AlwaysDepth=1,e.LessDepth=2,e.LessEqualDepth=3,e.EqualDepth=4,e.GreaterEqualDepth=5,e.GreaterDepth=6,e.NotEqualDepth=7,e.MultiplyOperation=0,e.MixOperation=1,e.AddOperation=2,e.NoToneMapping=0,e.LinearToneMapping=1,e.ReinhardToneMapping=2,e.Uncharted2ToneMapping=3,e.CineonToneMapping=4,e.ACESFilmicToneMapping=5,e.UVMapping=300,e.CubeReflectionMapping=301,e.CubeRefractionMapping=302,e.EquirectangularReflectionMapping=303,e.EquirectangularRefractionMapping=304,e.SphericalReflectionMapping=305,e.CubeUVReflectionMapping=306,e.CubeUVRefractionMapping=307,e.RepeatWrapping=1e3,e.ClampToEdgeWrapping=1001,e.MirroredRepeatWrapping=1002,e.NearestFilter=1003,e.NearestMipMapNearestFilter=1004,e.NearestMipMapLinearFilter=1005,e.LinearFilter=1006,e.LinearMipMapNearestFilter=1007,e.LinearMipMapLinearFilter=1008,e.UnsignedByteType=1009,e.ByteType=1010,e.ShortType=1011,e.UnsignedShortType=1012,e.IntType=1013,e.UnsignedIntType=1014,e.FloatType=1015,e.HalfFloatType=1016,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedInt248Type=1020,e.AlphaFormat=1021,e.RGBFormat=1022,e.RGBAFormat=1023,e.LuminanceFormat=1024,e.LuminanceAlphaFormat=1025,e.RGBEFormat=1023,e.DepthFormat=1026,e.DepthStencilFormat=1027,e.RedFormat=1028,e.RGB_S3TC_DXT1_Format=33776,e.RGBA_S3TC_DXT1_Format=33777,e.RGBA_S3TC_DXT3_Format=33778,e.RGBA_S3TC_DXT5_Format=33779,e.RGB_PVRTC_4BPPV1_Format=35840,e.RGB_PVRTC_2BPPV1_Format=35841,e.RGBA_PVRTC_4BPPV1_Format=35842,e.RGBA_PVRTC_2BPPV1_Format=35843,e.RGB_ETC1_Format=36196,e.RGBA_ASTC_4x4_Format=37808,e.RGBA_ASTC_5x4_Format=37809,e.RGBA_ASTC_5x5_Format=37810,e.RGBA_ASTC_6x5_Format=37811,e.RGBA_ASTC_6x6_Format=37812,e.RGBA_ASTC_8x5_Format=37813,e.RGBA_ASTC_8x6_Format=37814,e.RGBA_ASTC_8x8_Format=37815,e.RGBA_ASTC_10x5_Format=37816,e.RGBA_ASTC_10x6_Format=37817,e.RGBA_ASTC_10x8_Format=37818,e.RGBA_ASTC_10x10_Format=37819,e.RGBA_ASTC_12x10_Format=37820,e.RGBA_ASTC_12x12_Format=37821,e.LoopOnce=2200,e.LoopRepeat=2201,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=2400,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=0,e.TriangleStripDrawMode=1,e.TriangleFanDrawMode=2,e.LinearEncoding=3e3,e.sRGBEncoding=3001,e.GammaEncoding=3007,e.RGBEEncoding=3002,e.LogLuvEncoding=3003,e.RGBM7Encoding=3004,e.RGBM16Encoding=3005,e.RGBDEncoding=3006,e.BasicDepthPacking=3200,e.RGBADepthPacking=3201,e.TangentSpaceNormalMap=0,e.ObjectSpaceNormalMap=1,e.Face4=function(e,t,n,i,r,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new J(e,t,n,r,a,s)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ai(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Qn(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ai(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ri(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ri(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ri(e)},e.Vertex=function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new l(e,t,n)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new ce(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new he(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new de(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new pe(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new fe(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new me(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ge(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new ye(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new ve(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ae(e,t)},e.ClosedSplineCurve3=mo,e.SplineCurve3=go,e.Spline=yo,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new fo(e)},e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new uo(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ni(new mr(e.geometry),new ei({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ni(new ci(e.geometry),new ei({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new $r(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new na(e)},e.GeometryUtils=vo,e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},e.SceneUtils=Ao,e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(e,"__esModule",{value:!0})})),d=this,p=function(){var e=function(e){return 0===e.length||0===e.indexOf("?")};return function(){var t=function(e,t,i,r,a){if(!e)if(r.public)if(n.addWarning(t,i,a),r.hasOwnProperty("defaultValue"))i=r.defaultValue;else{var s=u[r.type];l(s.hasOwnProperty("defaultValue"),"Type must have a default value if the provided schema does not have one."),i=s.defaultValue}else l(e,a);return i},n={warnings:[],get:function(e,t){return this.getForString(e,t,window.location.search)},getAll:function(e){return this.getAllForString(e,window.location.search)},getForString:function(n,a,l){if(!e(l))throw new Error('Query strings should be either the empty string or start with a "?": '.concat(l));var c=a.private&&!function(){try{return"true"===localStorage.getItem("phetTeamMember")}catch(e){return!1}}()?[]:i(n,l);r(n,a);var h=s(n,a,c);a.hasOwnProperty("validValues")?h=t(o(h,a.validValues),n,h,a,'Invalid value supplied for key "'.concat(n,'": ').concat(h," is not a member of valid values: ").concat(a.validValues.join(", "))):a.hasOwnProperty("isValidValue")&&(h=t(a.isValidValue(h),n,h,a,'Invalid value supplied for key "'.concat(n,'": ').concat(h)));var d=u[a.type].isValidValue(h);if("array"===a.type&&Array.isArray(h)){for(var p=!0,f=0;f<h.length;f++){var m=h[f];if(!u[a.elementSchema.type].isValidValue(m)){p=!1;break}if(a.elementSchema.hasOwnProperty("isValidValue")&&!a.elementSchema.isValidValue(m)){p=!1;break}if(a.elementSchema.hasOwnProperty("validValues")&&!o(m,a.elementSchema.validValues)){p=!1;break}}d=d&&p}return h=t(d,n,h,a,"Invalid value for type, key: ".concat(n))},getAllForString:function(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=this.getForString(i,e[i],t));return n},containsKey:function(e){return this.containsKeyForString(e,window.location.search)},containsKeyForString:function(t,n){if(!e(n))throw new Error('Query strings should be either the empty string or start with a "?": '.concat(n));return i(t,n).length>0},deepEquals:function(e,t){if(_typeof(e)!==_typeof(t))return!1;if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return e===t;if(null===e&&null===t)return!0;if(void 0===e&&void 0===t)return!0;if(null===e&&void 0===t)return!1;if(void 0===e&&null===t)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;if(0===i.length)return e===t;for(var a=0;a<i.length;a++){if(i[a]!==r[a])return!1;var s=e[i[a]],o=t[i[a]];if(!n.deepEquals(s,o))return!1}return!0},removeKeyValuePair:function(e,t){if(0===e.indexOf("?")){for(var n=[],i=e.substring(1).split("&"),r=0;r<i.length;r++){var a=i[r],s=a.split("=");decodeURIComponent(s[0])!==t&&n.push(a)}return n.length>0?"?".concat(n.join("&")):""}return e},removeKeyValuePairs:function(e,t){for(var n=0;n<t.length;n++)e=this.removeKeyValuePair(e,t[n]);return e},appendQueryString:function(e,t){if(0!==t.indexOf("?")&&0!==t.indexOf("&")||(t=t.substring(1)),0===t.length)return e;var n=e.indexOf("?")>=0?"&":"?";return e+n+t},appendQueryStringArray:function(e,t){for(var n=0;n<t.length;n++)e=this.appendQueryString(e,t[n]);return e},getQueryString:function(e){var t=e.indexOf("?");return t>=0?e.substring(t):"?"},addWarning:function(e,t,n){console.warn(n),this.warnings.push({key:e,value:t,message:n})},hasWarning:function(e){for(var t=!1,n=0;n<this.warnings.length&&!t;n++)t=this.warnings[n].key===e;return t},getQueryParametersFromString:function(e){return 0===e.indexOf("?")?e.substring(1).split("&"):[]},getSingleQueryParameterString:function(e,t){for(var n=this.getQueryString(t),i=this.getQueryParametersFromString(n),r=0;r<i.length;r++){var a=i[r],s=a.split("=");if(decodeURIComponent(s[0])===e)return a}return null}},i=function(e,t){for(var n=[],i=t.slice(1).split("&"),r=0;r<i.length;r++){var a=i[r].split("="),s=a[0],o=a.slice(1).join("=");s===e&&(o?n.push(decodeURIComponent(o)):n.push(null))}return n},r=function(e,t){l(t.hasOwnProperty("type"),"type field is required for key: ".concat(e)),l(u.hasOwnProperty(t.type),"invalid type: ".concat(t.type," for key: ").concat(e)),t.hasOwnProperty("parse")&&l("function"==typeof t.parse,"parse must be a function for key: ".concat(e)),l(!(t.hasOwnProperty("validValues")&&t.hasOwnProperty("isValidValue")),t,e,"validValues and isValidValue are mutually exclusive for key: ".concat(e)),t.hasOwnProperty("validValues")&&l(Array.isArray(t.validValues),"isValidValue must be an array for key: ".concat(e)),t.hasOwnProperty("isValidValue")&&l("function"==typeof t.isValidValue,"isValidValue must be a function for key: ".concat(e)),t.hasOwnProperty("defaultValue")&&l(u[t.type].isValidValue(t.defaultValue),"defaultValue incorrect type: ".concat(e)),t.hasOwnProperty("validValues")&&t.validValues.forEach((function(n){return l(u[t.type].isValidValue(n),"validValue incorrect type for key: ".concat(e))})),t.hasOwnProperty("defaultValue")&&t.hasOwnProperty("validValues")&&l(o(t.defaultValue,t.validValues),t,e,"defaultValue must be a member of validValues, for key: ".concat(e)),t.hasOwnProperty("public")&&t.public&&"flag"!==t.type&&l(t.hasOwnProperty("defaultValue"),"defaultValue is required when public: true for key: ".concat(e)),a(e,t,u[t.type].required,u[t.type].optional),u[t.type].validateSchema&&u[t.type].validateSchema(e,t)},a=function(e,t,n,i){var r=Object.getOwnPropertyNames(t);n.forEach((function(t){l(-1!==r.indexOf(t),"missing required property: ".concat(t," for key: ").concat(e))}));var a=n.concat(i);r.forEach((function(t){l("type"===t||-1!==a.indexOf(t),"unsupported property: ".concat(t," for key: ").concat(e))}))},s=function(e,t,n){var i;return l(n.length<=1,"query parameter cannot occur multiple times: ".concat(e)),"flag"===t.type?i=u[t.type].parse(e,t,n[0]):(l(void 0!==n[0]||t.hasOwnProperty("defaultValue"),"missing required query parameter: ".concat(e)),i=void 0===n[0]?t.defaultValue:u[t.type].parse(e,t,n[0])),i},o=function(e,t){for(var i=!1,r=0;r<t.length&&!i;r++)i=n.deepEquals(t[r],e);return i},l=function(e,t){if(!e)throw console&&console.log&&console.log(t),new Error("Query String Machine Assertion failed: ".concat(t))},u={flag:{required:[],optional:["private","public"],validateSchema:null,parse:function(e,t,n){return null===n||void 0!==n&&n},isValidValue:function(e){return!0===e||!1===e},defaultValue:!0},boolean:{required:[],optional:["defaultValue","private","public"],validateSchema:null,parse:function(e,t,n){return"true"===n||"false"!==n&&n},isValidValue:function(e){return!0===e||!1===e}},number:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:function(e,t,n){var i=Number(n);return null===n||isNaN(i)?n:i},isValidValue:function(e){return"number"==typeof e&&!isNaN(e)}},string:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:function(e,t,n){return n},isValidValue:function(e){return null===e||"string"==typeof e}},array:{required:["elementSchema"],optional:["defaultValue","validValues","isValidValue","separator","validValues","private","public"],validateSchema:function(e,t){t.hasOwnProperty("separator")&&l("string"==typeof t.separator&&1===t.separator.length,"invalid separator: ".concat(t.separator,", for key: ").concat(e)),l(!t.elementSchema.hasOwnProperty("public"),"Array elements should not declare public; it comes from the array schema itself."),r("".concat(e,".element"),t.elementSchema)},parse:function(e,t,n){return null===n?[]:n.split(t.separator||",").map((function(n){return s(e,t.elementSchema,[n])}))},isValidValue:function(e){return Array.isArray(e)||null===e}},custom:{required:["parse"],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:function(e,t,n){return t.parse(n)},isValidValue:function(e){return!0}}};return n}()},"function"==typeof window.define&&window.define.amd?window.define([],p):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=p():d.QueryStringMachine=p(),function(){var e,t=((_.hasIn(window,"phet.chipper.packageObject")?phet.chipper.packageObject:{}).phet||{}).simFeatures||{},n=t.colorProfiles||["default"],i={allowLinks:{type:"boolean",defaultValue:!0,public:!0},audio:{type:"string",defaultValue:"enabled",validValues:["enabled","disabled","muted"],public:!0},binder:{type:"flag"},brand:{type:"string",defaultValue:"adapted-from-phet"},buildCompatible:{type:"flag"},continuousTest:{type:"string",defaultValue:""},colorProfile:{type:"string",defaultValue:n[0],validValues:n,public:!0},debugger:{type:"flag"},deprecationWarnings:{type:"flag"},dev:{type:"flag"},ea:{type:"flag"},eall:{type:"flag"},extraSoundInitiallyEnabled:{type:"flag",public:!0},fuzz:{type:"flag"},fuzzBoard:{type:"flag"},fuzzMouse:{type:"flag"},fuzzPointers:{type:"number",defaultValue:1},fuzzTouch:{type:"flag"},fuzzRate:{type:"number",defaultValue:100,isValidValue:function(e){return e>0}},ga:{type:"string",defaultValue:null},gameUp:{type:"flag"},gameUpTestHarness:{type:"flag"},gameUpLogging:{type:"flag"},gaPage:{type:"string",defaultValue:null},homeScreen:{type:"boolean",defaultValue:!0,public:!0},initialScreen:{type:"number",defaultValue:0,public:!0},legendsOfLearning:{type:"flag"},listenerLimit:{type:"number",defaultValue:Number.POSITIVE_INFINITY,public:!1},locale:{type:"string",defaultValue:"en"},locales:{type:"array",elementSchema:{type:"string"},defaultValue:[]},log:{type:"flag"},memoryLimit:{type:"number",defaultValue:0},mobileA11yTest:{type:"flag"},"phet-android-app":{type:"flag"},"phet-app":{type:"flag"},playbackMode:{type:"boolean",defaultValue:!1},postMessageOnBeforeUnload:{type:"flag"},postMessageOnError:{type:"flag"},postMessageOnLoad:{type:"flag"},postMessageOnReady:{type:"flag"},preserveDrawingBuffer:{type:"flag"},preventFullScreen:{type:"flag"},profiler:{type:"flag"},qrCode:{type:"flag"},randomSeed:{type:"number",defaultValue:Math.random()},rootRenderer:{type:"string",defaultValue:null,validValues:[null,"canvas","svg","dom","webgl"]},sceneryLog:{type:"array",elementSchema:{type:"string"},defaultValue:null},sceneryStringLog:{type:"flag"},screens:{type:"array",elementSchema:{type:"number",isValidValue:Number.isInteger},defaultValue:null,isValidValue:function(e){return null===e||e.length===_.uniq(e).length&&e.length>0},public:!0},showAnswers:{type:"flag",private:!0},showCanvasNodeBounds:{type:"flag"},showFittedBlockBounds:{type:"flag"},showHitAreas:{type:"flag"},showPointerAreas:{type:"flag"},showPointers:{type:"flag"},showVisibleBounds:{type:"flag"},shuffleListeners:{type:"flag"},speechSynthesisFromParent:{type:"flag"},speed:{type:"number",defaultValue:1,isValidValue:function(e){return e>0}},strings:{type:"string",defaultValue:null},stringTest:{type:"string",defaultValue:null},keyboardLocaleSwitcher:{type:"flag"},supportsInteractiveDescription:{type:"boolean",defaultValue:!!t.supportsInteractiveDescription},supportsInteractiveHighlights:{type:"boolean",defaultValue:t.hasOwnProperty("supportsInteractiveHighlights")?!!t.supportsInteractiveHighlights:!!t.supportsInteractiveDescription},interactiveHighlightsInitiallyEnabled:{type:"flag",public:!0},supportsGestureControl:{type:"boolean",defaultValue:!!t.supportsGestureControl},supportsVoicing:{type:"boolean",defaultValue:!!t.supportsVoicing},voicingInitiallyEnabled:{type:"flag"},preferencesStorage:{type:"flag"},printVoicingResponses:{type:"flag"},supportsPanAndZoom:{type:"boolean",public:!0,defaultValue:!t.hasOwnProperty("supportsPanAndZoom")||t.supportsPanAndZoom},supportsSound:{type:"boolean",defaultValue:!!t.supportsSound},supportsExtraSound:{type:"boolean",defaultValue:!!t.supportsExtraSound},vibrationParadigm:{type:"string",defaultValue:null},webgl:{type:"boolean",defaultValue:!0}};function r(e){var t,n=new Date;do{t=new Date}while(t-n<e)}!function(){window.phet=window.phet||{},window.phet.chipper=window.phet.chipper||{},window.phet.chipper.queryParameters=QueryStringMachine.getAll(i),window.phet.chipper.colorProfiles=n,window.phet.chipper.isFuzzEnabled=function(){return window.phet.chipper.queryParameters.fuzz||window.phet.chipper.queryParameters.fuzzMouse||window.phet.chipper.queryParameters.fuzzTouch||window.phet.chipper.queryParameters.fuzzBoard},window.phet.chipper.queryParameters.log&&(window.phet.log=function(e,t){t=_.assignIn({color:"#009900"},t),console.log("%c".concat(e),"color: ".concat(t.color))}),window.phet.chipper.brand=window.phet.chipper.brand||phet.chipper.queryParameters.brand||"adapted-from-phet";var e="undefined"!=typeof window&&phet.chipper.queryParameters.stringTest?phet.chipper.queryParameters.stringTest:null;window.phet.chipper.mapString=function(t){return null===e?t:"double"===e?"".concat(t,":").concat(t):"long"===e?"12345678901234567890123456789012345678901234567890":"rtl"===e?"‫تست (زبان)‬":"xss"===e?"".concat(t,'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg==" onload="window.location.href=atob(\'aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQ==\')" />'):"none"===e?t:e},QueryStringMachine.containsKey("locale")?window.phet.chipper.locale=phet.chipper.queryParameters.locale:window.phet.chipper.locale||(window.phet.chipper.locale="en");var t=JSON.parse(phet.chipper.queryParameters.strings||"{}");phet.chipper.getStringForBuiltSim=function(e){if(t[e])return t[e];var n=phet.chipper.strings[phet.chipper.locale];return n||(n=phet.chipper.strings[phet.chipper.locale.slice(0,2)])||(n=phet.chipper.strings.en),phet.chipper.mapString(n[e])}}(),window.phet.chipper.makeEverythingSlow=function(){window.setInterval((function(){r(64)}),16)},window.phet.chipper.makeRandomSlowness=function(){window.setInterval((function(){r(Math.ceil(100+200*Math.random()))}),Math.ceil(100+200*Math.random()))},window.phet.chipper.isProduction="production"===$("meta[name=phet-sim-level]").attr("content"),window.phet.chipper.isApp=phet.chipper.queryParameters["phet-app"]||phet.chipper.queryParameters["phet-android-app"],((e=!phet.chipper.isProduction&&phet.chipper.queryParameters.eall)||!phet.chipper.isProduction&&phet.chipper.queryParameters.ea||phet.chipper.isDebugBuild)&&window.assertions.enableAssert(),e&&window.assertions.enableAssertSlow(),window.phet.chipper.reportContinuousTestResult=function(e){window.parent&&window.parent.postMessage(JSON.stringify(_.assignIn({continuousTest:JSON.parse(phet.chipper.queryParameters.continuousTest),url:window.location.href},e)),"*")},phet.chipper.queryParameters.continuousTest&&(window.addEventListener("error",(function(e){var t="",n="";e&&e.message&&(t=e.message),e&&e.error&&e.error.stack&&(n=e.error.stack),phet.chipper.reportContinuousTestResult({type:"continuous-test-error",message:t,stack:n})})),window.addEventListener("beforeunload",(function(e){phet.chipper.reportContinuousTestResult({type:"continuous-test-unload"})})),window.open=function(){return{focus:function(){},blur:function(){}}}),phet.chipper.queryParameters.postMessageOnError&&window.addEventListener("error",(function(e){var t="",n="";e&&e.message&&(t=e.message),e&&e.error&&e.error.stack&&(n=e.error.stack),window.parent&&window.parent.postMessage(JSON.stringify({type:"error",url:window.location.href,message:t,stack:n}),"*")})),phet.chipper.queryParameters.postMessageOnBeforeUnload&&window.addEventListener("beforeunload",(function(e){window.parent&&window.parent.postMessage(JSON.stringify({type:"beforeUnload"}),"*")}))}(),function(){var e={897:function(e,t,n){"use strict";var i;n.d(t,{Z:function(){return r}}),e=n.hmd(e);try{i=e&&e.hot}catch(a){i=!1}var r=i},37:function(){!function(){window.phetio=window.phetio||{};window.phetio.PhetioIDUtils={append:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.forEach((function(t){e+="."+t})),e},getComponentName:function(e){var t=e.lastIndexOf(".");return-1===t?e:e.substring(t+1,e.length)},getParentID:function(e){var t=e.lastIndexOf(".");return-1===t?null:e.substring(0,t)},getDOMElementID:function(e){return"phetioID:".concat(e)},getScreenID:function(e){for(var t=[],n=e.split("."),i=0;i<n.length;i++){var r=n[i];t.push(r);var a=r.indexOf("Screen");if(a>0&&a+"Screen".length===r.length)return t.join(".")}return null},getGroupElementIndex:function(e){return Number(e.split(window.phetio.PhetioIDUtils.GROUP_SEPARATOR)[1])},isAncestor:function(e,t){for(var n=e.split("."),i=t.split("."),r=0;r<n.length;r++)if(n[r]!==i[r])return!1;return t!==e},SEPARATOR:".",GROUP_SEPARATOR:"_",INTER_TERM_SEPARATOR:"-",GENERAL_COMPONENT_NAME:"general",GLOBAL_COMPONENT_NAME:"global",HOME_SCREEN_COMPONENT_NAME:"homeScreen",MODEL_COMPONENT_NAME:"model",VIEW_COMPONENT_NAME:"view",CONTROLLER_COMPONENT_NAME:"controller",COLORS_COMPONENT_NAME:"colors"}}()}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i](a,a.exports,n),a.loaded=!0,a.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e,t,i,r,a,s,o,l,u=n(897),c=function(){function e(t){if(_classCallCheck(this,e),this.name=t,window.phet){if("chipper"===t)return window.phet.chipper.name="chipper",window.phet.chipper.register=this.register.bind(window.phet.chipper),window.phet.chipper;window.phet[t]=this}}return _createClass(e,[{key:"register",value:function(e,t){if(e.indexOf(".")<0)u.Z,this[e]=t;else{for(var n=e.split("."),i=this,r=0;r<n.length-1;r++)u.Z,i=i[n[r]];var a=n[n.length-1];u.Z,i[a]=t}return t}}]),e}(),h=new c("axon"),d=(_.hasIn(window,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.shuffleListeners,function(){function e(t){_classCallCheck(this,e),t&&(this.onBeforeNotify=t),this.listeners=new Set,this.emitContexts=[]}return _createClass(e,[{key:"dispose",value:function(){this.removeAllListeners()}},{key:"emit",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this.onBeforeNotify&&this.onBeforeNotify.apply(null,t),this.listeners.size>0){var i={index:0};this.emitContexts.push(i);var r,a=_createForOfIteratorHelper(this.listeners);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s.apply(void 0,t),i.index++,i.listenerArray)break}}catch(u){a.e(u)}finally{a.f()}if(i.listenerArray)for(var o=i.index;o<i.listenerArray.length;o++){var l;(l=i.listenerArray)[o].apply(l,t)}this.emitContexts.pop()}}},{key:"addListener",value:function(e){this.guardListeners(),this.listeners.add(e),this.changeCount&&this.changeCount(1)}},{key:"removeListener",value:function(e){this.guardListeners(),this.listeners.delete(e),this.changeCount&&this.changeCount(-1)}},{key:"removeAllListeners",value:function(){var e=this.listeners.size;this.guardListeners(),this.listeners.clear(),this.changeCount&&this.changeCount(-e)}},{key:"guardListeners",value:function(){for(var e=this.emitContexts.length-1;e>=0&&!this.emitContexts[e].listenerArray;e--)this.emitContexts[e].listenerArray=Array.from(this.listeners)}},{key:"hasListener",value:function(e){return this.listeners.has(e)}},{key:"hasListeners",value:function(){return this.listeners.size>0}},{key:"getListenerCount",value:function(){return this.listeners.size}},{key:"forEachListener",value:function(e){this.listeners.forEach(e)}}]),e}());h.register("TinyEmitter",d);var p=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"setTimeout",value:function(e,t){var n=this,i=0,r=function r(a){1e3*(i+=a)>=t&&n.hasListener(r)&&(e(),n.removeListener(r))};return this.addListener(r),r}},{key:"clearTimeout",value:function(e){this.hasListener(e)&&this.removeListener(e)}},{key:"setInterval",value:function(e,t){var n=this,i=0,r=function r(a){for(i+=a;1e3*i>=t&&n.hasListener(r);)e(),i-=t/1e3};return this.addListener(r),r}},{key:"clearInterval",value:function(e){this.hasListener(e)&&this.removeListener(e)}},{key:"runOnNextTick",value:function(e){this.setTimeout(e,0)}}]),n}(d);h.register("Timer",p);var f=new p;h.register("animationFrameTimer",f);var m=f,g=new c("phetCore");g.register("Namespace",c);var y=g;function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return _.each(n,(function(t){if(t)for(var n in t)if(t.hasOwnProperty(n)&&void 0!==t[n]){var i=t[n];_.endsWith(n,"Options")&&"Options"!==n?e[n]=v(e[n]||{},i):e[n]=i}})),e}y.register("merge",v);var A=v,b=function(e,t,n,i){return A(e,t,n,i)};function S(){return b}function E(){return b}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return b.apply(void 0,[e].concat(n))}y.register("optionize",S);var V=new c("tandem"),w={},C=function(e){window.phet&&window.phet.chipper&&window.phet.chipper.queryParameters&&phet.chipper.queryParameters.deprecationWarnings&&(w.hasOwnProperty(e)||(w[e]=!0,console.warn("Deprecation warning: ".concat(e))))};y.register("deprecationWarning",C);var x=C,P=function(){function e(t){var n=this;_classCallCheck(this,e),x("EnumerationDeprecated should be exchanged for classes that extend EnumerationValue, see WilderEnumerationPatterns for examples.");t.keys,t.map;var i=t.keys||Object.keys(t.map),r=t.map||{};t=A({phetioDocumentation:null,beforeFreeze:null},t),this.phetioDocumentation=t.phetioDocumentation,this.KEYS=i,this.VALUES=[],i.forEach((function(e){var t=r[e]||{};t.name=e,t.toString=function(){return e},n[e]=t,n.VALUES.push(t)})),t.beforeFreeze&&t.beforeFreeze(this)}return _createClass(e,[{key:"toString",value:function(){return this.KEYS.join(", ")}},{key:"includes",value:function(e){return _.includes(this.VALUES,e)}},{key:"getValue",value:function(e){return this[e]}},{key:"getKey",value:function(e){return e.name}},{key:"values",get:function(){return this.VALUES}},{key:"keys",get:function(){return this.KEYS}},{key:"enumeration",get:function(){return this}}],[{key:"byKeys",value:function(t,n){return new e(A({keys:t},n))}},{key:"byMap",value:function(t,n){return new e(A({map:t},n))}}]),e}();y.register("EnumerationDeprecated",P);var T=P,M=["string","number","boolean","function"],L=["valueType","validValues","isValidValue","phetioType","validators"],I=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getValidatorValidationError",value:function(t){if(!(t instanceof Object))return"validator must be an Object";if(!(t.hasOwnProperty("isValidValue")||t.hasOwnProperty("valueType")||t.hasOwnProperty("validValues")||t.hasOwnProperty("phetioType")||t.hasOwnProperty("validators")))return this.combineErrorMessages("validator must have at least one of: ".concat(L.join(",")),t.validationMessage);if(t.hasOwnProperty("valueType")){var n=e.getValueOrElementTypeValidationError(t.valueType);if(n)return this.combineErrorMessages("Invalid valueType: ".concat(t.valueType,", error: ").concat(n),t.validationMessage)}if(t.hasOwnProperty("isValidValue")&&"function"!=typeof t.isValidValue&&null!==t.isValidValue&&void 0!==t.isValidValue)return this.combineErrorMessages("isValidValue must be a function: ".concat(t.isValidValue),t.validationMessage);if(void 0!==t.validValues&&null!==t.validValues){if(!Array.isArray(t.validValues))return this.combineErrorMessages("validValues must be an array: ".concat(t.validValues),t.validationMessage);var i=_.omit(t,"validValues");if(e.containsValidatorKey(i))for(var r=0;r<t.validValues.length;r++){var a=t.validValues[r],s=e.getValidationError(a,i);if(s)return this.combineErrorMessages("Item not valid in validValues: ".concat(a,", error: ").concat(s),t.validationMessage)}}if(t.hasOwnProperty("phetioType")){if(!t.phetioType)return this.combineErrorMessages("falsey phetioType provided",t.validationMessage);if(!t.phetioType.validator)return this.combineErrorMessages("validator needed for phetioType: ".concat(t.phetioType.typeName),t.validationMessage);var o=e.getValidatorValidationError(t.phetioType.validator);if(o)return this.combineErrorMessages(o,t.validationMessage)}if(t.hasOwnProperty("validators"))for(var l=t.validators,u=0;u<l.length;u++){var c=l[u],h=e.getValidatorValidationError(c);if(h)return this.combineErrorMessages("validators[".concat(u,"] invalid: ").concat(h),t.validationMessage)}return null}},{key:"getValueTypeValidatorValidationError",value:function(e){return"function"==typeof e||"string"==typeof e||e instanceof T||null==e?"string"!=typeof e||_.includes(M,e)?null:"valueType not a supported primitive types: ".concat(e):"valueType must be {function|string|EnumerationDeprecated|null|undefined}, valueType=".concat(e)}},{key:"validateValidator",value:function(e){}},{key:"containsValidatorKey",value:function(e){if(!(e instanceof Object))return!1;for(var t=0;t<L.length;t++)if(e.hasOwnProperty(L[t]))return!0;return!1}},{key:"combineErrorMessages",value:function(e,t){return t&&(e="".concat(t,": ").concat(e)),e}},{key:"isValueValid",value:function(e,t,n){return null===this.getValidationError(e,t,n)}},{key:"getValidationError",value:function(t,n,i){var r=S()({validateValidator:!0},i);if(r.validateValidator){var a=e.getValidatorValidationError(n);if(a)return a}if(n.hasOwnProperty("valueType")){var s=n.valueType;if(Array.isArray(s)){if(!_.some(s.map((function(i){return!e.getValueTypeValidationError(t,i,n.validationMessage)}))))return this.combineErrorMessages("value not valid for any valueType in ".concat(s.toString().substring(0,100),", value: ").concat(t),n.validationMessage)}else if(s){var o=e.getValueTypeValidationError(t,s,n.validationMessage);if(o)return o}}if(n.hasOwnProperty("validValues")&&!n.validValues.includes(t))return this.combineErrorMessages("value not in validValues: ".concat(t),n.validationMessage);if(n.hasOwnProperty("isValidValue")&&!n.isValidValue(t))return this.combineErrorMessages("value failed isValidValue: ".concat(t),n.validationMessage);if(n.hasOwnProperty("phetioType")){var l=e.getValidationError(t,n.phetioType.validator,r);if(l)return this.combineErrorMessages("value failed phetioType validator: ".concat(t,", error: ").concat(l),n.validationMessage)}if(n.hasOwnProperty("validators"))for(var u=n.validators,c=0;c<u.length;c++){var h=u[c],d=e.getValidationError(t,h,r);if(d)return this.combineErrorMessages("Failed validation for validators[".concat(c,"]: ").concat(d),n.validationMessage)}return null}},{key:"getValueTypeValidationError",value:function(e,t,n){return"string"==typeof t&&_typeof(e)!==t?this.combineErrorMessages("value should have typeof ".concat(t,", value=").concat(e),n):t!==Array||Array.isArray(e)?t instanceof T&&!t.includes(e)?this.combineErrorMessages("value is not a member of EnumerationDeprecated ".concat(t),n):"function"!=typeof t||e instanceof t?null===t&&null!==e?this.combineErrorMessages("value should be null, value=".concat(e),n):null:this.combineErrorMessages("value should be instanceof ".concat(t.name,", value=").concat(e),n):this.combineErrorMessages("value should have been an array, value=".concat(e),n)}},{key:"getValueOrElementTypeValidationError",value:function(t){if(Array.isArray(t))for(var n=0;n<t.length;n++){var i=t[n],r=e.getValueTypeValidatorValidationError(i);if(r)return"Array value invalid: ".concat(r)}else if(t){var a=e.getValueTypeValidatorValidationError(t);if(a)return"Value type invalid: ".concat(a)}return null}}]),e}();_defineProperty(I,"VALIDATOR_KEYS",L),_defineProperty(I,"STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR",{valueType:"string",isValidValue:function(e){return!/\{\{\w*\}\}/.test(e)}}),h.register("Validation",I);var R=function(e,t,n){};h.register("validate",R);var D=R,N={IO_TYPE_SUFFIX:"IO"};V.register("PhetioConstants",N);var q=N,O={OBJECT_IO_TYPE_NAME:"ObjectIO",EVENT_TYPE_MODEL:"MODEL",PHET_IO_OBJECT_METADATA_DEFAULTS:{phetioTypeName:"ObjectIO",phetioDocumentation:"",phetioState:!0,phetioReadOnly:!1,phetioEventType:"MODEL",phetioHighFrequency:!1,phetioPlayback:!1,phetioDynamicElement:!1,phetioIsArchetype:!1,phetioFeatured:!1,phetioDesigned:!1,phetioArchetypePhetioID:null},METADATA_KEY_NAME:"_metadata",DATA_KEY_NAME:"_data"};V.register("TandemConstants",O);var B=O,G=function(e){};y.register("assertMutuallyExclusiveOptions",G);var H=G,F=function(){function e(t){_classCallCheck(this,e);var n=S()({displayString:"",validator:null,compositeSchema:null},t);this.displayString=n.displayString,this.validator=n.validator,this.compositeSchema=n.compositeSchema}return _createClass(e,[{key:"validateStateSchema",value:function(e){}},{key:"defaultApplyState",value:function(e,t){!function t(n,i){for(var r in n)if(n.hasOwnProperty(r))if("_private"===r)t(n._private,i._private);else{var a=n[r];"fromStateObject"===a.defaultDeserializationMethod?e[r]=n[r].fromStateObject(i[r]):n[r].applyState(e[r],i[r])}}(this.compositeSchema,t)}},{key:"defaultToStateObject",value:function(e){return function t(n){var i={};for(var r in n)n.hasOwnProperty(r)&&("_private"===r?i._private=t(n._private):i[r]=n[r].toStateObject(e[r]));return i}(this.compositeSchema)}},{key:"isComposite",value:function(){return!!this.compositeSchema}},{key:"checkStateObjectValid",value:function(e,t,n,i){if(this.isComposite()){var r=e,a=this.compositeSchema,s=null,o=function(e,t,n,i){Object.keys(e).filter((function(e){return e!==i})).forEach((function(i){var r=t.hasOwnProperty(i);r||(s=!1),e[i].validateStateObject(t[i]),n.push(i)}))};return o(a,r,n,"_private"),a._private&&o(a._private,r._private,i,null),s}var l=e;return t&&D(l,this.validator),I.isValueValid(l,this.validator)}},{key:"getRelatedTypes",value:function(){var e=[],t=function(t){Object.keys(t).forEach((function(n){t[n]instanceof U&&e.push(t[n])}))};return this.compositeSchema&&(t(this.compositeSchema),this.compositeSchema._private&&t(this.compositeSchema._private)),e}},{key:"getStateSchemaAPI",value:function(){if(this.isComposite()){var e=_.mapValues(this.compositeSchema,(function(e){return e.typeName}));return this.compositeSchema._private&&(e._private=_.mapValues(this.compositeSchema._private,(function(e){return e.typeName}))),e}return this.displayString}}],[{key:"asValue",value:function(t,n){return new e({validator:n,displayString:t})}}]),e}();V.register("StateSchema",F);var Y={validateValidator:!1},z=function(e){var t=e.indexOf(q.IO_TYPE_SUFFIX);return e.substring(0,t)},U=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.typeName=t;var r=n.supertype||e.ObjectIO,a=!!n.toStateObject,s=!!n.applyState,o=!!n.stateSchema,l=S()({supertype:e.ObjectIO,methods:{},events:[],metadataDefaults:{},dataDefaults:{},methodOrder:[],parameterTypes:[],documentation:"IO Type for ".concat(z(t)),isFunctionType:!1,toStateObject:r&&r.toStateObject,fromStateObject:r&&r.fromStateObject,stateToArgsForConstructor:r&&r.stateToArgsForConstructor,applyState:r&&r.applyState,stateSchema:null,defaultDeserializationMethod:"fromStateObject",addChildElement:r&&r.addChildElement},n);if(this.supertype=r,this.documentation=l.documentation,this.methods=l.methods,this.events=l.events,this.metadataDefaults=l.metadataDefaults,this.dataDefaults=l.dataDefaults,this.methodOrder=l.methodOrder,this.parameterTypes=l.parameterTypes,this.validator=_.pick(l,I.VALIDATOR_KEYS),this.validator.validationMessage=this.validator.validationMessage||"Validation failed IOType Validator: ".concat(this.typeName),this.defaultDeserializationMethod=l.defaultDeserializationMethod,null===l.stateSchema||l.stateSchema instanceof F)this.stateSchema=l.stateSchema;else{var u="function"==typeof l.stateSchema?l.stateSchema(this):l.stateSchema;this.stateSchema=new F({compositeSchema:u})}this.toStateObject=function(e){return D(e,i.validator,Y),!a&&o&&i.stateSchema.isComposite()?i.stateSchema.defaultToStateObject(e):l.toStateObject(e)},this.fromStateObject=l.fromStateObject,this.stateToArgsForConstructor=l.stateToArgsForConstructor,this.applyState=function(e,t){D(e,i.validator,Y),!s&&o&&i.stateSchema.isComposite()?i.stateSchema.defaultApplyState(e,t):l.applyState(e,t)},this.isFunctionType=l.isFunctionType,this.addChildElement=l.addChildElement}return _createClass(e,[{key:"getTypeHierarchy",value:function(){for(var e=[],t=this;t;)e.push(t),t=t.supertype;return e}},{key:"extends",value:function(e){return this.getTypeHierarchy().includes(e)}},{key:"getAllMetadataDefaults",value:function(){return _.merge({},this.supertype?this.supertype.getAllMetadataDefaults():{},this.metadataDefaults)}},{key:"getAllDataDefaults",value:function(){return _.merge({},this.supertype?this.supertype.getAllDataDefaults():{},this.dataDefaults)}},{key:"isStateObjectValid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=!0;if(this.stateSchema){var a=this.stateSchema.checkStateObjectValid(e,t,n,i);if(null!==a)return a}if(this.supertype&&(!this.stateSchema||!this.stateSchema.isComposite()))return r&&this.supertype.isStateObjectValid(e,t,n,i);if(!this.supertype&&e&&"string"!=typeof e&&!Array.isArray(e)){var s=function(e,t){var a=("public"===e?n:i).includes(t);a||(r=!1)};return Object.keys(e).filter((function(e){return"_private"!==e})).forEach((function(e){return s("public",e)})),e._private&&Object.keys(e._private).forEach((function(e){return s("private",e)})),r}return!0}},{key:"validateStateObject",value:function(e){this.isStateObjectValid(e,!0)}},{key:"toString",value:function(){return this.typeName}}]),e}();U.ObjectIO=new U(B.OBJECT_IO_TYPE_NAME,{isValidValue:function(){return!0},supertype:null,documentation:"The root of the IO Type hierarchy",toStateObject:function(e){return phet&&phet.tandem&&phet.tandem.Tandem.VALIDATION,null},fromStateObject:function(e){throw new Error("ObjectIO.fromStateObject should not be called")},stateToArgsForConstructor:function(e){return[]},applyState:_.noop,metadataDefaults:B.PHET_IO_OBJECT_METADATA_DEFAULTS,dataDefaults:{initialState:null},stateSchema:null}),V.register("IOType",U);var W=new U("ValueIO",{isValidValue:_.stubTrue,supertype:U.ObjectIO,toStateObject:function(e){return e},fromStateObject:function(e){return e},stateSchema:F.asValue("*",{isValidValue:_.stubTrue})});V.register("ValueIO",W);var j=W,X=new U("BooleanIO",{supertype:j,valueType:"boolean",documentation:"IO Type for Javascript's boolean primitive type",stateSchema:F.asValue("boolean",{valueType:"boolean"}),toStateObject:_.identity});V.register("BooleanIO",X);var Q=X;function K(e,t){var n=_.indexOf(e,t);e.splice(n,1)}y.register("arrayRemove",K);var J=K,Z=function(){function e(){_classCallCheck(this,e);this.constructor;this._name=null,this._enumeration=null}return _createClass(e,[{key:"toString",value:function(){return this.name}},{key:"isEnumerationValue",value:function(){return!0}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"enumeration",get:function(){return this._enumeration},set:function(e){this._enumeration=e}}]),e}();_defineProperty(Z,"sealedCache",new Set),y.register("EnumerationValue",Z);var ee=Z;function te(e){for(var t=[e],n=e.prototype;n&&(n=Object.getPrototypeOf(n));)n.constructor&&t.push(n.constructor);return t}y.register("inheritance",te);var ne=te,ie=function(){function e(t,n){var i=this;_classCallCheck(this,e);var r=S()({phetioDocumentation:"",instanceType:t},n);this.phetioDocumentation=r.phetioDocumentation;var a=r.instanceType,s=_.reverse(ne(t));this.keys=[],this.values=[],s.forEach((function(e){Object.keys(e).forEach((function(n){var r=e[n];r instanceof a&&(i.keys.push(n),i.values.push(r),r instanceof t&&(r.name=n,r.enumeration=i))}))})),this.Enumeration=t,ee.sealedCache.add(t)}return _createClass(e,[{key:"getKey",value:function(e){return e.name}},{key:"getValue",value:function(e){return this.Enumeration[e]}},{key:"includes",value:function(e){return this.values.includes(e)}}]),e}();y.register("Enumeration",ie);var re=ie,ae=new Map,se=function(e){return e.join("|")},oe=function(e){var t=e.enumeration;if(!ae.has(t)){var n=t.phetioDocumentation?" ".concat(t.phetioDocumentation):"",i=t.keys,r=t.values,a="EnumerationIO(".concat(se(i),")");ae.set(t,new U(a,{validValues:r,documentation:"Possible values: ".concat(i.join(", "),".").concat(n),toStateObject:function(e){return t.getKey(e)},fromStateObject:function(e){return t.getValue(e)},stateSchema:F.asValue("".concat(se(i)),{isValidValue:function(e){return i.includes(e)}})}))}return ae.get(t)};V.register("EnumerationIO",oe);var le=oe;l=B.EVENT_TYPE_MODEL;var ue=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(ue,"USER",new ue),_defineProperty(ue,l,new ue),_defineProperty(ue,"WRAPPER",new ue),_defineProperty(ue,"OPT_OUT",new ue),_defineProperty(ue,"enumeration",new re(ue)),_defineProperty(ue,"phetioType",le(ue)),V.register("EventType",ue);var ce=ue,de=_.hasIn(window,"phet.chipper.packageObject")?phet.chipper.packageObject:{name:"placeholder"},pe=_.hasIn(window,"phet.preloads.phetio"),fe=pe&&phet.preloads.phetio.queryParameters.phetioPrintMissingTandems,me=!_.hasIn(de,"phet.phet-io.validation")||!!de.phet["phet-io"].validation,ge=window.QueryStringMachine&&QueryStringMachine.containsKey("phetioValidation"),ye=pe&&ge?!!phet.preloads.phetio.queryParameters.phetioValidation:pe&&me,ve=pe&&ye&&!fe,Ae=phetio.PhetioIDUtils.INTER_TERM_SEPARATOR,be={required:[],optional:[]},Se=[],Ee=[],ke=function(){function e(t,n,i){_classCallCheck(this,e),_defineProperty(this,"children",{}),_defineProperty(this,"isDisposed",!1),this.parentTandem=t,this.name=n,this.phetioID=this.parentTandem?window.phetio.PhetioIDUtils.append(this.parentTandem.phetioID,this.name):this.name;var r=S()({required:!0,supplied:!0,isValidTandemName:function(e){return/^[a-zA-Z0-9[\],]+$/.test(e)}},i);this.children={},this.parentTandem&&this.parentTandem.addChild(n,this),this.required=r.required,this.supplied=r.supplied}return _createClass(e,[{key:"addPhetioObject",value:function(t){if(pe){if(!this.required&&!this.supplied)return;if(e.launched)for(var n=0;n<Se.length;n++)Se[n].addPhetioObject(t);else e.bufferedPhetioObjects.push(t)}}},{key:"hasAncestor",value:function(e){return this.parentTandem===e||!(!this.parentTandem||!this.parentTandem.hasAncestor(e))}},{key:"removePhetioObject",value:function(t){if(this.required||this.supplied){if(pe)if(e.launched)for(var n=0;n<Se.length;n++)Se[n].removePhetioObject(t);else J(e.bufferedPhetioObjects,t);t.tandem.dispose()}}},{key:"getExtendedOptions",value:function(e){return A({supplied:this.supplied,required:this.required},e)}},{key:"createTandem",value:function(t,n){if(n=this.getExtendedOptions(n),this.hasChild(t)){var i=this.children[t];return i}return new e(this,t,n)}},{key:"hasChild",value:function(e){return this.children.hasOwnProperty(e)}},{key:"addChild",value:function(e,t){this.children[e]=t}},{key:"iterateDescendants",value:function(e){for(var t in this.children)this.children.hasOwnProperty(t)&&(e(this.children[t]),this.children[t].iterateDescendants(e))}},{key:"removeChild",value:function(e){delete this.children[e]}},{key:"dispose",value:function(){this.parentTandem.removeChild(this.name),this.parentTandem=null,this.isDisposed=!0}},{key:"getArchetypalPhetioID",value:function(){var e=this.parentTandem?window.phetio.PhetioIDUtils.append(this.parentTandem.getArchetypalPhetioID(),this.name):this.phetioID;return e.includes("_")?e.split(Ae).map((function(e){return e.includes("_")?"archetype":e})).join(Ae):e}},{key:"createGroupTandem",value:function(e){return this.children[e]?this.children[e]:new Ce(this,e)}},{key:"equals",value:function(e){return this.phetioID===e.phetioID}},{key:"createTandemFromPhetioID",value:function(e){return this.createTandem(e.split(window.phetio.PhetioIDUtils.SEPARATOR).join(Ae),{isValidTandemName:function(e){return/^[a-zA-Z0-9[\],-_]+$/.test(e)}})}}],[{key:"onMissingTandem",value:function(e){if(fe&&!e.supplied){var t=(new Error).stack;e.required?be.required.push({phetioID:e.phetioID,stack:t}):t.includes("Font")||be.optional.push({phetioID:e.phetioID,stack:t})}}},{key:"addPhetioObjectListener",value:function(e){Se.push(e)}},{key:"launch",value:function(){for(e.launched=!0;Ee.length>0;)Ee.shift()()}},{key:"unlaunch",value:function(){e.launched=!1,e.bufferedPhetioObjects.length=0,Ee.length=0}},{key:"addLaunchListener",value:function(e){Ee.push(e)}}]),e}();_defineProperty(ke,"SCREEN_TANDEM_NAME_SUFFIX","Screen"),_defineProperty(ke,"missingTandems",be),_defineProperty(ke,"PHET_IO_ENABLED",pe),_defineProperty(ke,"API_GENERATION",ke.PHET_IO_ENABLED&&(phet.preloads.phetio.queryParameters.phetioPrintAPI||phet.preloads.phetio.queryParameters.phetioCompareAPI)),_defineProperty(ke,"VALIDATION",ve),_defineProperty(ke,"METADATA_KEY","_metadata"),_defineProperty(ke,"DATA_KEY","_data"),_defineProperty(ke,"launched",!1),_defineProperty(ke,"bufferedPhetioObjects",[]),ke.addLaunchListener((function(){for(;ke.bufferedPhetioObjects.length>0;){var e=ke.bufferedPhetioObjects.shift();e.tandem.addPhetioObject(e)}}));var Ve=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"createTandem",value:function(e,t){if(ke.VALIDATION)e===window.phetio.PhetioIDUtils.GLOBAL_COMPONENT_NAME||"requiredTandem"===e||"optionalTandem"===e||"test"===e||e===window.phetio.PhetioIDUtils.GENERAL_COMPONENT_NAME||_.endsWith(e,ke.SCREEN_TANDEM_NAME_SUFFIX);return _get(_getPrototypeOf(n.prototype),"createTandem",this).call(this,e,t)}}]),n}(ke);ke.ROOT=new Ve(null,_.camelCase(de.name));var we=ke.ROOT.createTandem(window.phetio.PhetioIDUtils.GENERAL_COMPONENT_NAME);ke.ROOT_TEST=ke.ROOT.createTandem("test"),ke.GENERAL_MODEL=we.createTandem(window.phetio.PhetioIDUtils.MODEL_COMPONENT_NAME),ke.GENERAL_VIEW=we.createTandem(window.phetio.PhetioIDUtils.VIEW_COMPONENT_NAME),ke.GENERAL_CONTROLLER=we.createTandem(window.phetio.PhetioIDUtils.CONTROLLER_COMPONENT_NAME);var _e=ke.ROOT.createTandem(window.phetio.PhetioIDUtils.GLOBAL_COMPONENT_NAME);ke.GLOBAL_MODEL=_e.createTandem(window.phetio.PhetioIDUtils.MODEL_COMPONENT_NAME),ke.GLOBAL_VIEW=_e.createTandem(window.phetio.PhetioIDUtils.VIEW_COMPONENT_NAME),ke.COLORS=ke.GLOBAL_VIEW.createTandem(window.phetio.PhetioIDUtils.COLORS_COMPONENT_NAME),ke.OPTIONAL=ke.ROOT.createTandem("optionalTandem",{required:!1,supplied:!1}),ke.OPT_OUT=ke.OPTIONAL,ke.REQUIRED=ke.ROOT.createTandem("requiredTandem",{required:ve||fe,supplied:!1}),ke.PREFERENCES=ke.GLOBAL_MODEL.createTandem("preferences");var Ce=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,e,i)).groupName=i,r.groupMemberIndex=0,r}return _createClass(n,[{key:"createNextTandem",value:function(){var e=this.parentTandem.createTandem("".concat(this.groupName).concat(this.groupMemberIndex));return this.groupMemberIndex++,e}}]),n}(ke);V.register("Tandem",ke);var xe=ke,Pe=new U("StringIO",{supertype:j,valueType:"string",documentation:"IO Type for Javascript's string primitive type",stateSchema:F.asValue("string",{valueType:"string"}),toStateObject:_.identity});V.register("StringIO",Pe);var Te=Pe,Me=new U("LinkedElementIO",{isValidValue:function(){return!0},documentation:"A LinkedElement",toStateObject:function(e){return{elementID:e.element.tandem.phetioID}},fromStateObject:function(e){return{}},stateSchema:{elementID:Te}});V.register("LinkedElementIO",Me);var Le=Me,Ie=["phetioDynamicElement","phetioEventType","phetioIsArchetype","phetioPlayback","phetioReadOnly","phetioState","phetioTypeName"],Re=new(function(){function e(){_classCallCheck(this,e),_defineProperty(this,"apiMismatches",[]),_defineProperty(this,"simHasStarted",!1),_defineProperty(this,"enabled",!1),_defineProperty(this,"everyPhetioType",{})}return _createClass(e,[{key:"onSimStarted",value:function(){this.enabled&&phet.joist.sim.allScreensCreated&&(this.validateOverridesFile(),this.validatePreferencesModel()),phet.preloads.phetio.queryParameters.phetioPrintAPIProblems&&this.apiMismatches&&console.log("PhET-iO api problems detected: ",this.apiMismatches),this.simHasStarted=!0}},{key:"validatePreferencesModel",value:function(){Object.keys(phet.phetio.phetioEngine.phetioObjectMap).filter((function(e){return e.includes(".preferencesModel.")})).forEach((function(e){for(var t=phet.phetio.phetioEngine.phetioObjectMap[e];t instanceof Ge;)t=t.element}))}},{key:"onPhetioObjectRemoved",value:function(e){if(this.enabled){var t=e.tandem.phetioID;e.phetioDynamicElement||this.assertAPIError({phetioID:t,ruleInViolation:"2. Any static, registered PhetioObject can never be deregistered."})}}},{key:"onPhetioObjectAdded",value:function(e){var t=this;if(this.enabled){var n=e.phetioType;this.everyPhetioType[n.typeName]||(this.everyPhetioType[n.typeName]=n),this.simHasStarted&&phet.axon.animationFrameTimer.runOnNextTick((function(){if(e.phetioDynamicElement){if(phet.preloads.phetio.createArchetypes&&!e.isDisposed){var n=e.tandem.getArchetypalPhetioID(),i=phet.phetio.phetioEngine.getPhetioObject(n).getMetadata();t.checkDynamicInstanceAgainstArchetype(e,i,"simulation archetype")}}else t.assertAPIError({phetioID:e.tandem.phetioID,ruleInViolation:"1. After startup, only dynamic instances prescribed by the baseline file can be registered."})}))}}},{key:"validateOverridesFile",value:function(){var e=phet.phetio.phetioEngine.getPhetioElementsBaseline();for(var t in window.phet.preloads.phetio.phetioElementsOverrides){t.includes("archetype");if(phet.preloads.phetio.createArchetypes||e.hasOwnProperty(t))if(e.hasOwnProperty(t)){var n=window.phet.preloads.phetio.phetioElementsOverrides[t],i=e[t];for(var r in 0===Object.keys(n).length&&this.assertAPIError({phetioID:t,ruleInViolation:"4. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"no metadata keys found for this override."}),n)i.hasOwnProperty(r)||this.assertAPIError({phetioID:t,ruleInViolation:"8. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"phetioID metadata key not found in the baseline: ".concat(r)}),n[r]===i[r]&&this.assertAPIError({phetioID:t,ruleInViolation:"8. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"phetioID metadata override value is the same as the corresponding metadata value in the baseline."})}else this.assertAPIError({phetioID:t,ruleInViolation:"3. Any schema entries in the overrides file must exist in the baseline file.",message:"phetioID expected in the baseline file but does not exist"});else;}}},{key:"assertAPIError",value:function(e){e.phetioID?"".concat(e.phetioID,":  ").concat(e.ruleInViolation):"".concat(e.ruleInViolation);this.apiMismatches.push(e),this.simHasStarted||phet.preloads.phetio.queryParameters.phetioPrintAPIProblems}},{key:"checkDynamicInstanceAgainstArchetype",value:function(e,t,n){var i=this,r=e.getMetadata();Ie.forEach((function(a){"phetioDynamicElement"!==a&&"phetioArchetypePhetioID"!==a&&"phetioIsArchetype"!==a&&t[a]!==r[a]&&e.tandem&&i.assertAPIError({phetioID:e.tandem.phetioID,ruleInViolation:"5. Dynamic element metadata should match the archetype in the API.",source:n,message:"mismatched metadata: ".concat(a)})}))}}]),e}());V.register("phetioAPIValidation",Re);var De=Re,Ne=xe.PHET_IO_ENABLED,qe=function(e){return e.tandem.phetioID},Oe={tandem:xe.OPTIONAL,phetioType:U.ObjectIO,phetioDocumentation:B.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDocumentation,phetioState:B.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioState,phetioReadOnly:B.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioReadOnly,phetioEventType:ce.MODEL,phetioHighFrequency:B.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioHighFrequency,phetioPlayback:B.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioPlayback,phetioFeatured:B.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioFeatured,phetioDynamicElement:B.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDynamicElement,phetioDesigned:B.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDesigned,phetioEventMetadata:null,tandemNameSuffix:null},Be=function(){function e(t){_classCallCheck(this,e),this.tandem=Oe.tandem,this.phetioID=this.tandem.phetioID,this.phetioObjectInitialized=!1,this.isDisposed=!1,t&&this.initializePhetioObject({},t)}return _createClass(e,[{key:"initializePhetioObject",value:function(e,t){if(t.tandem&&xe.onMissingTandem(t.tandem),xe.VALIDATION&&t.tandem&&t.tandem.required,Ne&&t.tandem&&t.tandem.supplied){var n=k({},Oe,e),i=S()(n,t);this.phetioIsArchetype=!1,this.phetioBaselineMetadata=De.enabled||phet.preloads.phetio.queryParameters.phetioEmitAPIBaseline?this.getMetadata(A({phetioIsArchetype:this.phetioIsArchetype,phetioArchetypePhetioID:this.phetioArchetypePhetioID},i)):null;var r=i.tandem.getArchetypalPhetioID();if(window.phet.preloads.phetio.phetioElementsOverrides){var a=window.phet.preloads.phetio.phetioElementsOverrides[r];a&&(i=S()(i,a))}this.tandem=i.tandem,this.phetioID=this.tandem.phetioID,this._phetioType=i.phetioType,this._phetioState=i.phetioState,this._phetioReadOnly=i.phetioReadOnly,this._phetioDocumentation=i.phetioDocumentation,this._phetioEventType=i.phetioEventType,this._phetioHighFrequency=i.phetioHighFrequency,this._phetioPlayback=i.phetioPlayback,this._phetioDynamicElement=i.phetioDynamicElement,this._phetioFeatured=i.phetioFeatured,this._phetioEventMetadata=i.phetioEventMetadata,this._phetioDesigned=i.phetioDesigned,this.phetioArchetypePhetioID=null,this.linkedElements=[],this.phetioNotifiedObjectCreated=!1,this.phetioMessageStack=[],this._phetioPlayback&&(this._phetioEventMetadata=this._phetioEventMetadata||{},this._phetioEventMetadata.playback=!0),this.tandem.addPhetioObject(this),this.phetioObjectInitialized=!0}else t.tandem&&(this.tandem=t.tandem,this.phetioID=this.tandem.phetioID)}},{key:"phetioType",get:function(){return this._phetioType}},{key:"phetioState",get:function(){return this._phetioState}},{key:"phetioReadOnly",get:function(){return this._phetioReadOnly}},{key:"phetioDocumentation",get:function(){return this._phetioDocumentation}},{key:"phetioEventType",get:function(){return this._phetioEventType}},{key:"phetioHighFrequency",get:function(){return this._phetioHighFrequency}},{key:"phetioPlayback",get:function(){return this._phetioPlayback}},{key:"phetioDynamicElement",get:function(){return this._phetioDynamicElement}},{key:"phetioFeatured",get:function(){return this._phetioFeatured}},{key:"phetioEventMetadata",get:function(){return this._phetioEventMetadata}},{key:"phetioDesigned",get:function(){return this._phetioDesigned}},{key:"phetioStartEvent",value:function(e,t){if(Ne&&this.isPhetioInstrumented()){var n=S()({data:null,getData:null},t);if(!_.hasIn(window,"phet.phetio.dataStream"))return void this.phetioMessageStack.push(-1);var i=this.phetioHighFrequency&&_.hasIn(window,"phet.preloads.phetio.queryParameters")&&!window.phet.preloads.phetio.queryParameters.phetioEmitHighFrequencyEvents&&!phet.phetio.dataStream.isEmittingLowFrequencyEvent(),r=!_.hasIn(window,"phet.phetio.dataStream");if(i||this.phetioEventType===ce.OPT_OUT||r)return void this.phetioMessageStack.push(-1);var a=n.getData?n.getData():n.data;this.phetioMessageStack.push(phet.phetio.dataStream.start(this.phetioEventType,this.tandem.phetioID,this.phetioType,e,a,this.phetioEventMetadata,this.phetioHighFrequency)),this.phetioPlayback&&phet.phetio.dataStream.pushNonPlaybackable()}}},{key:"phetioEndEvent",value:function(){if(Ne&&this.isPhetioInstrumented()){var e=this.phetioMessageStack.pop();if(-1===e)return;this.phetioPlayback&&phet.phetio.dataStream.popNonPlaybackable(),phet.phetio.dataStream.end(e)}}},{key:"propagateDynamicFlagsToDescendants",value:function(){var e=this,t=phet.phetio.phetioEngine,n=xe.launched?[]:xe.bufferedPhetioObjects.map(qe);this.tandem.iterateDescendants((function(i){var r=i.phetioID;if(t.hasPhetioObject(r)||!xe.launched&&n.includes(r)){var a=t.hasPhetioObject(r)?t.getPhetioObject(r):xe.bufferedPhetioObjects[n.indexOf(r)];a.phetioIsArchetype=e.phetioIsArchetype,a.setPhetioDynamicElement(e.phetioDynamicElement),a.phetioBaselineMetadata&&(a.phetioBaselineMetadata.phetioIsArchetype=e.phetioIsArchetype)}}))}},{key:"setPhetioDynamicElement",value:function(e){this._phetioDynamicElement=!this.phetioIsArchetype&&e,this.phetioArchetypePhetioID=e?this.tandem.getArchetypalPhetioID():null,this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioDynamicElement=this.phetioDynamicElement)}},{key:"markDynamicElementArchetype",value:function(){this.phetioIsArchetype=!0,this.setPhetioDynamicElement(!1),this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype),xe.PHET_IO_ENABLED&&this.propagateDynamicFlagsToDescendants()}},{key:"isPhetioInstrumented",value:function(){return this.tandem&&this.tandem.supplied}},{key:"addLinkedElement",value:function(e,t){this.isPhetioInstrumented()?Ne&&e.isPhetioInstrumented()&&this.linkedElements.push(new Ge(e,t)):this.linkedElements=null}},{key:"removeLinkedElements",value:function(e){var t=this;this.isPhetioInstrumented()&&this.linkedElements&&this.linkedElements.filter((function(t){return t.element===e})).forEach((function(e){e.dispose(),J(t.linkedElements,e)}))}},{key:"onSimulationConstructionCompleted",value:function(){this.phetioBaselineMetadata=null}},{key:"dispose",value:function(){var e=[];if(xe.PHET_IO_ENABLED&&this.tandem.supplied){var t=phet.phetio.phetioEngine;this.tandem.iterateDescendants((function(n){t.hasPhetioObject(n.phetioID)&&e.push(t.getPhetioObject(n.phetioID))}))}this.phetioObjectInitialized&&this.tandem.removePhetioObject(this),this.linkedElements&&(this.linkedElements.forEach((function(e){return e.dispose()})),this.linkedElements.length=0),this.isDisposed=!0}},{key:"getMetadata",value:function(e){var t={phetioTypeName:(e=e||this).phetioType.typeName,phetioDocumentation:e.phetioDocumentation,phetioState:e.phetioState,phetioReadOnly:e.phetioReadOnly,phetioEventType:ce.phetioType.toStateObject(e.phetioEventType),phetioHighFrequency:e.phetioHighFrequency,phetioPlayback:e.phetioPlayback,phetioDynamicElement:e.phetioDynamicElement,phetioIsArchetype:e.phetioIsArchetype,phetioFeatured:e.phetioFeatured,phetioDesigned:e.phetioDesigned};return e.phetioArchetypePhetioID&&(t.phetioArchetypePhetioID=e.phetioArchetypePhetioID),t}}],[{key:"swapCaseOfFirstCharacter",value:function(e){var t=e[0];return(t===t.toLowerCase()?t.toUpperCase():t.toLowerCase())+e.substring(1)}},{key:"create",value:function(t){return new e(t)}}]),e}();_defineProperty(Be,"DEFAULT_OPTIONS",Oe);var Ge=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({phetioType:Le,phetioState:!1},i);return a.phetioReadOnly=!0,a.phetioFeatured=e.phetioFeatured,(r=t.call(this,a)).element=e,r}return _createClass(n,[{key:"getMetadata",value:function(e){var t=_get(_getPrototypeOf(n.prototype),"getMetadata",this).call(this,e);return delete t.phetioFeatured,t}}]),n}(Be);V.register("PhetioObject",Be);var He=new Map,Fe=function(e){return He.has(e)||He.set(e,new U("ArrayIO<".concat(e.typeName,">"),{valueType:Array,isValidValue:function(t){return _.every(t,(function(t){return I.isValueValid(t,e.validator)}))},parameterTypes:[e],toStateObject:function(t){return t.map(e.toStateObject)},fromStateObject:function(t){return t.map(e.fromStateObject)},documentation:"IO Type for the built-in JS array type, with the element type specified.",stateSchema:F.asValue("Array<".concat(e.typeName,">"),{isValidValue:function(t){return _.every(t,(function(t){return e.isStateObjectValid(t)}))}})})),He.get(e)};V.register("ArrayIO",Fe);var Ye=Fe,ze=new Map,Ue=function(e,t){for(var n=0;n<t.length;n++);var i="".concat(e.typeName,".").concat(t.map((function(e){return e.typeName})).join(","));if(!ze.has(i)){var r=t.map((function(e){return e.typeName})).join(", ");""===r&&(r="none");var a=t.map((function(e){return e.typeName})).join(",");ze.set(i,new U("FunctionIO(".concat(a,")=>").concat(e.typeName),{valueType:"function",isFunctionType:!0,parameterTypes:t.concat([e]),documentation:"".concat("Wrapper for the built-in JS function type.<br><strong>Arguments:</strong> ").concat(r,"<br>")+"<strong>Return Type:</strong> ".concat(e.typeName)}))}return ze.get(i)};V.register("FunctionIO",Ue);var We=Ue,je=new Map,Xe=function(e){return je.has(e)||je.set(e,new U("NullableIO<".concat(e.typeName,">"),{documentation:"An IOType adding support for null in addition to the behavior of its parameter.",isValidValue:function(t){return null===t||I.isValueValid(t,e.validator)},parameterTypes:[e],toStateObject:function(t){return null===t?null:e.toStateObject(t)},fromStateObject:function(t){return null===t?null:e.fromStateObject(t)},stateSchema:F.asValue("null|<".concat(e.typeName,">"),{isValidValue:function(t){return null===t||e.isStateObjectValid(t)}})})),je.get(e)};V.register("NullableIO",Xe);var Qe=Xe,Ke=new U("VoidIO",{isValidValue:function(){return!0},documentation:"Type for which there is no instance, usually to mark functions without a return value",toStateObject:function(){}});V.register("VoidIO",Ke);var Je=Ke,Ze=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(Ze,"UNDEFER",new Ze),_defineProperty(Ze,"NOTIFY",new Ze),_defineProperty(Ze,"enumeration",new re(Ze)),h.register("PropertyStatePhase",Ze);var $e=Ze,et=function(){function e(t){_classCallCheck(this,e),this.phaseCallbackSets=new it,this.undeferBeforeUndeferMapPair=new nt($e.UNDEFER,$e.UNDEFER),this.undeferBeforeNotifyMapPair=new nt($e.UNDEFER,$e.NOTIFY),this.notifyBeforeUndeferMapPair=new nt($e.NOTIFY,$e.UNDEFER),this.notifyBeforeNotifyMapPair=new nt($e.NOTIFY,$e.NOTIFY),this.mapPairs=[this.undeferBeforeUndeferMapPair,this.undeferBeforeNotifyMapPair,this.notifyBeforeUndeferMapPair,this.notifyBeforeNotifyMapPair],this.initialized=!1}return _createClass(e,[{key:"initialize",value:function(e){var t=this;e.onBeforeApplyStateEmitter.addListener((function(e){if(e instanceof ht&&!e.isDeferred){e.setDeferred(!0);var n=e.tandem.phetioID;t.phaseCallbackSets.addUndeferPhaseCallback(new tt(n,(function(){var i=e.setDeferred(!1);t.phaseCallbackSets.addNotifyPhaseCallback(new tt(n,i,$e.NOTIFY))}),$e.UNDEFER))}})),e.stateSetEmitter.addListener((function(e){t.undeferAndNotifyProperties(new Set(Object.keys(e)))})),e.isSettingStateProperty.lazyLink((function(e){})),this.initialized=!0}},{key:"validateInstrumentedProperty",value:function(e){}},{key:"validatePropertyPhasePair",value:function(e,t){this.validateInstrumentedProperty(e)}},{key:"getMapPairFromPhases",value:function(e,t){var n=this.mapPairs.filter((function(n){return e===n.beforePhase&&t===n.afterPhase}));return n[0]}},{key:"registerPhetioOrderDependency",value:function(e,t,n,i){xe.PHET_IO_ENABLED&&(this.validatePropertyPhasePair(e,t),this.validatePropertyPhasePair(n,i),this.getMapPairFromPhases(t,i).addOrderDependency(e.tandem.phetioID,n.tandem.phetioID))}},{key:"propertyInAnOrderDependency",value:function(e){return this.validateInstrumentedProperty(e),_.some(this.mapPairs,(function(t){return t.usesPhetioID(e.tandem.phetioID)}))}},{key:"unregisterOrderDependenciesForProperty",value:function(e){xe.PHET_IO_ENABLED&&(this.validateInstrumentedProperty(e),this.propertyInAnOrderDependency(e)&&this.mapPairs.forEach((function(t){return t.unregisterOrderDependenciesForProperty(e)})))}},{key:"undeferAndNotifyProperties",value:function(e){for(var t={},n=0;this.phaseCallbackSets.size>0;)++n>5e3&&this.errorInUndeferAndNotifyStep(t),this.attemptToApplyPhases($e.UNDEFER,t,e),this.attemptToApplyPhases($e.NOTIFY,t,e)}},{key:"errorInUndeferAndNotifyStep",value:function(e){var t=[];this.phaseCallbackSets.forEach((function(e){return t.push(e.getTerm())}));var n=[];this.mapPairs.forEach((function(e){var i,r=e.beforeMap,a=_createForOfIteratorHelper(r);try{var s=function(){var e=_slicedToArray(i.value,2),a=e[0];e[1].forEach((function(e){var i=a+r.beforePhase,s=e+r.afterPhase;(t.includes(i)||t.includes(s))&&n.push({beforeTerm:i,afterTerm:s})}))};for(a.s();!(i=a.n()).done;)s()}catch(o){a.e(o)}finally{a.f()}}));var i="";console.log("still to be undeferred",this.phaseCallbackSets.undeferSet),console.log("still to be notified",this.phaseCallbackSets.notifySet),console.log("order dependencies that apply to the still todos",n),n.forEach((function(e){i+="".concat(e.beforeTerm,"\t").concat(e.afterTerm,"\n")})),console.log("\n\nin graphable form:\n\n",i);var r="Impossible set state: from undeferAndNotifyProperties; ordering constraints cannot be satisfied";throw new Error(r)}},{key:"getNumberOfOrderDependencies",value:function(){var e=0;return this.mapPairs.forEach((function(t){t.afterMap.forEach((function(t){e+=t.size}))})),e}},{key:"attemptToApplyPhases",value:function(e,t,n){var i,r=this.phaseCallbackSets.getSetFromPhase(e),a=_createForOfIteratorHelper(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;this.phetioIDCanApplyPhase(s.phetioID,e,t,n)&&(s.listener(),r.delete(s),t[s.getTerm()]=!0)}}catch(o){a.e(o)}finally{a.f()}}},{key:"phetioIDCanApplyPhase",value:function(e,t,n,i){if(t===$e.NOTIFY&&!n[e+$e.UNDEFER])return!1;var r=[];this.mapPairs.forEach((function(e){e.afterPhase===t&&r.push(e.afterMap)}));for(var a=0;a<r.length;a++){var s=r[a];if(!s.has(e))return!0;var o,l=_createForOfIteratorHelper(s.get(e));try{for(l.s();!(o=l.n()).done;){var u=o.value;if(!n[u+s.beforePhase]&&i.has(u)&&i.has(e))return!1}}catch(c){l.e(c)}finally{l.f()}}return!0}}]),e}(),tt=function(){function e(t,n,i){_classCallCheck(this,e),this.phetioID=t,this.phase=i,this.listener=n||_.noop}return _createClass(e,[{key:"getTerm",value:function(){return this.phetioID+this.phase}}]),e}(),nt=function(){function e(t,n){_classCallCheck(this,e),this.beforeMap=new Map,this.beforeMap.beforePhase=t,this.beforeMap.afterPhase=n,this.afterMap=new Map,this.afterMap.beforePhase=t,this.afterMap.afterPhase=n,this.beforeMap.otherMap=this.afterMap,this.afterMap.otherMap=this.beforeMap,this.beforePhase=t,this.afterPhase=n}return _createClass(e,[{key:"addOrderDependency",value:function(e,t){this.beforeMap.has(e)||this.beforeMap.set(e,new Set),this.beforeMap.get(e).add(t),this.afterMap.has(t)||this.afterMap.set(t,new Set),this.afterMap.get(t).add(e)}},{key:"unregisterOrderDependenciesForProperty",value:function(e){var t=e.tandem.phetioID;[this.beforeMap,this.afterMap].forEach((function(e){e.has(t)&&e.get(t).forEach((function(n){var i=e.otherMap.get(n);i&&i.delete(t),0===i.size&&e.otherMap.delete(n)})),e.delete(t)}))}},{key:"usesPhetioID",value:function(e){return this.beforeMap.has(e)||this.afterMap.has(e)}}]),e}(),it=function(){function e(){_classCallCheck(this,e),this.undeferSet=new Set,this.notifySet=new Set}return _createClass(e,[{key:"size",get:function(){return this.undeferSet.size+this.notifySet.size}},{key:"forEach",value:function(e){this.undeferSet.forEach(e),this.notifySet.forEach(e)}},{key:"addUndeferPhaseCallback",value:function(e){this.undeferSet.add(e)}},{key:"addNotifyPhaseCallback",value:function(e){this.notifySet.add(e)}},{key:"getSetFromPhase",value:function(e){return e===$e.NOTIFY?this.notifySet:this.undeferSet}}]),e}();h.register("PropertyStateHandler",et);var rt=new et;h.register("propertyStateHandlerSingleton",rt);var at=rt,st=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,i))._value=e,r}return _createClass(n,[{key:"get",value:function(){return this._value}},{key:"value",get:function(){return this.get()},set:function(e){this.set(e)}},{key:"set",value:function(e){if(!this.equalsValue(e)){var t=this._value;this.setPropertyValue(e),this.notifyListeners(t)}}},{key:"setPropertyValue",value:function(e){this._value=e}},{key:"equalsValue",value:function(e){return this.areValuesEqual(e,this._value)}},{key:"areValuesEqual",value:function(e,t){if(this.useDeepEquality){var n=e,i=t;if(n&&i&&n.constructor===i.constructor)return n.equals(i)}return e===t}},{key:"notifyListeners",value:function(e){this.emit(this._value,e,this)}},{key:"link",value:function(e){this.addListener(e),e(this._value,null,this)}},{key:"lazyLink",value:function(e){this.addListener(e)}},{key:"unlink",value:function(e){this.removeListener(e)}},{key:"unlinkAll",value:function(){this.removeAllListeners()}},{key:"linkAttribute",value:function(e,t){this.link((function(n){e[t]=n}))}},{key:"isSettable",value:function(){return!0}},{key:"dispose",value:function(){this.unlinkAll(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(d);h.register("TinyProperty",st);var ot={values:["%","A","AMU","atm","cm","cm^2","C","°","°C","F","g","Hz","J","K","kg","kg/m^3","kg·m/s","kPa","L","L/s","m","m^3","m/s","m/s/s","m/s^2","mA","mm","mol","mol/L","N","N/m","nm","nm/ps","N·s/m","Ω","Ω·cm","Pa·s","particles/ps","pm","pm/ps","pm/s","pm/s^2","pm^3","ps","radians","radians/s","s","V","view-coordinates/s","W"],isValidUnits:function(e){return _.includes(ot.values,e)}};h.register("units",ot);var lt={validateValidator:!1},ut=0,ct=new Map,ht=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({useDeepEquality:!1,units:null,reentrant:!1,tandem:xe.OPTIONAL,phetioOuterType:n.PropertyIO,phetioValueType:U.ObjectIO},i);return I.containsValidatorKey(a)||(a.isValidValue=function(){return!0}),a.units&&(a.phetioEventMetadata=a.phetioEventMetadata||{},a.phetioEventMetadata.units=a.units),a.phetioOuterType&&a.phetioValueType&&(a.phetioType=a.phetioOuterType(a.phetioValueType)),(r=t.call(this,a)).id=ut++,r.units=a.units,xe.VALIDATION&&r.isPhetioInstrumented(),r.validValues=a.validValues,r.tinyProperty=new st(e),r.tinyProperty.useDeepEquality=a.useDeepEquality,r.notifying=!1,r.reentrant=a.reentrant,r.isDeferred=!1,r.deferredValue=null,r.hasDeferredValue=!1,r.valueValidator=_.pick(a,I.VALIDATOR_KEYS),r.valueValidator.validationMessage=r.valueValidator.validationMessage||"Property value not valid",r.valueValidator.phetioType&&(r.valueValidator.phetioType=r.valueValidator.phetioType.parameterTypes[0]),r}return _createClass(n,[{key:"isSettable",value:function(){return!1}},{key:"get",value:function(){return this.tinyProperty.get()}},{key:"set",value:function(e){_.hasIn(window,"phet.joist.sim.isSettingPhetioStateProperty")&&phet.joist.sim.isSettingPhetioStateProperty.value&&this.isPhetioInstrumented()&&this.phetioState&&this.isSettable()||this.unguardedSet(e)}},{key:"unguardedSet",value:function(e){if(!this.isDisposed)if(this.isDeferred)this.deferredValue=e,this.hasDeferredValue=!0;else if(!this.equalsValue(e)){var t=this.get();this.setPropertyValue(e),this._notifyListeners(t)}}},{key:"setPropertyValue",value:function(e){this.tinyProperty.setPropertyValue(e)}},{key:"equalsValue",value:function(e){return this.areValuesEqual(e,this.get())}},{key:"areValuesEqual",value:function(e,t){return this.tinyProperty.areValuesEqual(e,t)}},{key:"_notifyListeners",value:function(e){var t=this,i=this.get();xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent(n.CHANGED_EVENT_NAME,{getData:function(){var n=t.phetioType.parameterTypes[0];return{oldValue:Qe(n).toStateObject(e),newValue:n.toStateObject(i)}}}),this.notifying=!0,this.tinyProperty.emit(i,e,this),this.notifying=!1,xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent()}},{key:"notifyListenersStatic",value:function(){this._notifyListeners(null)}},{key:"setDeferred",value:function(e){var t=this;if(e)this.isDeferred=!0;else{this.isDeferred=!1;var n=this.get();if(this.hasDeferredValue&&(this.setPropertyValue(this.deferredValue),this.hasDeferredValue=!1,this.deferredValue=null),!this.equalsValue(n))return function(){return!t.isDisposed&&t._notifyListeners(n)}}return null}},{key:"value",get:function(){return this.get()},set:function(e){this.set(e)}},{key:"addPhetioStateDependencies",value:function(e){for(var t=0;t<e.length;t++){var i=e[t];i instanceof n&&i.isPhetioInstrumented()&&this.isPhetioInstrumented()&&at.registerPhetioOrderDependency(i,$e.UNDEFER,this,$e.NOTIFY)}}},{key:"link",value:function(e,t){t&&t.phetioDependencies&&this.addPhetioStateDependencies(t.phetioDependencies),this.tinyProperty.addListener(e),e(this.get(),null,this)}},{key:"lazyLink",value:function(e,t){t&&t.phetioDependencies&&this.addPhetioStateDependencies(t.phetioDependencies),this.tinyProperty.lazyLink(e)}},{key:"unlink",value:function(e){this.tinyProperty.unlink(e)}},{key:"unlinkAll",value:function(){this.tinyProperty.unlinkAll()}},{key:"linkAttribute",value:function(e,t){this.link((function(n){e[t]=n}))}},{key:"toString",value:function(){return"Property#".concat(this.id,"{").concat(this.get(),"}")}},{key:"debug",value:function(e){var t=function(t){return console.log(e,t)};return this.link(t),t}},{key:"isValueValid",value:function(e){return null===this.getValidationError(e)}},{key:"getValidationError",value:function(e){return I.getValidationError(e,this.valueValidator,lt)}},{key:"dispose",value:function(){this.isPhetioInstrumented()&&at.unregisterOrderDependenciesForProperty(this),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.tinyProperty.dispose()}},{key:"hasListener",value:function(e){return this.tinyProperty.hasListener(e)}},{key:"getListenerCount",value:function(){return this.tinyProperty.getListenerCount()}},{key:"forEachListener",value:function(e){this.tinyProperty.forEachListener(e)}},{key:"hasListeners",value:function(){return this.tinyProperty.hasListeners()}}],[{key:"PropertyIO",value:function(e){return ct.has(e)||ct.set(e,new U("PropertyIO<".concat(e.typeName,">"),{valueType:n,documentation:"Observable values that send out notifications when the value changes. This differs from the traditional listener pattern in that added listeners also receive a callback with the current value when the listeners are registered. This is a widely-used pattern in PhET-iO simulations.",methodOrder:["link","lazyLink"],events:[n.CHANGED_EVENT_NAME],parameterTypes:[e],toStateObject:function(t){return{value:e.toStateObject(t.value),validValues:t.validValues?t.validValues.map((function(t){return e.toStateObject(t)})):null,units:Qe(Te).toStateObject(t.units)}},applyState:function(t,n){Qe(Te).fromStateObject(n.units);t.unguardedSet(e.fromStateObject(n.value)),n.validValues&&(t.validValues=n.validValues.map((function(t){return e.fromStateObject(t)})))},stateSchema:{value:e,validValues:Qe(Ye(e)),units:Qe(Te)},methods:{getValue:{returnType:e,parameterTypes:[],implementation:n.prototype.get,documentation:"Gets the current value."},getValidationError:{returnType:Qe(Te),parameterTypes:[e],implementation:n.prototype.getValidationError,documentation:"Checks to see if a proposed value is valid. Returns the first validation error, or null if the value is valid."},setValue:{returnType:Je,parameterTypes:[e],implementation:n.prototype.set,documentation:"Sets the value of the Property. If the value differs from the previous value, listeners are notified with the new value.",invocableForReadOnlyElements:!1},link:{returnType:Je,parameterTypes:[We(Je,[e,Qe(e)])],implementation:n.prototype.link,documentation:"Adds a listener which will be called when the value changes. On registration, the listener is also called with the current value. The listener takes two arguments, the new value and the previous value."},lazyLink:{returnType:Je,parameterTypes:[We(Je,[e,Qe(e)])],implementation:n.prototype.lazyLink,documentation:'Adds a listener which will be called when the value changes. This method is like "link", but without the current-value callback on registration. The listener takes two arguments, the new value and the previous value.'},unlink:{returnType:Je,parameterTypes:[We(Je,[e])],implementation:n.prototype.unlink,documentation:"Removes a listener."}}})),ct.get(e)}}]),n}(Be);_defineProperty(ht,"TANDEM_NAME_SUFFIX","Property"),_defineProperty(ht,"CHANGED_EVENT_NAME","changed"),h.register("ReadOnlyProperty",ht);var dt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,e,i))._initialValue=e,r}return _createClass(n,[{key:"getInitialValue",value:function(){return this._initialValue}},{key:"initialValue",get:function(){return this.getInitialValue()}},{key:"setInitialValue",value:function(e){this._initialValue=e}},{key:"value",get:function(){return _get(_getPrototypeOf(n.prototype),"value",this)},set:function(e){_get(_getPrototypeOf(n.prototype),"set",this).call(this,e)}},{key:"reset",value:function(){this.set(this._initialValue)}},{key:"set",value:function(e){_get(_getPrototypeOf(n.prototype),"set",this).call(this,e)}},{key:"isSettable",value:function(){return!0}}]),n}(ht);h.register("Property",dt);var pt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({valueType:"boolean",phetioValueType:Q},i);return t.call(this,e,r)}return _createClass(n,[{key:"toggle",value:function(){this.value=!this.value}}]),n}(dt);h.register("BooleanProperty",pt);var ft=new p;h.register("stepTimer",ft);var mt=ft,gt=function(){function e(t){_classCallCheck(this,e);var n=S()({delay:400,interval:100},t);this.delay=n.delay,this.interval=n.interval,this.callbacks=[],n.callback&&this.callbacks.push(n.callback),this.delayID=null,this.intervalID=null,this.fired=!1}return _createClass(e,[{key:"isRunning",value:function(){return null!==this.delayID||null!==this.intervalID}},{key:"start",value:function(){var e=this;this.isRunning()||(this.fired=!1,this.delayID=mt.setTimeout((function(){e.delayID=null,e.intervalID=mt.setInterval((function(){return e.fire()}),e.interval),e.fire()}),this.delay))}},{key:"stop",value:function(e){this.isRunning()&&(this.delayID&&(mt.clearTimeout(this.delayID),this.delayID=null),this.intervalID&&(mt.clearInterval(this.intervalID),this.intervalID=null),e&&!this.fired&&this.fire())}},{key:"addCallback",value:function(e){this.callbacks.includes(e)||this.callbacks.push(e)}},{key:"removeCallback",value:function(e){var t=this.callbacks.indexOf(e);-1!==t&&this.callbacks.splice(t,1)}},{key:"fire",value:function(){for(var e=this.callbacks.slice(0),t=0;t<e.length;t++)e[t]();this.fired=!0}},{key:"dispose",value:function(){this.stop(!1),this.callbacks.length=0}}]),e}();h.register("CallbackTimer",gt);var yt=[],vt=(["name","phetioType","phetioDocumentation","phetioPrivate"].concat(I.VALIDATOR_KEYS),function(e){return e.phetioType}),At=function(e){return e.name},bt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({parameters:yt,tandem:xe.OPTIONAL,phetioPlayback:Be.DEFAULT_OPTIONS.phetioPlayback,phetioEventMetadata:Be.DEFAULT_OPTIONS.phetioEventMetadata,phetioDocumentation:""},e),a=r.parameters.filter(vt);return r.phetioType=r.phetioOuterType(a.map(vt)),r.phetioPlayback&&(r.phetioEventMetadata=r.phetioEventMetadata||{},r.phetioEventMetadata.dataKeys=r.parameters.map(At)),r.phetioDocumentation=n.getPhetioDocumentation(r.phetioDocumentation,a),(i=t.call(this,r)).parameters=r.parameters,i}return _createClass(n,[{key:"validateArguments",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<this.parameters.length;i++){var r=this.parameters[i];r.phetioType&&r.valueType}}},{key:"getPhetioData",value:function(){var e=null;if(this.parameters.length>0){e={};for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=0;r<this.parameters.length;r++){var a=this.parameters[r];a.phetioPrivate||(e[a.name]=a.phetioType.toStateObject(n[r]))}}return e}}],[{key:"validateParameters",value:function(e,t){D(e,{valueType:Array});for(var n=!1,i=0;i<e.length;i++){var r=e[i];for(var a in n=n||r.phetioPrivate,r);I.validateValidator(r)}}},{key:"getPhetioDocumentation",value:function(e,t){return e+(0===t.length?"<br>No parameters.":"".concat("<br>The parameters are:<br/><ol>").concat(t.map((function(e){var t=e.phetioDocumentation?" - ".concat(e.phetioDocumentation):"";return"<li>".concat(e.name,": ").concat(e.phetioType.typeName).concat(t,"</li>")})).join("<br/>"),"</ol>"))}}]),n}(Be);h.register("PhetioDataHandler",bt);var St=bt,Et=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({phetioOuterType:n.EmitterIO,phetioState:!1},e);return(i=t.call(this,r)).tinyEmitter=new d,i}return _createClass(n,[{key:"emit",value:function(){var e;xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent("emitted",{data:this.getPhetioData.apply(this,arguments)}),(e=this.tinyEmitter).emit.apply(e,arguments),xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent()}},{key:"dispose",value:function(){this.tinyEmitter.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"addListener",value:function(e){this.tinyEmitter.addListener(e)}},{key:"removeListener",value:function(e){this.tinyEmitter.removeListener(e)}},{key:"removeAllListeners",value:function(){this.tinyEmitter.removeAllListeners()}},{key:"hasListener",value:function(e){return this.tinyEmitter.hasListener(e)}},{key:"hasListeners",value:function(){return this.tinyEmitter.hasListeners()}},{key:"getListenerCount",value:function(){return this.tinyEmitter.getListenerCount()}},{key:"debug",value:function(e){var t=function(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=console).log.apply(t,[e].concat(i))};return this.addListener(t),t}}]),n}(St),kt=function(e){return e.typeName},Vt=new Map;Et.EmitterIO=function(e){var t=e.map(kt).join(",");return Vt.has(t)||Vt.set(t,new U("EmitterIO<".concat(e.map(kt).join(", "),">"),{valueType:Et,documentation:"Emits when an event occurs and calls added listeners.",parameterTypes:e,events:["emitted"],metadataDefaults:{phetioState:!1},methods:{addListener:{returnType:Je,parameterTypes:[We(Je,e)],implementation:Et.prototype.addListener,documentation:"Adds a listener which will be called when the emitter emits."},removeListener:{returnType:Je,parameterTypes:[We(Je,e)],implementation:Et.prototype.removeListener,documentation:"Remove a listener."},emit:{returnType:Je,parameterTypes:e,implementation:Et.prototype.emit,documentation:"Emits a single event to all listeners.",invocableForReadOnlyElements:!1}}})),Vt.get(t)},h.register("Emitter",Et);var wt=new U("InfiniteNumberIO",{valueType:"number",documentation:"IO Type for Javascript's number primitive type",toStateObject:function(e){return e===Number.POSITIVE_INFINITY?"POSITIVE_INFINITY":e===Number.NEGATIVE_INFINITY?"NEGATIVE_INFINITY":e},fromStateObject:function(e){return"POSITIVE_INFINITY"===e?Number.POSITIVE_INFINITY:"NEGATIVE_INFINITY"===e?Number.NEGATIVE_INFINITY:e},stateSchema:F.asValue("'POSITIVE_INFINITY'|'NEGATIVE_INFINITY'|number",{isValidValue:function(e){return"POSITIVE_INFINITY"===e||"NEGATIVE_INFINITY"===e||"number"==typeof e&&!isNaN(e)}})});V.register("InfiniteNumberIO",wt);var _t=wt,Ct=new c("dot");Ct.register("FastArray",window.Float64Array?window.Float64Array:window.Array);var xt=Ct,Pt=function(){function e(t,n){_classCallCheck(this,e),this._min=t,this._max=n}return _createClass(e,[{key:"getMin",value:function(){return this._min}},{key:"min",get:function(){return this.getMin()},set:function(e){this.setMin(e)}},{key:"setMin",value:function(e){this._min=e}},{key:"getMax",value:function(){return this._max}},{key:"max",get:function(){return this.getMax()},set:function(e){this.setMax(e)}},{key:"setMax",value:function(e){this._max=e}},{key:"setMinMax",value:function(e,t){return this._min=e,this._max=t,this}},{key:"copy",value:function(){return new e(this._min,this._max)}},{key:"getLength",value:function(){return this._max-this._min}},{key:"getCenter",value:function(){return(this._max+this._min)/2}},{key:"contains",value:function(e){return e>=this._min&&e<=this._max}},{key:"containsRange",value:function(e){return this._min<=e.min&&this._max>=e.max}},{key:"intersects",value:function(e){return this._max>=e.min&&e.max>=this._min}},{key:"intersectsExclusive",value:function(e){return this._max>e.min&&e.max>this._min}},{key:"union",value:function(t){return new e(Math.min(this.min,t.min),Math.max(this.max,t.max))}},{key:"intersection",value:function(t){return new e(Math.max(this.min,t.min),Math.min(this.max,t.max))}},{key:"includeRange",value:function(e){return this.setMinMax(Math.min(this.min,e.min),Math.max(this.max,e.max))}},{key:"constrainRange",value:function(e){return this.setMinMax(Math.max(this.min,e.min),Math.min(this.max,e.max))}},{key:"shifted",value:function(t){return new e(this.min+t,this.max+t)}},{key:"toString",value:function(){return"[Range (min:".concat(this._min," max:").concat(this._max,")]")}},{key:"constrainValue",value:function(e){return Math.min(Math.max(e,this._min),this._max)}},{key:"equals",value:function(e){return this.constructor===e.constructor&&this._min===e.min&&this._max===e.max}},{key:"getNormalizedValue",value:function(e){return(e-this.min)/this.getLength()}},{key:"expandNormalizedValue",value:function(e){return e*this.getLength()+this.min}},{key:"defaultValue",get:function(){throw new Error("defaultValue is undefined, did you mean to use RangeWithValue?")}}]),e}();_defineProperty(Pt,"RangeIO",new U("RangeIO",{valueType:Pt,documentation:'A range with "min" and a "max" members.',toStateObject:function(e){return{min:_t.toStateObject(e.min),max:_t.toStateObject(e.max)}},fromStateObject:function(e){return new Pt(_t.fromStateObject(e.min),_t.fromStateObject(e.max))},stateSchema:{min:_t,max:_t}})),xt.register("Range",Pt);var Tt=Pt,Mt=new U("NumberIO",{valueType:"number",documentation:"IO Type for Javascript's number primitive type",toStateObject:_.identity,fromStateObject:function(e){return e},stateSchema:F.asValue("number",{isValidValue:function(e){return"number"==typeof e&&!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY}})});V.register("NumberIO",Mt);var Lt=Mt,It={valueType:"number",isValidValue:function(e){return e%1==0},validationMessage:"Should be a valid integer"},Rt=dt.PropertyIO(Lt),Dt=function(e){return e.range&&null!==e.range},Nt=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({numberType:"FloatingPoint",range:null,validators:[],tandem:xe.OPTIONAL},i);a.rangePropertyOptions=S()({phetioDocumentation:"provides the range of possible values for the parent NumberProperty",phetioValueType:Qe(Tt.RangeIO),phetioReadOnly:!0,tandem:a.tandem.createTandem("rangeProperty")},a.rangePropertyOptions),a.valueType="number",a.phetioOuterType=function(){return n.NumberPropertyIO},a.phetioValueType=Lt;var s,o=!(a.range&&a.range instanceof ht);s=a.range instanceof ht?a.range:new dt(a.range,a.rangePropertyOptions),"Integer"===a.numberType&&a.validators.push(It),a.validators.push({isValidValue:function(e){var t=s.value;return null===t||t.contains(e)},validationMessage:"Number must be within rangeProperty value."}),(r=t.call(this,e,a)).numberType=a.numberType,r.rangeProperty=s;if(r.rangeProperty.addPhetioStateDependencies([_assertThisInitialized(r)]),r.addPhetioStateDependencies([r.rangeProperty]),a.validValues&&r.validateNumberAndRangeProperty)for(var l=0;l<a.validValues.length;l++){var u=a.validValues[l];r.validateNumberAndRangeProperty(u)}return r.disposeNumberProperty=function(){o&&r.rangeProperty.dispose()},r.resetNumberProperty=function(){o&&r.rangeProperty.reset()},r}return _createClass(n,[{key:"range",get:function(){return this.rangeProperty.value},set:function(e){this.rangeProperty.value=e}},{key:"reset",value:function(){_get(_getPrototypeOf(n.prototype),"reset",this).call(this),this.resetNumberProperty()}},{key:"dispose",value:function(){this.disposeNumberProperty(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"setValueAndRange",value:function(e,t){this.setDeferred(!0),this.rangeProperty.setDeferred(!0),this.set(e),this.rangeProperty.set(t);var n=this.setDeferred(!1),i=this.rangeProperty.setDeferred(!1);n&&n(),i&&i()}},{key:"resetValueAndRange",value:function(){this.setValueAndRange(this.initialValue,this.rangeProperty.initialValue)}},{key:"asRanged",value:function(){if(Dt(this))return this;throw new Error("Not a RangedProperty")}},{key:"toStateObject",value:function(){var e=Rt.toStateObject(this);e.numberType=this.numberType,e.range=Qe(Tt.RangeIO).toStateObject(this.rangeProperty.value);var t=this.rangeProperty&&this.rangeProperty.isPhetioInstrumented();return e.rangePhetioID=t?this.rangeProperty.tandem.phetioID:null,e}}]),n}(dt);_defineProperty(Nt,"NumberPropertyIO",new U("NumberPropertyIO",{valueType:Nt,supertype:Rt,parameterTypes:[Lt],documentation:"Extends PropertyIO to add values for the numeric range ( min, max ) and numberType ( '".concat(["FloatingPoint","Integer"].join("' | '"),"' )"),toStateObject:function(e){return e.toStateObject()},applyState:function(e,t){Rt.applyState(e,t)},stateSchema:{numberType:Te,range:Qe(Tt.RangeIO),rangePhetioID:Qe(Te),value:Lt}})),h.register("NumberProperty",Nt);var qt=function(e){H(e,["length"],["elements"]);var t=S()({length:0,elements:[],tandem:xe.OPTIONAL},e),n=null;if(t.phetioType)n={name:"value",phetioType:t.phetioType.parameterTypes[0]};else if(I.getValidatorValidationError(t))n=A({name:"value"},{isValidValue:_.stubTrue});else{var i=_.pick(t,I.VALIDATOR_KEYS);n=A({name:"value"},i)}var r=new Et({tandem:t.tandem.createTandem("elementAddedEmitter"),parameters:[n],phetioReadOnly:!0}),a=new Et({tandem:t.tandem.createTandem("elementRemovedEmitter"),parameters:[n],phetioReadOnly:!0}),s=new Nt(0,{numberType:"Integer",tandem:t.tandem.createTandem("lengthProperty"),phetioReadOnly:!0}),o=[],l=new Proxy(o,{get:function(e,t,n){return Bt.hasOwnProperty(t)?Bt[t]:Reflect.get(e,t,n)},set:function(e,t,n){var i=e[t],o=null;"length"===t&&(o=e.slice(n));var l=Reflect.set(e,t,n),u=Number(t);return Number.isInteger(u)&&u>=0&&i!==n?(s.value=e.length,void 0!==i&&a.emit(e[t]),void 0!==n&&r.emit(n)):"length"===t&&(s.value=n,o&&o.forEach((function(e){return a.emit(e)}))),l},deleteProperty:function(e,t){var n,i=Number(t);Number.isInteger(i)&&i>=0&&(n=e[t]);var r=Reflect.deleteProperty(e,t);return void 0!==n&&a.emit(n),r}});l.targetArray=o,l.elementAddedEmitter=r,l.elementRemovedEmitter=a,l.lengthProperty=s;var u=function(){t.length>=0&&(l.length=t.length),t.elements.length>0&&Array.prototype.push.apply(l,t.elements)};return u(),l.reset=function(){l.length=0,u()},t.tandem.supplied&&(l.phetioElementType=t.phetioType.parameterTypes[0],l._observableArrayPhetioObject=new Ot(l,t)),l},Ot=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({phetioType:Ft},i);return(r=t.call(this,a)).observableArray=e,r}return _createClass(n)}(Be),Bt={pop:function(){for(var e=this,t=e.targetArray.length,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Array.prototype.pop.apply(e.targetArray,i);return e.lengthProperty.value=e.length,t>0&&e.elementRemovedEmitter.emit(a),a},shift:function(){for(var e=this,t=e.targetArray.length,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Array.prototype.shift.apply(e.targetArray,i);return e.lengthProperty.value=e.length,t>0&&e.elementRemovedEmitter.emit(a),a},push:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=this,r=Array.prototype.push.apply(i.targetArray,t);i.lengthProperty.value=i.length;for(var a=0;a<arguments.length;a++)i.elementAddedEmitter.emit(t[a]);return r},unshift:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Array.prototype.unshift.apply(e.targetArray,n);e.lengthProperty.value=e.length;for(var a=0;a<n.length;a++)e.elementAddedEmitter.emit(n[a]);return r},splice:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Array.prototype.splice.apply(e.targetArray,n);e.lengthProperty.value=e.length;for(var a=r,s=2;s<n.length;s++)e.elementAddedEmitter.emit(n[s]);return a.forEach((function(t){return e.elementRemovedEmitter.emit(t)})),r},copyWithin:function(){for(var e=this,t=e.targetArray.slice(),n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Array.prototype.copyWithin.apply(e.targetArray,i);return Gt(t,e),a},fill:function(){for(var e=this,t=e.targetArray.slice(),n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=Array.prototype.fill.apply(e.targetArray,i);return Gt(t,e),a},get:function(e){return this[e]},addItemAddedListener:function(e){this.elementAddedEmitter.addListener(e)},removeItemAddedListener:function(e){this.elementAddedEmitter.removeListener(e)},addItemRemovedListener:function(e){this.elementRemovedEmitter.addListener(e)},removeItemRemovedListener:function(e){this.elementRemovedEmitter.removeListener(e)},add:function(e){this.push(e)},addAll:function(e){this.push.apply(this,_toConsumableArray(e))},remove:function(e){J(this,e)},removeAll:function(e){var t=this;e.forEach((function(e){return J(t,e)}))},clear:function(){for(;this.length>0;)this.pop()},count:function(e){for(var t=0,n=0;n<this.length;n++)e(this[n])&&t++;return t},find:function(e,t){return _.find(this,e,t)},shuffle:function(e){var t=e.shuffle(this);this.targetArray.length=0,Array.prototype.push.apply(this.targetArray,t)},getArrayCopy:function(){return this.slice()},dispose:function(){this.elementAddedEmitter.dispose(),this.elementRemovedEmitter.dispose(),this.lengthProperty.dispose(),this._observableArrayPhetioObject&&this._observableArrayPhetioObject.dispose()},toStateObject:function(){var e=this;return{array:this.map((function(t){return e.phetioElementType.toStateObject(t)}))}},applyState:function(e){var t=this;this.length=0;var n=e.array.map((function(e){return t.phetioElementType.fromStateObject(e)}));this.push.apply(this,_toConsumableArray(n))}},Gt=function(e,t){for(var n=e,i=t.targetArray.slice(),r=0;r<n.length;r++){var a=n[r],s=i.indexOf(a);s>=0&&(n.splice(r,1),i.splice(s,1),r--)}n.forEach((function(e){return t.elementRemovedEmitter.emit(e)})),i.forEach((function(e){return t.elementAddedEmitter.emit(e)}))},Ht=new Map,Ft=function(e){return Ht.has(e)||Ht.set(e,new U("ObservableArrayIO<".concat(e.typeName,">"),{valueType:Ot,parameterTypes:[e],toStateObject:function(e){return e.observableArray.toStateObject()},applyState:function(e,t){return e.observableArray.applyState(t)},stateSchema:{array:Ye(e)}})),Ht.get(e)};qt.ObservableArrayIO=Ft,h.register("createObservableArray",qt);var Yt=qt;function zt(e,t){return e.apply(void 0,_toConsumableArray(t.map((function(e){return e.get()}))))}var Ut=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({tandem:xe.OPTIONAL,phetioReadOnly:!0,phetioOuterType:n.DerivedPropertyIO,phetioLinkDependencies:!0},r),o=zt(i,e);return a=t.call(this,o,s),xe.VALIDATION&&a.isPhetioInstrumented(),a.dependencies=e,a.derivation=i,a.derivedPropertyListener=a.getDerivedPropertyListener.bind(_assertThisInitialized(a)),e.forEach((function(e){if(e.lazyLink(a.derivedPropertyListener),a.isPhetioInstrumented()&&e instanceof Be&&e.isPhetioInstrumented()&&(e instanceof ht&&at.registerPhetioOrderDependency(e,$e.UNDEFER,_assertThisInitialized(a),$e.UNDEFER),s.phetioLinkDependencies)){var t=s.tandem.createTandem("dependencies");a.addLinkedElement(e,{tandem:t.createTandemFromPhetioID(e.tandem.phetioID)})}})),a}return _createClass(n,[{key:"hasDependency",value:function(e){return this.definedDependencies.includes(e)}},{key:"definedDependencies",get:function(){return this.dependencies}},{key:"getDerivedPropertyListener",value:function(){this.isDeferred?this.hasDeferredValue=!0:_get(_getPrototypeOf(n.prototype),"set",this).call(this,zt(this.derivation,this.definedDependencies))}},{key:"recomputeDerivation",value:function(){this.getDerivedPropertyListener()}},{key:"dispose",value:function(){for(var e=this.definedDependencies,t=0;t<e.length;t++){var i=e[t];i.hasListener(this.derivedPropertyListener)&&i.unlink(this.derivedPropertyListener)}this.dependencies=null,_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"setDeferred",value:function(e){return this.isDeferred&&!e&&(this.deferredValue=zt(this.derivation,this.definedDependencies)),_get(_getPrototypeOf(n.prototype),"setDeferred",this).call(this,e)}}],[{key:"valueEquals",value:function(e,t,i){return new n([e,t],(function(e,t){return e===t}),i)}},{key:"and",value:function(e,t){return new n(e,_.reduce.bind(null,e,Wt,!0),t)}},{key:"or",value:function(e,t){return new n(e,_.reduce.bind(null,e,jt,!1),t)}},{key:"not",value:function(e,t){return new n([e],(function(e){return!e}),t)}},{key:"deriveAny",value:function(e,t,i){return new n(e,t,i)}}]),n}(ht),Wt=function(e,t){return e&&t.value},jt=function(e,t){return e||t.value},Xt=new Map;Ut.DerivedPropertyIO=function(e){return Xt.has(e)||Xt.set(e,new U("".concat("DerivedPropertyIO","<").concat(e.typeName,">"),{valueType:Ut,parameterTypes:[e],supertype:dt.PropertyIO(e),documentation:"Like PropertyIO, but not settable.  Instead it is derived from other DerivedPropertyIO or PropertyIO instances",applyState:_.noop,methods:{setValue:{returnType:Je,parameterTypes:[e],implementation:Ut.prototype.set,documentation:"Errors out when you try to set a derived property.",invocableForReadOnlyElements:!1}}})),Xt.get(e)};var Qt=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(Ut),Kt=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(Ut),Jt=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(Ut),Zt=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(Ut);h.register("DerivedProperty",Ut);var $t=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({bidirectional:!1,defaultValue:null,derive:_.identity,map:_.identity,inverseMap:_.identity},i),s=a.derive,o=a.map,l=a.inverseMap,u="function"==typeof s?s:function(e){return e[s]},c="function"==typeof o?o:function(e){return e[o]},h="function"==typeof l?l:function(e){return e[l]},d=null===e.value?c(a.defaultValue):c(u(e.value).value);return(r=t.call(this,d,a)).defaultValue=a.defaultValue,r.derive=u,r.map=c,r.inverseMap=h,r.bidirectional=a.bidirectional,r.valuePropertyProperty=e,r.isExternallyChanging=!1,r.propertyPropertyListener=r.onPropertyPropertyChange.bind(_assertThisInitialized(r)),r.propertyListener=r.onPropertyChange.bind(_assertThisInitialized(r)),e.link(r.propertyListener),a.bidirectional&&r.lazyLink(r.onSelfChange.bind(_assertThisInitialized(r))),r}return _createClass(n,[{key:"onPropertyPropertyChange",value:function(e,t,i){if(this.bidirectional&&null!==this.valuePropertyProperty.value&&i&&(this.derive(this.valuePropertyProperty.value)===i&&i.areValuesEqual(this.inverseMap(this.value),i.get())))return;_get(_getPrototypeOf(n.prototype),"set",this).call(this,this.map(e))}},{key:"onPropertyChange",value:function(e,t){t&&this.derive(t).unlink(this.propertyPropertyListener),e?this.derive(e).link(this.propertyPropertyListener):this.onPropertyPropertyChange(this.defaultValue,null,null)}},{key:"onSelfChange",value:function(e){if(null!==this.valuePropertyProperty.value){var t=this.derive(this.valuePropertyProperty.value);this.areValuesEqual(e,this.map(t.value))||(t.value=this.inverseMap(e))}}},{key:"dispose",value:function(){this.valuePropertyProperty.unlink(this.propertyListener),null!==this.valuePropertyProperty.value&&this.derive(this.valuePropertyProperty.value).unlink(this.propertyPropertyListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"reset",value:function(){null!==this.valuePropertyProperty.value&&this.derive(this.valuePropertyProperty.value).reset()}},{key:"set",value:function(e){this.isExternallyChanging=!0,_get(_getPrototypeOf(n.prototype),"set",this).call(this,e),this.isExternallyChanging=!1}},{key:"value",get:function(){return _get(_getPrototypeOf(n.prototype),"value",this)},set:function(e){this.set(e)}},{key:"isSettable",value:function(){return _get(_getPrototypeOf(n.prototype),"isSettable",this).call(this)||this.bidirectional}}]),n}(ht);h.register("DynamicProperty",$t);var en=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),x("Use EnumerationProperty. EnumerationDeprecated should be exchanged for classes that extend EnumerationValue, see WilderEnumerationPatterns for examples."),r=A({valueType:e,phetioValueType:le(e),validValues:e.VALUES},r),(a=t.call(this,i,r)).enumeration=e,a}return _createClass(n)}(dt);h.register("EnumerationDeprecatedProperty",en);var tn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,new st(e),i)}return _createClass(n)}($t);h.register("MappedProperty",tn);var nn=function(){function e(t,n,i){var r=this;if(_classCallCheck(this,e),this.dependencies=t,this.dependencyListeners=new Map,t.forEach((function(e){var i=function(){if(!r.isDisposed){var e=t.map((function(e){return e.get()}));n.apply(void 0,_toConsumableArray(e))}};r.dependencyListeners.set(e,i),e.lazyLink(i,{phetioDependencies:_.without(t,e)})})),!i){var a=t.map((function(e){return e.get()}));n.apply(void 0,_toConsumableArray(a))}this.isDisposed=!1}return _createClass(e,[{key:"definedDependencies",get:function(){return this.dependencies}},{key:"dispose",value:function(){for(var e=this.definedDependencies,t=0;t<e.length;t++){var n=e[t],i=this.dependencyListeners.get(n);n.hasListener(i)&&n.unlink(i)}this.dependencies=null,this.dependencyListeners.clear(),this.isDisposed=!0}}],[{key:"multilink",value:function(t,n){return new e(t,n,!1)}},{key:"multilinkAny",value:function(t,n){return new e(t,n)}},{key:"lazyMultilink",value:function(t,n){return new e(t,n,!0)}},{key:"unmultilink",value:function(e){e.dispose()}}]),e}();h.register("Multilink",nn);var rn=function(){function e(t,n){_classCallCheck(this,e);var i=S()({defaultArguments:[],initialize:t.prototype.initialize,maxSize:100,initialSize:0,useDefaultConstruction:!1},n);for(this._maxPoolSize=i.maxSize,this.partialConstructor=Function.prototype.bind.bind(t,t),this.DefaultConstructor=this.partialConstructor.apply(this,_toConsumableArray(i.defaultArguments)),this.initialize=i.initialize,this.useDefaultConstruction=i.useDefaultConstruction,this.objects=[];this.objects.length<i.initialSize;)this.objects.push(this.createDefaultObject())}return _createClass(e,[{key:"createDefaultObject",value:function(){return new this.DefaultConstructor}},{key:"fetch",value:function(){return this.objects.length?this.objects.pop():this.createDefaultObject()}},{key:"create",value:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return this.objects.length?(e=this.objects.pop(),this.initialize.apply(e,n)):this.useDefaultConstruction?(e=this.createDefaultObject(),this.initialize.apply(e,n)):e=new(this.partialConstructor.apply(this,n)),e}},{key:"poolSize",get:function(){return this.objects.length}},{key:"maxPoolSize",get:function(){return this._maxPoolSize},set:function(e){this._maxPoolSize=e}},{key:"freeToPool",value:function(e){this.objects.length<this.maxPoolSize&&this.objects.push(e)}}]),e}();y.register("Pool",rn);var an=function(){function e(t,n,i,r){_classCallCheck(this,e),this.x=t,this.y=n,this.z=i,this.w=r}return _createClass(e,[{key:"getMagnitude",value:function(){return Math.sqrt(this.magnitudeSquared)}},{key:"magnitude",get:function(){return this.getMagnitude()}},{key:"getMagnitudeSquared",value:function(){return this.dot(this)}},{key:"magnitudeSquared",get:function(){return this.getMagnitudeSquared()}},{key:"distance",value:function(e){return this.minus(e).magnitude}},{key:"distanceXYZW",value:function(e,t,n,i){var r=this.x-e,a=this.y-t,s=this.z-n,o=this.w-i;return Math.sqrt(r*r+a*a+s*s+o*o)}},{key:"distanceSquared",value:function(e){return this.minus(e).magnitudeSquared}},{key:"distanceSquaredXYZW",value:function(e,t,n,i){var r=this.x-e,a=this.y-t,s=this.z-n,o=this.w-i;return r*r+a*a+s*s+o*o}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"dotXYZW",value:function(e,t,n,i){return this.x*e+this.y*t+this.z*n+this.w*i}},{key:"angleBetween",value:function(e){return Math.acos(xt.clamp(this.normalized().dot(e.normalized()),-1,1))}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w}},{key:"equalsEpsilon",value:function(e,t){return t||(t=0),Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)+Math.abs(this.w-e.w)<=t}},{key:"isFinite",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)&&isFinite(this.w)}))},{key:"copy",value:function(e){return e?e.set(this):sn(this.x,this.y,this.z,this.w)}},{key:"normalized",value:function(){var e=this.magnitude;return this.dividedScalar(e)}},{key:"roundedSymmetric",value:function(){return this.copy().roundSymmetric()}},{key:"withMagnitude",value:function(e){return this.copy().setMagnitude(e)}},{key:"timesScalar",value:function(e){return sn(this.x*e,this.y*e,this.z*e,this.w*e)}},{key:"times",value:function(e){return this.timesScalar(e)}},{key:"componentTimes",value:function(e){return sn(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}},{key:"plus",value:function(e){return sn(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}},{key:"plusXYZW",value:function(e,t,n,i){return sn(this.x+e,this.y+t,this.z+n,this.w+i)}},{key:"plusScalar",value:function(e){return sn(this.x+e,this.y+e,this.z+e,this.w+e)}},{key:"minus",value:function(e){return sn(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}},{key:"minusXYZW",value:function(e,t,n,i){return sn(this.x-e,this.y-t,this.z-n,this.w-i)}},{key:"minusScalar",value:function(e){return sn(this.x-e,this.y-e,this.z-e,this.w-e)}},{key:"dividedScalar",value:function(e){return sn(this.x/e,this.y/e,this.z/e,this.w/e)}},{key:"negated",value:function(){return sn(-this.x,-this.y,-this.z,-this.w)}},{key:"blend",value:function(e,t){return this.plus(e.minus(this).times(t))}},{key:"average",value:function(e){return this.blend(e,.5)}},{key:"toString",value:function(){return"Vector4(".concat(this.x,", ").concat(this.y,", ").concat(this.z,", ").concat(this.w,")")}},{key:"toVector3",value:function(){return new un(this.x,this.y,this.z)}},{key:"setXYZW",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"set",value:function(e){return this.setXYZW(e.x,e.y,e.z,e.w)}},{key:"setMagnitude",value:function(e){var t=e/this.magnitude;return this.multiplyScalar(t)}},{key:"add",value:function(e){return this.setXYZW(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}},{key:"addXYZW",value:function(e,t,n,i){return this.setXYZW(this.x+e,this.y+t,this.z+n,this.w+i)}},{key:"addScalar",value:function(e){return this.setXYZW(this.x+e,this.y+e,this.z+e,this.w+e)}},{key:"subtract",value:function(e){return this.setXYZW(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}},{key:"subtractXYZW",value:function(e,t,n,i){return this.setXYZW(this.x-e,this.y-t,this.z-n,this.w-i)}},{key:"subtractScalar",value:function(e){return this.setXYZW(this.x-e,this.y-e,this.z-e,this.w-e)}},{key:"multiplyScalar",value:function(e){return this.setXYZW(this.x*e,this.y*e,this.z*e,this.w*e)}},{key:"multiply",value:function(e){return this.multiplyScalar(e)}},{key:"componentMultiply",value:function(e){return this.setXYZW(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)}},{key:"divideScalar",value:function(e){return this.setXYZW(this.x/e,this.y/e,this.z/e,this.w/e)}},{key:"negate",value:function(){return this.setXYZW(-this.x,-this.y,-this.z,-this.w)}},{key:"normalize",value:function(){var e=this.magnitude;if(0===e)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}},{key:"roundSymmetric",value:function(){return this.setXYZW(En.roundSymmetric(this.x),En.roundSymmetric(this.y),En.roundSymmetric(this.z),En.roundSymmetric(this.w))}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}]),e}();_defineProperty(an,"pool",new rn(an,{maxSize:1e3,initialize:an.prototype.setXYZW,defaultArguments:[0,0,0,0]})),an.prototype.isVector4=!0,an.prototype.dimension=4,xt.register("Vector4",an);var sn=an.pool.create.bind(an.pool);xt.register("v4",sn);var on=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"mutableOverrideHelper",value:function(e){n.prototype[e]=function(){throw new Error("Cannot call mutable method '".concat(e,"' on immutable Vector3"))}}}]),n}(an);on.mutableOverrideHelper("setXYZW"),on.mutableOverrideHelper("setX"),on.mutableOverrideHelper("setY"),on.mutableOverrideHelper("setZ"),on.mutableOverrideHelper("setW"),an.ZERO=new an(0,0,0,0),an.X_UNIT=new an(1,0,0,0),an.Y_UNIT=new an(0,1,0,0),an.Z_UNIT=new an(0,0,1,0),an.W_UNIT=new an(0,0,0,1);var ln=function(e,t){return e.add(t)},un=function(){function e(t,n,i){_classCallCheck(this,e),this.x=t,this.y=n,this.z=i}return _createClass(e,[{key:"getMagnitude",value:function(){return Math.sqrt(this.magnitudeSquared)}},{key:"magnitude",get:function(){return this.getMagnitude()}},{key:"getMagnitudeSquared",value:function(){return this.dot(this)}},{key:"magnitudeSquared",get:function(){return this.getMagnitudeSquared()}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceXYZ",value:function(e,t,n){var i=this.x-e,r=this.y-t,a=this.z-n;return Math.sqrt(i*i+r*r+a*a)}},{key:"distanceSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}},{key:"distanceSquaredXYZ",value:function(e,t,n){var i=this.x-e,r=this.y-t,a=this.z-n;return i*i+r*r+a*a}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"dotXYZ",value:function(e,t,n){return this.x*e+this.y*t+this.z*n}},{key:"angleBetween",value:function(e){return Math.acos(xt.clamp(this.normalized().dot(e.normalized()),-1,1))}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}},{key:"equalsEpsilon",value:function(e,t){return t||(t=0),Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)<=t}},{key:"isFinite",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)}))},{key:"copy",value:function(e){return e?e.set(this):cn(this.x,this.y,this.z)}},{key:"cross",value:function(e){return cn(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}},{key:"normalized",value:function(){var e=this.magnitude;if(0===e)throw new Error("Cannot normalize a zero-magnitude vector");return cn(this.x/e,this.y/e,this.z/e)}},{key:"roundedSymmetric",value:function(){return this.copy().roundSymmetric()}},{key:"withMagnitude",value:function(e){return this.copy().setMagnitude(e)}},{key:"timesScalar",value:function(e){return cn(this.x*e,this.y*e,this.z*e)}},{key:"times",value:function(e){return this.timesScalar(e)}},{key:"componentTimes",value:function(e){return cn(this.x*e.x,this.y*e.y,this.z*e.z)}},{key:"plus",value:function(e){return cn(this.x+e.x,this.y+e.y,this.z+e.z)}},{key:"plusXYZ",value:function(e,t,n){return cn(this.x+e,this.y+t,this.z+n)}},{key:"plusScalar",value:function(e){return cn(this.x+e,this.y+e,this.z+e)}},{key:"minus",value:function(e){return cn(this.x-e.x,this.y-e.y,this.z-e.z)}},{key:"minusXYZ",value:function(e,t,n){return cn(this.x-e,this.y-t,this.z-n)}},{key:"minusScalar",value:function(e){return cn(this.x-e,this.y-e,this.z-e)}},{key:"dividedScalar",value:function(e){return cn(this.x/e,this.y/e,this.z/e)}},{key:"negated",value:function(){return cn(-this.x,-this.y,-this.z)}},{key:"blend",value:function(e,t){return this.plus(e.minus(this).times(t))}},{key:"average",value:function(e){return this.blend(e,.5)}},{key:"toString",value:function(){return"Vector3(".concat(this.x,", ").concat(this.y,", ").concat(this.z,")")}},{key:"toVector2",value:function(){return fn(this.x,this.y)}},{key:"toVector4",value:function(){return sn(this.x,this.y,this.z,1)}},{key:"setXYZ",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"set",value:function(e){return this.setXYZ(e.x,e.y,e.z)}},{key:"setMagnitude",value:function(e){var t=e/this.magnitude;return this.multiplyScalar(t)}},{key:"add",value:function(e){return this.setXYZ(this.x+e.x,this.y+e.y,this.z+e.z)}},{key:"addXYZ",value:function(e,t,n){return this.setXYZ(this.x+e,this.y+t,this.z+n)}},{key:"addScalar",value:function(e){return this.setXYZ(this.x+e,this.y+e,this.z+e)}},{key:"subtract",value:function(e){return this.setXYZ(this.x-e.x,this.y-e.y,this.z-e.z)}},{key:"subtractXYZ",value:function(e,t,n){return this.setXYZ(this.x-e,this.y-t,this.z-n)}},{key:"subtractScalar",value:function(e){return this.setXYZ(this.x-e,this.y-e,this.z-e)}},{key:"multiplyScalar",value:function(e){return this.setXYZ(this.x*e,this.y*e,this.z*e)}},{key:"multiply",value:function(e){return this.multiplyScalar(e)}},{key:"componentMultiply",value:function(e){return this.setXYZ(this.x*e.x,this.y*e.y,this.z*e.z)}},{key:"divideScalar",value:function(e){return this.setXYZ(this.x/e,this.y/e,this.z/e)}},{key:"negate",value:function(){return this.setXYZ(-this.x,-this.y,-this.z)}},{key:"setCross",value:function(e){return this.setXYZ(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}},{key:"normalize",value:function(){var e=this.magnitude;if(0===e)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}},{key:"roundSymmetric",value:function(){return this.setXYZ(En.roundSymmetric(this.x),En.roundSymmetric(this.y),En.roundSymmetric(this.z))}},{key:"toStateObject",value:function(){return{x:this.x,y:this.y,z:this.z}}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}],[{key:"average",value:function(t){return _.reduce(t,ln,new e(0,0,0)).divideScalar(t.length)}},{key:"slerp",value:function(e,t,n){return xt.Quaternion.slerp(new xt.Quaternion,xt.Quaternion.getRotationQuaternion(e,t),n).timesVector3(e)}},{key:"fromStateObject",value:function(e){return cn(e.x,e.y,e.z)}}]),e}();_defineProperty(un,"pool",new rn(un,{maxSize:1e3,initialize:un.prototype.setXYZ,defaultArguments:[0,0,0]})),un.prototype.isVector3=!0,un.prototype.dimension=3,xt.register("Vector3",un);var cn=un.pool.create.bind(un.pool);xt.register("v3",cn);var hn=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"mutableOverrideHelper",value:function(e){n.prototype[e]=function(){throw new Error("Cannot call mutable method '".concat(e,"' on immutable Vector3"))}}}]),n}(un);hn.mutableOverrideHelper("setXYZ"),hn.mutableOverrideHelper("setX"),hn.mutableOverrideHelper("setY"),hn.mutableOverrideHelper("setZ"),un.ZERO=new un(0,0,0),un.X_UNIT=new un(1,0,0),un.Y_UNIT=new un(0,1,0),un.Z_UNIT=new un(0,0,1),un.Vector3IO=new U("Vector3IO",{valueType:un,documentation:"Basic 3-dimensional vector, represented as (x,y,z)",toStateObject:function(e){return e.toStateObject()},fromStateObject:un.fromStateObject,stateSchema:{x:Lt,y:Lt,z:Lt}});var dn=function(e,t){return e.add(t)},pn=function(){function e(t,n){_classCallCheck(this,e),this.x=t,this.y=n}return _createClass(e,[{key:"getMagnitude",value:function(){return Math.sqrt(this.magnitudeSquared)}},{key:"magnitude",get:function(){return this.getMagnitude()}},{key:"getMagnitudeSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"magnitudeSquared",get:function(){return this.getMagnitudeSquared()}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceXY",value:function(e,t){var n=this.x-e,i=this.y-t;return Math.sqrt(n*n+i*i)}},{key:"distanceSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"distanceSquaredXY",value:function(e,t){var n=this.x-e,i=this.y-t;return n*n+i*i}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"dotXY",value:function(e,t){return this.x*e+this.y*t}},{key:"getAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angle",get:function(){return this.getAngle()}},{key:"angleBetween",value:function(e){var t=this.magnitude,n=e.magnitude;return Math.acos(xt.clamp((this.x*e.x+this.y*e.y)/(t*n),-1,1))}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"equalsEpsilon",value:function(e,t){return t||(t=0),Math.max(Math.abs(this.x-e.x),Math.abs(this.y-e.y))<=t}},{key:"isFinite",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isFinite(this.x)&&isFinite(this.y)}))},{key:"copy",value:function(e){return e?e.set(this):fn(this.x,this.y)}},{key:"crossScalar",value:function(e){return this.x*e.y-this.y*e.x}},{key:"normalized",value:function(){var e=this.magnitude;if(0===e)throw new Error("Cannot normalize a zero-magnitude vector");return fn(this.x/e,this.y/e)}},{key:"roundedSymmetric",value:function(){return this.copy().roundSymmetric()}},{key:"withMagnitude",value:function(e){return this.copy().setMagnitude(e)}},{key:"timesScalar",value:function(e){return fn(this.x*e,this.y*e)}},{key:"times",value:function(e){return this.timesScalar(e)}},{key:"componentTimes",value:function(e){return fn(this.x*e.x,this.y*e.y)}},{key:"plus",value:function(e){return fn(this.x+e.x,this.y+e.y)}},{key:"plusXY",value:function(e,t){return fn(this.x+e,this.y+t)}},{key:"plusScalar",value:function(e){return fn(this.x+e,this.y+e)}},{key:"minus",value:function(e){return fn(this.x-e.x,this.y-e.y)}},{key:"minusXY",value:function(e,t){return fn(this.x-e,this.y-t)}},{key:"minusScalar",value:function(e){return fn(this.x-e,this.y-e)}},{key:"dividedScalar",value:function(e){return fn(this.x/e,this.y/e)}},{key:"negated",value:function(){return fn(-this.x,-this.y)}},{key:"getPerpendicular",value:function(){return fn(this.y,-this.x)}},{key:"perpendicular",get:function(){return this.getPerpendicular()}},{key:"rotated",value:function(e){var t=this.angle+e,n=this.magnitude;return fn(n*Math.cos(t),n*Math.sin(t))}},{key:"rotateAboutXY",value:function(e,t,n){var i=this.x-e,r=this.y-t,a=Math.cos(n),s=Math.sin(n);return this.x=e+i*a-r*s,this.y=t+i*s+r*a,this}},{key:"rotateAboutPoint",value:function(e,t){return this.rotateAboutXY(e.x,e.y,t)}},{key:"rotatedAboutXY",value:function(e,t,n){return fn(this.x,this.y).rotateAboutXY(e,t,n)}},{key:"rotatedAboutPoint",value:function(e,t){return this.rotatedAboutXY(e.x,e.y,t)}},{key:"blend",value:function(e,t){return fn(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}},{key:"average",value:function(e){return this.blend(e,.5)}},{key:"toString",value:function(){return"Vector2(".concat(this.x,", ").concat(this.y,")")}},{key:"toVector3",value:function(){return new un(this.x,this.y,0)}},{key:"setXY",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"set",value:function(e){return this.setXY(e.x,e.y)}},{key:"setMagnitude",value:function(e){var t=e/this.magnitude;return this.multiplyScalar(t)}},{key:"add",value:function(e){return this.setXY(this.x+e.x,this.y+e.y)}},{key:"addXY",value:function(e,t){return this.setXY(this.x+e,this.y+t)}},{key:"addScalar",value:function(e){return this.setXY(this.x+e,this.y+e)}},{key:"subtract",value:function(e){return this.setXY(this.x-e.x,this.y-e.y)}},{key:"subtractXY",value:function(e,t){return this.setXY(this.x-e,this.y-t)}},{key:"subtractScalar",value:function(e){return this.setXY(this.x-e,this.y-e)}},{key:"multiplyScalar",value:function(e){return this.setXY(this.x*e,this.y*e)}},{key:"multiply",value:function(e){return this.multiplyScalar(e)}},{key:"componentMultiply",value:function(e){return this.setXY(this.x*e.x,this.y*e.y)}},{key:"divideScalar",value:function(e){return this.setXY(this.x/e,this.y/e)}},{key:"negate",value:function(){return this.setXY(-this.x,-this.y)}},{key:"normalize",value:function(){var e=this.magnitude;if(0===e)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(e)}},{key:"roundSymmetric",value:function(){return this.setXY(En.roundSymmetric(this.x),En.roundSymmetric(this.y))}},{key:"rotate",value:function(e){var t=this.angle+e,n=this.magnitude;return this.setXY(n*Math.cos(t),n*Math.sin(t))}},{key:"setPolar",value:function(e,t){return this.setXY(e*Math.cos(t),e*Math.sin(t))}},{key:"toStateObject",value:function(){return{x:this.x,y:this.y}}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}],[{key:"average",value:function(t){return _.reduce(t,dn,new e(0,0)).divideScalar(t.length)}},{key:"createPolar",value:function(t,n){return new e(0,0).setPolar(t,n)}},{key:"fromStateObject",value:function(e){return fn(e.x,e.y)}},{key:"getAngleBetweenVectors",value:function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.atan2(i,n)}},{key:"getDistanceBetweenVectors",value:function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}}]),e}();_defineProperty(pn,"pool",new rn(pn,{maxSize:1e3,initialize:pn.prototype.setXY,defaultArguments:[0,0]})),pn.prototype.isVector2=!0,pn.prototype.dimension=2,xt.register("Vector2",pn);var fn=pn.pool.create.bind(pn.pool);xt.register("v2",fn);var mn=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,null,[{key:"mutableOverrideHelper",value:function(e){n.prototype[e]=function(){throw new Error("Cannot call mutable method '".concat(e,"' on immutable Vector2"))}}}]),n}(pn);mn.mutableOverrideHelper("setXY"),mn.mutableOverrideHelper("setX"),mn.mutableOverrideHelper("setY"),pn.ZERO=new pn(0,0),pn.X_UNIT=new pn(1,0),pn.Y_UNIT=new pn(0,1),pn.Vector2IO=new U("Vector2IO",{valueType:pn,stateSchema:{x:Lt,y:Lt},toStateObject:function(e){return e.toStateObject()},fromStateObject:function(e){return pn.fromStateObject(e)},documentation:"A numerical object with x and y properties, like {x:3,y:4}"});var gn,yn,vn,An=Number.MIN_VALUE,bn=2*Math.PI,Sn={clamp:function(e,t,n){return e<t?t:e>n?n:e},moduloBetweenDown:function(e,t,n){var i=n-t,r=(e-t)%i;return r<0&&(r+=i),r+t},moduloBetweenUp:function(e,t,n){return-Sn.moduloBetweenDown(-e,-n,-t)},rangeInclusive:function(e,t){if(t<e)return[];for(var n=new Array(t-e+1),i=e;i<=t;i++)n[i-e]=i;return n},rangeExclusive:function(e,t){return Sn.rangeInclusive(e+1,t-1)},toRadians:function(e){return Math.PI*e/180},toDegrees:function(e){return 180*e/Math.PI},mod:function(e,t){return e/t%1==0?0:e%t},gcd:function(e,t){return Math.abs(0===t?e:this.gcd(t,Sn.mod(e,t)))},lcm:function(e,t){return Sn.roundSymmetric(Math.abs(e*t)/Sn.gcd(e,t))},lineLineIntersection:function(e,t,n,i){if(e.equals(t)||n.equals(i))return null;var r=e.x-t.x,a=n.x-i.x,s=e.y-t.y,o=n.y-i.y,l=r*o-s*a;if(Math.abs(l)<1e-10)return null;var u=e.x*t.y-e.y*t.x,c=n.x*i.y-n.y*i.x;return new pn((u*a-r*c)/l,(u*o-s*c)/l)},circleCenterFromPoints:function(e,t,n){var i=new pn((e.x+t.x)/2,(e.y+t.y)/2),r=new pn((t.x+n.x)/2,(t.y+n.y)/2),a=new pn(i.x+(t.y-e.y),i.y-(t.x-e.x)),s=new pn(r.x+(n.y-t.y),r.y-(n.x-t.x));return Sn.lineLineIntersection(i,a,r,s)},pointInCircleFromPoints:function(e,t,n,i){var r=e.x-i.x,a=e.y-i.y,s=(e.x-i.x)*(e.x-i.x)+(e.y-i.y)*(e.y-i.y),o=t.x-i.x,l=t.y-i.y,u=(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y),c=n.x-i.x,h=n.y-i.y,d=(n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y);return r*l*d+a*u*c+s*o*h-s*l*c-a*o*d-r*u*h>0},sphereRayIntersection:function(e,t,n){n=void 0===n?1e-5:n;var i=new xt.Vector3(0,0,0),r=t.direction,a=t.position,s=a.minus(i),o=r.dot(s),l=4*o*o-4*(s.magnitudeSquared-e*e);if(l<n)return null;var u=r.dot(i)-r.dot(a),c=Math.sqrt(l)/2,h=u-c,d=u+c;if(d<n)return null;var p=t.pointAtDistance(d),f=p.minus(i).normalized();if(h<n)return{distance:d,hitPoint:p,normal:f.negated(),fromOutside:!1};var m=t.pointAtDistance(h),g=m.minus(i).normalized();return{distance:h,hitPoint:m,normal:g,fromOutside:!0}},solveLinearRootsReal:function(e,t){return 0===e?0===t?null:[]:[-t/e]},solveQuadraticRootsReal:function(e,t,n){if(0===e||Math.abs(t/e)>1e7||Math.abs(n/e)>1e7)return Sn.solveLinearRootsReal(t,n);var i=t*t-4*e*n;if(i<0)return[];var r=Math.sqrt(i);return[(-t-r)/(2*e),(-t+r)/(2*e)]},solveCubicRootsReal:function(e,t,n,i){var r,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-7;if(0===e)r=Sn.solveQuadraticRootsReal(t,n,i);else{var s=1e7;if(0===e||Math.abs(t/e)>s||Math.abs(n/e)>s||Math.abs(i/e)>s)r=Sn.solveQuadraticRootsReal(t,n,i);else if(0===i||Math.abs(e/i)>s||Math.abs(t/i)>s||Math.abs(n/i)>s)r=[0].concat(Sn.solveQuadraticRootsReal(e,t,n));else{var o=(3*(n/=e)-(t/=e)*t)/9,l=(-27*(i/=e)+t*(9*n-t*t*2))/54,u=o*o*o+l*l,c=t/3;if(u>a){var h=Math.sqrt(u);r=[Sn.cubeRoot(l+h)+Sn.cubeRoot(l-h)-c]}else if(u>-a){var d=Sn.cubeRoot(l),p=-c-d;r=[2*d-c,p,p]}else{var f=-o*o*o;f=Math.acos(l/Math.sqrt(f));var m=2*Math.sqrt(-o);r=[-c+m*Math.cos(f/3),-c+m*Math.cos((f+2*Math.PI)/3),-c+m*Math.cos((f+4*Math.PI)/3)]}}}return r},cubeRoot:function(e){return e>=0?Math.pow(e,1/3):-Math.pow(-e,1/3)},linear:function(e,t,n,i,r){return(i-n)/(t-e)*(r-e)+n},roundSymmetric:function(e){return(e<0?-1:1)*Math.round(Math.abs(e))},toFixed:function(e,t){var n=Math.pow(10,t);return(Sn.roundSymmetric(e*n)/n).toFixed(t)},toFixedNumber:function(e,t){return parseFloat(Sn.toFixed(e,t))},equalsEpsilon:function(e,t,n){return Math.abs(e-t)<=n},lineSegmentIntersection:function(e,t,n,i,r,a,s,o){var l=function(e,t,n,i,r,a){return(a-t)*(n-e)-(i-t)*(r-e)};if(l(e,t,r,a,s,o)*l(n,i,r,a,s,o)>0||l(r,a,e,t,n,i)*l(s,o,e,t,n,i)>0)return null;var u=(e-n)*(a-o)-(t-i)*(r-s);return Math.abs(u)<1e-10?null:e===r&&t===a||e===s&&t===o?new pn(e,t):n===r&&i===a||n===s&&i===o?new pn(n,i):new pn(((e*i-t*n)*(r-s)-(e-n)*(r*o-a*s))/u,((e*i-t*n)*(a-o)-(t-i)*(r*o-a*s))/u)},distToSegmentSquared:function(e,t,n){var i=t.distanceSquared(n);if(0===i)return e.distanceSquared(t);var r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;return r<0?e.distanceSquared(t):r>1?e.distanceSquared(n):e.distanceSquared(new pn(t.x+r*(n.x-t.x),t.y+r*(n.y-t.y)))},distToSegment:function(e,t,n){return Math.sqrt(this.distToSegmentSquared(e,t,n))},arePointsCollinear:function(e,t,n,i){return void 0===i&&(i=0),Sn.triangleArea(e,t,n)<=i},triangleArea:function(e,t,n){return Math.abs(Sn.triangleAreaSigned(e,t,n))},triangleAreaSigned:function(e,t,n){return e.x*(t.y-n.y)+t.x*(n.y-e.y)+n.x*(e.y-t.y)},centroidOfPolygon:function(e){var t=new pn(0,0),n=0;return e.forEach((function(i,r){var a=e[(r+1)%e.length],s=i.x*a.y-a.x*i.y;n+=s/2,t.addXY((i.x+a.x)*s,(i.y+a.y)*s)})),t.divideScalar(6*n),t},cosh:function(e){return(Math.exp(e)+Math.exp(-e))/2},sinh:function(e){return(Math.exp(e)-Math.exp(-e))/2},log10:function(e){return Math.log(e)/Math.LN10},boxMullerTransform:function(e,t,n){if(!(gn=!gn))return vn*t+e;var i,r;do{i=n.nextDouble(),r=n.nextDouble()}while(i<=An);return yn=Math.sqrt(-2*Math.log(i))*Math.cos(bn*r),vn=Math.sqrt(-2*Math.log(i))*Math.sin(bn*r),yn*t+e},numberOfDecimalPlaces:function(e){if(Math.floor(e)===e)return 0;var t=e.toString();if(t.includes("e")){var n=t.split("e"),i=n[0],r=Number(n[1]),a=i.includes(".")?i.split(".")[1].length:0;return Math.max(a-r,0)}return t.split(".")[1].length},roundToInterval:function(e,t){return Sn.toFixedNumber(Sn.roundSymmetric(e/t)*t,Sn.numberOfDecimalPlaces(t))}};xt.register("Utils",Sn),xt.clamp=Sn.clamp,xt.moduloBetweenDown=Sn.moduloBetweenDown,xt.moduloBetweenUp=Sn.moduloBetweenUp,xt.rangeInclusive=Sn.rangeInclusive,xt.rangeExclusive=Sn.rangeExclusive,xt.toRadians=Sn.toRadians,xt.toDegrees=Sn.toDegrees,xt.lineLineIntersection=Sn.lineLineIntersection,xt.lineSegmentIntersection=Sn.lineSegmentIntersection,xt.sphereRayIntersection=Sn.sphereRayIntersection,xt.solveQuadraticRootsReal=Sn.solveQuadraticRootsReal,xt.solveCubicRootsReal=Sn.solveCubicRootsReal,xt.cubeRoot=Sn.cubeRoot,xt.linear=Sn.linear,xt.boxMullerTransform=Sn.boxMullerTransform;var En=Sn,kn=function(e){return"".concat(e)},Vn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){_classCallCheck(this,n);var a=S()({formatNames:[],decimalPlaces:null,phetioValueType:Te},r),s=[e],o={},l=Object.keys(i);return l.forEach((function(e){var t=i[e];(t instanceof ht||t instanceof st)&&s.push(t);var n=kn;if(null!==a.decimalPlaces&&("number"==typeof a.decimalPlaces||null!==a.decimalPlaces[e])){var r="number"==typeof a.decimalPlaces||null===a.decimalPlaces?a.decimalPlaces:a.decimalPlaces[e];n=function(e){return kn("number"==typeof e?En.toFixed(e,r):e)}}a.maps&&a.maps.hasOwnProperty(e)?o[e]=function(t){return n(a.maps[e](t))}:o[e]=n})),t.call(this,s,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var u=function(e){var t=s.indexOf(e);return t>=0?n[t]:e},c="".concat(u(e));a.formatNames.forEach((function(e,t){c=c.replace(new RegExp("\\{".concat(t,"\\}"),"g"),"{{".concat(e,"}}"))}));for(var h=c.match(/\{\{[^{}]+\}\}/g)||[],d=0;d<h.length;d++){var p=h[d],f=p.replace("{{","").replace("}}","");if(l.includes(f)){var m=u(i[f]);o[f]&&(m=o[f](m)),c=c.replace(p,"".concat(m))}}return c}),a)}return _createClass(n)}(Ut);h.register("PatternStringProperty",Vn);var wn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({valueType:"string",phetioValueType:Te},i);return t.call(this,e,r)}return _createClass(n)}(dt);h.register("StringProperty",wn);var _n=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),a=t.call(this,e,r),i&&(a.targetPropertyInstrumented=i),a}return _createClass(n,[{key:"setTargetProperty",value:function(e,t,n){if(this.targetProperty===n)return e;this.targetProperty&&this.targetProperty instanceof ht&&this.targetProperty.isPhetioInstrumented();var i=this.targetProperty;this.ownedPhetioProperty&&n!==this.ownedPhetioProperty&&this.disposeOwnedPhetioProperty(),e&&null!==t&&e.updateLinkedElementForProperty(t,i,n),this.forwardingListener=this.forwardingListener||this.onTargetPropertyChange.bind(this);var r=this.get();this.targetProperty&&this.targetProperty.unlink(this.forwardingListener),this.targetProperty=n,this.targetProperty?(this.targetProperty.lazyLink(this.forwardingListener),this.setPropertyValue(this.targetProperty.value)):this.setPropertyValue(r);var a=this.get();return this.areValuesEqual(r,a)||this.notifyListeners(r),e}},{key:"onTargetPropertyChange",value:function(e){_get(_getPrototypeOf(n.prototype),"set",this).call(this,e)}},{key:"set",value:function(e){return this.targetProperty?this.targetProperty.set(e):_get(_getPrototypeOf(n.prototype),"set",this).call(this,e),this}},{key:"setTargetPropertyInstrumented",value:function(e,t){return this.targetPropertyInstrumented=e,t}},{key:"getTargetPropertyInstrumented",value:function(){return this.targetPropertyInstrumented||!1}},{key:"initializePhetio",value:function(e,t,n){!this.targetProperty&&this.targetPropertyInstrumented?(this.ownedPhetioProperty=n(),this.setTargetProperty(e,t,this.ownedPhetioProperty)):this.targetProperty&&this.targetProperty instanceof ht&&this.targetProperty.isPhetioInstrumented()&&e.updateLinkedElementForProperty(t,null,this.targetProperty)}},{key:"disposeOwnedPhetioProperty",value:function(){this.ownedPhetioProperty&&(this.ownedPhetioProperty.dispose(),delete this.ownedPhetioProperty)}},{key:"dispose",value:function(){this.targetProperty&&this.forwardingListener&&this.targetProperty.unlink(this.forwardingListener),this.disposeOwnedPhetioProperty(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(st);h.register("TinyForwardingProperty",_n);var Cn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),_defineProperty(_assertThisInitialized(i=t.call(this,e.value)),"isOverridden",!1),i._targetProperty=e,i._targetListener=i.onTargetPropertyChange.bind(_assertThisInitialized(i)),i._targetProperty.lazyLink(i._targetListener),i}return _createClass(n,[{key:"targetProperty",set:function(e){this.setTargetProperty(e)}},{key:"setTargetProperty",value:function(e){if(this.targetProperty!==e){var t=this.value;this.isOverridden||this._targetProperty.unlink(this._targetListener),this._targetProperty=e,this.isOverridden||(this._targetProperty.lazyLink(this._targetListener),this.equalsValue(t)||this.notifyListeners(t))}}},{key:"clearOverride",value:function(){if(this.isOverridden){var e=this.value;this.isOverridden=!1,this._targetProperty.lazyLink(this._targetListener),this.equalsValue(e)||this.notifyListeners(e)}}},{key:"get",value:function(){return this.isOverridden?this._value:this._targetProperty.value}},{key:"set",value:function(e){this.isOverridden||(this._value=this._targetProperty.value),_get(_getPrototypeOf(n.prototype),"set",this).call(this,e)}},{key:"setPropertyValue",value:function(e){this.isOverridden||(this.isOverridden=!0,this._targetProperty.unlink(this._targetListener)),_get(_getPrototypeOf(n.prototype),"setPropertyValue",this).call(this,e)}},{key:"equalsValue",value:function(e){return this.areValuesEqual(e,this.value)}},{key:"onTargetPropertyChange",value:function(e,t){this.isOverridden||this.notifyListeners(t)}},{key:"notifyListeners",value:function(e){this.emit(this.value,e,this)}},{key:"dispose",value:function(){this.isOverridden||this._targetProperty.unlink(this._targetListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(st);h.register("TinyOverrideProperty",Cn);var xn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,e)).onAccessAttempt=i,r}return _createClass(n,[{key:"get",value:function(){return this.onAccessAttempt(),_get(_getPrototypeOf(n.prototype),"get",this).call(this)}},{key:"set",value:function(e){throw new Error("Cannot set a TinyStaticProperty value")}},{key:"isSettable",value:function(){return!1}},{key:"notifyListeners",value:function(e){this.emit(this.get(),e,this)}},{key:"link",value:function(e){this.addListener(e),e(this.get(),null,this)}},{key:"equalsValue",value:function(e){return this.areValuesEqual(e,this.get())}}]),n}(st);h.register("TinyStaticProperty",xn);var Pn=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=function(e){return e*i.factor},s=S()({bidirectional:!0,map:a,inverseMap:function(e){return e/i.factor}},i);return(r=t.call(this,e,s))._property=e,r.rangeProperty=new st(null),e.rangeProperty&&(r._rangeListener=function(e){if(null===e)r.rangeProperty.value=null;else{var t=a(e.min),n=a(e.max);r.rangeProperty.value=new Tt(Math.min(t,n),Math.max(t,n))}},e.rangeProperty.link(r._rangeListener)),r}return _createClass(n,[{key:"range",get:function(){return this.rangeProperty.value},set:function(e){this.rangeProperty.value=e}},{key:"asRanged",value:function(){if(Dt(this))return this;throw new Error("Not a RangedProperty")}},{key:"dispose",value:function(){this._property.rangeProperty&&this._property.rangeProperty.unlink(this._rangeListener),this.rangeProperty.dispose()}}]),n}(tn);h.register("UnitConversionProperty",Pn);var Tn=h,Mn=new c("bamboo"),Ln=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o,l,u,c,h,d,p,f,m,g,y,v){var A;return _classCallCheck(this,n),(A=t.call(this)).coordinate=e,A.centerCoordinate=i,A.minCoordinate=r,A.maxCoordinate=a,A.minSide=s,A.maxSide=o,A.rectCoordinate=l,A.rectSize=u,A.flowBoxOrientation=c,A.size=h,A.line=d,A.preferredSize=p,A.localPreferredSize=f,A.sizable=m,A.ariaOrientation=c,A.modelToView=g,A.viewToModel=y,A.toVector=v,A}return _createClass(n)}(ee);_defineProperty(Ln,"HORIZONTAL",new Ln("x","centerX","minX","maxX","left","right","rectX","rectWidth","horizontal","width","column","preferredWidth","localPreferredWidth","widthSizable",(function(e,t){return e.modelToViewX(t)}),(function(e,t){return e.viewToModelX(t)}),(function(e,t,n){return new n(e,t,0,0)}))),_defineProperty(Ln,"VERTICAL",new Ln("y","centerY","minY","maxY","top","bottom","rectY","rectHeight","vertical","height","row","preferredHeight","localPreferredHeight","heightSizable",(function(e,t){return e.modelToViewY(t)}),(function(e,t){return e.viewToModelY(t)}),(function(e,t,n){return new n(t,e,0,0)}))),_defineProperty(Ln,"enumeration",new re(Ln,{phetioDocumentation:"Horizontal or vertical orientation"})),Ln.HORIZONTAL.opposite=Ln.VERTICAL,Ln.VERTICAL.opposite=Ln.HORIZONTAL,y.register("Orientation",Ln);var In=Ln,Rn=new c("kite"),Dn=En.lineLineIntersection,Nn={lineWidth:1,lineCap:"butt",lineJoin:"miter",lineDash:[],lineDashOffset:0,miterLimit:10},qn=function(){function e(t){_classCallCheck(this,e);var n=A({},Nn,t);this.lineWidth=n.lineWidth,this.lineCap=n.lineCap,this.lineJoin=n.lineJoin,this.lineDash=n.lineDash,this.lineDashOffset=n.lineDashOffset,this.miterLimit=n.miterLimit}return _createClass(e,[{key:"equals",value:function(e){if(!(this.lineWidth===e.lineWidth&&this.lineCap===e.lineCap&&this.lineJoin===e.lineJoin&&this.miterLimit===e.miterLimit&&this.lineDashOffset===e.lineDashOffset))return!1;if(this.lineDash.length!==e.lineDash.length)return!1;for(var t=0;t<this.lineDash.length;t++)if(this.lineDash[t]!==e.lineDash[t])return!1;return!0}},{key:"copy",value:function(){return new e({lineWidth:this.lineWidth,lineCap:this.lineCap,lineJoin:this.lineJoin,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,miterLimit:this.miterLimit})}},{key:"leftJoin",value:function(e,t,n){t=t.normalized(),n=n.normalized();var i,r,a,s=e.plus(t.perpendicular.negated().times(this.lineWidth/2)),o=e.plus(n.perpendicular.negated().times(this.lineWidth/2)),l=s.equals(o)?[]:[new $n(s,o)];if(!(t.perpendicular.dot(n)>1e-12))return l;switch(this.lineJoin){case"round":return i=t.angle+Math.PI/2,r=n.angle+Math.PI/2,[new ki(e,this.lineWidth/2,i,r,!0)];case"miter":if(a=t.angleBetween(n.negated()),1/Math.sin(a/2)<=this.miterLimit&&a<Math.PI-1e-5){var u=Dn(s,s.plus(t),o,o.plus(n));return u?[new $n(s,u),new $n(u,o)]:[new $n(s,o)]}return l;case"bevel":return l;default:throw new Error("invalid lineJoin: ".concat(this.lineJoin))}}},{key:"rightJoin",value:function(e,t,n){return this.leftJoin(e,n.negated(),t.negated())}},{key:"cap",value:function(e,t){t=t.normalized();var n,i,r,a,s,o,l=e.plus(t.perpendicular.times(-this.lineWidth/2)),u=e.plus(t.perpendicular.times(this.lineWidth/2));switch(this.lineCap){case"butt":return[new $n(l,u)];case"round":return n=t.angle,[new ki(e,this.lineWidth/2,n+Math.PI/2,n-Math.PI/2,!0)];case"square":return i=t.perpendicular.negated().times(this.lineWidth/2),r=t.perpendicular.times(this.lineWidth/2),a=t.times(this.lineWidth/2),s=e.plus(i).plus(a),o=e.plus(r).plus(a),[new $n(l,s),new $n(s,o),new $n(o,u)];default:throw new Error("invalid lineCap: ".concat(this.lineCap))}}}]),e}();Rn.register("LineStyles",qn);var On=function(){function e(t,n){_classCallCheck(this,e),this.a=t,this.b=n;var i=0,r=1,a=this.apply(i),s=this.apply(r);a>1&&(a=1,i=this.applyInverse(a)),a<0&&(a=0,i=this.applyInverse(a)),s>1&&(s=1,r=this.applyInverse(s)),s<0&&(s=0,r=this.applyInverse(s)),this.t0=i,this.t1=r,t>0?(this.qt0=a,this.qt1=s):(this.qt0=s,this.qt1=a),this.t0<0&&this.t0>-1e-8&&(this.t0=0),this.t0>1&&this.t0<1+1e-8&&(this.t0=1),this.t1<0&&this.t1>-1e-8&&(this.t1=0),this.t1>1&&this.t1<1+1e-8&&(this.t1=1),this.qt0<0&&this.qt0>-1e-8&&(this.qt0=0),this.qt0>1&&this.qt0<1+1e-8&&(this.qt0=1),this.qt1<0&&this.qt1>-1e-8&&(this.qt1=0),this.qt1>1&&this.qt1<1+1e-8&&(this.qt1=1)}return _createClass(e,[{key:"apply",value:function(e){return this.a*e+this.b}},{key:"applyInverse",value:function(e){return(e-this.b)/this.a}}],[{key:"createLinear",value:function(t,n,i,r){var a=(r-n)/(i-t);return new e(a,n-t*a)}}]),e}();Rn.register("Overlap",On);var Bn=_createClass((function e(t,n,i,r,a){_classCallCheck(this,e),this.point=n,this.normal=i,this.distance=t,this.wind=r,this.t=En.clamp(a,0,1)}));Rn.register("RayIntersection",Bn);var Gn=function(){function e(t,n,i){_classCallCheck(this,e),this.point=t,this.aT=En.clamp(n,0,1),this.bT=En.clamp(i,0,1)}return _createClass(e,[{key:"getSwapped",value:function(){return new e(this.point,this.bT,this.aT)}}]),e}();Rn.register("SegmentIntersection",Gn);var Hn=function(e){return e.toFixed(20)};Rn.register("svgNumber",Hn);var Fn=Hn;function Yn(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var zn={parse:function(e,t){var n={svgPath:function(){var e,t,n,r,a,s;a=i,s=i,e=[],t=W();for(;null!==t;)e.push(t),t=W();if(null!==e)if(null!==(t=null!==(t=o())?t:"")){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n?e=[e,t,n]:(e=null,i=s)}else e=null,i=s;else e=null,i=s;null!==e&&(l=e[1],e=l||[]);var l;null===e&&(i=a);return e},movetoDrawtoCommandGroups:o,movetoDrawtoCommandGroup:l,drawtoCommands:u,drawtoCommand:c,moveto:h,movetoArgumentSequence:d,closepath:p,lineto:f,linetoArgumentSequence:m,horizontalLineto:g,horizontalLinetoArgumentSequence:y,verticalLineto:v,verticalLinetoArgumentSequence:A,curveto:b,curvetoArgumentSequence:S,curvetoArgument:E,smoothCurveto:k,smoothCurvetoArgumentSequence:V,smoothCurvetoArgument:w,quadraticBezierCurveto:_,quadraticBezierCurvetoArgumentSequence:C,quadraticBezierCurvetoArgument:x,smoothQuadraticBezierCurveto:P,smoothQuadraticBezierCurvetoArgumentSequence:T,ellipticalArc:M,ellipticalArcArgumentSequence:L,ellipticalArcArgument:I,coordinatePair:R,nonnegativeNumber:D,number:N,flag:q,commaWsp:O,comma:B,floatingPointConstant:G,fractionalConstant:H,exponent:F,sign:Y,digitSequence:z,digit:U,wsp:W};if(void 0!==t){if(void 0===n[t])throw new Error("Invalid rule name: "+Yn(t)+".")}else t="svgPath";var i=0,r=0,a=[];function s(e){i<r||(i>r&&(r=i,a=[]),a.push(e))}function o(){var e,t,n,r,a,s,u;if(r=i,a=i,null!==(e=l())){for(t=[],n=W();null!==n;)t.push(n),n=W();null!==t&&null!==(n=o())?e=[e,t,n]:(e=null,i=a)}else e=null,i=a;return null!==e&&(s=e[0],u=e[2],e=s.concat(u)),null===e&&(i=r),null===e&&(r=i,null!==(e=l())&&(e=function(e,t){return t}(0,e)),null===e&&(i=r)),e}function l(){var e,t,n,r,a,s,o;if(r=i,a=i,null!==(e=h())){for(t=[],n=W();null!==n;)t.push(n),n=W();null!==t&&null!==(n=null!==(n=u())?n:"")?e=[e,t,n]:(e=null,i=a)}else e=null,i=a;return null!==e&&(s=e[0],e=(o=e[2]).length?s.concat(o):s),null===e&&(i=r),e}function u(){var e,t,n,r,a,s,o;if(r=i,a=i,null!==(e=c())){for(t=[],n=W();null!==n;)t.push(n),n=W();null!==t&&null!==(n=u())?e=[e,t,n]:(e=null,i=a)}else e=null,i=a;return null!==e&&(s=e[0],o=e[2],e=s.concat(o)),null===e&&(i=r),null===e&&(r=i,null!==(e=c())&&(e=function(e,t){return t}(0,e)),null===e&&(i=r)),e}function c(){var e;return null===(e=p())&&null===(e=f())&&null===(e=g())&&null===(e=v())&&null===(e=b())&&null===(e=k())&&null===(e=_())&&null===(e=P())&&(e=M()),e}function h(){var t,n,r,a,o;if(a=i,o=i,77===e.charCodeAt(i)?(t="M",i++):(t=null,s('"M"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=d())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;if(null!==t&&(t=j(t[2],!1)),null===t&&(i=a),null===t){if(a=i,o=i,109===e.charCodeAt(i)?(t="m",i++):(t=null,s('"m"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=d())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;null!==t&&(t=function(e,t){return j(t,!0)}(0,t[2])),null===t&&(i=a)}return t}function d(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=R())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=m())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s].concat(o)),null===e&&(i=r),null===e&&(r=i,null!==(e=R())&&(e=function(e,t){return[t]}(0,e)),null===e&&(i=r)),e}function p(){var t,n;return n=i,90===e.charCodeAt(i)?(t="Z",i++):(t=null,s('"Z"')),null===t&&(122===e.charCodeAt(i)?(t="z",i++):(t=null,s('"z"'))),null!==t&&(t={cmd:"close"}),null===t&&(i=n),t}function f(){var t,n,r,a,o;if(a=i,o=i,76===e.charCodeAt(i)?(t="L",i++):(t=null,s('"L"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=m())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;if(null!==t&&(t=t[2].map((function(e){return{cmd:"lineTo",args:[e.x,e.y]}}))),null===t&&(i=a),null===t){if(a=i,o=i,108===e.charCodeAt(i)?(t="l",i++):(t=null,s('"l"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=m())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;null!==t&&(t=function(e,t){return t.map((function(e){return{cmd:"lineToRelative",args:[e.x,e.y]}}))}(0,t[2])),null===t&&(i=a)}return t}function m(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=R())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=m())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s].concat(o)),null===e&&(i=r),null===e&&(r=i,null!==(e=R())&&(e=function(e,t){return[t]}(0,e)),null===e&&(i=r)),e}function g(){var t,n,r,a,o;if(a=i,o=i,72===e.charCodeAt(i)?(t="H",i++):(t=null,s('"H"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=y())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;if(null!==t&&(t=t[2].map((function(e){return{cmd:"horizontalLineTo",args:[e]}}))),null===t&&(i=a),null===t){if(a=i,o=i,104===e.charCodeAt(i)?(t="h",i++):(t=null,s('"h"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=y())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;null!==t&&(t=function(e,t){return t.map((function(e){return{cmd:"horizontalLineToRelative",args:[e]}}))}(0,t[2])),null===t&&(i=a)}return t}function y(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=N())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=y())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s].concat(o)),null===e&&(i=r),null===e&&(r=i,null!==(e=N())&&(e=function(e,t){return[t]}(0,e)),null===e&&(i=r)),e}function v(){var t,n,r,a,o;if(a=i,o=i,86===e.charCodeAt(i)?(t="V",i++):(t=null,s('"V"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;if(null!==t&&(t=t[2].map((function(e){return{cmd:"verticalLineTo",args:[e]}}))),null===t&&(i=a),null===t){if(a=i,o=i,118===e.charCodeAt(i)?(t="v",i++):(t=null,s('"v"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=A())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;null!==t&&(t=function(e,t){return t.map((function(e){return{cmd:"verticalLineToRelative",args:[e]}}))}(0,t[2])),null===t&&(i=a)}return t}function A(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=N())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=A())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s].concat(o)),null===e&&(i=r),null===e&&(r=i,null!==(e=N())&&(e=function(e,t){return[t]}(0,e)),null===e&&(i=r)),e}function b(){var t,n,r,a,o;if(a=i,o=i,67===e.charCodeAt(i)?(t="C",i++):(t=null,s('"C"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=S())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;if(null!==t&&(t=t[2].map((function(e){return{cmd:"cubicCurveTo",args:e}}))),null===t&&(i=a),null===t){if(a=i,o=i,99===e.charCodeAt(i)?(t="c",i++):(t=null,s('"c"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=S())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;null!==t&&(t=function(e,t){return t.map((function(e){return{cmd:"cubicCurveToRelative",args:e}}))}(0,t[2])),null===t&&(i=a)}return t}function S(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=E())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=S())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s].concat(o)),null===e&&(i=r),null===e&&(r=i,null!==(e=E())&&(e=function(e,t){return[t]}(0,e)),null===e&&(i=r)),e}function E(){var e,t,n,r,a,s,o,l,u,c;return s=i,o=i,null!==(e=R())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=R())&&null!==(r=null!==(r=O())?r:"")&&null!==(a=R())?e=[e,t,n,r,a]:(e=null,i=o),null!==e&&(l=e[0],u=e[2],c=e[4],e=[l.x,l.y,u.x,u.y,c.x,c.y]),null===e&&(i=s),e}function k(){var t,n,r,a,o;if(a=i,o=i,83===e.charCodeAt(i)?(t="S",i++):(t=null,s('"S"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=V())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;if(null!==t&&(t=t[2].map((function(e){return{cmd:"smoothCubicCurveTo",args:e}}))),null===t&&(i=a),null===t){if(a=i,o=i,115===e.charCodeAt(i)?(t="s",i++):(t=null,s('"s"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=V())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;null!==t&&(t=function(e,t){return t.map((function(e){return{cmd:"smoothCubicCurveToRelative",args:e}}))}(0,t[2])),null===t&&(i=a)}return t}function V(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=w())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=V())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s].concat(o)),null===e&&(i=r),null===e&&(r=i,null!==(e=w())&&(e=function(e,t){return[t]}(0,e)),null===e&&(i=r)),e}function w(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=R())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=R())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s.x,s.y,o.x,o.y]),null===e&&(i=r),e}function _(){var t,n,r,a,o;if(a=i,o=i,81===e.charCodeAt(i)?(t="Q",i++):(t=null,s('"Q"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=C())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;if(null!==t&&(t=t[2].map((function(e){return{cmd:"quadraticCurveTo",args:e}}))),null===t&&(i=a),null===t){if(a=i,o=i,113===e.charCodeAt(i)?(t="q",i++):(t=null,s('"q"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=C())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;null!==t&&(t=function(e,t){return t.map((function(e){return{cmd:"quadraticCurveToRelative",args:e}}))}(0,t[2])),null===t&&(i=a)}return t}function C(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=x())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=C())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s].concat(o)),null===e&&(i=r),null===e&&(r=i,null!==(e=x())&&(e=function(e,t){return[t]}(0,e)),null===e&&(i=r)),e}function x(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=R())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=R())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s.x,s.y,o.x,o.y]),null===e&&(i=r),e}function P(){var t,n,r,a,o;if(a=i,o=i,84===e.charCodeAt(i)?(t="T",i++):(t=null,s('"T"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=T())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;if(null!==t&&(t=t[2].map((function(e){return{cmd:"smoothQuadraticCurveTo",args:[e.x,e.y]}}))),null===t&&(i=a),null===t){if(a=i,o=i,116===e.charCodeAt(i)?(t="t",i++):(t=null,s('"t"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=T())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;null!==t&&(t=function(e,t){return t.map((function(e){return{cmd:"smoothQuadraticCurveToRelative",args:[e.x,e.y]}}))}(0,t[2])),null===t&&(i=a)}return t}function T(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=R())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=T())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s].concat(o)),null===e&&(i=r),null===e&&(r=i,null!==(e=R())&&(e=function(e,t){return[t]}(0,e)),null===e&&(i=r)),e}function M(){var t,n,r,a,o;if(a=i,o=i,65===e.charCodeAt(i)?(t="A",i++):(t=null,s('"A"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=L())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;if(null!==t&&(t=t[2].map((function(e){return e[2]*=Math.PI/180,{cmd:"ellipticalArcTo",args:e}}))),null===t&&(i=a),null===t){if(a=i,o=i,97===e.charCodeAt(i)?(t="a",i++):(t=null,s('"a"')),null!==t){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n&&null!==(r=L())?t=[t,n,r]:(t=null,i=o)}else t=null,i=o;null!==t&&(t=function(e,t){return t.map((function(e){return e[2]*=Math.PI/180,{cmd:"ellipticalArcToRelative",args:e}}))}(0,t[2])),null===t&&(i=a)}return t}function L(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=I())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=L())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e=[s].concat(o)),null===e&&(i=r),null===e&&(r=i,null!==(e=I())&&(e=function(e,t){return[t]}(0,e)),null===e&&(i=r)),e}function I(){var e,t,n,r,a,s,o,l,u,c,h,d,p,f,m,g,y,v,A;return d=i,p=i,null!==(e=D())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=D())&&null!==(r=null!==(r=O())?r:"")&&null!==(a=N())&&null!==(s=O())&&null!==(o=q())&&null!==(l=null!==(l=O())?l:"")&&null!==(u=q())&&null!==(c=null!==(c=O())?c:"")&&null!==(h=R())?e=[e,t,n,r,a,s,o,l,u,c,h]:(e=null,i=p),null!==e&&(f=e[0],m=e[2],g=e[4],y=e[6],v=e[8],A=e[10],e=[f,m,g,y,v,A.x,A.y]),null===e&&(i=d),e}function R(){var e,t,n,r,a,s,o;return r=i,a=i,null!==(e=N())&&null!==(t=null!==(t=O())?t:"")&&null!==(n=N())?e=[e,t,n]:(e=null,i=a),null!==e&&(s=e[0],o=e[2],e={x:s,y:o}),null===e&&(i=r),e}function D(){var e,t;return t=i,null!==(e=G())&&(e=parseFloat(e)),null===e&&(i=t),null===e&&(t=i,null!==(e=z())&&(e=function(e,t){return Number(t)}(0,e)),null===e&&(i=t)),e}function N(){var e,t,n,r,a,s;return n=i,r=i,null!==(e=null!==(e=Y())?e:"")&&null!==(t=G())?e=[e,t]:(e=null,i=r),null!==e&&(a=e[0],s=e[1],e=parseFloat(a+s)),null===e&&(i=n),null===e&&(n=i,r=i,null!==(e=null!==(e=Y())?e:"")&&null!==(t=z())?e=[e,t]:(e=null,i=r),null!==e&&(e=function(e,t,n){return Number(t+n)}(0,e[0],e[1])),null===e&&(i=n)),e}function q(){var t,n;return n=i,48===e.charCodeAt(i)?(t="0",i++):(t=null,s('"0"')),null!==t&&(t=!1),null===t&&(i=n),null===t&&(n=i,49===e.charCodeAt(i)?(t="1",i++):(t=null,s('"1"')),null!==t&&(t=!0),null===t&&(i=n)),t}function O(){var e,t,n,r,a;if(a=i,null!==(t=W()))for(e=[];null!==t;)e.push(t),t=W();else e=null;if(null!==e)if(null!==(t=null!==(t=B())?t:"")){for(n=[],r=W();null!==r;)n.push(r),r=W();null!==n?e=[e,t,n]:(e=null,i=a)}else e=null,i=a;else e=null,i=a;if(null===e)if(a=i,null!==(e=B())){for(t=[],n=W();null!==n;)t.push(n),n=W();null!==t?e=[e,t]:(e=null,i=a)}else e=null,i=a;return e}function B(){var t;return 44===e.charCodeAt(i)?(t=",",i++):(t=null,s('","')),t}function G(){var e,t,n,r,a,s;return n=i,r=i,null!==(e=H())&&null!==(t=null!==(t=F())?t:"")?e=[e,t]:(e=null,i=r),null!==e&&(a=e[0],s=e[1],e=a+s),null===e&&(i=n),null===e&&(n=i,r=i,null!==(e=z())&&null!==(t=F())?e=[e,t]:(e=null,i=r),null!==e&&(e=function(e,t,n){return t+n}(0,e[0],e[1])),null===e&&(i=n)),e}function H(){var t,n,r,a,o,l,u;return a=i,o=i,null!==(t=null!==(t=z())?t:"")?(46===e.charCodeAt(i)?(n=".",i++):(n=null,s('"."')),null!==n&&null!==(r=z())?t=[t,n,r]:(t=null,i=o)):(t=null,i=o),null!==t&&(l=t[0],u=t[2],t=l+"."+u),null===t&&(i=a),null===t&&(a=i,o=i,null!==(t=z())?(46===e.charCodeAt(i)?(n=".",i++):(n=null,s('"."')),null!==n?t=[t,n]:(t=null,i=o)):(t=null,i=o),null!==t&&(t=function(e,t){return t}(0,t[0])),null===t&&(i=a)),t}function F(){var t,n,r,a,o,l,u,c;return a=i,o=i,101===e.charCodeAt(i)?(t="e",i++):(t=null,s('"e"')),null===t&&(69===e.charCodeAt(i)?(t="E",i++):(t=null,s('"E"'))),null!==t&&null!==(n=null!==(n=Y())?n:"")&&null!==(r=z())?t=[t,n,r]:(t=null,i=o),null!==t&&(l=t[0],u=t[1],c=t[2],t=l+u+c),null===t&&(i=a),t}function Y(){var t;return 43===e.charCodeAt(i)?(t="+",i++):(t=null,s('"+"')),null===t&&(45===e.charCodeAt(i)?(t="-",i++):(t=null,s('"-"'))),t}function z(){var e,t,n,r,a,s;return n=i,r=i,null!==(e=U())&&null!==(t=z())?e=[e,t]:(e=null,i=r),null!==e&&(a=e[0],s=e[1],e=a+s),null===e&&(i=n),null===e&&(e=U()),e}function U(){var t;return/^[0-9]/.test(e.charAt(i))?(t=e.charAt(i),i++):(t=null,s("[0-9]")),t}function W(){var t;return 32===e.charCodeAt(i)?(t=" ",i++):(t=null,s('" "')),null===t&&(9===e.charCodeAt(i)?(t="\t",i++):(t=null,s('"\\t"')),null===t&&(13===e.charCodeAt(i)?(t="\r",i++):(t=null,s('"\\r"')),null===t&&(10===e.charCodeAt(i)?(t="\n",i++):(t=null,s('"\\n"'))))),t}function j(e,t){var n=[{cmd:t?"moveToRelative":"moveTo",args:[e[0].x,e[0].y]}];if(e.length>1)for(var i=1;i<e.length;i++)n.push({cmd:t?"lineToRelative":"lineTo",args:[e[i].x,e[i].y]});return n}var X=n[t]();if(null===X||i!==e.length){var Q=Math.max(i,r),K=Q<e.length?e.charAt(Q):null,J=function(){for(var t=1,n=1,a=!1,s=0;s<Math.max(i,r);s++){var o=e.charAt(s);"\n"===o?(a||t++,n=1,a=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t++,n=1,a=!0):(n++,a=!1)}return{line:t,column:n}}();throw new this.SyntaxError(function(e){e.sort();for(var t=null,n=[],i=0;i<e.length;i++)e[i]!==t&&(n.push(e[i]),t=e[i]);return n}(a),K,Q,J.line,J.column)}return X},toSource:function(){return this._source},SyntaxError:function(e,t,n,i,r){this.name="SyntaxError",this.expected=e,this.found=t,this.message=function(e,t){var n;switch(e.length){case 0:n="end of input";break;case 1:n=e[0];break;default:n=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return"Expected "+n+" but "+(t?Yn(t):"end of input")+" found."}(e,t),this.offset=n,this.line=i,this.column=r}};zn.SyntaxError.prototype=Error.prototype,Rn.register("svgPath",zn);var Un=Rn.svgPath,Wn=new pn(0,0),jn=function(){function e(t,n,i,r){_classCallCheck(this,e),this.minX=t,this.minY=n,this.maxX=i,this.maxY=r}return _createClass(e,[{key:"getWidth",value:function(){return this.maxX-this.minX}},{key:"width",get:function(){return this.getWidth()}},{key:"getHeight",value:function(){return this.maxY-this.minY}},{key:"height",get:function(){return this.getHeight()}},{key:"getX",value:function(){return this.minX}},{key:"x",get:function(){return this.getX()}},{key:"getY",value:function(){return this.minY}},{key:"y",get:function(){return this.getY()}},{key:"getMinX",value:function(){return this.minX}},{key:"getMinY",value:function(){return this.minY}},{key:"getMaxX",value:function(){return this.maxX}},{key:"getMaxY",value:function(){return this.maxY}},{key:"getLeft",value:function(){return this.minX}},{key:"left",get:function(){return this.minX}},{key:"getTop",value:function(){return this.minY}},{key:"top",get:function(){return this.minY}},{key:"getRight",value:function(){return this.maxX}},{key:"right",get:function(){return this.maxX}},{key:"getBottom",value:function(){return this.maxY}},{key:"bottom",get:function(){return this.maxY}},{key:"getCenterX",value:function(){return(this.maxX+this.minX)/2}},{key:"centerX",get:function(){return this.getCenterX()}},{key:"getCenterY",value:function(){return(this.maxY+this.minY)/2}},{key:"centerY",get:function(){return this.getCenterY()}},{key:"getLeftTop",value:function(){return new pn(this.minX,this.minY)}},{key:"leftTop",get:function(){return this.getLeftTop()}},{key:"getCenterTop",value:function(){return new pn(this.getCenterX(),this.minY)}},{key:"centerTop",get:function(){return this.getCenterTop()}},{key:"getRightTop",value:function(){return new pn(this.maxX,this.minY)}},{key:"rightTop",get:function(){return this.getRightTop()}},{key:"getLeftCenter",value:function(){return new pn(this.minX,this.getCenterY())}},{key:"leftCenter",get:function(){return this.getLeftCenter()}},{key:"getCenter",value:function(){return new pn(this.getCenterX(),this.getCenterY())}},{key:"center",get:function(){return this.getCenter()}},{key:"getRightCenter",value:function(){return new pn(this.maxX,this.getCenterY())}},{key:"rightCenter",get:function(){return this.getRightCenter()}},{key:"getLeftBottom",value:function(){return new pn(this.minX,this.maxY)}},{key:"leftBottom",get:function(){return this.getLeftBottom()}},{key:"getCenterBottom",value:function(){return new pn(this.getCenterX(),this.maxY)}},{key:"centerBottom",get:function(){return this.getCenterBottom()}},{key:"getRightBottom",value:function(){return new pn(this.maxX,this.maxY)}},{key:"rightBottom",get:function(){return this.getRightBottom()}},{key:"isEmpty",value:function(){return this.getWidth()<0||this.getHeight()<0}},{key:"isFinite",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isFinite(this.minX)&&isFinite(this.minY)&&isFinite(this.maxX)&&isFinite(this.maxY)}))},{key:"hasNonzeroArea",value:function(){return this.getWidth()>0&&this.getHeight()>0}},{key:"isValid",value:function(){return!this.isEmpty()&&this.isFinite()}},{key:"closestPointTo",value:function(e){if(this.containsCoordinates(e.x,e.y))return e;var t=Math.max(Math.min(e.x,this.maxX),this.x),n=Math.max(Math.min(e.y,this.maxY),this.y);return new pn(t,n)}},{key:"containsCoordinates",value:function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}},{key:"containsPoint",value:function(e){return this.containsCoordinates(e.x,e.y)}},{key:"containsBounds",value:function(e){return this.minX<=e.minX&&this.maxX>=e.maxX&&this.minY<=e.minY&&this.maxY>=e.maxY}},{key:"intersectsBounds",value:function(e){var t=Math.max(this.minX,e.minX),n=Math.max(this.minY,e.minY),i=Math.min(this.maxX,e.maxX),r=Math.min(this.maxY,e.maxY);return i-t>=0&&r-n>=0}},{key:"minimumDistanceToPointSquared",value:function(e){var t,n=e.x<this.minX?this.minX:e.x>this.maxX?this.maxX:null,i=e.y<this.minY?this.minY:e.y>this.maxY?this.maxY:null;if(null===n&&null===i)return 0;if(null===n)return(t=i-e.y)*t;if(null===i)return(t=n-e.x)*t;var r=n-e.x,a=i-e.y;return r*r+a*a}},{key:"maximumDistanceToPointSquared",value:function(e){var t=e.x>this.getCenterX()?this.minX:this.maxX,n=e.y>this.getCenterY()?this.minY:this.maxY;return(t-=e.x)*t+(n-=e.y)*n}},{key:"toString",value:function(){return"[x:(".concat(this.minX,",").concat(this.maxX,"),y:(").concat(this.minY,",").concat(this.maxY,")]")}},{key:"equals",value:function(e){return this.minX===e.minX&&this.minY===e.minY&&this.maxX===e.maxX&&this.maxY===e.maxY}},{key:"equalsEpsilon",value:function(e,t){t=void 0!==t?t:0;var n=this.isFinite(),i=e.isFinite();return n&&i?Math.abs(this.minX-e.minX)<t&&Math.abs(this.minY-e.minY)<t&&Math.abs(this.maxX-e.maxX)<t&&Math.abs(this.maxY-e.maxY)<t:n===i&&(this===e||(isFinite(this.minX+e.minX)?Math.abs(this.minX-e.minX)<t:this.minX===e.minX)&&(isFinite(this.minY+e.minY)?Math.abs(this.minY-e.minY)<t:this.minY===e.minY)&&(isFinite(this.maxX+e.maxX)?Math.abs(this.maxX-e.maxX)<t:this.maxX===e.maxX)&&(isFinite(this.maxY+e.maxY)?Math.abs(this.maxY-e.maxY)<t:this.maxY===e.maxY))}},{key:"copy",value:function(e){return e?e.set(this):Xn(this.minX,this.minY,this.maxX,this.maxY)}},{key:"union",value:function(e){return Xn(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY))}},{key:"intersection",value:function(e){return Xn(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY))}},{key:"withCoordinates",value:function(e,t){return Xn(Math.min(this.minX,e),Math.min(this.minY,t),Math.max(this.maxX,e),Math.max(this.maxY,t))}},{key:"withPoint",value:function(e){return this.withCoordinates(e.x,e.y)}},{key:"withX",value:function(e){return this.copy().addX(e)}},{key:"withY",value:function(e){return this.copy().addY(e)}},{key:"withMinX",value:function(e){return Xn(e,this.minY,this.maxX,this.maxY)}},{key:"withMinY",value:function(e){return Xn(this.minX,e,this.maxX,this.maxY)}},{key:"withMaxX",value:function(e){return Xn(this.minX,this.minY,e,this.maxY)}},{key:"withMaxY",value:function(e){return Xn(this.minX,this.minY,this.maxX,e)}},{key:"roundedOut",value:function(){return Xn(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))}},{key:"roundedIn",value:function(){return Xn(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))}},{key:"transformed",value:function(e){return this.copy().transform(e)}},{key:"dilated",value:function(e){return this.dilatedXY(e,e)}},{key:"dilatedX",value:function(e){return Xn(this.minX-e,this.minY,this.maxX+e,this.maxY)}},{key:"dilatedY",value:function(e){return Xn(this.minX,this.minY-e,this.maxX,this.maxY+e)}},{key:"dilatedXY",value:function(e,t){return Xn(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)}},{key:"eroded",value:function(e){return this.dilated(-e)}},{key:"erodedX",value:function(e){return this.dilatedX(-e)}},{key:"erodedY",value:function(e){return this.dilatedY(-e)}},{key:"erodedXY",value:function(e,t){return this.dilatedXY(-e,-t)}},{key:"withOffsets",value:function(e,t,n,i){return Xn(this.minX-e,this.minY-t,this.maxX+n,this.maxY+i)}},{key:"shiftedX",value:function(e){return Xn(this.minX+e,this.minY,this.maxX+e,this.maxY)}},{key:"shiftedY",value:function(e){return Xn(this.minX,this.minY+e,this.maxX,this.maxY+e)}},{key:"shiftedXY",value:function(e,t){return Xn(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)}},{key:"shifted",value:function(e){return this.shiftedXY(e.x,e.y)}},{key:"blend",value:function(e,t){var n=1-t;return Xn(n*this.minX+t*e.minX,n*this.minY+t*e.minY,n*this.maxX+t*e.maxX,n*this.maxY+t*e.maxY)}},{key:"setMinMax",value:function(e,t,n,i){return this.minX=e,this.minY=t,this.maxX=n,this.maxY=i,this}},{key:"setMinX",value:function(e){return this.minX=e,this}},{key:"setMinY",value:function(e){return this.minY=e,this}},{key:"setMaxX",value:function(e){return this.maxX=e,this}},{key:"setMaxY",value:function(e){return this.maxY=e,this}},{key:"set",value:function(e){return this.setMinMax(e.minX,e.minY,e.maxX,e.maxY)}},{key:"includeBounds",value:function(e){return this.setMinMax(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY))}},{key:"constrainBounds",value:function(e){return this.setMinMax(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY))}},{key:"addCoordinates",value:function(e,t){return this.setMinMax(Math.min(this.minX,e),Math.min(this.minY,t),Math.max(this.maxX,e),Math.max(this.maxY,t))}},{key:"addPoint",value:function(e){return this.addCoordinates(e.x,e.y)}},{key:"addX",value:function(e){return this.minX=Math.min(e,this.minX),this.maxX=Math.max(e,this.maxX),this}},{key:"addY",value:function(e){return this.minY=Math.min(e,this.minY),this.maxY=Math.max(e,this.maxY),this}},{key:"roundOut",value:function(){return this.setMinMax(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))}},{key:"roundIn",value:function(){return this.setMinMax(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))}},{key:"transform",value:function(t){if(this.isEmpty())return this;if(t.isIdentity())return this;var n=this.minX,i=this.minY,r=this.maxX,a=this.maxY;return this.set(e.NOTHING),this.addPoint(t.multiplyVector2(Wn.setXY(n,i))),this.addPoint(t.multiplyVector2(Wn.setXY(n,a))),this.addPoint(t.multiplyVector2(Wn.setXY(r,i))),this.addPoint(t.multiplyVector2(Wn.setXY(r,a))),this}},{key:"dilate",value:function(e){return this.dilateXY(e,e)}},{key:"dilateX",value:function(e){return this.setMinMax(this.minX-e,this.minY,this.maxX+e,this.maxY)}},{key:"dilateY",value:function(e){return this.setMinMax(this.minX,this.minY-e,this.maxX,this.maxY+e)}},{key:"dilateXY",value:function(e,t){return this.setMinMax(this.minX-e,this.minY-t,this.maxX+e,this.maxY+t)}},{key:"erode",value:function(e){return this.dilate(-e)}},{key:"erodeX",value:function(e){return this.dilateX(-e)}},{key:"erodeY",value:function(e){return this.dilateY(-e)}},{key:"erodeXY",value:function(e,t){return this.dilateXY(-e,-t)}},{key:"offset",value:function(e,t,n,i){return Xn(this.minX-e,this.minY-t,this.maxX+n,this.maxY+i)}},{key:"shiftX",value:function(e){return this.setMinMax(this.minX+e,this.minY,this.maxX+e,this.maxY)}},{key:"shiftY",value:function(e){return this.setMinMax(this.minX,this.minY+e,this.maxX,this.maxY+e)}},{key:"shiftXY",value:function(e,t){return this.setMinMax(this.minX+e,this.minY+t,this.maxX+e,this.maxY+t)}},{key:"shift",value:function(e){return this.shiftXY(e.x,e.y)}},{key:"getXRange",value:function(){return new Tt(this.minX,this.maxX)}},{key:"setXRange",value:function(e){return this.setMinMax(e.min,this.minY,e.max,this.maxY)}},{key:"xRange",get:function(){return this.getXRange()},set:function(e){this.setXRange(e)}},{key:"getYRange",value:function(){return new Tt(this.minY,this.maxY)}},{key:"setYRange",value:function(e){return this.setMinMax(this.minX,e.min,this.maxX,e.max)}},{key:"yRange",get:function(){return this.getYRange()},set:function(e){this.setYRange(e)}},{key:"getClosestPoint",value:function(e,t,n){return n?n.setXY(e,t):n=new pn(e,t),n.x<this.minX&&(n.x=this.minX),n.x>this.maxX&&(n.x=this.maxX),n.y<this.minY&&(n.y=this.minY),n.y>this.maxY&&(n.y=this.maxY),n}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}],[{key:"rect",value:function(e,t,n,i){return Xn(e,t,e+n,t+i)}},{key:"oriented",value:function(t,n,i,r,a){return t===In.HORIZONTAL?new e(n,i,r,a):new e(i,n,a,r)}},{key:"point",value:function(e,t){if(e instanceof pn){var n=e;return Xn(n.x,n.y,n.x,n.y)}return Xn(e,t,e,t)}}]),e}();_defineProperty(jn,"pool",new rn(jn,{initialize:jn.prototype.setMinMax,defaultArguments:[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]})),xt.register("Bounds2",jn);var Xn=jn.pool.create.bind(jn.pool);xt.register("b2",Xn),jn.prototype.isBounds=!0,jn.prototype.dimension=2,jn.NOTHING=new jn(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),jn.EVERYTHING=new jn(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),jn.Bounds2IO=new U("Bounds2IO",{valueType:jn,documentation:"a 2-dimensional bounds rectangle",toStateObject:function(e){return{minX:e.minX,minY:e.minY,maxX:e.maxX,maxY:e.maxY}},fromStateObject:function(e){return new jn(_t.fromStateObject(e.minX),_t.fromStateObject(e.minY),_t.fromStateObject(e.maxX),_t.fromStateObject(e.maxY))},stateSchema:{minX:_t,maxX:_t,minY:_t,maxY:_t}});var Qn=function(){function e(){_classCallCheck(this,e),this.invalidationEmitter=new d}return _createClass(e,[{key:"areStrokedBoundsDilated",value:function(){return Math.abs(this.startTangent.x*this.startTangent.y)<1e-7&&Math.abs(this.endTangent.x*this.endTangent.y)<1e-7}},{key:"getBoundsWithTransform",value:function(e){return this.transformed(e).getBounds()}},{key:"slice",value:function(e,t){var n=this;return t<1&&(n=n.subdivided(t)[0]),e>0&&(n=n.subdivided(En.linear(0,t,0,1,e))[1]),n}},{key:"subdivisions",value:function(e){for(var t=this,n=[],i=0;i<e.length;i++){var r=e[i],a=t.subdivided(r);n.push(a[0]),t=a[1];for(var s=i+1;s<e.length;s++)e[s]=En.linear(r,1,0,1,e[s])}return n.push(t),n}},{key:"subdividedIntoMonotone",value:function(){return this.subdivisions(this.getInteriorExtremaTs())}},{key:"isSufficientlyFlat",value:function(t,n){var i=this.start,r=this.positionAt(.5),a=this.end;return e.isSufficientlyFlat(t,n,i,r,a)}},{key:"getArcLength",value:function(e,t,n){if(e=void 0===e?1e-10:e,t=void 0===t?1e-8:t,(n=void 0===n?15:n)<=0||this.isSufficientlyFlat(e,t))return this.start.distance(this.end);var i=this.subdivided(.5);return i[0].getArcLength(e,t,n-1)+i[1].getArcLength(e,t,n-1)}},{key:"getDashValues",value:function(t,n,i,r){var a=this,s=[],o=0,l=_.sum(t);(n%=l)<0&&(n+=l);var u=0,c=0,h=!0;function d(){u=(u+1)%t.length,h=!h}for(;n>0;)n>=t[u]?(n-=t[u],d()):(c=n,n=0);var p=h;return function n(l,h,p,f,m){var g=(l+h)/2,y=a.positionAt(g);if(m>14||e.isSufficientlyFlat(i,r,p,y,f)){var v=p.distance(y)+y.distance(f);o+=v;for(var A=v;c+A>=t[u];){var b=En.linear(0,v,l,h,v-A+t[u]-c);s.push(b),A-=t[u]-c,c=0,d()}c+=A}else n(l,g,p,y,m+1),n(g,h,y,f,m+1)}(0,1,this.start,this.end,0),{values:s,arcLength:o,initiallyInside:p}}},{key:"toPiecewiseLinearSegments",value:function(e,t,n,i,r,a){t=void 0===t?e.minLevels:t,n=void 0===n?e.maxLevels:n,i=i||[];var s=e.pointMap||_.identity;r=r||s(this.start),a=a||s(this.end);var o=s(this.positionAt(.5)),l=0===n;if(!l&&t<=0&&(l=this.isSufficientlyFlat(null===e.distanceEpsilon||void 0===e.distanceEpsilon?Number.POSITIVE_INFINITY:e.distanceEpsilon,null===e.curveEpsilon||void 0===e.curveEpsilon?Number.POSITIVE_INFINITY:e.curveEpsilon)),l)i.push(new $n(r,a));else{var u=this.subdivided(.5);u[0].toPiecewiseLinearSegments(e,t-1,n-1,i,r,o),u[1].toPiecewiseLinearSegments(e,t-1,n-1,i,o,a)}return i}},{key:"toPiecewiseLinearOrArcSegments",value:function(e){var t=S()({minLevels:2,maxLevels:7,curvatureThreshold:.02,errorThreshold:10,errorPoints:[.25,.75]},e),n=[];return this.toPiecewiseLinearOrArcRecursion(t,t.minLevels,t.maxLevels,n,0,1,this.positionAt(0),this.positionAt(1),this.curvatureAt(0),this.curvatureAt(1)),n}},{key:"toPiecewiseLinearOrArcRecursion",value:function(e,t,n,i,r,a,s,o,l,u){var c=(r+a)/2,h=this.positionAt(c),d=this.curvatureAt(c);if(n<=0||t<=0&&Math.abs(l-d)+Math.abs(d-u)<2*e.curvatureThreshold){var p=ki.createFromPoints(s,h,o),f=!1;if(p instanceof ki)for(var m=p.radius*p.radius,g=0;g<e.errorPoints.length;g++){var y=e.errorPoints[g],v=this.positionAt(r*(1-y)+a*y);if(Math.abs(v.distanceSquared(p.center)-m)>e.errorThreshold){f=!0;break}}if(!f)return void i.push(p)}this.toPiecewiseLinearOrArcRecursion(e,t-1,n-1,i,r,c,s,h,l,d),this.toPiecewiseLinearOrArcRecursion(e,t-1,n-1,i,c,a,h,o,d,u)}},{key:"toShape",value:function(){return new Ni([new Mi([this])])}}],[{key:"closestToPoint",value:function(e,t,n){var i=n*n,r=[],a=[],s=Number.POSITIVE_INFINITY,o=!1;for(_.each(e,(function(e){if(e instanceof $n){var n=e.explicitClosestToPoint(t);_.each(n,(function(e){e.distanceSquared<s?(a=[e],s=e.distanceSquared):e.distanceSquared===s&&a.push(e)}))}else for(var i=[0].concat(e.getInteriorExtremaTs()).concat([1]),o=0;o<i.length-1;o++){var l=i[o],u=i[o+1],c=e.positionAt(l),h=e.positionAt(u),d=jn.point(c).addPoint(h),p=d.minimumDistanceToPointSquared(t);if(p<=s){var f=d.maximumDistanceToPointSquared(t);f<s&&(s=f,a=[]),r.push({ta:l,tb:u,pa:c,pb:h,segment:e,bounds:d,min:p,max:f})}}}));r.length&&!o;){var l=r;r=[],o=!0;var u,c=_createForOfIteratorHelper(l);try{for(c.s();!(u=c.n()).done;){var h=u.value;if(!(h.min>s)){o&&h.pa.distanceSquared(h.pb)>i&&(o=!1);var d=(h.ta+h.tb)/2,p=h.segment.positionAt(d),f=jn.point(h.pa).addPoint(p),m=jn.point(h.pb).addPoint(p),g=f.minimumDistanceToPointSquared(t),y=m.minimumDistanceToPointSquared(t);if(g<=s){var v=f.maximumDistanceToPointSquared(t);v<s&&(s=v,a=[]),r.push({ta:h.ta,tb:d,pa:h.pa,pb:p,segment:h.segment,bounds:f,min:g,max:v})}if(y<=s){var A=m.maximumDistanceToPointSquared(t);A<s&&(s=A,a=[]),r.push({ta:d,tb:h.tb,pa:p,pb:h.pb,segment:h.segment,bounds:m,min:y,max:A})}}}}catch(b){c.e(b)}finally{c.f()}}return _.each(r,(function(e){var n=(e.ta+e.tb)/2,i=e.segment.positionAt(n);a.push({segment:e.segment,t:n,closestPoint:i,distanceSquared:t.distanceSquared(i)})})),a}},{key:"polynomialGetOverlapCubic",value:function(t,n,i,r,a,s,o,l){if(0===l)return e.polynomialGetOverlapQuadratic(t,n,i,a,s,o);var u=Math.sign(r/l)*Math.pow(Math.abs(r/l),1/3);return 0===u?null:{a:u,b:(i-u*u*o)/(3*u*u*l)}}},{key:"polynomialGetOverlapQuadratic",value:function(t,n,i,r,a,s){if(0===s)return e.polynomialGetOverlapLinear(t,n,r,a);if(i/s<0)return null;var o=Math.sqrt(i/s);return 0===o?null:{a:o,b:(n-o*a)/(2*o*s)}}},{key:"polynomialGetOverlapLinear",value:function(e,t,n,i){if(0===i)return e===n||null;var r=t/i;return 0===r?null:{a:r,b:(e-n)/i}}},{key:"intersect",value:function(e,t){return $n&&e instanceof $n&&t instanceof $n?$n.intersect(e,t):$n&&e instanceof $n?$n.intersectOther(e,t):$n&&t instanceof $n?$n.intersectOther(t,e).map(Kn):ki&&e instanceof ki&&t instanceof ki?ki.intersect(e,t):xi&&e instanceof xi&&t instanceof xi?xi.intersect(e,t):or.intersect(e,t)}},{key:"deserialize",value:function(e){return Rn[e.type].deserialize(e)}},{key:"isSufficientlyFlat",value:function(e,t,n,i,r){return!(En.distToSegmentSquared(i,n,r)/n.distanceSquared(r)>t)&&!(En.distToSegmentSquared(i,n,r)>e)}}]),e}();function Kn(e){return e.getSwapped()}Rn.register("Segment",Qn);var Jn=function(){function e(t,n){_classCallCheck(this,e),this.position=t,this.direction=n}return _createClass(e,[{key:"shifted",value:function(t){return new e(this.pointAtDistance(t),this.direction)}},{key:"pointAtDistance",value:function(e){return this.position.plus(this.direction.timesScalar(e))}},{key:"toString",value:function(){return"".concat(this.position.toString()," => ").concat(this.direction.toString())}}]),e}();xt.register("Ray2",Jn);var Zn=new pn(0,0),$n=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this))._start=e,r._end=i,r.invalidate(),r}return _createClass(n,[{key:"setStart",value:function(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}},{key:"start",get:function(){return this.getStart()},set:function(e){this.setStart(e)}},{key:"getStart",value:function(){return this._start}},{key:"setEnd",value:function(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}},{key:"end",get:function(){return this.getEnd()},set:function(e){this.setEnd(e)}},{key:"getEnd",value:function(){return this._end}},{key:"positionAt",value:function(e){return this._start.plus(this._end.minus(this._start).times(e))}},{key:"tangentAt",value:function(e){return this.getStartTangent()}},{key:"curvatureAt",value:function(e){return 0}},{key:"subdivided",value:function(e){if(0===e||1===e)return[this];var t=this.positionAt(e);return[new n(this._start,t),new n(t,this._end)]}},{key:"invalidate",value:function(){this._tangent=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}},{key:"getStartTangent",value:function(){return null===this._tangent&&(this._tangent=this._end.minus(this._start).normalized()),this._tangent}},{key:"startTangent",get:function(){return this.getStartTangent()}},{key:"getEndTangent",value:function(){return this.getStartTangent()}},{key:"endTangent",get:function(){return this.getEndTangent()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=jn.NOTHING.copy().addPoint(this._start).addPoint(this._end)),this._bounds}},{key:"bounds",get:function(){return this.getBounds()}},{key:"getBoundsWithTransform",value:function(e){var t=jn.NOTHING.copy();return t.addPoint(e.multiplyVector2(Zn.set(this._start))),t.addPoint(e.multiplyVector2(Zn.set(this._end))),t}},{key:"getNondegenerateSegments",value:function(){return this._start.equals(this._end)?[]:[this]}},{key:"getSVGPathFragment",value:function(){return this._svgPathFragment||(this._svgPathFragment="L ".concat(Fn(this._end.x)," ").concat(Fn(this._end.y))),this._svgPathFragment}},{key:"strokeLeft",value:function(e){var t=this.getEndTangent().perpendicular.negated().times(e/2);return[new n(this._start.plus(t),this._end.plus(t))]}},{key:"strokeRight",value:function(e){var t=this.getStartTangent().perpendicular.times(e/2);return[new n(this._end.plus(t),this._start.plus(t))]}},{key:"getInteriorExtremaTs",value:function(){return[]}},{key:"intersection",value:function(e){var t=[],n=this._start,i=this._end.minus(n);if(0===i.magnitudeSquared)return t;var r=e.direction.y*i.x-e.direction.x*i.y;if(0===r)return t;var a=(e.direction.x*(n.y-e.position.y)-e.direction.y*(n.x-e.position.x))/r;if(a<0||a>=1)return t;var s=(i.x*(n.y-e.position.y)-i.y*(n.x-e.position.x))/r;if(s<1e-8)return t;var o=i.perpendicular,l=n.plus(i.times(a)),u=(o.dot(e.direction)>0?o.negated():o).normalized(),c=e.direction.perpendicular.dot(i)<0?1:-1;return t.push(new Bn(s,l,u,c,a)),t}},{key:"windingIntersection",value:function(e){var t=this.intersection(e);return t.length?t[0].wind:0}},{key:"writeToContext",value:function(e){e.lineTo(this._end.x,this._end.y)}},{key:"transformed",value:function(e){return new n(e.timesVector2(this._start),e.timesVector2(this._end))}},{key:"explicitClosestToPoint",value:function(e){var t=this._end.minus(this._start),n=e.minus(this._start).dot(t)/t.magnitudeSquared;n=En.clamp(n,0,1);var i=this.positionAt(n);return[{segment:this,t:n,closestPoint:i,distanceSquared:e.distanceSquared(i)}]}},{key:"getSignedAreaFragment",value:function(){return.5*(this._start.x*this._end.y-this._start.y*this._end.x)}},{key:"reparameterized",value:function(e,t){return new n(this.positionAt(t),this.positionAt(e+t))}},{key:"reversed",value:function(){return new n(this._end,this._start)}},{key:"polarToCartesian",value:function(e){return this._start.x===this._end.x?[new n(pn.createPolar(this._start.y,this._start.x),pn.createPolar(this._end.y,this._end.x))]:this._start.y===this._end.y?[new ki(pn.ZERO,this._start.y,this._start.x,this._end.x,this._start.x>this._end.x)]:this.toPiecewiseLinearSegments(e)}},{key:"getArcLength",value:function(){return this.start.distance(this.end)}},{key:"toPiecewiseLinearOrArcSegments",value:function(){return[this]}},{key:"serialize",value:function(){return{type:"Line",startX:this._start.x,startY:this._start.y,endX:this._end.x,endY:this._end.y}}},{key:"getOverlaps",value:function(e){return e instanceof n?n.getOverlaps(this,e):null}}],[{key:"deserialize",value:function(e){return new n(new pn(e.startX,e.startY),new pn(e.endX,e.endY))}},{key:"getOverlaps",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,r=[],a=e._start.x,s=-1*e._start.x+e._end.x,o=e._start.y,l=-1*e._start.y+e._end.y,u=t._start.x,c=-1*t._start.x+t._end.x,h=t._start.y,d=-1*t._start.y+t._end.y,p=Math.abs(Math.max(e._start.x,e._end.x,t._start.x,t._end.x)-Math.min(e._start.x,e._end.x,t._start.x,t._end.x)),f=Math.abs(Math.max(e._start.y,e._end.y,t._start.y,t._end.y)-Math.min(e._start.y,e._end.y,t._start.y,t._end.y)),m=Qn.polynomialGetOverlapLinear(a,s,u,c),g=Qn.polynomialGetOverlapLinear(o,l,h,d);if(null===(n=p>f?null===m||!0===m?g:m:null===g||!0===g?m:g)||!0===n)return r;var y=n.a,v=n.b,A=u+v*c-a,b=y*c-s,S=h+v*d-o,E=y*d-l;if(Math.abs(A)>i||Math.abs(b+A)>i||Math.abs(S)>i||Math.abs(E+S)>i)return r;var k=v,V=y+v;return k>1&&V>1||k<0&&V<0?r:[new On(y,v)]}},{key:"intersect",value:function(e,t){var n=En.lineSegmentIntersection(e.start.x,e.start.y,e.end.x,e.end.y,t.start.x,t.start.y,t.end.x,t.end.y);if(null!==n){var i=e.explicitClosestToPoint(n)[0].t,r=t.explicitClosestToPoint(n)[0].t;return[new Gn(n,i,r)]}return[]}},{key:"intersectOther",value:function(e,t){for(var n=e.end.minus(e.start),i=n.magnitude,r=new Jn(e.start,n.normalize()),a=t.intersection(r),s=[],o=0;o<a.length;o++){var l=a[o],u=l.distance/i;u>1e-8&&u<1-1e-8&&s.push(new Gn(l.point,u,l.t))}return s}}]),n}(Qn);Rn.register("Line",$n);var ei=window.Float32Array||Array,ti=function(){function e(t,n,i,r,a,s,o,l,u,c,h,d,p,f,m,g,y){_classCallCheck(this,e),this.entries=new ei(16),this.type=ni.OTHER,this.rowMajor(void 0!==t?t:1,void 0!==n?n:0,void 0!==i?i:0,void 0!==r?r:0,void 0!==a?a:0,void 0!==s?s:1,void 0!==o?o:0,void 0!==l?l:0,void 0!==u?u:0,void 0!==c?c:0,void 0!==h?h:1,void 0!==d?d:0,void 0!==p?p:0,void 0!==f?f:0,void 0!==m?m:0,void 0!==g?g:1,y)}return _createClass(e,[{key:"rowMajor",value:function(e,t,n,i,r,a,s,o,l,u,c,h,d,p,f,m,g){return this.entries[0]=e,this.entries[1]=r,this.entries[2]=l,this.entries[3]=d,this.entries[4]=t,this.entries[5]=a,this.entries[6]=u,this.entries[7]=p,this.entries[8]=n,this.entries[9]=s,this.entries[10]=c,this.entries[11]=f,this.entries[12]=i,this.entries[13]=o,this.entries[14]=h,this.entries[15]=m,this.type=void 0===g?0===d&&0===p&&0===f&&1===m?ni.AFFINE:ni.OTHER:g,this}},{key:"columnMajor",value:function(e,t,n,i,r,a,s,o,l,u,c,h,d,p,f,m,g){return this.rowMajor(e,r,l,d,t,a,u,p,n,s,c,f,i,o,h,m,g)}},{key:"set",value:function(e){return this.rowMajor(e.m00(),e.m01(),e.m02(),e.m03(),e.m10(),e.m11(),e.m12(),e.m13(),e.m20(),e.m21(),e.m22(),e.m23(),e.m30(),e.m31(),e.m32(),e.m33(),e.type)}},{key:"m00",value:function(){return this.entries[0]}},{key:"m01",value:function(){return this.entries[4]}},{key:"m02",value:function(){return this.entries[8]}},{key:"m03",value:function(){return this.entries[12]}},{key:"m10",value:function(){return this.entries[1]}},{key:"m11",value:function(){return this.entries[5]}},{key:"m12",value:function(){return this.entries[9]}},{key:"m13",value:function(){return this.entries[13]}},{key:"m20",value:function(){return this.entries[2]}},{key:"m21",value:function(){return this.entries[6]}},{key:"m22",value:function(){return this.entries[10]}},{key:"m23",value:function(){return this.entries[14]}},{key:"m30",value:function(){return this.entries[3]}},{key:"m31",value:function(){return this.entries[7]}},{key:"m32",value:function(){return this.entries[11]}},{key:"m33",value:function(){return this.entries[15]}},{key:"isFinite",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m03())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m13())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())&&isFinite(this.m23())&&isFinite(this.m30())&&isFinite(this.m31())&&isFinite(this.m32())&&isFinite(this.m33())}))},{key:"getTranslation",value:function(){return new un(this.m03(),this.m13(),this.m23())}},{key:"translation",get:function(){return this.getTranslation()}},{key:"getScaleVector",value:function(){var e=this.m00()+this.m03(),t=this.m10()+this.m13(),n=this.m20()+this.m23(),i=this.m30()+this.m33(),r=this.m01()+this.m03(),a=this.m11()+this.m13(),s=this.m21()+this.m23(),o=this.m31()+this.m33(),l=this.m02()+this.m03(),u=this.m12()+this.m13(),c=this.m22()+this.m23(),h=this.m32()+this.m33();return new un(Math.sqrt(e*e+t*t+n*n+i*i),Math.sqrt(r*r+a*a+s*s+o*o),Math.sqrt(l*l+u*u+c*c+h*h))}},{key:"scaleVector",get:function(){return this.getScaleVector()}},{key:"getCSSTransform",value:function(){return"matrix3d(".concat(this.entries[0].toFixed(20),",").concat(this.entries[1].toFixed(20),",").concat(this.entries[2].toFixed(20),",").concat(this.entries[3].toFixed(20),",").concat(this.entries[4].toFixed(20),",").concat(this.entries[5].toFixed(20),",").concat(this.entries[6].toFixed(20),",").concat(this.entries[7].toFixed(20),",").concat(this.entries[8].toFixed(20),",").concat(this.entries[9].toFixed(20),",").concat(this.entries[10].toFixed(20),",").concat(this.entries[11].toFixed(20),",").concat(this.entries[12].toFixed(20),",").concat(this.entries[13].toFixed(20),",").concat(this.entries[14].toFixed(20),",").concat(this.entries[15].toFixed(20),")")}},{key:"cssTransform",get:function(){return this.getCSSTransform()}},{key:"equals",value:function(e){return this.m00()===e.m00()&&this.m01()===e.m01()&&this.m02()===e.m02()&&this.m03()===e.m03()&&this.m10()===e.m10()&&this.m11()===e.m11()&&this.m12()===e.m12()&&this.m13()===e.m13()&&this.m20()===e.m20()&&this.m21()===e.m21()&&this.m22()===e.m22()&&this.m23()===e.m23()&&this.m30()===e.m30()&&this.m31()===e.m31()&&this.m32()===e.m32()&&this.m33()===e.m33()}},{key:"equalsEpsilon",value:function(e,t){return Math.abs(this.m00()-e.m00())<t&&Math.abs(this.m01()-e.m01())<t&&Math.abs(this.m02()-e.m02())<t&&Math.abs(this.m03()-e.m03())<t&&Math.abs(this.m10()-e.m10())<t&&Math.abs(this.m11()-e.m11())<t&&Math.abs(this.m12()-e.m12())<t&&Math.abs(this.m13()-e.m13())<t&&Math.abs(this.m20()-e.m20())<t&&Math.abs(this.m21()-e.m21())<t&&Math.abs(this.m22()-e.m22())<t&&Math.abs(this.m23()-e.m23())<t&&Math.abs(this.m30()-e.m30())<t&&Math.abs(this.m31()-e.m31())<t&&Math.abs(this.m32()-e.m32())<t&&Math.abs(this.m33()-e.m33())<t}},{key:"copy",value:function(){return new e(this.m00(),this.m01(),this.m02(),this.m03(),this.m10(),this.m11(),this.m12(),this.m13(),this.m20(),this.m21(),this.m22(),this.m23(),this.m30(),this.m31(),this.m32(),this.m33(),this.type)}},{key:"plus",value:function(t){return new e(this.m00()+t.m00(),this.m01()+t.m01(),this.m02()+t.m02(),this.m03()+t.m03(),this.m10()+t.m10(),this.m11()+t.m11(),this.m12()+t.m12(),this.m13()+t.m13(),this.m20()+t.m20(),this.m21()+t.m21(),this.m22()+t.m22(),this.m23()+t.m23(),this.m30()+t.m30(),this.m31()+t.m31(),this.m32()+t.m32(),this.m33()+t.m33())}},{key:"minus",value:function(t){return new e(this.m00()-t.m00(),this.m01()-t.m01(),this.m02()-t.m02(),this.m03()-t.m03(),this.m10()-t.m10(),this.m11()-t.m11(),this.m12()-t.m12(),this.m13()-t.m13(),this.m20()-t.m20(),this.m21()-t.m21(),this.m22()-t.m22(),this.m23()-t.m23(),this.m30()-t.m30(),this.m31()-t.m31(),this.m32()-t.m32(),this.m33()-t.m33())}},{key:"transposed",value:function(){return new e(this.m00(),this.m10(),this.m20(),this.m30(),this.m01(),this.m11(),this.m21(),this.m31(),this.m02(),this.m12(),this.m22(),this.m32(),this.m03(),this.m13(),this.m23(),this.m33())}},{key:"negated",value:function(){return new e(-this.m00(),-this.m01(),-this.m02(),-this.m03(),-this.m10(),-this.m11(),-this.m12(),-this.m13(),-this.m20(),-this.m21(),-this.m22(),-this.m23(),-this.m30(),-this.m31(),-this.m32(),-this.m33())}},{key:"inverted",value:function(){var t;switch(this.type){case ni.IDENTITY:return this;case ni.TRANSLATION_3D:return new e(1,0,0,-this.m03(),0,1,0,-this.m13(),0,0,1,-this.m23(),0,0,0,1,ni.TRANSLATION_3D);case ni.SCALING:return new e(1/this.m00(),0,0,0,0,1/this.m11(),0,0,0,0,1/this.m22(),0,0,0,0,1/this.m33(),ni.SCALING);case ni.AFFINE:case ni.OTHER:if(0!==(t=this.getDeterminant()))return new e((-this.m31()*this.m22()*this.m13()+this.m21()*this.m32()*this.m13()+this.m31()*this.m12()*this.m23()-this.m11()*this.m32()*this.m23()-this.m21()*this.m12()*this.m33()+this.m11()*this.m22()*this.m33())/t,(this.m31()*this.m22()*this.m03()-this.m21()*this.m32()*this.m03()-this.m31()*this.m02()*this.m23()+this.m01()*this.m32()*this.m23()+this.m21()*this.m02()*this.m33()-this.m01()*this.m22()*this.m33())/t,(-this.m31()*this.m12()*this.m03()+this.m11()*this.m32()*this.m03()+this.m31()*this.m02()*this.m13()-this.m01()*this.m32()*this.m13()-this.m11()*this.m02()*this.m33()+this.m01()*this.m12()*this.m33())/t,(this.m21()*this.m12()*this.m03()-this.m11()*this.m22()*this.m03()-this.m21()*this.m02()*this.m13()+this.m01()*this.m22()*this.m13()+this.m11()*this.m02()*this.m23()-this.m01()*this.m12()*this.m23())/t,(this.m30()*this.m22()*this.m13()-this.m20()*this.m32()*this.m13()-this.m30()*this.m12()*this.m23()+this.m10()*this.m32()*this.m23()+this.m20()*this.m12()*this.m33()-this.m10()*this.m22()*this.m33())/t,(-this.m30()*this.m22()*this.m03()+this.m20()*this.m32()*this.m03()+this.m30()*this.m02()*this.m23()-this.m00()*this.m32()*this.m23()-this.m20()*this.m02()*this.m33()+this.m00()*this.m22()*this.m33())/t,(this.m30()*this.m12()*this.m03()-this.m10()*this.m32()*this.m03()-this.m30()*this.m02()*this.m13()+this.m00()*this.m32()*this.m13()+this.m10()*this.m02()*this.m33()-this.m00()*this.m12()*this.m33())/t,(-this.m20()*this.m12()*this.m03()+this.m10()*this.m22()*this.m03()+this.m20()*this.m02()*this.m13()-this.m00()*this.m22()*this.m13()-this.m10()*this.m02()*this.m23()+this.m00()*this.m12()*this.m23())/t,(-this.m30()*this.m21()*this.m13()+this.m20()*this.m31()*this.m13()+this.m30()*this.m11()*this.m23()-this.m10()*this.m31()*this.m23()-this.m20()*this.m11()*this.m33()+this.m10()*this.m21()*this.m33())/t,(this.m30()*this.m21()*this.m03()-this.m20()*this.m31()*this.m03()-this.m30()*this.m01()*this.m23()+this.m00()*this.m31()*this.m23()+this.m20()*this.m01()*this.m33()-this.m00()*this.m21()*this.m33())/t,(-this.m30()*this.m11()*this.m03()+this.m10()*this.m31()*this.m03()+this.m30()*this.m01()*this.m13()-this.m00()*this.m31()*this.m13()-this.m10()*this.m01()*this.m33()+this.m00()*this.m11()*this.m33())/t,(this.m20()*this.m11()*this.m03()-this.m10()*this.m21()*this.m03()-this.m20()*this.m01()*this.m13()+this.m00()*this.m21()*this.m13()+this.m10()*this.m01()*this.m23()-this.m00()*this.m11()*this.m23())/t,(this.m30()*this.m21()*this.m12()-this.m20()*this.m31()*this.m12()-this.m30()*this.m11()*this.m22()+this.m10()*this.m31()*this.m22()+this.m20()*this.m11()*this.m32()-this.m10()*this.m21()*this.m32())/t,(-this.m30()*this.m21()*this.m02()+this.m20()*this.m31()*this.m02()+this.m30()*this.m01()*this.m22()-this.m00()*this.m31()*this.m22()-this.m20()*this.m01()*this.m32()+this.m00()*this.m21()*this.m32())/t,(this.m30()*this.m11()*this.m02()-this.m10()*this.m31()*this.m02()-this.m30()*this.m01()*this.m12()+this.m00()*this.m31()*this.m12()+this.m10()*this.m01()*this.m32()-this.m00()*this.m11()*this.m32())/t,(-this.m20()*this.m11()*this.m02()+this.m10()*this.m21()*this.m02()+this.m20()*this.m01()*this.m12()-this.m00()*this.m21()*this.m12()-this.m10()*this.m01()*this.m22()+this.m00()*this.m11()*this.m22())/t);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix4.inverted with unknown type: ".concat(this.type))}}},{key:"timesMatrix",value:function(t){if(this.type===ni.IDENTITY||t.type===ni.IDENTITY)return this.type===ni.IDENTITY?t:this;if(this.type===t.type){if(this.type===ni.TRANSLATION_3D)return new e(1,0,0,this.m03()+t.m02(),0,1,0,this.m13()+t.m12(),0,0,1,this.m23()+t.m23(),0,0,0,1,ni.TRANSLATION_3D);if(this.type===ni.SCALING)return new e(this.m00()*t.m00(),0,0,0,0,this.m11()*t.m11(),0,0,0,0,this.m22()*t.m22(),0,0,0,0,1,ni.SCALING)}return this.type!==ni.OTHER&&t.type!==ni.OTHER?new e(this.m00()*t.m00()+this.m01()*t.m10()+this.m02()*t.m20(),this.m00()*t.m01()+this.m01()*t.m11()+this.m02()*t.m21(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02()*t.m22(),this.m00()*t.m03()+this.m01()*t.m13()+this.m02()*t.m23()+this.m03(),this.m10()*t.m00()+this.m11()*t.m10()+this.m12()*t.m20(),this.m10()*t.m01()+this.m11()*t.m11()+this.m12()*t.m21(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12()*t.m22(),this.m10()*t.m03()+this.m11()*t.m13()+this.m12()*t.m23()+this.m13(),this.m20()*t.m00()+this.m21()*t.m10()+this.m22()*t.m20(),this.m20()*t.m01()+this.m21()*t.m11()+this.m22()*t.m21(),this.m20()*t.m02()+this.m21()*t.m12()+this.m22()*t.m22(),this.m20()*t.m03()+this.m21()*t.m13()+this.m22()*t.m23()+this.m23(),0,0,0,1,ni.AFFINE):new e(this.m00()*t.m00()+this.m01()*t.m10()+this.m02()*t.m20()+this.m03()*t.m30(),this.m00()*t.m01()+this.m01()*t.m11()+this.m02()*t.m21()+this.m03()*t.m31(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02()*t.m22()+this.m03()*t.m32(),this.m00()*t.m03()+this.m01()*t.m13()+this.m02()*t.m23()+this.m03()*t.m33(),this.m10()*t.m00()+this.m11()*t.m10()+this.m12()*t.m20()+this.m13()*t.m30(),this.m10()*t.m01()+this.m11()*t.m11()+this.m12()*t.m21()+this.m13()*t.m31(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12()*t.m22()+this.m13()*t.m32(),this.m10()*t.m03()+this.m11()*t.m13()+this.m12()*t.m23()+this.m13()*t.m33(),this.m20()*t.m00()+this.m21()*t.m10()+this.m22()*t.m20()+this.m23()*t.m30(),this.m20()*t.m01()+this.m21()*t.m11()+this.m22()*t.m21()+this.m23()*t.m31(),this.m20()*t.m02()+this.m21()*t.m12()+this.m22()*t.m22()+this.m23()*t.m32(),this.m20()*t.m03()+this.m21()*t.m13()+this.m22()*t.m23()+this.m23()*t.m33(),this.m30()*t.m00()+this.m31()*t.m10()+this.m32()*t.m20()+this.m33()*t.m30(),this.m30()*t.m01()+this.m31()*t.m11()+this.m32()*t.m21()+this.m33()*t.m31(),this.m30()*t.m02()+this.m31()*t.m12()+this.m32()*t.m22()+this.m33()*t.m32(),this.m30()*t.m03()+this.m31()*t.m13()+this.m32()*t.m23()+this.m33()*t.m33())}},{key:"timesVector4",value:function(e){var t=this.m00()*e.x+this.m01()*e.y+this.m02()*e.z+this.m03()*e.w,n=this.m10()*e.x+this.m11()*e.y+this.m12()*e.z+this.m13()*e.w,i=this.m20()*e.x+this.m21()*e.y+this.m22()*e.z+this.m23()*e.w,r=this.m30()*e.x+this.m31()*e.y+this.m32()*e.z+this.m33()*e.w;return new an(t,n,i,r)}},{key:"timesVector3",value:function(e){return this.timesVector4(e.toVector4()).toVector3()}},{key:"timesTransposeVector4",value:function(e){var t=this.m00()*e.x+this.m10()*e.y+this.m20()*e.z+this.m30()*e.w,n=this.m01()*e.x+this.m11()*e.y+this.m21()*e.z+this.m31()*e.w,i=this.m02()*e.x+this.m12()*e.y+this.m22()*e.z+this.m32()*e.w,r=this.m03()*e.x+this.m13()*e.y+this.m23()*e.z+this.m33()*e.w;return new an(t,n,i,r)}},{key:"timesTransposeVector3",value:function(e){return this.timesTransposeVector4(e.toVector4()).toVector3()}},{key:"timesRelativeVector3",value:function(e){var t=this.m00()*e.x+this.m10()*e.y+this.m20()*e.z,n=this.m01()*e.y+this.m11()*e.y+this.m21()*e.z,i=this.m02()*e.z+this.m12()*e.y+this.m22()*e.z;return new un(t,n,i)}},{key:"getDeterminant",value:function(){return this.m03()*this.m12()*this.m21()*this.m30()-this.m02()*this.m13()*this.m21()*this.m30()-this.m03()*this.m11()*this.m22()*this.m30()+this.m01()*this.m13()*this.m22()*this.m30()+this.m02()*this.m11()*this.m23()*this.m30()-this.m01()*this.m12()*this.m23()*this.m30()-this.m03()*this.m12()*this.m20()*this.m31()+this.m02()*this.m13()*this.m20()*this.m31()+this.m03()*this.m10()*this.m22()*this.m31()-this.m00()*this.m13()*this.m22()*this.m31()-this.m02()*this.m10()*this.m23()*this.m31()+this.m00()*this.m12()*this.m23()*this.m31()+this.m03()*this.m11()*this.m20()*this.m32()-this.m01()*this.m13()*this.m20()*this.m32()-this.m03()*this.m10()*this.m21()*this.m32()+this.m00()*this.m13()*this.m21()*this.m32()+this.m01()*this.m10()*this.m23()*this.m32()-this.m00()*this.m11()*this.m23()*this.m32()-this.m02()*this.m11()*this.m20()*this.m33()+this.m01()*this.m12()*this.m20()*this.m33()+this.m02()*this.m10()*this.m21()*this.m33()-this.m00()*this.m12()*this.m21()*this.m33()-this.m01()*this.m10()*this.m22()*this.m33()+this.m00()*this.m11()*this.m22()*this.m33()}},{key:"determinant",get:function(){return this.getDeterminant()}},{key:"toString",value:function(){return"".concat(this.m00()," ").concat(this.m01()," ").concat(this.m02()," ").concat(this.m03(),"\n").concat(this.m10()," ").concat(this.m11()," ").concat(this.m12()," ").concat(this.m13(),"\n").concat(this.m20()," ").concat(this.m21()," ").concat(this.m22()," ").concat(this.m23(),"\n").concat(this.m30()," ").concat(this.m31()," ").concat(this.m32()," ").concat(this.m33())}},{key:"makeImmutable",value:function(){return this}},{key:"copyToArray",value:function(e){return e[0]=this.m00(),e[1]=this.m10(),e[2]=this.m20(),e[3]=this.m30(),e[4]=this.m01(),e[5]=this.m11(),e[6]=this.m21(),e[7]=this.m31(),e[8]=this.m02(),e[9]=this.m12(),e[10]=this.m22(),e[11]=this.m32(),e[12]=this.m03(),e[13]=this.m13(),e[14]=this.m23(),e[15]=this.m33(),e}}],[{key:"identity",value:function(){return new e(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,ni.IDENTITY)}},{key:"translation",value:function(t,n,i){return new e(1,0,0,t,0,1,0,n,0,0,1,i,0,0,0,1,ni.TRANSLATION_3D)}},{key:"translationFromVector",value:function(t){return e.translation(t.x,t.y,t.z)}},{key:"scaling",value:function(t,n,i){return new e(t,0,0,0,0,n=void 0===n?t:n,0,0,0,0,i=void 0===i?t:i,0,0,0,0,1,ni.SCALING)}},{key:"rotationAxisAngle",value:function(t,n){var i=Math.cos(n),r=Math.sin(n),a=1-i;return new e(t.x*t.x*a+i,t.x*t.y*a-t.z*r,t.x*t.z*a+t.y*r,0,t.y*t.x*a+t.z*r,t.y*t.y*a+i,t.y*t.z*a-t.x*r,0,t.z*t.x*a-t.y*r,t.z*t.y*a+t.x*r,t.z*t.z*a+i,0,0,0,0,1,ni.AFFINE)}},{key:"rotationX",value:function(t){var n=Math.cos(t),i=Math.sin(t);return new e(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1,ni.AFFINE)}},{key:"rotationY",value:function(t){var n=Math.cos(t),i=Math.sin(t);return new e(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1,ni.AFFINE)}},{key:"rotationZ",value:function(t){var n=Math.cos(t),i=Math.sin(t);return new e(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1,ni.AFFINE)}},{key:"gluPerspective",value:function(t,n,i,r){var a=Math.cos(t)/Math.sin(t);return new e(a/n,0,0,0,0,a,0,0,0,0,(r+i)/(i-r),2*r*i/(i-r),0,0,-1,0)}}]),e}();xt.register("Matrix4",ti);var ni=T.byKeys(["OTHER","IDENTITY","TRANSLATION_3D","SCALING","AFFINE"]);ti.Types=ni,ti.IDENTITY=(new ti).makeImmutable();var ii=ti;function ri(e){return e.toFixed(20)}xt.register("toSVGNumber",ri);var ai=ri,si=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(si,"OTHER",new si),_defineProperty(si,"IDENTITY",new si),_defineProperty(si,"TRANSLATION_2D",new si),_defineProperty(si,"SCALING",new si),_defineProperty(si,"AFFINE",new si),_defineProperty(si,"enumeration",new re(si));var oi=function(){function e(){_classCallCheck(this,e),this.entries=[1,0,0,0,1,0,0,0,1],this.type=si.IDENTITY}return _createClass(e,[{key:"m00",value:function(){return this.entries[0]}},{key:"m01",value:function(){return this.entries[3]}},{key:"m02",value:function(){return this.entries[6]}},{key:"m10",value:function(){return this.entries[1]}},{key:"m11",value:function(){return this.entries[4]}},{key:"m12",value:function(){return this.entries[7]}},{key:"m20",value:function(){return this.entries[2]}},{key:"m21",value:function(){return this.entries[5]}},{key:"m22",value:function(){return this.entries[8]}},{key:"isIdentity",value:function(){return this.type===si.IDENTITY||this.equals(e.IDENTITY)}},{key:"isFastIdentity",value:function(){return this.type===si.IDENTITY}},{key:"isTranslation",value:function(){return this.type===si.TRANSLATION_2D||1===this.m00()&&1===this.m11()&&1===this.m22()&&0===this.m01()&&0===this.m10()&&0===this.m20()&&0===this.m21()}},{key:"isAffine",value:function(){return this.type===si.AFFINE||0===this.m20()&&0===this.m21()&&1===this.m22()}},{key:"isAligned",value:function(){return this.isAffine()&&0===this.m01()&&0===this.m10()}},{key:"isAxisAligned",value:function(){return this.isAffine()&&(0===this.m01()&&0===this.m10()||0===this.m00()&&0===this.m11())}},{key:"isFinite",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())}))},{key:"getDeterminant",value:function(){return this.m00()*this.m11()*this.m22()+this.m01()*this.m12()*this.m20()+this.m02()*this.m10()*this.m21()-this.m02()*this.m11()*this.m20()-this.m01()*this.m10()*this.m22()-this.m00()*this.m12()*this.m21()}},{key:"determinant",get:function(){return this.getDeterminant()}},{key:"getTranslation",value:function(){return new pn(this.m02(),this.m12())}},{key:"translation",get:function(){return this.getTranslation()}},{key:"getScaleVector",value:function(){return new pn(Math.sqrt(this.m00()*this.m00()+this.m10()*this.m10()),Math.sqrt(this.m01()*this.m01()+this.m11()*this.m11()))}},{key:"scaleVector",get:function(){return this.getScaleVector()}},{key:"getRotation",value:function(){return Math.atan2(this.m10(),this.m00())}},{key:"rotation",get:function(){return this.getRotation()}},{key:"toMatrix4",value:function(){return new ii(this.m00(),this.m01(),this.m02(),0,this.m10(),this.m11(),this.m12(),0,this.m20(),this.m21(),this.m22(),0,0,0,0,1)}},{key:"toAffineMatrix4",value:function(){return new ii(this.m00(),this.m01(),0,this.m02(),this.m10(),this.m11(),0,this.m12(),0,0,1,0,0,0,0,1)}},{key:"toString",value:function(){return"".concat(this.m00()," ").concat(this.m01()," ").concat(this.m02(),"\n").concat(this.m10()," ").concat(this.m11()," ").concat(this.m12(),"\n").concat(this.m20()," ").concat(this.m21()," ").concat(this.m22())}},{key:"toSVGMatrix",value:function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix();return e.a=this.m00(),e.b=this.m10(),e.c=this.m01(),e.d=this.m11(),e.e=this.m02(),e.f=this.m12(),e}},{key:"getCSSTransform",value:function(){return"matrix(".concat(this.entries[0].toFixed(20),",").concat(this.entries[1].toFixed(20),",").concat(this.entries[3].toFixed(20),",").concat(this.entries[4].toFixed(20),",").concat(this.entries[6].toFixed(20),",").concat(this.entries[7].toFixed(20),")")}},{key:"cssTransform",get:function(){return this.getCSSTransform()}},{key:"getSVGTransform",value:function(){switch(this.type){case si.IDENTITY:return"";case si.TRANSLATION_2D:return"translate(".concat(ai(this.entries[6]),",").concat(ai(this.entries[7]),")");case si.SCALING:return"scale(".concat(ai(this.entries[0])).concat(this.entries[0]===this.entries[4]?"":",".concat(ai(this.entries[4])),")");default:return"matrix(".concat(ai(this.entries[0]),",").concat(ai(this.entries[1]),",").concat(ai(this.entries[3]),",").concat(ai(this.entries[4]),",").concat(ai(this.entries[6]),",").concat(ai(this.entries[7]),")")}}},{key:"svgTransform",get:function(){return this.getSVGTransform()}},{key:"getCSSTransformStyles",value:function(){var e=this.getCSSTransform();return{"-webkit-perspective":"1000","-webkit-backface-visibility":"hidden","-webkit-transform":"".concat(e," translateZ(0)"),"-moz-transform":"".concat(e," translateZ(0)"),"-ms-transform":e,"-o-transform":e,transform:e,"transform-origin":"top left","-ms-transform-origin":"top left"}}},{key:"cssTransformStyles",get:function(){return this.getCSSTransformStyles()}},{key:"equals",value:function(e){return this.m00()===e.m00()&&this.m01()===e.m01()&&this.m02()===e.m02()&&this.m10()===e.m10()&&this.m11()===e.m11()&&this.m12()===e.m12()&&this.m20()===e.m20()&&this.m21()===e.m21()&&this.m22()===e.m22()}},{key:"equalsEpsilon",value:function(e,t){return Math.abs(this.m00()-e.m00())<t&&Math.abs(this.m01()-e.m01())<t&&Math.abs(this.m02()-e.m02())<t&&Math.abs(this.m10()-e.m10())<t&&Math.abs(this.m11()-e.m11())<t&&Math.abs(this.m12()-e.m12())<t&&Math.abs(this.m20()-e.m20())<t&&Math.abs(this.m21()-e.m21())<t&&Math.abs(this.m22()-e.m22())<t}},{key:"copy",value:function(){return li(this.m00(),this.m01(),this.m02(),this.m10(),this.m11(),this.m12(),this.m20(),this.m21(),this.m22(),this.type)}},{key:"plus",value:function(e){return li(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22())}},{key:"minus",value:function(e){return li(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22())}},{key:"transposed",value:function(){return li(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===si.IDENTITY||this.type===si.SCALING?this.type:void 0)}},{key:"negated",value:function(){return li(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())}},{key:"inverted",value:function(){var e;switch(this.type){case si.IDENTITY:return this;case si.TRANSLATION_2D:return li(1,0,-this.m02(),0,1,-this.m12(),0,0,1,si.TRANSLATION_2D);case si.SCALING:return li(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),si.SCALING);case si.AFFINE:if(0!==(e=this.getDeterminant()))return li((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,0,0,1,si.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case si.OTHER:if(0!==(e=this.getDeterminant()))return li((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,(-this.m11()*this.m20()+this.m10()*this.m21())/e,(this.m01()*this.m20()-this.m00()*this.m21())/e,(-this.m01()*this.m10()+this.m00()*this.m11())/e,si.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix3.inverted with unknown type: ".concat(this.type))}}},{key:"timesMatrix",value:function(e){if(this.type===si.IDENTITY||e.type===si.IDENTITY)return this.type===si.IDENTITY?e:this;if(this.type===e.type){if(this.type===si.TRANSLATION_2D)return li(1,0,this.m02()+e.m02(),0,1,this.m12()+e.m12(),0,0,1,si.TRANSLATION_2D);if(this.type===si.SCALING)return li(this.m00()*e.m00(),0,0,0,this.m11()*e.m11(),0,0,0,1,si.SCALING)}return this.type!==si.OTHER&&e.type!==si.OTHER?li(this.m00()*e.m00()+this.m01()*e.m10(),this.m00()*e.m01()+this.m01()*e.m11(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02(),this.m10()*e.m00()+this.m11()*e.m10(),this.m10()*e.m01()+this.m11()*e.m11(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12(),0,0,1,si.AFFINE):li(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22())}},{key:"timesVector2",value:function(e){var t=this.m00()*e.x+this.m01()*e.y+this.m02(),n=this.m10()*e.x+this.m11()*e.y+this.m12();return new pn(t,n)}},{key:"timesVector3",value:function(e){var t=this.m00()*e.x+this.m01()*e.y+this.m02()*e.z,n=this.m10()*e.x+this.m11()*e.y+this.m12()*e.z,i=this.m20()*e.x+this.m21()*e.y+this.m22()*e.z;return new un(t,n,i)}},{key:"timesTransposeVector2",value:function(e){var t=this.m00()*e.x+this.m10()*e.y,n=this.m01()*e.x+this.m11()*e.y;return new pn(t,n)}},{key:"timesRelativeVector2",value:function(e){var t=this.m00()*e.x+this.m01()*e.y,n=this.m10()*e.y+this.m11()*e.y;return new pn(t,n)}},{key:"rowMajor",value:function(e,t,n,i,r,a,s,o,l,u){return this.entries[0]=e,this.entries[1]=i,this.entries[2]=s,this.entries[3]=t,this.entries[4]=r,this.entries[5]=o,this.entries[6]=n,this.entries[7]=a,this.entries[8]=l,this.type=void 0===u?0===s&&0===o&&1===l?si.AFFINE:si.OTHER:u,this}},{key:"set",value:function(e){return this.rowMajor(e.m00(),e.m01(),e.m02(),e.m10(),e.m11(),e.m12(),e.m20(),e.m21(),e.m22(),e.type)}},{key:"setArray",value:function(e){return this.rowMajor(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},{key:"set00",value:function(e){return this.entries[0]=e,this}},{key:"set01",value:function(e){return this.entries[3]=e,this}},{key:"set02",value:function(e){return this.entries[6]=e,this}},{key:"set10",value:function(e){return this.entries[1]=e,this}},{key:"set11",value:function(e){return this.entries[4]=e,this}},{key:"set12",value:function(e){return this.entries[7]=e,this}},{key:"set20",value:function(e){return this.entries[2]=e,this}},{key:"set21",value:function(e){return this.entries[5]=e,this}},{key:"set22",value:function(e){return this.entries[8]=e,this}},{key:"makeImmutable",value:function(){return this}},{key:"columnMajor",value:function(e,t,n,i,r,a,s,o,l,u){return this.rowMajor(e,i,s,t,r,o,n,a,l,u)}},{key:"add",value:function(e){return this.rowMajor(this.m00()+e.m00(),this.m01()+e.m01(),this.m02()+e.m02(),this.m10()+e.m10(),this.m11()+e.m11(),this.m12()+e.m12(),this.m20()+e.m20(),this.m21()+e.m21(),this.m22()+e.m22())}},{key:"subtract",value:function(e){return this.rowMajor(this.m00()-e.m00(),this.m01()-e.m01(),this.m02()-e.m02(),this.m10()-e.m10(),this.m11()-e.m11(),this.m12()-e.m12(),this.m20()-e.m20(),this.m21()-e.m21(),this.m22()-e.m22())}},{key:"transpose",value:function(){return this.rowMajor(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===si.IDENTITY||this.type===si.SCALING?this.type:void 0)}},{key:"negate",value:function(){return this.rowMajor(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())}},{key:"invert",value:function(){var e;switch(this.type){case si.IDENTITY:return this;case si.TRANSLATION_2D:return this.rowMajor(1,0,-this.m02(),0,1,-this.m12(),0,0,1,si.TRANSLATION_2D);case si.SCALING:return this.rowMajor(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),si.SCALING);case si.AFFINE:if(0!==(e=this.getDeterminant()))return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,0,0,1,si.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case si.OTHER:if(0!==(e=this.getDeterminant()))return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/e,(this.m02()*this.m21()-this.m01()*this.m22())/e,(-this.m02()*this.m11()+this.m01()*this.m12())/e,(this.m12()*this.m20()-this.m10()*this.m22())/e,(-this.m02()*this.m20()+this.m00()*this.m22())/e,(this.m02()*this.m10()-this.m00()*this.m12())/e,(-this.m11()*this.m20()+this.m10()*this.m21())/e,(this.m01()*this.m20()-this.m00()*this.m21())/e,(-this.m01()*this.m10()+this.m00()*this.m11())/e,si.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix3.inverted with unknown type: ".concat(this.type))}}},{key:"multiplyMatrix",value:function(e){if(e.type===si.IDENTITY)return this;if(this.type===si.IDENTITY)return this.set(e);if(this.type===e.type){if(this.type===si.TRANSLATION_2D)return this.rowMajor(1,0,this.m02()+e.m02(),0,1,this.m12()+e.m12(),0,0,1,si.TRANSLATION_2D);if(this.type===si.SCALING)return this.rowMajor(this.m00()*e.m00(),0,0,0,this.m11()*e.m11(),0,0,0,1,si.SCALING)}return this.type!==si.OTHER&&e.type!==si.OTHER?this.rowMajor(this.m00()*e.m00()+this.m01()*e.m10(),this.m00()*e.m01()+this.m01()*e.m11(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02(),this.m10()*e.m00()+this.m11()*e.m10(),this.m10()*e.m01()+this.m11()*e.m11(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12(),0,0,1,si.AFFINE):this.rowMajor(this.m00()*e.m00()+this.m01()*e.m10()+this.m02()*e.m20(),this.m00()*e.m01()+this.m01()*e.m11()+this.m02()*e.m21(),this.m00()*e.m02()+this.m01()*e.m12()+this.m02()*e.m22(),this.m10()*e.m00()+this.m11()*e.m10()+this.m12()*e.m20(),this.m10()*e.m01()+this.m11()*e.m11()+this.m12()*e.m21(),this.m10()*e.m02()+this.m11()*e.m12()+this.m12()*e.m22(),this.m20()*e.m00()+this.m21()*e.m10()+this.m22()*e.m20(),this.m20()*e.m01()+this.m21()*e.m11()+this.m22()*e.m21(),this.m20()*e.m02()+this.m21()*e.m12()+this.m22()*e.m22())}},{key:"prependTranslation",value:function(e,t){return this.set02(this.m02()+e),this.set12(this.m12()+t),this.type===si.IDENTITY||this.type===si.TRANSLATION_2D?this.type=si.TRANSLATION_2D:this.type===si.OTHER?this.type=si.OTHER:this.type=si.AFFINE,this}},{key:"setToIdentity",value:function(){return this.rowMajor(1,0,0,0,1,0,0,0,1,si.IDENTITY)}},{key:"setToTranslation",value:function(e,t){return this.rowMajor(1,0,e,0,1,t,0,0,1,si.TRANSLATION_2D)}},{key:"setToScale",value:function(e,t){return t=void 0===t?e:t,this.rowMajor(e,0,0,0,t,0,0,0,1,si.SCALING)}},{key:"setToAffine",value:function(e,t,n,i,r,a){return this.rowMajor(e,t,n,i,r,a,0,0,1,si.AFFINE)}},{key:"setToRotationAxisAngle",value:function(e,t){var n=Math.cos(t),i=Math.sin(t);Math.abs(n)<1e-15&&(n=0),Math.abs(i)<1e-15&&(i=0);var r=1-n;return this.rowMajor(e.x*e.x*r+n,e.x*e.y*r-e.z*i,e.x*e.z*r+e.y*i,e.y*e.x*r+e.z*i,e.y*e.y*r+n,e.y*e.z*r-e.x*i,e.z*e.x*r-e.y*i,e.z*e.y*r+e.x*i,e.z*e.z*r+n,si.OTHER)}},{key:"setToRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(n)<1e-15&&(n=0),this.rowMajor(1,0,0,0,t,-n,0,n,t,si.OTHER)}},{key:"setToRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(n)<1e-15&&(n=0),this.rowMajor(t,0,n,0,1,0,-n,0,t,si.OTHER)}},{key:"setToRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return Math.abs(t)<1e-15&&(t=0),Math.abs(n)<1e-15&&(n=0),this.rowMajor(t,-n,0,n,t,0,0,0,1,si.AFFINE)}},{key:"setToTranslationRotation",value:function(e,t,n){var i=Math.cos(n),r=Math.sin(n);return Math.abs(i)<1e-15&&(i=0),Math.abs(r)<1e-15&&(r=0),this.rowMajor(i,-r,e,r,i,t,0,0,1,si.AFFINE)}},{key:"setToTranslationRotationPoint",value:function(e,t){return this.setToTranslationRotation(e.x,e.y,t)}},{key:"setToSVGMatrix",value:function(e){return this.rowMajor(e.a,e.c,e.e,e.b,e.d,e.f,0,0,1,si.AFFINE)}},{key:"setRotationAToB",value:function(e,t){var n=e,i=t,r=n.cross(i),a=n.dot(i);if((a<0?-a:a)>.9999){var s=new un(n.x>0?n.x:-n.x,n.y>0?n.y:-n.y,n.z>0?n.z:-n.z),o=(s=s.x<s.y?s.x<s.z?un.X_UNIT:un.Z_UNIT:s.y<s.z?un.Y_UNIT:un.Z_UNIT).minus(n);r=s.minus(i);var l=2/o.dot(o),u=2/r.dot(r),c=l*u*o.dot(r);return this.rowMajor(-l*o.x*o.x-u*r.x*r.x+c*r.x*o.x+1,-l*o.x*o.y-u*r.x*r.y+c*r.x*o.y,-l*o.x*o.z-u*r.x*r.z+c*r.x*o.z,-l*o.y*o.x-u*r.y*r.x+c*r.y*o.x,-l*o.y*o.y-u*r.y*r.y+c*r.y*o.y+1,-l*o.y*o.z-u*r.y*r.z+c*r.y*o.z,-l*o.z*o.x-u*r.z*r.x+c*r.z*o.x,-l*o.z*o.y-u*r.z*r.y+c*r.z*o.y,-l*o.z*o.z-u*r.z*r.z+c*r.z*o.z+1)}var h=1/(1+a),d=h*r.x,p=h*r.z,f=d*r.y,m=d*r.z,g=p*r.y;return this.rowMajor(a+d*r.x,f-r.z,m+r.y,f+r.z,a+h*r.y*r.y,g-r.x,m-r.y,g+r.x,a+p*r.z)}},{key:"multiplyVector2",value:function(e){return e.setXY(this.m00()*e.x+this.m01()*e.y+this.m02(),this.m10()*e.x+this.m11()*e.y+this.m12())}},{key:"multiplyVector3",value:function(e){return e.setXYZ(this.m00()*e.x+this.m01()*e.y+this.m02()*e.z,this.m10()*e.x+this.m11()*e.y+this.m12()*e.z,this.m20()*e.x+this.m21()*e.y+this.m22()*e.z)}},{key:"multiplyTransposeVector2",value:function(e){return e.setXY(this.m00()*e.x+this.m10()*e.y,this.m01()*e.x+this.m11()*e.y)}},{key:"multiplyRelativeVector2",value:function(e){return e.setXY(this.m00()*e.x+this.m01()*e.y,this.m10()*e.y+this.m11()*e.y)}},{key:"canvasSetTransform",value:function(e){e.setTransform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}},{key:"canvasAppendTransform",value:function(e){this.type!==si.IDENTITY&&e.transform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}},{key:"copyToArray",value:function(e){return e[0]=this.m00(),e[1]=this.m10(),e[2]=this.m20(),e[3]=this.m01(),e[4]=this.m11(),e[5]=this.m21(),e[6]=this.m02(),e[7]=this.m12(),e[8]=this.m22(),e}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}],[{key:"identity",value:function(){return ui().setToIdentity()}},{key:"translation",value:function(e,t){return ui().setToTranslation(e,t)}},{key:"translationFromVector",value:function(t){return e.translation(t.x,t.y)}},{key:"scaling",value:function(e,t){return ui().setToScale(e,t)}},{key:"scale",value:function(t,n){return e.scaling(t,n)}},{key:"affine",value:function(e,t,n,i,r,a){return ui().setToAffine(e,t,n,i,r,a)}},{key:"rowMajor",value:function(e,t,n,i,r,a,s,o,l,u){return ui().rowMajor(e,t,n,i,r,a,s,o,l,u)}},{key:"rotationAxisAngle",value:function(e,t){return ui().setToRotationAxisAngle(e,t)}},{key:"rotationX",value:function(e){return ui().setToRotationX(e)}},{key:"rotationY",value:function(e){return ui().setToRotationY(e)}},{key:"rotationZ",value:function(e){return ui().setToRotationZ(e)}},{key:"translationRotation",value:function(e,t,n){return ui().setToTranslationRotation(e,t,n)}},{key:"rotation2",value:function(e){return ui().setToRotationZ(e)}},{key:"rotationAround",value:function(t,n,i){return e.translation(n,i).timesMatrix(e.rotation2(t)).timesMatrix(e.translation(-n,-i))}},{key:"rotationAroundPoint",value:function(t,n){return e.rotationAround(t,n.x,n.y)}},{key:"fromSVGMatrix",value:function(e){return ui().setToSVGMatrix(e)}},{key:"rotateAToB",value:function(e,t){return ui().setRotationAToB(e,t)}},{key:"translationTimesMatrix",value:function(e,t,n){var i;return n.type===si.IDENTITY||n.type===si.TRANSLATION_2D?li(1,0,n.m02()+e,0,1,n.m12()+t,0,0,1,si.TRANSLATION_2D):(i=n.type===si.OTHER?si.OTHER:si.AFFINE,li(n.m00(),n.m01(),n.m02()+e,n.m10(),n.m11(),n.m12()+t,n.m20(),n.m21(),n.m22(),i))}},{key:"toStateObject",value:function(e){return{entries:e.entries,type:e.type.name}}},{key:"fromStateObject",value:function(t){var n=e.identity();return n.entries=t.entries,n.type=si.enumeration.getValue(t.type),n}}]),e}();_defineProperty(oi,"pool",new rn(oi,{initialize:oi.prototype.rowMajor,useDefaultConstruction:!0,maxSize:300})),xt.register("Matrix3",oi);var li=oi.pool.create.bind(oi.pool);xt.register("m3",li);var ui=oi.pool.fetch.bind(oi.pool);oi.IDENTITY=oi.identity().makeImmutable(),oi.X_REFLECTION=li(-1,0,0,0,1,0,0,0,1,si.AFFINE).makeImmutable(),oi.Y_REFLECTION=li(1,0,0,0,-1,0,0,0,1,si.AFFINE).makeImmutable(),oi.Matrix3IO=new U("Matrix3IO",{valueType:oi,documentation:"A 3x3 matrix often used for holding transform data.",toStateObject:function(e){return oi.toStateObject(e)},fromStateObject:oi.fromStateObject,stateSchema:{entries:Ye(Lt),type:le(si)}});var ci=En.solveQuadraticRootsReal,hi=En.arePointsCollinear;function di(e){return e>=0&&e<=1}var pi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this))._start=e,a._control=i,a._end=r,a.invalidate(),a}return _createClass(n,[{key:"setStart",value:function(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}},{key:"start",get:function(){return this.getStart()},set:function(e){this.setStart(e)}},{key:"getStart",value:function(){return this._start}},{key:"setControl",value:function(e){return this._control.equals(e)||(this._control=e,this.invalidate()),this}},{key:"control",get:function(){return this.getControl()},set:function(e){this.setControl(e)}},{key:"getControl",value:function(){return this._control}},{key:"setEnd",value:function(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}},{key:"end",get:function(){return this.getEnd()},set:function(e){this.setEnd(e)}},{key:"getEnd",value:function(){return this._end}},{key:"positionAt",value:function(e){var t=1-e;return this._start.times(t*t).plus(this._control.times(2*t*e)).plus(this._end.times(e*e))}},{key:"tangentAt",value:function(e){return this._control.minus(this._start).times(2*(1-e)).plus(this._end.minus(this._control).times(2*e))}},{key:"curvatureAt",value:function(e){if(Math.abs(e-.5)>.5-1e-7){var t=e<.5,n=t?this._start:this._end,i=this._control,r=t?this._end:this._start,a=i.minus(n),s=a.magnitude;return(t?-1:1)*a.perpendicular.normalized().dot(r.minus(i))*(this.degree-1)/(this.degree*s*s)}return this.subdivided(e)[0].curvatureAt(1)}},{key:"subdivided",value:function(e){if(0===e||1===e)return[this];var t=this._start.blend(this._control,e),i=this._control.blend(this._end,e),r=t.blend(i,e);return[new n(this._start,t,r),new n(r,i,this._end)]}},{key:"invalidate",value:function(){this._startTangent=null,this._endTangent=null,this._tCriticalX=null,this._tCriticalY=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}},{key:"getStartTangent",value:function(){if(null===this._startTangent){var e=this._start.equals(this._control);this._startTangent=e?this._end.minus(this._start).normalized():this._control.minus(this._start).normalized()}return this._startTangent}},{key:"startTangent",get:function(){return this.getStartTangent()}},{key:"getEndTangent",value:function(){if(null===this._endTangent){var e=this._end.equals(this._control);this._endTangent=e?this._end.minus(this._start).normalized():this._end.minus(this._control).normalized()}return this._endTangent}},{key:"endTangent",get:function(){return this.getEndTangent()}},{key:"getTCriticalX",value:function(){return null===this._tCriticalX&&(this._tCriticalX=n.extremaT(this._start.x,this._control.x,this._end.x)),this._tCriticalX}},{key:"tCriticalX",get:function(){return this.getTCriticalX()}},{key:"getTCriticalY",value:function(){return null===this._tCriticalY&&(this._tCriticalY=n.extremaT(this._start.y,this._control.y,this._end.y)),this._tCriticalY}},{key:"tCriticalY",get:function(){return this.getTCriticalY()}},{key:"getNondegenerateSegments",value:function(){var e=this._start,t=this._control,i=this._end,r=e.equals(i),a=e.equals(t),s=e.equals(t);if(r&&a)return[];if(r){var o=this.positionAt(.5);return[new $n(e,o),new $n(o,i)]}if(hi(e,t,i)){if(a||s)return[new $n(e,i)];var l=i.minus(e),u=t.minus(e).dot(l.normalized())/l.magnitude,c=n.extremaT(0,u,1);if(!isNaN(c)&&c>0&&c<1){var h=this.positionAt(c);return _.flatten([new $n(e,h).getNondegenerateSegments(),new $n(h,i).getNondegenerateSegments()])}return[new $n(e,i)]}return[this]}},{key:"getBounds",value:function(){if(null===this._bounds){this._bounds=new jn(Math.min(this._start.x,this._end.x),Math.min(this._start.y,this._end.y),Math.max(this._start.x,this._end.x),Math.max(this._start.y,this._end.y));var e=this.getTCriticalX(),t=this.getTCriticalY();!isNaN(e)&&e>0&&e<1&&(this._bounds=this._bounds.withPoint(this.positionAt(e))),!isNaN(t)&&t>0&&t<1&&(this._bounds=this._bounds.withPoint(this.positionAt(t)))}return this._bounds}},{key:"bounds",get:function(){return this.getBounds()}},{key:"offsetTo",value:function(e,t){for(var n=[this],i=0;i<5;i++)n=_.flatten(_.map(n,(function(e){return e.subdivided(.5)})));var r=_.map(n,(function(t){return t.approximateOffset(e)}));return t&&(r.reverse(),r=_.map(r,(function(e){return e.reversed()}))),r}},{key:"degreeElevated",value:function(){return new Si(this._start,this._start.plus(this._control.timesScalar(2)).dividedScalar(3),this._end.plus(this._control.timesScalar(2)).dividedScalar(3),this._end)}},{key:"approximateOffset",value:function(e){return new n(this._start.plus((this._start.equals(this._control)?this._end.minus(this._start):this._control.minus(this._start)).perpendicular.normalized().times(e)),this._control.plus(this._end.minus(this._start).perpendicular.normalized().times(e)),this._end.plus((this._end.equals(this._control)?this._end.minus(this._start):this._end.minus(this._control)).perpendicular.normalized().times(e)))}},{key:"getSVGPathFragment",value:function(){return this._svgPathFragment||(this._svgPathFragment="Q ".concat(Fn(this._control.x)," ").concat(Fn(this._control.y)," ").concat(Fn(this._end.x)," ").concat(Fn(this._end.y))),this._svgPathFragment}},{key:"strokeLeft",value:function(e){return this.offsetTo(-e/2,!1)}},{key:"strokeRight",value:function(e){return this.offsetTo(e/2,!0)}},{key:"getInteriorExtremaTs",value:function(){var e=[],t=this.getTCriticalX(),n=this.getTCriticalY();return!isNaN(t)&&t>1e-10&&t<1-1e-10&&e.push(this.tCriticalX),!isNaN(n)&&n>1e-10&&n<1-1e-10&&e.push(this.tCriticalY),e.sort()}},{key:"intersection",value:function(e){var t=this,n=[],i=oi.rotation2(-e.direction.angle).timesMatrix(oi.translation(-e.position.x,-e.position.y)),r=i.timesVector2(this._start),a=i.timesVector2(this._control),s=i.timesVector2(this._end),o=r.y-2*a.y+s.y,l=-2*r.y+2*a.y,u=r.y,c=ci(o,l,u);return _.each(c,(function(i){if(i>=0&&i<=1){var r=t.positionAt(i),a=t.tangentAt(i).normalized(),s=a.perpendicular,o=r.minus(e.position);if(o.dot(e.direction)>0){var l=s.dot(e.direction)>0?s.negated():s,u=e.direction.perpendicular.dot(a)<0?1:-1;n.push(new Bn(o.magnitude,r,l,u,i))}}})),n}},{key:"windingIntersection",value:function(e){var t=0,n=this.intersection(e);return _.each(n,(function(e){t+=e.wind})),t}},{key:"writeToContext",value:function(e){e.quadraticCurveTo(this._control.x,this._control.y,this._end.x,this._end.y)}},{key:"transformed",value:function(e){return new n(e.timesVector2(this._start),e.timesVector2(this._control),e.timesVector2(this._end))}},{key:"getSignedAreaFragment",value:function(){return 1/6*(this._start.x*(2*this._control.y+this._end.y)+this._control.x*(-2*this._start.y+2*this._end.y)+this._end.x*(-this._start.y-2*this._control.y))}},{key:"reparameterized",value:function(e,t){var i=this._start.plus(this._end.plus(this._control.timesScalar(-2))),r=this._control.minus(this._start).timesScalar(2),a=this._start,s=i.timesScalar(e*e),o=i.timesScalar(e*t).timesScalar(2).plus(r.timesScalar(e)),l=i.timesScalar(t*t).plus(r.timesScalar(t)).plus(a);return new n(l,o.timesScalar(.5).plus(l),s.plus(o).plus(l))}},{key:"reversed",value:function(){return new n(this._end,this._control,this._start)}},{key:"serialize",value:function(){return{type:"Quadratic",startX:this._start.x,startY:this._start.y,controlX:this._control.x,controlY:this._control.y,endX:this._end.x,endY:this._end.y}}},{key:"getOverlaps",value:function(e){return e instanceof n?n.getOverlaps(this,e):null}}],[{key:"deserialize",value:function(e){return new n(new pn(e.startX,e.startY),new pn(e.controlX,e.controlY),new pn(e.endX,e.endY))}},{key:"extremaT",value:function(e,t,n){var i=2*(n-2*t+e);return 0!==i?-2*(t-e)/i:NaN}},{key:"getOverlaps",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,r=[],a=e._start.x,s=-2*e._start.x+2*e._control.x,o=e._start.x-2*e._control.x+e._end.x,l=e._start.y,u=-2*e._start.y+2*e._control.y,c=e._start.y-2*e._control.y+e._end.y,h=t._start.x,d=-2*t._start.x+2*t._control.x,p=t._start.x-2*t._control.x+t._end.x,f=t._start.y,m=-2*t._start.y+2*t._control.y,g=t._start.y-2*t._control.y+t._end.y,y=Math.abs(Math.max(e._start.x,e._control.x,e._end.x,t._start.x,t._control.x,t._end.x)-Math.min(e._start.x,e._control.x,e._end.x,t._start.x,t._control.x,t._end.x)),v=Math.abs(Math.max(e._start.y,e._control.y,e._end.y,t._start.y,t._control.y,t._end.y)-Math.min(e._start.y,e._control.y,e._end.y,t._start.y,t._control.y,t._end.y)),A=Qn.polynomialGetOverlapQuadratic(a,s,o,h,d,p),b=Qn.polynomialGetOverlapQuadratic(l,u,c,f,m,g);if(null===(n=y>v?null===A||!0===A?b:A:null===b||!0===b?A:b)||!0===n)return r;for(var S=n.a,E=n.b,k=S*S,V=E*E,w=2*S*E,C=h+E*d+V*p-a,x=S*d+w*p-s,P=k*p-o,T=f+E*m+V*g-l,M=S*m+w*g-u,L=k*g-c,I=En.solveLinearRootsReal(2*P,x),R=En.solveLinearRootsReal(2*L,M),D=_.uniq([0,1].concat(I?I.filter(di):[])),N=_.uniq([0,1].concat(R?R.filter(di):[])),q=0;q<D.length;q++){var O=D[q];if(Math.abs((P*O+x)*O+C)>i)return r}for(var B=0;B<N.length;B++){var G=N[B];if(Math.abs((L*G+M)*G+T)>i)return r}var H=E,F=S+E;return H>1&&F>1||H<0&&F<0?r:[new On(S,E)]}}]),n}(Qn);pi.prototype.degree=2,Rn.register("Quadratic",pi);var fi=En.solveQuadraticRootsReal,mi=En.solveCubicRootsReal,gi=En.arePointsCollinear,yi=new pn(0,0),vi=new pn(0,0),Ai=new pn(0,0);function bi(e){return e>=0&&e<=1}var Si=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;return _classCallCheck(this,n),(s=t.call(this))._start=e,s._control1=i,s._control2=r,s._end=a,s.invalidate(),s}return _createClass(n,[{key:"setStart",value:function(e){return this._start.equals(e)||(this._start=e,this.invalidate()),this}},{key:"start",get:function(){return this.getStart()},set:function(e){this.setStart(e)}},{key:"getStart",value:function(){return this._start}},{key:"setControl1",value:function(e){return this._control1.equals(e)||(this._control1=e,this.invalidate()),this}},{key:"control1",get:function(){return this.getControl1()},set:function(e){this.setControl1(e)}},{key:"getControl1",value:function(){return this._control1}},{key:"setControl2",value:function(e){return this._control2.equals(e)||(this._control2=e,this.invalidate()),this}},{key:"control2",get:function(){return this.getControl2()},set:function(e){this.setControl2(e)}},{key:"getControl2",value:function(){return this._control2}},{key:"setEnd",value:function(e){return this._end.equals(e)||(this._end=e,this.invalidate()),this}},{key:"end",get:function(){return this.getEnd()},set:function(e){this.setEnd(e)}},{key:"getEnd",value:function(){return this._end}},{key:"positionAt",value:function(e){var t=1-e,n=t*t*t,i=3*t*t*e,r=3*t*e*e,a=e*e*e;return new pn(this._start.x*n+this._control1.x*i+this._control2.x*r+this._end.x*a,this._start.y*n+this._control1.y*i+this._control2.y*r+this._end.y*a)}},{key:"tangentAt",value:function(e){var t=1-e;return new pn(0,0).set(this._start).multiplyScalar(-3*t*t).add(yi.set(this._control1).multiplyScalar(3*t*t-6*t*e)).add(yi.set(this._control2).multiplyScalar(6*t*e-3*e*e)).add(yi.set(this._end).multiplyScalar(3*e*e))}},{key:"curvatureAt",value:function(e){if(Math.abs(e-.5)>.5-1e-7){var t=e<.5,n=t?this._start:this._end,i=t?this._control1:this._control2,r=t?this._control2:this._control1,a=i.minus(n),s=a.magnitude;return(t?-1:1)*a.perpendicular.normalized().dot(r.minus(i))*(this.degree-1)/(this.degree*s*s)}return this.subdivided(e)[0].curvatureAt(1)}},{key:"subdivided",value:function(e){if(0===e||1===e)return[this];var t=this._start.blend(this._control1,e),i=this._control2.blend(this._end,e),r=this._control1.blend(this._control2,e),a=t.blend(r,e),s=r.blend(i,e),o=a.blend(s,e);return[new n(this._start,t,a,o),new n(o,s,i,this._end)]}},{key:"invalidate",value:function(){this._startTangent=null,this._endTangent=null,this._r=null,this._s=null,this._tCusp=null,this._tDeterminant=null,this._tInflection1=null,this._tInflection2=null,this._quadratics=null,this._xExtremaT=null,this._yExtremaT=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()}},{key:"getStartTangent",value:function(){return null===this._startTangent&&(this._startTangent=this.tangentAt(0).normalized()),this._startTangent}},{key:"startTangent",get:function(){return this.getStartTangent()}},{key:"getEndTangent",value:function(){return null===this._endTangent&&(this._endTangent=this.tangentAt(1).normalized()),this._endTangent}},{key:"endTangent",get:function(){return this.getEndTangent()}},{key:"getR",value:function(){return null===this._r&&(this._r=this._control1.minus(this._start).normalized()),this._r}},{key:"r",get:function(){return this.getR()}},{key:"getS",value:function(){return null===this._s&&(this._s=this.getR().perpendicular),this._s}},{key:"s",get:function(){return this.getS()}},{key:"getTCusp",value:function(){return null===this._tCusp&&this.computeCuspInfo(),this._tCusp}},{key:"tCusp",get:function(){return this.getTCusp()}},{key:"getTDeterminant",value:function(){return null===this._tDeterminant&&this.computeCuspInfo(),this._tDeterminant}},{key:"tDeterminant",get:function(){return this.getTDeterminant()}},{key:"getTInflection1",value:function(){return null===this._tInflection1&&this.computeCuspInfo(),this._tInflection1}},{key:"tInflection1",get:function(){return this.getTInflection1()}},{key:"getTInflection2",value:function(){return null===this._tInflection2&&this.computeCuspInfo(),this._tInflection2}},{key:"tInflection2",get:function(){return this.getTInflection2()}},{key:"getQuadratics",value:function(){return null===this._quadratics&&this.computeCuspSegments(),this._quadratics}},{key:"getXExtremaT",value:function(){return null===this._xExtremaT&&(this._xExtremaT=n.extremaT(this._start.x,this._control1.x,this._control2.x,this._end.x)),this._xExtremaT}},{key:"xExtremaT",get:function(){return this.getXExtremaT()}},{key:"getYExtremaT",value:function(){return null===this._yExtremaT&&(this._yExtremaT=n.extremaT(this._start.y,this._control1.y,this._control2.y,this._end.y)),this._yExtremaT}},{key:"yExtremaT",get:function(){return this.getYExtremaT()}},{key:"getBounds",value:function(){var e=this;return null===this._bounds&&(this._bounds=jn.NOTHING,this._bounds=this._bounds.withPoint(this._start),this._bounds=this._bounds.withPoint(this._end),_.each(this.getXExtremaT(),(function(t){t>=0&&t<=1&&(e._bounds=e._bounds.withPoint(e.positionAt(t)))})),_.each(this.getYExtremaT(),(function(t){t>=0&&t<=1&&(e._bounds=e._bounds.withPoint(e.positionAt(t)))})),this.hasCusp()&&(this._bounds=this._bounds.withPoint(this.positionAt(this.getTCusp())))),this._bounds}},{key:"bounds",get:function(){return this.getBounds()}},{key:"computeCuspInfo",value:function(){var e=this._start.times(-1).plus(this._control1.times(3)).plus(this._control2.times(-3)).plus(this._end),t=this._start.times(3).plus(this._control1.times(-6)).plus(this._control2.times(3)),n=this._start.times(-3).plus(this._control1.times(3)),i=e.perpendicular,r=t.perpendicular,a=i.dot(t);if(this._tCusp=i.dot(n)/a*-.5,this._tDeterminant=this._tCusp*this._tCusp-1/3*(r.dot(n)/a),this._tDeterminant>=0){var s=Math.sqrt(this._tDeterminant);this._tInflection1=this._tCusp-s,this._tInflection2=this._tCusp+s}else this._tInflection1=NaN,this._tInflection2=NaN}},{key:"computeCuspSegments",value:function(){if(this.hasCusp()){this._quadratics=[];var e=this.getTCusp();if(0===e)this._quadratics.push(new pi(this.start,this.control2,this.end));else if(1===e)this._quadratics.push(new pi(this.start,this.control1,this.end));else{var t=this.subdivided(e);this._quadratics.push(new pi(t[0].start,t[0].control1,t[0].end)),this._quadratics.push(new pi(t[1].start,t[1].control2,t[1].end))}}else this._quadratics=null}},{key:"getNondegenerateSegments",value:function(){var e=this,t=this._start,n=this._control1,i=this._control2,r=this._end,a=this.degreeReduced(1e-9);if(t.equals(r)&&t.equals(n)&&t.equals(i))return[];if(this.hasCusp())return _.flatten(this.getQuadratics().map((function(e){return e.getNondegenerateSegments()})));if(a)return a.getNondegenerateSegments();if(gi(t,n,r)&&gi(t,i,r)&&!t.equalsEpsilon(r,1e-7)){var s=this.getXExtremaT().concat(this.getYExtremaT()).sort().map((function(t){return e.positionAt(t)})),o=[],l=t;s.length&&(o.push(new $n(t,s[0])),l=s[0]);for(var u=1;u<s.length;u++)o.push(new $n(s[u-1],s[u])),l=s[u];return o.push(new $n(l,r)),_.flatten(o.map((function(e){return e.getNondegenerateSegments()})))}return[this]}},{key:"hasCusp",value:function(){var e=this.getTCusp();return e>=0&&e<=1&&this.tangentAt(e).magnitude<1e-7}},{key:"toRS",value:function(e){var t=e.minus(this._start);return new pn(t.dot(this.getR()),t.dot(this.getS()))}},{key:"offsetTo",value:function(e,t){for(var n=[],i=[],r=0;r<32;r++){var a=r/31;t&&(a=1-a),n.push(this.positionAt(a).plus(this.tangentAt(a).perpendicular.normalized().times(e))),r>0&&i.push(new $n(n[r-1],n[r]))}return i}},{key:"getSVGPathFragment",value:function(){return this._svgPathFragment||(this._svgPathFragment="C ".concat(Fn(this._control1.x)," ").concat(Fn(this._control1.y)," ").concat(Fn(this._control2.x)," ").concat(Fn(this._control2.y)," ").concat(Fn(this._end.x)," ").concat(Fn(this._end.y))),this._svgPathFragment}},{key:"strokeLeft",value:function(e){return this.offsetTo(-e/2,!1)}},{key:"strokeRight",value:function(e){return this.offsetTo(e/2,!0)}},{key:"getInteriorExtremaTs",value:function(){var e=this.getXExtremaT().concat(this.getYExtremaT()),t=[];return _.each(e,(function(e){e>1e-10&&e<1-1e-10&&_.every(t,(function(t){return Math.abs(e-t)>1e-10}))&&t.push(e)})),t.sort()}},{key:"intersection",value:function(e){var t=this,n=[],i=oi.rotation2(-e.direction.angle).timesMatrix(oi.translation(-e.position.x,-e.position.y)),r=i.timesVector2(this._start),a=i.timesVector2(this._control1),s=i.timesVector2(this._control2),o=i.timesVector2(this._end),l=-r.y+3*a.y-3*s.y+o.y,u=3*r.y-6*a.y+3*s.y,c=-3*r.y+3*a.y,h=r.y,d=mi(l,u,c,h);return _.each(d,(function(i){if(i>=0&&i<=1){var r=t.positionAt(i),a=t.tangentAt(i).normalized(),s=a.perpendicular,o=r.minus(e.position);if(o.dot(e.direction)>0){var l=s.dot(e.direction)>0?s.negated():s,u=e.direction.perpendicular.dot(a)<0?1:-1;n.push(new Bn(o.magnitude,r,l,u,i))}}})),n}},{key:"windingIntersection",value:function(e){var t=0,n=this.intersection(e);return _.each(n,(function(e){t+=e.wind})),t}},{key:"writeToContext",value:function(e){e.bezierCurveTo(this._control1.x,this._control1.y,this._control2.x,this._control2.y,this._end.x,this._end.y)}},{key:"transformed",value:function(e){return new n(e.timesVector2(this._start),e.timesVector2(this._control1),e.timesVector2(this._control2),e.timesVector2(this._end))}},{key:"degreeReduced",value:function(e){e=e||0;var t=yi.set(this._control1).multiplyScalar(3).subtract(this._start).divideScalar(2),n=vi.set(this._control2).multiplyScalar(3).subtract(this._end).divideScalar(2);return Ai.set(t).subtract(n).magnitude<=e?new pi(this._start,t.average(n),this._end):null}},{key:"getSignedAreaFragment",value:function(){return.05*(this._start.x*(6*this._control1.y+3*this._control2.y+this._end.y)+this._control1.x*(-6*this._start.y+3*this._control2.y+3*this._end.y)+this._control2.x*(-3*this._start.y-3*this._control1.y+6*this._end.y)+this._end.x*(-this._start.y-3*this._control1.y-6*this._control2.y))}},{key:"reversed",value:function(){return new n(this._end,this._control2,this._control1,this._start)}},{key:"getSelfIntersection",value:function(){var e=this.getInteriorExtremaTs(),t=[0].concat(e).concat([1]),n=this.subdivisions(e);if(n.length<3)return null;for(var i=0;i<n.length;i++)for(var r=n[i],a=i+1;a<n.length;a++){var s=n[a],o=or.intersect(r,s);if(o.length){var l=o[0];if(l.aT>1e-7&&l.aT<1-1e-7&&l.bT>1e-7&&l.bT<1-1e-7){var u=t[i]+l.aT*(t[i+1]-t[i]),c=t[a]+l.bT*(t[a+1]-t[a]);return new Gn(l.point,u,c)}}}return null}},{key:"serialize",value:function(){return{type:"Cubic",startX:this._start.x,startY:this._start.y,control1X:this._control1.x,control1Y:this._control1.y,control2X:this._control2.x,control2Y:this._control2.y,endX:this._end.x,endY:this._end.y}}},{key:"getOverlaps",value:function(e){return e instanceof n?n.getOverlaps(this,e):null}}],[{key:"deserialize",value:function(e){return new n(new pn(e.startX,e.startY),new pn(e.control1X,e.control1Y),new pn(e.control2X,e.control2Y),new pn(e.endX,e.endY))}},{key:"extremaT",value:function(e,t,n,i){if(e===t&&e===n&&e===i)return[];var r=-3*e+9*t-9*n+3*i,a=6*e-12*t+6*n,s=-3*e+3*t;return _.filter(fi(r,a,s),bi)}},{key:"getOverlaps",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,r=[],a=e._start.x,s=-3*e._start.x+3*e._control1.x,o=3*e._start.x-6*e._control1.x+3*e._control2.x,l=-1*e._start.x+3*e._control1.x-3*e._control2.x+e._end.x,u=e._start.y,c=-3*e._start.y+3*e._control1.y,h=3*e._start.y-6*e._control1.y+3*e._control2.y,d=-1*e._start.y+3*e._control1.y-3*e._control2.y+e._end.y,p=t._start.x,f=-3*t._start.x+3*t._control1.x,m=3*t._start.x-6*t._control1.x+3*t._control2.x,g=-1*t._start.x+3*t._control1.x-3*t._control2.x+t._end.x,y=t._start.y,v=-3*t._start.y+3*t._control1.y,A=3*t._start.y-6*t._control1.y+3*t._control2.y,b=-1*t._start.y+3*t._control1.y-3*t._control2.y+t._end.y,S=Math.abs(Math.max(e._start.x,e._control1.x,e._control2.x,e._end.x,e._start.x,e._control1.x,e._control2.x,e._end.x)-Math.min(e._start.x,e._control1.x,e._control2.x,e._end.x,e._start.x,e._control1.x,e._control2.x,e._end.x)),E=Math.abs(Math.max(e._start.y,e._control1.y,e._control2.y,e._end.y,e._start.y,e._control1.y,e._control2.y,e._end.y)-Math.min(e._start.y,e._control1.y,e._control2.y,e._end.y,e._start.y,e._control1.y,e._control2.y,e._end.y)),k=Qn.polynomialGetOverlapCubic(a,s,o,l,p,f,m,g),V=Qn.polynomialGetOverlapCubic(u,c,h,d,y,v,A,b);if(null===(n=S>E?null===k||!0===k?V:k:null===V||!0===V?k:V)||!0===n)return r;for(var w=n.a,C=n.b,x=w*w,P=w*w*w,T=C*C,M=C*C*C,L=2*w*C,I=3*w*T,R=3*x*C,D=p+C*f+T*m+M*g-a,N=w*f+L*m+I*g-s,q=x*m+R*g-o,O=P*g-l,B=y+C*v+T*A+M*b-u,G=w*v+L*A+I*b-c,H=x*A+R*b-h,F=P*b-d,Y=En.solveQuadraticRootsReal(3*O,2*q,N),z=En.solveQuadraticRootsReal(3*F,2*H,G),U=_.uniq([0,1].concat(null!==Y?Y.filter(bi):[])),W=_.uniq([0,1].concat(null!==z?z.filter(bi):[])),j=0;j<U.length;j++){var X=U[j];if(Math.abs(((O*X+q)*X+N)*X+D)>i)return r}for(var Q=0;Q<W.length;Q++){var K=W[Q];if(Math.abs(((F*K+H)*K+G)*K+B)>i)return r}var J=C,Z=w+C;return J>1&&Z>1||J<0&&Z<0?r:[new On(w,C)]}}]),n}(Qn);Si.prototype.degree=3,Rn.register("Cubic",Si);var Ei=2*Math.PI,ki=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s){var o;return _classCallCheck(this,n),(o=t.call(this))._center=e,o._radius=i,o._startAngle=r,o._endAngle=a,o._anticlockwise=s,o.invalidate(),o}return _createClass(n,[{key:"setCenter",value:function(e){return this._center.equals(e)||(this._center=e,this.invalidate()),this}},{key:"center",get:function(){return this.getCenter()},set:function(e){this.setCenter(e)}},{key:"getCenter",value:function(){return this._center}},{key:"setRadius",value:function(e){return this._radius!==e&&(this._radius=e,this.invalidate()),this}},{key:"radius",get:function(){return this.getRadius()},set:function(e){this.setRadius(e)}},{key:"getRadius",value:function(){return this._radius}},{key:"setStartAngle",value:function(e){return this._startAngle!==e&&(this._startAngle=e,this.invalidate()),this}},{key:"startAngle",get:function(){return this.getStartAngle()},set:function(e){this.setStartAngle(e)}},{key:"getStartAngle",value:function(){return this._startAngle}},{key:"setEndAngle",value:function(e){return this._endAngle!==e&&(this._endAngle=e,this.invalidate()),this}},{key:"endAngle",get:function(){return this.getEndAngle()},set:function(e){this.setEndAngle(e)}},{key:"getEndAngle",value:function(){return this._endAngle}},{key:"setAnticlockwise",value:function(e){return this._anticlockwise!==e&&(this._anticlockwise=e,this.invalidate()),this}},{key:"anticlockwise",get:function(){return this.getAnticlockwise()},set:function(e){this.setAnticlockwise(e)}},{key:"getAnticlockwise",value:function(){return this._anticlockwise}},{key:"positionAt",value:function(e){return this.positionAtAngle(this.angleAt(e))}},{key:"tangentAt",value:function(e){return this.tangentAtAngle(this.angleAt(e))}},{key:"curvatureAt",value:function(e){return(this._anticlockwise?-1:1)/this._radius}},{key:"subdivided",value:function(e){if(0===e||1===e)return[this];var t=this.angleAt(0),i=this.angleAt(e),r=this.angleAt(1);return[new n(this._center,this._radius,t,i,this._anticlockwise),new n(this._center,this._radius,i,r,this._anticlockwise)]}},{key:"invalidate",value:function(){this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._bounds=null,this._svgPathFragment=null,this._radius<0&&(this._radius=-this._radius,this._startAngle+=Math.PI,this._endAngle+=Math.PI),this.invalidationEmitter.emit()}},{key:"getStart",value:function(){return null===this._start&&(this._start=this.positionAtAngle(this._startAngle)),this._start}},{key:"start",get:function(){return this.getStart()}},{key:"getEnd",value:function(){return null===this._end&&(this._end=this.positionAtAngle(this._endAngle)),this._end}},{key:"end",get:function(){return this.getEnd()}},{key:"getStartTangent",value:function(){return null===this._startTangent&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent}},{key:"startTangent",get:function(){return this.getStartTangent()}},{key:"getEndTangent",value:function(){return null===this._endTangent&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent}},{key:"endTangent",get:function(){return this.getEndTangent()}},{key:"getActualEndAngle",value:function(){return null===this._actualEndAngle&&(this._actualEndAngle=n.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle}},{key:"actualEndAngle",get:function(){return this.getActualEndAngle()}},{key:"getIsFullPerimeter",value:function(){return null===this._isFullPerimeter&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=2*Math.PI||this._anticlockwise&&this._startAngle-this._endAngle>=2*Math.PI),this._isFullPerimeter}},{key:"isFullPerimeter",get:function(){return this.getIsFullPerimeter()}},{key:"getAngleDifference",value:function(){return null===this._angleDifference&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=2*Math.PI)),this._angleDifference}},{key:"angleDifference",get:function(){return this.getAngleDifference()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=jn.NOTHING.copy().withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle&&(this.includeBoundsAtAngle(0),this.includeBoundsAtAngle(Math.PI/2),this.includeBoundsAtAngle(Math.PI),this.includeBoundsAtAngle(3*Math.PI/2))),this._bounds}},{key:"bounds",get:function(){return this.getBounds()}},{key:"getNondegenerateSegments",value:function(){return this._radius<=0||this._startAngle===this._endAngle?[]:[this]}},{key:"includeBoundsAtAngle",value:function(e){this.containsAngle(e)&&(this._bounds=this._bounds.withPoint(this._center.plus(pn.createPolar(this._radius,e))))}},{key:"mapAngle",value:function(e){return Math.abs(En.moduloBetweenDown(e-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs(En.moduloBetweenDown(e-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?En.moduloBetweenUp(e,this._startAngle-2*Math.PI,this._startAngle):En.moduloBetweenDown(e,this._startAngle,this._startAngle+2*Math.PI)}},{key:"tAtAngle",value:function(e){var t=(this.mapAngle(e)-this._startAngle)/(this.getActualEndAngle()-this._startAngle);return t}},{key:"angleAt",value:function(e){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*e}},{key:"positionAtAngle",value:function(e){return this._center.plus(pn.createPolar(this._radius,e))}},{key:"tangentAtAngle",value:function(e){var t=pn.createPolar(1,e);return this._anticlockwise?t.perpendicular:t.perpendicular.negated()}},{key:"containsAngle",value:function(e){var t=this._anticlockwise?e-this._endAngle:e-this._startAngle;return En.moduloBetweenDown(t,0,2*Math.PI)<=this.angleDifference}},{key:"getSVGPathFragment",value:function(){if(!this._svgPathFragment){var e,t=this._anticlockwise?"0":"1";if(this.angleDifference<2*Math.PI-.01)e=this.angleDifference<Math.PI?"0":"1",this._svgPathFragment="A ".concat(Fn(this._radius)," ").concat(Fn(this._radius)," 0 ").concat(e," ").concat(t," ").concat(Fn(this.end.x)," ").concat(Fn(this.end.y));else{var n=(this._startAngle+this._endAngle)/2,i=this._center.plus(pn.createPolar(this._radius,n));e="0";var r="A ".concat(Fn(this._radius)," ").concat(Fn(this._radius)," 0 ").concat(e," ").concat(t," ").concat(Fn(i.x)," ").concat(Fn(i.y)),a="A ".concat(Fn(this._radius)," ").concat(Fn(this._radius)," 0 ").concat(e," ").concat(t," ").concat(Fn(this.end.x)," ").concat(Fn(this.end.y));this._svgPathFragment="".concat(r," ").concat(a)}}return this._svgPathFragment}},{key:"strokeLeft",value:function(e){return[new n(this._center,this._radius+(this._anticlockwise?1:-1)*e/2,this._startAngle,this._endAngle,this._anticlockwise)]}},{key:"strokeRight",value:function(e){return[new n(this._center,this._radius+(this._anticlockwise?-1:1)*e/2,this._endAngle,this._startAngle,!this._anticlockwise)]}},{key:"getInteriorExtremaTs",value:function(){var e=this,t=[];return _.each([0,Math.PI/2,Math.PI,3*Math.PI/2],(function(n){if(e.containsAngle(n)){var i=e.tAtAngle(n);i>1e-10&&i<1-1e-10&&t.push(i)}})),t.sort()}},{key:"intersection",value:function(e){var t=[],n=e.position.minus(this._center),i=e.direction.dot(n),r=4*i*i-4*(n.magnitudeSquared-this._radius*this._radius);if(r<0)return t;var a=e.direction.dot(this._center)-e.direction.dot(e.position),s=Math.sqrt(r)/2,o=a-s,l=a+s;if(l<0)return t;var u=e.pointAtDistance(l),c=u.minus(this._center).normalized(),h=c.angle;if(o<0)this.containsAngle(h)&&t.push(new Bn(l,u,c.negated(),this._anticlockwise?-1:1,this.tAtAngle(h)));else{var d=e.pointAtDistance(o),p=d.minus(this._center).normalized(),f=p.angle;this.containsAngle(f)&&t.push(new Bn(o,d,p,this._anticlockwise?1:-1,this.tAtAngle(f))),this.containsAngle(h)&&t.push(new Bn(l,u,c.negated(),this._anticlockwise?-1:1,this.tAtAngle(h)))}return t}},{key:"windingIntersection",value:function(e){var t=0,n=this.intersection(e);return _.each(n,(function(e){t+=e.wind})),t}},{key:"writeToContext",value:function(e){e.arc(this._center.x,this._center.y,this._radius,this._startAngle,this._endAngle,this._anticlockwise)}},{key:"transformed",value:function(e){var t=e.timesVector2(pn.createPolar(1,this._startAngle)).minus(e.timesVector2(pn.ZERO)).angle,i=e.timesVector2(pn.createPolar(1,this._endAngle)).minus(e.timesVector2(pn.ZERO)).angle,r=e.getDeterminant()>=0?this._anticlockwise:!this._anticlockwise;Math.abs(this._endAngle-this._startAngle)===2*Math.PI&&(i=r?t-2*Math.PI:t+2*Math.PI);var a=e.getScaleVector();if(a.x!==a.y){var s=a.x*this._radius,o=a.y*this._radius;return new xi(e.timesVector2(this._center),s,o,0,t,i,r)}var l=a.x*this._radius;return new n(e.timesVector2(this._center),l,t,i,r)}},{key:"getSignedAreaFragment",value:function(){var e=this._startAngle,t=this.getActualEndAngle();return.5*this._radius*(this._radius*(t-e)+this._center.x*(Math.sin(t)-Math.sin(e))-this._center.y*(Math.cos(t)-Math.cos(e)))}},{key:"reversed",value:function(){return new n(this._center,this._radius,this._endAngle,this._startAngle,!this._anticlockwise)}},{key:"getArcLength",value:function(){return this.getAngleDifference()*this._radius}},{key:"toPiecewiseLinearOrArcSegments",value:function(){return[this]}},{key:"serialize",value:function(){return{type:"Arc",centerX:this._center.x,centerY:this._center.y,radius:this._radius,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}},{key:"getOverlaps",value:function(e){return e instanceof n?n.getOverlaps(this,e):null}}],[{key:"deserialize",value:function(e){return new n(new pn(e.centerX,e.centerY),e.radius,e.startAngle,e.endAngle,e.anticlockwise)}},{key:"computeActualEndAngle",value:function(e,t,n){return n?e>t?t:e<t?t-2*Math.PI:e:e<t?t:e>t?t+2*Math.PI:e}},{key:"getPartialOverlap",value:function(e,t,n,i,r){var a=n<t,s=a?t:n,o=a?n:t,l=Math.min(e,s);return l<o+1e-8?[]:[On.createLinear(En.clamp(En.linear(0,e,0,1,o),0,1),En.clamp(En.linear(t,n,i,r,o),0,1),En.clamp(En.linear(0,e,0,1,l),0,1),En.clamp(En.linear(t,n,i,r,l),0,1))]}},{key:"getAngularOverlaps",value:function(e,t,i,r){var a=t-e,s=a<0?-1:1;a*=s;var o,l=En.moduloBetweenDown(s*(i-e),0,Ei),u=s*(r-i)+l;return u<-1e-10?(o=-l/(u-l),n.getPartialOverlap(a,l,0,0,o).concat(n.getPartialOverlap(a,Ei,u+Ei,o,1))):u>Ei+1e-10?(o=(Ei-l)/(u-l),n.getPartialOverlap(a,l,Ei,0,o).concat(n.getPartialOverlap(a,0,u-Ei,o,1))):n.getPartialOverlap(a,l,u,0,1)}},{key:"getOverlaps",value:function(e,t){return e._center.distance(t._center)>1e-8||Math.abs(e._radius-t._radius)>1e-8?[]:n.getAngularOverlaps(e._startAngle,e.getActualEndAngle(),t._startAngle,t.getActualEndAngle())}},{key:"getCircleIntersectionPoint",value:function(e,t,n,i){var r=n.minus(e),a=r.magnitude,s=[];if(a<1e-10||a>t+i+1e-10);else if(a>t+i-1e-10)s=[e.blend(n,t/a)];else{var o=.5*(a*a-i*i+t*t)/a,l=a*a-i*i+t*t,u=4*a*a*t*t-l*l,c=e.blend(n,o/a);if(u>=1e-10){var h=Math.sqrt(u)/a/2,d=r.perpendicular.setMagnitude(h);s=[c.plus(d),c.minus(d)]}else u>-1e-10&&(s=[c])}return s}},{key:"intersect",value:function(e,t){var i=[];if(e._center.equalsEpsilon(t._center,1e-8)&&Math.abs(e._radius-t._radius)<1e-8){var r=e.positionAt(0),a=e.positionAt(1),s=t.positionAt(0),o=t.positionAt(1);r.equalsEpsilon(s,1e-8)&&i.push(new Gn(r.average(s),0,0)),r.equalsEpsilon(o,1e-8)&&i.push(new Gn(r.average(o),0,1)),a.equalsEpsilon(s,1e-8)&&i.push(new Gn(a.average(s),1,0)),a.equalsEpsilon(o,1e-8)&&i.push(new Gn(a.average(o),1,1))}else for(var l=n.getCircleIntersectionPoint(e._center,e._radius,t._center,t._radius),u=0;u<l.length;u++){var c=l[u],h=c.minus(e._center).angle,d=c.minus(t._center).angle;e.containsAngle(h)&&t.containsAngle(d)&&i.push(new Gn(c,e.tAtAngle(h),t.tAtAngle(d)))}return i}},{key:"createFromPoints",value:function(e,t,i){var r=En.circleCenterFromPoints(e,t,i);if(null===r)return new $n(e,i);var a=e.minus(r),s=t.minus(r),o=i.minus(r),l=a.angle,u=s.angle,c=o.angle,h=(a.magnitude+s.magnitude+o.magnitude)/3,d=new n(r,h,l,c,!1);return d.containsAngle(u)?d:new n(r,h,l,c,!0)}}]),n}(Qn);Rn.register("Arc",ki);var Vi=new oi,wi=function(){function e(t){_classCallCheck(this,e),this.matrix=oi.IDENTITY.copy(),this.inverse=oi.IDENTITY.copy(),this.matrixTransposed=oi.IDENTITY.copy(),this.inverseTransposed=oi.IDENTITY.copy(),this.inverseValid=!0,this.transposeValid=!0,this.inverseTransposeValid=!0,this.changeEmitter=new d,t&&this.setMatrix(t)}return _createClass(e,[{key:"setMatrix",value:function(e){this.matrix.set(e),this.invalidate()}},{key:"validateMatrix",value:function(e){}},{key:"invalidate",value:function(){this.inverseValid=!1,this.transposeValid=!1,this.inverseTransposeValid=!1,this.changeEmitter.emit()}},{key:"prepend",value:function(e){Vi.set(this.matrix),this.matrix.set(e),this.matrix.multiplyMatrix(Vi),this.invalidate()}},{key:"prependTranslation",value:function(e,t){this.matrix.prependTranslation(e,t),this.invalidate()}},{key:"append",value:function(e){this.matrix.multiplyMatrix(e),this.invalidate()}},{key:"prependTransform",value:function(e){this.prepend(e.matrix)}},{key:"appendTransform",value:function(e){this.append(e.matrix)}},{key:"applyToCanvasContext",value:function(e){e.setTransform(this.matrix.m00(),this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m02(),this.matrix.m12())}},{key:"copy",value:function(){var t=new e(this.matrix);t.inverse=this.inverse,t.matrixTransposed=this.matrixTransposed,t.inverseTransposed=this.inverseTransposed,t.inverseValid=this.inverseValid,t.transposeValid=this.transposeValid,t.inverseTransposeValid=this.inverseTransposeValid}},{key:"getMatrix",value:function(){return this.matrix}},{key:"getInverse",value:function(){return this.inverseValid||(this.inverseValid=!0,this.inverse.set(this.matrix),this.inverse.invert()),this.inverse}},{key:"getMatrixTransposed",value:function(){return this.transposeValid||(this.transposeValid=!0,this.matrixTransposed.set(this.matrix),this.matrixTransposed.transpose()),this.matrixTransposed}},{key:"getInverseTransposed",value:function(){return this.inverseTransposeValid||(this.inverseTransposeValid=!0,this.inverseTransposed.set(this.getInverse()),this.inverseTransposed.transpose()),this.inverseTransposed}},{key:"isIdentity",value:function(){return this.matrix.isFastIdentity()}},{key:"isFinite",value:function(){return this.matrix.isFinite()}},{key:"transformPosition2",value:function(e){return this.matrix.timesVector2(e)}},{key:"transformDelta2",value:function(e){var t=this.getMatrix();return new pn(t.m00()*e.x+t.m01()*e.y,t.m10()*e.x+t.m11()*e.y)}},{key:"transformNormal2",value:function(e){return this.getInverse().timesTransposeVector2(e).normalize()}},{key:"transformX",value:function(e){var t=this.getMatrix();return t.m00()*e+t.m02()}},{key:"transformY",value:function(e){var t=this.getMatrix();return t.m11()*e+t.m12()}},{key:"transformDeltaX",value:function(e){return this.getMatrix().m00()*e}},{key:"transformDeltaY",value:function(e){return this.getMatrix().m11()*e}},{key:"transformBounds2",value:function(e){return e.transformed(this.matrix)}},{key:"transformShape",value:function(e){return e.transformed(this.matrix)}},{key:"transformRay2",value:function(e){return new Jn(this.transformPosition2(e.position),this.transformDelta2(e.direction).normalized())}},{key:"inversePosition2",value:function(e){return this.getInverse().timesVector2(e)}},{key:"inverseDelta2",value:function(e){var t=this.getInverse();return new pn(t.m00()*e.x+t.m01()*e.y,t.m10()*e.x+t.m11()*e.y)}},{key:"inverseNormal2",value:function(e){return this.matrix.timesTransposeVector2(e).normalize()}},{key:"inverseX",value:function(e){var t=this.getInverse();return t.m00()*e+t.m02()}},{key:"inverseY",value:function(e){var t=this.getInverse();return t.m11()*e+t.m12()}},{key:"inverseDeltaX",value:function(e){var t=this.getInverse();return t.m00()*e}},{key:"inverseDeltaY",value:function(e){var t=this.getInverse();return t.m11()*e}},{key:"inverseBounds2",value:function(e){return e.transformed(this.getInverse())}},{key:"inverseShape",value:function(e){return e.transformed(this.getInverse())}},{key:"inverseRay2",value:function(e){return new Jn(this.inversePosition2(e.position),this.inverseDelta2(e.direction).normalized())}}]),e}();xt.register("Transform3",wi);var _i=wi,Ci=En.toDegrees,xi=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o,l){var u;return _classCallCheck(this,n),(u=t.call(this))._center=e,u._radiusX=i,u._radiusY=r,u._rotation=a,u._startAngle=s,u._endAngle=o,u._anticlockwise=l,u.invalidate(),u}return _createClass(n,[{key:"setCenter",value:function(e){return this._center.equals(e)||(this._center=e,this.invalidate()),this}},{key:"center",get:function(){return this.getCenter()},set:function(e){this.setCenter(e)}},{key:"getCenter",value:function(){return this._center}},{key:"setRadiusX",value:function(e){return this._radiusX!==e&&(this._radiusX=e,this.invalidate()),this}},{key:"radiusX",get:function(){return this.getRadiusX()},set:function(e){this.setRadiusX(e)}},{key:"getRadiusX",value:function(){return this._radiusX}},{key:"setRadiusY",value:function(e){return this._radiusY!==e&&(this._radiusY=e,this.invalidate()),this}},{key:"radiusY",get:function(){return this.getRadiusY()},set:function(e){this.setRadiusY(e)}},{key:"getRadiusY",value:function(){return this._radiusY}},{key:"setRotation",value:function(e){return this._rotation!==e&&(this._rotation=e,this.invalidate()),this}},{key:"rotation",get:function(){return this.getRotation()},set:function(e){this.setRotation(e)}},{key:"getRotation",value:function(){return this._rotation}},{key:"setStartAngle",value:function(e){return this._startAngle!==e&&(this._startAngle=e,this.invalidate()),this}},{key:"startAngle",get:function(){return this.getStartAngle()},set:function(e){this.setStartAngle(e)}},{key:"getStartAngle",value:function(){return this._startAngle}},{key:"setEndAngle",value:function(e){return this._endAngle!==e&&(this._endAngle=e,this.invalidate()),this}},{key:"endAngle",get:function(){return this.getEndAngle()},set:function(e){this.setEndAngle(e)}},{key:"getEndAngle",value:function(){return this._endAngle}},{key:"setAnticlockwise",value:function(e){return this._anticlockwise!==e&&(this._anticlockwise=e,this.invalidate()),this}},{key:"anticlockwise",get:function(){return this.getAnticlockwise()},set:function(e){this.setAnticlockwise(e)}},{key:"getAnticlockwise",value:function(){return this._anticlockwise}},{key:"positionAt",value:function(e){return this.positionAtAngle(this.angleAt(e))}},{key:"tangentAt",value:function(e){return this.tangentAtAngle(this.angleAt(e))}},{key:"curvatureAt",value:function(e){var t=this.angleAt(e),n=this._radiusX*Math.sin(t),i=this._radiusY*Math.cos(t),r=Math.pow(i*i+n*n,1.5);return(this._anticlockwise?-1:1)*this._radiusX*this._radiusY/r}},{key:"subdivided",value:function(e){if(0===e||1===e)return[this];var t=this.angleAt(0),i=this.angleAt(e),r=this.angleAt(1);return[new n(this._center,this._radiusX,this._radiusY,this._rotation,t,i,this._anticlockwise),new n(this._center,this._radiusX,this._radiusY,this._rotation,i,r,this._anticlockwise)]}},{key:"invalidate",value:function(){if(this._unitTransform=null,this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._unitArcSegment=null,this._bounds=null,this._svgPathFragment=null,this._radiusX<0&&(this._radiusX=-this._radiusX,this._startAngle=Math.PI-this._startAngle,this._endAngle=Math.PI-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusY<0&&(this._radiusY=-this._radiusY,this._startAngle=-this._startAngle,this._endAngle=-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusX<this._radiusY){this._rotation+=Math.PI/2,this._startAngle-=Math.PI/2,this._endAngle-=Math.PI/2;var e=this._radiusX;this._radiusX=this._radiusY,this._radiusY=e}if(this._radiusX<this._radiusY)throw new Error("Not verified to work if radiusX < radiusY");this.invalidationEmitter.emit()}},{key:"getUnitTransform",value:function(){return null===this._unitTransform&&(this._unitTransform=n.computeUnitTransform(this._center,this._radiusX,this._radiusY,this._rotation)),this._unitTransform}},{key:"unitTransform",get:function(){return this.getUnitTransform()}},{key:"getStart",value:function(){return null===this._start&&(this._start=this.positionAtAngle(this._startAngle)),this._start}},{key:"start",get:function(){return this.getStart()}},{key:"getEnd",value:function(){return null===this._end&&(this._end=this.positionAtAngle(this._endAngle)),this._end}},{key:"end",get:function(){return this.getEnd()}},{key:"getStartTangent",value:function(){return null===this._startTangent&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent}},{key:"startTangent",get:function(){return this.getStartTangent()}},{key:"getEndTangent",value:function(){return null===this._endTangent&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent}},{key:"endTangent",get:function(){return this.getEndTangent()}},{key:"getActualEndAngle",value:function(){return null===this._actualEndAngle&&(this._actualEndAngle=ki.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle}},{key:"actualEndAngle",get:function(){return this.getActualEndAngle()}},{key:"getIsFullPerimeter",value:function(){return null===this._isFullPerimeter&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=2*Math.PI||this._anticlockwise&&this._startAngle-this._endAngle>=2*Math.PI),this._isFullPerimeter}},{key:"isFullPerimeter",get:function(){return this.getIsFullPerimeter()}},{key:"getAngleDifference",value:function(){return null===this._angleDifference&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=2*Math.PI)),this._angleDifference}},{key:"angleDifference",get:function(){return this.getAngleDifference()}},{key:"getUnitArcSegment",value:function(){return null===this._unitArcSegment&&(this._unitArcSegment=new ki(pn.ZERO,1,this._startAngle,this._endAngle,this._anticlockwise)),this._unitArcSegment}},{key:"unitArcSegment",get:function(){return this.getUnitArcSegment()}},{key:"getBounds",value:function(){if(null===this._bounds&&(this._bounds=jn.NOTHING.withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle)){var e=Math.atan(-this._radiusY/this._radiusX*Math.tan(this._rotation)),t=Math.atan(this._radiusY/this._radiusX/Math.tan(this._rotation));this.possibleExtremaAngles=[e,e+Math.PI,t,t+Math.PI],_.each(this.possibleExtremaAngles,this.includeBoundsAtAngle.bind(this))}return this._bounds}},{key:"bounds",get:function(){return this.getBounds()}},{key:"getNondegenerateSegments",value:function(){if(this._radiusX<=0||this._radiusY<=0||this._startAngle===this._endAngle)return[];if(this._radiusX===this._radiusY){var e=this._startAngle+this._rotation,t=this._endAngle+this._rotation;return Math.abs(this._endAngle-this._startAngle)===2*Math.PI&&(t=this._anticlockwise?e-2*Math.PI:e+2*Math.PI),[new ki(this._center,this._radiusX,e,t,this._anticlockwise)]}return[this]}},{key:"includeBoundsAtAngle",value:function(e){this.unitArcSegment.containsAngle(e)&&(this._bounds=this._bounds.withPoint(this.positionAtAngle(e)))}},{key:"mapAngle",value:function(e){return Math.abs(En.moduloBetweenDown(e-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs(En.moduloBetweenDown(e-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?En.moduloBetweenUp(e,this._startAngle-2*Math.PI,this._startAngle):En.moduloBetweenDown(e,this._startAngle,this._startAngle+2*Math.PI)}},{key:"tAtAngle",value:function(e){return(this.mapAngle(e)-this._startAngle)/(this.getActualEndAngle()-this._startAngle)}},{key:"angleAt",value:function(e){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*e}},{key:"positionAtAngle",value:function(e){return this.getUnitTransform().transformPosition2(pn.createPolar(1,e))}},{key:"tangentAtAngle",value:function(e){var t=this.getUnitTransform().transformNormal2(pn.createPolar(1,e));return this._anticlockwise?t.perpendicular:t.perpendicular.negated()}},{key:"offsetTo",value:function(e,t){for(var n=[],i=[],r=0;r<32;r++){var a=r/31;t&&(a=1-a);var s=this.angleAt(a);n.push(this.positionAtAngle(s).plus(this.tangentAtAngle(s).perpendicular.normalized().times(e))),r>0&&i.push(new $n(n[r-1],n[r]))}return i}},{key:"getSVGPathFragment",value:function(){if(!this._svgPathFragment){var e,t=this._anticlockwise?"0":"1",n=Ci(this._rotation);if(this.getAngleDifference()<2*Math.PI-.01)e=this.getAngleDifference()<Math.PI?"0":"1",this._svgPathFragment="A ".concat(Fn(this._radiusX)," ").concat(Fn(this._radiusY)," ").concat(n," ").concat(e," ").concat(t," ").concat(Fn(this.getEnd().x)," ").concat(Fn(this.getEnd().y));else{var i=(this._startAngle+this._endAngle)/2,r=this.positionAtAngle(i);e="0";var a="A ".concat(Fn(this._radiusX)," ").concat(Fn(this._radiusY)," ").concat(n," ").concat(e," ").concat(t," ").concat(Fn(r.x)," ").concat(Fn(r.y)),s="A ".concat(Fn(this._radiusX)," ").concat(Fn(this._radiusY)," ").concat(n," ").concat(e," ").concat(t," ").concat(Fn(this.getEnd().x)," ").concat(Fn(this.getEnd().y));this._svgPathFragment="".concat(a," ").concat(s)}}return this._svgPathFragment}},{key:"strokeLeft",value:function(e){return this.offsetTo(-e/2,!1)}},{key:"strokeRight",value:function(e){return this.offsetTo(e/2,!0)}},{key:"getInteriorExtremaTs",value:function(){var e=this,t=[];return _.each(this.possibleExtremaAngles,(function(n){if(e.unitArcSegment.containsAngle(n)){var i=e.tAtAngle(n);i>1e-10&&i<1-1e-10&&t.push(i)}})),t.sort()}},{key:"intersection",value:function(e){var t=this.getUnitTransform(),n=t.inverseRay2(e),i=this.getUnitArcSegment().intersection(n);return _.map(i,(function(n){var i=t.transformPosition2(n.point),r=e.position.distance(i),a=t.inverseNormal2(n.normal);return new Bn(r,i,a,n.wind,n.t)}))}},{key:"windingIntersection",value:function(e){var t=this.getUnitTransform().inverseRay2(e);return this.getUnitArcSegment().windingIntersection(t)}},{key:"writeToContext",value:function(e){e.ellipse?e.ellipse(this._center.x,this._center.y,this._radiusX,this._radiusY,this._rotation,this._startAngle,this._endAngle,this._anticlockwise):(this.getUnitTransform().getMatrix().canvasAppendTransform(e),e.arc(0,0,1,this._startAngle,this._endAngle,this._anticlockwise),this.getUnitTransform().getInverse().canvasAppendTransform(e))}},{key:"transformed",value:function(e){var t=e.timesVector2(pn.createPolar(this._radiusX,this._rotation)).minus(e.timesVector2(pn.ZERO)),i=e.timesVector2(pn.createPolar(this._radiusY,this._rotation+Math.PI/2)).minus(e.timesVector2(pn.ZERO)),r=t.angle,a=t.magnitude,s=i.magnitude,o=e.getDeterminant()<0,l=o?!this._anticlockwise:this._anticlockwise,u=o?-this._startAngle:this._startAngle,c=o?-this._endAngle:this._endAngle;return Math.abs(this._endAngle-this._startAngle)===2*Math.PI&&(c=l?u-2*Math.PI:u+2*Math.PI),new n(e.timesVector2(this._center),a,s,r,u,c,l)}},{key:"getSignedAreaFragment",value:function(){var e=this._startAngle,t=this.getActualEndAngle(),n=Math.sin(e),i=Math.sin(t),r=Math.cos(e),a=Math.cos(t);return.5*(this._radiusX*this._radiusY*(t-e)+Math.cos(this._rotation)*(this._radiusX*this._center.y*(r-a)+this._radiusY*this._center.x*(i-n))+Math.sin(this._rotation)*(this._radiusX*this._center.x*(a-r)+this._radiusY*this._center.y*(i-n)))}},{key:"reversed",value:function(){return new n(this._center,this._radiusX,this._radiusY,this._rotation,this._endAngle,this._startAngle,!this._anticlockwise)}},{key:"serialize",value:function(){return{type:"EllipticalArc",centerX:this._center.x,centerY:this._center.y,radiusX:this._radiusX,radiusY:this._radiusY,rotation:this._rotation,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}},{key:"getOverlaps",value:function(e){return e instanceof n?n.getOverlaps(this,e):null}}],[{key:"deserialize",value:function(e){return new n(new pn(e.centerX,e.centerY),e.radiusX,e.radiusY,e.rotation,e.startAngle,e.endAngle,e.anticlockwise)}},{key:"getOverlapType",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;if(e._center.distance(t._center)<n){var i=Math.abs(e._radiusX-t._radiusX)<n&&Math.abs(e._radiusY-t._radiusY)<n,r=Math.abs(e._radiusX-t._radiusY)<n&&Math.abs(e._radiusY-t._radiusX)<n;if(i&&Math.abs(En.moduloBetweenDown(e._rotation-t._rotation+Math.PI/2,0,Math.PI)-Math.PI/2)<n)return Pi.MATCHING_OVERLAP;if(r&&Math.abs(En.moduloBetweenDown(e._rotation-t._rotation,0,Math.PI)-Math.PI/2)<n)return Pi.OPPOSITE_OVERLAP}return Pi.NONE}},{key:"getOverlaps",value:function(e,t){return n.getOverlapType(e,t)===Pi.NONE?[]:ki.getAngularOverlaps(e._startAngle+e._rotation,e.getActualEndAngle()+e._rotation,t._startAngle+t._rotation,t.getActualEndAngle()+t._rotation)}},{key:"intersect",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10,r=n.getOverlapType(e,t,i);if(r===Pi.NONE)return or.intersect(e,t);var a=[],s=e.positionAt(0),o=e.positionAt(1),l=t.positionAt(0),u=t.positionAt(1);return s.equalsEpsilon(l,i)&&a.push(new Gn(s.average(l),0,0)),s.equalsEpsilon(u,i)&&a.push(new Gn(s.average(u),0,1)),o.equalsEpsilon(l,i)&&a.push(new Gn(o.average(l),1,0)),o.equalsEpsilon(u,i)&&a.push(new Gn(o.average(u),1,1)),a}},{key:"computeUnitTransform",value:function(e,t,n,i){return new _i(oi.translation(e.x,e.y).timesMatrix(oi.rotation2(i)).timesMatrix(oi.scaling(t,n)))}}]),n}(Qn),Pi=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(Pi,"MATCHING_OVERLAP",new Pi),_defineProperty(Pi,"OPPOSITE_OVERLAP",new Pi),_defineProperty(Pi,"NONE",new Pi),_defineProperty(Pi,"enumeration",new re(Pi)),Rn.register("EllipticalArc",xi);var Ti=function(){function e(t,n,i){var r=this;if(_classCallCheck(this,e),this.invalidatedEmitter=new d,this.segments=[],this.points=n||(t&&t.length?_.map(t,(function(e){return e.start})).concat(t[t.length-1].end):[]),this.closed=!!i,this._strokedSubpaths=null,this._strokedSubpathsComputed=!1,this._strokedStyles=null,this._bounds=null,this._invalidateListener=this.invalidate.bind(this),this._invalidatingPoints=!1,t)for(var a=0;a<t.length;a++)_.each(t[a].getNondegenerateSegments(),(function(e){r.addSegmentDirectly(e)}))}return _createClass(e,[{key:"getBounds",value:function(){if(null===this._bounds){var e=jn.NOTHING.copy();_.each(this.segments,(function(t){e.includeBounds(t.getBounds())})),this._bounds=e}return this._bounds}},{key:"bounds",get:function(){return this.getBounds()}},{key:"getArcLength",value:function(e,t,n){for(var i=0,r=0;r<this.segments.length;r++)i+=this.segments[r].getArcLength(e,t,n);return i}},{key:"copy",value:function(){return new e(this.segments.slice(0),this.points.slice(0),this.closed)}},{key:"invalidatePoints",value:function(){this._invalidatingPoints=!0;for(var e=this.segments.length,t=0;t<e;t++)this.segments[t].invalidate();this._invalidatingPoints=!1,this.invalidate()}},{key:"invalidate",value:function(){this._invalidatingPoints||(this._bounds=null,this._strokedSubpathsComputed=!1,this.invalidatedEmitter.emit())}},{key:"addPoint",value:function(e){return this.points.push(e),this}},{key:"addSegmentDirectly",value:function(e){return this.segments.push(e),e.invalidationEmitter.addListener(this._invalidateListener),this}},{key:"addSegment",value:function(e){for(var t=e.getNondegenerateSegments().length,n=0;n<t;n++)this.addSegmentDirectly(e);return this.invalidate(),this}},{key:"addClosingSegment",value:function(){if(this.hasClosingSegment()){var e=this.getClosingSegment();this.addSegmentDirectly(e),this.invalidate(),this.addPoint(this.getFirstPoint()),this.closed=!0}}},{key:"close",value:function(){this.closed=!0,this.addClosingSegment()}},{key:"getLength",value:function(){return this.points.length}},{key:"getFirstPoint",value:function(){return _.first(this.points)}},{key:"getLastPoint",value:function(){return _.last(this.points)}},{key:"getFirstSegment",value:function(){return _.first(this.segments)}},{key:"getLastSegment",value:function(){return _.last(this.segments)}},{key:"getFillSegments",value:function(){var e=this.segments.slice();return this.hasClosingSegment()&&e.push(this.getClosingSegment()),e}},{key:"isDrawable",value:function(){return this.segments.length>0}},{key:"isClosed",value:function(){return this.closed}},{key:"hasClosingSegment",value:function(){return!this.getFirstPoint().equalsEpsilon(this.getLastPoint(),1e-9)}},{key:"getClosingSegment",value:function(){return new $n(this.getLastPoint(),this.getFirstPoint())}},{key:"writeToContext",value:function(e){if(this.isDrawable()){var t=this.getFirstSegment().start;e.moveTo(t.x,t.y);var n=this.segments.length;this.closed&&n>=2&&this.segments[n-1]instanceof $n&&n--;for(var i=0;i<n;i++)this.segments[i].writeToContext(e);this.closed&&e.closePath()}}},{key:"toPiecewiseLinear",value:function(t){return new e(_.flatten(_.map(this.segments,(function(e){return e.toPiecewiseLinearSegments(t)}))),null,this.closed)}},{key:"transformed",value:function(t){return new e(_.map(this.segments,(function(e){return e.transformed(t)})),_.map(this.points,(function(e){return t.timesVector2(e)})),this.closed)}},{key:"nonlinearTransformed",value:function(t){return new e(_.flatten(_.map(this.segments,(function(e){return t.methodName&&e[t.methodName]?e[t.methodName](t):e.toPiecewiseLinearSegments(t)}))),null,this.closed)}},{key:"getBoundsWithTransform",value:function(e){for(var t=jn.NOTHING.copy(),n=this.segments.length,i=0;i<n;i++)t.includeBounds(this.segments[i].getBoundsWithTransform(e));return t}},{key:"offset",value:function(t){if(!this.isDrawable())return new e([],null,this.closed);if(0===t)return new e(this.segments.slice(),null,this.closed);var n,i=this.segments.slice(),r=[];for(n=0;n<i.length;n++)r.push(i[n].strokeLeft(2*t));var a=[];for(n=0;n<i.length;n++){if(this.closed||n>0){var s=(n>0?n:i.length)-1,o=i[n].start,l=i[s].endTangent,u=i[n].startTangent,c=l.perpendicular.negated().times(t).angle,h=u.perpendicular.negated().times(t).angle,d=l.perpendicular.dot(u)>0;a.push(new ki(o,Math.abs(t),c,h,d))}a=a.concat(r[n])}return new e(a,null,this.closed)}},{key:"stroked",value:function(t){if(!this.isDrawable())return[];if(void 0===t&&(t=new qn),this._strokedSubpathsComputed&&this._strokedStyles.equals(t))return this._strokedSubpaths;var n,i=t.lineWidth,r=[],a=[],s=this.getFirstSegment(),o=this.getLastSegment();function l(e){r=r.concat(e)}function u(e){a=a.concat(e)}var c,h=o.end.equals(s.start),d=h?null:new $n(this.segments[this.segments.length-1].end,this.segments[0].start);for(n=0;n<this.segments.length;n++)n>0&&l(t.leftJoin(this.segments[n].start,this.segments[n-1].endTangent,this.segments[n].startTangent)),l(this.segments[n].strokeLeft(i));for(n=this.segments.length-1;n>=0;n--)n<this.segments.length-1&&u(t.rightJoin(this.segments[n].end,this.segments[n].endTangent,this.segments[n+1].startTangent)),u(this.segments[n].strokeRight(i));return this.closed?(h?(l(t.leftJoin(o.end,o.endTangent,s.startTangent)),u(t.rightJoin(o.end,o.endTangent,s.startTangent))):(l(t.leftJoin(d.start,o.endTangent,d.startTangent)),l(d.strokeLeft(i)),l(t.leftJoin(d.end,d.endTangent,s.startTangent)),u(t.rightJoin(d.end,d.endTangent,s.startTangent)),u(d.strokeRight(i)),u(t.rightJoin(d.start,o.endTangent,d.startTangent))),c=[new e(r,null,!0),new e(a,null,!0)]):c=[new e(r.concat(t.cap(o.end,o.endTangent)).concat(a).concat(t.cap(s.start,s.startTangent.negated())),null,!0)],this._strokedSubpaths=c,this._strokedSubpathsComputed=!0,this._strokedStyles=t.copy(),c}},{key:"dashed",value:function(t,n,i,r){function a(e,t){var n=e[e.length-1].concat(t[0]),i=e.slice(0,e.length-1).concat([n]).concat(t.slice(1));return i}function s(e,t){if(!e.hasRightFilled||!t.hasLeftFilled)return!1;var n=_.last(_.last(e.segmentArrays)),i=t.segmentArrays[0][0];return n.end.distance(i.start)<1e-5}for(var o=[],l=0;l<this.segments.length;l++){var u=this.segments[l],c=u.getDashValues(t,n,i,r);o.push(c),n+=c.arcLength;var h=[0].concat(c.values).concat([1]),d=c.initiallyInside;c.hasLeftFilled=d,c.hasRightFilled=h.length%2==0?d:!d,c.segmentArrays=[];for(var p=d?0:1;p<h.length-1;p+=2)h[p]!==h[p+1]&&c.segmentArrays.push([u.slice(h[p],h[p+1])])}for(var f=o.length-1;f>=1;f--){var m=o[f-1],g=o[f];s(m,g)&&o.splice(f-1,2,{segmentArrays:a(m.segmentArrays,g.segmentArrays),hasLeftFilled:m.hasLeftFilled,hasRightFilled:g.hasRightFilled})}if(o.length>1&&s(o[o.length-1],o[0])){var y=o.pop(),v=o.shift();o.push({segmentArrays:a(y.segmentArrays,v.segmentArrays),hasLeftFilled:y.hasLeftFilled,hasRightFilled:v.hasRightFilled})}return this.closed&&1===o.length&&1===o[0].segmentArrays.length&&o[0].hasLeftFilled&&o[0].hasRightFilled?[new e(o[0].segmentArrays[0],null,!0)]:_.flatten(o.map((function(e){return e.segmentArrays}))).map((function(t){return new e(t)}))}},{key:"serialize",value:function(){return{type:"Subpath",segments:this.segments.map((function(e){return e.serialize()})),points:this.points.map((function(e){return{x:e.x,y:e.y}})),closed:this.closed}}}],[{key:"deserialize",value:function(t){return new e(t.segments.map(Qn.deserialize),t.points.map((function(e){return new pn(e.x,e.y)})),t.closed)}}]),e}();Rn.register("Subpath",Ti);var Mi=Ti,Li=Math.random;function Ii(e,t){return new pn(e,t)}function Ri(e,t,n,i){return n.copy().subtract(e).multiplyScalar((1-i)/6).add(t)}var Di=function(){function e(t,n){var i=this;if(_classCallCheck(this,e),this.subpaths=[],this._bounds=n?n.copy():null,this.invalidatedEmitter=new d,this.resetControlPoints(),this._invalidateListener=this.invalidate.bind(this),this._invalidatingPoints=!1,this._immutable=!1,"object"===_typeof(t))for(var r=0;r<t.length;r++)this.addSubpath(t[r]);t&&"object"!==_typeof(t)&&_.each(Un.parse(t),(function(e){i[e.cmd].apply(i,e.args)})),this.invalidate()}return _createClass(e,[{key:"resetControlPoints",value:function(){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=null}},{key:"setQuadraticControlPoint",value:function(e){this.lastQuadraticControlPoint=e,this.lastCubicControlPoint=null}},{key:"setCubicControlPoint",value:function(e){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=e}},{key:"moveTo",value:function(e,t){return this.moveToPoint(Ii(e,t))}},{key:"moveToRelative",value:function(e,t){return this.moveToPointRelative(Ii(e,t))}},{key:"moveToPointRelative",value:function(e){return this.moveToPoint(this.getRelativePoint().plus(e))}},{key:"moveToPoint",value:function(e){return this.addSubpath((new Mi).addPoint(e)),this.resetControlPoints(),this}},{key:"lineTo",value:function(e,t){return this.lineToPoint(Ii(e,t))}},{key:"lineToRelative",value:function(e,t){return this.lineToPointRelative(Ii(e,t))}},{key:"lineToPointRelative",value:function(e){return this.lineToPoint(this.getRelativePoint().plus(e))}},{key:"lineToPoint",value:function(e){if(this.hasSubpaths()){var t=this.getLastSubpath().getLastPoint(),n=e,i=new $n(t,n);this.getLastSubpath().addPoint(n),this.addSegmentAndBounds(i)}else this.ensure(e);return this.resetControlPoints(),this}},{key:"horizontalLineTo",value:function(e){return this.lineTo(e,this.getRelativePoint().y)}},{key:"horizontalLineToRelative",value:function(e){return this.lineToRelative(e,0)}},{key:"verticalLineTo",value:function(e){return this.lineTo(this.getRelativePoint().x,e)}},{key:"verticalLineToRelative",value:function(e){return this.lineToRelative(0,e)}},{key:"zigZagTo",value:function(e,t,n,i,r){return this.zigZagToPoint(new pn(e,t),n,i,r)}},{key:"zigZagToPoint",value:function(e,t,n,i){this.ensure(e);var r,a=this.getLastPoint(),s=e.minus(a),o=s.normalized(),l=o.perpendicular.times(t);r=i?s.magnitude/(n+.5):s.magnitude/n;for(var u=0;u<n;u++){var c=o.times(u*r).plus(a),h=c.plus(o.times(r/4)).plus(l),d=c.plus(o.times(3*r/4)).minus(l);this.lineToPoint(h),this.lineToPoint(d)}if(i){var p=o.times(n*r).plus(a).plus(o.times(r/4)).plus(l);this.lineToPoint(p)}return this.lineToPoint(e)}},{key:"quadraticCurveTo",value:function(e,t,n,i){return this.quadraticCurveToPoint(Ii(e,t),Ii(n,i))}},{key:"quadraticCurveToRelative",value:function(e,t,n,i){return this.quadraticCurveToPointRelative(Ii(e,t),Ii(n,i))}},{key:"quadraticCurveToPointRelative",value:function(e,t){var n=this.getRelativePoint();return this.quadraticCurveToPoint(n.plus(e),n.plus(t))}},{key:"smoothQuadraticCurveTo",value:function(e,t){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),Ii(e,t))}},{key:"smoothQuadraticCurveToRelative",value:function(e,t){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),Ii(e,t).plus(this.getRelativePoint()))}},{key:"quadraticCurveToPoint",value:function(e,t){var n=this;this.ensure(e);var i=this.getLastSubpath().getLastPoint(),r=new pi(i,e,t);this.getLastSubpath().addPoint(t);var a=r.getNondegenerateSegments();return _.each(a,(function(e){n.addSegmentAndBounds(e)})),this.setQuadraticControlPoint(e),this}},{key:"cubicCurveTo",value:function(e,t,n,i,r,a){return this.cubicCurveToPoint(Ii(e,t),Ii(n,i),Ii(r,a))}},{key:"cubicCurveToRelative",value:function(e,t,n,i,r,a){return this.cubicCurveToPointRelative(Ii(e,t),Ii(n,i),Ii(r,a))}},{key:"cubicCurveToPointRelative",value:function(e,t,n){var i=this.getRelativePoint();return this.cubicCurveToPoint(i.plus(e),i.plus(t),i.plus(n))}},{key:"smoothCubicCurveTo",value:function(e,t,n,i){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),Ii(e,t),Ii(n,i))}},{key:"smoothCubicCurveToRelative",value:function(e,t,n,i){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),Ii(e,t).plus(this.getRelativePoint()),Ii(n,i).plus(this.getRelativePoint()))}},{key:"cubicCurveToPoint",value:function(e,t,n){var i=this;this.ensure(e);var r=this.getLastSubpath().getLastPoint(),a=new Si(r,e,t,n).getNondegenerateSegments();return _.each(a,(function(e){i.addSegmentAndBounds(e)})),this.getLastSubpath().addPoint(n),this.setCubicControlPoint(t),this}},{key:"arc",value:function(e,t,n,i,r,a){return this.arcPoint(Ii(e,t),n,i,r,a)}},{key:"arcPoint",value:function(e,t,n,i,r){void 0===r&&(r=!1);var a=new ki(e,t,n,i,r),s=a.getStart(),o=a.getEnd();return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!s.equals(this.getLastSubpath().getLastPoint(),0)&&this.addSegmentAndBounds(new $n(this.getLastSubpath().getLastPoint(),s)),this.hasSubpaths()||this.addSubpath(new Mi),this.getLastSubpath().addPoint(s),this.getLastSubpath().addPoint(o),this.addSegmentAndBounds(a),this.resetControlPoints(),this}},{key:"ellipticalArc",value:function(e,t,n,i,r,a,s,o){return this.ellipticalArcPoint(Ii(e,t),n,i,r,a,s,o)}},{key:"ellipticalArcPoint",value:function(e,t,n,i,r,a,s){void 0===s&&(s=!1);var o=new xi(e,t,n,i,r,a,s),l=o.start,u=o.end;return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!l.equals(this.getLastSubpath().getLastPoint(),0)&&this.addSegmentAndBounds(new $n(this.getLastSubpath().getLastPoint(),l)),this.hasSubpaths()||this.addSubpath(new Mi),this.getLastSubpath().addPoint(l),this.getLastSubpath().addPoint(u),this.addSegmentAndBounds(o),this.resetControlPoints(),this}},{key:"close",value:function(){if(this.hasSubpaths()){var e=this.getLastSubpath(),t=new Mi;e.close(),this.addSubpath(t),t.addPoint(e.getFirstPoint())}return this.resetControlPoints(),this}},{key:"newSubpath",value:function(){return this.addSubpath(new Mi),this.resetControlPoints(),this}},{key:"makeImmutable",value:function(){return this._immutable=!0,this.notifyInvalidationListeners(),this}},{key:"isImmutable",value:function(){return this._immutable}},{key:"ellipticalArcToRelative",value:function(e,t,n,i,r,a,s){var o=this.getRelativePoint();return this.ellipticalArcTo(e,t,n,i,r,a+o.x,s+o.y)}},{key:"ellipticalArcTo",value:function(e,t,n,i,r,a,s){var o=this,l=new pn(a,s);this.ensure(l);var u=this.getLastSubpath().getLastPoint();this.getLastSubpath().addPoint(l),e<0&&(e*=-1),t<0&&(t*=-1);var c=e*e,h=t*t,d=u.minus(l).dividedScalar(2).rotated(-n),p=d.x*d.x,f=d.y*d.y,m=new pn(e*d.y/t,-t*d.x/e),g=p/c+f/h;g>1&&(c=(e*=Math.sqrt(g))*e,h=(t*=Math.sqrt(g))*t,m=new pn(e*d.y/t,-t*d.x/e)),m.multiplyScalar(Math.sqrt(Math.max(0,(c*h-c*f-h*p)/(c*f+h*p)))),i===r&&m.multiplyScalar(-1);var y=u.blend(l,.5).plus(m.rotated(n));function v(e,t){return(e.x*t.y-e.y*t.x>0?1:-1)*e.angleBetween(t)}var A=new pn((d.x-m.x)/e,(d.y-m.y)/t),b=new pn((-d.x-m.x)/e,(-d.y-m.y)/t),S=v(pn.X_UNIT,A),E=v(A,b)%(2*Math.PI);!r&&E>0&&(E-=2*Math.PI),r&&E<0&&(E+=2*Math.PI);var k=new xi(y,e,t,n,S,S+E,!r).getNondegenerateSegments();return _.each(k,(function(e){o.addSegmentAndBounds(e)})),this}},{key:"circle",value:function(e,t,n){if("object"===_typeof(e)){var i=e;return n=t,this.arcPoint(i,n,0,2*Math.PI,!1).close()}return this.arcPoint(Ii(e,t),n,0,2*Math.PI,!1).close()}},{key:"ellipse",value:function(e,t,n,i,r){if("object"===_typeof(e)){var a=e;return r=i,i=n,n=t,this.ellipticalArcPoint(a,n,i,r||0,0,2*Math.PI,!1).close()}return this.ellipticalArcPoint(Ii(e,t),n,i,r||0,0,2*Math.PI,!1).close()}},{key:"rect",value:function(e,t,n,i){var r=new Mi;return this.addSubpath(r),r.addPoint(Ii(e,t)),r.addPoint(Ii(e+n,t)),r.addPoint(Ii(e+n,t+i)),r.addPoint(Ii(e,t+i)),this.addSegmentAndBounds(new $n(r.points[0],r.points[1])),this.addSegmentAndBounds(new $n(r.points[1],r.points[2])),this.addSegmentAndBounds(new $n(r.points[2],r.points[3])),r.close(),this.addSubpath(new Mi),this.getLastSubpath().addPoint(Ii(e,t)),this.resetControlPoints(),this}},{key:"roundRect",value:function(e,t,n,i,r,a){var s=e+r,o=e+n-r,l=t+a,u=t+i-a;return r===a?this.arc(o,l,r,-Math.PI/2,0,!1).arc(o,u,r,0,Math.PI/2,!1).arc(s,u,r,Math.PI/2,Math.PI,!1).arc(s,l,r,Math.PI,3*Math.PI/2,!1).close():this.ellipticalArc(o,l,r,a,0,-Math.PI/2,0,!1).ellipticalArc(o,u,r,a,0,0,Math.PI/2,!1).ellipticalArc(s,u,r,a,0,Math.PI/2,Math.PI,!1).ellipticalArc(s,l,r,a,0,Math.PI,3*Math.PI/2,!1).close(),this}},{key:"polygon",value:function(e){var t=e.length;if(t>0){this.moveToPoint(e[0]);for(var n=1;n<t;n++)this.lineToPoint(e[n])}return this.close()}},{key:"cardinalSpline",value:function(e,t){t=A({tension:0,isClosedLineSegments:!1},t);for(var n=e.length,i=t.isClosedLineSegments?n:n-1,r=0;r<i;r++){var a=void 0,s=[(a=0!==r||t.isClosedLineSegments?r!==i-1||t.isClosedLineSegments?[e[(r-1+n)%n],e[r%n],e[(r+1)%n],e[(r+2)%n]]:[e[r-1],e[r],e[r+1],e[r+1]]:[e[0],e[0],e[1],e[2]])[1],Ri(a[0],a[1],a[2],t.tension),Ri(a[3],a[2],a[1],t.tension),a[2]];0===r&&(this.ensure(s[0]),this.getLastSubpath().addPoint(s[0])),this.cubicCurveToPoint(s[1],s[2],s[3])}return this}},{key:"copy",value:function(){return new e(_.map(this.subpaths,(function(e){return e.copy()})),this.bounds)}},{key:"writeToContext",value:function(e){for(var t=this.subpaths.length,n=0;n<t;n++)this.subpaths[n].writeToContext(e)}},{key:"getSVGPath",value:function(){for(var e="",t=this.subpaths.length,n=0;n<t;n++){var i=this.subpaths[n];if(i.isDrawable()){var r=i.segments[0].start;e+="M ".concat(Fn(r.x)," ").concat(Fn(r.y)," ");for(var a=0;a<i.segments.length;a++)e+="".concat(i.segments[a].getSVGPathFragment()," ");i.isClosed()&&(e+="Z ")}}return e}},{key:"transformed",value:function(t){var n=_.map(this.subpaths,(function(e){return e.transformed(t)}));return new e(n,_.reduce(n,(function(e,t){return e.union(t.bounds)}),jn.NOTHING))}},{key:"nonlinearTransformed",value:function(t){t=A({minLevels:0,maxLevels:7,distanceEpsilon:.16,curveEpsilon:t&&t.includeCurvature?.002:null},t);var n=_.map(this.subpaths,(function(e){return e.nonlinearTransformed(t)}));return new e(n,_.reduce(n,(function(e,t){return e.union(t.bounds)}),jn.NOTHING))}},{key:"polarToCartesian",value:function(e){return this.nonlinearTransformed(A({pointMap:function(e){return pn.createPolar(e.y,e.x)},methodName:"polarToCartesian"},e))}},{key:"toPiecewiseLinear",value:function(e){return this.nonlinearTransformed(e)}},{key:"containsPoint",value:function(e){var t=new Jn(e,pn.X_UNIT);return 0!==this.windingIntersection(t)}},{key:"intersection",value:function(e){for(var t=[],n=this.subpaths.length,i=0;i<n;i++){var r=this.subpaths[i];if(r.isDrawable()){for(var a=r.segments.length,s=0;s<a;s++){var o=r.segments[s];t=t.concat(o.intersection(e))}r.hasClosingSegment()&&(t=t.concat(r.getClosingSegment().intersection(e)))}}return _.sortBy(t,(function(e){return e.distance}))}},{key:"interiorIntersectsLineSegment",value:function(e,t){var n=e.blend(t,.5);if(this.containsPoint(n))return!0;var i=t.minus(e),r=i.magnitude;if(0===r)return!1;i.normalize();for(var a=this.intersection(new Jn(e,i)),s=0;s<a.length;s++)if(a[s].distance<=r)return!0;return!1}},{key:"windingIntersection",value:function(e){for(var t=0,n=this.subpaths.length,i=0;i<n;i++){var r=this.subpaths[i];if(r.isDrawable()){for(var a=r.segments.length,s=0;s<a;s++)t+=r.segments[s].windingIntersection(e);r.hasClosingSegment()&&(t+=r.getClosingSegment().windingIntersection(e))}}return t}},{key:"intersectsBounds",value:function(e){if(this.bounds.intersection(e).equals(this.bounds))return!0;var t,n,i=new Jn(new pn(e.minX,e.minY),new pn(1,0)),r=new Jn(new pn(e.minX,e.minY),new pn(0,1)),a=new Jn(new pn(e.maxX,e.maxY),new pn(-1,0)),s=new Jn(new pn(e.maxX,e.maxY),new pn(0,-1)),o=this.intersection(i).concat(this.intersection(a));for(n=0;n<o.length;n++)if((t=o[n].point).x>=e.minX&&t.x<=e.maxX)return!0;var l=this.intersection(r).concat(this.intersection(s));for(n=0;n<l.length;n++)if((t=l[n].point).y>=e.minY&&t.y<=e.maxY)return!0;return!1}},{key:"getStrokedShape",value:function(t){for(var n=[],i=jn.NOTHING.copy(),r=this.subpaths.length,a=0;a<r;a++){var s=this.subpaths[a].stroked(t);n=n.concat(s)}r=n.length;for(var o=0;o<r;o++)i.includeBounds(n[o].bounds);return new e(n,i)}},{key:"getOffsetShape",value:function(t){for(var n=[],i=jn.NOTHING.copy(),r=this.subpaths.length,a=0;a<r;a++)n.push(this.subpaths[a].offset(t));r=n.length;for(var s=0;s<r;s++)i.includeBounds(n[s].bounds);return new e(n,i)}},{key:"getDashedShape",value:function(t,n,i){return i=A({distanceEpsilon:1e-10,curveEpsilon:1e-8},i),new e(_.flatten(this.subpaths.map((function(e){return e.dashed(t,n,i.distanceEpsilon,i.curveEpsilon)}))))}},{key:"getBounds",value:function(){if(null===this._bounds){var e=jn.NOTHING.copy();_.each(this.subpaths,(function(t){e.includeBounds(t.getBounds())})),this._bounds=e}return this._bounds}},{key:"bounds",get:function(){return this.getBounds()}},{key:"getStrokedBounds",value:function(e){for(var t=!0,n=0;n<this.subpaths.length;n++){var i=this.subpaths[n];if(i.isDrawable()&&!i.isClosed()){t=!1;break}for(var r=0;r<i.segments.length;r++){if(!i.segments[r].areStrokedBoundsDilated()){t=!1;break}}}if(t)return this.bounds.dilated(e.lineWidth/2);for(var a=this.bounds.copy(),s=0;s<this.subpaths.length;s++)for(var o=this.subpaths[s].stroked(e),l=0;l<o.length;l++)a.includeBounds(o[l].bounds);return a}},{key:"getSimplifiedAreaShape",value:function(){return yr.simplifyNonZero(this)}},{key:"getBoundsWithTransform",value:function(e,t){for(var n=jn.NOTHING.copy(),i=this.subpaths.length,r=0;r<i;r++){var a=this.subpaths[r];n.includeBounds(a.getBoundsWithTransform(e))}return t&&n.includeBounds(this.getStrokedShape(t).getBoundsWithTransform(e)),n}},{key:"getApproximateArea",value:function(e){for(var t=this.bounds.minX,n=this.bounds.minY,i=this.bounds.width,r=this.bounds.height,a=i*r,s=0,o=new pn(0,0),l=0;l<e;l++)o.x=t+Li()*i,o.y=n+Li()*r,this.containsPoint(o)&&s++;return a*s/e}},{key:"getNonoverlappingArea",value:function(){return Math.abs(_.sum(this.subpaths.map((function(e){return _.sum(e.getFillSegments().map((function(e){return e.getSignedAreaFragment()})))}))))}},{key:"getArea",value:function(){return this.getSimplifiedAreaShape().getNonoverlappingArea()}},{key:"getApproximateCentroid",value:function(e){for(var t=this.bounds.minX,n=this.bounds.minY,i=this.bounds.width,r=this.bounds.height,a=0,s=new pn(0,0),o=new pn(0,0),l=0;l<e;l++)o.x=t+Li()*i,o.y=n+Li()*r,this.containsPoint(o)&&(s.add(o),a++);return s.dividedScalar(a)}},{key:"invalidatePoints",value:function(){this._invalidatingPoints=!0;for(var e=this.subpaths.length,t=0;t<e;t++)this.subpaths[t].invalidatePoints();this._invalidatingPoints=!1,this.invalidate()}},{key:"toString",value:function(){return"new kite.Shape( '".concat(this.getSVGPath(),"' )")}},{key:"invalidate",value:function(){this._invalidatingPoints||(this._bounds=null,this.notifyInvalidationListeners())}},{key:"notifyInvalidationListeners",value:function(){this.invalidatedEmitter.emit()}},{key:"addSegmentAndBounds",value:function(e){this.getLastSubpath().addSegment(e),this.invalidate()}},{key:"ensure",value:function(e){this.hasSubpaths()||(this.addSubpath(new Mi),this.getLastSubpath().addPoint(e))}},{key:"addSubpath",value:function(e){return this.subpaths.push(e),e.invalidatedEmitter.addListener(this._invalidateListener),this.invalidate(),this}},{key:"hasSubpaths",value:function(){return this.subpaths.length>0}},{key:"getLastSubpath",value:function(){return _.last(this.subpaths)}},{key:"getLastPoint",value:function(){return this.hasSubpaths()?this.getLastSubpath().getLastPoint():null}},{key:"getLastSegment",value:function(){if(!this.hasSubpaths())return null;var e=this.getLastSubpath();return e.isDrawable()?e.getLastSegment():null}},{key:"getSmoothQuadraticControlPoint",value:function(){var e=this.getLastPoint();return this.lastQuadraticControlPoint?e.plus(e.minus(this.lastQuadraticControlPoint)):e}},{key:"getSmoothCubicControlPoint",value:function(){var e=this.getLastPoint();return this.lastCubicControlPoint?e.plus(e.minus(this.lastCubicControlPoint)):e}},{key:"getRelativePoint",value:function(){var e=this.getLastPoint();return e||pn.ZERO}},{key:"shapeUnion",value:function(e){return yr.binaryResult(this,e,yr.BINARY_NONZERO_UNION)}},{key:"shapeIntersection",value:function(e){return yr.binaryResult(this,e,yr.BINARY_NONZERO_INTERSECTION)}},{key:"shapeDifference",value:function(e){return yr.binaryResult(this,e,yr.BINARY_NONZERO_DIFFERENCE)}},{key:"shapeXor",value:function(e){return yr.binaryResult(this,e,yr.BINARY_NONZERO_XOR)}},{key:"shapeClip",value:function(e,t){return yr.clipShape(e,this,t)}},{key:"getArcLength",value:function(e,t,n){for(var i=0,r=0;r<this.subpaths.length;r++)i+=this.subpaths[r].getArcLength(e,t,n);return i}},{key:"serialize",value:function(){return{type:"Shape",subpaths:this.subpaths.map((function(e){return e.serialize()}))}}}],[{key:"deserialize",value:function(t){return new e(t.subpaths.map(Mi.deserialize))}},{key:"rectangle",value:function(t,n,i,r){return(new e).rect(t,n,i,r)}},{key:"roundRect",value:function(t,n,i,r,a,s){return(new e).roundRect(t,n,i,r,a,s)}},{key:"roundedRectangleWithRadii",value:function(e,t,n,i,r){var a=r&&r.topLeft||0,s=r&&r.topRight||0,o=r&&r.bottomLeft||0,l=r&&r.bottomRight||0,u=a+s;u>n&&u>0&&(a=a/u*n,s=s/u*n);var c=o+l;c>n&&c>0&&(o=o/c*n,l=l/c*n);var h=a+o;h>i&&h>0&&(a=a/h*i,o=o/h*i);var d=s+l;d>i&&d>0&&(s=s/d*i,l=l/d*i);var p=new Rn.Shape,f=e+n,m=t+i;return l>0?p.arc(f-l,m-l,l,0,Math.PI/2,!1):p.moveTo(f,m),o>0?p.arc(e+o,m-o,o,Math.PI/2,Math.PI,!1):p.lineTo(e,m),a>0?p.arc(e+a,t+a,a,Math.PI,3*Math.PI/2,!1):p.lineTo(e,t),s>0?p.arc(f-s,t+s,s,3*Math.PI/2,2*Math.PI,!1):p.lineTo(f,t),p.close(),p}},{key:"boundsOffsetWithRadii",value:function(t,n,i){var r=t.withOffsets(n.left,n.top,n.right,n.bottom);return e.roundedRectangleWithRadii(r.minX,r.minY,r.width,r.height,i)}},{key:"polygon",value:function(t){return(new e).polygon(t)}},{key:"bounds",value:function(t){return(new e).rect(t.minX,t.minY,t.maxX-t.minX,t.maxY-t.minY)}},{key:"lineSegment",value:function(t,n,i,r){return"number"==typeof t?(new e).moveTo(t,n).lineTo(i,r):(new e).moveToPoint(t).lineToPoint(n)}},{key:"regularPolygon",value:function(t,n){var i=new e;return _.each(_.range(t),(function(e){var r=pn.createPolar(n,2*Math.PI*e/t);0===e?i.moveToPoint(r):i.lineToPoint(r)})),i.close()}},{key:"circle",value:function(t,n,i){return void 0===n?(new e).circle(0,0,t):(new e).circle(t,n,i)}},{key:"ellipse",value:function(t,n,i,r,a){return void 0===r?(new e).ellipse(0,0,t,n,i):(new e).ellipse(t,n,i,r,a)}},{key:"arc",value:function(t,n,i,r,a,s){return(new e).arc(t,n,i,r,a,s)}},{key:"union",value:function(e){return yr.unionNonZero(e)}},{key:"intersection",value:function(e){return yr.intersectionNonZero(e)}},{key:"xor",value:function(e){return yr.xorNonZero(e)}},{key:"segments",value:function(t,n){return new e([new Mi(t,void 0,!!n)])}}]),e}();Rn.register("Shape",Di),Di.rect=Di.rectangle,Di.roundRectangle=Di.roundRect;var Ni=Di;function qi(e){return _.each(Array.prototype.slice.call(arguments,1),(function(t){if(t)for(var n in t)Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}y.register("extend",qi);var Oi=qi,Bi={mixInto:function(e,t){var n=S()({defaultArguments:[],initialize:e.prototype.initialize,maxSize:100,initialSize:0,useDefaultConstruction:!1},t),i=[],r=n.maxSize,a=Function.prototype.bind.bind(e,e),s=a.apply(void 0,_toConsumableArray(n.defaultArguments)),o=n.initialize,l=n.useDefaultConstruction,u=e.prototype;for(Oi(e,{pool:i,dirtyFromPool:function(){return i.length?i.pop():new s},createFromPool:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.length?(e=i.pop(),o.apply(e,n)):l?(e=new s,o.apply(e,n)):e=new(a.apply(void 0,n)),e},get poolSize(){return i.length},set maxPoolSize(e){r=e},get maxPoolSize(){return r}}),Oi(u,{freeToPool:function(){i.length<r&&i.push(this)}});i.length<n.initialSize;)i.push(new s);return e}};y.register("Poolable",Bi);var Gi=Bi,Hi=0,Fi=function(){function e(t,n){_classCallCheck(this,e),this.id=++Hi,this.initialize(t,n)}return _createClass(e,[{key:"initialize",value:function(e,t){return this.edge=e,this.face=null,this.isReversed=t,this.signedAreaFragment=e.signedAreaFragment*(t?-1:1),this.startVertex=null,this.endVertex=null,this.sortVector=this.sortVector||new pn(0,0),this.data=null,this.updateReferences(),this}},{key:"serialize",value:function(){return{type:"HalfEdge",id:this.id,edge:this.edge.id,face:null===this.face?null:this.face.id,isReversed:this.isReversed,signedAreaFragment:this.signedAreaFragment,startVertex:null===this.startVertex?null:this.startVertex.id,endVertex:null===this.endVertex?null:this.endVertex.id,sortVector:pn.Vector2IO.toStateObject(this.sortVector),data:this.data}}},{key:"dispose",value:function(){this.edge=null,this.face=null,this.startVertex=null,this.endVertex=null,this.data=null,this.freeToPool()}},{key:"getNext",value:function(e){for(var t=1;;t++){var n=this.endVertex.incidentHalfEdges.indexOf(this)-t;n<0&&(n+=this.endVertex.incidentHalfEdges.length);var i=this.endVertex.incidentHalfEdges[n].getReversed();if(!e||e(i.edge))return i}}},{key:"updateReferences",value:function(){this.startVertex=this.isReversed?this.edge.endVertex:this.edge.startVertex,this.endVertex=this.isReversed?this.edge.startVertex:this.edge.endVertex}},{key:"getEndTangent",value:function(){return this.isReversed?this.edge.segment.startTangent:this.edge.segment.endTangent.negated()}},{key:"getEndCurvature",value:function(){return this.isReversed?-this.edge.segment.curvatureAt(0):this.edge.segment.curvatureAt(1)}},{key:"getReversed",value:function(){return this.isReversed?this.edge.forwardHalf:this.edge.reversedHalf}},{key:"getDirectionalSegment",value:function(){return this.isReversed?this.edge.segment.reversed():this.edge.segment}}]),e}();Rn.register("HalfEdge",Fi),Gi.mixInto(Fi);var Yi=Fi;function zi(e){if(e){for(;e.length;)e.pop();return e}return[]}y.register("cleanArray",zi);var Ui=zi,Wi=0,ji=function(){function e(t){_classCallCheck(this,e),this.id=++Wi,this.initialize(t)}return _createClass(e,[{key:"initialize",value:function(e){return this.point=e,this.incidentHalfEdges=Ui(this.incidentHalfEdges),this.visited=!1,this.visitIndex=0,this.lowIndex=0,this.data=null,this.internalData={},this}},{key:"serialize",value:function(){return{type:"Vertex",id:this.id,point:pn.Vector2IO.toStateObject(this.point),incidentHalfEdges:this.incidentHalfEdges.map((function(e){return e.id})),visited:this.visited,visitIndex:this.visitIndex,lowIndex:this.lowIndex}}},{key:"dispose",value:function(){this.point=pn.ZERO,Ui(this.incidentHalfEdges),this.freeToPool()}},{key:"sortEdges",value:function(){for(var t=[],n=0;n<this.incidentHalfEdges.length;n++){var i=this.incidentHalfEdges[n];t.push(i.sortVector.setXY(i.getEndTangent().angle,i.getEndCurvature()))}for(var r=1e-4-Math.PI,a=!1;!a;){a=!0;for(var s=0;s<t.length;s++)t[s].x<r&&(a=!1);if(!a)for(var o=0;o<t.length;o++){var l=t[o];l.x-=1.62594024516,l.x<-Math.PI-1e-4&&(l.x+=2*Math.PI)}}this.incidentHalfEdges.sort(e.edgeComparison)}}],[{key:"edgeComparison",value:function(e,t){var n=e.sortVector.x,i=t.sortVector.x;if(Math.abs(n-i)>1e-5||n!==i&&e.edge.segment instanceof $n&&t.edge.segment instanceof $n)return n<i?-1:1;var r=e.sortVector.y,a=t.sortVector.y;if(Math.abs(r-a)>1e-5)return r<a?1:-1;throw new Error("TODO: Need to implement more advanced disambiguation ")}}]),e}();Rn.register("Vertex",ji),Gi.mixInto(ji);var Xi=ji,Qi=0,Ki=function(){function e(t,n,i){_classCallCheck(this,e),this.id=++Qi,this.initialize(t,n,i)}return _createClass(e,[{key:"initialize",value:function(e,t,n){return this.segment=e,this.startVertex=t,this.endVertex=n,this.signedAreaFragment=e.getSignedAreaFragment(),this.forwardHalf=Yi.createFromPool(this,!1),this.reversedHalf=Yi.createFromPool(this,!0),this.visited=!1,this.data=null,this.internalData={},this}},{key:"serialize",value:function(){return{type:"Edge",id:this.id,segment:this.segment.serialize(),startVertex:null===this.startVertex?null:this.startVertex.id,endVertex:null===this.endVertex?null:this.endVertex.id,signedAreaFragment:this.signedAreaFragment,forwardHalf:this.forwardHalf.serialize(),reversedHalf:this.reversedHalf.serialize(),visited:this.visited,data:this.data}}},{key:"dispose",value:function(){this.segment=null,this.startVertex=null,this.endVertex=null,this.forwardHalf.dispose(),this.reversedHalf.dispose(),this.forwardHalf=null,this.reversedHalf=null,this.data=null,this.freeToPool()}},{key:"getOtherVertex",value:function(e){return this.startVertex===e?this.endVertex:this.startVertex}},{key:"updateReferences",value:function(){this.forwardHalf.updateReferences(),this.reversedHalf.updateReferences()}}]),e}();Rn.register("Edge",Ki),Gi.mixInto(Ki);var Ji=Ki,Zi=0,$i=function(){function e(t){_classCallCheck(this,e),this.id=++Zi,this.initialize(t)}return _createClass(e,[{key:"initialize",value:function(e){return this.boundary=e,this.holes=Ui(this.holes),this.windingMap=null,this.filled=null,e&&this.addBoundaryFaceReferences(e),this}},{key:"serialize",value:function(){return{type:"Face",id:this.id,boundary:null===this.boundary?null:this.boundary.id,holes:this.holes.map((function(e){return e.id})),windingMap:this.windingMap,filled:this.filled}}},{key:"dispose",value:function(){this.boundary=null,Ui(this.holes),this.windingMap=null,this.filled=null,this.freeToPool()}},{key:"addBoundaryFaceReferences",value:function(e){for(var t=0;t<e.halfEdges.length;t++)e.halfEdges[t].face=this}},{key:"recursivelyAddHoles",value:function(e){this.holes.push(e),this.addBoundaryFaceReferences(e);for(var t=0;t<e.childBoundaries.length;t++)this.recursivelyAddHoles(e.childBoundaries[t])}}]),e}();Rn.register("Face",$i),Gi.mixInto($i);var er=$i,tr=0,nr=function(){function e(t,n){_classCallCheck(this,e),this.id=++tr,this.initialize(t,n)}return _createClass(e,[{key:"initialize",value:function(e,t){return this.shapeId=e,this.closed=t,this.halfEdges=Ui(this.halfEdges),this}},{key:"serialize",value:function(){return{type:"Loop",id:this.id,shapeId:this.shapeId,closed:this.closed,halfEdges:this.halfEdges.map((function(e){return e.id}))}}},{key:"toSubpath",value:function(){for(var e=[],t=0;t<this.halfEdges.length;t++)e.push(this.halfEdges[t].getDirectionalSegment());return new Mi(e,void 0,this.closed)}},{key:"dispose",value:function(){Ui(this.halfEdges),this.freeToPool()}}]),e}();Rn.register("Loop",nr),Gi.mixInto(nr);var ir=nr,rr=0,ar=function(){function e(t){_classCallCheck(this,e),this.id=++rr,this.initialize(t)}return _createClass(e,[{key:"initialize",value:function(e){return this.halfEdges=e,this.signedArea=this.computeSignedArea(),this.bounds=this.computeBounds(),this.childBoundaries=Ui(this.childBoundaries),this}},{key:"serialize",value:function(){return{type:"Boundary",id:this.id,halfEdges:this.halfEdges.map((function(e){return e.id})),signedArea:this.signedArea,bounds:jn.Bounds2IO.toStateObject(this.bounds),childBoundaries:this.childBoundaries.map((function(e){return e.id}))}}},{key:"dispose",value:function(){this.halfEdges=[],Ui(this.childBoundaries),this.freeToPool()}},{key:"isInner",value:function(){return this.signedArea>0}},{key:"computeSignedArea",value:function(){for(var e=0,t=0;t<this.halfEdges.length;t++)e+=this.halfEdges[t].signedAreaFragment;return e}},{key:"computeBounds",value:function(){for(var e=jn.NOTHING.copy(),t=0;t<this.halfEdges.length;t++)e.includeBounds(this.halfEdges[t].edge.segment.getBounds());return e}},{key:"computeExtremePoint",value:function(e){for(var t=[],n=0;n<this.halfEdges.length;n++)t.push(this.halfEdges[n].edge.segment.transformed(e.getMatrix()));for(var i=jn.NOTHING.copy(),r=0;r<t.length;r++)i.includeBounds(t[r].getBounds());for(var a=0;a<t.length;a++){var s=t[a];if(s.getBounds().top===i.top){for(var o=new pn(0,Number.POSITIVE_INFINITY),l=[0,1].concat(s.getInteriorExtremaTs()),u=0;u<l.length;u++){var c=s.positionAt(l[u]);c.y<o.y&&(o=c)}return e.inversePosition2(o)}}throw new Error("Should not reach here if we have segments")}},{key:"computeExtremeRay",value:function(e){var t=this.computeExtremePoint(e),n=e.inverseDelta2(new pn(0,-1)).normalized();return new Jn(t.plus(n.timesScalar(1e-4)),n)}},{key:"hasHalfEdge",value:function(e){for(var t=0;t<this.halfEdges.length;t++)if(this.halfEdges[t]===e)return!0;return!1}},{key:"toSubpath",value:function(){for(var e=[],t=0;t<this.halfEdges.length;t++)e.push(this.halfEdges[t].getDirectionalSegment());return new Mi(e,null,!0)}}]),e}();Rn.register("Boundary",ar),Gi.mixInto(ar);var sr=ar,or=function(){function e(t,n,i,r,a,s,o,l,u,c){_classCallCheck(this,e),this.initialize(t,n,i,r,a,s,o,l,u,c)}return _createClass(e,[{key:"initialize",value:function(e,t,n,i,r,a,s,o,l,u){return this.a=e,this.b=t,this.atMin=n,this.atMax=i,this.btMin=r,this.btMax=a,this.aMin=s,this.aMax=o,this.bMin=l,this.bMax=u,this}},{key:"pushSubdivisions",value:function(t){var n=(this.atMax+this.atMin)/2,i=(this.btMax+this.btMin)/2;if(n!==this.atMin&&n!==this.atMax&&i!==this.btMin&&i!==this.btMax){var r=this.a.positionAt(n),a=this.b.positionAt(i);e.boxIntersects(this.aMin,r,this.bMin,a)&&t.push(e.pool.create(this.a,this.b,this.atMin,n,this.btMin,i,this.aMin,r,this.bMin,a)),e.boxIntersects(r,this.aMax,this.bMin,a)&&t.push(e.pool.create(this.a,this.b,n,this.atMax,this.btMin,i,r,this.aMax,this.bMin,a)),e.boxIntersects(this.aMin,r,a,this.bMax)&&t.push(e.pool.create(this.a,this.b,this.atMin,n,i,this.btMax,this.aMin,r,a,this.bMax)),e.boxIntersects(r,this.aMax,a,this.bMax)&&t.push(e.pool.create(this.a,this.b,n,this.atMax,i,this.btMax,r,this.aMax,a,this.bMax)),this.freeToPool()}else t.push(this)}},{key:"distance",value:function(e){var t=this.atMin-e.atMin,n=this.atMax-e.atMax,i=this.btMin-e.btMin,r=this.btMax-e.btMax;return t*t+n*n+i*i+r*r}},{key:"clean",value:function(){this.a=null,this.b=null,this.aMin=null,this.aMax=null,this.bMin=null,this.bMax=null}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}],[{key:"intersect",value:function(t,n){if(!t.bounds.intersectsBounds(n.bounds))return[];for(var i=e.getIntersectionRanges(t,n),r=[],a=0;a<i.length;a++){var s=i[a],o=!1;e:for(var l=0;l<r.length;l++)for(var u=r[l],c=0;c<u.length;c++){var h=u[c];if(s.distance(h)<1e-13){u.push(s),o=!0;break e}}o||r.push([s])}for(var d=[],p=0;p<r.length;p++){for(var f=r[p],m=0,g=0,y=0;y<f.length;y++)m+=f[y].atMin+f[y].atMax,g+=f[y].btMin+f[y].btMax;m/=2*f.length,g/=2*f.length;var v=t.positionAt(m),A=n.positionAt(g);d.push(new Gn(v.average(A),m,g))}for(var b=0;b<i.length;b++)i[b].freeToPool();return e.cleanPool(),d}},{key:"getIntersectionRanges",value:function(t,n){for(var i=t.getInteriorExtremaTs(),r=n.getInteriorExtremaTs(),a=_.zip([0].concat(i),i.concat([1])),s=_.zip([0].concat(r),r.concat([1])),o=[],l=0;l<a.length;l++)for(var u=0;u<s.length;u++){var c=a[l][0],h=a[l][1],d=s[u][0],p=s[u][1],f=t.positionAt(c),m=t.positionAt(h),g=n.positionAt(d),y=n.positionAt(p);e.boxIntersects(f,m,g,y)&&o.push(e.pool.create(t,n,c,h,d,p,f,m,g,y))}for(var v=0;v<50;v++){for(var A=[],b=o.length-1;b>=0;b--)o[b].pushSubdivisions(A);o=A}return o}},{key:"boxIntersects",value:function(e,t,n,i){var r=Math.max(Math.min(e.x,t.x),Math.min(n.x,i.x)),a=Math.max(Math.min(e.y,t.y),Math.min(n.y,i.y)),s=Math.min(Math.max(e.x,t.x),Math.max(n.x,i.x)),o=Math.min(Math.max(e.y,t.y),Math.max(n.y,i.y));return s-r>=0&&o-a>=0}},{key:"cleanPool",value:function(){for(var t=0;t<e.pool.objects.length;t++)e.pool.objects[t].clean()}}]),e}();_defineProperty(or,"pool",new rn(or)),Rn.register("BoundsIntersection",or);var lr=1,ur=[],cr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e-6;_classCallCheck(this,e),this.rootNode=hr.createFromPool(this,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),this.rootNode.isBlack=!0,this.epsilon=t,this.items=new Set}return _createClass(e,[{key:"query",value:function(e,t){var n=lr++;return!!this.rootNode&&this.rootNode.query(e,this.getMinX(e,this.epsilon),this.getMaxX(e,this.epsilon),n,t)}},{key:"addItem",value:function(e){var t=this.getMinX(e,this.epsilon),n=this.getMaxX(e,this.epsilon);this.rootNode.split(t,this),this.rootNode.split(n,this),this.rootNode.addItem(e,t,n),this.items.add(e)}},{key:"removeItem",value:function(e){this.rootNode.removeItem(e,this.getMinX(e,this.epsilon),this.getMaxX(e,this.epsilon)),this.items.delete(e)}},{key:"audit",value:function(){this.rootNode.audit(this.epsilon,this.items,[])}},{key:"toString",value:function(){var e=0,t="";return function n(i){t+="".concat(_.repeat("  ",e)).concat(i.toString(),"\n"),e++,i.hasChildren()&&(n(i.left),n(i.right)),e--}(this.rootNode),t}}]),e}(),hr=function(){function e(t,n,i){_classCallCheck(this,e),this.items=[],this.initialize(t,n,i)}return _createClass(e,[{key:"initialize",value:function(e,t,n){return this.min=t,this.max=n,this.splitValue=null,this.left=null,this.right=null,this.parent=null,this.tree=e,this.isBlack=!1,Ui(this.items),this}},{key:"contains",value:function(e){return e>=this.min&&e<=this.max}},{key:"hasChildren",value:function(){return null!==this.splitValue}},{key:"query",value:function(e,t,n,i,r){var a=!1;if(this.min<=n&&this.max>=t){for(var s=0;s<this.items.length;s++){var o=this.items[s];if((!o.internalData.segmentId||o.internalData.segmentId<i)&&(o.internalData.segmentId=i,a=r(o)))return!0}this.hasChildren()&&(a||(a=this.left.query(e,t,n,i,r)),a||(a=this.right.query(e,t,n,i,r)))}return a}},{key:"swapChild",value:function(e,t){this.left===e?this.left=t:this.right=t}},{key:"hasChild",value:function(e){return this.left===e||this.right===e}},{key:"otherChild",value:function(e){return this.left===e?this.right:this.left}},{key:"leftRotate",value:function(e){if(this.right.hasChildren()){var t,n,i,r=this.right,a=this.left,s=r.left,o=r.right;r.parent=this.parent,this.parent?this.parent.swapChild(this,r):e.rootNode=r,this.parent=r,s.parent=this,r.left=this,this.left=a,this.right=s,this.max=s.max,this.splitValue=a.max,r.min=this.min,r.splitValue=this.max;var l=Ui(ur);l.push.apply(l,_toConsumableArray(this.items)),Ui(this.items);for(var u=a.items.length-1;u>=0;u--){var c=a.items[u],h=s.items.indexOf(c);h>=0&&(a.items.splice(u,1),s.items.splice(h,1),this.items.push(c))}(t=s.items).push.apply(t,_toConsumableArray(r.items)),(n=o.items).push.apply(n,_toConsumableArray(r.items)),Ui(r.items),(i=r.items).push.apply(i,_toConsumableArray(l))}}},{key:"rightRotate",value:function(e){var t,n,i,r=this.left,a=this.right,s=r.left,o=r.right;r.parent=this.parent,this.parent?this.parent.swapChild(this,r):e.rootNode=r,this.parent=r,o.parent=this,r.right=this,this.left=o,this.right=a,this.min=o.min,this.splitValue=a.min,r.max=this.max,r.splitValue=this.min;var l=Ui(ur);l.push.apply(l,_toConsumableArray(this.items)),Ui(this.items);for(var u=a.items.length-1;u>=0;u--){var c=a.items[u],h=o.items.indexOf(c);h>=0&&(a.items.splice(u,1),o.items.splice(h,1),this.items.push(c))}(t=s.items).push.apply(t,_toConsumableArray(r.items)),(n=o.items).push.apply(n,_toConsumableArray(r.items)),Ui(r.items),(i=r.items).push.apply(i,_toConsumableArray(l))}},{key:"fixRedBlack",value:function(e){if(this.parent){var t=this.parent;if(!t.isBlack){var n=t.parent,i=n.otherChild(t);i.isBlack?t===n.left?this===t.right?(t.leftRotate(e),t.parent.isBlack=!0,t.parent.parent.isBlack=!1,t.parent.parent.rightRotate(e)):(t.isBlack=!0,n.isBlack=!1,n.rightRotate(e)):this===t.left?(t.rightRotate(e),t.parent.isBlack=!0,t.parent.parent.isBlack=!1,t.parent.parent.leftRotate(e)):(t.isBlack=!0,n.isBlack=!1,n.leftRotate(e)):(t.isBlack=!0,i.isBlack=!0,n.isBlack=!1,n.fixRedBlack(e))}}else this.isBlack=!0}},{key:"split",value:function(t,n){if(t!==this.min&&t!==this.max)if(this.hasChildren())this.splitValue!==t&&(t>this.splitValue?this.right:this.left).split(t,n);else{this.splitValue=t;var i=e.createFromPool(this.tree,this.min,t);i.parent=this,this.left=i;var r=e.createFromPool(this.tree,t,this.max);if(r.parent=this,this.right=r,!this.isBlack&&this.parent){var a=this.parent,s=a.otherChild(this);s.isBlack?(this===a.left?(a.rightRotate(n),i.isBlack=!0):(a.leftRotate(n),r.isBlack=!0),this.fixRedBlack(n)):(this.isBlack=!0,s.isBlack=!0,a.isBlack=!1,a.fixRedBlack(n))}}}},{key:"addItem",value:function(e,t,n){this.min>n||this.max<t||(this.min>=t&&this.max<=n?this.items.push(e):this.hasChildren()&&(this.left.addItem(e,t,n),this.right.addItem(e,t,n)))}},{key:"removeItem",value:function(e,t,n){this.min>n||this.max<t||(this.min>=t&&this.max<=n?J(this.items,e):this.hasChildren()&&(this.left.removeItem(e,t,n),this.right.removeItem(e,t,n)))}},{key:"audit",value:function(e,t){}},{key:"toString",value:function(){return"[".concat(this.min," ").concat(this.max,"] split:").concat(this.splitValue," ").concat(this.isBlack?"black":"red"," ").concat(this.items)}}]),e}();Gi.mixInto(hr),Rn.register("SegmentTree",cr);var dr=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getMinX",value:function(e,t){return e.segment.bounds.left-t}},{key:"getMaxX",value:function(e,t){return e.segment.bounds.right+t}}]),n}(cr);Rn.register("EdgeSegmentTree",dr);var pr=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"getMinX",value:function(e,t){return e.point.x-t}},{key:"getMaxX",value:function(e,t){return e.point.x+t}}]),n}(cr);Rn.register("VertexSegmentTree",pr);var fr=0,mr=0,gr=function(){function e(){_classCallCheck(this,e),this.vertices=[],this.edges=[],this.innerBoundaries=[],this.outerBoundaries=[],this.boundaries=[],this.shapeIds=[],this.loops=[],this.unboundedFace=er.createFromPool(null),this.faces=[this.unboundedFace]}return _createClass(e,[{key:"serialize",value:function(){return{type:"Graph",vertices:this.vertices.map((function(e){return e.serialize()})),edges:this.edges.map((function(e){return e.serialize()})),boundaries:this.boundaries.map((function(e){return e.serialize()})),innerBoundaries:this.innerBoundaries.map((function(e){return e.id})),outerBoundaries:this.outerBoundaries.map((function(e){return e.id})),shapeIds:this.shapeIds,loops:this.loops.map((function(e){return e.serialize()})),unboundedFace:this.unboundedFace.id,faces:this.faces.map((function(e){return e.serialize()}))}}},{key:"addShape",value:function(e,t,n){for(var i=0;i<t.subpaths.length;i++)this.addSubpath(e,t.subpaths[i],n)}},{key:"addSubpath",value:function(e,t,n){var i;if(n=A({ensureClosed:!0},n),this.shapeIds.indexOf(e)<0&&this.shapeIds.push(e),0!==t.segments.length){var r,a=t.closed||n.ensureClosed,s=n.ensureClosed?t.getFillSegments():t.segments,o=[];for(r=0;r<s.length;r++){var l=r-1;l<0&&(l=s.length-1);var u=s[l].end,c=s[r].start;a||0!==r||(u=c),c.equals(u)?o.push(Xi.createFromPool(c)):o.push(Xi.createFromPool(c.average(u)))}a||o.push(Xi.createFromPool(s[s.length-1].end));var h=ir.createFromPool(e,a);for(r=0;r<s.length;r++){var d=r+1;a&&d===s.length&&(d=0);var p=Ji.createFromPool(s[r],o[r],o[d]);h.halfEdges.push(p.forwardHalf),this.addEdge(p)}this.loops.push(h),(i=this.vertices).push.apply(i,o)}}},{key:"computeSimplifiedFaces",value:function(){this.eliminateOverlap(),this.eliminateSelfIntersection(),this.eliminateIntersection(),this.collapseVertices(),this.removeBridges(),this.removeLowOrderVertices(),this.orderVertexEdges(),this.extractFaces(),this.computeBoundaryTree(),this.computeWindingMap()}},{key:"computeFaceInclusion",value:function(e){for(var t=0;t<this.faces.length;t++){var n=this.faces[t];n.filled=e(n.windingMap)}}},{key:"createFilledSubGraph",value:function(){for(var t=new e,n={},i=0;i<this.edges.length;i++){var r=this.edges[i];if(r.forwardHalf.face.filled!==r.reversedHalf.face.filled){if(!n[r.startVertex.id]){var a=Xi.createFromPool(r.startVertex.point);t.vertices.push(a),n[r.startVertex.id]=a}if(!n[r.endVertex.id]){var s=Xi.createFromPool(r.endVertex.point);t.vertices.push(s),n[r.endVertex.id]=s}var o=n[r.startVertex.id],l=n[r.endVertex.id];t.addEdge(Ji.createFromPool(r.segment,o,l))}}return t.collapseAdjacentEdges(),t.orderVertexEdges(),t.extractFaces(),t.computeBoundaryTree(),t.fillAlternatingFaces(),t}},{key:"facesToShape",value:function(){for(var e=[],t=0;t<this.faces.length;t++){var n=this.faces[t];if(n.filled){e.push(n.boundary.toSubpath());for(var i=0;i<n.holes.length;i++)e.push(n.holes[i].toSubpath())}}return new Rn.Shape(e)}},{key:"dispose",value:function(){for(;this.boundaries.length;)this.boundaries.pop().dispose();for(Ui(this.innerBoundaries),Ui(this.outerBoundaries);this.loops.length;)this.loops.pop().dispose();for(;this.faces.length;)this.faces.pop().dispose();for(;this.vertices.length;)this.vertices.pop().dispose();for(;this.edges.length;)this.edges.pop().dispose()}},{key:"addEdge",value:function(e){this.edges.push(e),e.startVertex.incidentHalfEdges.push(e.reversedHalf),e.endVertex.incidentHalfEdges.push(e.forwardHalf)}},{key:"removeEdge",value:function(e){J(this.edges,e),J(e.startVertex.incidentHalfEdges,e.reversedHalf),J(e.endVertex.incidentHalfEdges,e.forwardHalf)}},{key:"replaceEdgeInLoops",value:function(e,t){for(var n=[],i=0;i<t.length;i++)n.push(t[t.length-1-i].getReversed());for(var r=0;r<this.loops.length;r++)for(var a=this.loops[r],s=a.halfEdges.length-1;s>=0;s--){var o=a.halfEdges[s];if(o.edge===e){var l=o===e.forwardHalf?t:n;Array.prototype.splice.apply(a.halfEdges,[s,1].concat(l))}}}},{key:"collapseAdjacentEdges",value:function(){for(var e=!0;e;){e=!1;for(var t=0;t<this.vertices.length;t++){var n=this.vertices[t];if(2===n.incidentHalfEdges.length){var i=n.incidentHalfEdges[0].edge,r=n.incidentHalfEdges[1].edge,a=i.segment,s=r.segment,o=i.getOtherVertex(n),l=r.getOtherVertex(n);if(i.startVertex===n&&(a=a.reversed()),r.endVertex===n&&(s=s.reversed()),a instanceof $n&&s instanceof $n&&a.tangentAt(0).normalized().distance(s.tangentAt(0).normalized())<1e-6){this.removeEdge(i),this.removeEdge(r),i.dispose(),r.dispose(),J(this.vertices,n),n.dispose();var u=new $n(o.point,l.point);this.addEdge(new Ji(u,o,l)),e=!0;break}}}}}},{key:"eliminateOverlap",value:function(){for(var e=this,t=new window.FlatQueue,n=new dr(1e-4),i=mr++,r=function(e){var n=e.segment.bounds;t.push({start:!0,edge:e},n.minY-1e-4),t.push({start:!1,edge:e},n.maxY+1e-4)},a=function(e){e.internalData.removedId=i},s=0;s<this.edges.length;s++)r(this.edges[s]);for(var o=[],l=function(){var s=t.pop(),l=s.edge;if(l.internalData.removedId===i)return"continue";if(s.start){var u,c,h=!1;if(n.query(l,(function(t){var n=l.segment.getOverlaps(t.segment);if(null!==n&&n.length)for(var i=0;i<n.length;i++){var r=n[i];if(Math.abs(r.t1-r.t0)>1e-5&&Math.abs(r.qt1-r.qt0)>1e-5)return c=e.splitOverlap(l,t,r),h=!0,u=t,!0}return!1})),h){n.removeItem(u),a(u),a(l);for(var d=0;d<c.length;d++)r(c[d]);o.push(l),o.push(u)}else n.addItem(l)}else n.removeItem(l)};t.length;)l();for(var u=0;u<o.length;u++)o[u].dispose()}},{key:"splitOverlap",value:function(e,t,n){var i=[],r=e.segment,a=t.segment;this.removeEdge(e),this.removeEdge(t);var s=n.t0,o=n.t1,l=n.qt0,u=n.qt1;s<1e-5&&(s=0),o>.99999&&(o=1),l<1e-5&&(l=0),u>.99999&&(u=1);var c,h,d=s>0?r.subdivided(s)[0]:null,p=l>0?a.subdivided(l)[0]:null,f=o<1?r.subdivided(o)[1]:null,m=u<1?a.subdivided(u)[1]:null,g=r;s>0&&(g=g.subdivided(s)[1]),o<1&&(g=g.subdivided(En.linear(s,1,0,1,o))[0]),d&&p?(c=Xi.createFromPool(g.start),this.vertices.push(c)):c=d?n.a>0?t.startVertex:t.endVertex:e.startVertex,f&&m?(h=Xi.createFromPool(g.end),this.vertices.push(h)):h=f?n.a>0?t.endVertex:t.startVertex:e.endVertex;var y,v,A,b,S=Ji.createFromPool(g,c,h);i.push(S),d&&(y=Ji.createFromPool(d,e.startVertex,c),i.push(y)),f&&(v=Ji.createFromPool(f,h,e.endVertex),i.push(v)),p&&(A=Ji.createFromPool(p,t.startVertex,n.a>0?c:h),i.push(A)),m&&(b=Ji.createFromPool(m,n.a>0?h:c,t.endVertex),i.push(b));for(var E=0;E<i.length;E++)this.addEdge(i[E]);for(var k=(d?[y]:[]).concat([S]).concat(f?[v]:[]),V=(p?[A]:[]).concat([S]).concat(m?[b]:[]),w=[],_=[],C=0;C<k.length;C++)w.push(k[C].forwardHalf);for(var x=0;x<V.length;x++){var P=V[x]!==S||n.a>0;_.push(P?V[x].forwardHalf:V[x].reversedHalf)}return this.replaceEdgeInLoops(e,w),this.replaceEdgeInLoops(t,_),i}},{key:"eliminateSelfIntersection",value:function(){for(var e=this.edges.length-1;e>=0;e--){var t=this.edges[e],n=t.segment;if(n instanceof Si){var i=n.getSelfIntersection();if(i){var r=n.subdivisions([i.aT,i.bT]),a=Xi.createFromPool(i.point);this.vertices.push(a);var s=Ji.createFromPool(r[0],t.startVertex,a),o=Ji.createFromPool(r[1],a,a),l=Ji.createFromPool(r[2],a,t.endVertex);this.removeEdge(t),this.addEdge(s),this.addEdge(o),this.addEdge(l),this.replaceEdgeInLoops(t,[s.forwardHalf,o.forwardHalf,l.forwardHalf]),t.dispose()}}}}},{key:"eliminateIntersection",value:function(){for(var e=this,t=new window.FlatQueue,n=new dr(1e-4),i=mr++,r=function(e){var n=e.segment.bounds;t.push({start:!0,edge:e},n.minY-1e-4),t.push({start:!1,edge:e},n.maxY+1e-4)},a=function(e){e.internalData.removedId=i},s=0;s<this.edges.length;s++)r(this.edges[s]);for(var o=[],l=function(){var s=t.pop(),l=s.edge;if(l.internalData.removedId===i)return"continue";if(s.start){var u,c,h,d=!1;if(n.query(l,(function(t){var n=l.segment,i=t.segment,r=Qn.intersect(n,i);if((r=r.filter((function(e){var t=e.aT,n=e.bT;return t>1e-5&&t<.99999||n>1e-5&&n<.99999}))).length){var a=r[0],s=e.simpleSplit(l,t,a.aT,a.bT,a.point);if(s)return d=!0,u=t,c=s.addedEdges,h=s.removedEdges,!0}return!1})),d){h.includes(l)?(a(l),o.push(l)):n.addItem(l),h.includes(u)&&(n.removeItem(u),a(u),o.push(u));for(var p=0;p<c.length;p++)r(c[p])}else n.addItem(l)}else n.removeItem(l)};t.length;)l();for(var u=0;u<o.length;u++)o[u].dispose()}},{key:"simpleSplit",value:function(e,t,n,i,r){var a=n>1e-6&&n<.999999,s=i>1e-6&&i<.999999,o=null;a?s?(o=Xi.createFromPool(r),this.vertices.push(o)):o=i<.5?t.startVertex:t.endVertex:o=n<.5?e.startVertex:e.endVertex;var l=!1,u=[],c=[];return a&&o!==e.startVertex&&o!==e.endVertex&&(u.push.apply(u,_toConsumableArray(this.splitEdge(e,n,o))),c.push(e),l=!0),s&&o!==t.startVertex&&o!==t.endVertex&&(u.push.apply(u,_toConsumableArray(this.splitEdge(t,i,o))),c.push(t),l=!0),l?{addedEdges:u,removedEdges:c}:null}},{key:"splitEdge",value:function(e,t,n){var i=e.segment.subdivided(t),r=Ji.createFromPool(i[0],e.startVertex,n),a=Ji.createFromPool(i[1],n,e.endVertex);return this.removeEdge(e),this.addEdge(r),this.addEdge(a),this.replaceEdgeInLoops(e,[r.forwardHalf,a.forwardHalf]),[r,a]}},{key:"collapseVertices",value:function(){for(var e=this,t=new window.FlatQueue,n=new pr(1e-4),i=mr++,r=function(e){t.push({start:!0,vertex:e},e.point.y-1e-4),t.push({start:!1,vertex:e},e.point.y+1e-4)},a=function(e){e.internalData.removedId=i},s=0;s<this.vertices.length;s++)r(this.vertices[s]);for(var o=[],l=function(){var s=t.pop(),l=s.vertex;if(l.internalData.removedId===i)return"continue";if(s.start){var u,c,h=!1;if(n.query(l,(function(t){var n=l.point.distance(t.point);if(n<1e-5){var i=Xi.createFromPool(0===n?l.point:l.point.average(t.point));e.vertices.push(i),J(e.vertices,l),J(e.vertices,t);for(var r=e.edges.length-1;r>=0;r--){var a=e.edges[r],s=a.startVertex===l||a.startVertex===t,o=a.endVertex===l||a.endVertex===t;if(s&&o){if((a.segment.bounds.width>1e-5||a.segment.bounds.height>1e-5)&&(a.segment instanceof Si||a.segment instanceof ki||a.segment instanceof xi)){var d=Ji.createFromPool(a.segment,i,i);e.addEdge(d),e.replaceEdgeInLoops(a,[d.forwardHalf])}else e.replaceEdgeInLoops(a,[]);e.removeEdge(a),a.dispose()}else s?(a.startVertex=i,i.incidentHalfEdges.push(a.reversedHalf),a.updateReferences()):o&&(a.endVertex=i,i.incidentHalfEdges.push(a.forwardHalf),a.updateReferences())}return c=[i],h=!0,u=t,!0}return!1})),h){n.removeItem(u),a(u),a(l);for(var d=0;d<c.length;d++)r(c[d]);o.push(l),o.push(u)}else n.addItem(l)}else n.removeItem(l)};t.length;)l();for(var u=0;u<o.length;u++)o[u].dispose()}},{key:"markBridges",value:function(e,t){t.visited=!0,t.visitIndex=t.lowIndex=fr++;for(var n=0;n<t.incidentHalfEdges.length;n++){var i=t.incidentHalfEdges[n].edge,r=t.incidentHalfEdges[n].startVertex;r.visited?i.visited||(t.lowIndex=Math.min(t.lowIndex,r.visitIndex)):(i.visited=!0,r.parent=t,this.markBridges(e,r),t.lowIndex=Math.min(t.lowIndex,r.lowIndex),r.lowIndex>t.visitIndex&&e.push(i))}}},{key:"removeBridges",value:function(){for(var e=[],t=0;t<this.vertices.length;t++){var n=this.vertices[t];n.visited||this.markBridges(e,n)}for(var i=0;i<e.length;i++){var r=e[i];this.removeEdge(r),this.replaceEdgeInLoops(r,[]),r.dispose()}}},{key:"removeLowOrderVertices",value:function(){for(var e=!0;e;){e=!1;for(var t=this.vertices.length-1;t>=0;t--){var n=this.vertices[t];if(n.incidentHalfEdges.length<2){for(var i=0;i<n.incidentHalfEdges.length;i++){var r=n.incidentHalfEdges[i].edge;this.removeEdge(r),this.replaceEdgeInLoops(r,[]),r.dispose()}this.vertices.splice(t,1),n.dispose(),e=!0;break}}}}},{key:"orderVertexEdges",value:function(){for(var e=0;e<this.vertices.length;e++)this.vertices[e].sortEdges()}},{key:"extractFaces",value:function(){for(var e=[],t=0;t<this.edges.length;t++)e.push(this.edges[t].forwardHalf),e.push(this.edges[t].reversedHalf);for(;e.length;){for(var n=[],i=e[0],r=i;i&&(J(e,i),n.push(i),(i=i.getNext())!==r););var a=sr.createFromPool(n);(a.signedArea>0?this.innerBoundaries:this.outerBoundaries).push(a),this.boundaries.push(a)}for(var s=0;s<this.innerBoundaries.length;s++)this.faces.push(er.createFromPool(this.innerBoundaries[s]))}},{key:"computeBoundaryTree",value:function(){for(var e=[],t=new _i(oi.rotation2(1.5729657)),n=0;n<this.outerBoundaries.length;n++){for(var i=this.outerBoundaries[n],r=i.computeExtremeRay(t),a=null,s=Number.POSITIVE_INFINITY,o=!1,l=0;l<this.edges.length;l++)for(var u=this.edges[l],c=u.segment.intersection(r),h=0;h<c.length;h++){var d=c[h];d.distance<s&&(a=u,s=d.distance,o=d.wind)}if(null===a)e.push(i);else{var p=o<0?a.reversedHalf:a.forwardHalf;this.getBoundaryOfHalfEdge(p).childBoundaries.push(i)}}e.forEach(this.unboundedFace.recursivelyAddHoles.bind(this.unboundedFace));for(var f=0;f<this.faces.length;f++){var m=this.faces[f];null!==m.boundary&&m.boundary.childBoundaries.forEach(m.recursivelyAddHoles.bind(m))}}},{key:"computeWindingMap",value:function(){for(var e=this.edges.slice(),t={},n=0;n<this.shapeIds.length;n++)t[this.shapeIds[n]]=0;for(this.unboundedFace.windingMap=t;e.length;)for(var i=e.length-1;i>=0;i--){var r=e[i],a=r.forwardHalf,s=r.reversedHalf,o=a.face,l=s.face,u=null!==o.windingMap,c=null!==l.windingMap;if(u&&c){e.splice(i,1)}else{if(!u&&!c)continue;for(var h=u?o:l,d=u?l:o,p={},f=0;f<this.shapeIds.length;f++){var m=this.shapeIds[f],g=this.computeDifferential(r,m);p[m]=h.windingMap[m]+g*(u?-1:1)}d.windingMap=p}}}},{key:"computeDifferential",value:function(e,t){for(var n=0,i=0;i<this.loops.length;i++){var r=this.loops[i];if(r.shapeId===t)for(var a=0;a<r.halfEdges.length;a++){var s=r.halfEdges[a];s===e.forwardHalf?n++:s===e.reversedHalf&&n--}}return n}},{key:"fillAlternatingFaces",value:function(){for(var e=0,t=0;t<this.faces.length;t++)this.faces[t].filled=null,e++;for(this.unboundedFace.filled=!1,e--;e;)for(var n=0;n<this.edges.length;n++){var i=this.edges[n],r=i.forwardHalf.face,a=i.reversedHalf.face,s=null===r.filled,o=null===a.filled;s&&!o?(r.filled=!a.filled,e--):!s&&o&&(a.filled=!r.filled,e--)}}},{key:"getBoundaryOfHalfEdge",value:function(e){for(var t=0;t<this.boundaries.length;t++){var n=this.boundaries[t];if(n.hasHalfEdge(e))return n}throw new Error("Could not find boundary")}}],[{key:"deserialize",value:function(t){var n=new e,i={},r={},a={},s={},o={},l={};return n.vertices=t.vertices.map((function(e){var t=new Xi(pn.Vector2IO.fromStateObject(e.point));return i[e.id]=t,t.visited=e.visited,t.visitIndex=e.visitIndex,t.lowIndex=e.lowIndex,t})),n.edges=t.edges.map((function(e){var t=new Ji(Qn.deserialize(e.segment),i[e.startVertex],i[e.endVertex]);r[e.id]=t,t.signedAreaFragment=e.signedAreaFragment;var n=function(e,t){a[t.id]=e,e.isReversed=t.isReversed,e.signedAreaFragment=t.signedAreaFragment,e.startVertex=i[t.startVertex.id],e.endVertex=i[t.endVertex.id],e.sortVector=pn.Vector2IO.fromStateObject(t.sortVector),e.data=t.data};return n(t.forwardHalf,e.forwardHalf),n(t.reversedHalf,e.reversedHalf),t.visited=e.visited,t.data=e.data,t})),t.vertices.forEach((function(e,t){n.vertices[t].incidentHalfEdges=e.incidentHalfEdges.map((function(e){return a[e]}))})),n.boundaries=t.boundaries.map((function(e){var t=new sr(e.halfEdges.map((function(e){return a[e]})));return s[e.id]=t,t.signedArea=e.signedArea,t.bounds=jn.Bounds2IO.fromStateObject(e.bounds),t})),t.boundaries.forEach((function(e,t){n.boundaries[t].childBoundaries=e.childBoundaries.map((function(e){return s[e]}))})),n.innerBoundaries=t.innerBoundaries.map((function(e){return s[e]})),n.outerBoundaries=t.outerBoundaries.map((function(e){return s[e]})),n.shapeIds=t.shapeIds,n.loops=t.loops.map((function(e){var t=new ir(e.shapeId,e.closed);return o[e.id]=t,t.halfEdges=e.halfEdges.map((function(e){return a[e]})),t})),n.faces=t.faces.map((function(e,t){var i=0===t?n.unboundedFace:new er(s[e.boundary]);return l[e.id]=i,i.holes=e.holes.map((function(e){return s[e]})),i.windingMap=e.windingMap,i.filled=e.filled,i})),t.edges.forEach((function(e,t){var i=n.edges[t];i.forwardHalf.face=null===e.forwardHalf.face?null:l[e.forwardHalf.face],i.reversedHalf.face=null===e.reversedHalf.face?null:l[e.reversedHalf.face]})),n}},{key:"BINARY_NONZERO_UNION",value:function(e){return 0!==e[0]||0!==e[1]}},{key:"BINARY_NONZERO_INTERSECTION",value:function(e){return 0!==e[0]&&0!==e[1]}},{key:"BINARY_NONZERO_DIFFERENCE",value:function(e){return 0!==e[0]&&0===e[1]}},{key:"BINARY_NONZERO_XOR",value:function(e){return 1==(0!==e[0]^0!==e[1])}},{key:"binaryResult",value:function(t,n,i){var r=new e;r.addShape(0,t),r.addShape(1,n),r.computeSimplifiedFaces(),r.computeFaceInclusion(i);var a=r.createFilledSubGraph(),s=a.facesToShape();return r.dispose(),a.dispose(),s}},{key:"unionNonZero",value:function(t){for(var n=new e,i=0;i<t.length;i++)n.addShape(i,t[i]);n.computeSimplifiedFaces(),n.computeFaceInclusion((function(e){for(var n=0;n<t.length;n++)if(0!==e[n])return!0;return!1}));var r=n.createFilledSubGraph(),a=r.facesToShape();return n.dispose(),r.dispose(),a}},{key:"intersectionNonZero",value:function(t){for(var n=new e,i=0;i<t.length;i++)n.addShape(i,t[i]);n.computeSimplifiedFaces(),n.computeFaceInclusion((function(e){for(var n=0;n<t.length;n++)if(0===e[n])return!1;return!0}));var r=n.createFilledSubGraph(),a=r.facesToShape();return n.dispose(),r.dispose(),a}},{key:"xorNonZero",value:function(t){for(var n=new e,i=0;i<t.length;i++)n.addShape(i,t[i]);n.computeSimplifiedFaces(),n.computeFaceInclusion((function(e){for(var n=!1,i=0;i<t.length;i++)0!==e[i]&&(n=!n);return n}));var r=n.createFilledSubGraph(),a=r.facesToShape();return n.dispose(),r.dispose(),a}},{key:"simplifyNonZero",value:function(t){var n=new e;n.addShape(0,t),n.computeSimplifiedFaces(),n.computeFaceInclusion((function(e){return 0!==e[0]}));var i=n.createFilledSubGraph(),r=i.facesToShape();return n.dispose(),i.dispose(),r}},{key:"clipShape",value:function(t,n,i){var r,a,s;i=A({includeExterior:!1,includeBoundary:!0,includeInterior:!0},i);var o=e.simplifyNonZero(t),l=new e;for(l.addShape(0,n,{ensureClosed:!1}),l.addShape(1,o),l.eliminateOverlap(),l.eliminateSelfIntersection(),l.eliminateIntersection(),l.collapseVertices(),r=0;r<l.loops.length;r++)if(1===(s=l.loops[r]).shapeId)for(a=0;a<s.halfEdges.length;a++)s.halfEdges[a].edge.data=!0;var u=[];for(r=0;r<l.loops.length;r++)if(0===(s=l.loops[r]).shapeId){var c=[];for(a=0;a<s.halfEdges.length;a++){var h=s.halfEdges[a];(h.edge.data?i.includeBoundary:o.containsPoint(h.edge.segment.positionAt(.5))?i.includeInterior:i.includeExterior)?c.push(h.getDirectionalSegment()):c.length&&(u.push(new Mi(c,void 0,s.closed)),c=[])}c.length&&u.push(new Mi(c,void 0,s.closed))}return l.dispose(),new Rn.Shape(u)}}]),e}();Rn.register("Graph",gr);var yr=gr,vr={},Ar=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"registerDataURL",value:function(e,t,n){if(phet.chipper.queryParameters.binder){var i="".concat(e,"/").concat(t);vr[i]=vr[i]||[];try{n.toDataURL((function(e){vr[i].push(e)}))}catch(r){}}}}]),e}();Ar.map=vr,y.register("InstanceRegistry",Ar);window.sceneryLog=null;var br=document.createElement("canvas"),Sr=br.getContext("2d"),Er="",kr=new c("scenery");function Vr(e){kr.logString+="".concat(e.replace(/%c/g,""),"\n")}function wr(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];window.console&&window.console.log&&(e=window.console).log.apply(e,_toConsumableArray(Array.prototype.slice.call(n,0)))}kr.register("scratchCanvas",br),kr.register("scratchContext",Sr);var _r={dirty:{name:"dirty",style:"color: #888;"},bounds:{name:"bounds",style:"color: #888;"},hitTest:{name:"hitTest",style:"color: #888;"},hitTestInternal:{name:"hitTestInternal",style:"color: #888;"},PerfCritical:{name:"Perf",style:"color: #f00;"},PerfMajor:{name:"Perf",style:"color: #aa0;"},PerfMinor:{name:"Perf",style:"color: #088;"},PerfVerbose:{name:"Perf",style:"color: #888;"},Cursor:{name:"Cursor",style:""},Stitch:{name:"Stitch",style:""},StitchDrawables:{name:"Stitch",style:""},GreedyStitcher:{name:"Greedy",style:"color: #088;"},GreedyVerbose:{name:"Greedy",style:"color: #888;"},RelativeTransform:{name:"RelativeTransform",style:"color: #606;"},BackboneDrawable:{name:"Backbone",style:"color: #a00;"},CanvasBlock:{name:"Canvas",style:""},WebGLBlock:{name:"WebGL",style:""},Display:{name:"Display",style:""},DOMBlock:{name:"DOM",style:""},Drawable:{name:"",style:""},FittedBlock:{name:"FittedBlock",style:""},Instance:{name:"Instance",style:""},InstanceTree:{name:"InstanceTree",style:""},ChangeInterval:{name:"ChangeInterval",style:"color: #0a0;"},SVGBlock:{name:"SVG",style:""},SVGGroup:{name:"SVGGroup",style:""},ImageSVGDrawable:{name:"ImageSVGDrawable",style:""},Paints:{name:"Paints",style:""},Filters:{name:"Filters",style:""},AlignBox:{name:"AlignBox",style:""},AlignGroup:{name:"AlignGroup",style:""},RichText:{name:"RichText",style:""},Sim:{name:"Sim",style:""},ParallelDOM:{name:"ParallelDOM",style:""},PDOMInstance:{name:"PDOMInstance",style:""},PDOMTree:{name:"PDOMTree",style:""},PDOMDisplaysInfo:{name:"PDOMDisplaysInfo",style:""},KeyboardFuzzer:{name:"KeyboardFuzzer",style:""},InputListener:{name:"InputListener",style:""},InputEvent:{name:"InputEvent",style:""},OnInput:{name:"OnInput",style:""},Pointer:{name:"Pointer",style:""},Input:{name:"Input",style:""},EventDispatch:{name:"EventDispatch",style:""},EventPath:{name:"EventPath",style:""}};Oi(kr,{logString:"",logFunction:function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];window.console&&window.console.log&&(e=window.console).log.apply(e,_toConsumableArray(Array.prototype.slice.call(n,0)))},switchLogToConsole:function(){kr.logFunction=wr},switchLogToString:function(){window.console&&window.console.log("switching to string log"),kr.logFunction=Vr},enableIndividualLog:function(e){return"stitch"===e?(this.enableIndividualLog("Stitch"),this.enableIndividualLog("StitchDrawables"),this.enableIndividualLog("GreedyStitcher"),void this.enableIndividualLog("GreedyVerbose")):"perf"===e?(this.enableIndividualLog("PerfCritical"),this.enableIndividualLog("PerfMajor"),this.enableIndividualLog("PerfMinor"),void this.enableIndividualLog("PerfVerbose")):"input"===e?(this.enableIndividualLog("InputListener"),this.enableIndividualLog("InputEvent"),this.enableIndividualLog("OnInput"),this.enableIndividualLog("Pointer"),this.enableIndividualLog("Input"),this.enableIndividualLog("EventDispatch"),void this.enableIndividualLog("EventPath")):"a11y"===e||"pdom"===e?(this.enableIndividualLog("ParallelDOM"),this.enableIndividualLog("PDOMInstance"),this.enableIndividualLog("PDOMTree"),void this.enableIndividualLog("PDOMDisplaysInfo")):void(e&&(window.sceneryLog[e]=window.sceneryLog[e]||function(t,n){var i=_r[e],r=i.name?"[".concat(i.name,"] "):"";kr.logFunction("%c".concat(Er,"%c").concat(r).concat(t),"color: #ddd;",n||i.style)}))},disableIndividualLog:function(e){e&&delete window.sceneryLog[e]},enableLogging:function(e){window.sceneryLog=function(e){kr.logFunction(e)},window.sceneryLog.push=function(){Er+="| "},window.sceneryLog.pop=function(){Er=Er.slice(0,-2)},window.sceneryLog.getDepth=function(){return Er.length/2};for(var t=0;t<e.length;t++)this.enableIndividualLog(e[t])},disableLogging:function(){window.sceneryLog=null},isLoggingPerformance:function(){return window.sceneryLog.PerfCritical||window.sceneryLog.PerfMajor||window.sceneryLog.PerfMinor||window.sceneryLog.PerfVerbose}});var Cr=kr,xr={DISABLED_OPACITY:.45,DEFAULT_COLOR_PROFILE:"default",PROJECTOR_COLOR_PROFILE:"projector"};Cr.register("SceneryConstants",xr);var Pr=xr,Tr=En.clamp,Mr=En.linear,Lr="(-?\\d{1,3}%?)";function Ir(e){var t=1;return e.endsWith("%")&&(t=2.55,e=e.slice(0,e.length-1)),En.roundSymmetric(Number(e)*t)}var Rr=function(){function e(t,n,i,r){_classCallCheck(this,e),this.changeEmitter=new d,this.set(t,n,i,r)}return _createClass(e,[{key:"copy",value:function(){return new e(this.r,this.g,this.b,this.a)}},{key:"set",value:function(t,n,i,r){if(null===t)this.setRGBA(0,0,0,0);else if("string"==typeof t)this.setCSS(t);else if(t instanceof e)this.setRGBA(t.r,t.g,t.b,t.a);else if(void 0===i){var a=t>>16&255,s=t>>8&255,o=t>>0&255,l=void 0===n?1:n;this.setRGBA(a,s,o,l)}else this.setRGBA(t,n,i,void 0===r?1:r);return this}},{key:"getRed",value:function(){return this.r}},{key:"red",get:function(){return this.getRed()},set:function(e){this.setRed(e)}},{key:"setRed",value:function(e){return this.setRGBA(e,this.g,this.b,this.a)}},{key:"getGreen",value:function(){return this.g}},{key:"green",get:function(){return this.getGreen()},set:function(e){this.setGreen(e)}},{key:"setGreen",value:function(e){return this.setRGBA(this.r,e,this.b,this.a)}},{key:"getBlue",value:function(){return this.b}},{key:"blue",get:function(){return this.getBlue()},set:function(e){this.setBlue(e)}},{key:"setBlue",value:function(e){return this.setRGBA(this.r,this.g,e,this.a)}},{key:"getAlpha",value:function(){return this.a}},{key:"alpha",get:function(){return this.getAlpha()},set:function(e){this.setAlpha(e)}},{key:"setAlpha",value:function(e){return this.setRGBA(this.r,this.g,this.b,e)}},{key:"setRGBA",value:function(e,t,n,i){return this.r=En.roundSymmetric(Tr(e,0,255)),this.g=En.roundSymmetric(Tr(t,0,255)),this.b=En.roundSymmetric(Tr(n,0,255)),this.a=Tr(i,0,1),this.updateColor(),this}},{key:"blend",value:function(t,n){var i=Math.pow(this.r,2.4),r=Math.pow(t.r,2.4),a=Math.pow(this.g,2.4),s=Math.pow(t.g,2.4),o=Math.pow(this.b,2.4),l=Math.pow(t.b,2.4);return new e(Math.pow(i+(r-i)*n,1/2.4),Math.pow(a+(s-a)*n,1/2.4),Math.pow(o+(l-o)*n,1/2.4),this.a+(t.a-this.a)*n)}},{key:"computeCSS",value:function(){if(1===this.a)return"rgb(".concat(this.r,",").concat(this.g,",").concat(this.b,")");for(var e=this.a.toFixed(20);e.length>=2&&e.endsWith("0")&&"."!==e[e.length-2];)e=e.slice(0,e.length-1);var t=0===this.a||1===this.a?this.a:e;return"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(t,")")}},{key:"toCSS",value:function(){return this._css}},{key:"setCSS",value:function(t){for(var n=!1,i=e.preprocessCSS(t),r=0;r<e.formatParsers.length;r++){var a=e.formatParsers[r],s=a.regexp.exec(i);if(s){a.apply(this,s),n=!0;break}}if(!n)throw new Error("Color unable to parse color string: ".concat(t));return this.updateColor(),this}},{key:"toNumber",value:function(){return(this.r<<16)+(this.g<<8)+this.b}},{key:"updateColor",value:function(){var e=this._css;this._css=this.computeCSS(),e!==this._css&&this.changeEmitter.emit()}},{key:"setImmutable",value:function(){return this}},{key:"getCanvasStyle",value:function(){return this.toCSS()}},{key:"setHSLA",value:function(t,n,i,r){var a;t=t%360/360,n=Tr(n/100,0,1);var s=2*(i=Tr(i/100,0,1))-(a=i<.5?i*(n+1):i+n-i*n);return this.r=En.roundSymmetric(255*e.hueToRGB(s,a,t+1/3)),this.g=En.roundSymmetric(255*e.hueToRGB(s,a,t)),this.b=En.roundSymmetric(255*e.hueToRGB(s,a,t-1/3)),this.a=Tr(r,0,1),this.updateColor(),this}},{key:"equals",value:function(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}},{key:"withAlpha",value:function(t){return new e(this.r,this.g,this.b,t)}},{key:"checkFactor",value:function(e){return void 0===e?.7:e}},{key:"brighterColor",value:function(t){return t=this.checkFactor(t),new e(Math.min(255,Math.floor(this.r/t)),Math.min(255,Math.floor(this.g/t)),Math.min(255,Math.floor(this.b/t)),this.a)}},{key:"colorUtilsBrighter",value:function(t){return t=this.checkFactor(t),new e(Math.min(255,this.getRed()+Math.floor(t*(255-this.getRed()))),Math.min(255,this.getGreen()+Math.floor(t*(255-this.getGreen()))),Math.min(255,this.getBlue()+Math.floor(t*(255-this.getBlue()))),this.getAlpha())}},{key:"darkerColor",value:function(t){return t=this.checkFactor(t),new e(Math.max(0,Math.floor(t*this.r)),Math.max(0,Math.floor(t*this.g)),Math.max(0,Math.floor(t*this.b)),this.a)}},{key:"colorUtilsDarker",value:function(t){return t=this.checkFactor(t),new e(Math.max(0,this.getRed()-Math.floor(t*this.getRed())),Math.max(0,this.getGreen()-Math.floor(t*this.getGreen())),Math.max(0,this.getBlue()-Math.floor(t*this.getBlue())),this.getAlpha())}},{key:"colorUtilsBrightness",value:function(e){return 0===e?this:e>0?this.colorUtilsBrighter(e):this.colorUtilsDarker(-e)}},{key:"toString",value:function(){return"".concat(this.constructor.name,"[r:").concat(this.r," g:").concat(this.g," b:").concat(this.b," a:").concat(this.a,"]")}},{key:"toHexString",value:function(){for(var e=this.toNumber().toString(16);e.length<6;)e="0".concat(e);return"#".concat(e)}},{key:"toStateObject",value:function(){return{r:this.r,g:this.g,b:this.b,a:this.a}}}],[{key:"hueToRGB",value:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}},{key:"toColor",value:function(t){return null===t?e.TRANSPARENT:t instanceof e?t:"string"==typeof t?new e(t):e.toColor(t.value)}},{key:"interpolateRGBA",value:function(t,n,i){if(i<0||i>1)throw new Error("distance must be between 0 and 1: ".concat(i));return new e(Math.floor(Mr(0,1,t.r,n.r,i)),Math.floor(Mr(0,1,t.g,n.g,i)),Math.floor(Mr(0,1,t.b,n.b,i)),Mr(0,1,t.a,n.a,i))}},{key:"supersampleBlend",value:function(t){var n=t.map((function(e){return Math.pow(e.r/255,2.2)})),i=t.map((function(e){return Math.pow(e.g/255,2.2)})),r=t.map((function(e){return Math.pow(e.b/255,2.2)})),a=t.map((function(e){return Math.pow(e.a,2.2)})),s=_.sum(a);if(0===s)return new e(0,0,0,0);var o=_.sum(_.range(0,t.length).map((function(e){return n[e]*a[e]})))/s,l=_.sum(_.range(0,t.length).map((function(e){return i[e]*a[e]})))/s,u=_.sum(_.range(0,t.length).map((function(e){return r[e]*a[e]})))/s,c=s/t.length;return new e(Math.floor(255*Math.pow(o,1/2.2)),Math.floor(255*Math.pow(l,1/2.2)),Math.floor(255*Math.pow(u,1/2.2)),Math.pow(c,1/2.2))}},{key:"fromStateObject",value:function(t){return new e(t.r,t.g,t.b,t.a)}},{key:"hsla",value:function(t,n,i,r){return new e(0,0,0,1).setHSLA(t,n,i,r)}},{key:"checkPaintString",value:function(e){0}},{key:"checkPaint",value:function(t){"string"==typeof t?e.checkPaintString(t):t instanceof ht&&"string"==typeof t.value&&e.checkPaintString(t.value)}},{key:"getLuminance",value:function(t){var n=e.toColor(t),i=.2126*n.red+.7152*n.green+.0722*n.blue;return i}},{key:"toGrayscale",value:function(t){var n=e.getLuminance(t);return new e(n,n,n)}},{key:"isDarkColor",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:186;return e.getLuminance(t)<n}},{key:"isLightColor",value:function(t,n){return!e.isDarkColor(t,n)}},{key:"grayColor",value:function(t,n){return new e(t,t,t,n)}},{key:"preprocessCSS",value:function(t){var n=t.replace(/ /g,"").toLowerCase(),i=e.colorKeywords[n];return i&&(n="#".concat(i)),n}},{key:"isCSSColorString",value:function(t){for(var n=e.preprocessCSS(t),i=0;i<e.formatParsers.length;i++){if(e.formatParsers[i].regexp.exec(n))return!0}return!1}}]),e}();_defineProperty(Rr,"formatParsers",[{regexp:/^transparent$/,apply:function(e,t){e.setRGBA(0,0,0,0)}},{regexp:/^#(\w{1})(\w{1})(\w{1})$/,apply:function(e,t){e.setRGBA(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1)}},{regexp:/^#(\w{2})(\w{2})(\w{2})$/,apply:function(e,t){e.setRGBA(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1)}},{regexp:new RegExp("^rgb\\(".concat(Lr,",").concat(Lr,",").concat(Lr,"\\)$")),apply:function(e,t){e.setRGBA(Ir(t[1]),Ir(t[2]),Ir(t[3]),1)}},{regexp:new RegExp("^rgba\\(".concat(Lr,",").concat(Lr,",").concat(Lr,",").concat("(\\d+|\\d*\\.\\d+)","\\)$")),apply:function(e,t){e.setRGBA(Ir(t[1]),Ir(t[2]),Ir(t[3]),Number(t[4]))}},{regexp:new RegExp("^hsl\\(".concat("(\\d{1,3})",",").concat("(\\d{1,3})","%,").concat("(\\d{1,3})","%\\)$")),apply:function(e,t){e.setHSLA(Number(t[1]),Number(t[2]),Number(t[3]),1)}},{regexp:new RegExp("^hsla\\(".concat("(\\d{1,3})",",").concat("(\\d{1,3})","%,").concat("(\\d{1,3})","%,").concat("(\\d+|\\d*\\.\\d+)","\\)$")),apply:function(e,t){e.setHSLA(Number(t[1]),Number(t[2]),Number(t[3]),Number(t[4]))}}]),_defineProperty(Rr,"basicColorKeywords",{aqua:"00ffff",black:"000000",blue:"0000ff",fuchsia:"ff00ff",gray:"808080",green:"008000",lime:"00ff00",maroon:"800000",navy:"000080",olive:"808000",purple:"800080",red:"ff0000",silver:"c0c0c0",teal:"008080",white:"ffffff",yellow:"ffff00"}),_defineProperty(Rr,"colorKeywords",{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}),Cr.register("Color",Rr),Rr.BLACK=Rr.black=new Rr(0,0,0).setImmutable(),Rr.BLUE=Rr.blue=new Rr(0,0,255).setImmutable(),Rr.CYAN=Rr.cyan=new Rr(0,255,255).setImmutable(),Rr.DARK_GRAY=Rr.darkGray=new Rr(64,64,64).setImmutable(),Rr.GRAY=Rr.gray=new Rr(128,128,128).setImmutable(),Rr.GREEN=Rr.green=new Rr(0,255,0).setImmutable(),Rr.LIGHT_GRAY=Rr.lightGray=new Rr(192,192,192).setImmutable(),Rr.MAGENTA=Rr.magenta=new Rr(255,0,255).setImmutable(),Rr.ORANGE=Rr.orange=new Rr(255,200,0).setImmutable(),Rr.PINK=Rr.pink=new Rr(255,175,175).setImmutable(),Rr.RED=Rr.red=new Rr(255,0,0).setImmutable(),Rr.WHITE=Rr.white=new Rr(255,255,255).setImmutable(),Rr.YELLOW=Rr.yellow=new Rr(255,255,0).setImmutable(),Rr.TRANSPARENT=Rr.transparent=new Rr(0,0,0,0).setImmutable();new Rr("blue");function Dr(e,t){return void 0!==e[t]?t:(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==e["moz".concat(t)]?"moz".concat(t):void 0!==e["Moz".concat(t)]?"Moz".concat(t):void 0!==e["webkit".concat(t)]?"webkit".concat(t):void 0!==e["ms".concat(t)]?"ms".concat(t):void 0!==e["o".concat(t)]?"o".concat(t):void 0)}Rr.ColorIO=new U("ColorIO",{valueType:Rr,documentation:"A color, with rgba",toStateObject:function(e){return e.toStateObject()},fromStateObject:function(e){return new Rr(e.r,e.g,e.b,e.a)},stateSchema:{r:Lt,g:Lt,b:Lt,a:Lt}}),y.register("detectPrefix",Dr);var Nr=Dr,qr={};function Or(e){try{var t=document.createElement("canvas");t.width=1,t.height=1;var n=t.getContext("2d");n.fillStyle="black",n.fillRect(0,0,1,1);var i=t.toDataURL([e]),r="data:".concat(e);return i.slice(0,r.length)===r}catch(a){return!1}}function Br(e,t){var n=document.createElement("canvas");n.width=1,n.height=1;var i=n.getContext("2d"),r=document.createElement("img");r.crossOrigin="Anonymous";var a=function(){try{i.drawImage(r,0,0),n.toDataURL(),qr[e]=!0}catch(t){qr[e]=!1}};r.onload=a;try{r.src=t,r.complete&&a()}catch(s){qr[e]=!1}}Cr.register("Features",qr),qr.canvasPNGOutput=Or("image/png"),qr.canvasJPEGOutput=Or("image/jpeg"),qr.canvasGIFOutput=Or("image/gif"),qr.canvasICONOutput=Or("image/x-icon"),Br("canvasPNGInput","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg=="),Br("canvasJPEGInput","data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8qqKKKAP/2Q=="),Br("canvasSVGInput","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3cG9ydD0iMCAwIDEgMSIgd2lkdGg9IjEiIGhlaWdodD0iMSIgPg0KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiByeD0iMCIgcnk9IjAiIHN0eWxlPSJmaWxsOiBibGFjazsgc3Ryb2tlOiBub25lOyI+PC9yZWN0Pg0KPC9zdmc+DQo="),Br("canvasGIFInput","data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICRAEAOw==");var Gr=document.createElement("canvas"),Hr=Gr.getContext("2d");qr.toDataURLHD=Nr(Gr,"toDataURLHD"),qr.createImageDataHD=Nr(Hr,"createImageDataHD"),qr.getImageDataHD=Nr(Hr,"getImageDataHD"),qr.putImageDataHD=Nr(Hr,"putImageDataHD"),qr.currentTransform=Nr(Hr,"currentTransform"),qr.canvasFilter=Nr(Hr,"filter");var Fr=document.createElement("span"),Yr=document.createElement("div");qr.textStroke=Nr(Fr.style,"textStroke"),qr.textStrokeColor=Nr(Fr.style,"textStrokeColor"),qr.textStrokeWidth=Nr(Fr.style,"textStrokeWidth"),qr.transform=Nr(Yr.style,"transform"),qr.transformOrigin=Nr(Yr.style,"transformOrigin"),qr.backfaceVisibility=Nr(Yr.style,"backfaceVisibility"),qr.borderRadius=Nr(Yr.style,"borderRadius"),qr.userSelect=Nr(Yr.style,"userSelect"),qr.touchAction=Nr(Yr.style,"touchAction"),qr.touchCallout=Nr(Yr.style,"touchCallout"),qr.userDrag=Nr(Yr.style,"userDrag"),qr.tapHighlightColor=Nr(Yr.style,"tapHighlightColor"),qr.fontSmoothing=Nr(Yr.style,"fontSmoothing"),qr.requestAnimationFrame=Nr(window,"requestAnimationFrame"),qr.cancelAnimationFrame=Nr(window,"cancelAnimationFrame"),qr.setStyle=function(e,t,n){void 0!==t&&(e.style[t]=n)},qr.passive=!1,window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){qr.passive=!0}}));var zr=qr,Ur=["normal","italic","oblique"],Wr=["normal","small-caps"],jr=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],Xr=["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"],Qr=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"10px",lineHeight:"normal",family:"sans-serif",phetioType:n.FontIO,tandem:xe.OPTIONAL},e);return(i=t.call(this,r))._style=r.style,i._variant=r.variant,i._weight="".concat(r.weight),i._stretch=r.stretch,i._size=n.castSize(r.size),i._lineHeight=r.lineHeight,i._family=r.family,i._font=i.computeShorthand(),i}return _createClass(n,[{key:"getFont",value:function(){return this._font}},{key:"font",get:function(){return this.getFont()}},{key:"getStyle",value:function(){return this._style}},{key:"style",get:function(){return this.getStyle()}},{key:"getVariant",value:function(){return this._variant}},{key:"variant",get:function(){return this.getVariant()}},{key:"getWeight",value:function(){return this._weight}},{key:"weight",get:function(){return this.getWeight()}},{key:"getStretch",value:function(){return this._stretch}},{key:"stretch",get:function(){return this.getStretch()}},{key:"getSize",value:function(){return this._size}},{key:"size",get:function(){return this.getSize()}},{key:"getNumericSize",value:function(){var e=this._size.match(/^(\d+)px$/);if(e)return Number(e[1]);var t=this._size.match(/^(\d+)pt$/);if(t)return.75*Number(t[1]);var n=this._size.match(/^(\d+)em$/);return n?Number(n[1])/16:12}},{key:"numericSize",get:function(){return this.getNumericSize()}},{key:"getLineHeight",value:function(){return this._lineHeight}},{key:"lineHeight",get:function(){return this.getLineHeight()}},{key:"getFamily",value:function(){return this._family}},{key:"family",get:function(){return this.getFamily()}},{key:"copy",value:function(e){return new n(k({style:this._style,variant:this._variant,weight:this._weight,stretch:this._stretch,size:this._size,lineHeight:this._lineHeight,family:this._family},e))}},{key:"computeShorthand",value:function(){var e="";return"normal"!==this._style&&(e+="".concat(this._style," ")),"normal"!==this._variant&&(e+="".concat(this._variant," ")),"normal"!==this._weight&&(e+="".concat(this._weight," ")),"normal"!==this._stretch&&(e+="".concat(this._stretch," ")),e+=this._size,"normal"!==this._lineHeight&&(e+="/".concat(this._lineHeight)),e+=" ".concat(this._family)}},{key:"toCSS",value:function(){return this.getFont()}}],[{key:"castSize",value:function(e){return"number"==typeof e?"".concat(e,"px"):e}},{key:"isFontStyle",value:function(e){return Ur.includes(e)}},{key:"isFontVariant",value:function(e){return Wr.includes(e)}},{key:"isFontWeight",value:function(e){return jr.includes(e)}},{key:"isFontStretch",value:function(e){return Xr.includes(e)}},{key:"fromCSS",value:function(e){for(var t={},i=_.filter(e.split(/[\x09\x0A\x0C\x0D\x20]/),(function(e){return e.length>0})),r=0;r<i.length;r++){var a=i[r];if("normal"===a);else if(n.isFontStyle(a))t.style=a;else if(n.isFontVariant(a))t.variant=a;else if(n.isFontWeight(a))t.weight=a;else{if(!n.isFontStretch(a)){var s=a.split(/\//);t.size=s[0],s[1]&&(t.lineHeight=s[1]),t.family=i.slice(r+1).join(" ");break}t.stretch=a}}return new n(t)}}]),n}(Be);Cr.register("Font",Qr),Qr.FontIO=new U("FontIO",{valueType:Qr,documentation:"Font handling for text drawing. Options:<ul><li><strong>style:</strong> normal      &mdash; normal | italic | oblique </li><li><strong>variant:</strong> normal    &mdash; normal | small-caps </li><li><strong>weight:</strong> normal     &mdash; normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 </li><li><strong>stretch:</strong> normal    &mdash; normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded </li><li><strong>size:</strong> 10px         &mdash; absolute-size | relative-size | length | percentage -- unitless number interpreted as px. absolute suffixes: cm, mm, in, pt, pc, px. relative suffixes: em, ex, ch, rem, vw, vh, vmin, vmax. </li><li><strong>lineHeight:</strong> normal &mdash; normal | number | length | percentage -- NOTE: Canvas spec forces line-height to normal </li><li><strong>family:</strong> sans-serif &mdash; comma-separated list of families, including generic families (serif, sans-serif, cursive, fantasy, monospace). ideally escape with double-quotes</li></ul>",toStateObject:function(e){return{style:e.getStyle(),variant:e.getVariant(),weight:e.getWeight(),stretch:e.getStretch(),size:e.getSize(),lineHeight:e.getLineHeight(),family:e.getFamily()}},fromStateObject:function(e){return new Qr(e)},stateSchema:{style:Te,variant:Te,weight:Te,stretch:Te,size:Te,lineHeight:Te,family:Te}}),Qr.DEFAULT=new Qr;var Kr={};Cr.register("Renderer",Kr),Kr.numActiveRenderers=4,Kr.bitsPerRenderer=5,Kr.bitmaskRendererArea=255,Kr.bitmaskCurrentRendererArea=15,Kr.bitmaskLacksOffset=65536,Kr.bitmaskLacksShift=16,Kr.bitmaskNodeDefault=Kr.bitmaskRendererArea,Kr.bitmaskCanvas=1,Kr.bitmaskSVG=2,Kr.bitmaskDOM=4,Kr.bitmaskWebGL=8,Kr.bitmaskSingleCanvas=256,Kr.bitmaskSingleSVG=512,Kr.bitmaskNotPainted=4096,Kr.bitmaskBoundsValid=8192,Kr.bitmaskNoPDOM=16384,Kr.bitmaskLacksCanvas=Kr.bitmaskCanvas<<Kr.bitmaskLacksShift,Kr.bitmaskLacksSVG=Kr.bitmaskSVG<<Kr.bitmaskLacksShift,Kr.bitmaskLacksDOM=Kr.bitmaskDOM<<Kr.bitmaskLacksShift,Kr.bitmaskLacksWebGL=Kr.bitmaskWebGL<<Kr.bitmaskLacksShift,Kr.isCanvas=function(e){return 0!=(e&Kr.bitmaskCanvas)},Kr.isSVG=function(e){return 0!=(e&Kr.bitmaskSVG)},Kr.isDOM=function(e){return 0!=(e&Kr.bitmaskDOM)},Kr.isWebGL=function(e){return 0!=(e&Kr.bitmaskWebGL)};var Jr={canvas:Kr.bitmaskCanvas,svg:Kr.bitmaskSVG,dom:Kr.bitmaskDOM,webgl:Kr.bitmaskWebGL};Kr.fromName=function(e){return Jr[e]},Kr.stripBitmask=function(e){return e&Kr.bitmaskRendererArea},Kr.createOrderBitmask=function(e,t,n,i){return(e=e||0)|(t=t||0)<<5|(n=n||0)<<10|(i=i||0)<<15},Kr.bitmaskOrder=function(e,t){return t>0&&(e>>=5*t),e&Kr.bitmaskCurrentRendererArea},Kr.bitmaskOrderFirst=function(e){return e&Kr.bitmaskCurrentRendererArea},Kr.bitmaskOrderSecond=function(e){return e>>5&Kr.bitmaskCurrentRendererArea},Kr.bitmaskOrderThird=function(e){return e>>10&Kr.bitmaskCurrentRendererArea},Kr.bitmaskOrderFourth=function(e){return e>>15&Kr.bitmaskCurrentRendererArea},Kr.pushOrderBitmask=function(e,t){for(var n=t,i=Kr.bitsPerRenderer*Kr.numActiveRenderers,r=0;r<=i;r+=Kr.bitsPerRenderer){var a=e>>r&Kr.bitmaskCurrentRendererArea;if(a===n)return e;if(0===a)return e|=n<<r;if(e&=~(Kr.bitmaskCurrentRendererArea<<r),e|=n<<r,(n=a)===t)return e}throw new Error("pushOrderBitmask overflow")},Kr.createSelfDrawable=function(e,t,n,i){var r;if(Kr.isCanvas(n))r=t.createCanvasDrawable(n,e);else if(Kr.isSVG(n))r=t.createSVGDrawable(n,e);else if(Kr.isDOM(n))r=t.createDOMDrawable(n,e);else{if(!Kr.isWebGL(n))throw new Error("Unrecognized renderer: ".concat(n));r=t.createWebGLDrawable(n,e)}return r.setFittable(i),r},Kr.webglCustom=1,Kr.webglTexturedTriangles=2,Kr.webglVertexColorPolygons=3;var Zr=Kr,$r="http://www.w3.org/2000/svg";Cr.register("svgns",$r);var ea=$r,ta="http://www.w3.org/1999/xlink";Cr.register("xlinkns",ta);var na=ta,ia=navigator.userAgent;function ra(e){return sa()===e}function aa(){return!!(window.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters["phet-app"]||(ia.match(/(iPod|iPhone|iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>=2)&&ia.match(/AppleWebKit/))}function sa(){var e=-1;return"Microsoft Internet Explorer"===navigator.appName?null!==new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(ia)&&(e=parseFloat(RegExp.$1)):"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(ia)&&(e=parseFloat(RegExp.$1)),e}var oa={firefox:ia.toLowerCase().indexOf("firefox")>-1,mobileSafari:aa(),safari5:!!(ia.match(/Version\/5\./)&&ia.match(/Safari\//)&&ia.match(/AppleWebKit/)),safari6:!!(ia.match(/Version\/6\./)&&ia.match(/Safari\//)&&ia.match(/AppleWebKit/)),safari7:!!(ia.match(/Version\/7\./)&&ia.match(/Safari\//)&&ia.match(/AppleWebKit/)),safari10:!!(ia.match(/Version\/10\./)&&ia.match(/Safari\//)&&ia.match(/AppleWebKit/)),safari11:!!(ia.match(/Version\/11\./)&&ia.match(/Safari\//)&&ia.match(/AppleWebKit/)),safari9:!!(ia.match(/Version\/9\./)&&ia.match(/Safari\//)&&ia.match(/AppleWebKit/)),safari:aa()||!!(ia.match(/Version\//)&&ia.match(/Safari\//)&&ia.match(/AppleWebKit/)),ie:-1!==sa(),ie9:ra(9),ie10:ra(10),ie11:ra(11),android:ia.indexOf("Android")>0,edge:!!ia.match(/Edge\//),chromium:/chrom(e|ium)/.test(ia.toLowerCase())&&!ia.match(/Edge\//)};y.register("platform",oa);var la=oa;function ua(e,t){return new pn(e,t)}var ca,ha=zr.transform,da=zr.transformOrigin||"transformOrigin",pa=!0,fa={prepareForTransform:function(e){e.style[da]="top left"},applyPreparedTransform:function(e,t){t.style[ha]=e.getCSSTransform()},setTransform:function(e,t){t.style[ha]=e},unsetTransform:function(e){e.style[ha]=""},polyfillRequestAnimationFrame:function(){window.requestAnimationFrame&&window.cancelAnimationFrame||(zr.requestAnimationFrame&&zr.cancelAnimationFrame?(window.requestAnimationFrame=window[zr.requestAnimationFrame],window.cancelAnimationFrame=window[zr.cancelAnimationFrame]):(window.requestAnimationFrame=function(e){var t=Date.now();return window.setTimeout((function(){e(Date.now()-t)}),16)},window.cancelAnimationFrame=clearTimeout))},backingStorePixelRatio:function(e){return e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1},backingScale:function(e){if("devicePixelRatio"in window){var t=fa.backingStorePixelRatio(e);return window.devicePixelRatio/t}return 1},supportsNativeCanvasFilter:function(){return!!zr.canvasFilter},supportsImageDataCanvasFilter:function(){return 1===fa.backingStorePixelRatio(Cr.scratchContext)},scanBounds:function(e,t,n){for(var i=_.map(_.range(t),(function(){return!1})),r=_.map(_.range(t),(function(){return!1})),a=0;a<t;a++)for(var s=0;s<t;s++){var o=4*(s*t+a);0===e.data[o]&&0===e.data[o+1]&&0===e.data[o+2]&&0===e.data[o+3]||(i[a]=!0,r[s]=!0)}var l=_.indexOf(i,!0),u=_.lastIndexOf(i,!0),c=_.indexOf(r,!0),h=_.lastIndexOf(r,!0),d=t/16;return{minBounds:new jn(l<1||l>=t-1?Number.POSITIVE_INFINITY:n.inversePosition2(ua(l+1+d,0)).x,c<1||c>=t-1?Number.POSITIVE_INFINITY:n.inversePosition2(ua(0,c+1+d)).y,u<1||u>=t-1?Number.NEGATIVE_INFINITY:n.inversePosition2(ua(u-d,0)).x,h<1||h>=t-1?Number.NEGATIVE_INFINITY:n.inversePosition2(ua(0,h-d)).y),maxBounds:new jn(l<1||l>=t-1?Number.NEGATIVE_INFINITY:n.inversePosition2(ua(l-1-d,0)).x,c<1||c>=t-1?Number.NEGATIVE_INFINITY:n.inversePosition2(ua(0,c-1-d)).y,u<1||u>=t-1?Number.POSITIVE_INFINITY:n.inversePosition2(ua(u+2+d,0)).x,h<1||h>=t-1?Number.POSITIVE_INFINITY:n.inversePosition2(ua(0,h+2+d)).y)}},canvasAccurateBounds:function(e,t){var n=t&&t.precision?t.precision:.001,i=t&&t.resolution?t.resolution:128,r=t&&t.initialScale?t.initialScale:1/16,a=jn.NOTHING,s=jn.EVERYTHING,o=document.createElement("canvas");o.width=i,o.height=i;var l=o.getContext("2d");function u(t){l.save(),t.matrix.canvasSetTransform(l),e(l),l.restore();var n=l.getImageData(0,0,i,i),r=fa.scanBounds(n,i,t);return l.clearRect(0,0,i,i),r}function c(e){var t=(i-4)/(e.maxX-e.minX),n=(i-4)/(e.maxY-e.minY),r=-t*e.minX+2,a=-n*e.minY+2;return new _i(oi.translation(r,a).timesMatrix(oi.scaling(t,n)))}var h=new _i;h.append(oi.translation(i/2,i/2)),h.append(oi.scaling(r));var d,p,f,m=u(h);for(a=a.union(m.minBounds),d=(s=s.intersection(m.maxBounds)).minY,p=s.maxY;isFinite(a.minX)&&isFinite(s.minX)&&Math.abs(a.minX-s.minX)>n;){if(f=u(c(new jn(s.minX,d,a.minX,p))),a.minX<=f.minBounds.minX&&s.minX>=f.maxBounds.minX){0;break}a=a.withMinX(Math.min(a.minX,f.minBounds.minX)),s=s.withMinX(Math.max(s.minX,f.maxBounds.minX)),d=Math.max(d,f.maxBounds.minY),p=Math.min(p,f.maxBounds.maxY)}for(d=s.minY,p=s.maxY;isFinite(a.maxX)&&isFinite(s.maxX)&&Math.abs(a.maxX-s.maxX)>n;){if(f=u(c(new jn(a.maxX,d,s.maxX,p))),a.maxX>=f.minBounds.maxX&&s.maxX<=f.maxBounds.maxX){0;break}a=a.withMaxX(Math.max(a.maxX,f.minBounds.maxX)),s=s.withMaxX(Math.min(s.maxX,f.maxBounds.maxX)),d=Math.max(d,f.maxBounds.minY),p=Math.min(p,f.maxBounds.maxY)}for(d=s.minX,p=s.maxX;isFinite(a.minY)&&isFinite(s.minY)&&Math.abs(a.minY-s.minY)>n;){if(f=u(c(new jn(d,s.minY,p,a.minY))),a.minY<=f.minBounds.minY&&s.minY>=f.maxBounds.minY){0;break}a=a.withMinY(Math.min(a.minY,f.minBounds.minY)),s=s.withMinY(Math.max(s.minY,f.maxBounds.minY)),d=Math.max(d,f.maxBounds.minX),p=Math.min(p,f.maxBounds.maxX)}for(d=s.minX,p=s.maxX;isFinite(a.maxY)&&isFinite(s.maxY)&&Math.abs(a.maxY-s.maxY)>n;){if(f=u(c(new jn(d,a.maxY,p,s.maxY))),a.maxY>=f.minBounds.maxY&&s.maxY<=f.maxBounds.maxY){0;break}a=a.withMaxY(Math.max(a.maxY,f.minBounds.maxY)),s=s.withMaxY(Math.min(s.maxY,f.maxBounds.maxY)),d=Math.max(d,f.maxBounds.minX),p=Math.min(p,f.maxBounds.maxX)}var g=new jn(isFinite(a.minX)&&isFinite(s.minX)?(a.minX+s.minX)/2:Number.POSITIVE_INFINITY,isFinite(a.minY)&&isFinite(s.minY)?(a.minY+s.minY)/2:Number.POSITIVE_INFINITY,isFinite(a.maxX)&&isFinite(s.maxX)?(a.maxX+s.maxX)/2:Number.NEGATIVE_INFINITY,isFinite(a.maxY)&&isFinite(s.maxY)?(a.maxY+s.maxY)/2:Number.NEGATIVE_INFINITY);return g.minBounds=a,g.maxBounds=s,g.isConsistent=s.containsBounds(a),g.precision=Math.max(Math.abs(a.minX-s.minX),Math.abs(a.minY-s.minY),Math.abs(a.maxX-s.maxX),Math.abs(a.maxY-s.maxY)),g},toPowerOf2:function(e){for(var t=1;t<e;)t*=2;return t},createShader:function(e,t,n){var i=e.createShader(n);return e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)||(console.log("GLSL compile error:"),console.log(e.getShaderInfoLog(i)),console.log(t)),i},applyWebGLContextDefaults:function(e){e.clearColor(0,0,0,0),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)},setWebGLEnabled:function(e){pa=e},checkWebGLSupport:function(e){if(!pa)return!1;var t=document.createElement("canvas"),n={failIfMajorPerformanceCaveat:!0};try{var i=!!window.WebGLRenderingContext&&(t.getContext("webgl",n)||t.getContext("experimental-webgl",n));if(!i)return!1;if(e)for(var r=0;r<e.length;r++)if(null===i.getExtension(e[r]))return!1;return!0}catch(a){return!1}},checkIE11StencilSupport:function(){var e=document.createElement("canvas");try{var t=!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"));return!!t&&(t.clearStencil(0),0===t.getError())}catch(n){return!1}},get isWebGLSupported(){return void 0===ca&&(ca=fa.checkWebGLSupport()),ca},loseContext:function(e){var t=e.getExtension("WEBGL_lose_context");t&&(t.loseContext(),setTimeout((function(){t.restoreContext()}),1e3))},safariEmbeddingMarkWorkaround:function(e){return la.safari?e.split("").join("​"):e}};Cr.register("Utils",fa);var ma=fa,ga=_createClass((function e(t,n){_classCallCheck(this,e),this.display=t,this.trail=n}));ga.FocusIO=new U("FocusIO",{valueType:ga,documentation:"A IO Type for the instance in the simulation which currently has keyboard focus. FocusIO is serialized into and Object with key `focusedPhetioElement` that is a list of PhET-iO elements, from parent-most to child-most corresponding to the PhET-iO element that was instrumented.",toStateObject:function(e){var t=[];return e.trail.nodes.forEach((function(e,n){e.isPhetioInstrumented()&&t.push(e.tandem.phetioID)})),{focusedPhetioElement:t}},stateSchema:{focusedPhetioElement:Ye(Te)}}),Cr.register("Focus",ga);var ya=ga,va=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],Aa=["KeyW","KeyS","KeyA","KeyD"],ba=["Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9"],Sa=["ShiftLeft","ShiftRight"],Ea=["ControlLeft","ControlRight"],ka=["AltLeft","AltRight"],Va={valueType:Event},wa=[],_a={KEY_SPACE:"Space",KEY_ENTER:"Enter",KEY_TAB:"Tab",KEY_RIGHT_ARROW:"ArrowRight",KEY_LEFT_ARROW:"ArrowLeft",KEY_UP_ARROW:"ArrowUp",KEY_DOWN_ARROW:"ArrowDown",KEY_SHIFT_LEFT:"ShiftLeft",KEY_SHIFT_RIGHT:"ShiftRight",KEY_ALT_LEFT:"AltLeft",KEY_ALT_RIGHT:"AltRight",KEY_CONTROL_LEFT:"ControlLeft",KEY_CONTROL_RIGHT:"ControlRight",KEY_ESCAPE:"Escape",KEY_DELETE:"Delete",KEY_BACKSPACE:"Backspace",KEY_PAGE_UP:"PageUp",KEY_PAGE_DOWN:"PageDown",KEY_END:"End",KEY_HOME:"Home",KEY_0:"Digit0",KEY_1:"Digit1",KEY_2:"Digit2",KEY_3:"Digit3",KEY_4:"Digit4",KEY_5:"Digit5",KEY_6:"Digit6",KEY_7:"Digit7",KEY_8:"Digit8",KEY_9:"Digit9",KEY_A:"KeyA",KEY_B:"KeyB",KEY_C:"KeyC",KEY_D:"KeyD",KEY_E:"KeyE",KEY_F:"KeyF",KEY_G:"KeyG",KEY_H:"KeyH",KEY_I:"KeyI",KEY_J:"KeyJ",KEY_K:"KeyK",KEY_L:"KeyL",KEY_M:"KeyM",KEY_N:"KeyN",KEY_O:"KeyO",KEY_P:"KeyP",KEY_Q:"KeyQ",KEY_R:"KeyR",KEY_S:"KeyS",KEY_T:"KeyT",KEY_U:"KeyU",KEY_V:"KeyV",KEY_W:"KeyW",KEY_X:"KeyX",KEY_Y:"KeyY",KEY_Z:"KeyZ",KEY_EQUALS:"Equal",KEY_PLUS:"Equal",KEY_MINUS:"Minus",ARROW_KEYS:va,WASD_KEYS:Aa,MOVEMENT_KEYS:va.concat(Aa),SHIFT_KEYS:Sa,CONTROL_KEYS:Ea,ALT_KEYS:ka,isArrowKey:function(e){return _a.isAnyKeyEvent(e,va)},isRangeKey:function(e){return _a.isArrowKey(e)||_a.isAnyKeyEvent(e,[_a.KEY_PAGE_UP,_a.KEY_PAGE_DOWN,_a.KEY_HOME,_a.KEY_END])},isNumberKey:function(e){return _a.isAnyKeyEvent(e,ba)},getNumberFromCode:function(e){return _a.isNumberKey(e)&&e instanceof KeyboardEvent?Number(e.code.replace("Digit","")):null},isShiftKey:function(e){return _a.isAnyKeyEvent(e,Sa)},isAltKey:function(e){return _a.isAnyKeyEvent(e,ka)},isControlKey:function(e){return _a.isAnyKeyEvent(e,Ea)},isWASDKey:function(e){return _a.isAnyKeyEvent(e,Aa)},isMovementKey:function(e){return _a.isAnyKeyEvent(e,_a.MOVEMENT_KEYS)},isAnyKeyEvent:function(e,t){D(e,Va);var n=_a.getEventCode(e);return!!n&&t.includes(n)},isKeyEvent:function(e,t){return _a.getEventCode(e)===t},getEventCode:function(e){return e instanceof KeyboardEvent&&e.code?e.code:null},ALL_KEYS:wa};for(var Ca in _a)_a.hasOwnProperty(Ca)&&"string"==typeof _a[Ca]&&wa.push(_a[Ca]);Cr.register("KeyboardUtils",_a);var xa=_a,Pa={q:xa.KEY_Q,w:xa.KEY_W,e:xa.KEY_E,r:xa.KEY_R,t:xa.KEY_T,y:xa.KEY_Y,u:xa.KEY_U,i:xa.KEY_I,o:xa.KEY_O,p:xa.KEY_P,a:xa.KEY_A,s:xa.KEY_S,d:xa.KEY_D,f:xa.KEY_F,g:xa.KEY_G,h:xa.KEY_H,j:xa.KEY_J,k:xa.KEY_K,l:xa.KEY_L,z:xa.KEY_Z,x:xa.KEY_X,c:xa.KEY_C,v:xa.KEY_V,b:xa.KEY_B,n:xa.KEY_N,m:xa.KEY_M,0:xa.KEY_0,1:xa.KEY_1,2:xa.KEY_2,3:xa.KEY_3,4:xa.KEY_4,5:xa.KEY_5,6:xa.KEY_6,7:xa.KEY_7,8:xa.KEY_8,9:xa.KEY_9,ctrl:xa.KEY_CONTROL_LEFT,alt:xa.KEY_ALT_LEFT,shift:xa.KEY_SHIFT_LEFT,enter:xa.KEY_ENTER,tab:xa.KEY_TAB,equals:xa.KEY_EQUALS,plus:xa.KEY_PLUS,minus:xa.KEY_MINUS,escape:xa.KEY_ESCAPE,delete:xa.KEY_DELETE,backspace:xa.KEY_BACKSPACE,page_up:xa.KEY_PAGE_UP,page_down:xa.KEY_PAGE_DOWN,end:xa.KEY_END,home:xa.KEY_HOME,space:xa.KEY_SPACE,arrowLeft:xa.KEY_LEFT_ARROW,arrowRight:xa.KEY_RIGHT_ARROW,arrowUp:xa.KEY_UP_ARROW,arrowDown:xa.KEY_DOWN_ARROW};Cr.register("EnglishStringToCodeMap",Pa);var Ta=Pa,Ma=function(e){return Object.getPrototypeOf(e)===Object.prototype},La=new U("ObjectLiteralIO",{documentation:"IO Type for object literals",isValidValue:Ma,supertype:j,stateSchema:F.asValue("object",{valueType:Object,isValidValue:Ma}),toStateObject:_.identity});V.register("ObjectLiteralIO",La);var Ia=La,Ra=new U("EventIO",{valueType:window.Event,documentation:"A DOM Event",toStateObject:function(e){return ad.serializeDomEvent(e)},fromStateObject:function(e){return ad.deserializeDomEvent(e)},stateSchema:function(){return{pointerId:Qe(Lt),pointerType:Qe(Te),clientX:Qe(Lt),clientY:Qe(Lt),ctrlKey:Qe(Q),shiftKey:Qe(Q),altKey:Qe(Q),metaKey:Qe(Q),button:Qe(Lt),relatedTarget:Qe(Ia),pageX:Qe(Lt),pageY:Qe(Lt),which:Qe(Lt),type:Qe(Te),target:Qe(Ia),keyCode:Qe(Lt),key:Qe(Te),deltaX:Qe(Lt),deltaY:Qe(Lt),deltaZ:Qe(Lt),deltaMode:Qe(Lt),charCode:Qe(Lt),scale:Qe(Lt)}}});Cr.register("EventIO",Ra);var Da=Ra,Na=document.createElement("style");Na.type="text/css",document.head.appendChild(Na);var qa=document.styleSheets[document.styleSheets.length-1],Oa={stylesheet:qa,styleElement:Na,addRule:function(e){this.stylesheet.insertRule(e,0)}};Cr.register("SceneryStyle",Oa);var Ba=Oa,Ga=function(){function e(t,n){_classCallCheck(this,e),this.canvas=t,this.context=n,this.resetStyles()}return _createClass(e,[{key:"resetStyles",value:function(){this.fillStyle=void 0,this.strokeStyle=void 0,this.lineWidth=void 0,this.lineCap=void 0,this.lineJoin=void 0,this.lineDash=void 0,this.lineDashOffset=void 0,this.miterLimit=void 0,this.font=void 0,this.direction=void 0}},{key:"setDimensions",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.resetStyles()}},{key:"setFillStyle",value:function(e){e&&e instanceof ht&&(e=e.value),e&&e.getCanvasStyle&&(e=e.getCanvasStyle()),this.fillStyle!==e&&(this.fillStyle=e,this.context.fillStyle=e)}},{key:"setStrokeStyle",value:function(e){e&&e instanceof ht&&(e=e.value),e&&e.getCanvasStyle&&(e=e.getCanvasStyle()),this.strokeStyle!==e&&(this.strokeStyle=e,this.context.strokeStyle=e)}},{key:"setLineWidth",value:function(e){this.lineWidth!==e&&(this.lineWidth=e,this.context.lineWidth=e)}},{key:"setLineCap",value:function(e){this.lineCap!==e&&(this.lineCap=e,this.context.lineCap=e)}},{key:"setLineJoin",value:function(e){this.lineJoin!==e&&(this.lineJoin=e,this.context.lineJoin=e)}},{key:"setMiterLimit",value:function(e){this.miterLimit!==e&&(this.miterLimit=e,this.context.miterLimit=e)}},{key:"setLineDash",value:function(e){this.lineDash!==e&&(this.lineDash=e,this.context.setLineDash?this.context.setLineDash(null===e?[]:e):void 0!==this.context.mozDash?this.context.mozDash=e:void 0!==this.context.webkitLineDash&&(this.context.webkitLineDash=e||[]))}},{key:"setLineDashOffset",value:function(e){this.lineDashOffset!==e&&(this.lineDashOffset=e,void 0!==this.context.lineDashOffset?this.context.lineDashOffset=e:void 0!==this.context.webkitLineDashOffset&&(this.context.webkitLineDashOffset=e))}},{key:"setFont",value:function(e){this.font!==e&&(this.font=e,this.context.font=e)}},{key:"setDirection",value:function(e){this.direction!==e&&(this.direction=e,this.context.direction=e)}}]),e}();Cr.register("CanvasContextWrapper",Ga);var Ha=Ga;function Fa(e,t,n){return void 0!==e["on".concat(t)]?t:void 0!==e["".concat("onmoz").concat(t)]?"moz".concat(t):void 0!==e["".concat("onMoz").concat(t)]?"Moz".concat(t):void 0!==e["".concat("onwebkit").concat(t)]?"webkit".concat(t):void 0!==e["".concat("onms").concat(t)]?"ms".concat(t):void 0!==e["".concat("ono").concat(t)]?"o".concat(t):void 0}y.register("detectPrefixEvent",Fa);var Ya=Fa,za=Nr(document,"exitFullscreen")||Nr(document,"cancelFullScreen"),Ua=Nr(document,"fullscreenElement")||Nr(document,"fullScreenElement"),Wa=Nr(document,"fullscreenEnabled")||Nr(document,"fullScreenEnabled"),ja=Ya(document,"fullscreenchange");"msfullscreenchange"===ja&&(ja="MSFullscreenChange");var Xa={isFullScreen:function(){return!!document[Ua]},isFullScreenEnabled:function(){return document[Wa]&&!la.safari7},enterFullScreen:function(e){var t=Nr(document.body,"requestFullscreen")||Nr(document.body,"requestFullScreen");e.domElement[t]&&e.domElement[t]()},exitFullScreen:function(){document[za]&&document[za]()},toggleFullScreen:function(e){Xa.isFullScreen()?Xa.exitFullScreen():Xa.enterFullScreen(e)},isFullScreenProperty:new dt(!1)};document.addEventListener(ja,(function(e){Xa.isFullScreenProperty.set(Xa.isFullScreen())})),Cr.register("FullScreen",Xa);var Qa=Xa,Ka=function(){function e(t,n){_classCallCheck(this,e),this.create=t,this.destroy=n,this.map=new Map}return _createClass(e,[{key:"increment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.map.has(e))this.map.get(e).count+=t;else{var n=this.create(e),i=Ja.createFromPool(t,e,n);this.map.set(e,i)}}},{key:"decrement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.map.get(e);n&&(n.count-=t,n.count<1&&(this.destroy(e,n.value),this.map.delete(e),n.dispose()))}},{key:"get",value:function(e){return this.map.get(e).value}},{key:"clear",value:function(){this.map.clear()}}]),e}(),Ja=function(){function e(t,n,i){_classCallCheck(this,e),this.initialize(t,n,i)}return _createClass(e,[{key:"initialize",value:function(e,t,n){this.count=e,this.key=t,this.value=n}},{key:"dispose",value:function(){this.key=null,this.value=null,this.freeToPool()}}]),e}();Gi.mixInto(Ja,{initialize:Ja.prototype.initialize}),Cr.register("CountMap",Ka);var Za=Ka,$a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),i=A({display:null},i),(r=t.call(this,!1,i)).node=e,r.display=i.display,r.updateListener=r.updateValue.bind(_assertThisInitialized(r)),r.changedInstanceListener=r.changedInstance.bind(_assertThisInitialized(r)),e.changedInstanceEmitter.addListener(r.changedInstanceListener);for(var a=e.instances,s=0;s<a.length;s++)r.changedInstance(a[s],!0);return r}return _createClass(n,[{key:"updateValue",value:function(){this.value=this.node.wasVisuallyDisplayed(this.display)}},{key:"changedInstance",value:function(e,t){t?e.visibleEmitter.addListener(this.updateListener):e.visibleEmitter.removeListener(this.updateListener),this.updateValue()}},{key:"dispose",value:function(){for(var e=this.node.instances,t=0;t<e.length;t++)this.changedInstance(e[t],!1);this.node.changedInstanceEmitter.removeListener(this.changedInstanceListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(pt);Cr.register("DisplayedProperty",$a);var es=$a,ts=function(){function e(t){_classCallCheck(this,e),this.scene=t,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.img=document.createElement("img"),this.update()}return _createClass(e,[{key:"update",value:function(e){var t=this;this.scene.updateScene(),this.canvas.width=this.scene.getSceneWidth(),this.canvas.height=this.scene.getSceneHeight(),this.scene.renderToCanvas(this.canvas,this.context,(function(){var n=t.toDataURL();t.img.onload=function(){e(),delete t.img.onload},t.img.src=n}))}}]),e}();Cr.register("SceneImage",ts);var ns=new pt(!(null!==(e=window)&&void 0!==e&&null!==(t=e.phet)&&void 0!==t&&null!==(i=t.chipper)&&void 0!==i&&i.queryParameters)||(null===(r=window)||void 0===r||null===(a=r.phet)||void 0===a||null===(s=a.chipper)||void 0===s||null===(o=s.queryParameters)||void 0===o?void 0:o.allowLinks),{tandem:xe.GENERAL_MODEL.createTandem("allowLinksProperty")});Cr.register("allowLinksProperty",ns);var is=ns;function rs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:is.value;if(t){var n=window.open(e,"_blank");n&&n.focus()}}Cr.register("openPopup",rs);var as=rs,ss=function(e,t){var n=S()({requiredOnly:!1},t),i=[],r=new LineBreaker(e);r[Symbol.iterator]=function(){return{next:function(){var e=r.nextBreak();return null!==e?{value:e,done:!1}:{done:!0}}}};var a,s=0,o=_createForOfIteratorHelper(r);try{for(o.s();!(a=o.n()).done;){var l=a.value,u=l.position;n.requiredOnly&&!l.required||(s!==u&&i.push(new Tt(s,u)),s=l.position)}}catch(c){o.e(c)}finally{o.f()}return s<e.length&&i.push(new Tt(s,e.length)),i};Cr.register("getLineBreakRanges",ss);var os=ss,ls=new pn(0,0),us=oi.IDENTITY.copy(),cs=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(cs,"TRANSLATION",new cs),_defineProperty(cs,"TRANSLATION_AND_SCALE",new cs),_defineProperty(cs,"TRANSLATION_AND_ROTATION",new cs),_defineProperty(cs,"AFFINE",new cs),_defineProperty(cs,"enumeration",new re(cs,{phetioDocumentation:"Defines the available transform type for a SpriteInstance"}));var hs=function(){function e(){_classCallCheck(this,e),this.sprite=null,this.matrix=(new oi).setToAffine(1,0,0,0,1,0),this.transformType=cs.TRANSLATION,this.alpha=1}return _createClass(e,[{key:"initialize",value:function(){}},{key:"getShape",value:function(){return this.sprite?this.sprite.getShape().transformed(this.matrix):new Ni}},{key:"containsPoint",value:function(e){if(!this.sprite)return!1;var t=ls.set(e);return this.transformType===cs.AFFINE?us.set(this.matrix).invert().multiplyVector2(t):(t.x-=this.matrix.m02(),t.y-=this.matrix.m12(),this.transformType===cs.TRANSLATION_AND_SCALE?(t.x/=this.matrix.m00(),t.y/=this.matrix.m11()):this.transformType===cs.TRANSLATION_AND_ROTATION&&t.rotate(-this.matrix.rotation)),this.sprite.containsPoint(t)}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}]),e}();_defineProperty(hs,"pool",new rn(hs,{maxSize:1e3})),Cr.register("SpriteInstance",hs);var ds=function(){function e(t){_classCallCheck(this,e),this.rootBin=new ps(t,null)}return _createClass(e,[{key:"allocate",value:function(e,t){var n=this.rootBin.findAvailableBin(e,t);if(n){var i=n.split(e,t);return i.use(),i}return null}},{key:"deallocate",value:function(e){e.unuse()}},{key:"toString",value:function(){var e="",t="";return function n(i){e+="".concat(t+i.toString(),"\n"),t="".concat(t,"  "),_.each(i.children,n),t=t.substring(2)}(this.rootBin),e}}]),e}();xt.register("BinPacker",ds);var ps=function(){function e(t,n){_classCallCheck(this,e),this.bounds=t,this.parent=n,this.isSplit=!1,this.isUsed=!1,this.children=[]}return _createClass(e,[{key:"findAvailableBin",value:function(e,t){if(this.isUsed)return null;if(this.bounds.width<e||this.bounds.height<t)return null;if(this.isSplit){for(var n=0;n<this.children.length;n++){var i=this.children[n].findAvailableBin(e,t);if(i)return i}return null}return this}},{key:"split",value:function(t,n){if(t===this.bounds.width&&n===this.bounds.height)return this;this.isSplit=!0;var i=this.bounds.minX+t,r=this.bounds.minY+n,a=new jn(this.bounds.minX,this.bounds.minY,i,r),s=new jn(i,this.bounds.minY,this.bounds.maxX,r),o=new jn(this.bounds.minX,r,this.bounds.maxX,this.bounds.maxY),l=new e(a,this);return this.children.push(l),s.hasNonzeroArea()&&this.children.push(new e(s,this)),o.hasNonzeroArea()&&this.children.push(new e(o,this)),l}},{key:"use",value:function(){this.isUsed=!0}},{key:"unuse",value:function(){this.isUsed=!1,this.parent&&this.parent.attemptToCollapse()}},{key:"attemptToCollapse",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.isSplit||t.isUsed)return}this.children=[],this.isSplit=!1,this.parent&&this.parent.attemptToCollapse()}},{key:"toString",value:function(){return this.bounds.toString()+(this.isUsed?" used":"")}}]),e}();ds.Bin=ps;var fs=function(){function e(t,n){_classCallCheck(this,e),this.width=t,this.height=n}return _createClass(e,[{key:"toString",value:function(){return"[".concat(this.width,"w, ").concat(this.height,"h]")}},{key:"set",value:function(e){return this.width=e.width,this.height=e.height,this}},{key:"setWidth",value:function(e){return this.width=e,this}},{key:"setHeight",value:function(e){return this.height=e,this}},{key:"copy",value:function(t){return t?t.set(this):new e(this.width,this.height)}},{key:"swapped",value:function(){return new e(this.height,this.width)}},{key:"toBounds",value:function(e,t){return new jn(e=void 0!==e?e:0,t=void 0!==t?t:0,this.width+e,this.height+t)}},{key:"equals",value:function(e){return this.width===e.width&&this.height===e.height}}]),e}();xt.register("Dimension2",fs);var ms=fs,gs=new ms(1024,1024),ys=function(){function e(t){_classCallCheck(this,e),this.useMipmaps=t,this.gl=null,this.texture=null,this.bounds=new jn(0,0,gs.width,gs.height),this.width=this.bounds.width,this.height=this.bounds.height,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.binPacker=new ds(this.bounds),this.dirty=!0,this.usedSprites=[],this.unusedSprites=[]}return _createClass(e,[{key:"initializeContext",value:function(e){this.gl=e,this.createTexture()}},{key:"createTexture",value:function(){var e=this.gl;this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this.useMipmaps?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(e.hint(e.GENERATE_MIPMAP_HINT,e.NICEST),e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null),this.dirty=!1}},{key:"updateTexture",value:function(){if(this.dirty){this.dirty=!1;var e=this.gl;e.bindTexture(e.TEXTURE_2D,this.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(e.hint(e.GENERATE_MIPMAP_HINT,e.NICEST),e.generateMipmap(e.TEXTURE_2D)),e.bindTexture(e.TEXTURE_2D,null)}}},{key:"addImage",value:function(e,t,n){var i,r;for(i=0;i<this.usedSprites.length;i++){var a=this.usedSprites[i];if(a.image===e)return a.count++,a}for(i=0;i<this.unusedSprites.length;i++){var s=this.unusedSprites[i];if(s.image===e)return s.count++,this.unusedSprites.splice(i,1),this.usedSprites.push(s),s}for(;!(r=this.binPacker.allocate(t+2+1,n+2+1))&&this.unusedSprites.length;){var o=this.unusedSprites.shift();this.dirty=!0;var l=o.bin.bounds;this.context.clearRect(l.x,l.y,l.width,l.height),this.binPacker.deallocate(o.bin)}if(r){var u=new jn((r.bounds.minX+1)/this.width,(r.bounds.minY+1)/this.height,(r.bounds.maxX-1-1)/this.width,(r.bounds.maxY-1-1)/this.height),c=new vs(this,r,u,e,1);return this.copyImageWithGutter(e,t,n,r.bounds.x,r.bounds.y),this.dirty=!0,this.usedSprites.push(c),c}return null}},{key:"removeImage",value:function(e){var t,n;for(n=0;n<this.usedSprites.length;n++)if(this.usedSprites[n].image===e){t=this.usedSprites[n];break}--t.count<=0&&(this.usedSprites.splice(n,1),this.unusedSprites.push(t))}},{key:"containsImage",value:function(e){var t;for(t=0;t<this.usedSprites.length;t++)if(this.usedSprites[t].image===e)return!0;for(t=0;t<this.unusedSprites.length;t++)if(this.unusedSprites[t].image===e)return!0;return!1}},{key:"copyImageWithGutter",value:function(e,t,n,i,r){this.copyImageRegion(e,1,1,0,0,i,r),this.copyImageRegion(e,1,1,t-1,0,i+1+t,r),this.copyImageRegion(e,1,1,t-1,n-1,i+1+t,r+1+n),this.copyImageRegion(e,1,1,0,n-1,i,r+1+n),this.copyImageRegion(e,t,1,0,0,i+1,r),this.copyImageRegion(e,t,1,0,n-1,i+1,r+1+n),this.copyImageRegion(e,1,n,0,0,i,r+1),this.copyImageRegion(e,1,n,t-1,0,i+1+t,r+1),this.context.drawImage(e,i+1,r+1)}},{key:"copyImageRegion",value:function(e,t,n,i,r,a,s){this.context.drawImage(e,i,r,t,n,a,s,t,n)}}]),e}();Cr.register("SpriteSheet",ys);var vs=_createClass((function e(t,n,i,r,a){_classCallCheck(this,e),this.spriteSheet=t,this.bin=n,this.uvBounds=i,this.image=r,this.count=a}));ys.Sprite=vs,ys.MAX_DIMENSION=gs;var As=function(){function e(t,n,i,r){_classCallCheck(this,e);var a=S()({attributes:[],uniforms:[]},r);this.vertexSource=n,this.fragmentSource=i,this.attributeNames=a.attributes,this.uniformNames=a.uniforms,this.initialize(t)}return _createClass(e,[{key:"initialize",value:function(e){var t=this;this.gl=e,this.used=!1,this.program=this.gl.createProgram(),this.vertexShader=ma.createShader(this.gl,this.vertexSource,this.gl.VERTEX_SHADER),this.fragmentShader=ma.createShader(this.gl,this.fragmentSource,this.gl.FRAGMENT_SHADER),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||(console.log("GLSL link error:"),console.log(this.gl.getProgramInfoLog(this.program)),console.log("for vertex shader"),console.log(this.vertexSource),console.log("for fragment shader"),console.log(this.fragmentSource)),this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),this.uniformLocations={},this.attributeLocations={},this.activeAttributes={},_.each(this.attributeNames,(function(e){t.attributeLocations[e]=t.gl.getAttribLocation(t.program,e),t.activeAttributes[e]=!0})),_.each(this.uniformNames,(function(e){t.uniformLocations[e]=t.gl.getUniformLocation(t.program,e)})),this.isInitialized=!0}},{key:"use",value:function(){var e=this;this.used||(this.used=!0,this.gl.useProgram(this.program),_.each(this.attributeNames,(function(t){e.activeAttributes[t]&&e.enableVertexAttribArray(t)})))}},{key:"activateAttribute",value:function(e){this.activeAttributes[e]||(this.activeAttributes[e]=!0,this.used&&this.enableVertexAttribArray(e))}},{key:"enableVertexAttribArray",value:function(e){this.gl.enableVertexAttribArray(this.attributeLocations[e])}},{key:"unuse",value:function(){var e=this;this.used&&(this.used=!1,_.each(this.attributeNames,(function(t){e.activeAttributes[t]&&e.disableVertexAttribArray(t)})))}},{key:"disableVertexAttribArray",value:function(e){this.gl.disableVertexAttribArray(this.attributeLocations[e])}},{key:"deactivateAttribute",value:function(e){this.activeAttributes[e]&&(this.activeAttributes[e]=!1,this.used&&this.disableVertexAttribArray(e))}},{key:"dispose",value:function(){this.gl.deleteProgram(this.program)}}]),e}();Cr.register("ShaderProgram",As);var bs=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({valueType:Rr,phetioValueType:Rr.ColorIO},i);return t.call(this,e,r)}return _createClass(n)}(dt);Cr.register("ColorProperty",bs);var Ss,Es,ks={},Vs=!1,ws={approximateSVGBounds:function(e,t){if(!Ss.parentNode){if(!document.body)throw new Error("No document.body and trying to get approximate SVG bounds of a Text node");document.body.appendChild(Ss)}ws.setSVGTextAttributes(Es,e,t);var n=Es.getBBox();return 0===n.width&&0===n.height&&t.length>0?(Vs||(Vs=!0,console.log("WARNING: Guessing text bounds, is the simulation hidden? See https://github.com/phetsims/chipper/issues/768")),ws.guessSVGBounds(e,t)):new jn(n.x,n.y,n.x+n.width,n.y+n.height)},guessSVGBounds:function(e,t){var n=e.getNumericSize(),i="bold"===e.weight;return new jn(0,-.9*n,(i?.435:.4)*n*t.length,.22*n)},accurateCanvasBounds:function(e){var t=ws.approximateSVGBounds(e._font,e.renderedText);if(!e.renderedText.length||0===t.width)return t;var n=ma.canvasAccurateBounds((function(t){if(t.font=e._font.toCSS(),t.direction="ltr",t.fillText(e.renderedText,0,0),e.hasPaintableStroke()){var n=new Ha(null,t);e.beforeCanvasStroke(n),t.strokeText(e.renderedText,0,0),e.afterCanvasStroke(n)}}),{precision:.5,resolution:128,initialScale:32/Math.max(Math.abs(t.minX),Math.abs(t.minY),Math.abs(t.maxX),Math.abs(t.maxY))});return n.isFinite()?n:t},getVerticalBounds:function(e){var t=e.toCSS(),n=ks[t];return n||(n=ks[t]=ws.approximateSVGBounds(e,"m")),n},approximateCanvasWidth:function(e,t){var n=Cr.scratchContext;return n.font=e.toCSS(),n.direction="ltr",n.measureText(t).width},approximateHybridBounds:function(e,t){var n=ws.getVerticalBounds(e),i=ws.approximateCanvasWidth(e,t);return new jn(0,n.minY,i,n.maxY)},approximateDOMBounds:function(e,t){var n=document.createElement("div");$(n).css({position:"absolute",left:0,top:0,padding:"0 !important",margin:"0 !important",display:"hidden"});var i=document.createElement("span");$(i).css("font",e.toCSS()),i.appendChild(t),i.setAttribute("direction","ltr");var r=document.createElement("div");$(r).css({"vertical-align":"baseline",display:"inline-block",width:0,height:"".concat(1024,"px"),margin:"0 !important",padding:"0 !important"}),n.appendChild(i),n.appendChild(r),document.body.appendChild(n);var a=i.getBoundingClientRect(),s=n.getBoundingClientRect(),o=new jn(a.left,a.top-1024,a.right+1,a.bottom-1024).shiftedXY(-s.left,-s.top);return document.body.removeChild(n),o},approximateImprovedDOMBounds:function(e,t){var n=document.createElement("div");n.style.display="inline-block",n.style.font=e.toCSS(),n.style.color="transparent",n.style.padding="0 !important",n.style.margin="0 !important",n.style.position="absolute",n.style.left="0",n.style.top="0",n.setAttribute("direction","ltr"),n.appendChild(t),document.body.appendChild(n);var i=new jn(n.offsetLeft,n.offsetTop,n.offsetLeft+n.offsetWidth+1,n.offsetTop+n.offsetHeight+1);document.body.removeChild(n);var r=ws.getVerticalBounds(e);return i.shiftedY(r.minY)},setSVGTextAttributes:function(e,t,n){e.setAttribute("direction","ltr"),e.setAttribute("font-family",t.getFamily()),e.setAttribute("font-size",t.getSize()),e.setAttribute("font-style",t.getStyle()),e.setAttribute("font-weight",t.getWeight()),e.setAttribute("font-stretch",t.getStretch()),e.lastChild.nodeValue=n},initializeTextBounds:function(){(Ss=document.getElementById("sceneryTextSizeContainer"))||((Ss=document.createElementNS(ea,"svg")).setAttribute("width","2"),Ss.setAttribute("height","2"),Ss.setAttribute("id","sceneryTextSizeContainer"),Ss.setAttribute("style","visibility: hidden; pointer-events: none; position: absolute; left: -65535px; right: -65535px;")),(Es=document.getElementById("sceneryTextSizeElement"))||((Es=document.createElementNS(ea,"text")).appendChild(document.createTextNode("")),Es.setAttribute("dominant-baseline","alphabetic"),Es.setAttribute("text-rendering","geometricPrecision"),Es.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),Es.setAttribute("id","sceneryTextSizeElement"),Ss.appendChild(Es))}};Cr.register("TextBounds",ws);var _s=ws,Cs=_createClass((function e(t,n,i){_classCallCheck(this,e),this.pdomInstance=t,this.trail=n,this.isRoot=i,this.fullTrail=this.pdomInstance.trail.copy();for(var r=this.isRoot?0:1;r<this.trail.length;r++)this.fullTrail.addDescendant(this.trail.nodes[r])}));Cr.register("PartialPDOMTrail",Cs);var xs=Cs;Ba.addRule(".".concat("a11y-pdom-element","{")+"position: fixed;pointer-events: none;top: 0px;left: 0px;transform-origin: left top 0px;border-width: 0px;border: 0px;padding: 1px 1px;margin: 0px;white-space: nowrap;outline: none;box-shadow:none;border-color:transparent;font-size: 1px;clip: rect(1px, 1px, 1px, 1px);}"),Ba.addRule(".".concat("a11y-pdom-root","{")+"position: absolute;z-index: 1;opacity: 0.0001;}"),Ba.addRule(".".concat("a11y-pdom-list-item","{")+"list-style: none;");var Ps={SIBLING_CLASS_NAME:"a11y-pdom-element",ROOT_CLASS_NAME:"a11y-pdom-root",LIST_ITEM_CLASS_NAME:"a11y-pdom-list-item"};Cr.register("PDOMSiblingStyle",Ps);var Ts=Ps;function Ms(e){return e.replace(/\u202a|\u202b|\u202c/g,"")}y.register("stripEmbeddingMarks",Ms);var Ls=Ms,Is=["A","AREA","INPUT","SELECT","TEXTAREA","BUTTON","IFRAME"],Rs=["B","STRONG","I","EM","MARK","SMALL","DEL","INS","SUB","SUP","BR"],Ds=["INPUT"];function Ns(e){for(var t=e.getElementsByTagName("*"),n=[],i=0;i<t.length;i++)t[i].nodeType===Node.ELEMENT_NODE&&(n[i]=t[i]);return n}function qs(e,t){for(var n=Ns(t||document.body),i=document.activeElement,r="NEXT"===e?1:-1,a=n.indexOf(i)+r;a<n.length&&a>=0;){var s=n[a];if(a+=r,Bs.isElementFocusable(s))return s}return i}function Os(e){return!_.includes(Ds,e.toUpperCase())}var Bs={getNextFocusable:function(e){return qs("NEXT",e)},getPreviousFocusable:function(e){return qs("PREVIOUS",e)},getFirstFocusable:function(e){for(var t=Ns(e||document.body),n=document.body,i=0;i<t.length;){var r=t[i];if(i++,Bs.isElementFocusable(r)){n=r;break}}return n},getRandomFocusable:function(e){for(var t=Ns(document.body),n=[],i=0;i<t.length;i++)Bs.isElementFocusable(t[i])&&n.push(t[i]);return n[e.nextInt(n.length)]},containsFormattingTags:function(e){if(null===e)return!1;for(var t=0,n=[],i=[];t<e.length;){var r=e.indexOf("<",t),a=e.indexOf(">",t);r>-1&&(n.push(r),t=r+1),a>-1?(i.push(a),t=a+1):t++}if(n.length!==i.length||0===n.length)return!1;for(var s=!0,o=e.toUpperCase(),l=0;l<n.length;l++){var u=o.substring(n[l]+1,i[l]);u=u.replace("/","");var c=u.replace(/^\s+/,"");u.length-c.length>0||(_.includes(Rs,u)||(s=!1))}return s},setTextContent:function(e,t){if(null===t)e.innerHTML="";else{var n=t.replaceAll("<br>","<br/>"),i=Ls(n);D(i,I.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR),Os(e.tagName)&&(Bs.containsFormattingTags(i)?e.innerHTML=i:e.textContent=i)}},tagIsDefaultFocusable:function(e){return _.includes(Is,e.toUpperCase())},isElementFocusable:function(e){return!!document.body.contains(e)&&(!function e(t){return!!t.hidden||t!==document.body&&e(t.parentElement)}(e)&&(!_.includes(Rs,e.tagName)&&"true"===e.getAttribute("data-focusable")))},tagNameSupportsContent:function(e){return Os(e)},removeElements:function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.removeChild(i)}},insertElements:function(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];e.insertBefore(r,n||null)}},createElement:function(e,t,n){var i=(n=A({namespace:null,id:null},n)).namespace?document.createElementNS(n.namespace,e):document.createElement(e);return n.id&&(i.id=n.id),Bs.overrideFocusWithTabIndex(i,t),i.classList.add(Ts.SIBLING_CLASS_NAME),i},overrideFocusWithTabIndex:function(e,t){Bs.tagIsDefaultFocusable(e.tagName)!==t?e.tabIndex=t?0:-1:e.removeAttribute("tabindex"),e.setAttribute("data-focusable",t)},TAGS:{INPUT:"INPUT",LABEL:"LABEL",BUTTON:"BUTTON",TEXTAREA:"TEXTAREA",SELECT:"SELECT",OPTGROUP:"OPTGROUP",DATALIST:"DATALIST",OUTPUT:"OUTPUT",DIV:"DIV",A:"A",P:"P",B:"B",STRONG:"STRONG",I:"I",EM:"EM",MARK:"MARK",SMALL:"SMALL",DEL:"DEL",INS:"INS",SUB:"SUB",SUP:"SUP"},FORM_ELEMENTS:["INPUT","BUTTON","TEXTAREA","SELECT","OPTGROUP","DATALIST","OUTPUT","A"],DEFAULT_CONTAINER_TAG_NAME:"DIV",DEFAULT_DESCRIPTION_TAG_NAME:"P",DEFAULT_LABEL_TAG_NAME:"P",ASSOCIATION_ATTRIBUTES:["aria-labelledby","aria-describedby","aria-activedescendant"],INPUT_TYPES_THAT_SUPPORT_CHECKED:["RADIO","CHECKBOX"],DOM_EVENTS:["focusin","focusout","input","change","click","keydown","keyup"],USER_GESTURE_EVENTS:["input","change","click","keydown","keyup"],BLOCKED_DOM_EVENTS:["touchstart","touchend","touchmove","touchcancel","mousedown","mouseup","mousemove","mouseover","mouseout","pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","gotpointercapture","lostpointercapture"],DATA_PDOM_UNIQUE_ID:"data-unique-id",PDOM_UNIQUE_ID_SEPARATOR:"-",DATA_EXCLUDE_FROM_INPUT:"data-exclude-from-input"};Cr.register("PDOMUtils",Bs);var Gs=Bs,Hs=_.hasIn(window,"phet.chipper.queryParameters.colorProfile")?phet.chipper.queryParameters.colorProfile:Pr.DEFAULT_COLOR_PROFILE,Fs=_.hasIn(window,"phet.chipper.colorProfiles")?phet.chipper.colorProfiles:[Pr.DEFAULT_COLOR_PROFILE],Ys=new wn(Hs,{tandem:xe.GENERAL_VIEW.createTandem("colorProfileProperty"),validValues:Fs});Cr.register("colorProfileProperty",Ys);var zs=Ys,Us=[],Ws=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({tandem:xe.OPTIONAL,useDeepEquality:!0},a);o.tandem;return r=_.mapValues(r,(function(e){return Rr.toColor(e).setImmutable()})),(s=t.call(this,Rr.toColor(r[zs.value]||r[Pr.DEFAULT_COLOR_PROFILE]),o)).colorProfileMap=r,zs.link((function(e){s.value=Rr.toColor(s.colorProfileMap[e]||s.colorProfileMap[Pr.DEFAULT_COLOR_PROFILE])})),s.name="".concat(e.name).concat(".").concat(i),s.link((function(e){window.parent!==window&&window.parent.postMessage(JSON.stringify({type:"reportColor",name:s.name,value:e.toHexString(),alpha:e.getAlpha()}),"*")})),Us.push(_assertThisInitialized(s)),s}return _createClass(n,[{key:"dispose",value:function(){J(Us,this),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(bs);_defineProperty(Ws,"TANDEM_NAME_SUFFIX","ColorProperty"),window.addEventListener("message",(function(e){var t;try{t=JSON.parse(e.data)}catch(r){}if(t&&"setColor"===t.type)for(var n=0;n<Us.length;n++){var i=Us[n];i.name===t.name&&(i.colorProfileMap[zs.value]=new Rr(t.value).withAlpha(t.alpha),i.value=Rr.toColor(i.colorProfileMap[zs.value]))}})),Cr.register("ProfileColorProperty",Ws);var js=1,Xs=function(){function e(){_classCallCheck(this,e),this.id="paint".concat(js++),this.transformMatrix=null}return _createClass(e,[{key:"setTransformMatrix",value:function(e){return this.transformMatrix!==e&&(this.transformMatrix=e),this}},{key:"toString",value:function(){return this.id}}]),e}();Xs.prototype.isPaint=!0,Cr.register("Paint",Xs);var Qs=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).stops=[],e.lastStopRatio=0,e.canvasGradient=null,e.colorStopsDirty=!1,e.lastColorStopValues=[],e}return _createClass(n,[{key:"addColorStop",value:function(e,t){if(this.lastStopRatio>e)throw new Error("Color stops not specified in the order of increasing ratios");return this.lastStopRatio=e,this.stops.push({ratio:e,color:t}),this.lastColorStopValues.push(""),this}},{key:"getSVGStops",value:function(){return this.stops}},{key:"invalidateCanvasGradient",value:function(){this.colorStopsDirty=!0}},{key:"haveCanvasColorStopsChanged",value:function(){if(null===this.lastColorStopValues)return!0;for(var e=0;e<this.stops.length;e++)if(n.colorToString(this.stops[e].color)!==this.lastColorStopValues[e])return!0;return!1}},{key:"getCanvasStyle",value:function(){if(!this.canvasGradient||this.colorStopsDirty&&this.haveCanvasColorStopsChanged()){this.colorStopsDirty=!1,Ui(this.lastColorStopValues),this.canvasGradient=this.createCanvasGradient();for(var e=0;e<this.stops.length;e++){var t=this.stops[e],i=n.colorToString(t.color);this.canvasGradient.addColorStop(t.ratio,i),this.lastColorStopValues.push(i)}}return this.canvasGradient}}],[{key:"colorToString",value:function(e){return e instanceof ht&&(e=e.value),null===e&&(e="transparent"),e instanceof Rr&&(e=e.toCSS()),e}}]),n}(Xs);Qs.prototype.isGradient=!0,Cr.register("Gradient",Qs);var Ks=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;return _classCallCheck(this,n),(s=t.call(this)).start=new pn(e,i),s.end=new pn(r,a),s}return _createClass(n,[{key:"createCanvasGradient",value:function(){return Cr.scratchContext.createLinearGradient(this.start.x,this.start.y,this.end.x,this.end.y)}},{key:"createSVGPaint",value:function(e){return Cu.pool.create(e,this)}},{key:"toString",value:function(){var e="new scenery.LinearGradient( ".concat(this.start.x,", ").concat(this.start.y,", ").concat(this.end.x,", ").concat(this.end.y," )");return _.each(this.stops,(function(t){e+=".addColorStop( ".concat(t.ratio,", ").concat(ho.scenerySerialize(t.color)," )")})),e}}]),n}(Qs);Ks.prototype.isLinearGradient=!0,Cr.register("LinearGradient",Ks);var Js=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o){var l;if(_classCallCheck(this,n),(l=t.call(this)).start=new pn(e,i),l.end=new pn(a,s),la.safari){var u=(e+a)/2,c=(i+s)/2;l.start.x=u,l.start.y=c,l.end.x=u,l.end.y=c}return l.startRadius=r,l.endRadius=o,l.focalPoint=l.start.plus(l.end.minus(l.start).times(l.startRadius/(l.startRadius-l.endRadius))),l.startIsLarger=l.startRadius>l.endRadius,l.largePoint=l.startIsLarger?l.start:l.end,l.maxRadius=Math.max(l.startRadius,l.endRadius),l.minRadius=Math.min(l.startRadius,l.endRadius),l.startRadius,l.endRadius,l}return _createClass(n,[{key:"createCanvasGradient",value:function(){return Cr.scratchContext.createRadialGradient(this.start.x,this.start.y,this.startRadius,this.end.x,this.end.y,this.endRadius)}},{key:"createSVGPaint",value:function(e){return xu.pool.create(e,this)}},{key:"getSVGStops",value:function(){var e=this.startIsLarger,t=this.maxRadius,n=this.minRadius;var i=this.stops.map((function(i){var r,a,s=e?1-i.ratio:i.ratio;return n>0&&(s=(a=n/t)+(s-(r=0))*(1-a)/(1-r)),{ratio:s,color:i.color}}));return e&&i.reverse(),i}},{key:"toString",value:function(){var e="new scenery.RadialGradient( ".concat(this.start.x,", ").concat(this.start.y,", ").concat(this.startRadius,", ").concat(this.end.x,", ").concat(this.end.y,", ").concat(this.endRadius," )");return _.each(this.stops,(function(t){e+=".addColorStop( ".concat(t.ratio,", ").concat(ho.scenerySerialize(t.color)," )")})),e}}]),n}(Qs);Js.prototype.isRadialGradient=!0,Cr.register("RadialGradient",Js);var Zs=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).image=e,i.canvasPattern=Cr.scratchContext.createPattern(e,"repeat"),i}return _createClass(n,[{key:"getCanvasStyle",value:function(){return this.canvasPattern}},{key:"createSVGPaint",value:function(e){return Pu.pool.create(this)}},{key:"toString",value:function(){return"new scenery.Pattern( $( '<img src=\"".concat(this.image.src,"\"/>' )[0] )")}}]),n}(Xs);Zs.prototype.isPattern=!0,Cr.register("Pattern",Zs);var $s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o){var l,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:oi.IDENTITY;_classCallCheck(this,n);var c=document.createElement("img");function h(e,t,n,i,r){c.src=e.toDataURL()}var d=new jo({scale:i,children:[e]});return d.toCanvas(h,-r*i,-a*i,s*i,o*i),(l=t.call(this,c)).setTransformMatrix(u.timesMatrix(oi.scaling(1/i))),l}return _createClass(n)}(Zs);Cr.register("NodePattern",$s);var eo=1,to=function(){function e(){_classCallCheck(this,e),this.id="filter".concat(eo++),this.filterRegionPercentageIncrease=0}return _createClass(e,[{key:"isDOMCompatible",value:function(){return!1}},{key:"isSVGCompatible",value:function(){return!1}},{key:"isCanvasCompatible",value:function(){return!!zr.canvasFilter&&this.isDOMCompatible()}},{key:"isWebGLCompatible",value:function(){return!1}},{key:"toString",value:function(){return this.id}}],[{key:"applyColorMatrix",value:function(e,t,n,i){var r=document.createElementNS(ea,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values",e),r.setAttribute("in",n),r.setAttribute("color-interpolation-filters","sRGB"),i&&r.setAttribute("result",i),t.appendChild(r)}}]),e}();Cr.register("Filter",to);var no=new Map,io=function(e){var t=e.map((function(e){return e.typeName})),n=t.join(",");if(!no.has(n)){no.set(n,new U("OrIO<".concat(t.join(", "),">"),{documentation:"An IOType adding support for a composite type that can be any of its parameters.",parameterTypes:e,isValidValue:function(t){for(var n=0;n<e.length;n++){var i=e[n];if(I.isValueValid(t,i.validator))return!0}return!1},toStateObject:function(t){for(var n=0;n<e.length;n++){var i=e[n];if(I.isValueValid(t,i.validator))return{index:n,state:i.toStateObject(t)}}throw new Error("somehow the instance was not valid, we should not get here. Why was isValidValue not used before this step?")},fromStateObject:function(t){return e[t.index].fromStateObject(t.state)},stateSchema:F.asValue("".concat(t.join("|")),{isValidValue:function(t){return"number"==typeof t.index&&e[t.index].isStateObjectValid(t.state)}})}))}return no.get(n)};V.register("OrIO",io);var ro=io,ao=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"CouldNotYetDeserializeError")}return _createClass(n)}();V.register("CouldNotYetDeserializeError",ao);var so=ao,oo=new Map,lo=function(e){var t=e;return oo.has(t)||oo.set(t,new U("ReferenceIO<".concat(e.typeName,">"),{isValidValue:function(t){return I.isValueValid(t,e.validator)},documentation:"Uses reference identity for serializing and deserializing, and validates based on its parameter IO Type.",parameterTypes:[e],toStateObject:function(e){return{phetioID:e.tandem.phetioID}},stateSchema:{phetioID:Te},fromStateObject:function(e){if(phet.phetio.phetioEngine.hasPhetioObject(e.phetioID))return phet.phetio.phetioEngine.getPhetioObject(e.phetioID);throw new so},applyState:function(e){}})),oo.get(t)};V.register("ReferenceIO",lo);var uo=lo,co={isColorDef:function(e){return null===e||"string"==typeof e||e instanceof Rr||e instanceof ht&&(null===e.value||"string"==typeof e.value||e.value instanceof Rr)},scenerySerialize:function(e){return null===e?"null":e instanceof Rr?"'".concat(e.toCSS(),"'"):"string"==typeof e?"'".concat(e,"'"):co.scenerySerialize(e.value)},ColorDefIO:null};co.ColorDefIO=new U("ColorDefIO",{isValidValue:co.isColorDef,supertype:Qe(ro([Te,Rr.ColorIO,uo(dt.PropertyIO(Qe(ro([Te,Rr.ColorIO]))))]))}),Cr.register("ColorDef",co);var ho=co,po={isPaintDef:function(e){return null===e||"string"==typeof e||e instanceof Rr||e instanceof Xs||e instanceof ht&&(null===e.value||"string"==typeof e.value||e.value instanceof Rr)},toColor:function(e){if("string"==typeof e)return new Rr(e);if(e instanceof Rr)return e.copy();if(e instanceof ht)return po.toColor(e.value);if(e instanceof Qs){var t=Rr.TRANSPARENT;return e.stops.forEach((function(e){t=t.blend(po.toColor(e.color),1)})),t}return Rr.TRANSPARENT}};Cr.register("PaintDef",po);var fo=po,mo=ma.supportsImageDataCanvasFilter(),go=la.chromium,yo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o,l,u,c,h,d,p,f,m,g,y,v,A,b,S){var E;return _classCallCheck(this,n),(E=t.call(this)).m00=e,E.m01=i,E.m02=r,E.m03=a,E.m04=s,E.m10=o,E.m11=l,E.m12=u,E.m13=c,E.m14=h,E.m20=d,E.m21=p,E.m22=f,E.m23=m,E.m24=g,E.m30=y,E.m31=v,E.m32=A,E.m33=b,E.m34=S,E}return _createClass(n,[{key:"applySVGFilter",value:function(e,t,n){to.applyColorMatrix("".concat(ai(this.m00)," ").concat(ai(this.m01)," ").concat(ai(this.m02)," ").concat(ai(this.m03)," ").concat(ai(this.m04)," ")+"".concat(ai(this.m10)," ").concat(ai(this.m11)," ").concat(ai(this.m12)," ").concat(ai(this.m13)," ").concat(ai(this.m14)," ")+"".concat(ai(this.m20)," ").concat(ai(this.m21)," ").concat(ai(this.m22)," ").concat(ai(this.m23)," ").concat(ai(this.m24)," ")+"".concat(ai(this.m30)," ").concat(ai(this.m31)," ").concat(ai(this.m32)," ").concat(ai(this.m33)," ").concat(ai(this.m34)),e,t,n)}},{key:"applyCanvasFilter",value:function(e){for(var t=e.canvas.width,n=e.canvas.height,i=e.context.getImageData(0,0,t,n),r=t*n,a=0;a<r;a++){var s=4*a;if(go){var o=Math.pow(i.data[s+0]/255,1.45),l=Math.pow(i.data[s+1]/255,1.45),u=Math.pow(i.data[s+2]/255,1.45),c=Math.pow(i.data[s+3]/255,1.45);i.data[s+0]=255*Math.pow(o*this.m00+l*this.m01+u*this.m02+c*this.m03+this.m04,1/1.45),i.data[s+1]=255*Math.pow(o*this.m10+l*this.m11+u*this.m12+c*this.m13+this.m14,1/1.45),i.data[s+2]=255*Math.pow(o*this.m20+l*this.m21+u*this.m22+c*this.m23+this.m24,1/1.45),i.data[s+3]=255*Math.pow(o*this.m30+l*this.m31+u*this.m32+c*this.m33+this.m34,1/1.45)}else{var h=i.data[s+0],d=i.data[s+1],p=i.data[s+2],f=i.data[s+3];i.data[s+0]=h*this.m00+d*this.m01+p*this.m02+f*this.m03+this.m04,i.data[s+1]=h*this.m10+d*this.m11+p*this.m12+f*this.m13+this.m14,i.data[s+2]=h*this.m20+d*this.m21+p*this.m22+f*this.m23+this.m24,i.data[s+3]=h*this.m30+d*this.m31+p*this.m32+f*this.m33+this.m34}}e.context.putImageData(i,0,0)}},{key:"isSVGCompatible",value:function(){return!0}},{key:"isCanvasCompatible",value:function(){return _get(_getPrototypeOf(n.prototype),"isCanvasCompatible",this).call(this)||mo}},{key:"getCSSFilterString",value:function(){throw new Error("unimplemented")}}]),n}(to);Cr.register("ColorMatrixFilter",yo);var vo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0)).amount=e,i}return _createClass(n,[{key:"getCSSFilterString",value:function(){return"brightness(".concat(ai(this.amount),")")}},{key:"isDOMCompatible",value:function(){return!0}}]),n}(yo);vo.BLACKEN=new vo(0),Cr.register("Brightness",vo);var Ao=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e,0,0,0,-.5*e+.5,0,e,0,0,-.5*e+.5,0,0,e,0,-.5*e+.5,0,0,0,1,0)).amount=e,i}return _createClass(n,[{key:"getCSSFilterString",value:function(){return"contrast(".concat(ai(this.amount),")")}},{key:"isDOMCompatible",value:function(){return!0}}]),n}(yo);Ao.GRAY=new Ao(0),Cr.register("Contrast",Ao);var bo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15;return _classCallCheck(this,n),(a=t.call(this)).offset=e,a.blurRadius=i,a.color=r,a.colorCSS=fo.toColor(r).toCSS(),a.filterRegionPercentageIncrease=s,a}return _createClass(n,[{key:"getCSSFilterString",value:function(){return"drop-shadow(".concat(ai(this.offset.x),"px ").concat(ai(this.offset.y),"px ").concat(ai(this.blurRadius),"px ").concat(this.colorCSS,")")}},{key:"isDOMCompatible",value:function(){return!0}},{key:"applyCanvasFilter",value:function(){throw new Error("unimplemented")}},{key:"applySVGFilter",value:function(e,t,n){throw new Error("unimplemented")}}]),n}(to);Cr.register("DropShadow",bo);var So=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return _classCallCheck(this,n),(i=t.call(this)).standardDeviation=e,i.filterRegionPercentageIncrease=r,i}return _createClass(n,[{key:"getCSSFilterString",value:function(){return"blur(".concat(ai(this.standardDeviation),"px)")}},{key:"applySVGFilter",value:function(e,t,n){var i=document.createElementNS(ea,"feGaussianBlur");i.setAttribute("stdDeviation",ai(this.standardDeviation)),i.setAttribute("edgeMode","none"),e.appendChild(i),i.setAttribute("in",t),n&&i.setAttribute("result",n),e.appendChild(i)}},{key:"isDOMCompatible",value:function(){return!0}},{key:"isSVGCompatible",value:function(){return!0}},{key:"applyCanvasFilter",value:function(e){throw new Error("unimplemented")}}]),n}(to);Cr.register("GaussianBlur",So);var Eo=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;_classCallCheck(this,n);var r=1-i;return(e=t.call(this,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,0,1,0)).amount=i,e}return _createClass(n,[{key:"getCSSFilterString",value:function(){return"grayscale(".concat(ai(this.amount),")")}},{key:"isDOMCompatible",value:function(){return!0}}]),n}(yo);Eo.FULL=new Eo(1),Cr.register("Grayscale",Eo);var ko=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=Math.cos(e),a=Math.sin(e);return(i=t.call(this,.213+.787*r-.213*a,.715-.715*r-.715*a,.072-.072*r+.928*a,0,0,.213-.213*r+.143*a,.715+.285*r+.14*a,.072-.072*r-.283*a,0,0,.213-.213*r-.787*a,.715-.715*r+.715*a,.072+.928*r+.072*a,0,0,0,0,0,1,0)).amount=e,i}return _createClass(n,[{key:"getCSSFilterString",value:function(){return"hue-rotate(".concat(ai(En.toDegrees(this.amount)),"deg)")}},{key:"isDOMCompatible",value:function(){return!0}}]),n}(yo);Cr.register("HueRotate",ko);var Vo=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _classCallCheck(this,n),(e=t.call(this)).amount=i,e}return _createClass(n,[{key:"getCSSFilterString",value:function(){return"invert(".concat(ai(this.amount),")")}},{key:"isDOMCompatible",value:function(){return!0}},{key:"applyCanvasFilter",value:function(e){throw new Error("unimplemented")}},{key:"applySVGFilter",value:function(e,t,n){throw new Error("unimplemented")}}]),n}(to);Vo.FULL=new Vo(1),Cr.register("Invert",Vo);var wo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).amount=e,i}return _createClass(n,[{key:"getCSSFilterString",value:function(){return"opacity(".concat(ai(this.amount),")")}},{key:"isDOMCompatible",value:function(){return!0}},{key:"applyCanvasFilter",value:function(e){throw new Error("unimplemented")}},{key:"applySVGFilter",value:function(e,t,n){throw new Error("unimplemented")}}]),n}(to);Cr.register("Opacity",wo);var _o=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715-.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072-.928*e,0,0,0,0,0,1,0)).amount=e,i}return _createClass(n,[{key:"getCSSFilterString",value:function(){return"saturate(".concat(ai(this.amount),")")}},{key:"isDOMCompatible",value:function(){return!0}}]),n}(yo);Cr.register("Saturate",_o);var Co=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return _classCallCheck(this,n),(e=t.call(this,.393+.607*(1-i),.769-.769*(1-i),.189-.189*(1-i),0,0,.349-.349*(1-i),.686+.314*(1-i),.168-.168*(1-i),0,0,.272-.272*(1-i),.534-.534*(1-i),.131+.869*(1-i),0,0,0,0,0,1,0)).amount=i,e}return _createClass(n,[{key:"getCSSFilterString",value:function(){return"sepia(".concat(ai(this.amount),")")}},{key:"isDOMCompatible",value:function(){return!0}}]),n}(yo);function xo(e,t,n,i,r){n=n||[],i=i||[],r=r||[],Array.prototype.push.apply(n,e),Array.prototype.push.apply(i,t);e:for(var a=0;a<n.length;a++)for(var s=n[a],o=0;o<i.length;o++){if(s===i[o]){if(r.push(s),n.splice(a,1),i.splice(o,1),o=0,a===n.length)break e;a-=1}}return n}Co.FULL=new Co(1),Cr.register("Sepia",Co),y.register("arrayDifference",xo);var Po=xo,To=(Gs.TAGS.INPUT,Gs.TAGS.P),Mo=To,Lo=To,Io=function(e,t,n){return t.labelTagName="h".concat(e.headingLevel),t.labelContent=n,t},Ro=function(e){var t=null===e?null:"string"==typeof e?e:e.value;return t},Do=(Gs.FORM_ELEMENTS,Gs.INPUT_TYPES_THAT_SUPPORT_CHECKED,Gs.ASSOCIATION_ATTRIBUTES,["focusable","tagName","accessibleName","accessibleNameBehavior","helpText","helpTextBehavior","pdomHeading","pdomHeadingBehavior","containerTagName","containerAriaRole","innerContent","inputType","inputValue","pdomChecked","pdomNamespace","ariaLabel","ariaRole","ariaValueText","labelTagName","labelContent","appendLabel","descriptionTagName","descriptionContent","appendDescription","focusHighlight","focusHighlightLayerable","groupFocusHighlight","pdomVisible","pdomOrder","ariaLabelledbyAssociations","ariaDescribedbyAssociations","activeDescendantAssociations","positionInPDOM","pdomTransformSourceNode"]),No=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e))._tagName=null,i._containerTagName=null,i._labelTagName=null,i._descriptionTagName=null,i._inputType=null,i._inputValue=null,i._pdomChecked=!1,i._appendLabel=!1,i._appendDescription=!1,i._pdomAttributes=[],i._pdomClasses=[],i._labelContent=null,i._innerContent=null,i._descriptionContent=null,i._pdomNamespace=null,i._ariaLabel=null,i._ariaRole=null,i._containerAriaRole=null,i._ariaValueText=null,i._ariaLabelledbyAssociations=[],i._nodesThatAreAriaLabelledbyThisNode=[],i._ariaDescribedbyAssociations=[],i._nodesThatAreAriaDescribedbyThisNode=[],i._activeDescendantAssociations=[],i._nodesThatAreActiveDescendantToThisNode=[],i._focusableOverride=null,i._focusHighlight=null,i._focusHighlightLayerable=!1,i._groupFocusHighlight=!1,i._pdomVisible=!0,i._pdomOrder=null,i._pdomParent=null,i._pdomTransformSourceNode=null,i._pdomDisplaysInfo=new nl(_assertThisInitialized(i)),i._pdomInstances=[],i._positionInPDOM=!1,i.excludeLabelSiblingFromInput=!1,i._accessibleName=null,i._accessibleNameBehavior=n.BASIC_ACCESSIBLE_NAME_BEHAVIOR,i._helpText=null,i._helpTextBehavior=n.HELP_TEXT_AFTER_CONTENT,i._pdomHeading=null,i._headingLevel=null,i._pdomHeadingBehavior=Io,i.focusHighlightChangedEmitter=new d,i.pdomDisplaysEmitter=new d,i.pdomBoundInputEnabledListener=i.pdomInputEnabledListener.bind(_assertThisInitialized(i)),i}return _createClass(n,[{key:"disposeParallelDOM",value:function(){this.inputEnabledProperty.unlink(this.pdomBoundInputEnabledListener),this.pdomOrder=null,this.setPDOMTransformSourceNode(null),this.setAriaLabelledbyAssociations([]),this.setAriaDescribedbyAssociations([]),this.setActiveDescendantAssociations([])}},{key:"pdomInputEnabledListener",value:function(e){this.setPDOMAttribute("aria-disabled",!e),this.setPDOMAttribute("onclick",e?"":"return false")}},{key:"isFocused",value:function(){for(var e=0;e<this._pdomInstances.length;e++){if(this._pdomInstances[e].peer.isFocused())return!0}return!1}},{key:"focused",get:function(){return this.isFocused()}},{key:"focus",value:function(){if(this._pdomInstances.length>0){var e=this._pdomInstances[0].peer;e.focus()}}},{key:"blur",value:function(){if(this._pdomInstances.length>0){var e=this._pdomInstances[0].peer;e.blur()}}},{key:"pdomAudit",value:function(){this.hasPDOMContent;for(var e=0;e<this.children.length;e++)this.children[e].pdomAudit()}},{key:"setAccessibleName",value:function(e){var t=Ro(e);this._accessibleName!==t&&(this._accessibleName=t,this.onPDOMContentChange())}},{key:"accessibleName",get:function(){return this.getAccessibleName()},set:function(e){this.setAccessibleName(e)}},{key:"getAccessibleName",value:function(){return this._accessibleName}},{key:"removeFromPDOM",value:function(){this.tagName=null}},{key:"setAccessibleNameBehavior",value:function(e){this._accessibleNameBehavior!==e&&(this._accessibleNameBehavior=e,this.onPDOMContentChange())}},{key:"accessibleNameBehavior",get:function(){return this.getAccessibleNameBehavior()},set:function(e){this.setAccessibleNameBehavior(e)}},{key:"getAccessibleNameBehavior",value:function(){return this._accessibleNameBehavior}},{key:"setPDOMHeading",value:function(e){var t=Ro(e);this._pdomHeading!==t&&(this._pdomHeading=t,this.onPDOMContentChange())}},{key:"pdomHeading",get:function(){return this.getPDOMHeading()},set:function(e){this.setPDOMHeading(e)}},{key:"getPDOMHeading",value:function(){return this._pdomHeading}},{key:"setPDOMHeadingBehavior",value:function(e){this._pdomHeadingBehavior!==e&&(this._pdomHeadingBehavior=e,this.onPDOMContentChange())}},{key:"pdomHeadingBehavior",get:function(){return this.getPDOMHeadingBehavior()},set:function(e){this.setPDOMHeadingBehavior(e)}},{key:"getPDOMHeadingBehavior",value:function(){return this._pdomHeadingBehavior}},{key:"getHeadingLevel",value:function(){return this._headingLevel}},{key:"headingLevel",get:function(){return this.getHeadingLevel()}},{key:"computeHeadingLevel",value:function(){if(!this._pdomParent)return this._pdomHeading?(this._headingLevel=1,1):0;if(this._pdomHeading){var e=this._pdomParent.computeHeadingLevel()+1;return this._headingLevel=e,e}return this._pdomParent.computeHeadingLevel()}},{key:"setHelpText",value:function(e){var t=Ro(e);this._helpText!==t&&(this._helpText=t,this.onPDOMContentChange())}},{key:"helpText",get:function(){return this.getHelpText()},set:function(e){this.setHelpText(e)}},{key:"getHelpText",value:function(){return this._helpText}},{key:"setHelpTextBehavior",value:function(e){this._helpTextBehavior!==e&&(this._helpTextBehavior=e,this.onPDOMContentChange())}},{key:"helpTextBehavior",get:function(){return this.getHelpTextBehavior()},set:function(e){this.setHelpTextBehavior(e)}},{key:"getHelpTextBehavior",value:function(){return this._helpTextBehavior}},{key:"setTagName",value:function(e){e!==this._tagName&&(this._tagName=e,this.onPDOMContentChange())}},{key:"tagName",get:function(){return this.getTagName()},set:function(e){this.setTagName(e)}},{key:"getTagName",value:function(){return this._tagName}},{key:"setLabelTagName",value:function(e){e!==this._labelTagName&&(this._labelTagName=e,this.onPDOMContentChange())}},{key:"labelTagName",get:function(){return this.getLabelTagName()},set:function(e){this.setLabelTagName(e)}},{key:"getLabelTagName",value:function(){return this._labelTagName}},{key:"setDescriptionTagName",value:function(e){e!==this._descriptionTagName&&(this._descriptionTagName=e,this.onPDOMContentChange())}},{key:"descriptionTagName",get:function(){return this.getDescriptionTagName()},set:function(e){this.setDescriptionTagName(e)}},{key:"getDescriptionTagName",value:function(){return this._descriptionTagName}},{key:"setInputType",value:function(e){if(e!==this._inputType){this._inputType=e;for(var t=0;t<this._pdomInstances.length;t++){var n=this._pdomInstances[t].peer;null===e?n.removeAttributeFromElement("type"):n.setAttributeToElement("type",e)}}}},{key:"inputType",get:function(){return this.getInputType()},set:function(e){this.setInputType(e)}},{key:"getInputType",value:function(){return this._inputType}},{key:"setAppendLabel",value:function(e){this._appendLabel!==e&&(this._appendLabel=e,this.onPDOMContentChange())}},{key:"appendLabel",get:function(){return this.getAppendLabel()},set:function(e){this.setAppendLabel(e)}},{key:"getAppendLabel",value:function(){return this._appendLabel}},{key:"setAppendDescription",value:function(e){this._appendDescription!==e&&(this._appendDescription=e,this.onPDOMContentChange())}},{key:"appendDescription",get:function(){return this.getAppendDescription()},set:function(e){this.setAppendDescription(e)}},{key:"getAppendDescription",value:function(){return this._appendDescription}},{key:"setContainerTagName",value:function(e){this._containerTagName!==e&&(this._containerTagName=e,this.onPDOMContentChange())}},{key:"containerTagName",get:function(){return this.getContainerTagName()},set:function(e){this.setContainerTagName(e)}},{key:"getContainerTagName",value:function(){return this._containerTagName}},{key:"setLabelContent",value:function(e){var t=Ro(e);if(this._labelContent!==t){this._labelContent=t,this._labelTagName||this.setLabelTagName(Lo);for(var n=0;n<this._pdomInstances.length;n++){this._pdomInstances[n].peer.setLabelSiblingContent(this._labelContent)}}}},{key:"labelContent",get:function(){return this.getLabelContent()},set:function(e){this.setLabelContent(e)}},{key:"getLabelContent",value:function(){return this._labelContent}},{key:"setInnerContent",value:function(e){var t=Ro(e);if(this._innerContent!==t){this._innerContent=t;for(var n=0;n<this._pdomInstances.length;n++){this._pdomInstances[n].peer.setPrimarySiblingContent(this._innerContent)}}}},{key:"innerContent",get:function(){return this.getInnerContent()},set:function(e){this.setInnerContent(e)}},{key:"getInnerContent",value:function(){return this._innerContent}},{key:"setDescriptionContent",value:function(e){var t=Ro(e);if(this._descriptionContent!==t){this._descriptionContent=t,this._descriptionTagName||this.setDescriptionTagName(Mo);for(var n=0;n<this._pdomInstances.length;n++){this._pdomInstances[n].peer.setDescriptionSiblingContent(this._descriptionContent)}}}},{key:"descriptionContent",get:function(){return this.getDescriptionContent()},set:function(e){this.setDescriptionContent(e)}},{key:"getDescriptionContent",value:function(){return this._descriptionContent}},{key:"setAriaRole",value:function(e){this._ariaRole!==e&&(this._ariaRole=e,null!==e?this.setPDOMAttribute("role",e):this.removePDOMAttribute("role"))}},{key:"ariaRole",get:function(){return this.getAriaRole()},set:function(e){this.setAriaRole(e)}},{key:"getAriaRole",value:function(){return this._ariaRole}},{key:"setContainerAriaRole",value:function(e){this._containerAriaRole!==e&&(this._containerAriaRole=e,null===e?this.removePDOMAttribute("role",{elementName:Rh.CONTAINER_PARENT}):this.setPDOMAttribute("role",e,{elementName:Rh.CONTAINER_PARENT}))}},{key:"containerAriaRole",get:function(){return this.getContainerAriaRole()},set:function(e){this.setContainerAriaRole(e)}},{key:"getContainerAriaRole",value:function(){return this._containerAriaRole}},{key:"setAriaValueText",value:function(e){var t=Ro(e);this._ariaValueText!==t&&(this._ariaValueText=t,null===t?this.removePDOMAttribute("aria-valuetext"):this.setPDOMAttribute("aria-valuetext",t))}},{key:"ariaValueText",get:function(){return this.getAriaValueText()},set:function(e){this.setAriaValueText(e)}},{key:"getAriaValueText",value:function(){return this._ariaValueText}},{key:"setPDOMNamespace",value:function(e){return this._pdomNamespace!==e&&(this._pdomNamespace=e,this.onPDOMContentChange()),this}},{key:"pdomNamespace",get:function(){return this.getPDOMNamespace()},set:function(e){this.setPDOMNamespace(e)}},{key:"getPDOMNamespace",value:function(){return this._pdomNamespace}},{key:"setAriaLabel",value:function(e){var t=Ro(e);this._ariaLabel!==t&&(this._ariaLabel=t,null===t?this.removePDOMAttribute("aria-label"):this.setPDOMAttribute("aria-label",t))}},{key:"ariaLabel",get:function(){return this.getAriaLabel()},set:function(e){this.setAriaLabel(e)}},{key:"getAriaLabel",value:function(){return this._ariaLabel}},{key:"setFocusHighlight",value:function(e){this._focusHighlight!==e&&(this._focusHighlight=e,this._focusHighlightLayerable&&(e.visible=!1),this.focusHighlightChangedEmitter.emit())}},{key:"focusHighlight",get:function(){return this.getFocusHighlight()},set:function(e){this.setFocusHighlight(e)}},{key:"getFocusHighlight",value:function(){return this._focusHighlight}},{key:"setFocusHighlightLayerable",value:function(e){this._focusHighlightLayerable!==e&&(this._focusHighlightLayerable=e,this._focusHighlight&&(this._focusHighlight.visible=!1,this.focusHighlightChangedEmitter.emit()))}},{key:"focusHighlightLayerable",get:function(){return this.getFocusHighlightLayerable()},set:function(e){this.setFocusHighlightLayerable(e)}},{key:"getFocusHighlightLayerable",value:function(){return this._focusHighlightLayerable}},{key:"setGroupFocusHighlight",value:function(e){this._groupFocusHighlight=e}},{key:"groupFocusHighlight",get:function(){return this.getGroupFocusHighlight()},set:function(e){this.setGroupFocusHighlight(e)}},{key:"getGroupFocusHighlight",value:function(){return this._groupFocusHighlight}},{key:"setAriaLabelledbyAssociations",value:function(e){var t,n;if(0!==e.length||0!==this._ariaLabelledbyAssociations.length){var i=[],r=[],a=[];for(Po(e,this._ariaLabelledbyAssociations,r,i,a),n=0;n<i.length;n++)t=i[n],this.removeAriaLabelledbyAssociation(t);for(n=0;n<r.length;n++){var s=e[n];this.addAriaLabelledbyAssociation(s)}}}},{key:"ariaLabelledbyAssociations",get:function(){return this.getAriaLabelledbyAssociations()},set:function(e){this.setAriaLabelledbyAssociations(e)}},{key:"getAriaLabelledbyAssociations",value:function(){return this._ariaLabelledbyAssociations}},{key:"addAriaLabelledbyAssociation",value:function(e){this._ariaLabelledbyAssociations.push(e),e.otherNode._nodesThatAreAriaLabelledbyThisNode.push(this),this.updateAriaLabelledbyAssociationsInPeers()}},{key:"removeAriaLabelledbyAssociation",value:function(e){this._ariaLabelledbyAssociations.splice(_.indexOf(this._ariaLabelledbyAssociations,e),1)[0].otherNode.removeNodeThatIsAriaLabelledByThisNode(this),this.updateAriaLabelledbyAssociationsInPeers()}},{key:"removeNodeThatIsAriaLabelledByThisNode",value:function(e){var t=_.indexOf(this._nodesThatAreAriaLabelledbyThisNode,e);this._nodesThatAreAriaLabelledbyThisNode.splice(t,1)}},{key:"updateAriaLabelledbyAssociationsInPeers",value:function(){for(var e=0;e<this.pdomInstances.length;e++){this.pdomInstances[e].peer.onAriaLabelledbyAssociationChange()}}},{key:"updateOtherNodesAriaLabelledby",value:function(){for(var e=0;e<this._nodesThatAreAriaLabelledbyThisNode.length;e++){this._nodesThatAreAriaLabelledbyThisNode[e].updateAriaLabelledbyAssociationsInPeers()}}},{key:"getNodesThatAreAriaLabelledbyThisNode",value:function(){return this._nodesThatAreAriaLabelledbyThisNode}},{key:"nodesThatAreAriaLabelledbyThisNode",get:function(){return this.getNodesThatAreAriaLabelledbyThisNode()}},{key:"setAriaDescribedbyAssociations",value:function(e){var t;if(0!==e.length||0!==this._ariaDescribedbyAssociations.length){var n,i=[],r=[],a=[];for(Po(e,this._ariaDescribedbyAssociations,r,i,a),n=0;n<i.length;n++)t=i[n],this.removeAriaDescribedbyAssociation(t);for(n=0;n<r.length;n++){var s=e[n];this.addAriaDescribedbyAssociation(s)}}}},{key:"ariaDescribedbyAssociations",get:function(){return this.getAriaDescribedbyAssociations()},set:function(e){this.setAriaDescribedbyAssociations(e)}},{key:"getAriaDescribedbyAssociations",value:function(){return this._ariaDescribedbyAssociations}},{key:"addAriaDescribedbyAssociation",value:function(e){this._ariaDescribedbyAssociations.push(e),e.otherNode._nodesThatAreAriaDescribedbyThisNode.push(this),this.updateAriaDescribedbyAssociationsInPeers()}},{key:"hasAriaDescribedbyAssociation",value:function(e){return _.includes(this._ariaDescribedbyAssociations,e)}},{key:"removeAriaDescribedbyAssociation",value:function(e){this._ariaDescribedbyAssociations.splice(_.indexOf(this._ariaDescribedbyAssociations,e),1)[0].otherNode.removeNodeThatIsAriaDescribedByThisNode(this),this.updateAriaDescribedbyAssociationsInPeers()}},{key:"removeNodeThatIsAriaDescribedByThisNode",value:function(e){var t=_.indexOf(this._nodesThatAreAriaDescribedbyThisNode,e);this._nodesThatAreAriaDescribedbyThisNode.splice(t,1)}},{key:"updateAriaDescribedbyAssociationsInPeers",value:function(){for(var e=0;e<this.pdomInstances.length;e++){this.pdomInstances[e].peer.onAriaDescribedbyAssociationChange()}}},{key:"updateOtherNodesAriaDescribedby",value:function(){for(var e=0;e<this._nodesThatAreAriaDescribedbyThisNode.length;e++){this._nodesThatAreAriaDescribedbyThisNode[e].updateAriaDescribedbyAssociationsInPeers()}}},{key:"getNodesThatAreAriaDescribedbyThisNode",value:function(){return this._nodesThatAreAriaDescribedbyThisNode}},{key:"nodesThatAreAriaDescribedbyThisNode",get:function(){return this.getNodesThatAreAriaDescribedbyThisNode()}},{key:"setActiveDescendantAssociations",value:function(e){var t;if(0!==e.length||0!==this._activeDescendantAssociations.length){var n,i=[],r=[],a=[];for(Po(e,this._activeDescendantAssociations,r,i,a),n=0;n<i.length;n++)t=i[n],this.removeActiveDescendantAssociation(t);for(n=0;n<r.length;n++){var s=e[n];this.addActiveDescendantAssociation(s)}}}},{key:"activeDescendantAssociations",get:function(){return this.getActiveDescendantAssociations()},set:function(e){this.setActiveDescendantAssociations(e)}},{key:"getActiveDescendantAssociations",value:function(){return this._activeDescendantAssociations}},{key:"addActiveDescendantAssociation",value:function(e){this._activeDescendantAssociations.push(e),e.otherNode._nodesThatAreActiveDescendantToThisNode.push(this),this.updateActiveDescendantAssociationsInPeers()}},{key:"removeActiveDescendantAssociation",value:function(e){this._activeDescendantAssociations.splice(_.indexOf(this._activeDescendantAssociations,e),1)[0].otherNode.removeNodeThatIsActiveDescendantThisNode(this),this.updateActiveDescendantAssociationsInPeers()}},{key:"removeNodeThatIsActiveDescendantThisNode",value:function(e){var t=_.indexOf(this._nodesThatAreActiveDescendantToThisNode,e);this._nodesThatAreActiveDescendantToThisNode.splice(t,1)}},{key:"updateActiveDescendantAssociationsInPeers",value:function(){for(var e=0;e<this.pdomInstances.length;e++){this.pdomInstances[e].peer.onActiveDescendantAssociationChange()}}},{key:"updateOtherNodesActiveDescendant",value:function(){for(var e=0;e<this._nodesThatAreActiveDescendantToThisNode.length;e++){this._nodesThatAreActiveDescendantToThisNode[e].updateActiveDescendantAssociationsInPeers()}}},{key:"getNodesThatAreActiveDescendantToThisNode",value:function(){return this._nodesThatAreActiveDescendantToThisNode}},{key:"nodesThatAreActiveDescendantToThisNode",get:function(){return this.getNodesThatAreActiveDescendantToThisNode()}},{key:"setPDOMOrder",value:function(e){if(this._pdomOrder!==e){var t=this._pdomOrder;this._pdomOrder=null===e?null:e.slice(),zh.pdomOrderChange(this,t,e),this.rendererSummaryRefreshEmitter.emit()}}},{key:"pdomOrder",get:function(){return this.getPDOMOrder()},set:function(e){this.setPDOMOrder(e)}},{key:"getPDOMOrder",value:function(){return this._pdomOrder?this._pdomOrder.slice(0):this._pdomOrder}},{key:"hasPDOMOrder",value:function(){return null!==this._pdomOrder&&0!==this._pdomOrder.length&&(this._pdomOrder.length>1||null!==this._pdomOrder[0])}},{key:"getPDOMParent",value:function(){return this._pdomParent}},{key:"pdomParent",get:function(){return this.getPDOMParent()}},{key:"getEffectiveChildren",value:function(){for(var e=[],t=0;t<this._children.length;t++){var n=this._children[t];n._pdomParent||e.push(n)}if(this.hasPDOMOrder()){var i=this.pdomOrder.slice(),r=i.indexOf(null);return r>=0?(e.unshift(r,1),Array.prototype.splice.apply(i,e)):Array.prototype.push.apply(i,e),i}return e}},{key:"setPDOMVisible",value:function(e){this._pdomVisible!==e&&(this._pdomVisible=e,this._pdomDisplaysInfo.onPDOMVisibilityChange(e))}},{key:"pdomVisible",get:function(){return this.isPDOMVisible()},set:function(e){this.setPDOMVisible(e)}},{key:"isPDOMVisible",value:function(){return this._pdomVisible}},{key:"isPDOMDisplayed",value:function(){for(var e=0;e<this._pdomInstances.length;e++)if(this._pdomInstances[e].isGloballyVisible())return!0;return!1}},{key:"pdomDisplayed",get:function(){return this.isPDOMDisplayed()}},{key:"setInputValue",value:function(e){if((e instanceof ht||e instanceof st)&&(e=e.value),(e="".concat(e))!==this._inputValue){this._inputValue=e;for(var t=0;t<this.pdomInstances.length;t++){this.pdomInstances[t].peer.onInputValueChange()}}}},{key:"inputValue",get:function(){return this.getInputValue()},set:function(e){this.setInputValue(e)}},{key:"getInputValue",value:function(){return this._inputValue}},{key:"setPDOMChecked",value:function(e){this._tagName,this._inputType,this._pdomChecked!==e&&(this._pdomChecked=e,this.setPDOMAttribute("checked",e,{asProperty:!0}))}},{key:"pdomChecked",get:function(){return this.getPDOMChecked()},set:function(e){this.setPDOMChecked(e)}},{key:"getPDOMChecked",value:function(){return this._pdomChecked}},{key:"getPDOMAttributes",value:function(){return this._pdomAttributes.slice(0)}},{key:"pdomAttributes",get:function(){return this.getPDOMAttributes()}},{key:"setPDOMAttribute",value:function(e,t,n){"boolean"!=typeof t&&"number"!=typeof t&&(t=Ro(t));for(var i=S()({namespace:null,asProperty:!1,elementName:Rh.PRIMARY_SIBLING},n),r=0;r<this._pdomAttributes.length;r++){var a=this._pdomAttributes[r];a.attribute===e&&a.options.namespace===i.namespace&&a.options.elementName===i.elementName&&(a.options.asProperty===i.asProperty?this._pdomAttributes.splice(r,1):this.removePDOMAttribute(a.attribute,a.options))}this._pdomAttributes.push({attribute:e,value:t,options:i});for(var s=0;s<this._pdomInstances.length;s++){this._pdomInstances[s].peer.setAttributeToElement(e,t,i)}}},{key:"removePDOMAttribute",value:function(e,t){for(var n=S()({namespace:null,elementName:Rh.PRIMARY_SIBLING},t),i=0;i<this._pdomAttributes.length;i++)this._pdomAttributes[i].attribute===e&&this._pdomAttributes[i].options.namespace===n.namespace&&this._pdomAttributes[i].options.elementName===n.elementName&&(this._pdomAttributes.splice(i,1),!0);for(var r=0;r<this._pdomInstances.length;r++){this._pdomInstances[r].peer.removeAttributeFromElement(e,n)}}},{key:"removePDOMAttributes",value:function(){for(var e=this.getPDOMAttributes(),t=0;t<e.length;t++){var n=e[t].attribute;this.removePDOMAttribute(n)}}},{key:"hasPDOMAttribute",value:function(e,t){for(var n=S()({namespace:null,elementName:Rh.PRIMARY_SIBLING},t),i=!1,r=0;r<this._pdomAttributes.length;r++)this._pdomAttributes[r].attribute===e&&this._pdomAttributes[r].options.namespace===n.namespace&&this._pdomAttributes[r].options.elementName===n.elementName&&(i=!0);return i}},{key:"setPDOMClass",value:function(e,t){for(var n=S()({elementName:Rh.PRIMARY_SIBLING},t),i=0;i<this._pdomClasses.length;i++){var r=this._pdomClasses[i];if(r.className===e&&r.options.elementName===n.elementName)return}this._pdomClasses.push({className:e,options:n});for(var a=0;a<this._pdomInstances.length;a++){this._pdomInstances[a].peer.setClassToElement(e,n)}}},{key:"removePDOMClass",value:function(e,t){for(var n=S()({elementName:Rh.PRIMARY_SIBLING},t),i=0;i<this._pdomClasses.length;i++)this._pdomClasses[i].className===e&&this._pdomClasses[i].options.elementName===n.elementName&&(this._pdomClasses.splice(i,1),!0);for(var r=0;r<this._pdomClasses.length;r++){this.pdomInstances[r].peer.removeClassFromElement(e,n)}}},{key:"getPDOMClasses",value:function(){return this._pdomClasses.slice(0)}},{key:"pdomClasses",get:function(){return this.getPDOMClasses()}},{key:"setFocusable",value:function(e){if(this._focusableOverride!==e){this._focusableOverride=e;for(var t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setFocusable(this.focusable)}}},{key:"focusable",get:function(){return this.isFocusable()},set:function(e){this.setFocusable(e)}},{key:"isFocusable",value:function(){return null!==this._focusableOverride?this._focusableOverride:null!==this._tagName&&Gs.tagIsDefaultFocusable(this._tagName)}},{key:"setPDOMTransformSourceNode",value:function(e){this._pdomTransformSourceNode=e;for(var t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPDOMTransformSourceNode(this._pdomTransformSourceNode)}},{key:"pdomTransformSourceNode",get:function(){return this.getPDOMTransformSourceNode()},set:function(e){this.setPDOMTransformSourceNode(e)}},{key:"getPDOMTransformSourceNode",value:function(){return this._pdomTransformSourceNode}},{key:"setPositionInPDOM",value:function(e){this._positionInPDOM=e;for(var t=0;t<this._pdomInstances.length;t++)this._pdomInstances[t].peer.setPositionInPDOM(e)}},{key:"positionInPDOM",get:function(){return this.getPositionInPDOM()},set:function(e){this.setPositionInPDOM(e)}},{key:"getPositionInPDOM",value:function(){return this._positionInPDOM}},{key:"setExcludeLabelSiblingFromInput",value:function(){this.excludeLabelSiblingFromInput=!0,this.onPDOMContentChange()}},{key:"isInsidePhetioArchetype",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(e.isPhetioInstrumented())return e.phetioIsArchetype;for(var t=0;t<e.parents.length;t++)if(this.isInsidePhetioArchetype(e.parents[t]))return!0;return!1}},{key:"alertDescriptionUtterance",value:function(e){if(!(_.hasIn(window,"phet.phetio.phetioEngine.phetioStateEngine")&&phet.phetio.phetioEngine.phetioStateEngine.isSettingStateProperty.value||xe.PHET_IO_ENABLED&&this.isInsidePhetioArchetype()))for(var t=this.getConnectedDisplays(),n=0;n<t.length;n++){var i=t[n];i.isAccessible()&&i.descriptionUtteranceQueue.addToBack(e)}}},{key:"forEachUtteranceQueue",value:function(e){for(var t=this.getConnectedDisplays(),n=0;n<t.length;n++){var i=t[n];i.isAccessible()&&e(i.descriptionUtteranceQueue)}}},{key:"getBaseOptions",value:function(){for(var e={},t=0;t<Do.length;t++){var n=Do[t];e[n]=this[n]}return e}},{key:"getNestedPDOMOrder",value:function(){var e=new bl(this),t=[],n=[],i=[n];return function n(r,a){var s=0;if(_.each(t,(function(e){r===e&&s++})),!(s>1||1===s&&!a)){if(r.hasPDOMContent){var o={trail:e.copy(),children:[]};i[i.length-1].push(o),i.push(o.children)}var l=null===r._pdomOrder?[]:r._pdomOrder;t=t.concat(l),_.each(l,(function(t){_.each(r.getLeafTrailsTo(t),(function(i){i.removeAncestor(),e.addDescendantTrail(i),n(t,!0),e.removeDescendantTrail(i)}))}));for(var u=r._children.length,c=0;c<u;c++){var h=r._children[c];e.addDescendant(h,c),n(h,!1),e.removeDescendant()}_.each(l,(function(){t.pop()})),r.hasPDOMContent&&i.pop()}}(this,!1),n}},{key:"onPDOMContentChange",value:function(){zh.pdomContentChange(this),this._pdomHeading&&this.computeHeadingLevel(),this.rendererSummaryRefreshEmitter.emit()}},{key:"hasPDOMContent",get:function(){return!!this._tagName}},{key:"onPDOMAddChild",value:function(e){this._pdomDisplaysInfo.onAddChild(e),zh.addChild(this,e)}},{key:"onPDOMRemoveChild",value:function(e){this._pdomDisplaysInfo.onRemoveChild(e),zh.removeChild(this,e),e.updateOtherNodesAriaLabelledby(),e.updateOtherNodesAriaDescribedby(),e.updateOtherNodesActiveDescendant()}},{key:"onPDOMReorderedChildren",value:function(){zh.childrenOrderChange(this)}},{key:"getPDOMInstances",value:function(){return this._pdomInstances}},{key:"pdomInstances",get:function(){return this.getPDOMInstances()}},{key:"addPDOMInstance",value:function(e){this._pdomInstances.push(e)}},{key:"removePDOMInstance",value:function(e){var t=_.indexOf(this._pdomInstances,e);this._pdomInstances.splice(t,1)}}],[{key:"BASIC_ACCESSIBLE_NAME_BEHAVIOR",value:function(e,t,n){return"input"===e.tagName?(t.labelTagName="label",t.labelContent=n):Gs.tagNameSupportsContent(e.tagName)?t.innerContent=n:t.ariaLabel=n,t}},{key:"HELP_TEXT_BEFORE_CONTENT",value:function(e,t,n){return t.descriptionTagName=Gs.DEFAULT_DESCRIPTION_TAG_NAME,t.descriptionContent=n,t.appendDescription=!1,t}},{key:"HELP_TEXT_AFTER_CONTENT",value:function(e,t,n){return t.descriptionTagName=Gs.DEFAULT_DESCRIPTION_TAG_NAME,t.descriptionContent=n,t.appendDescription=!0,t}}]),n}(Be);Cr.register("ParallelDOM",No);var qo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({phetioDocumentation:"Determines whether the element is enabled (true) or disabled (false).",phetioFeatured:!0,checkTandemName:!0},i);return t.call(this,e,r)}return _createClass(n,null,[{key:"TANDEM_NAME",get:function(){return"enabledProperty"}}]),n}(pt);h.register("EnabledProperty",qo);var Oo=1,Bo=jn.NOTHING.copy(),Go=jn.NOTHING.copy(),Ho=new oi,Fo=qo.TANDEM_NAME,Yo=["leftTop","centerTop","rightTop","leftCenter","center","rightCenter","leftBottom","centerBottom","rightBottom","left","right","top","bottom","centerX","centerY"],zo=["children","cursor","phetioVisiblePropertyInstrumented","visibleProperty","visible","pickableProperty","pickable","phetioEnabledPropertyInstrumented","enabledProperty","enabled","phetioInputEnabledPropertyInstrumented","inputEnabledProperty","inputEnabled","inputListeners","opacity","disabledOpacity","filters","matrix","translation","x","y","rotation","scale","excludeInvisibleChildrenFromBounds","layoutOptions","localBounds","maxWidth","maxHeight","renderer","layerSplit","usesOpacity","cssTransform","excludeInvisible","webglScale","preventFit","mouseArea","touchArea","clipArea","transformBounds"].concat(Yo),Uo={phetioVisiblePropertyInstrumented:!0,visible:!0,opacity:1,disabledOpacity:1,pickable:null,enabled:!0,phetioEnabledPropertyInstrumented:!1,inputEnabled:!0,phetioInputEnabledPropertyInstrumented:!1,clipArea:null,mouseArea:null,touchArea:null,cursor:null,transformBounds:!1,maxWidth:null,maxHeight:null,renderer:null,usesOpacity:!1,layerSplit:!1,cssTransform:!1,excludeInvisible:!1,webglScale:null,preventFit:!1},Wo=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n),_defineProperty(_assertThisInitialized(i=t.call(this)),"parentAddedEmitter",new d),_defineProperty(_assertThisInitialized(i),"parentRemovedEmitter",new d),_defineProperty(_assertThisInitialized(i),"_activeParentLayoutConstraint",null),i._id=Oo++,i._instances=[],i._rootedDisplays=[],i._drawables=[],i._visibleProperty=new _n(Uo.visible,Uo.phetioVisiblePropertyInstrumented,i.onVisiblePropertyChange.bind(_assertThisInitialized(i))),i.opacityProperty=new st(Uo.opacity,i.onOpacityPropertyChange.bind(_assertThisInitialized(i))),i.disabledOpacityProperty=new st(Uo.disabledOpacity,i.onDisabledOpacityPropertyChange.bind(_assertThisInitialized(i))),i._pickableProperty=new _n(Uo.pickable,!1,i.onPickablePropertyChange.bind(_assertThisInitialized(i))),i._enabledProperty=new _n(Uo.enabled,Uo.phetioEnabledPropertyInstrumented,i.onEnabledPropertyChange.bind(_assertThisInitialized(i))),i._inputEnabledProperty=new _n(Uo.inputEnabled,Uo.phetioInputEnabledPropertyInstrumented),i.clipAreaProperty=new st(Uo.clipArea),i.voicingVisibleProperty=new st(!0),i._mouseArea=Uo.mouseArea,i._touchArea=Uo.touchArea,i._cursor=Uo.cursor,i._children=[],i._parents=[],i._transformBounds=Uo.transformBounds,i._transform=new _i,i._transformListener=i.onTransformChange.bind(_assertThisInitialized(i)),i._transform.changeEmitter.addListener(i._transformListener),i._maxWidth=Uo.maxWidth,i._maxHeight=Uo.maxHeight,i._appliedScaleFactor=1,i._inputListeners=[],i.inputEnabledProperty.lazyLink(i.pdomBoundInputEnabledListener);var r=i.onBoundsListenersAddedOrRemoved.bind(_assertThisInitialized(i)),a=i.validateBounds.bind(_assertThisInitialized(i)),s=i.validateSelfBounds.bind(_assertThisInitialized(i));return i.boundsProperty=new xn(jn.NOTHING.copy(),a),i.boundsProperty.changeCount=r,i.localBoundsProperty=new xn(jn.NOTHING.copy(),a),i.localBoundsProperty.changeCount=r,i.childBoundsProperty=new xn(jn.NOTHING.copy(),a),i.childBoundsProperty.changeCount=r,i.selfBoundsProperty=new xn(jn.NOTHING.copy(),s),i._localBoundsOverridden=!1,i._excludeInvisibleChildrenFromBounds=!1,i._layoutOptions=null,i._boundsDirty=!0,i._localBoundsDirty=!0,i._selfBoundsDirty=!0,i._childBoundsDirty=!0,i._filters=[],i._hints={renderer:null===Uo.renderer?0:Zr.fromName(Uo.renderer),usesOpacity:Uo.usesOpacity,layerSplit:Uo.layerSplit,cssTransform:Uo.cssTransform,fullResolution:!1,excludeInvisible:Uo.excludeInvisible,webglScale:Uo.webglScale,preventFit:Uo.preventFit},i.childrenChangedEmitter=new d,i.childInsertedEmitter=new d,i.childRemovedEmitter=new d,i.childrenReorderedEmitter=new d,i.transformEmitter=new d,i.instanceRefreshEmitter=new d,i.rendererSummaryRefreshEmitter=new d,i.filterChangeEmitter=new d,i.changedInstanceEmitter=new d,i.layoutOptionsChangedEmitter=new d,i._rendererBitmask=Zr.bitmaskNodeDefault,i._rendererSummary=new el(_assertThisInitialized(i)),i._boundsEventCount=0,i._boundsEventSelfCount=0,i._picker=new Xo(_assertThisInitialized(i)),i._isGettingRemovedFromParent=!1,e&&i.mutate(e),i}return _createClass(n,[{key:"insertChild",value:function(e,t,n){return this._picker.onInsertChild(t),this.changeBoundsEventCount(t._boundsEventCount>0?1:0),this._rendererSummary.summaryChange(el.bitmaskAll,t._rendererSummary.bitmask),t._parents.push(this),this._children.splice(e,0,t),t._rendererSummary.hasNoPDOM()||this.onPDOMAddChild(t),t.invalidateBounds(),this._boundsDirty=!0,this.childInsertedEmitter.emit(t,e),t.parentAddedEmitter.emit(this),!n&&this.childrenChangedEmitter.emit(),this}},{key:"addChild",value:function(e,t){return this.insertChild(this._children.length,e,t),this}},{key:"removeChild",value:function(e,t){var n=_.indexOf(this._children,e);return this.removeChildWithIndex(e,n,t),this}},{key:"removeChildAt",value:function(e,t){var n=this._children[e];return this.removeChildWithIndex(n,e,t),this}},{key:"removeChildWithIndex",value:function(e,t,n){var i=_.indexOf(e._parents,this);e._isGettingRemovedFromParent=!0,e._rendererSummary.hasNoPDOM()||this.onPDOMRemoveChild(e),this._picker.onRemoveChild(e),this.changeBoundsEventCount(e._boundsEventCount>0?-1:0),this._rendererSummary.summaryChange(e._rendererSummary.bitmask,el.bitmaskAll),e._parents.splice(i,1),this._children.splice(t,1),e._isGettingRemovedFromParent=!1,this.invalidateBounds(),this._childBoundsDirty=!0,this.childRemovedEmitter.emit(e,t),e.parentRemovedEmitter.emit(this),!n&&this.childrenChangedEmitter.emit()}},{key:"moveChildToIndex",value:function(e,t){var n=this.indexOfChild(e);return this._children[t]!==e&&(this._children.splice(n,1),this._children.splice(t,0,e),this._rendererSummary.hasNoPDOM()||this.onPDOMReorderedChildren(),this.childrenReorderedEmitter.emit(Math.min(n,t),Math.max(n,t)),this.childrenChangedEmitter.emit()),this}},{key:"removeAllChildren",value:function(){return this.setChildren([]),this}},{key:"setChildren",value:function(e){var t,n=[],i=[],r=[];for(Po(e,this._children,i,n,r),t=n.length-1;t>=0;t--)this.removeChild(n[t],!0);var a=-1,s=-1;for(t=0;t<r.length;t++){var o=r[t];this._children[t]!==o&&(this._children[t]=o,-1===a&&(a=t),s=t)}var l=-1!==a;if(l&&(this._rendererSummary.hasNoPDOM()||this.onPDOMReorderedChildren(),this.childrenReorderedEmitter.emit(a,s)),i.length){var u=0,c=i[u];for(t=0;t<e.length;t++)e[t]===c&&(this.insertChild(t,c,!0),c=i[++u])}return(0!==n.length||0!==i.length||l)&&this.childrenChangedEmitter.emit(),this}},{key:"children",get:function(){return this.getChildren()},set:function(e){this.setChildren(e)}},{key:"getChildren",value:function(){return this._children.slice(0)}},{key:"getChildrenCount",value:function(){return this._children.length}},{key:"getParents",value:function(){return this._parents.slice(0)}},{key:"parents",get:function(){return this.getParents()}},{key:"getParent",value:function(){return this._parents.length?this._parents[0]:null}},{key:"parent",get:function(){return this.getParent()}},{key:"getChildAt",value:function(e){return this._children[e]}},{key:"indexOfParent",value:function(e){return _.indexOf(this._parents,e)}},{key:"indexOfChild",value:function(e){return _.indexOf(this._children,e)}},{key:"moveToFront",value:function(){var e=this;return _.each(this._parents.slice(),(function(t){return t.moveChildToFront(e)})),this}},{key:"moveChildToFront",value:function(e){return this.moveChildToIndex(e,this._children.length-1)}},{key:"moveForward",value:function(){var e=this;return this._parents.forEach((function(t){return t.moveChildForward(e)})),this}},{key:"moveChildForward",value:function(e){var t=this.indexOfChild(e);return t<this.getChildrenCount()-1&&this.moveChildToIndex(e,t+1),this}},{key:"moveBackward",value:function(){var e=this;return this._parents.forEach((function(t){return t.moveChildBackward(e)})),this}},{key:"moveChildBackward",value:function(e){var t=this.indexOfChild(e);return t>0&&this.moveChildToIndex(e,t-1),this}},{key:"moveToBack",value:function(){var e=this;return _.each(this._parents.slice(),(function(t){return t.moveChildToBack(e)})),this}},{key:"moveChildToBack",value:function(e){return this.moveChildToIndex(e,0)}},{key:"replaceChild",value:function(e,t){var n=this.indexOfChild(e),i=e.focused;return this.removeChild(e,!0),this.insertChild(n,t,!0),this.childrenChangedEmitter.emit(),i&&t.focusable&&t.focus(),this}},{key:"detach",value:function(){var e=this;return _.each(this._parents.slice(0),(function(t){return t.removeChild(e)})),this}},{key:"changeBoundsEventCount",value:function(e){if(0!==e){var t=0===this._boundsEventCount;if(this._boundsEventCount+=e,t!==(0===this._boundsEventCount))for(var n=t?1:-1,i=this._parents.length,r=0;r<i;r++)this._parents[r].changeBoundsEventCount(n)}}},{key:"validateSelfBounds",value:function(){if(this._selfBoundsDirty){var e=Bo.set(this.selfBoundsProperty._value),t=this.updateSelfBounds();return this._selfBoundsDirty=!1,t&&this.selfBoundsProperty.notifyListeners(e),!0}return!1}},{key:"validateBounds",value:function(){var e,t=this.validateSelfBounds(),n=this.childBoundsProperty._value,i=this.localBoundsProperty._value,r=this.selfBoundsProperty._value,a=this.boundsProperty._value;if(this._childBoundsDirty){for(t=!0,e=this._children.length;e--;)this._children[e].validateBounds();var s=Bo.set(n);for(n.set(jn.NOTHING),e=this._children.length;e--;){var o=this._children[e];this._excludeInvisibleChildrenFromBounds&&!o.isVisible()||n.includeBounds(o.bounds)}this._childBoundsDirty=!1,n.equals(s)||n.equalsEpsilon(s,1e-13)||this.childBoundsProperty.notifyListeners(s)}if(this._localBoundsDirty){t=!0,this._localBoundsDirty=!1;var l=Bo.set(i);if(!this._localBoundsOverridden){i.set(r).includeBounds(n);var u=this.clipArea;u&&i.constrainBounds(u.bounds)}null===this._maxWidth&&null===this._maxHeight||this.updateMaxDimension(i),i.equals(l)||(this._boundsDirty=!0,i.equalsEpsilon(l,1e-13)||this.localBoundsProperty.notifyListeners(l))}if(this._boundsDirty){t=!0,this._boundsDirty=!1;var c=Bo.set(a);if(this._transformBounds&&!this._transform.getMatrix().isAxisAligned()){var h=Ho.set(this.getMatrix());a.set(jn.NOTHING),this._includeTransformedSubtreeBounds(h,a);var d=this.clipArea;d&&a.constrainBounds(d.getBoundsWithTransform(h))}else a.set(i),this.transformBoundsFromLocalToParent(a);if(!a.equals(c)){for(e=this._parents.length;e--;)this._parents[e].invalidateBounds();a.equalsEpsilon(c,1e-13)||this.boundsProperty.notifyListeners(c)}}return(this._childBoundsDirty||this._boundsDirty)&&this.validateBounds(),t}},{key:"_includeTransformedSubtreeBounds",value:function(e,t){this.selfBounds.isEmpty()||t.includeBounds(this.getTransformedSelfBounds(e));for(var n=this._children.length,i=0;i<n;i++){var r=this._children[i];e.multiplyMatrix(r._transform.getMatrix()),r._includeTransformedSubtreeBounds(e,t),e.multiplyMatrix(r._transform.getInverse())}return t}},{key:"validateWatchedBounds",value:function(){for(;this.watchedBoundsScan(););}},{key:"watchedBoundsScan",value:function(){if(0!==this._boundsEventSelfCount)return this.validateBounds();if(this._boundsEventCount>0&&this._childBoundsDirty){for(var e=!1,t=this._children.length,n=0;n<t;n++)e=this._children[n].watchedBoundsScan()||e;return e}return!1}},{key:"invalidateBounds",value:function(){this._boundsDirty=!0,this._localBoundsDirty=!0;for(var e=this._parents.length;e--;)this._parents[e].invalidateChildBounds()}},{key:"invalidateChildBounds",value:function(){if(!this._childBoundsDirty){this._childBoundsDirty=!0,this._localBoundsDirty=!0;for(var e=this._parents.length;e--;)this._parents[e].invalidateChildBounds()}}},{key:"invalidateSelf",value:function(e){var t=this.selfBoundsProperty._value;if(e){if(this._selfBoundsDirty=!1,!t.equals(e)){var n=Bo.set(t);this.invalidateBounds(),this._picker.onSelfBoundsDirty(),t.set(e),this.selfBoundsProperty.notifyListeners(n)}}else this._selfBoundsDirty=!0,this.invalidateBounds(),this._picker.onSelfBoundsDirty()}},{key:"updateSelfBounds",value:function(){return!1}},{key:"hasChild",value:function(e){var t=_.includes(this._children,e);return t}},{key:"getSelfShape",value:function(){return this.selfBounds.isEmpty()?new Ni:Ni.bounds(this.selfBounds)}},{key:"getSelfBounds",value:function(){return this.selfBoundsProperty.value}},{key:"selfBounds",get:function(){return this.getSelfBounds()}},{key:"getSafeSelfBounds",value:function(){return this.selfBoundsProperty.value}},{key:"safeSelfBounds",get:function(){return this.getSafeSelfBounds()}},{key:"getChildBounds",value:function(){return this.childBoundsProperty.value}},{key:"childBounds",get:function(){return this.getChildBounds()}},{key:"getLocalBounds",value:function(){return this.localBoundsProperty.value}},{key:"localBounds",get:function(){return this.getLocalBounds()},set:function(e){this.setLocalBounds(e)}},{key:"localBoundsOverridden",get:function(){return this._localBoundsOverridden}},{key:"setLocalBounds",value:function(e){var t=this.localBoundsProperty._value,n=t.copy();if(null===e)this._localBoundsOverridden&&(this._localBoundsOverridden=!1,this.localBoundsProperty.notifyListeners(n),this.invalidateBounds());else{var i=!e.equals(t)||!this._localBoundsOverridden;i&&t.set(e),this._localBoundsOverridden||(this._localBoundsOverridden=!0),i&&(this.localBoundsProperty.notifyListeners(n),this.invalidateBounds())}return this}},{key:"getTransformedSelfBounds",value:function(e){return this.selfBounds.transformed(e)}},{key:"getTransformedSafeSelfBounds",value:function(e){return this.safeSelfBounds.transformed(e)}},{key:"getSafeTransformedVisibleBounds",value:function(e){var t=(e||oi.IDENTITY).timesMatrix(this.matrix),n=jn.NOTHING.copy();if(this.visibleProperty.value&&(this.selfBounds.isEmpty()||n.includeBounds(this.getTransformedSafeSelfBounds(t)),this._children.length))for(var i=0;i<this._children.length;i++)n.includeBounds(this._children[i].getSafeTransformedVisibleBounds(t));return n}},{key:"safeTransformedVisibleBounds",get:function(){return this.getSafeTransformedVisibleBounds()}},{key:"setTransformBounds",value:function(e){return this._transformBounds!==e&&(this._transformBounds=e,this.invalidateBounds()),this}},{key:"transformBounds",get:function(){return this.getTransformBounds()},set:function(e){this.setTransformBounds(e)}},{key:"getTransformBounds",value:function(){return this._transformBounds}},{key:"getBounds",value:function(){return this.boundsProperty.value}},{key:"bounds",get:function(){return this.getBounds()}},{key:"getVisibleLocalBounds",value:function(){for(var e=this.selfBounds.copy(),t=this._children.length;t--;)e.includeBounds(this._children[t].getVisibleBounds());return e}},{key:"visibleLocalBounds",get:function(){return this.getVisibleLocalBounds()}},{key:"getVisibleBounds",value:function(){return this.isVisible()?this.getVisibleLocalBounds().transform(this.getMatrix()):jn.NOTHING}},{key:"visibleBounds",get:function(){return this.getVisibleBounds()}},{key:"hitTest",value:function(e,t,n){return this._picker.hitTest(e,!!t,!!n)}},{key:"trailUnderPointer",value:function(e){return null===e.point?null:this.hitTest(e.point,e instanceof Kh,e.isTouchLike())}},{key:"containsPoint",value:function(e){return null!==this.hitTest(e)}},{key:"containsPointSelf",value:function(e){return this.selfBounds.containsPoint(e)}},{key:"intersectsBoundsSelf",value:function(e){return this.selfBounds.intersectsBounds(e)}},{key:"isPhetioMouseHittable",value:function(e){if(!this.visible)return!1;if(!1===this.pickable)return!1;var t=this._transform.getInverse().timesVector2(e);return!(null!==this.clipArea&&!this.clipArea.containsPoint(t))}},{key:"getPhetioMouseHit",value:function(e){if(!this.isPhetioMouseHittable(e))return null;for(var t=this._transform.getInverse().timesVector2(e),n=this._children.length-1;n>=0;n--){var i=this._children[n].getPhetioMouseHit(t);if(i)return i.isPhetioInstrumented()?i:this}return this._mouseArea?this._mouseArea.containsPoint(t)?this:null:this.selfBounds.containsPoint(t)&&this.containsPointSelf(t)?this:null}},{key:"isPainted",value:function(){return!1}},{key:"areSelfBoundsValid",value:function(){return!0}},{key:"hasParent",value:function(){return 0!==this._parents.length}},{key:"hasChildren",value:function(){return this._children.length>0}},{key:"isChildIncludedInLayout",value:function(e){return e.bounds.isValid()&&(!this._excludeInvisibleChildrenFromBounds||e.visible)}},{key:"walkDepthFirst",value:function(e){e(this);for(var t=this._children.length,n=0;n<t;n++)this._children[n].walkDepthFirst(e)}},{key:"addInputListener",value:function(e){return _.includes(this._inputListeners,e)||(this._inputListeners.push(e),this._picker.onAddInputListener()),this}},{key:"removeInputListener",value:function(e){var t=_.indexOf(this._inputListeners,e);return t>=0&&(this._inputListeners.splice(t,1),this._picker.onRemoveInputListener()),this}},{key:"hasInputListener",value:function(e){for(var t=0;t<this._inputListeners.length;t++)if(this._inputListeners[t]===e)return!0;return!1}},{key:"interruptInput",value:function(){for(var e=this.inputListeners,t=0;t<e.length;t++){var n=e[t];n.interrupt&&n.interrupt()}return this}},{key:"interruptSubtreeInput",value:function(){this.interruptInput();for(var e=this._children.slice(),t=0;t<e.length;t++)e[t].interruptSubtreeInput();return this}},{key:"translate",value:function(e,t,n){if("number"==typeof e){if(Math.abs(e)<1e-12&&Math.abs(t)<1e-12)return;n?this.prependTranslation(e,t):this.appendMatrix(Ho.setToTranslation(e,t))}else{var i=e;if(!i.x&&!i.y)return;this.translate(i.x,i.y,t)}}},{key:"scale",value:function(e,t,n){if("number"==typeof e)if(void 0===t||"boolean"==typeof t)this.scale(e,e,t);else{if(1===e&&1===t)return;n?this.prependMatrix(oi.scaling(e,t)):this.appendMatrix(oi.scaling(e,t))}else{var i=e;this.scale(i.x,i.y,t)}}},{key:"rotate",value:function(e,t){e%(2*Math.PI)!=0&&(t?this.prependMatrix(oi.rotation2(e)):this.appendMatrix(oi.rotation2(e)))}},{key:"rotateAround",value:function(e,t){var n=oi.translation(-e.x,-e.y);return n=oi.rotation2(t).timesMatrix(n),n=oi.translation(e.x,e.y).timesMatrix(n),this.prependMatrix(n),this}},{key:"setX",value:function(e){return this.translate(e-this.getX(),0,!0),this}},{key:"x",get:function(){return this.getX()},set:function(e){this.setX(e)}},{key:"getX",value:function(){return this._transform.getMatrix().m02()}},{key:"setY",value:function(e){return this.translate(0,e-this.getY(),!0),this}},{key:"y",get:function(){return this.getY()},set:function(e){this.setY(e)}},{key:"getY",value:function(){return this._transform.getMatrix().m12()}},{key:"setScaleMagnitude",value:function(e,t){var n=this.getScaleVector();return"number"==typeof e?(void 0===t&&(t=e),this.appendMatrix(oi.scaling(e/n.x,t/n.y))):this.appendMatrix(oi.scaling(e.x/n.x,e.y/n.y)),this}},{key:"getScaleVector",value:function(){return this._transform.getMatrix().getScaleVector()}},{key:"setRotation",value:function(e){return this.appendMatrix(Ho.setToRotationZ(e-this.getRotation())),this}},{key:"rotation",get:function(){return this.getRotation()},set:function(e){this.setRotation(e)}},{key:"getRotation",value:function(){return this._transform.getMatrix().getRotation()}},{key:"setTranslation",value:function(e,t){var n,i,r=this._transform.getMatrix(),a=r.m02(),s=r.m12();return"number"==typeof e?(n=e-a,i=t-s):(n=e.x-a,i=e.y-s),this.translate(n,i,!0),this}},{key:"translation",get:function(){return this.getTranslation()},set:function(e){this.setTranslation(e)}},{key:"getTranslation",value:function(){var e=this._transform.getMatrix();return new pn(e.m02(),e.m12())}},{key:"appendMatrix",value:function(e){this._transform.append(e)}},{key:"prependMatrix",value:function(e){this._transform.prepend(e)}},{key:"prependTranslation",value:function(e,t){(e||t)&&this._transform.prependTranslation(e,t)}},{key:"setMatrix",value:function(e){this._transform.setMatrix(e)}},{key:"matrix",get:function(){return this.getMatrix()},set:function(e){this.setMatrix(e)}},{key:"getMatrix",value:function(){return this._transform.getMatrix()}},{key:"getTransform",value:function(){return this._transform}},{key:"transform",get:function(){return this.getTransform()}},{key:"resetTransform",value:function(){this.setMatrix(oi.IDENTITY)}},{key:"onTransformChange",value:function(){this.invalidateBounds(),this._picker.onTransformChange(),this.transformEmitter.emit()}},{key:"onSummaryChange",value:function(e,t){this._pdomDisplaysInfo.onSummaryChange(e,t)}},{key:"updateMaxDimension",value:function(e){var t=this._appliedScaleFactor,n=1;if(null!==this._maxWidth){var i=e.width;i>this._maxWidth&&(n=Math.min(n,this._maxWidth/i))}if(null!==this._maxHeight){var r=e.height;r>this._maxHeight&&(n=Math.min(n,this._maxHeight/r))}var a=n/t;1!==a&&(this._appliedScaleFactor=n,this.scale(a))}},{key:"auditMaxDimensions",value:function(){}},{key:"onMaxDimensionChange",value:function(e,t){null===e&&null!==t?(this.changeBoundsEventCount(1),this._boundsEventSelfCount++):null!==e&&null===t&&(this.changeBoundsEventCount(-1),this._boundsEventSelfCount--)}},{key:"setMaxWidth",value:function(e){this._maxWidth!==e&&(this.onMaxDimensionChange(this._maxWidth,e),this._maxWidth=e,this.updateMaxDimension(this.localBoundsProperty.value))}},{key:"maxWidth",get:function(){return this.getMaxWidth()},set:function(e){this.setMaxWidth(e)}},{key:"getMaxWidth",value:function(){return this._maxWidth}},{key:"setMaxHeight",value:function(e){this._maxHeight!==e&&(this.onMaxDimensionChange(this._maxHeight,e),this._maxHeight=e,this.updateMaxDimension(this.localBoundsProperty.value))}},{key:"maxHeight",get:function(){return this.getMaxHeight()},set:function(e){this.setMaxHeight(e)}},{key:"getMaxHeight",value:function(){return this._maxHeight}},{key:"setLeft",value:function(e){var t=this.getLeft();return isFinite(t)&&this.translate(e-t,0,!0),this}},{key:"left",get:function(){return this.getLeft()},set:function(e){this.setLeft(e)}},{key:"getLeft",value:function(){return this.getBounds().minX}},{key:"setRight",value:function(e){var t=this.getRight();return isFinite(t)&&this.translate(e-t,0,!0),this}},{key:"right",get:function(){return this.getRight()},set:function(e){this.setRight(e)}},{key:"getRight",value:function(){return this.getBounds().maxX}},{key:"setCenterX",value:function(e){var t=this.getCenterX();return isFinite(t)&&this.translate(e-t,0,!0),this}},{key:"centerX",get:function(){return this.getCenterX()},set:function(e){this.setCenterX(e)}},{key:"getCenterX",value:function(){return this.getBounds().getCenterX()}},{key:"setCenterY",value:function(e){var t=this.getCenterY();return isFinite(t)&&this.translate(0,e-t,!0),this}},{key:"centerY",get:function(){return this.getCenterY()},set:function(e){this.setCenterY(e)}},{key:"getCenterY",value:function(){return this.getBounds().getCenterY()}},{key:"setTop",value:function(e){var t=this.getTop();return isFinite(t)&&this.translate(0,e-t,!0),this}},{key:"top",get:function(){return this.getTop()},set:function(e){this.setTop(e)}},{key:"getTop",value:function(){return this.getBounds().minY}},{key:"setBottom",value:function(e){var t=this.getBottom();return isFinite(t)&&this.translate(0,e-t,!0),this}},{key:"bottom",get:function(){return this.getBottom()},set:function(e){this.setBottom(e)}},{key:"getBottom",value:function(){return this.getBounds().maxY}},{key:"setLeftTop",value:function(e){var t=this.getLeftTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}},{key:"leftTop",get:function(){return this.getLeftTop()},set:function(e){this.setLeftTop(e)}},{key:"getLeftTop",value:function(){return this.getBounds().getLeftTop()}},{key:"setCenterTop",value:function(e){var t=this.getCenterTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}},{key:"centerTop",get:function(){return this.getCenterTop()},set:function(e){this.setCenterTop(e)}},{key:"getCenterTop",value:function(){return this.getBounds().getCenterTop()}},{key:"setRightTop",value:function(e){var t=this.getRightTop();return t.isFinite()&&this.translate(e.minus(t),!0),this}},{key:"rightTop",get:function(){return this.getRightTop()},set:function(e){this.setRightTop(e)}},{key:"getRightTop",value:function(){return this.getBounds().getRightTop()}},{key:"setLeftCenter",value:function(e){var t=this.getLeftCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}},{key:"leftCenter",get:function(){return this.getLeftCenter()},set:function(e){this.setLeftCenter(e)}},{key:"getLeftCenter",value:function(){return this.getBounds().getLeftCenter()}},{key:"setCenter",value:function(e){var t=this.getCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}},{key:"center",get:function(){return this.getCenter()},set:function(e){this.setCenter(e)}},{key:"getCenter",value:function(){return this.getBounds().getCenter()}},{key:"setRightCenter",value:function(e){var t=this.getRightCenter();return t.isFinite()&&this.translate(e.minus(t),!0),this}},{key:"rightCenter",get:function(){return this.getRightCenter()},set:function(e){this.setRightCenter(e)}},{key:"getRightCenter",value:function(){return this.getBounds().getRightCenter()}},{key:"setLeftBottom",value:function(e){var t=this.getLeftBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}},{key:"leftBottom",get:function(){return this.getLeftBottom()},set:function(e){this.setLeftBottom(e)}},{key:"getLeftBottom",value:function(){return this.getBounds().getLeftBottom()}},{key:"setCenterBottom",value:function(e){var t=this.getCenterBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}},{key:"centerBottom",get:function(){return this.getCenterBottom()},set:function(e){this.setCenterBottom(e)}},{key:"getCenterBottom",value:function(){return this.getBounds().getCenterBottom()}},{key:"setRightBottom",value:function(e){var t=this.getRightBottom();return t.isFinite()&&this.translate(e.minus(t),!0),this}},{key:"rightBottom",get:function(){return this.getRightBottom()},set:function(e){this.setRightBottom(e)}},{key:"getRightBottom",value:function(){return this.getBounds().getRightBottom()}},{key:"getWidth",value:function(){return this.getBounds().getWidth()}},{key:"width",get:function(){return this.getWidth()}},{key:"getHeight",value:function(){return this.getBounds().getHeight()}},{key:"height",get:function(){return this.getHeight()}},{key:"getLocalWidth",value:function(){return this.getLocalBounds().getWidth()}},{key:"localWidth",get:function(){return this.getLocalWidth()}},{key:"getLocalHeight",value:function(){return this.getLocalBounds().getHeight()}},{key:"localHeight",get:function(){return this.getLocalHeight()}},{key:"getLocalLeft",value:function(){return this.getLocalBounds().minX}},{key:"localLeft",get:function(){return this.getLocalLeft()}},{key:"getLocalRight",value:function(){return this.getLocalBounds().maxX}},{key:"localRight",get:function(){return this.getLocalRight()}},{key:"getLocalCenterX",value:function(){return this.getLocalBounds().getCenterX()}},{key:"localCenterX",get:function(){return this.getLocalCenterX()}},{key:"getLocalCenterY",value:function(){return this.getLocalBounds().getCenterY()}},{key:"localCenterY",get:function(){return this.getLocalCenterY()}},{key:"getLocalTop",value:function(){return this.getLocalBounds().minY}},{key:"localTop",get:function(){return this.getLocalTop()}},{key:"getLocalBottom",value:function(){return this.getLocalBounds().maxY}},{key:"localBottom",get:function(){return this.getLocalBottom()}},{key:"getLocalLeftTop",value:function(){return this.getLocalBounds().getLeftTop()}},{key:"localLeftTop",get:function(){return this.getLocalLeftTop()}},{key:"getLocalCenterTop",value:function(){return this.getLocalBounds().getCenterTop()}},{key:"localCenterTop",get:function(){return this.getLocalCenterTop()}},{key:"getLocalRightTop",value:function(){return this.getLocalBounds().getRightTop()}},{key:"localRightTop",get:function(){return this.getLocalRightTop()}},{key:"getLocalLeftCenter",value:function(){return this.getLocalBounds().getLeftCenter()}},{key:"localLeftCenter",get:function(){return this.getLocalLeftCenter()}},{key:"getLocalCenter",value:function(){return this.getLocalBounds().getCenter()}},{key:"localCenter",get:function(){return this.getLocalCenter()}},{key:"getLocalRightCenter",value:function(){return this.getLocalBounds().getRightCenter()}},{key:"localRightCenter",get:function(){return this.getLocalRightCenter()}},{key:"getLocalLeftBottom",value:function(){return this.getLocalBounds().getLeftBottom()}},{key:"localLeftBottom",get:function(){return this.getLocalLeftBottom()}},{key:"getLocalCenterBottom",value:function(){return this.getLocalBounds().getCenterBottom()}},{key:"localCenterBottom",get:function(){return this.getLocalCenterBottom()}},{key:"getLocalRightBottom",value:function(){return this.getLocalBounds().getRightBottom()}},{key:"localRightBottom",get:function(){return this.getLocalRightBottom()}},{key:"getId",value:function(){return this._id}},{key:"id",get:function(){return this.getId()}},{key:"onVisiblePropertyChange",value:function(e){this._picker.onVisibilityChange(),this._pdomDisplaysInfo.onVisibilityChange(e);for(var t=0;t<this._parents.length;t++){var n=this._parents[t];n._excludeInvisibleChildrenFromBounds&&n.invalidateChildBounds()}}},{key:"setVisibleProperty",value:function(e){return this._visibleProperty.setTargetProperty(this,"visibleProperty",e)}},{key:"visibleProperty",get:function(){return this.getVisibleProperty()},set:function(e){this.setVisibleProperty(e)}},{key:"getVisibleProperty",value:function(){return this._visibleProperty}},{key:"setVisible",value:function(e){return this.visibleProperty.set(e),this}},{key:"visible",get:function(){return this.isVisible()},set:function(e){this.setVisible(e)}},{key:"isVisible",value:function(){return this.visibleProperty.value}},{key:"setPhetioVisiblePropertyInstrumented",value:function(e){return this._visibleProperty.setTargetPropertyInstrumented(e,this)}},{key:"phetioVisiblePropertyInstrumented",get:function(){return this.getPhetioVisiblePropertyInstrumented()},set:function(e){this.setPhetioVisiblePropertyInstrumented(e)}},{key:"getPhetioVisiblePropertyInstrumented",value:function(){return this._visibleProperty.getTargetPropertyInstrumented()}},{key:"swapVisibility",value:function(e){var t=this.visible?this:e,n=this.visible?e:this,i=t.focused;return t.visible=!1,n.visible=!0,i&&n.focusable&&n.focus(),this}},{key:"setOpacity",value:function(e){if(e<0||e>1)throw new Error("opacity out of range: ".concat(e));this.opacityProperty.value=e}},{key:"opacity",get:function(){return this.getOpacity()},set:function(e){this.setOpacity(e)}},{key:"getOpacity",value:function(){return this.opacityProperty.value}},{key:"setDisabledOpacity",value:function(e){if(e<0||e>1)throw new Error("disabledOpacity out of range: ".concat(e));return this.disabledOpacityProperty.value=e,this}},{key:"disabledOpacity",get:function(){return this.getDisabledOpacity()},set:function(e){this.setDisabledOpacity(e)}},{key:"getDisabledOpacity",value:function(){return this.disabledOpacityProperty.value}},{key:"getEffectiveOpacity",value:function(){return this.opacityProperty.value*(this.enabledProperty.value?1:this.disabledOpacityProperty.value)}},{key:"effectiveOpacity",get:function(){return this.getEffectiveOpacity()}},{key:"onOpacityPropertyChange",value:function(){this.filterChangeEmitter.emit()}},{key:"onDisabledOpacityPropertyChange",value:function(){this._enabledProperty.value||this.filterChangeEmitter.emit()}},{key:"setFilters",value:function(e){var t;this._filters.length=0,(t=this._filters).push.apply(t,_toConsumableArray(e)),this.invalidateHint(),this.filterChangeEmitter.emit()}},{key:"filters",get:function(){return this.getFilters()},set:function(e){this.setFilters(e)}},{key:"getFilters",value:function(){return this._filters.slice()}},{key:"setPickableProperty",value:function(e){return this._pickableProperty.setTargetProperty(this,null,e)}},{key:"pickableProperty",get:function(){return this.getPickableProperty()},set:function(e){this.setPickableProperty(e)}},{key:"getPickableProperty",value:function(){return this._pickableProperty}},{key:"setPickable",value:function(e){return this._pickableProperty.set(e),this}},{key:"pickable",get:function(){return this.isPickable()},set:function(e){this.setPickable(e)}},{key:"isPickable",value:function(){return this._pickableProperty.value}},{key:"onPickablePropertyChange",value:function(e,t){this._picker.onPickableChange(t,e)}},{key:"updateLinkedElementForProperty",value:function(e,t,n){if(this.isPhetioInstrumented()){t&&t instanceof ht&&t.isPhetioInstrumented()&&t instanceof Be&&this.removeLinkedElements(t);var i=this.tandem.createTandem(e);n&&n instanceof ht&&n.isPhetioInstrumented()&&n instanceof Be&&i!==n.tandem&&this.addLinkedElement(n,{tandem:i})}}},{key:"setEnabledProperty",value:function(e){return this._enabledProperty.setTargetProperty(this,Fo,e)}},{key:"enabledProperty",get:function(){return this.getEnabledProperty()},set:function(e){this.setEnabledProperty(e)}},{key:"getEnabledProperty",value:function(){return this._enabledProperty}},{key:"setPhetioEnabledPropertyInstrumented",value:function(e){return this._enabledProperty.setTargetPropertyInstrumented(e,this)}},{key:"phetioEnabledPropertyInstrumented",get:function(){return this.getPhetioEnabledPropertyInstrumented()},set:function(e){this.setPhetioEnabledPropertyInstrumented(e)}},{key:"getPhetioEnabledPropertyInstrumented",value:function(){return this._enabledProperty.getTargetPropertyInstrumented()}},{key:"setEnabled",value:function(e){return this._enabledProperty.set(e),this}},{key:"enabled",get:function(){return this.isEnabled()},set:function(e){this.setEnabled(e)}},{key:"isEnabled",value:function(){return this._enabledProperty.value}},{key:"onEnabledPropertyChange",value:function(e){!e&&this.interruptSubtreeInput(),this.inputEnabled=e,1!==this.disabledOpacityProperty.value&&this.filterChangeEmitter.emit()}},{key:"setInputEnabledProperty",value:function(e){return this._inputEnabledProperty.setTargetProperty(this,"inputEnabledProperty",e)}},{key:"inputEnabledProperty",get:function(){return this.getInputEnabledProperty()},set:function(e){this.setInputEnabledProperty(e)}},{key:"getInputEnabledProperty",value:function(){return this._inputEnabledProperty}},{key:"setPhetioInputEnabledPropertyInstrumented",value:function(e){return this._inputEnabledProperty.setTargetPropertyInstrumented(e,this)}},{key:"phetioInputEnabledPropertyInstrumented",get:function(){return this.getPhetioInputEnabledPropertyInstrumented()},set:function(e){this.setPhetioInputEnabledPropertyInstrumented(e)}},{key:"getPhetioInputEnabledPropertyInstrumented",value:function(){return this._inputEnabledProperty.getTargetPropertyInstrumented()}},{key:"setInputEnabled",value:function(e){this.inputEnabledProperty.value=e}},{key:"inputEnabled",get:function(){return this.isInputEnabled()},set:function(e){this.setInputEnabled(e)}},{key:"isInputEnabled",value:function(){return this.inputEnabledProperty.value}},{key:"setInputListeners",value:function(e){for(;this._inputListeners.length;)this.removeInputListener(this._inputListeners[0]);for(var t=0;t<e.length;t++)this.addInputListener(e[t]);return this}},{key:"inputListeners",get:function(){return this.getInputListeners()},set:function(e){this.setInputListeners(e)}},{key:"getInputListeners",value:function(){return this._inputListeners.slice(0)}},{key:"setCursor",value:function(e){this._cursor="auto"===e?null:e}},{key:"cursor",get:function(){return this.getCursor()},set:function(e){this.setCursor(e)}},{key:"getCursor",value:function(){return this._cursor}},{key:"getEffectiveCursor",value:function(){if(this._cursor)return this._cursor;for(var e=0;e<this._inputListeners.length;e++){var t=this._inputListeners[e];if(t.cursor)return t.cursor}return null}},{key:"setMouseArea",value:function(e){return this._mouseArea!==e&&(this._mouseArea=e,this._picker.onMouseAreaChange()),this}},{key:"mouseArea",get:function(){return this.getMouseArea()},set:function(e){this.setMouseArea(e)}},{key:"getMouseArea",value:function(){return this._mouseArea}},{key:"setTouchArea",value:function(e){return this._touchArea!==e&&(this._touchArea=e,this._picker.onTouchAreaChange()),this}},{key:"touchArea",get:function(){return this.getTouchArea()},set:function(e){this.setTouchArea(e)}},{key:"getTouchArea",value:function(){return this._touchArea}},{key:"setClipArea",value:function(e){this.clipArea!==e&&(this.clipAreaProperty.value=e,this.invalidateBounds(),this._picker.onClipAreaChange())}},{key:"clipArea",get:function(){return this.getClipArea()},set:function(e){this.setClipArea(e)}},{key:"getClipArea",value:function(){return this.clipAreaProperty.value}},{key:"hasClipArea",value:function(){return null!==this.clipArea}},{key:"setRendererBitmask",value:function(e){e!==this._rendererBitmask&&(this._rendererBitmask=e,this._rendererSummary.selfChange(),this.instanceRefreshEmitter.emit())}},{key:"invalidateSupportedRenderers",value:function(){}},{key:"invalidateHint",value:function(){this.rendererSummaryRefreshEmitter.emit(),this.instanceRefreshEmitter.emit()}},{key:"setRenderer",value:function(e){var t=0;"canvas"===e?t=Zr.bitmaskCanvas:"svg"===e?t=Zr.bitmaskSVG:"dom"===e?t=Zr.bitmaskDOM:"webgl"===e&&(t=Zr.bitmaskWebGL),this._hints.renderer!==t&&(this._hints.renderer=t,this.invalidateHint())}},{key:"renderer",get:function(){return this.getRenderer()},set:function(e){this.setRenderer(e)}},{key:"getRenderer",value:function(){return 0===this._hints.renderer?null:this._hints.renderer===Zr.bitmaskCanvas?"canvas":this._hints.renderer===Zr.bitmaskSVG?"svg":this._hints.renderer===Zr.bitmaskDOM?"dom":this._hints.renderer===Zr.bitmaskWebGL?"webgl":null}},{key:"setLayerSplit",value:function(e){e!==this._hints.layerSplit&&(this._hints.layerSplit=e,this.invalidateHint())}},{key:"layerSplit",get:function(){return this.isLayerSplit()},set:function(e){this.setLayerSplit(e)}},{key:"isLayerSplit",value:function(){return this._hints.layerSplit}},{key:"setUsesOpacity",value:function(e){e!==this._hints.usesOpacity&&(this._hints.usesOpacity=e,this.invalidateHint())}},{key:"usesOpacity",get:function(){return this.getUsesOpacity()},set:function(e){this.setUsesOpacity(e)}},{key:"getUsesOpacity",value:function(){return this._hints.usesOpacity}},{key:"setCSSTransform",value:function(e){e!==this._hints.cssTransform&&(this._hints.cssTransform=e,this.invalidateHint())}},{key:"cssTransform",get:function(){return this.isCSSTransformed()},set:function(e){this.setCSSTransform(e)}},{key:"isCSSTransformed",value:function(){return this._hints.cssTransform}},{key:"setExcludeInvisible",value:function(e){e!==this._hints.excludeInvisible&&(this._hints.excludeInvisible=e,this.invalidateHint())}},{key:"excludeInvisible",get:function(){return this.isExcludeInvisible()},set:function(e){this.setExcludeInvisible(e)}},{key:"isExcludeInvisible",value:function(){return this._hints.excludeInvisible}},{key:"setExcludeInvisibleChildrenFromBounds",value:function(e){e!==this._excludeInvisibleChildrenFromBounds&&(this._excludeInvisibleChildrenFromBounds=e,this.invalidateBounds())}},{key:"excludeInvisibleChildrenFromBounds",get:function(){return this.isExcludeInvisibleChildrenFromBounds()},set:function(e){this.setExcludeInvisibleChildrenFromBounds(e)}},{key:"isExcludeInvisibleChildrenFromBounds",value:function(){return this._excludeInvisibleChildrenFromBounds}},{key:"setLayoutOptions",value:function(e){e!==this._layoutOptions&&(this._layoutOptions=e,this.layoutOptionsChangedEmitter.emit())}},{key:"layoutOptions",get:function(){return this.getLayoutOptions()},set:function(e){this.setLayoutOptions(e)}},{key:"getLayoutOptions",value:function(){return this._layoutOptions}},{key:"mutateLayoutOptions",value:function(e){this.layoutOptions=E()({},this.layoutOptions||{},e)}},{key:"widthSizable",get:function(){return!1}},{key:"heightSizable",get:function(){return!1}},{key:"extendsWidthSizable",get:function(){return!1}},{key:"extendsHeightSizable",get:function(){return!1}},{key:"extendsSizable",get:function(){return!1}},{key:"setPreventFit",value:function(e){e!==this._hints.preventFit&&(this._hints.preventFit=e,this.invalidateHint())}},{key:"preventFit",get:function(){return this.isPreventFit()},set:function(e){this.setPreventFit(e)}},{key:"isPreventFit",value:function(){return this._hints.preventFit}},{key:"setWebGLScale",value:function(e){e!==this._hints.webglScale&&(this._hints.webglScale=e,this.invalidateHint())}},{key:"webglScale",get:function(){return this.getWebGLScale()},set:function(e){this.setWebGLScale(e)}},{key:"getWebGLScale",value:function(){return this._hints.webglScale}},{key:"getUniqueTrail",value:function(e){if(e){var t=this.getTrails(e);return t[0]}for(var n=new bl,i=this;i;)n.addAncestor(i),i=i._parents[0];return n}},{key:"getUniqueTrailTo",value:function(e){return this.getUniqueTrail((function(t){return e===t}))}},{key:"getTrails",value:function(e){e=e||n.defaultTrailPredicate;var t=[],i=new bl(this);return bl.appendAncestorTrailsWithPredicate(t,i,e),t}},{key:"getTrailsTo",value:function(e){return this.getTrails((function(t){return t===e}))}},{key:"getLeafTrails",value:function(e){e=e||n.defaultLeafTrailPredicate;var t=[],i=new bl(this);return bl.appendDescendantTrailsWithPredicate(t,i,e),t}},{key:"getLeafTrailsTo",value:function(e){return this.getLeafTrails((function(t){return t===e}))}},{key:"getUniqueLeafTrail",value:function(e){var t=this.getLeafTrails(e);return t[0]}},{key:"getUniqueLeafTrailTo",value:function(e){return this.getUniqueLeafTrail((function(t){return t===e}))}},{key:"getConnectedNodes",value:function(){for(var e=[],t=this._children.concat(this._parents).concat(this);t.length;){var n=t.pop();_.includes(e,n)||(e.push(n),t=t.concat(n._children,n._parents))}return e}},{key:"getSubtreeNodes",value:function(){for(var e=[],t=this._children.concat(this);t.length;){var n=t.pop();_.includes(e,n)||(e.push(n),t=t.concat(n._children))}return e}},{key:"getTopologicallySortedNodes",value:function(){var e,t={},n=[],i=[];function r(i){delete t[e.id][i.id],_.every(t,(function(e){return!e[i.id]}))&&n.push(i)}for(_.each(this.getConnectedNodes(),(function(e){t[e.id]={},_.each(e._children,(function(n){t[e.id][n.id]=!0})),e.parents.length||n.push(e)}));n.length;)e=n.pop(),i.push(e),_.each(e._children,r);return i}},{key:"canAddChild",value:function(e){if(this===e||_.includes(this._children,e))return!1;var t,n={},i=[],r=[];function a(e){delete n[t.id][e.id],_.every(n,(function(t){return!t[e.id]}))&&i.push(e)}for(_.each(this.getConnectedNodes().concat(e.getConnectedNodes()),(function(t){n[t.id]={},_.each(t._children,(function(e){n[t.id][e.id]=!0})),t.parents.length||t===e||i.push(t)})),n[this.id][e.id]=!0;i.length;)t=i.pop(),r.push(t),_.each(t._children,a),t===this&&a(e);return _.every(n,(function(e){return _.every(e,(function(e){return!1}))}))}},{key:"canvasPaintSelf",value:function(e,t){}},{key:"renderToCanvasSelf",value:function(e,t){this.isPainted()&&this._rendererBitmask&Zr.bitmaskCanvas&&this.canvasPaintSelf(e,t)}},{key:"renderToCanvasSubtree",value:function(e,t){t=t||oi.identity(),e.resetStyles(),this.renderToCanvasSelf(e,t);for(var n=0;n<this._children.length;n++){var i=this._children[n];if(i.isVisible()&&i.bounds.isValid()){var r=1!==i.effectiveOpacity||i.clipArea||i._filters.length;if(e.context.save(),t.multiplyMatrix(i._transform.getMatrix()),t.canvasSetTransform(e.context),r){var a=i.localBounds.transformed(t).dilate(4).roundOut().constrainBounds(Go.setMinMax(0,0,e.canvas.width,e.canvas.height));a.width>0&&a.height>0&&function(){var n=document.createElement("canvas");n.width=a.width,n.height=a.height;var r=n.getContext("2d"),s=new Ha(n,r),o=t.copy().prependTranslation(-a.minX,-a.minY);o.canvasSetTransform(r),i.renderToCanvasSubtree(s,o),e.context.save(),i.clipArea&&(e.context.beginPath(),i.clipArea.writeToContext(e.context),e.context.clip()),e.context.setTransform(1,0,0,1,0,0),e.context.globalAlpha=i.effectiveOpacity;var l=!1;i._filters.length&&(zr.canvasFilter&&_.every(i._filters,(function(e){return e.isDOMCompatible()}))?(e.context.filter=i._filters.map((function(e){return e.getCSSFilterString()})).join(" "),l=!0):i._filters.forEach((function(e){return e.applyCanvasFilter(s)}))),e.context.drawImage(n,a.minX,a.minY),e.context.restore(),l&&(e.context.filter="none")}()}else i.renderToCanvasSubtree(e,t);t.multiplyMatrix(i._transform.getInverse()),e.context.restore()}}}},{key:"renderToCanvas",value:function(e,t,n,i){e.width=e.width,i&&(t.fillStyle=i,t.fillRect(0,0,e.width,e.height));var r=new Ha(e,t);this.renderToCanvasSubtree(r,oi.identity()),n&&n()}},{key:"toCanvas",value:function(e,t,n,i,r){var a=this.getBounds().union(this.localToParentBounds(this.getSafeSelfBounds()));t=void 0!==t?t:Math.ceil(2-a.minX),n=void 0!==n?n:Math.ceil(2-a.minY),i=void 0!==i?i:Math.ceil(a.getWidth()+4),r=void 0!==r?r:Math.ceil(a.getHeight()+4);var s=document.createElement("canvas");s.width=i,s.height=r;var o=s.getContext("2d");o.translate(t,n),this._transform.getMatrix().canvasAppendTransform(o);var l=new Ha(s,o);this.renderToCanvasSubtree(l,oi.translation(t,n).timesMatrix(this._transform.getMatrix())),e(s,t,n,i,r)}},{key:"toDataURL",value:function(e,t,n,i,r){this.toCanvas((function(t,n,i,r,a){e(t.toDataURL(),n,i,r,a)}),t,n,i,r)}},{key:"toImage",value:function(e,t,n,i,r){this.toDataURL((function(t,n,i){var r=document.createElement("img");r.onload=function(){e(r,n,i);try{delete r.onload}catch(t){}},r.src=t}),t,n,i,r)}},{key:"toImageNodeAsynchronous",value:function(e,t,i,r,a){this.toImage((function(t,i,r){e(new n({children:[new Bl(t,{x:-i,y:-r})]}))}),t,i,r,a)}},{key:"toCanvasNodeSynchronous",value:function(e,t,i,r){var a=null;return this.toCanvas((function(e,t,i){a=new n({children:[new Bl(e,{x:-t,y:-i})]})}),e,t,i,r),a}},{key:"toDataURLImageSynchronous",value:function(e,t,n,i){var r=null;return this.toDataURL((function(e,t,n,i,a){r=new Bl(e,{x:-t,y:-n,initialWidth:i,initialHeight:a})}),e,t,n,i),r}},{key:"toDataURLNodeSynchronous",value:function(e,t,i,r){return new n({children:[this.toDataURLImageSynchronous(e,t,i,r)]})}},{key:"rasterized",value:function(e){var t=S()({resolution:1,sourceBounds:null,useTargetBounds:!0,wrap:!0,useCanvas:!1,imageOptions:{}},e),i=t.resolution,r=t.sourceBounds;var a=new n({scale:i,children:[this]}),s=r||this.getSafeTransformedVisibleBounds().dilated(2).roundedOut();1!==i&&((s=new jn(i*s.minX,i*s.minY,i*s.maxX,i*s.maxY)).width%1!=0&&(s.maxX+=1-s.width%1),s.height%1!=0&&(s.maxY+=1-s.height%1));var o=null;a.toCanvas((function(e,n,r,a,s){var l=t.useCanvas?e:e.toDataURL();(o=new Bl(l,k({},t.imageOptions,{x:-n,y:-r,initialWidth:a,initialHeight:s}))).scale(1/i,1/i,!0)}),-s.minX,-s.minY,En.roundSymmetric(s.width),En.roundSymmetric(s.height)),a.dispose();var l=this.getVisibleBounds();if(r&&(l=r.intersection(l)),t.useTargetBounds&&(o.imageBounds=o.parentToLocalBounds(l)),t.wrap){var u=new n({children:[o]});return t.useTargetBounds&&(u.localBounds=l),u}return t.useTargetBounds&&(o.localBounds=o.parentToLocalBounds(l)),o}},{key:"createDOMDrawable",value:function(e,t){throw new Error("createDOMDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}},{key:"createSVGDrawable",value:function(e,t){throw new Error("createSVGDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}},{key:"createCanvasDrawable",value:function(e,t){throw new Error("createCanvasDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}},{key:"createWebGLDrawable",value:function(e,t){throw new Error("createWebGLDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")}},{key:"getInstances",value:function(){return this._instances}},{key:"instances",get:function(){return this.getInstances()}},{key:"addInstance",value:function(e){this._instances.push(e),this.changedInstanceEmitter.emit(e,!0)}},{key:"removeInstance",value:function(e){var t=_.indexOf(this._instances,e);this._instances.splice(t,1),this.changedInstanceEmitter.emit(e,!1)}},{key:"wasVisuallyDisplayed",value:function(e){for(var t=0;t<this._instances.length;t++){var n=this._instances[t];if(n.visible&&(!e||n.display===e))return!0}return!1}},{key:"getRootedDisplays",value:function(){return this._rootedDisplays}},{key:"rootedDisplays",get:function(){return this.getRootedDisplays()}},{key:"addRootedDisplay",value:function(e){this._rootedDisplays.push(e),this._pdomDisplaysInfo.onAddedRootedDisplay(e)}},{key:"removeRootedDisplay",value:function(e){var t=_.indexOf(this._rootedDisplays,e);this._rootedDisplays.splice(t,1),this._pdomDisplaysInfo.onRemovedRootedDisplay(e)}},{key:"getRecursiveConnectedDisplays",value:function(e){this.rootedDisplays.length&&e.push.apply(e,_toConsumableArray(this.rootedDisplays));for(var t=0;t<this._parents.length;t++)e.push.apply(e,_toConsumableArray(this._parents[t].getRecursiveConnectedDisplays(e)));return _.uniq(e)}},{key:"getConnectedDisplays",value:function(){return _.uniq(this.getRecursiveConnectedDisplays([]))}},{key:"localToParentPoint",value:function(e){return this._transform.transformPosition2(e)}},{key:"localToParentBounds",value:function(e){return this._transform.transformBounds2(e)}},{key:"parentToLocalPoint",value:function(e){return this._transform.inversePosition2(e)}},{key:"parentToLocalBounds",value:function(e){return this._transform.inverseBounds2(e)}},{key:"transformBoundsFromLocalToParent",value:function(e){return e.transform(this._transform.getMatrix())}},{key:"transformBoundsFromParentToLocal",value:function(e){return e.transform(this._transform.getInverse())}},{key:"getLocalToGlobalMatrix",value:function(){for(var e=this,t=[];e;)t.push(e._transform.getMatrix()),e=e._parents[0];for(var n=oi.identity(),i=t.length-1;i>=0;i--)n.multiplyMatrix(t[i]);return n}},{key:"getUniqueTransform",value:function(){return new _i(this.getLocalToGlobalMatrix())}},{key:"getGlobalToLocalMatrix",value:function(){return this.getLocalToGlobalMatrix().invert()}},{key:"localToGlobalPoint",value:function(e){for(var t=this,n=e.copy();t;)t._transform.getMatrix().multiplyVector2(n),t=t._parents[0];return n}},{key:"globalToLocalPoint",value:function(e){for(var t=this,n=[];t;)n.push(t._transform),t=t._parents[0];for(var i=e.copy(),r=n.length-1;r>=0;r--)n[r].getInverse().multiplyVector2(i);return i}},{key:"localToGlobalBounds",value:function(e){return e.transformed(this.getLocalToGlobalMatrix())}},{key:"globalToLocalBounds",value:function(e){return e.transformed(this.getGlobalToLocalMatrix())}},{key:"parentToGlobalPoint",value:function(e){return this.parents.length?this.parents[0].localToGlobalPoint(e):e}},{key:"parentToGlobalBounds",value:function(e){return this.parents.length?this.parents[0].localToGlobalBounds(e):e}},{key:"globalToParentPoint",value:function(e){return this.parents.length?this.parents[0].globalToLocalPoint(e):e}},{key:"globalToParentBounds",value:function(e){return this.parents.length?this.parents[0].globalToLocalBounds(e):e}},{key:"getGlobalBounds",value:function(){return this.parentToGlobalBounds(this.getBounds())}},{key:"globalBounds",get:function(){return this.getGlobalBounds()}},{key:"boundsOf",value:function(e){return this.globalToLocalBounds(e.getGlobalBounds())}},{key:"boundsTo",value:function(e){return e.globalToLocalBounds(this.getGlobalBounds())}},{key:"attachDrawable",value:function(e){return this._drawables.push(e),this}},{key:"detachDrawable",value:function(e){var t=_.indexOf(this._drawables,e);return this._drawables.splice(t,1),this}},{key:"mutate",value:function(e){var t=this;return e?(_.each(this._mutatorKeys,(function(i){if(void 0!==e[i]){var r=Object.getOwnPropertyDescriptor(n.prototype,i);r&&"function"==typeof r.value?t[i](e[i]):t[i]=e[i]}})),this.initializePhetioObject({phetioType:n.NodeIO,phetioState:!1},e),this):this}},{key:"initializePhetioObject",value:function(e,t){var i=this,r=this.isPhetioInstrumented();_get(_getPrototypeOf(n.prototype),"initializePhetioObject",this).call(this,e,t),xe.PHET_IO_ENABLED&&!r&&this.isPhetioInstrumented()&&(this._visibleProperty.initializePhetio(this,"visibleProperty",(function(){return new pt(i.visible,k({phetioReadOnly:i.phetioReadOnly,tandem:i.tandem.createTandem("visibleProperty"),phetioDocumentation:"Controls whether the Node will be visible (and interactive)."},t.visiblePropertyOptions))})),this._enabledProperty.initializePhetio(this,Fo,(function(){return new qo(i.enabled,k({phetioReadOnly:i.phetioReadOnly,phetioDocumentation:'Sets whether the node is enabled. This will set whether input is enabled for this Node and most often children as well. It will also control and toggle the "disabled look" of the node.',tandem:i.tandem.createTandem(Fo)},t.enabledPropertyOptions))})),this._inputEnabledProperty.initializePhetio(this,"inputEnabledProperty",(function(){return new dt(i.inputEnabled,k({phetioReadOnly:i.phetioReadOnly,tandem:i.tandem.createTandem("inputEnabledProperty"),phetioValueType:Q,phetioFeatured:!0,phetioDocumentation:"Sets whether the element will have input enabled, and hence be interactive."},t.inputEnabledPropertyOptions))})))}},{key:"setVoicingVisible",value:function(e){this.voicingVisibleProperty.value!==e&&(this.voicingVisibleProperty.value=e)}},{key:"voicingVisible",get:function(){return this.isVoicingVisible()},set:function(e){this.setVoicingVisible(e)}},{key:"isVoicingVisible",value:function(){return this.voicingVisibleProperty.value}},{key:"getDebugHTMLExtras",value:function(){return""}},{key:"inspect",value:function(){localStorage.scenerySnapshot=JSON.stringify({type:"Subtree",rootNodeId:this.id,nodes:Of(this)})}},{key:"toString",value:function(e,t){return"".concat(this.constructor.name,"#").concat(this.id)}},{key:"auditInstanceSubtreeForDisplay",value:function(e){}},{key:"onBoundsListenersAddedOrRemoved",value:function(e){this.changeBoundsEventCount(e),this._boundsEventSelfCount+=e}},{key:"dispose",value:function(){this.disposeParallelDOM(),this.removeAllChildren(),this.detach(),this._inputEnabledProperty.dispose(),this._enabledProperty.dispose(),this._pickableProperty.dispose(),this._visibleProperty.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"disposeSubtree",value:function(){if(!this.isDisposed){var e=this.children;this.dispose();for(var t=0;t<e.length;t++)e[t].disposeSubtree()}}}],[{key:"defaultTrailPredicate",value:function(e){return 0===e._parents.length}},{key:"defaultLeafTrailPredicate",value:function(e){return 0===e._children.length}}]),n}(No);_defineProperty(Wo,"DEFAULT_NODE_OPTIONS",Uo),Wo.prototype._mutatorKeys=Do.concat(zo),Wo.prototype.drawableMarkFlags=[],Wo.REQUIRES_BOUNDS_OPTION_KEYS=Yo,Cr.register("Node",Wo),Wo.NodeIO=new U("NodeIO",{valueType:Wo,documentation:"The base type for graphical and potentially interactive objects.",metadataDefaults:{phetioState:!1}});var jo=Wo,Xo=function(){function e(t){_classCallCheck(this,e),this.node=t,this.selfPruned=!1,this.selfInclusive=!1,this.subtreePrunable=!0,this.subtreePickableCount=0,this.mouseInclusiveBounds=jn.NOTHING.copy(),this.mouseExclusiveBounds=jn.NOTHING.copy(),this.touchInclusiveBounds=jn.NOTHING.copy(),this.touchExclusiveBounds=jn.NOTHING.copy(),this.mouseInclusiveDirty=!0,this.mouseExclusiveDirty=!0,this.touchInclusiveDirty=!0,this.touchExclusiveDirty=!0,this.scratchVector=new pn(0,0)}return _createClass(e,[{key:"hitTest",value:function(e,t,n){var i=this.selfInclusive;return t?i?this.validateMouseInclusive():this.validateMouseExclusive():n?i?this.validateTouchInclusive():this.validateTouchExclusive():this.node.validateBounds(),this.recursiveHitTest(e,t,n,!1)}},{key:"recursiveHitTest",value:function(e,t,n,i){if(i=i||this.selfInclusive,this.selfPruned||!i&&this.subtreePrunable)return null;if(!(t?i?this.mouseInclusiveBounds:this.mouseExclusiveBounds:n?i?this.touchInclusiveBounds:this.touchExclusiveBounds:this.node.bounds).containsPoint(e))return null;var r=this.node._transform.getInverse().multiplyVector2(this.scratchVector.set(e)),a=this.node.clipArea;if(null!==a&&!a.containsPoint(r))return null;for(var s=this.node._children.length-1;s>=0;s--){var o=this.node._children[s]._picker.recursiveHitTest(r,t,n,i);if(o)return o.addAncestor(this.node,s)}return t&&this.node._mouseArea?this.node._mouseArea.containsPoint(r)?new bl(this.node):null:n&&this.node._touchArea?this.node._touchArea.containsPoint(r)?new bl(this.node):null:this.node.selfBounds.containsPoint(r)&&this.node.containsPointSelf(r)?new bl(this.node):null}},{key:"invalidate",value:function(e,t){var n=!!t||!this.mouseInclusiveDirty||!this.touchInclusiveDirty;if(this.mouseInclusiveDirty=!0,this.touchInclusiveDirty=!0,e&&(n=n||!this.mouseExclusiveDirty||!this.touchExclusiveDirty,this.mouseExclusiveDirty=!0,this.touchExclusiveDirty=!0),!this.selfPruned&&n)for(var i=this.node._parents,r=0;r<i.length;r++)i[r]._picker.invalidate(e||this.selfInclusive,!1)}},{key:"validateMouseInclusive",value:function(){if(this.mouseInclusiveDirty){this.mouseInclusiveBounds.set(this.node.selfBounds);for(var e=this.node._children,t=0;t<e.length;t++){var n=e[t]._picker;n.selfPruned||(n.validateMouseInclusive(),this.mouseInclusiveBounds.includeBounds(n.mouseInclusiveBounds))}this.applyAreasAndTransform(this.mouseInclusiveBounds,this.node._mouseArea),this.mouseInclusiveDirty=!1}}},{key:"validateMouseExclusive",value:function(){if(this.mouseExclusiveDirty){this.mouseExclusiveBounds.set(this.node.selfBounds);for(var e=this.node._children,t=0;t<e.length;t++){var n=e[t]._picker;n.subtreePrunable||(n.selfInclusive?(n.validateMouseInclusive(),this.mouseExclusiveBounds.includeBounds(n.mouseInclusiveBounds)):(n.validateMouseExclusive(),this.mouseExclusiveBounds.includeBounds(n.mouseExclusiveBounds)))}this.applyAreasAndTransform(this.mouseExclusiveBounds,this.node._mouseArea),this.mouseExclusiveDirty=!1}}},{key:"validateTouchInclusive",value:function(){if(this.touchInclusiveDirty){this.touchInclusiveBounds.set(this.node.selfBounds);for(var e=this.node._children,t=0;t<e.length;t++){var n=e[t]._picker;n.selfPruned||(n.validateTouchInclusive(),this.touchInclusiveBounds.includeBounds(n.touchInclusiveBounds))}this.applyAreasAndTransform(this.touchInclusiveBounds,this.node._touchArea),this.touchInclusiveDirty=!1}}},{key:"validateTouchExclusive",value:function(){if(this.touchExclusiveDirty){this.touchExclusiveBounds.set(this.node.selfBounds);for(var e=this.node._children,t=0;t<e.length;t++){var n=e[t]._picker;n.subtreePrunable||(n.selfInclusive?(n.validateTouchInclusive(),this.touchExclusiveBounds.includeBounds(n.touchInclusiveBounds)):(n.validateTouchExclusive(),this.touchExclusiveBounds.includeBounds(n.touchExclusiveBounds)))}this.applyAreasAndTransform(this.touchExclusiveBounds,this.node._touchArea),this.touchExclusiveDirty=!1}}},{key:"applyAreasAndTransform",value:function(e,t){t&&e.includeBounds(t instanceof jn?t:t.bounds);var n=this.node.clipArea;if(n){var i=n.bounds;e.minX=Math.max(e.minX,i.minX),e.minY=Math.max(e.minY,i.minY),e.maxX=Math.min(e.maxX,i.maxX),e.maxY=Math.min(e.maxY,i.maxY)}this.node.transformBoundsFromLocalToParent(e)}},{key:"onInsertChild",value:function(e){if(!e._picker.selfPruned){var t=e._picker.subtreePickableCount>0;t&&this.changePickableCount(1),this.invalidate(t,!0)}}},{key:"onRemoveChild",value:function(e){if(!e._picker.selfPruned){var t=e._picker.subtreePickableCount>0;t&&this.changePickableCount(-1),this.invalidate(t,!0)}}},{key:"onAddInputListener",value:function(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(1)}},{key:"onRemoveInputListener",value:function(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(-1)}},{key:"onPickableChange",value:function(e,t){this.checkSelfPruned(),this.checkSelfInclusive(),this.checkSubtreePrunable();var n=(!0===e?-1:0)+(!0===t?1:0);n&&this.changePickableCount(n)}},{key:"onVisibilityChange",value:function(){this.checkSelfPruned(),this.checkSubtreePrunable()}},{key:"onMouseAreaChange",value:function(){this.invalidate(!0)}},{key:"onTouchAreaChange",value:function(){this.invalidate(!0)}},{key:"onTransformChange",value:function(){this.invalidate(!0)}},{key:"onSelfBoundsDirty",value:function(){this.invalidate(!0)}},{key:"onClipAreaChange",value:function(){this.invalidate(!0)}},{key:"checkSelfPruned",value:function(){var e=!1===this.node.pickableProperty.value||!this.node.isVisible();if(this.selfPruned!==e){this.selfPruned=e;for(var t=this.node._parents,n=0;n<t.length;n++){var i=t[n]._picker;this.subtreePickableCount>0?(i.invalidate(!0,!0),i.changePickableCount(this.selfPruned?-1:1)):i.invalidate(!1,!0)}}}},{key:"checkSelfInclusive",value:function(){var e=!0===this.node.pickableProperty.value||this.node._inputListeners.length>0;this.selfInclusive!==e&&(this.selfInclusive=e,this.invalidate(!0,!0))}},{key:"checkSubtreePrunable",value:function(){var e=!1===this.node.pickableProperty.value||!this.node.isVisible()||!0!==this.node.pickableProperty.value&&0===this.subtreePickableCount;this.subtreePrunable!==e&&(this.subtreePrunable=e,this.invalidate(!0,!0))}},{key:"changePickableCount",value:function(e){if(0!==e){var t=0===this.subtreePickableCount;this.subtreePickableCount+=e;var n=0===this.subtreePickableCount;if(this.checkSubtreePrunable(),!this.selfPruned&&t!==n)for(var i=this.node._parents.length,r=0;r<i;r++)this.node._parents[r]._picker.changePickableCount(t?1:-1)}}},{key:"audit",value:function(){}}]),e}();Cr.register("Picker",Xo);for(var Qo=[Zr.bitmaskCanvas,Zr.bitmaskSVG,Zr.bitmaskDOM,Zr.bitmaskWebGL,Zr.bitmaskSingleCanvas,Zr.bitmaskSingleSVG,Zr.bitmaskNotPainted,Zr.bitmaskBoundsValid,Zr.bitmaskNoPDOM,Zr.bitmaskLacksCanvas,Zr.bitmaskLacksSVG,Zr.bitmaskLacksDOM,Zr.bitmaskLacksWebGL],Ko=Qo.length,Jo=0,Zo=0;Zo<Ko;Zo++)Jo|=Qo[Zo];var $o=function(){function e(t){_classCallCheck(this,e),this.node=t,this._counts={};for(var n=0;n<Ko;n++)this._counts[Qo[n]]=0;this.bitmask=Jo,this.selfBitmask=e.summaryBitmaskForNodeSelf(t),this.summaryChange(this.bitmask,this.selfBitmask);var i=this.selfChange.bind(this);this.node.filterChangeEmitter.addListener(i),this.node.clipAreaProperty.lazyLink(i),this.node.rendererSummaryRefreshEmitter.addListener(i)}return _createClass(e,[{key:"summaryChange",value:function(e,t){for(var n=e^t,i=0,r=0,a=0;a<Ko;a++){var s=Qo[a];s&n&&(s&t?(this._counts[s]--,0===this._counts[s]&&(r|=s)):(this._counts[s]++,1===this._counts[s]&&(i|=s)))}if(i||r){for(var o=this.bitmask,l=0;l<Ko;l++){var u=Qo[l];r&u&&(this.bitmask|=u),i&u&&(this.bitmask^=u)}this.node.instanceRefreshEmitter.emit(),this.node.onSummaryChange(o,this.bitmask);for(var c=this.node._parents.length,h=0;h<c;h++)this.node._parents[h]._rendererSummary.summaryChange(i,r)}}},{key:"selfChange",value:function(){var t=this.selfBitmask,n=e.summaryBitmaskForNodeSelf(this.node);t!==n&&(this.summaryChange(t,n),this.selfBitmask=n)}},{key:"computeBitmask",value:function(){for(var e=0,t=0;t<Ko;t++)0===this._counts[Qo[t]]&&(e|=Qo[t]);return e}},{key:"isSubtreeFullyCompatible",value:function(e){return!!(e&this.bitmask)}},{key:"isSubtreeContainingCompatible",value:function(e){return!(e<<Zr.bitmaskLacksShift&this.bitmask)}},{key:"isSingleCanvasSupported",value:function(){return!!(Zr.bitmaskSingleCanvas&this.bitmask)}},{key:"isSingleSVGSupported",value:function(){return!!(Zr.bitmaskSingleSVG&this.bitmask)}},{key:"isNotPainted",value:function(){return!!(Zr.bitmaskNotPainted&this.bitmask)}},{key:"hasNoPDOM",value:function(){return!!(Zr.bitmaskNoPDOM&this.bitmask)}},{key:"areBoundsValid",value:function(){return!!(Zr.bitmaskBoundsValid&this.bitmask)}},{key:"isSubtreeRenderedExclusivelySVG",value:function(e){if(!this.isSingleSVGSupported())return!1;for(var t=0;t<Zr.numActiveRenderers;t++){var n=Zr.bitmaskOrder(e,t);if(Zr.bitmaskSVG&n)return!0;if(this.isSubtreeContainingCompatible(n))return!1}return!1}},{key:"isSubtreeRenderedExclusivelyCanvas",value:function(e){if(!this.isSingleCanvasSupported())return!1;for(var t=0;t<Zr.numActiveRenderers;t++){var n=Zr.bitmaskOrder(e,t);if(Zr.bitmaskCanvas&n)return!0;if(this.isSubtreeContainingCompatible(n))return!1}return!1}},{key:"audit",value:function(){}},{key:"toString",value:function(){for(var t=e.bitmaskToString(this.bitmask),n=0;n<Ko;n++){var i=Qo[n],r=this._counts[i];0!==r&&(t+=" ".concat(e.bitToString(i),":").concat(r))}return t}}],[{key:"summaryBitmaskForNodeSelf",value:function(e){var t=e._rendererBitmask;e.isPainted()?t|=(e._rendererBitmask&Zr.bitmaskCurrentRendererArea^Zr.bitmaskCurrentRendererArea)<<Zr.bitmaskLacksShift:t|=Zr.bitmaskCurrentRendererArea<<Zr.bitmaskLacksShift;var n=e._hints.cssTransform||e._hints.layerSplit,i=e._hints.renderer;return n||!Zr.isSVG(e._rendererBitmask)||i&&!Zr.isSVG(i)||(t|=Zr.bitmaskSingleSVG),n||!Zr.isCanvas(e._rendererBitmask)||i&&!Zr.isCanvas(i)||(t|=Zr.bitmaskSingleCanvas),e.isPainted()||(t|=Zr.bitmaskNotPainted),e.areSelfBoundsValid()&&(t|=Zr.bitmaskBoundsValid),e.hasPDOMContent||e.hasPDOMOrder()||(t|=Zr.bitmaskNoPDOM),t}},{key:"bitToString",value:function(e){return e===Zr.bitmaskCanvas?"Canvas":e===Zr.bitmaskSVG?"SVG":e===Zr.bitmaskDOM?"DOM":e===Zr.bitmaskWebGL?"WebGL":e===Zr.bitmaskLacksCanvas?"(-Canvas)":e===Zr.bitmaskLacksSVG?"(-SVG)":e===Zr.bitmaskLacksDOM?"(-DOM)":e===Zr.bitmaskLacksWebGL?"(-WebGL)":e===Zr.bitmaskSingleCanvas?"SingleCanvas":e===Zr.bitmaskSingleSVG?"SingleSVG":e===Zr.bitmaskNotPainted?"NotPainted":e===Zr.bitmaskBoundsValid?"BoundsValid":e===Zr.bitmaskNoPDOM?"NotAccessible":"?"}},{key:"bitmaskToString",value:function(t){for(var n="",i=0;i<Ko;i++){var r=Qo[i];t&r&&(n+="".concat(e.bitToString(r)," "))}return n}}]),e}();$o.bitmaskAll=Jo,Cr.register("RendererSummary",$o);var el=$o,tl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;return _classCallCheck(this,n),(s=t.call(this,e[r],a)).node=e,s.property=i,s.attribute=r,s.changeListener=function(){return s.set(e[r])},s.property.lazyLink(s.changeListener),s}return _createClass(n,[{key:"dispose",value:function(){this.property.unlink(this.changeListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.node=null}},{key:"setPropertyValue",value:function(e){this.node[this.attribute]=e,_get(_getPrototypeOf(n.prototype),"setPropertyValue",this).call(this,e)}}]),n}(dt);Cr.register("NodeProperty",tl);var nl=function(){function e(t){_classCallCheck(this,e),this.node=t,this.pdomDisplays=[]}return _createClass(e,[{key:"onAddChild",value:function(e){e._pdomDisplaysInfo.canHavePDOMDisplays()&&e._pdomDisplaysInfo.addPDOMDisplays(this.pdomDisplays)}},{key:"onRemoveChild",value:function(e){e._pdomDisplaysInfo.canHavePDOMDisplays()&&e._pdomDisplaysInfo.removePDOMDisplays(this.pdomDisplays)}},{key:"onSummaryChange",value:function(e,t){if(this.node.visible&&this.node.pdomVisible){var n=!(Zr.bitmaskNoPDOM&e),i=!(Zr.bitmaskNoPDOM&t);i&&!n&&this.addAllPDOMDisplays(),!i&&n&&this.removeAllPDOMDisplays()}}},{key:"onVisibilityChange",value:function(e){this.node.pdomVisible&&!this.node._rendererSummary.hasNoPDOM()&&(e?this.addAllPDOMDisplays():this.removeAllPDOMDisplays())}},{key:"onPDOMVisibilityChange",value:function(e){this.node.visible&&!this.node._rendererSummary.hasNoPDOM()&&(e?this.addAllPDOMDisplays():this.removeAllPDOMDisplays())}},{key:"onAddedRootedDisplay",value:function(e){e._accessible&&this.canHavePDOMDisplays()&&this.addPDOMDisplays([e])}},{key:"onRemovedRootedDisplay",value:function(e){e._accessible&&this.canHavePDOMDisplays()&&this.removePDOMDisplays([e])}},{key:"canHavePDOMDisplays",value:function(){return this.node.visible&&this.node.pdomVisible&&!this.node._rendererSummary.hasNoPDOM()}},{key:"addAllPDOMDisplays",value:function(){var e,t=[];for(e=0;e<this.node._parents.length;e++)Array.prototype.push.apply(t,this.node._parents[e]._pdomDisplaysInfo.pdomDisplays);for(e=0;e<this.node._rootedDisplays.length;e++){var n=this.node._rootedDisplays[e];n._accessible&&t.push(n)}this.addPDOMDisplays(t)}},{key:"removeAllPDOMDisplays",value:function(){this.removePDOMDisplays(this.pdomDisplays.slice())}},{key:"addPDOMDisplays",value:function(e){if(0!==e.length){Array.prototype.push.apply(this.pdomDisplays,e);for(var t=0;t<this.node._children.length;t++){this.node._children[t]._pdomDisplaysInfo.canHavePDOMDisplays()&&this.node._children[t]._pdomDisplaysInfo.addPDOMDisplays(e)}this.node.pdomDisplaysEmitter.emit()}}},{key:"removePDOMDisplays",value:function(e){if(0!==e.length){var t;for(t=e.length-1;t>=0;t--){this.pdomDisplays.lastIndexOf(e[t]);this.pdomDisplays.splice(t,1)}for(t=0;t<this.node._children.length;t++){var n=this.node._children[t];n._pdomDisplaysInfo.canHavePDOMDisplays()&&!n._isGettingRemovedFromParent&&n._pdomDisplaysInfo.removePDOMDisplays(e)}this.node.pdomDisplaysEmitter.emit()}}}]),e}();function il(e){var t=new Map;return function(n){if(t.has(n))return t.get(n);var i=e(n);return t.set(n,i),i}}Cr.register("PDOMDisplaysInfo",nl),y.register("memoize",il);var rl=il,al=["preferredWidth","minimumWidth","localPreferredWidth","localMinimumWidth","widthSizable"],sl=rl((function(e){var t=Ol("WidthSizable",al,function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"preferredWidthProperty",new st(null)),_defineProperty(_assertThisInitialized(e),"minimumWidthProperty",new st(null)),_defineProperty(_assertThisInitialized(e),"localPreferredWidthProperty",new st(null)),_defineProperty(_assertThisInitialized(e),"localMinimumWidthProperty",new st(null)),_defineProperty(_assertThisInitialized(e),"isWidthResizableProperty",new st(!0)),_defineProperty(_assertThisInitialized(e),"_preferredSizeChanging",!1),_defineProperty(_assertThisInitialized(e),"_minimumSizeChanging",!1),e._updatePreferredWidthListener=e._updatePreferredWidth.bind(_assertThisInitialized(e)),e._updateLocalPreferredWidthListener=e._updateLocalPreferredWidth.bind(_assertThisInitialized(e)),e._updateMinimumWidthListener=e._updateMinimumWidth.bind(_assertThisInitialized(e)),e._updateLocalMinimumWidthListener=e._updateLocalMinimumWidth.bind(_assertThisInitialized(e)),e.preferredWidthProperty.lazyLink(e._updateLocalPreferredWidthListener),e.localPreferredWidthProperty.lazyLink(e._updatePreferredWidthListener),e.minimumWidthProperty.lazyLink(e._updateLocalMinimumWidthListener),e.localMinimumWidthProperty.lazyLink(e._updateMinimumWidthListener),e.transformEmitter.addListener(e._updateLocalPreferredWidthListener),e.transformEmitter.addListener(e._updateMinimumWidthListener),e}return _createClass(n,[{key:"preferredWidth",get:function(){return this.preferredWidthProperty.value},set:function(e){this.preferredWidthProperty.value=e}},{key:"localPreferredWidth",get:function(){return this.localPreferredWidthProperty.value},set:function(e){this.localPreferredWidthProperty.value=e}},{key:"minimumWidth",get:function(){return this.minimumWidthProperty.value},set:function(e){this.minimumWidthProperty.value=e}},{key:"localMinimumWidth",get:function(){return this.localMinimumWidthProperty.value},set:function(e){this.localMinimumWidthProperty.value=e}},{key:"widthSizable",get:function(){return this.isWidthResizableProperty.value},set:function(e){this.isWidthResizableProperty.value=e}},{key:"extendsWidthSizable",get:function(){return!0}},{key:"validateLocalPreferredWidth",value:function(){}},{key:"_calculateLocalPreferredWidth",value:function(){return this.matrix.isAligned()&&null!==this.preferredWidth?Math.abs(this.transform.inverseDeltaX(this.preferredWidth)):null}},{key:"_updateLocalPreferredWidth",value:function(){if(!this._preferredSizeChanging){this._preferredSizeChanging=!0;var e=this._calculateLocalPreferredWidth();(null===this.localPreferredWidthProperty.value||null===e||Math.abs(this.localPreferredWidthProperty.value-e)>1e-9)&&(this.localPreferredWidthProperty.value=e),this._preferredSizeChanging=!1}}},{key:"_calculatePreferredWidth",value:function(){return this.matrix.isAligned()&&null!==this.localPreferredWidth?Math.abs(this.transform.transformDeltaX(this.localPreferredWidth)):null}},{key:"_updatePreferredWidth",value:function(){if(!this._preferredSizeChanging){this._preferredSizeChanging=!0;var e=this._calculatePreferredWidth();(null===this.preferredWidthProperty.value||null===e||Math.abs(this.preferredWidthProperty.value-e)>1e-9)&&(this.preferredWidthProperty.value=e),this._preferredSizeChanging=!1}}},{key:"_calculateLocalMinimumWidth",value:function(){return this.matrix.isAligned()&&null!==this.minimumWidth?Math.abs(this.transform.inverseDeltaX(this.minimumWidth)):null}},{key:"_updateLocalMinimumWidth",value:function(){if(!this._minimumSizeChanging){this._minimumSizeChanging=!0;var e=this._calculateLocalMinimumWidth();(null===this.localMinimumWidthProperty.value||null===e||Math.abs(this.localMinimumWidthProperty.value-e)>1e-9)&&(this.localMinimumWidthProperty.value=e),this._minimumSizeChanging=!1}}},{key:"_calculateMinimumWidth",value:function(){return this.matrix.isAligned()&&null!==this.localMinimumWidth?Math.abs(this.transform.transformDeltaX(this.localMinimumWidth)):null}},{key:"_updateMinimumWidth",value:function(){if(!this._minimumSizeChanging){this._minimumSizeChanging=!0;var e=this._calculateMinimumWidth();(null===this.minimumWidthProperty.value||null===e||Math.abs(this.minimumWidthProperty.value-e)>1e-9)&&(this.minimumWidthProperty.value=e),this._minimumSizeChanging=!1}}}]),n}(e));if(e.prototype._mutatorKeys){var n=e.prototype._mutatorKeys,i=al,r=n.indexOf(Yo[0]);t.prototype._mutatorKeys=[].concat(_toConsumableArray(n.slice(0,r)),_toConsumableArray(i),_toConsumableArray(n.slice(r)))}return t})),ol=function(e){return e.widthSizable},ll=function(e){return e.extendsWidthSizable};Cr.register("WidthSizable",sl);var ul=sl,cl=["preferredHeight","minimumHeight","localPreferredHeight","localMinimumHeight","heightSizable"],hl=rl((function(e){var t=Ol("HeightSizable",cl,function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"preferredHeightProperty",new st(null)),_defineProperty(_assertThisInitialized(e),"minimumHeightProperty",new st(null)),_defineProperty(_assertThisInitialized(e),"localPreferredHeightProperty",new st(null)),_defineProperty(_assertThisInitialized(e),"localMinimumHeightProperty",new st(null)),_defineProperty(_assertThisInitialized(e),"isHeightResizableProperty",new st(!0)),_defineProperty(_assertThisInitialized(e),"_preferredSizeChanging",!1),_defineProperty(_assertThisInitialized(e),"_minimumSizeChanging",!1),e._updatePreferredHeightListener=e._updatePreferredHeight.bind(_assertThisInitialized(e)),e._updateLocalPreferredHeightListener=e._updateLocalPreferredHeight.bind(_assertThisInitialized(e)),e._updateMinimumHeightListener=e._updateMinimumHeight.bind(_assertThisInitialized(e)),e._updateLocalMinimumHeightListener=e._updateLocalMinimumHeight.bind(_assertThisInitialized(e)),e.preferredHeightProperty.lazyLink(e._updateLocalPreferredHeightListener),e.localPreferredHeightProperty.lazyLink(e._updatePreferredHeightListener),e.minimumHeightProperty.lazyLink(e._updateLocalMinimumHeightListener),e.localMinimumHeightProperty.lazyLink(e._updateMinimumHeightListener),e.transformEmitter.addListener(e._updateLocalPreferredHeightListener),e.transformEmitter.addListener(e._updateMinimumHeightListener),e}return _createClass(n,[{key:"preferredHeight",get:function(){return this.preferredHeightProperty.value},set:function(e){this.preferredHeightProperty.value=e}},{key:"localPreferredHeight",get:function(){return this.localPreferredHeightProperty.value},set:function(e){this.localPreferredHeightProperty.value=e}},{key:"minimumHeight",get:function(){return this.minimumHeightProperty.value},set:function(e){this.minimumHeightProperty.value=e}},{key:"localMinimumHeight",get:function(){return this.localMinimumHeightProperty.value},set:function(e){this.localMinimumHeightProperty.value=e}},{key:"heightSizable",get:function(){return this.isHeightResizableProperty.value},set:function(e){this.isHeightResizableProperty.value=e}},{key:"extendsHeightSizable",get:function(){return!0}},{key:"validateLocalPreferredHeight",value:function(){}},{key:"_calculateLocalPreferredHeight",value:function(){return this.matrix.isAligned()&&null!==this.preferredHeight?Math.abs(this.transform.inverseDeltaY(this.preferredHeight)):null}},{key:"_updateLocalPreferredHeight",value:function(){if(!this._preferredSizeChanging){this._preferredSizeChanging=!0;var e=this._calculateLocalPreferredHeight();(null===this.localPreferredHeightProperty.value||null===e||Math.abs(this.localPreferredHeightProperty.value-e)>1e-9)&&(this.localPreferredHeightProperty.value=e),this._preferredSizeChanging=!1}}},{key:"_calculatePreferredHeight",value:function(){return this.matrix.isAligned()&&null!==this.localPreferredHeight?Math.abs(this.transform.transformDeltaY(this.localPreferredHeight)):null}},{key:"_updatePreferredHeight",value:function(){if(!this._preferredSizeChanging){this._preferredSizeChanging=!0;var e=this._calculatePreferredHeight();(null===this.preferredHeightProperty.value||null===e||Math.abs(this.preferredHeightProperty.value-e)>1e-9)&&(this.preferredHeightProperty.value=e),this._preferredSizeChanging=!1}}},{key:"_calculateLocalMinimumHeight",value:function(){return this.matrix.isAligned()&&null!==this.minimumHeight?Math.abs(this.transform.inverseDeltaY(this.minimumHeight)):null}},{key:"_updateLocalMinimumHeight",value:function(){if(!this._minimumSizeChanging){this._minimumSizeChanging=!0;var e=this._calculateLocalMinimumHeight();(null===this.localMinimumHeightProperty.value||null===e||Math.abs(this.localMinimumHeightProperty.value-e)>1e-9)&&(this.localMinimumHeightProperty.value=e),this._minimumSizeChanging=!1}}},{key:"_calculateMinimumHeight",value:function(){return this.matrix.isAligned()&&null!==this.localMinimumHeight?Math.abs(this.transform.transformDeltaY(this.localMinimumHeight)):null}},{key:"_updateMinimumHeight",value:function(){if(!this._minimumSizeChanging){this._minimumSizeChanging=!0;var e=this._calculateMinimumHeight();(null===this.minimumHeightProperty.value||null===e||Math.abs(this.minimumHeightProperty.value-e)>1e-9)&&(this.minimumHeightProperty.value=e),this._minimumSizeChanging=!1}}}]),n}(e));if(e.prototype._mutatorKeys){var n=e.prototype._mutatorKeys,i=cl,r=n.indexOf(Yo[0]);t.prototype._mutatorKeys=[].concat(_toConsumableArray(n.slice(0,r)),_toConsumableArray(i),_toConsumableArray(n.slice(r)))}return t})),dl=function(e){return e.heightSizable},pl=function(e){return e.extendsHeightSizable};Cr.register("HeightSizable",hl);var fl=hl,ml=["preferredSize","minimumSize","localPreferredSize","localMinimumSize","sizable"],gl=["preferredSize","minimumSize","localPreferredSize","localMinimumSize","sizable"].concat(al,cl),yl=rl((function(e){var t=ul(fl(e)),n=Ol("Sizable",ml,function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).preferredWidthProperty.lazyLink(e._updateLocalPreferredHeightListener),e.preferredHeightProperty.lazyLink(e._updateLocalPreferredWidthListener),e.localPreferredWidthProperty.lazyLink(e._updatePreferredHeightListener),e.localPreferredHeightProperty.lazyLink(e._updatePreferredWidthListener),e.minimumWidthProperty.lazyLink(e._updateLocalMinimumHeightListener),e.minimumHeightProperty.lazyLink(e._updateLocalMinimumWidthListener),e.localMinimumWidthProperty.lazyLink(e._updateMinimumHeightListener),e.localMinimumHeightProperty.lazyLink(e._updateMinimumWidthListener),e}return _createClass(n,[{key:"preferredSize",get:function(){return null===this.preferredWidth||null===this.preferredHeight?null:new ms(this.preferredWidth,this.preferredHeight)},set:function(e){this.preferredWidth=null===e?null:e.width,this.preferredHeight=null===e?null:e.height}},{key:"localPreferredSize",get:function(){return null===this.localPreferredWidth||null===this.localPreferredHeight?null:new ms(this.localPreferredWidth,this.localPreferredHeight)},set:function(e){this.localPreferredWidth=null===e?null:e.width,this.localPreferredHeight=null===e?null:e.height}},{key:"minimumSize",get:function(){return null===this.minimumWidth||null===this.minimumHeight?null:new ms(this.minimumWidth,this.minimumHeight)},set:function(e){this.minimumWidth=null===e?null:e.width,this.minimumHeight=null===e?null:e.height}},{key:"localMinimumSize",get:function(){return null===this.localMinimumWidth||null===this.localMinimumHeight?null:new ms(this.localMinimumWidth,this.localMinimumHeight)},set:function(e){this.localMinimumWidth=null===e?null:e.width,this.localMinimumHeight=null===e?null:e.height}},{key:"sizable",get:function(){return this.widthSizable},set:function(e){this.widthSizable=e,this.heightSizable=e}},{key:"extendsSizable",get:function(){return!0}},{key:"validateLocalPreferredSize",value:function(){0}},{key:"mutate",value:function(e){return H(e,["preferredSize"],["preferredWidth","preferredHeight"]),H(e,["localPreferredSize"],["localPreferredWidth","localPreferredHeight"]),H(e,["minimumSize"],["minimumWidth","minimumHeight"]),H(e,["localMinimumSize"],["localMinimumWidth","localMinimumHeight"]),H(e,["sizable"],["widthSizable","heightSizable"]),_get(_getPrototypeOf(n.prototype),"mutate",this).call(this,e)}},{key:"_calculateLocalPreferredWidth",value:function(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.preferredWidth)return Math.abs(this.transform.inverseDeltaX(this.preferredWidth))}else if(null!==this.preferredHeight)return Math.abs(this.transform.getInverse().m01()*this.preferredHeight);return null}},{key:"_calculateLocalPreferredHeight",value:function(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.preferredHeight)return Math.abs(this.transform.inverseDeltaY(this.preferredHeight))}else if(null!==this.preferredWidth)return Math.abs(this.transform.getInverse().m10()*this.preferredWidth);return null}},{key:"_calculatePreferredWidth",value:function(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.localPreferredWidth)return Math.abs(this.transform.transformDeltaX(this.localPreferredWidth))}else if(null!==this.localPreferredHeight)return Math.abs(this.transform.matrix.m01()*this.localPreferredHeight);return null}},{key:"_calculatePreferredHeight",value:function(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.localPreferredHeight)return Math.abs(this.transform.transformDeltaY(this.localPreferredHeight))}else if(null!==this.localPreferredWidth)return Math.abs(this.transform.matrix.m10()*this.localPreferredWidth);return null}},{key:"_calculateLocalMinimumWidth",value:function(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.minimumWidth)return Math.abs(this.transform.inverseDeltaX(this.minimumWidth))}else if(null!==this.minimumHeight)return Math.abs(this.transform.getInverse().m01()*this.minimumHeight);return null}},{key:"_calculateLocalMinimumHeight",value:function(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.minimumHeight)return Math.abs(this.transform.inverseDeltaY(this.minimumHeight))}else if(null!==this.minimumWidth)return Math.abs(this.transform.getInverse().m10()*this.minimumWidth);return null}},{key:"_calculateMinimumWidth",value:function(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.localMinimumWidth)return Math.abs(this.transform.transformDeltaX(this.localMinimumWidth))}else if(null!==this.localMinimumHeight)return Math.abs(this.transform.matrix.m01()*this.localMinimumHeight);return null}},{key:"_calculateMinimumHeight",value:function(){if(this.matrix.isAxisAligned())if(this.matrix.isAligned()){if(null!==this.localMinimumHeight)return Math.abs(this.transform.transformDeltaY(this.localMinimumHeight))}else if(null!==this.localMinimumWidth)return Math.abs(this.transform.matrix.m10()*this.localMinimumWidth);return null}}]),n}(t));if(t.prototype._mutatorKeys){var i=t.prototype._mutatorKeys,r=ml,a=i.indexOf(Yo[0]);n.prototype._mutatorKeys=[].concat(_toConsumableArray(i.slice(0,a)),_toConsumableArray(r),_toConsumableArray(i.slice(a)))}return n}));Cr.register("Sizable",yl);var vl=yl,Al=Gs.PDOM_UNIQUE_ID_SEPARATOR,bl=function(){function e(t){if(_classCallCheck(this,e),t instanceof e){var n=t;return this.nodes=n.nodes.slice(0),this.length=n.length,this.uniqueId=n.uniqueId,void(this.indices=n.indices.slice(0))}if(this.nodes=[],this.length=0,this.uniqueId="",this.indices=[],t)if(t instanceof jo){var i=t;this.addDescendant(i)}else for(var r=t.length,a=0;a<r;a++)this.addDescendant(t[a])}return _createClass(e,[{key:"copy",value:function(){return new e(this)}},{key:"isPainted",value:function(){return this.lastNode().isPainted()}},{key:"isValid",value:function(){this.reindex();for(var e=this.indices.length,t=0;t<e;t++)if(this.indices[t]<0)return!1;return!0}},{key:"isVisible",value:function(){for(var e=this.nodes.length;e--;)if(!this.nodes[e].isVisible())return!1;return!0}},{key:"isPDOMVisible",value:function(){for(var e=this.nodes.length;e--;)if(!this.nodes[e].isVisible()||!this.nodes[e].isPDOMVisible())return!1;return!0}},{key:"getOpacity",value:function(){for(var e=1,t=this.nodes.length;t--;)e*=this.nodes[t].getOpacity();return e}},{key:"isPickable",value:function(){return!_.some(this.nodes,(function(e){return!1===e.pickable||!e.visible}))&&!!_.some(this.nodes,(function(e){return e._inputListeners.length>0||!0===e.pickableProperty.value}))}},{key:"get",value:function(e){return e>=0?this.nodes[e]:this.nodes[this.nodes.length+e]}},{key:"slice",value:function(t,n){return new e(this.nodes.slice(t,n))}},{key:"subtrailTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.slice(0,_.indexOf(this.nodes,e)+(t?0:1))}},{key:"isEmpty",value:function(){return 0===this.nodes.length}},{key:"getMatrix",value:function(){for(var e=oi.identity(),t=this.nodes,n=t.length,i=0;i<n;i++)e.multiplyMatrix(t[i].getMatrix());return e}},{key:"getAncestorMatrix",value:function(){for(var e=oi.identity(),t=this.nodes,n=t.length,i=1;i<n;i++)e.multiplyMatrix(t[i].getMatrix());return e}},{key:"getParentMatrix",value:function(){for(var e=oi.identity(),t=this.nodes,n=t.length,i=0;i<n-1;i++)e.multiplyMatrix(t[i].getMatrix());return e}},{key:"getTransform",value:function(){return new _i(this.getMatrix())}},{key:"getParentTransform",value:function(){return new _i(this.getParentMatrix())}},{key:"addAncestor",value:function(e,t){if(this.nodes.length){var n=this.nodes[0];this.indices.unshift(void 0===t?_.indexOf(e._children,n):t)}return this.nodes.unshift(e),this.length++,this.uniqueId=this.uniqueId?e.id+Al+this.uniqueId:"".concat(e.id),this}},{key:"removeAncestor",value:function(){return this.nodes.shift(),this.indices.length&&this.indices.shift(),this.length--,this.updateUniqueId(),this}},{key:"addDescendant",value:function(e,t){if(this.nodes.length){var n=this.lastNode();this.indices.push(void 0===t?_.indexOf(n._children,e):t)}return this.nodes.push(e),this.length++,this.uniqueId=this.uniqueId?this.uniqueId+Al+e.id:"".concat(e.id),this}},{key:"removeDescendant",value:function(){return this.nodes.pop(),this.indices.length&&this.indices.pop(),this.length--,this.updateUniqueId(),this}},{key:"addDescendantTrail",value:function(e){var t=e.length;t&&this.addDescendant(e.nodes[0]);for(var n=1;n<t;n++)this.addDescendant(e.nodes[n],this.indices[n-1])}},{key:"removeDescendantTrail",value:function(e){for(var t=e.length-1;t>=0;t--)this.removeDescendant()}},{key:"reindex",value:function(){for(var e=this.length,t=1;t<e;t++){var n=this.indices[t-1],i=this.nodes[t-1];i._children[n]!==this.nodes[t]&&(this.indices[t-1]=_.indexOf(i._children,this.nodes[t]))}}},{key:"setImmutable",value:function(){return this}},{key:"setMutable",value:function(){return this}},{key:"areIndicesValid",value:function(){for(var e=1;e<this.length;e++){var t=this.indices[e-1];if(this.nodes[e-1]._children[t]!==this.nodes[e])return!1}return!0}},{key:"equals",value:function(e){if(this.length!==e.length)return!1;for(var t=0;t<this.nodes.length;t++)if(this.nodes[t]!==e.nodes[t])return!1;return!0}},{key:"upToNode",value:function(e){_.indexOf(this.nodes,e);return this.slice(0,_.indexOf(this.nodes,e)+1)}},{key:"isExtensionOf",value:function(e,t){if(this.length<=e.length-(t?1:0))return!1;for(var n=0;n<e.nodes.length;n++)if(this.nodes[n]!==e.nodes[n])return!1;return!0}},{key:"containsNode",value:function(e){return _.includes(this.nodes,e)}},{key:"getTransformTo",value:function(e){return new _i(this.getMatrixTo(e))}},{key:"getMatrixTo",value:function(e){this.reindex(),e.reindex();var t,n=this.getBranchIndexTo(e),i=oi.IDENTITY;for(t=this.length-1;t>=n;t--)i=this.nodes[t].getMatrix().timesMatrix(i);for(t=n;t<e.length;t++)i=e.nodes[t].getTransform().getInverse().timesMatrix(i);return i}},{key:"getBranchIndexTo",value:function(e){var t,n=Math.min(this.length,e.length);for(t=0;t<n&&this.nodes[t]===e.nodes[t];t++);return t}},{key:"getLastInputEnabledIndex",value:function(){for(var e=-1,t=0;t<this.length&&this.nodes[t].inputEnabled;t++)e=t;return e}},{key:"getCursorCheckIndex",value:function(){return this.getLastInputEnabledIndex()}},{key:"nodeFromTop",value:function(e){return this.nodes[this.length-1-e]}},{key:"lastNode",value:function(){return this.nodeFromTop(0)}},{key:"rootNode",value:function(){return this.nodes[0]}},{key:"previous",value:function(){if(this.nodes.length<=1)return null;var t=this.nodeFromTop(0),n=this.nodeFromTop(1),i=_.indexOf(n._children,t),r=this.nodes.slice(0,this.nodes.length-1);if(0===i)return new e(r);for(r.push(n._children[i-1]);0!==r[r.length-1]._children.length;){var a=r[r.length-1];r.push(a._children[a._children.length-1])}return new e(r)}},{key:"previousPainted",value:function(){for(var e=this.previous();e&&!e.isPainted();)e=e.previous();return e}},{key:"next",value:function(){var t=this.nodes.slice(0),n=this.nodeFromTop(0);if(n._children.length>0)return t.push(n._children[0]),new e(t);for(var i=this.nodes.length-1;i>0;){var r=this.nodes[i],a=this.nodes[i-1];t.pop();var s=_.indexOf(a._children,r);if(s!==a._children.length-1)return t.push(a._children[s+1]),new e(t);i--}return null}},{key:"nextPainted",value:function(){for(var e=this.next();e&&!e.isPainted();)e=e.next();return e}},{key:"eachTrailUnder",value:function(e){new Sl(this,!0).eachTrailBetween(new Sl(this,!1),e)}},{key:"compare",value:function(e){for(var t=Math.min(this.nodes.length,e.nodes.length),n=0;n<t;n++)if(this.nodes[n]!==e.nodes[n])return this.nodes[n-1].children.indexOf(this.nodes[n])<e.nodes[n-1].children.indexOf(e.nodes[n])?-1:1;return this.nodes.length<e.nodes.length?-1:this.nodes.length>e.nodes.length?1:0}},{key:"isBefore",value:function(e){return-1===this.compare(e)}},{key:"isAfter",value:function(e){return 1===this.compare(e)}},{key:"localToGlobalPoint",value:function(e){return this.getMatrix().timesVector2(e)}},{key:"localToGlobalBounds",value:function(e){return e.transformed(this.getMatrix())}},{key:"globalToLocalPoint",value:function(e){return this.getTransform().inversePosition2(e)}},{key:"globalToLocalBounds",value:function(e){return this.getTransform().inverseBounds2(e)}},{key:"parentToGlobalPoint",value:function(e){return this.getParentMatrix().timesVector2(e)}},{key:"parentToGlobalBounds",value:function(e){return e.transformed(this.getParentMatrix())}},{key:"globalToParentPoint",value:function(e){return this.getParentTransform().inversePosition2(e)}},{key:"globalToParentBounds",value:function(e){return this.getParentTransform().inverseBounds2(e)}},{key:"updateUniqueId",value:function(){var e="",t=this.nodes.length;t>0&&(e+=this.nodes[0]._id);for(var n=1;n<t;n++)e+=Al+this.nodes[n]._id;this.uniqueId=e}},{key:"getUniqueId",value:function(){return this.uniqueId}},{key:"toString",value:function(){return this.reindex(),this.length?"[Trail ".concat(this.indices.join(".")," ").concat(this.getUniqueId(),"]"):"Empty Trail"}},{key:"toPathString",value:function(){return _.map(this.nodes,(function(e){var t=e.constructor.name;return"Node"===t&&(t="."),t})).join("/")}},{key:"toDebugString",value:function(){return"".concat(this.toString()," ").concat(this.toPathString())}}],[{key:"eachPaintedTrailBetween",value:function(t,n,i,r,a){e.eachTrailBetween(t,n,(function(e){return!!e.isPainted()&&i(e)}),r,a)}},{key:"eachTrailBetween",value:function(t,n,i,r,a){var s=new Sl(t?t.copy():new e(a),!0),o=n?new Sl(n.copy(),!0):new Sl(new e(a),!1);r&&(s.nestedForwards(),o.nestedBackwards(),1===s.compareNested(o))||s.depthFirstUntil(o,(function(e){return!!e.isBefore&&i(e.trail)}),!1)}},{key:"branchIndex",value:function(e,t){var n,i=Math.min(e.length,t.length);for(n=0;n<i&&e.nodes[n]===t.nodes[n];n++);return n}},{key:"sharedTrail",value:function(t,n){return t.slice(0,e.branchIndex(t,n))}},{key:"appendAncestorTrailsWithPredicate",value:function(t,n,i){var r=n.rootNode();i(r)&&t.push(n.copy());for(var a=r._parents.length,s=0;s<a;s++){var o=r._parents[s];n.addAncestor(o),e.appendAncestorTrailsWithPredicate(t,n,i),n.removeAncestor()}}},{key:"appendDescendantTrailsWithPredicate",value:function(t,n,i){var r=n.lastNode();i(r)&&t.push(n.copy());for(var a=r._children.length,s=0;s<a;s++){var o=r._children[s];n.addDescendant(o,s),e.appendDescendantTrailsWithPredicate(t,n,i),n.removeDescendant()}}},{key:"spannedSubtrees",value:function(e,t){}},{key:"fromUniqueId",value:function(t,n){for(var i=n.split(Al).map((function(e){return Number(e)})),r=t,a=(i.shift(),[r]);i.length>0;)for(var s=i.shift(),o=(r.pdomOrder||[]).concat(r.children),l=0;l<o.length;l++)if(null!==o[l]&&o[l].id===s){var u=o[l];a.push(u),r=u;break}return new e(a)}}]),e}();Cr.register("Trail",bl);var Sl=function(){function e(t,n){_classCallCheck(this,e),this.trail=t,this.setBefore(n)}return _createClass(e,[{key:"isActive",value:function(){return!!this.trail}},{key:"copy",value:function(){return new e(this.trail.copy(),this.isBefore)}},{key:"setBefore",value:function(e){this.isBefore=e,this.isAfter=!e}},{key:"getRenderSwappedPointer",value:function(){var t=this.isBefore?this.trail.previous():this.trail.next();return null===t?null:new e(t,!this.isBefore)}},{key:"getRenderBeforePointer",value:function(){return this.isBefore?this:this.getRenderSwappedPointer()}},{key:"getRenderAfterPointer",value:function(){return this.isAfter?this:this.getRenderSwappedPointer()}},{key:"compareRender",value:function(e){var t=this.getRenderBeforePointer(),n=e.getRenderBeforePointer();return null!==t&&null!==n?t.trail.compare(n.trail):t===n?0:null===t?1:-1}},{key:"compareNested",value:function(e){var t=e,n=this.trail.compare(t.trail);return 0===n?this.isBefore===e.isBefore?0:this.isBefore?-1:1:this.trail.isExtensionOf(t.trail)?e.isBefore?1:-1:t.trail.isExtensionOf(this.trail)?this.isBefore?-1:1:n}},{key:"equalsRender",value:function(e){return 0===this.compareRender(e)}},{key:"equalsNested",value:function(e){return 0===this.compareNested(e)}},{key:"hasTrail",value:function(){return!!this.trail}},{key:"nestedForwards",value:function(){if(this.isBefore){var e=this.trail.lastNode()._children;e.length>0?this.trail.addDescendant(e[0],0):this.setBefore(!1)}else{if(0===this.trail.indices.length)return this.trail=null,null;var t=this.trail.indices[this.trail.indices.length-1];this.trail.removeDescendant();var n=this.trail.lastNode()._children;n.length>t+1&&(this.trail.addDescendant(n[t+1],t+1),this.setBefore(!0))}return this}},{key:"nestedBackwards",value:function(){if(this.isBefore){if(0===this.trail.indices.length)return this.trail=null,null;var e=this.trail.indices[this.trail.indices.length-1];this.trail.removeDescendant(),e-1>=0&&(this.trail.addDescendant(this.trail.lastNode()._children[e-1],e-1),this.setBefore(!1))}else if(this.trail.lastNode()._children.length>0){var t=this.trail.lastNode()._children;this.trail.addDescendant(t[t.length-1],t.length-1)}else this.setBefore(!0);return this}},{key:"eachNodeBetween",value:function(e,t){this.eachTrailBetween(e,(function(e){return t(e.lastNode())}))}},{key:"eachTrailBetween",value:function(e,t){this.isBefore&&t(this.trail),this.depthFirstUntil(e,(function(e){return!!e.isBefore&&t(e.trail)}),!0)}},{key:"depthFirstUntil",value:function(e,t,n){var i=e;this.trail.reindex(),i.trail.reindex();var r=this.copy();r.trail.setMutable();for(var a=!0;!r.equalsNested(e);){var s=!1;if(a?(n||(s=t(r)),a=!1):s=t(r),s&&r.isBefore){if(r.setBefore(!1),1===r.compareNested(e))break}else r.nestedForwards()}n||t(r)}},{key:"toString",value:function(){return"[".concat(this.isBefore?"before":"after"," ").concat(this.trail.toString().slice(1))}}],[{key:"compareNested",value:function(e,t,n,i){var r=e.compare(n);return 0===r?t===i?0:t?-1:1:e.isExtensionOf(n)?i?1:-1:n.isExtensionOf(e)?t?-1:1:r}}]),e}();Cr.register("TrailPointer",Sl);var El=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),_defineProperty(_assertThisInitialized(r=t.call(this,[])),"listenedNodeSet",new Set),r.rootNode=e,r.leafNode=i,r._trailUpdateListener=r.update.bind(_assertThisInitialized(r)),r.update(),r}return _createClass(n,[{key:"update",value:function(){var e=this,t=[],n=new Set,i=new bl(this.leafNode),r=this.rootNode;!function e(){var a=i.rootNode();n.add(a),a===r&&t.push(i.copy()),a.parents.forEach((function(t){i.addAncestor(t),e(),i.removeAncestor()}))}(),n.forEach((function(t){e.listenedNodeSet.has(t)||e.addNodeListener(t)})),this.listenedNodeSet.forEach((function(t){n.has(t)||e.removeNodeListener(t)}));var a=this.value,s=a.length===t.length;if(s)for(var o=0;o<t.length;o++)if(!a[o].equals(t[o])){s=!1;break}s||(this.value=t)}},{key:"addNodeListener",value:function(e){this.listenedNodeSet.add(e),e.parentAddedEmitter.addListener(this._trailUpdateListener),e.parentRemovedEmitter.addListener(this._trailUpdateListener)}},{key:"removeNodeListener",value:function(e){this.listenedNodeSet.delete(e),e.parentAddedEmitter.removeListener(this._trailUpdateListener),e.parentRemovedEmitter.removeListener(this._trailUpdateListener)}},{key:"dispose",value:function(){var e=this;this.listenedNodeSet.forEach((function(t){return e.removeNodeListener(t)})),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(st);Cr.register("TrailsBetweenProperty",El);var kl=function(e,t){0};y.register("assertHasProperties",kl);var Vl=kl,wl=la.safari5,_l=["fill","fillPickable","stroke","strokePickable","lineWidth","lineCap","lineJoin","miterLimit","lineDash","lineDashOffset","cachedPaints"],Cl={fill:null,fillPickable:!0,stroke:null,strokePickable:!1,lineWidth:Nn.lineWidth,lineCap:Nn.lineCap,lineJoin:Nn.lineJoin,lineDashOffset:Nn.lineDashOffset,miterLimit:Nn.miterLimit},xl=["fill","stroke","lineWidth","lineOptions","cachedPaints"],Pl=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),Vl(_assertThisInitialized(e),["_drawables"]),e._fill=Cl.fill,e._fillPickable=Cl.fillPickable,e._stroke=Cl.stroke,e._strokePickable=Cl.strokePickable,e._cachedPaints=[],e._lineDrawingStyles=new qn,e}return _createClass(n,[{key:"setFill",value:function(e){return this._fill!==e&&(this._fill=e,this.invalidateFill()),this}},{key:"fill",get:function(){return this.getFill()},set:function(e){this.setFill(e)}},{key:"getFill",value:function(){return this._fill}},{key:"hasFill",value:function(){return null!==this.getFillValue()}},{key:"getFillValue",value:function(){var e=this.getFill();return e instanceof ht?e.get():e}},{key:"fillValue",get:function(){return this.getFillValue()}},{key:"setStroke",value:function(e){this._stroke!==e&&(this._stroke=e,this.invalidateStroke());return this}},{key:"stroke",get:function(){return this.getStroke()},set:function(e){this.setStroke(e)}},{key:"getStroke",value:function(){return this._stroke}},{key:"hasStroke",value:function(){return null!==this.getStrokeValue()}},{key:"hasPaintableStroke",value:function(){return this.hasStroke()&&this.getLineWidth()>0}},{key:"getStrokeValue",value:function(){var e=this.getStroke();return e instanceof ht?e.get():e}},{key:"strokeValue",get:function(){return this.getStrokeValue()}},{key:"setFillPickable",value:function(e){return this._fillPickable!==e&&(this._fillPickable=e,this.invalidateFill()),this}},{key:"fillPickable",get:function(){return this.isFillPickable()},set:function(e){this.setFillPickable(e)}},{key:"isFillPickable",value:function(){return this._fillPickable}},{key:"setStrokePickable",value:function(e){return this._strokePickable!==e&&(this._strokePickable=e,this.invalidateStroke()),this}},{key:"strokePickable",get:function(){return this.isStrokePickable()},set:function(e){this.setStrokePickable(e)}},{key:"isStrokePickable",value:function(){return this._strokePickable}},{key:"setLineWidth",value:function(e){if(this.getLineWidth()!==e){this._lineDrawingStyles.lineWidth=e,this.invalidateStroke();for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyLineWidth()}return this}},{key:"lineWidth",get:function(){return this.getLineWidth()},set:function(e){this.setLineWidth(e)}},{key:"getLineWidth",value:function(){return this._lineDrawingStyles.lineWidth}},{key:"setLineCap",value:function(e){if(this._lineDrawingStyles.lineCap!==e){this._lineDrawingStyles.lineCap=e,this.invalidateStroke();for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyLineOptions()}return this}},{key:"lineCap",get:function(){return this.getLineCap()},set:function(e){this.setLineCap(e)}},{key:"getLineCap",value:function(){return this._lineDrawingStyles.lineCap}},{key:"setLineJoin",value:function(e){if(this._lineDrawingStyles.lineJoin!==e){this._lineDrawingStyles.lineJoin=e,this.invalidateStroke();for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyLineOptions()}return this}},{key:"lineJoin",get:function(){return this.getLineJoin()},set:function(e){this.setLineJoin(e)}},{key:"getLineJoin",value:function(){return this._lineDrawingStyles.lineJoin}},{key:"setMiterLimit",value:function(e){if(this._lineDrawingStyles.miterLimit!==e){this._lineDrawingStyles.miterLimit=e,this.invalidateStroke();for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyLineOptions()}return this}},{key:"miterLimit",get:function(){return this.getMiterLimit()},set:function(e){this.setMiterLimit(e)}},{key:"getMiterLimit",value:function(){return this._lineDrawingStyles.miterLimit}},{key:"setLineDash",value:function(e){if(this._lineDrawingStyles.lineDash!==e){this._lineDrawingStyles.lineDash=e||[],this.invalidateStroke();for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyLineOptions()}return this}},{key:"lineDash",get:function(){return this.getLineDash()},set:function(e){this.setLineDash(e)}},{key:"getLineDash",value:function(){return this._lineDrawingStyles.lineDash}},{key:"hasLineDash",value:function(){return!!this._lineDrawingStyles.lineDash.length}},{key:"setLineDashOffset",value:function(e){if(this._lineDrawingStyles.lineDashOffset!==e){this._lineDrawingStyles.lineDashOffset=e,this.invalidateStroke();for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyLineOptions()}return this}},{key:"lineDashOffset",get:function(){return this.getLineDashOffset()},set:function(e){this.setLineDashOffset(e)}},{key:"getLineDashOffset",value:function(){return this._lineDrawingStyles.lineDashOffset}},{key:"setLineStyles",value:function(e){return this._lineDrawingStyles=e,this.invalidateStroke(),this}},{key:"lineStyles",get:function(){return this.getLineStyles()},set:function(e){this.setLineStyles(e)}},{key:"getLineStyles",value:function(){return this._lineDrawingStyles}},{key:"setCachedPaints",value:function(e){this._cachedPaints=e.filter((function(e){return e instanceof Xs}));for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyCachedPaints();return this}},{key:"cachedPaints",get:function(){return this.getCachedPaints()},set:function(e){this.setCachedPaints(e)}},{key:"getCachedPaints",value:function(){return this._cachedPaints}},{key:"addCachedPaint",value:function(e){if(e instanceof Xs){this._cachedPaints.push(e);for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyCachedPaints()}}},{key:"removeCachedPaint",value:function(e){if(e instanceof Xs){J(this._cachedPaints,e);for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyCachedPaints()}}},{key:"beforeCanvasFill",value:function(e){var t=this.getFillValue();e.setFillStyle(t),t.transformMatrix&&(e.context.save(),t.transformMatrix.canvasAppendTransform(e.context))}},{key:"afterCanvasFill",value:function(e){this.getFillValue().transformMatrix&&e.context.restore()}},{key:"beforeCanvasStroke",value:function(e){var t=this.getStrokeValue();if(e.setStrokeStyle(this._stroke),e.setLineCap(this.getLineCap()),e.setLineJoin(this.getLineJoin()),t.transformMatrix){var n=t.transformMatrix.getScaleVector(),i=1/n.x;e.context.save(),t.transformMatrix.canvasAppendTransform(e.context),e.setLineWidth(this.getLineWidth()*i),e.setMiterLimit(this.getMiterLimit()*i),e.setLineDash(this.getLineDash().map((function(e){return e*i}))),e.setLineDashOffset(this.getLineDashOffset()*i)}else e.setLineWidth(this.getLineWidth()),e.setMiterLimit(this.getMiterLimit()),e.setLineDash(this.getLineDash()),e.setLineDashOffset(this.getLineDashOffset())}},{key:"afterCanvasStroke",value:function(e){this.getStrokeValue().transformMatrix&&e.context.restore()}},{key:"getCSSFill",value:function(){var e=this.getFillValue();return e?e.toCSS?e.toCSS():e:"transparent"}},{key:"getSimpleCSSStroke",value:function(){var e=this.getStrokeValue();return e?e.toCSS?e.toCSS():e:"transparent"}},{key:"appendFillablePropString",value:function(e,t){return this._fill&&(t&&(t+=",\n"),"string"==typeof this.getFillValue()?t+="".concat(e,"fill: '").concat(this.getFillValue(),"'"):t+="".concat(e,"fill: ").concat(this.getFillValue())),t}},{key:"appendStrokablePropString",value:function(e,t){var n=this;function i(n,i,r){t&&(t+=",\n"),t+=r||"string"!=typeof i?"".concat(e+n,": ").concat(i):"".concat(e+n,": '").concat(i,"'")}if(this._stroke){var r=new qn,a=this.getStrokeValue();"string"==typeof a?i("stroke",a):i("stroke",a?a.toString():"null",!0),_.each(["lineWidth","lineCap","miterLimit","lineJoin","lineDashOffset"],(function(e){n[e]!==r[e]&&i(e,n[e])})),this.lineDash.length&&i("lineDash",JSON.stringify(this.lineDash),!0)}return t}},{key:"getFillRendererBitmask",value:function(){var e=0;return wl&&this._fill instanceof Qs||(e|=Zr.bitmaskSVG),e|=Zr.bitmaskCanvas,this.hasFill()&&(this._fill instanceof Zs||this._fill instanceof Qs)||(e|=Zr.bitmaskDOM,e|=Zr.bitmaskWebGL),e}},{key:"getStrokeRendererBitmask",value:function(){var e=0;return e|=Zr.bitmaskCanvas,e|=Zr.bitmaskSVG,this.hasStroke()||(e|=Zr.bitmaskDOM,e|=Zr.bitmaskWebGL),e}},{key:"invalidateFill",value:function(){this.invalidateSupportedRenderers();for(var e=this._drawables.length,t=0;t<e;t++)this._drawables[t].markDirtyFill()}},{key:"invalidateStroke",value:function(){this.invalidateSupportedRenderers();for(var e=this._drawables.length,t=0;t<e;t++)this._drawables[t].markDirtyStroke()}}]),n}(e)}));Cr.register("Paintable",Pl),Pl.DEFAULT_OPTIONS=Cl;var Tl=Math.log2||function(e){return Math.log(e)/Math.LN2},Ml={imageOpacity:1,initialWidth:0,initialHeight:0,mipmap:!1,mipmapBias:0,mipmapInitialLevel:4,mipmapMaxLevel:5,hitTestPixels:!1},Ll=null,Il=null,Rl=function(){return Ll||(Ll=document.createElement("canvas")),Ll},Dl=function e(t){return function(t){_inherits(i,t);var n=_createSuper(i);function i(){var e;_classCallCheck(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r)))._image=null,e._initialWidth=Ml.initialWidth,e._initialHeight=Ml.initialHeight,e._imageOpacity=Ml.imageOpacity,e._mipmap=Ml.mipmap,e._mipmapBias=Ml.mipmapBias,e._mipmapInitialLevel=Ml.mipmapInitialLevel,e._mipmapMaxLevel=Ml.mipmapMaxLevel,e._hitTestPixels=Ml.hitTestPixels,e._mipmapCanvases=[],e._mipmapURLs=[],e._mipmapData=null,e._imageLoadListener=e._onImageLoad.bind(_assertThisInitialized(e)),e._imageLoadListenerAttached=!1,e._hitTestImageData=null,e.mipmapEmitter=new d,e}return _createClass(i,[{key:"setImage",value:function(e){var t=this._image!==e;if(t&&"string"==typeof e&&this._image&&this._image instanceof HTMLImageElement&&e===this._image.src&&(t=!1),t&&e===this._mipmapData&&(t=!1),t){if(this._initialWidth=0,this._initialHeight=0,this._image&&this._imageLoadListenerAttached&&this._detachImageLoadListener(),this._mipmapData=null,"string"==typeof e){var n=e;(e=document.createElement("img")).src=n}else Array.isArray(e)&&(this._mipmapData=e,e=e[0].img,this._mipmapInitialLevel=this._mipmapMaxLevel=this._mipmapData.length,this._mipmap=!0);this._image=e,!(this._image instanceof HTMLImageElement)||this._image.width&&this._image.height||this._attachImageLoadListener(),this.invalidateImage()}return this}},{key:"image",get:function(){return this.getImage()},set:function(e){this.setImage(e)}},{key:"getImage",value:function(){return this._image}},{key:"invalidateImage",value:function(){this.invalidateMipmaps(),this._invalidateHitTestData()}},{key:"setImageWithSize",value:function(e,t,n){return this.setImage(e),this.setInitialWidth(t),this.setInitialHeight(n),this}},{key:"setImageOpacity",value:function(e){this._imageOpacity!==e&&(this._imageOpacity=e)}},{key:"imageOpacity",get:function(){return this.getImageOpacity()},set:function(e){this.setImageOpacity(e)}},{key:"getImageOpacity",value:function(){return this._imageOpacity}},{key:"setInitialWidth",value:function(e){return e!==this._initialWidth&&(this._initialWidth=e,this.invalidateImage()),this}},{key:"initialWidth",get:function(){return this.getInitialWidth()},set:function(e){this.setInitialWidth(e)}},{key:"getInitialWidth",value:function(){return this._initialWidth}},{key:"setInitialHeight",value:function(e){return e!==this._initialHeight&&(this._initialHeight=e,this.invalidateImage()),this}},{key:"initialHeight",get:function(){return this.getInitialHeight()},set:function(e){this.setInitialHeight(e)}},{key:"getInitialHeight",value:function(){return this._initialHeight}},{key:"setMipmap",value:function(e){return this._mipmap!==e&&(this._mipmap=e,this.invalidateMipmaps()),this}},{key:"mipmap",get:function(){return this.isMipmap()},set:function(e){this.setMipmap(e)}},{key:"isMipmap",value:function(){return this._mipmap}},{key:"setMipmapBias",value:function(e){return this._mipmapBias!==e&&(this._mipmapBias=e,this.invalidateMipmaps()),this}},{key:"mipmapBias",get:function(){return this.getMipmapBias()},set:function(e){this.setMipmapBias(e)}},{key:"getMipmapBias",value:function(){return this._mipmapBias}},{key:"setMipmapInitialLevel",value:function(e){return this._mipmapInitialLevel!==e&&(this._mipmapInitialLevel=e,this.invalidateMipmaps()),this}},{key:"mipmapInitialLevel",get:function(){return this.getMipmapInitialLevel()},set:function(e){this.setMipmapInitialLevel(e)}},{key:"getMipmapInitialLevel",value:function(){return this._mipmapInitialLevel}},{key:"setMipmapMaxLevel",value:function(e){return this._mipmapMaxLevel!==e&&(this._mipmapMaxLevel=e,this.invalidateMipmaps()),this}},{key:"mipmapMaxLevel",get:function(){return this.getMipmapMaxLevel()},set:function(e){this.setMipmapMaxLevel(e)}},{key:"getMipmapMaxLevel",value:function(){return this._mipmapMaxLevel}},{key:"setHitTestPixels",value:function(e){return this._hitTestPixels!==e&&(this._hitTestPixels=e,this._invalidateHitTestData()),this}},{key:"hitTestPixels",get:function(){return this.getHitTestPixels()},set:function(e){this.setHitTestPixels(e)}},{key:"getHitTestPixels",value:function(){return this._hitTestPixels}},{key:"_constructNextMipmap",value:function(){var e=this._mipmapCanvases.length,t=this._mipmapCanvases[e-1];if(t.width*t.height>2){var n=document.createElement("canvas");if(n.width=Math.ceil(t.width/2),n.height=Math.ceil(t.height/2),n.width>0&&n.height>0){var i=n.getContext("2d");i.scale(.5,.5),i.drawImage(t,0,0),this._mipmapCanvases.push(n),this._mipmapURLs.push(n.toDataURL())}}}},{key:"invalidateMipmaps",value:function(){if(Ui(this._mipmapCanvases),Ui(this._mipmapURLs),this._image&&this._mipmap)if(this._mipmapData)for(var e=0;e<this._mipmapData.length;e++){var t=this._mipmapData[e].url;this._mipmapURLs.push(t);var n=this._mipmapData[e].updateCanvas;n&&n(),this._mipmapCanvases.push(this._mipmapData[e].canvas)}else{var i=document.createElement("canvas");if(i.width=this.getImageWidth(),i.height=this.getImageHeight(),i.width&&i.height){i.getContext("2d").drawImage(this._image,0,0),this._mipmapCanvases.push(i),this._mipmapURLs.push(i.toDataURL());for(var r=0;++r<this._mipmapInitialLevel;)this._constructNextMipmap()}}this.mipmapEmitter.emit()}},{key:"getMipmapLevel",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e.getApproximateMatrixScale(t)*(window.devicePixelRatio||1);return this.getMipmapLevelFromScale(i,n)}},{key:"getMipmapLevelFromScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e>=1)return 0;var n=Tl(1/e);if((n=En.roundSymmetric(n+this._mipmapBias+t-.7))<0&&(n=0),n>this._mipmapMaxLevel&&(n=this._mipmapMaxLevel),this.mipmap&&!this._mipmapCanvases[n]){for(var i=this._mipmapCanvases.length-1;++i<=n;)this._constructNextMipmap();return Math.min(n,this._mipmapCanvases.length-1)}return n}},{key:"getMipmapCanvas",value:function(e){if(this._mipmapData){var t=this._mipmapData[e]&&this._mipmapData[e].updateCanvas;t&&t()}return this._mipmapCanvases[e]}},{key:"getMipmapURL",value:function(e){return this._mipmapURLs[e]}},{key:"hasMipmaps",value:function(){return this._mipmapCanvases.length>0}},{key:"_invalidateHitTestData",value:function(){this._hitTestPixels&&null!==this._image&&(this._hitTestImageData=e.getHitTestData(this._image,this.imageWidth,this.imageHeight))}},{key:"getImageWidth",value:function(){if(null===this._image)return 0;var e=this._mipmapData?this._mipmapData[0].width:("naturalWidth"in this._image?this._image.naturalWidth:0)||this._image.width;return 0===e?this._initialWidth:e}},{key:"imageWidth",get:function(){return this.getImageWidth()}},{key:"getImageHeight",value:function(){if(null===this._image)return 0;var e=this._mipmapData?this._mipmapData[0].height:("naturalHeight"in this._image?this._image.naturalHeight:0)||this._image.height;return 0===e?this._initialHeight:e}},{key:"imageHeight",get:function(){return this.getImageHeight()}},{key:"getImageURL",value:function(){return this._image.src}},{key:"_attachImageLoadListener",value:function(){this.isDisposed||(this._image.addEventListener("load",this._imageLoadListener),this._imageLoadListenerAttached=!0)}},{key:"_detachImageLoadListener",value:function(){this._image.removeEventListener("load",this._imageLoadListener),this._imageLoadListenerAttached=!1}},{key:"_onImageLoad",value:function(){this.invalidateImage(),this._detachImageLoadListener()}},{key:"dispose",value:function(){this._image&&this._imageLoadListenerAttached&&this._detachImageLoadListener(),_get(_getPrototypeOf(i.prototype),"dispose",this)&&_get(_getPrototypeOf(i.prototype),"dispose",this).call(this)}}]),i}(t)};Dl.getHitTestData=function(e,t,n){if(!("naturalWidth"in e&&e.naturalWidth||e.width)||!("naturalHeight"in e&&e.naturalHeight||e.height))return null;var i=Rl(),r=(Il||(Il=Rl().getContext("2d")),Il);return i.width=t,i.height=n,r.drawImage(e,0,0),r.getImageData(0,0,t,n)},Dl.testHitTestData=function(e,t,n,i){var r=4*(En.clamp(Math.floor(i.x/t*e.width),0,e.width-1)+En.clamp(Math.floor(i.y/n*e.height),0,e.height-1)*e.width)+3;return 0!==e.data[r]},Dl.hitTestDataToShape=function(e,t,n){for(var i=t/e.width,r=n/e.height,a=new Ni,s=!1,o=0,l=0;l<e.height;l++){for(var u=0;u<e.width;u++){var c=4*(u+l*e.width)+3;0!==e.data[c]?s||(s=!0,o=u):s&&(s=!1,a.rect(o*i,l*i,i*(u-o),r))}s&&(s=!1,a.rect(o*i,l*i,i*(e.width-o),r))}return a.getSimplifiedAreaShape()},Dl.createSVGImage=function(e,t,n){var i=document.createElementNS(ea,"image");return i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width","".concat(t,"px")),i.setAttribute("height","".concat(n,"px")),i.setAttributeNS(na,"xlink:href",e),i},Dl.createFastMipmapFromCanvas=function(e){var t=[],n=e.toDataURL(),i=new window.Image;i.src=n,t.push({img:i,url:n,width:e.width,height:e.height,canvas:e});for(var r=e;r.width>=2&&r.height>=2;){var a=document.createElement("canvas");a.width=Math.ceil(r.width/2),a.height=Math.ceil(r.height/2);var s=a.getContext("2d");s.setTransform(.5,0,0,.5,0,0),s.drawImage(r,0,0);var o={width:a.width,height:a.height,canvas:a,url:a.toDataURL(),img:new window.Image};o.img.src=o.url,r=a,t.push(o)}return t},Dl.getApproximateMatrixScale=function(e){return(Math.sqrt(e.m00()*e.m00()+e.m10()*e.m10())+Math.sqrt(e.m01()*e.m01()+e.m11()*e.m11()))/2},Dl.CANVAS_MIPMAP_BIAS_ADJUSTMENT=.5,Dl.DEFAULT_OPTIONS=Ml,Cr.register("Imageable",Dl);var Nl=Dl,ql=function(e,t,n){var i="_".concat(e,"PendingOptions"),r="_".concat(e,"IsConstructed");return function(e){_inherits(a,e);var n=_createSuper(a);function a(){var e;_classCallCheck(this,a);for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return(e=n.call.apply(n,[this].concat(s)))[r]=!0,e.mutate(e[i]),e[i]=void 0,e}return _createClass(a,[{key:"mutate",value:function(e){return e&&!this[r]&&(this[i]=k(this[i]||{},_.pick(e,t)),e=_.omit(e,t)),_get(_getPrototypeOf(a.prototype),"mutate",this).call(this,e)}}]),a}(n)};Cr.register("DelayedMutate",ql);var Ol=ql,Bl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({image:e},i);return(r=t.call(this))._imageBounds=null,r.mutate(a),r.invalidateSupportedRenderers(),r}return _createClass(n,[{key:"invalidateImage",value:function(){this._image?this.invalidateSelf(this._imageBounds||new jn(0,0,this.getImageWidth(),this.getImageHeight())):this.invalidateSelf(jn.NOTHING);for(var e=this._drawables.length,t=0;t<e;t++)this._drawables[t].markDirtyImage();_get(_getPrototypeOf(n.prototype),"invalidateImage",this).call(this),this.invalidateSupportedRenderers()}},{key:"invalidateSupportedRenderers",value:function(){var e=Zr.bitmaskCanvas;this.getImageWidth()<=ys.MAX_DIMENSION.width&&this.getImageHeight()<=ys.MAX_DIMENSION.height&&(e|=Zr.bitmaskWebGL),this._image instanceof HTMLCanvasElement||(e|=Zr.bitmaskSVG|Zr.bitmaskDOM),this.setRendererBitmask(e)}},{key:"setImageOpacity",value:function(e){var t=this._imageOpacity!==e;if(_get(_getPrototypeOf(n.prototype),"setImageOpacity",this).call(this,e),t)for(var i=this._drawables.length,r=0;r<i;r++)this._drawables[r].markDirtyImageOpacity()}},{key:"setImageBounds",value:function(e){this._imageBounds!==e&&(this._imageBounds=e,this.invalidateImage())}},{key:"imageBounds",get:function(){return this._imageBounds},set:function(e){this.setImageBounds(e)}},{key:"getImageBounds",value:function(){return this._imageBounds}},{key:"isPainted",value:function(){return!0}},{key:"canvasPaintSelf",value:function(e,t){Mm.prototype.paintCanvas(e,this,t)}},{key:"createDOMDrawable",value:function(e,t){return Im.createFromPool(e,t)}},{key:"createSVGDrawable",value:function(e,t){return Dm.createFromPool(e,t)}},{key:"createCanvasDrawable",value:function(e,t){return Mm.createFromPool(e,t)}},{key:"createWebGLDrawable",value:function(e,t){return qm.createFromPool(e,t)}},{key:"containsPointSelf",value:function(e){var t=jo.prototype.containsPointSelf.call(this,e);return t&&this._hitTestPixels&&this._hitTestImageData?Nl.testHitTestData(this._hitTestImageData,this.imageWidth,this.imageHeight,e):t}},{key:"getSelfShape",value:function(){return this._hitTestPixels&&this._hitTestImageData?Nl.hitTestDataToShape(this._hitTestImageData,this.imageWidth,this.imageHeight):jo.prototype.getSelfShape.call(this)}},{key:"invalidateMipmaps",value:function(){var e=this._image&&this._mipmap&&!this._mipmapData;if(_get(_getPrototypeOf(n.prototype),"invalidateMipmaps",this).call(this),e)for(var t=this._drawables.length,i=0;i<t;i++)this._drawables[i].markDirtyMipmap()}}]),n}(Nl(jo));_defineProperty(Bl,"DEFAULT_IMAGE_OPTIONS",k({},jo.DEFAULT_NODE_OPTIONS,Nl.DEFAULT_OPTIONS)),Bl.prototype._mutatorKeys=[].concat(["image","imageOpacity","imageBounds","initialWidth","initialHeight","mipmap","mipmapBias","mipmapInitialLevel","mipmapMaxLevel","hitTestPixels"],_toConsumableArray(jo.prototype._mutatorKeys)),Bl.prototype.drawableMarkFlags=[].concat(_toConsumableArray(jo.prototype.drawableMarkFlags),["image","imageOpacity","mipmap"]),Bl.ImageIO=new U("ImageIO",{valueType:Bl,supertype:jo.NodeIO,events:["changed"],methods:{setImage:{returnType:Je,parameterTypes:[Te],implementation:function(e){var t=new window.Image;t.src=e,this.image=t},documentation:"Set the image from a base64 string",invocableForReadOnlyElements:!1}}}),Cr.register("Image",Bl);var Gl={shape:null,boundsMethod:"accurate"},Hl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),e||null!=i&&i.shape;var a=S()({shape:e,boundsMethod:Gl.boundsMethod},i);return(r=t.call(this))._shape=Gl.shape,r._strokedShape=null,r._boundsMethod=Gl.boundsMethod,r._invalidShapeListener=r.invalidateShape.bind(_assertThisInitialized(r)),r._invalidShapeListenerAttached=!1,r.invalidateSupportedRenderers(),r.mutate(a),r}return _createClass(n,[{key:"setShape",value:function(e){return this._shape!==e&&(this._invalidShapeListenerAttached&&this.detachShapeListener(),"string"==typeof e&&(e=new Ni(e)),this._shape=e,this.invalidateShape(),this._shape&&!this._shape.isImmutable()&&this.attachShapeListener()),this}},{key:"shape",get:function(){return this.getShape()},set:function(e){this.setShape(e)}},{key:"getShape",value:function(){return this._shape}},{key:"getStrokedShape",value:function(){return this._strokedShape||(this._strokedShape=this.getShape().getStrokedShape(this._lineDrawingStyles)),this._strokedShape}},{key:"getPathRendererBitmask",value:function(){return Zr.bitmaskCanvas|Zr.bitmaskSVG}},{key:"invalidateSupportedRenderers",value:function(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getPathRendererBitmask())}},{key:"invalidateShape",value:function(){this.invalidatePath();for(var e=this._drawables.length,t=0;t<e;t++)this._drawables[t].markDirtyShape();this._invalidShapeListenerAttached&&this._shape&&this._shape.isImmutable()&&this.detachShapeListener()}},{key:"invalidatePath",value:function(){this._strokedShape=null,this.invalidateSelf()}},{key:"attachShapeListener",value:function(){this.isDisposed||(this._shape.invalidatedEmitter.addListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!0)}},{key:"detachShapeListener",value:function(){this._shape.invalidatedEmitter.removeListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!1}},{key:"updateSelfBounds",value:function(){var e=this.hasShape()?this.computeShapeBounds():jn.NOTHING,t=!e.equals(this.selfBoundsProperty._value);return t&&this.selfBoundsProperty._value.set(e),t}},{key:"setBoundsMethod",value:function(e){return this._boundsMethod!==e&&(this._boundsMethod=e,this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit()),this}},{key:"boundsMethod",get:function(){return this.getBoundsMethod()},set:function(e){this.setBoundsMethod(e)}},{key:"getBoundsMethod",value:function(){return this._boundsMethod}},{key:"computeShapeBounds",value:function(){var e,t=this.getShape();return"none"!==this._boundsMethod&&t?this.hasPaintableStroke()&&"unstroked"!==this._boundsMethod?"accurate"===this._boundsMethod?t.getStrokedBounds(this.getLineStyles()):(e="safePadding"===this._boundsMethod&&"miter"===this.getLineJoin()?this.getMiterLimit():"square"===this.getLineCap()?Math.SQRT2:1,t.bounds.dilated(e*this.getLineWidth()/2)):t.bounds:jn.NOTHING}},{key:"areSelfBoundsValid",value:function(){return"accurate"===this._boundsMethod||"safePadding"===this._boundsMethod||"none"!==this._boundsMethod&&!this.hasStroke()}},{key:"getTransformedSelfBounds",value:function(e){return(this._stroke?this.getStrokedShape():this.getShape()).getBoundsWithTransform(e)}},{key:"getTransformedSafeSelfBounds",value:function(e){return this.getTransformedSelfBounds(e)}},{key:"invalidateStroke",value:function(){this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit(),_get(_getPrototypeOf(n.prototype),"invalidateStroke",this).call(this)}},{key:"hasShape",value:function(){return!!this._shape}},{key:"canvasPaintSelf",value:function(e,t){Ym.prototype.paintCanvas(e,this,t)}},{key:"createSVGDrawable",value:function(e,t){return Um.createFromPool(e,t)}},{key:"createCanvasDrawable",value:function(e,t){return Ym.createFromPool(e,t)}},{key:"isPainted",value:function(){return!0}},{key:"containsPointSelf",value:function(e){var t=!1;return this.hasShape()?(this._fillPickable&&(t=this.getShape().containsPoint(e)),!t&&this._strokePickable&&(t=this.getStrokedShape().containsPoint(e)),t):t}},{key:"getSelfShape",value:function(){return Ni.union([].concat(_toConsumableArray(this.hasShape()&&this._fillPickable?[this.getShape()]:[]),_toConsumableArray(this.hasShape()&&this._strokePickable?[this.getStrokedShape()]:[])))}},{key:"intersectsBoundsSelf",value:function(e){return!!this._shape&&this._shape.intersectsBounds(e)}},{key:"requiresSVGBoundsWorkaround",value:function(){if(!(this._stroke&&this._stroke instanceof Xs&&this.hasShape()))return!1;var e=this.computeShapeBounds();return e.x*e.y==0}},{key:"getDebugHTMLExtras",value:function(){return this._shape?" (<span style=\"color: #88f\" onclick=\"window.open( 'data:text/plain;charset=utf-8,' + encodeURIComponent( '".concat(this._shape.getSVGPath(),"' ) );\">path</span>)"):""}},{key:"dispose",value:function(){this._invalidShapeListenerAttached&&this.detachShapeListener(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Pl(jo));function Fl(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}_defineProperty(Hl,"DEFAULT_PATH_OPTIONS",k({},jo.DEFAULT_NODE_OPTIONS,Gl)),Hl.prototype._mutatorKeys=[].concat(_l,["boundsMethod","shape"],_toConsumableArray(jo.prototype._mutatorKeys)),Hl.prototype.drawableMarkFlags=[].concat(_toConsumableArray(jo.prototype.drawableMarkFlags),xl,["shape"]),Cr.register("Path",Hl),y.register("escapeHTML",Fl);var Yl=Fl;function zl(e){return _.each(Array.prototype.slice.call(arguments,1),(function(t){if(t)for(var n in t){var i=Object.getOwnPropertyDescriptor(t,n);!i||"function"!=typeof i.get&&void 0===t[n]||Object.defineProperty(e,n,i)}})),e}y.register("extendDefined",zl);var Ul=zl,Wl=["boundsMethod","stringProperty","text","font","fontWeight","fontFamily","fontStretch","fontStyle","fontSize"],jl=window.navigator.userAgent.includes("like Gecko) Version/5")&&window.navigator.userAgent.includes("Safari/"),Xl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),(r=t.call(this))._stringProperty=new _n("",!0,r.onStringPropertyChange.bind(_assertThisInitialized(r))),r._font=Qr.DEFAULT,r._boundsMethod="hybrid",r._isHTML=!1,r._cachedRenderedText=null;var a=Ul({fill:"#000000",tandem:xe.OPTIONAL,tandemNameSuffix:"Text",phetioType:n.TextIO,phetioVisiblePropertyInstrumented:!1},i);return"string"==typeof e||"number"==typeof e?a.text=e:a.stringProperty=e,r.textTandem=a.tandem,r.mutate(a),r.invalidateSupportedRenderers(),r}return _createClass(n,[{key:"mutate",value:function(e){return _get(_getPrototypeOf(n.prototype),"mutate",this).call(this,e)}},{key:"setText",value:function(e){return e="".concat(e),this._stringProperty.set(e),this}},{key:"text",get:function(){return this.getText()},set:function(e){this.setText(e)}},{key:"getText",value:function(){return this._stringProperty.value}},{key:"getRenderedText",value:function(){return null===this._cachedRenderedText&&(this._cachedRenderedText=this.text.replace(" "," "),la.edge&&(this._cachedRenderedText=n.simplifyEmbeddingMarks(this._cachedRenderedText))),this._cachedRenderedText}},{key:"renderedText",get:function(){return this.getRenderedText()}},{key:"onStringPropertyChange",value:function(){this._cachedRenderedText=null;for(var e=this._drawables.length,t=0;t<e;t++)this._drawables[t].markDirtyText();this.invalidateText()}},{key:"setStringProperty",value:function(e){return this._stringProperty.setTargetProperty(this,n.STRING_PROPERTY_TANDEM_NAME,e)}},{key:"stringProperty",get:function(){return this.getStringProperty()},set:function(e){this.setStringProperty(e)}},{key:"getStringProperty",value:function(){return this._stringProperty}},{key:"initializePhetioObject",value:function(e,t){var i=this,r=this.isPhetioInstrumented();_get(_getPrototypeOf(n.prototype),"initializePhetioObject",this).call(this,e,t),xe.PHET_IO_ENABLED&&!r&&this.isPhetioInstrumented()&&this._stringProperty.initializePhetio(this,n.STRING_PROPERTY_TANDEM_NAME,(function(){return new wn(i.text,k({phetioReadOnly:!0,tandem:i.tandem.createTandem(n.STRING_PROPERTY_TANDEM_NAME),phetioDocumentation:"Property for the displayed text"},t.stringPropertyOptions))}))}},{key:"setBoundsMethod",value:function(e){if(e!==this._boundsMethod){this._boundsMethod=e,this.invalidateSupportedRenderers();for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyBounds();this.invalidateText(),this.rendererSummaryRefreshEmitter.emit()}return this}},{key:"boundsMethod",get:function(){return this.getBoundsMethod()},set:function(e){this.setBoundsMethod(e)}},{key:"getBoundsMethod",value:function(){return this._boundsMethod}},{key:"getTextRendererBitmask",value:function(){var e=0;return"fast"===this._boundsMethod||this._isHTML||(e|=Zr.bitmaskCanvas),this._isHTML||(e|=Zr.bitmaskSVG),e|=Zr.bitmaskDOM}},{key:"invalidateSupportedRenderers",value:function(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getTextRendererBitmask())}},{key:"invalidateText",value:function(){this.invalidateSelf();for(var e=this._drawables.length,t=0;t<e;t++)this._drawables[t].markDirtyBounds();this.invalidateSupportedRenderers()}},{key:"updateSelfBounds",value:function(){var e;e=this._isHTML||jl&&"accurate"!==this._boundsMethod?_s.approximateDOMBounds(this._font,this.getDOMTextNode()):"hybrid"===this._boundsMethod?_s.approximateHybridBounds(this._font,this.renderedText):"accurate"===this._boundsMethod?_s.accurateCanvasBounds(this):_s.approximateSVGBounds(this._font,this.renderedText),this.hasStroke()&&e.dilate(this.getLineWidth()/2);var t=!e.equals(this.selfBoundsProperty._value);return t&&this.selfBoundsProperty._value.set(e),t}},{key:"invalidateStroke",value:function(){this.invalidateText(),_get(_getPrototypeOf(n.prototype),"invalidateStroke",this).call(this)}},{key:"invalidateFill",value:function(){this.invalidateText(),_get(_getPrototypeOf(n.prototype),"invalidateFill",this).call(this)}},{key:"canvasPaintSelf",value:function(e,t){hg.prototype.paintCanvas(e,this,t)}},{key:"createDOMDrawable",value:function(e,t){return fg.createFromPool(e,t)}},{key:"createSVGDrawable",value:function(e,t){return yg.createFromPool(e,t)}},{key:"createCanvasDrawable",value:function(e,t){return hg.createFromPool(e,t)}},{key:"getDOMTextNode",value:function(){if(this._isHTML){var e=document.createElement("span");return e.innerHTML=this.text,e}return document.createTextNode(this.renderedText)}},{key:"getSafeSelfBounds",value:function(){var e=this.getSelfBounds();return e.dilatedXY(1*e.width,1*e.height)}},{key:"setFont",value:function(e){if(e!==("string"==typeof e?this._font.toCSS():this._font)){this._font="string"==typeof e?Qr.fromCSS(e):e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyFont();this.invalidateText()}return this}},{key:"font",get:function(){return this.getFont()},set:function(e){this.setFont(e)}},{key:"getFont",value:function(){return this._font.getFont()}},{key:"setFontWeight",value:function(e){return this.setFont(this._font.copy({weight:e}))}},{key:"fontWeight",get:function(){return this.getFontWeight()},set:function(e){this.setFontWeight(e)}},{key:"getFontWeight",value:function(){return this._font.getWeight()}},{key:"setFontFamily",value:function(e){return this.setFont(this._font.copy({family:e}))}},{key:"fontFamily",get:function(){return this.getFontFamily()},set:function(e){this.setFontFamily(e)}},{key:"getFontFamily",value:function(){return this._font.getFamily()}},{key:"setFontStretch",value:function(e){return this.setFont(this._font.copy({stretch:e}))}},{key:"fontStretch",get:function(){return this.getFontStretch()},set:function(e){this.setFontStretch(e)}},{key:"getFontStretch",value:function(){return this._font.getStretch()}},{key:"setFontStyle",value:function(e){return this.setFont(this._font.copy({style:e}))}},{key:"fontStyle",get:function(){return this.getFontStyle()},set:function(e){this.setFontStyle(e)}},{key:"getFontStyle",value:function(){return this._font.getStyle()}},{key:"setFontSize",value:function(e){return this.setFont(this._font.copy({size:e}))}},{key:"fontSize",get:function(){return this.getFontSize()},set:function(e){this.setFontSize(e)}},{key:"getFontSize",value:function(){return this._font.getSize()}},{key:"isPainted",value:function(){return!0}},{key:"areSelfBoundsValid",value:function(){return"accurate"===this._boundsMethod}},{key:"getDebugHTMLExtras",value:function(){return' "'.concat(Yl(this.renderedText),'"').concat(this._isHTML?" (html)":"")}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this._stringProperty.dispose()}}],[{key:"embeddedDebugString",value:function(e){return e.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")}},{key:"simplifyEmbeddingMarks",value:function(e){for(var t={dir:null,children:[],parent:null},n=t,i=0;i<e.length;i++){var r=e.charAt(i);if(r===Ql||r===Kl){var a={dir:r,children:[],parent:n};n.children.push(a),n=a}else r===Jl?n=n.parent:n.children.push(r)}return function e(t){if("string"==typeof t)return t;var n=t.children.map(e).join("");return t.dir?"".concat(t.dir+n,"‬"):n}(function e(t){if("string"!=typeof t){for(var n=0;n<t.children.length;n++)e(t.children[n]);!function(e){1===e.children.length&&"string"!=typeof e.children[0]&&e.children[0].dir&&(e.dir=e.children[0].dir,e.children=e.children[0].children)}(t),function(e){for(var t=e.children.length-1;t>=0;t--){var n,i=e.children[t];if("string"!=typeof i&&e.dir===i.dir)(n=e.children).splice.apply(n,[t,1].concat(_toConsumableArray(i.children)))}}(t),function e(t){for(var n=t.children.length-1;n>=1;n--){var i=t.children[n-1],r=t.children[n];"string"!=typeof r&&"string"!=typeof i&&r.dir&&i.dir===r.dir&&(i.children=i.children.concat(r.children),t.children.splice(n,1),e(i))}}(t)}return t}(t))}}]),n}(Pl(jo));_defineProperty(Xl,"STRING_PROPERTY_NAME","stringProperty"),_defineProperty(Xl,"STRING_PROPERTY_TANDEM_NAME","stringProperty"),Xl.prototype._mutatorKeys=[].concat(_l,Wl,_toConsumableArray(jo.prototype._mutatorKeys)),Xl.prototype.drawableMarkFlags=[].concat(_toConsumableArray(jo.prototype.drawableMarkFlags),xl,["text","font","bounds"]),Cr.register("Text",Xl);var Ql="‪",Kl="‫",Jl="‬";_s.initializeTextBounds(),Xl.TextIO=new U("TextIO",{valueType:Xl,supertype:jo.NodeIO,documentation:"Text that is displayed in the simulation. TextIO has a nested PropertyIO.&lt;String&gt; for the current string value."});var Zl=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e)).setRendererBitmask(Zr.bitmaskCanvas),i}return _createClass(n,[{key:"setCanvasBounds",value:function(e){this.invalidateSelf(e)}},{key:"canvasBounds",get:function(){return this.getCanvasBounds()},set:function(e){this.setCanvasBounds(e)}},{key:"getCanvasBounds",value:function(){return this.getSelfBounds()}},{key:"isPainted",value:function(){return!0}},{key:"invalidatePaint",value:function(){for(var e=this._drawables.length,t=0;t<e;t++)this._drawables[t].markDirty()}},{key:"canvasPaintSelf",value:function(e,t){this.paintCanvas(e.context)}},{key:"containsPointSelf",value:function(e){return!1}},{key:"getSelfShape",value:function(){return new Ni}},{key:"createCanvasDrawable",value:function(e,t){return Sm.createFromPool(e,t)}}]),n}(jo);Zl.prototype._mutatorKeys=["canvasBounds"].concat(jo.prototype._mutatorKeys),Cr.register("CanvasNode",Zl);var $l=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,null))._radius=0,i="object"===_typeof(e)?e:Ul({radius:e},i),r.mutate(i),r}return _createClass(n,[{key:"getStrokeRendererBitmask",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getStrokeRendererBitmask",this).call(this);return this.hasStroke()&&!this.getStroke().isGradient&&!this.getStroke().isPattern&&this.getLineWidth()<=this.getRadius()&&(e|=Zr.bitmaskDOM),e}},{key:"getPathRendererBitmask",value:function(){return Zr.bitmaskCanvas|Zr.bitmaskSVG|(zr.borderRadius?Zr.bitmaskDOM:0)}},{key:"invalidateCircle",value:function(){this._shape=null,this.invalidatePath()}},{key:"createCircleShape",value:function(){return Ni.circle(0,0,this._radius).makeImmutable()}},{key:"intersectsBoundsSelf",value:function(e){var t=Math.abs(e.centerX),n=Math.abs(e.centerY),i=e.maxX-t,r=e.maxY-n;return!(t>i+this._radius||n>r+this._radius)&&(t<=i||n<=r||(t-=i)*t+(n-=r)*n<=this._radius*this._radius)}},{key:"canvasPaintSelf",value:function(e,t){km.prototype.paintCanvas(e,this,t)}},{key:"createDOMDrawable",value:function(e,t){return wm.createFromPool(e,t)}},{key:"createSVGDrawable",value:function(e,t){return Cm.createFromPool(e,t)}},{key:"createCanvasDrawable",value:function(e,t){return km.createFromPool(e,t)}},{key:"setRadius",value:function(e){if(this._radius!==e){this._radius=e,this.invalidateCircle();for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyRadius()}return this}},{key:"radius",get:function(){return this.getRadius()},set:function(e){this.setRadius(e)}},{key:"getRadius",value:function(){return this._radius}},{key:"computeShapeBounds",value:function(){var e=new jn(-this._radius,-this._radius,this._radius,this._radius);return this._stroke&&(e=e.dilated(this.getLineWidth()/2)),e}},{key:"containsPointSelf",value:function(e){var t,n=e.x*e.x+e.y*e.y,i=!0;if(this._strokePickable){t=this.getLineWidth()/2;var r=this._radius+t;i=i&&n<=r*r}if(this._fillPickable)return this._strokePickable?i:n<=this._radius*this._radius;if(this._strokePickable){var a=this._radius-t;return i&&n>=a*a}return!1}},{key:"setShape",value:function(e){if(null!==e)throw new Error("Cannot set the shape of a Circle to something non-null");return this.invalidatePath(),this}},{key:"getShape",value:function(){return this._shape||(this._shape=this.createCircleShape()),this._shape}},{key:"hasShape",value:function(){return!0}}]),n}(Hl);$l.prototype._mutatorKeys=["radius"].concat(Hl.prototype._mutatorKeys),$l.prototype.drawableMarkFlags=Hl.prototype.drawableMarkFlags.concat(["radius"]).filter((function(e){return"shape"!==e})),Cr.register("Circle",$l);var eu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),function(e){return!(!e||!e.jquery)}(e)&&(e=e[0]),(r=t.call(this))._container=document.createElement("div"),r._$container=$(r._container),r._$container.css("position","absolute"),r._$container.css("left",0),r._$container.css("top",0),r.invalidateDOMLock=!1,r._preventTransform=!1,i=Ul({element:e},i),r.mutate(i),r.setRendererBitmask(Zr.bitmaskDOM),r}return _createClass(n,[{key:"calculateDOMBounds",value:function(){var e=$(this._element);return new jn(0,0,e.width(),e.height())}},{key:"invalidateDOM",value:function(){if(!this.invalidateDOMLock){this.invalidateDOMLock=!0;var e=document.createElement("div");$(e).css({display:"hidden",padding:"0 !important",margin:"0 !important",position:"absolute",left:0,top:0,width:65535,height:65535}),this._container.removeChild(this._element),e.appendChild(this._element),document.body.appendChild(e);var t=this.calculateDOMBounds();this.invalidateSelf(t),this._$container.width(t.getWidth()),this._$container.height(t.getHeight()),document.body.removeChild(e),e.removeChild(this._element),this._container.appendChild(this._element),this.invalidateDOMLock=!1}}},{key:"createDOMDrawable",value:function(e,t){return Pm.createFromPool(e,t)}},{key:"isPainted",value:function(){return!0}},{key:"setElement",value:function(e){return this._element!==e&&(this._element&&this._container.removeChild(this._element),this._element=e,this._container.appendChild(this._element),this.invalidateDOM()),this}},{key:"element",get:function(){return this.getElement()},set:function(e){this.setElement(e)}},{key:"getElement",value:function(){return this._element}},{key:"setPreventTransform",value:function(e){this._preventTransform!==e&&(this._preventTransform=e)}},{key:"preventTransform",get:function(){return this.isTransformPrevented()},set:function(e){this.setPreventTransform(e)}},{key:"isTransformPrevented",value:function(){return this._preventTransform}}]),n}(jo);eu.prototype._mutatorKeys=["element","preventTransform"].concat(jo.prototype._mutatorKeys),Cr.register("DOM",eu);var tu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s){var o;return _classCallCheck(this,n),(o=t.call(this,null))._x1=0,o._y1=0,o._x2=0,o._y2=0,s="object"===_typeof(e)?e instanceof pn?Ul({x1:e.x,y1:e.y,x2:i.x,y2:i.y,strokePickable:!0},r):Ul({strokePickable:!0},e):Ul({x1:e,y1:i,x2:r,y2:a,strokePickable:!0},s),o.mutate(s),o}return _createClass(n,[{key:"setLine",value:function(e,t,n,i){this._x1=e,this._y1=t,this._x2=n,this._y2=i;for(var r=this._drawables.length,a=0;a<r;a++){this._drawables[a].markDirtyLine()}return this.invalidateLine(),this}},{key:"setPoint1",value:function(e,t){"number"==typeof e?(this._x1=e,this._y1=t):(this._x1=e.x,this._y1=e.y);for(var n=this._drawables.length,i=0;i<n;i++)this._drawables[i].markDirtyP1();return this.invalidateLine(),this}},{key:"p1",get:function(){return new pn(this._x1,this._y1)},set:function(e){this.setPoint1(e)}},{key:"setPoint2",value:function(e,t){"number"==typeof e?(this._x2=e,this._y2=t):(this._x2=e.x,this._y2=e.y);for(var n=this._drawables.length,i=0;i<n;i++)this._drawables[i].markDirtyP2();return this.invalidateLine(),this}},{key:"p2",get:function(){return new pn(this._x2,this._y2)},set:function(e){this.setPoint2(e)}},{key:"setX1",value:function(e){if(this._x1!==e){this._x1=e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyX1();this.invalidateLine()}return this}},{key:"x1",get:function(){return this.getX1()},set:function(e){this.setX1(e)}},{key:"getX1",value:function(){return this._x1}},{key:"setY1",value:function(e){if(this._y1!==e){this._y1=e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyY1();this.invalidateLine()}return this}},{key:"y1",get:function(){return this.getY1()},set:function(e){this.setY1(e)}},{key:"getY1",value:function(){return this._y1}},{key:"setX2",value:function(e){if(this._x2!==e){this._x2=e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyX2();this.invalidateLine()}return this}},{key:"x2",get:function(){return this.getX2()},set:function(e){this.setX2(e)}},{key:"getX2",value:function(){return this._x2}},{key:"setY2",value:function(e){if(this._y2!==e){this._y2=e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyY2();this.invalidateLine()}return this}},{key:"y2",get:function(){return this.getY2()},set:function(e){this.setY2(e)}},{key:"getY2",value:function(){return this._y2}},{key:"createLineShape",value:function(){return Ni.lineSegment(this._x1,this._y1,this._x2,this._y2).makeImmutable()}},{key:"invalidateLine",value:function(){this._shape=null,this.invalidatePath()}},{key:"containsPointSelf",value:function(e){return!!this._strokePickable&&_get(_getPrototypeOf(n.prototype),"containsPointSelf",this).call(this,e)}},{key:"canvasPaintSelf",value:function(e,t){Bm.prototype.paintCanvas(e,this,t)}},{key:"computeShapeBounds",value:function(){if(this._stroke){var e=this.getLineCap(),t=this.getLineWidth()/2;if("round"===e)return new jn(Math.min(this._x1,this._x2)-t,Math.min(this._y1,this._y2)-t,Math.max(this._x1,this._x2)+t,Math.max(this._y1,this._y2)+t);var n=this._x2-this._x1,i=this._y2-this._y1,r=Math.sqrt(n*n+i*i);if(0===r)return new jn(this._x1-t,this._y1-t,this._x2+t,this._y2+t);var a=t*n/r,s=t*i/r,o=jn.NOTHING.copy();return"butt"===e?(o.addCoordinates(this._x1-s,this._y1+a),o.addCoordinates(this._x1+s,this._y1-a),o.addCoordinates(this._x2-s,this._y2+a),o.addCoordinates(this._x2+s,this._y2-a)):(o.addCoordinates(this._x1-a-s,this._y1-s+a),o.addCoordinates(this._x1-a+s,this._y1-s-a),o.addCoordinates(this._x2+a-s,this._y2+s+a),o.addCoordinates(this._x2+a+s,this._y2+s-a)),o}var l=jn.NOTHING.copy();return l.addCoordinates(this._x1,this._y1),l.addCoordinates(this._x2,this._y2),l}},{key:"createSVGDrawable",value:function(e,t){return Hm.createFromPool(e,t)}},{key:"createCanvasDrawable",value:function(e,t){return Bm.createFromPool(e,t)}},{key:"setShape",value:function(e){if(null!==e)throw new Error("Cannot set the shape of a Line to something non-null");return this.invalidatePath(),this}},{key:"getShape",value:function(){return this._shape||(this._shape=this.createLineShape()),this._shape}},{key:"hasShape",value:function(){return!0}},{key:"getFillRendererBitmask",value:function(){return Zr.bitmaskCanvas|Zr.bitmaskSVG|Zr.bitmaskDOM|Zr.bitmaskWebGL}}]),n}(Hl);tu.prototype._mutatorKeys=["p1","p2","x1","y1","x2","y2"].concat(Hl.prototype._mutatorKeys),tu.prototype.drawableMarkFlags=Hl.prototype.drawableMarkFlags.concat(["line","p1","p2","x1","x2","y1","y2"]).filter((function(e){return"shape"!==e})),Cr.register("Line",tu);var nu=vl(Hl),iu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o,l){var u;_classCallCheck(this,n);var c={sizable:!1},h={};return(u=t.call(this,null,c))._rectX=0,u._rectY=0,u._rectWidth=0,u._rectHeight=0,u._cornerXRadius=0,u._cornerYRadius=0,h="object"===_typeof(e)?e instanceof jn?"number"!=typeof i?k(h,{rectBounds:e},i):k(h,{rectBounds:e,cornerXRadius:i,cornerYRadius:r},a):k(h,e):void 0===o?k(h,{rectX:e,rectY:i,rectWidth:r,rectHeight:a},s):k(h,{rectX:e,rectY:i,rectWidth:r,rectHeight:a,cornerXRadius:s,cornerYRadius:o},l),u.localPreferredWidthProperty.lazyLink(u.updatePreferredSizes.bind(_assertThisInitialized(u))),u.localPreferredHeightProperty.lazyLink(u.updatePreferredSizes.bind(_assertThisInitialized(u))),u.mutate(h),u}return _createClass(n,[{key:"getMaximumArcSize",value:function(){return Math.min(this._rectWidth/2,this._rectHeight/2)}},{key:"getStrokeRendererBitmask",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getStrokeRendererBitmask",this).call(this),t=this.getStroke();return!t||t instanceof Qs||t instanceof Zs||this.hasLineDash()||("miter"===this.getLineJoin()||"round"===this.getLineJoin()&&zr.borderRadius)&&(e|=Zr.bitmaskDOM),this.hasStroke()||(e|=Zr.bitmaskWebGL),e}},{key:"getPathRendererBitmask",value:function(){var e=Zr.bitmaskCanvas|Zr.bitmaskSVG,t=this.getMaximumArcSize();return(!this.hasStroke()||this.getLineWidth()<=this._rectHeight&&this.getLineWidth()<=this._rectWidth)&&(!this.isRounded()||zr.borderRadius&&this._cornerXRadius===this._cornerYRadius)&&this._cornerYRadius<=t&&this._cornerXRadius<=t&&(e|=Zr.bitmaskDOM),this.hasStroke()||this.isRounded()||(e|=Zr.bitmaskWebGL),e}},{key:"setRect",value:function(e,t,n,i,r,a){var s=void 0!==r,o=void 0!==a;if(!(this._rectX!==e||this._rectY!==t||this._rectWidth!==n||this._rectHeight!==i||s&&this._cornerXRadius!==r||o&&this._cornerYRadius!==a))return this;this._rectX=e,this._rectY=t,this._rectWidth=n,this._rectHeight=i,this._cornerXRadius=s?r:this._cornerXRadius,this._cornerYRadius=o?a:this._cornerYRadius;for(var l=this._drawables.length,u=0;u<l;u++)this._drawables[u].markDirtyRectangle();return this.invalidateRectangle(),this}},{key:"setRectX",value:function(e){if(this._rectX!==e){this._rectX=e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyX();this.invalidateRectangle()}return this}},{key:"rectX",get:function(){return this.getRectX()},set:function(e){this.setRectX(e)}},{key:"getRectX",value:function(){return this._rectX}},{key:"setRectY",value:function(e){if(this._rectY!==e){this._rectY=e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyY();this.invalidateRectangle()}return this}},{key:"rectY",get:function(){return this.getRectY()},set:function(e){this.setRectY(e)}},{key:"getRectY",value:function(){return this._rectY}},{key:"setRectWidth",value:function(e){if(this._rectWidth!==e){this._rectWidth=e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyWidth();this.invalidateRectangle()}return this}},{key:"rectWidth",get:function(){return this.getRectWidth()},set:function(e){this.setRectWidth(e)}},{key:"getRectWidth",value:function(){return this._rectWidth}},{key:"setRectHeight",value:function(e){if(this._rectHeight!==e){this._rectHeight=e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyHeight();this.invalidateRectangle()}return this}},{key:"rectHeight",get:function(){return this.getRectHeight()},set:function(e){this.setRectHeight(e)}},{key:"getRectHeight",value:function(){return this._rectHeight}},{key:"setCornerXRadius",value:function(e){if(this._cornerXRadius!==e){this._cornerXRadius=e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyCornerXRadius();this.invalidateRectangle()}return this}},{key:"cornerXRadius",get:function(){return this.getCornerXRadius()},set:function(e){this.setCornerXRadius(e)}},{key:"getCornerXRadius",value:function(){return this._cornerXRadius}},{key:"setCornerYRadius",value:function(e){if(this._cornerYRadius!==e){this._cornerYRadius=e;for(var t=this._drawables.length,n=0;n<t;n++)this._drawables[n].markDirtyCornerYRadius();this.invalidateRectangle()}return this}},{key:"cornerYRadius",get:function(){return this.getCornerYRadius()},set:function(e){this.setCornerYRadius(e)}},{key:"getCornerYRadius",value:function(){return this._cornerYRadius}},{key:"setRectBounds",value:function(e){return this.setRect(e.x,e.y,e.width,e.height),this}},{key:"rectBounds",get:function(){return this.getRectBounds()},set:function(e){this.setRectBounds(e)}},{key:"getRectBounds",value:function(){return jn.rect(this._rectX,this._rectY,this._rectWidth,this._rectHeight)}},{key:"setRectSize",value:function(e){return this.setRectWidth(e.width),this.setRectHeight(e.height),this}},{key:"rectSize",get:function(){return this.getRectSize()},set:function(e){this.setRectSize(e)}},{key:"getRectSize",value:function(){return new ms(this._rectWidth,this._rectHeight)}},{key:"setRectWidthFromRight",value:function(e){if(this._rectWidth!==e){var t=this._rectX+this._rectWidth;this.setRectWidth(e),this.setRectX(t-e)}return this}},{key:"rectWidthFromRight",get:function(){return this.getRectWidth()},set:function(e){this.setRectWidthFromRight(e)}},{key:"setRectHeightFromBottom",value:function(e){if(this._rectHeight!==e){var t=this._rectY+this._rectHeight;this.setRectHeight(e),this.setRectY(t-e)}return this}},{key:"rectHeightFromBottom",get:function(){return this.getRectHeight()},set:function(e){this.setRectHeightFromBottom(e)}},{key:"isRounded",value:function(){return 0!==this._cornerXRadius&&0!==this._cornerYRadius}},{key:"computeShapeBounds",value:function(){var e=new jn(this._rectX,this._rectY,this._rectX+this._rectWidth,this._rectY+this._rectHeight);return this._stroke&&(e=e.dilated(this.getLineWidth()/2)),e}},{key:"createRectangleShape",value:function(){if(this.isRounded()){var e=Math.min(this._rectWidth/2,this._rectHeight/2);return Ni.roundRectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight,Math.min(e,this._cornerXRadius),Math.min(e,this._cornerYRadius)).makeImmutable()}return Ni.rectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight).makeImmutable()}},{key:"invalidateRectangle",value:function(){this._shape=null,this.invalidatePath(),this.invalidateSupportedRenderers()}},{key:"updatePreferredSizes",value:function(){var e=this.localPreferredWidth,t=this.localPreferredHeight;null!==e&&(this.rectWidth=this.hasStroke()?e-this.lineWidth:e),null!==t&&(this.rectHeight=this.hasStroke()?t-this.lineWidth:t)}},{key:"invalidateStroke",value:function(){_get(_getPrototypeOf(n.prototype),"invalidateStroke",this).call(this),this.updatePreferredSizes()}},{key:"containsPointSelf",value:function(e){var t=this._rectX,i=this._rectY,r=this._rectWidth,a=this._rectHeight,s=this._cornerXRadius,o=this._cornerYRadius,l=this.getLineWidth()/2,u=!0;if(this._strokePickable){var c=this.isRounded();if(!c&&"bevel"===this.getLineJoin())return _get(_getPrototypeOf(n.prototype),"containsPointSelf",this).call(this,e);var h="miter"===this.getLineJoin()&&!c;u=u&&n.intersects(t-l,i-l,r+2*l,a+2*l,h?0:s+l,h?0:o+l,e)}return this._fillPickable?this._strokePickable?u:n.intersects(t,i,r,a,s,o,e):!!this._strokePickable&&(u&&!n.intersects(t+l,i+l,r-2*l,a-2*l,s-l,o-l,e))}},{key:"intersectsBoundsSelf",value:function(e){return!this.computeShapeBounds().intersection(e).isEmpty()}},{key:"canvasPaintSelf",value:function(e,t){jm.prototype.paintCanvas(e,this,t)}},{key:"createDOMDrawable",value:function(e,t){return Km.createFromPool(e,t)}},{key:"createSVGDrawable",value:function(e,t){return Zm.createFromPool(e,t)}},{key:"createCanvasDrawable",value:function(e,t){return jm.createFromPool(e,t)}},{key:"createWebGLDrawable",value:function(e,t){return tg.createFromPool(e,t)}},{key:"setShape",value:function(e){if(null!==e)throw new Error("Cannot set the shape of a Rectangle to something non-null");return this.invalidatePath(),this}},{key:"getShape",value:function(){return this._shape||(this._shape=this.createRectangleShape()),this._shape}},{key:"hasShape",value:function(){return!0}},{key:"setCornerRadius",value:function(e){return this.setCornerXRadius(e),this.setCornerYRadius(e),this}},{key:"cornerRadius",get:function(){return this.getCornerRadius()},set:function(e){this.setCornerRadius(e)}},{key:"getCornerRadius",value:function(){return this._cornerXRadius}}],[{key:"intersects",value:function(e,t,n,i,r,a,s){var o=s.x>=e&&s.x<=e+n&&s.y>=t&&s.y<=t+i;if(!o||r<=0||a<=0)return o;var l,u,c=Math.min(n/2,i/2);r=Math.min(c,r),a=Math.min(c,a);var h=!1;if(s.x<e+n/2?(l=e+r,h=h||s.x>=l):(l=e+n-r,h=h||s.x<=l),h)return!0;if(s.y<t+i/2?(u=t+a,h=h||s.y>=u):(u=t+i-a,h=h||s.y<=u),h)return!0;var d=s.x-l,p=s.y-u;return d/=r,p/=a,(d*=d)+(p*=p)<=1}},{key:"rect",value:function(e,t,i,r,a){return new n(e,t,i,r,0,0,a)}},{key:"roundedRect",value:function(e,t,i,r,a,s,o){return new n(e,t,i,r,a,s,o)}},{key:"bounds",value:function(e,t){return new n(e.minX,e.minY,e.width,e.height,t)}},{key:"roundedBounds",value:function(e,t,i,r){return new n(e.minX,e.minY,e.width,e.height,t,i,r)}},{key:"dimension",value:function(e,t){return new n(0,0,e.width,e.height,0,0,t)}}]),n}(nu);iu.prototype._mutatorKeys=[].concat(["rectBounds","rectSize","rectX","rectY","rectWidth","rectHeight","cornerRadius","cornerXRadius","cornerYRadius"],_toConsumableArray(nu.prototype._mutatorKeys)),iu.prototype.drawableMarkFlags=Hl.prototype.drawableMarkFlags.concat(["x","y","width","height","cornerXRadius","cornerYRadius"]).filter((function(e){return"shape"!==e})),Cr.register("Rectangle",iu);var ru=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({sprites:[],spriteInstances:[],hitTestSprites:!1,renderer:"webgl"},e);return(i=t.call(this))._sprites=r.sprites,i._spriteInstances=r.spriteInstances,i._hitTestSprites=r.hitTestSprites,i.setRendererBitmask(Zr.bitmaskCanvas|Zr.bitmaskWebGL),i.mutate(r),i}return _createClass(n,[{key:"setCanvasBounds",value:function(e){this.invalidateSelf(e)}},{key:"canvasBounds",get:function(){return this.getCanvasBounds()},set:function(e){this.setCanvasBounds(e)}},{key:"getCanvasBounds",value:function(){return this.getSelfBounds()}},{key:"canvasPaintSelf",value:function(e,t){ig.prototype.paintCanvas(e,this,t)}},{key:"createCanvasDrawable",value:function(e,t){return ig.createFromPool(e,t)}},{key:"createWebGLDrawable",value:function(e,t){return ug.createFromPool(e,t)}},{key:"containsPointSelf",value:function(e){return!!_get(_getPrototypeOf(n.prototype),"containsPointSelf",this).call(this,e)&&(!this._hitTestSprites||!!this.getSpriteInstanceFromPoint(e))}},{key:"getSpriteInstanceFromPoint",value:function(e){for(var t=this._spriteInstances.length-1;t>=0;t--)if(this._spriteInstances[t].containsPoint(e))return this._spriteInstances[t];return null}},{key:"getSelfShape",value:function(){return this._hitTestSprites?Ni.union(this._spriteInstances.map((function(e){return e.getShape()}))):Ni.bounds(this.selfBounds)}},{key:"isPainted",value:function(){return!0}},{key:"invalidatePaint",value:function(){for(var e=this._drawables.length,t=0;t<e;t++)this._drawables[t].markDirty()}}]),n}(jo);ru.prototype._mutatorKeys=["canvasBounds"].concat(jo.prototype._mutatorKeys),Cr.register("Sprites",ru);var au=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,i)).setRendererBitmask(Zr.bitmaskWebGL),r.painterType=e,r}return _createClass(n,[{key:"setCanvasBounds",value:function(e){return this.invalidateSelf(e),this}},{key:"canvasBounds",get:function(){return this.getCanvasBounds()},set:function(e){this.setCanvasBounds(e)}},{key:"getCanvasBounds",value:function(){return this.getSelfBounds()}},{key:"isPainted",value:function(){return!0}},{key:"invalidatePaint",value:function(){for(var e=this._drawables.length,t=0;t<e;t++)this._drawables[t].markDirty()}},{key:"containsPointSelf",value:function(e){return!1}},{key:"getSelfShape",value:function(){return new Ni}},{key:"canvasPaintSelf",value:function(e,t){}},{key:"renderToCanvasSelf",value:function(e,t){var n=e.canvas.width,i=e.canvas.height,r=document.createElement("canvas");r.width=n,r.height=i;var a={antialias:!0,preserveDrawingBuffer:!0},s=r.getContext("webgl",a)||r.getContext("experimental-webgl",a);ma.applyWebGLContextDefaults(s);var o=(new oi).rowMajor(2/n,0,-1,0,-2/i,1,0,0,1);s.viewport(0,0,n,i);var l=new(0,this.painterType)(s,this);l.paint(t,o),l.dispose(),o.freeToPool(),s.flush(),e.context.setTransform(1,0,0,1,0,0),e.context.drawImage(r,0,0),e.context.restore()}},{key:"createWebGLDrawable",value:function(e,t){return Ag.createFromPool(e,t)}}]),n}(jo);au.prototype._mutatorKeys=["canvasBounds"].concat(jo.prototype._mutatorKeys),au.PAINTED_NOTHING=0,au.PAINTED_SOMETHING=1,Cr.register("WebGLNode",au);var su=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,-2e3,-2e3,6e3,6e3,e)}return _createClass(n)}(iu);Cr.register("Plane",su);var ou=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){_classCallCheck(this,n);for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return t.call.apply(t,[this].concat(i))}return _createClass(n,[{key:"insertChild",value:function(e,t){throw new Error("Attempt to insert child into Leaf")}},{key:"removeChildWithIndex",value:function(e,t){throw new Error("Attempt to remove child from Leaf")}}]),n}(e)}));Cr.register("Leaf",ou);var lu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this)).localBounds=new jn(0,0,e,i),a.mutate(r),a}return _createClass(n)}(ou(jo));Cr.register("Spacer",lu);var uu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,e,0,i)}return _createClass(n)}(lu);Cr.register("HStrut",uu);var cu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,0,e,i)}return _createClass(n)}(lu);function hu(e,t,n){n&&_.each(t,(function(t){void 0!==n[t]&&(e[t]=n[t])}))}Cr.register("VStrut",cu),y.register("mutate",hu);var du=hu,pu=1,fu=new pn(0,0),mu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({hitTestPixels:!1,pickable:!0,image:e},r);return(a=t.call(this)).id=pu++,a.offset=i,a.pickable=s.pickable,a.shape=null,a.imageData=null,a.setImage(e),du(_assertThisInitialized(a),Object.keys(Nl.DEFAULT_OPTIONS),s),a}return _createClass(n,[{key:"width",get:function(){return this.imageWidth}},{key:"height",get:function(){return this.imageHeight}},{key:"getShape",value:function(){if(!this.pickable)return new Ni;if(!this.shape){if(this.hitTestPixels){if(this.ensureImageData(),!this.imageData)return new Ni;this.shape=Nl.hitTestDataToShape(this.imageData,this.width,this.height)}else{if(!this.width||!this.height)return new Ni;this.shape=Ni.rect(0,0,this.width,this.height)}this.shape=this.shape.transformed(oi.translation(-this.offset.x,-this.offset.y))}return this.shape}},{key:"ensureImageData",value:function(){!this.imageData&&this.width&&this.height&&(this.imageData=Nl.getHitTestData(this.image,this.width,this.height))}},{key:"containsPoint",value:function(e){if(!this.pickable)return!1;var t=this.width,n=this.height;if(!t&&!n)return!1;var i=fu.set(e).add(this.offset);return!(i.x<0||i.y<0||i.x>t||i.y>n)&&(!this.hitTestPixels||(this.ensureImageData(),!!this.imageData&&Nl.testHitTestData(this.imageData,t,n,i)))}}]),n}(Nl(Object));Cr.register("SpriteImage",mu);var gu=function(){function e(t){_classCallCheck(this,e),this.imageProperty=new dt(t)}return _createClass(e,[{key:"getShape",value:function(){return this.imageProperty.value.getShape()}},{key:"containsPoint",value:function(e){return this.imageProperty.value.containsPoint(e)}}]),e}();Cr.register("Sprite",gu);var yu=function(){function e(t){_classCallCheck(this,e),this.primary=null,this.changeCallback=t,this.notifyChangeCallback=this.notifyChanged.bind(this),this.updateSecondaryListener=this.updateSecondary.bind(this),this.secondaryPropertyCountsMap={}}return _createClass(e,[{key:"setPrimary",value:function(e){e!==this.primary&&(this.detachPrimary(this.primary),this.primary=e,this.attachPrimary(e),this.notifyChangeCallback())}},{key:"clean",value:function(){this.detachPrimary(this.primary),this.primary=null}},{key:"updateSecondary",value:function(e,t,n){for(var i=this.secondaryPropertyCountsMap[n.id],r=0;r<i;r++)this.attachSecondary(e);this.notifyChangeCallback()}},{key:"attachPrimary",value:function(e){if(e instanceof ht)this.secondaryLazyLinkProperty(e),this.attachSecondary(e.get());else if(e instanceof Rr)e.setImmutable();else if(e instanceof Qs)for(var t=0;t<e.stops.length;t++)this.attachPrimary(e.stops[t].color)}},{key:"detachPrimary",value:function(e){if(e instanceof ht)this.secondaryUnlinkProperty(e);else if(e instanceof Qs)for(var t=0;t<e.stops.length;t++)this.detachPrimary(e.stops[t].color)}},{key:"attachSecondary",value:function(e){e instanceof Rr&&e.setImmutable()}},{key:"notifyChanged",value:function(){this.primary instanceof Qs&&this.primary.invalidateCanvasGradient(),this.changeCallback()}},{key:"secondaryLazyLinkProperty",value:function(e){var t=e.id;this.secondaryPropertyCountsMap[t]?this.secondaryPropertyCountsMap[t]++:(this.secondaryPropertyCountsMap[t]=1,e.lazyLink(this.updateSecondaryListener))}},{key:"secondaryUnlinkProperty",value:function(e){var t=e.id,n=--this.secondaryPropertyCountsMap[t];0===n&&(delete this.secondaryPropertyCountsMap[t],e.isDisposed||e.unlink(this.updateSecondaryListener))}}]),e}();Cr.register("PaintObserver",yu);var vu=yu,Au=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=fo.toColor(e),s=S()({luminanceFactor:0,useDeepEquality:!0},i);return(r=t.call(this,a,s))._paint=null,r._luminanceFactor=s.luminanceFactor,r._changeListener=r.invalidatePaint.bind(_assertThisInitialized(r)),r._paintObserver=new vu(r._changeListener),r.setPaint(e),r}return _createClass(n,[{key:"setPaint",value:function(e){this._paint=e,this._paintObserver.setPrimary(e)}},{key:"paint",get:function(){return this.getPaint()},set:function(e){this.setPaint(e)}},{key:"getPaint",value:function(){return this._paint}},{key:"setLuminanceFactor",value:function(e){this.luminanceFactor!==e&&(this._luminanceFactor=e,this.invalidatePaint())}},{key:"luminanceFactor",get:function(){return this.getLuminanceFactor()},set:function(e){this.setLuminanceFactor(e)}},{key:"getLuminanceFactor",value:function(){return this._luminanceFactor}},{key:"invalidatePaint",value:function(){this.value=fo.toColor(this._paint).colorUtilsBrightness(this._luminanceFactor)}},{key:"dispose",value:function(){this.paint=null,_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(dt);Cr.register("PaintColorProperty",Au);var bu=function(){function e(){_classCallCheck(this,e),this.initialize()}return _createClass(e,[{key:"initialize",value:function(){this.svgBlock=null,this.fillStyle="none",this.strokeStyle="none",this.fillPaint=null,this.strokePaint=null,this.updateBaseStyle(),this.strokeDetailStyle=""}},{key:"dispose",value:function(){this.releaseFillPaint(),this.releaseStrokePaint()}},{key:"releaseFillPaint",value:function(){this.fillPaint&&(this.svgBlock.decrementPaint(this.fillPaint),this.fillPaint=null)}},{key:"releaseStrokePaint",value:function(){this.strokePaint&&(this.svgBlock.decrementPaint(this.strokePaint),this.strokePaint=null)}},{key:"updateFill",value:function(e,t){var n=Su(t,e);t!==this.fillPaint&&(this.releaseFillPaint(),t&&t.isPaint&&(this.fillPaint=t,e.incrementPaint(t))),n!==this.fillStyle&&(this.fillStyle=n,this.updateBaseStyle())}},{key:"updateStroke",value:function(e,t){var n=Su(t,e);t!==this.strokePaint&&(this.releaseStrokePaint(),t&&t.isPaint&&(this.strokePaint=t,e.incrementPaint(t))),n!==this.strokeStyle&&(this.strokeStyle=n,this.updateBaseStyle())}},{key:"updateBaseStyle",value:function(){this.baseStyle="fill: ".concat(this.fillStyle,"; stroke: ").concat(this.strokeStyle,";")}},{key:"updateStrokeDetailStyle",value:function(e){var t="",n=e.getLineWidth();1!==n&&(t+="stroke-width: ".concat(n,";"));var i=e.getLineCap();"butt"!==i&&(t+="stroke-linecap: ".concat(i,";"));var r=e.getLineJoin();"miter"!==r&&(t+="stroke-linejoin: ".concat(r,";"));var a=e.getMiterLimit();t+="stroke-miterlimit: ".concat(a,";"),e.hasLineDash()&&(t+="stroke-dasharray: ".concat(e.getLineDash().join(","),";"),t+="stroke-dashoffset: ".concat(e.getLineDashOffset(),";")),this.strokeDetailStyle=t}},{key:"updateSVGBlock",value:function(e){var t=this.svgBlock;t&&(this.fillPaint&&t.decrementPaint(this.fillPaint),this.strokePaint&&t.decrementPaint(this.strokePaint)),this.svgBlock=e,this.fillPaint&&e.incrementPaint(this.fillPaint),this.strokePaint&&e.incrementPaint(this.strokePaint)}}]),e}();function Su(e,t){return e?e.toCSS?e.toCSS():e.isPaint?"url(#".concat(e.id,"-").concat(t?t.id:"noblock",")"):e:"none"}Cr.register("PaintSVGState",bu);var Eu=bu,ku=new Rr("transparent"),Vu=function(){function e(t,n,i){_classCallCheck(this,e),this.initialize(t,n,i)}return _createClass(e,[{key:"isActiveSVGGradientStop",value:function(){return!!this.svgGradient}},{key:"initialize",value:function(e,t,n){return this.svgGradient=e,this.color=n,this.ratio=t,this.svgElement=this.svgElement||document.createElementNS(ea,"stop"),this.svgElement.setAttribute("offset",""+t),this.dirty=!0,this.update(),this.propertyListener=this.propertyListener||this.onPropertyChange.bind(this),this.colorListener=this.colorListener||this.markDirty.bind(this),n instanceof ht?(n.lazyLink(this.propertyListener),n.value instanceof Rr&&n.value.changeEmitter.addListener(this.colorListener)):n instanceof Rr&&n.changeEmitter.addListener(this.colorListener),this}},{key:"onPropertyChange",value:function(e,t){t instanceof Rr&&t.changeEmitter.removeListener(this.colorListener),e instanceof Rr&&e.changeEmitter.addListener(this.colorListener),this.markDirty()}},{key:"markDirty",value:function(){this.dirty=!0,this.svgGradient.markDirty()}},{key:"update",value:function(){if(this.dirty){this.dirty=!1;var e=this.color;e instanceof ht&&(e=e.value),null===e&&(e="transparent"),"string"==typeof e?ku.setCSS(e):ku.set(e);var t="stop-opacity: ".concat(ku.a.toFixed(20),";");ku.alpha=1;var n="stop-color: ".concat(ku.toCSS(),";");this.svgElement.setAttribute("style","".concat(n," ").concat(t))}}},{key:"dispose",value:function(){var e=this.color;e instanceof ht?(e.hasListener(this.propertyListener)&&e.unlink(this.propertyListener),e.value instanceof Rr&&e.value.changeEmitter.removeListener(this.colorListener)):e instanceof Rr&&e.changeEmitter.removeListener(this.colorListener),this.color=null,this.svgGradient=null,this.freeToPool()}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}]),e}();_defineProperty(Vu,"pool",new rn(Vu)),Cr.register("SVGGradientStop",Vu);var wu=Vu,_u=function(){function e(t,n){_classCallCheck(this,e),this.initialize(t,n)}return _createClass(e,[{key:"isActiveSVGGradient",value:function(){return!!this.svgBlock}},{key:"initialize",value:function(e,t){this.svgBlock=e,this.gradient=t;var n=void 0!==this.definition;this.definition=this.definition||this.createDefinition(),n||this.definition.setAttribute("gradientUnits","userSpaceOnUse"),t.transformMatrix?this.definition.setAttribute("gradientTransform",t.transformMatrix.getSVGTransform()):this.definition.removeAttribute("gradientTransform");var i=t.getSVGStops();this.stops=Ui(this.stops);for(var r=0;r<i.length;r++){var a=new wu(this,i[r].ratio,i[r].color);this.stops.push(a),this.definition.appendChild(a.svgElement)}this.dirty=!1}},{key:"markDirty",value:function(){if(!this.dirty){this.dirty=!0,this.svgBlock.markDirtyGradient(this)}}},{key:"update",value:function(){if(this.dirty){this.dirty=!1;for(var e=0;e<this.stops.length;e++)this.stops[e].update()}}},{key:"dispose",value:function(){for(var e=0;e<this.stops.length;e++){var t=this.stops[e];this.definition.removeChild(t.svgElement),t.dispose()}Ui(this.stops),this.svgBlock=null,this.gradient=null,this.freeToPool()}}]),e}();Cr.register("SVGGradient",_u);var Cu=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t);var i=t;this.definition.setAttribute("x1",""+i.start.x),this.definition.setAttribute("y1",""+i.start.y),this.definition.setAttribute("x2",""+i.end.x),this.definition.setAttribute("y2",""+i.end.y)}},{key:"createDefinition",value:function(){return document.createElementNS(ea,"linearGradient")}},{key:"freeToPool",value:function(){n.pool.freeToPool(this)}}]),n}(_u);_defineProperty(Cu,"pool",new rn(Cu)),Cr.register("SVGLinearGradient",Cu);var xu=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.definition.setAttribute("cx",""+t.largePoint.x),this.definition.setAttribute("cy",""+t.largePoint.y),this.definition.setAttribute("r",""+t.maxRadius),this.definition.setAttribute("fx",""+t.focalPoint.x),this.definition.setAttribute("fy",""+t.focalPoint.y),this}},{key:"createDefinition",value:function(){return document.createElementNS(ea,"radialGradient")}},{key:"freeToPool",value:function(){n.pool.freeToPool(this)}}]),n}(_u);_defineProperty(xu,"pool",new rn(xu)),Cr.register("SVGRadialGradient",xu);var Pu=function(){function e(t){_classCallCheck(this,e),this.initialize(t)}return _createClass(e,[{key:"initialize",value:function(e){var t=void 0!==this.definition;return this.definition=this.definition||document.createElementNS(ea,"pattern"),t||(this.definition.setAttribute("patternUnits","userSpaceOnUse"),this.definition.setAttribute("patternContentUnits","userSpaceOnUse")),e.transformMatrix?this.definition.setAttribute("patternTransform",e.transformMatrix.getSVGTransform()):this.definition.removeAttribute("patternTransform"),this.definition.setAttribute("x","0"),this.definition.setAttribute("y","0"),this.definition.setAttribute("width",""+e.image.width),this.definition.setAttribute("height",""+e.image.height),this.imageElement=this.imageElement||document.createElementNS(ea,"image"),this.imageElement.setAttribute("x","0"),this.imageElement.setAttribute("y","0"),this.imageElement.setAttribute("width","".concat(e.image.width,"px")),this.imageElement.setAttribute("height","".concat(e.image.height,"px")),this.imageElement.setAttributeNS(na,"xlink:href",e.image.src),t||this.definition.appendChild(this.imageElement),this}},{key:"update",value:function(){}},{key:"dispose",value:function(){this.freeToPool()}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}]),e}();_defineProperty(Pu,"pool",new rn(Pu)),Cr.register("SVGPattern",Pu);var Tu=function(){function e(t,n){var i=this;_classCallCheck(this,e),_defineProperty(this,"_matrices",null),_defineProperty(this,"_dirtyIndex",0),_defineProperty(this,"_listeners",[]),_defineProperty(this,"_nodeTransformListeners",[]);var r=S()({isStatic:!1},n);this._isStatic=r.isStatic,this.trail=t,this._nodeTransformListeners=[];for(var a=1;a<this.trail.length;a++){var s=function(e){return function(){i.onTransformChange(e)}}(a-1);this._nodeTransformListeners.push(s),t.nodes[a].transformEmitter.addListener(s)}}return _createClass(e,[{key:"dispose",value:function(){for(var e=1;e<this.trail.length;e++){var t=this._nodeTransformListeners[e-1];this.trail.nodes[e].transformEmitter.hasListener(t)&&this.trail.nodes[e].transformEmitter.removeListener(t)}}},{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=_.indexOf(this._listeners,e);this._listeners.splice(t,1)}},{key:"notifyListeners",value:function(){var e=this._listeners;this._isStatic||(e=e.slice());for(var t=e.length,n=0;n<t;n++)e[n]()}},{key:"onTransformChange",value:function(e){this._dirtyIndex=Math.min(this._dirtyIndex,e),this.notifyListeners()}},{key:"getMatrix",value:function(){if(null===this._matrices){this._matrices=[];for(var e=1;e<this.trail.length;e++)this._matrices.push(new oi)}if(this._matrices.length<=0)return oi.IDENTITY;for(var t=this._matrices.length,n=this._dirtyIndex;n<t;n++){var i=this.trail.nodes[n+1].matrix;0===n?this._matrices[n].set(i):(this._matrices[n].set(this._matrices[n-1]),this._matrices[n].multiplyMatrix(i))}return this._dirtyIndex=t,this._matrices[t-1]}},{key:"matrix",get:function(){return this.getMatrix()}}]),e}();Cr.register("TransformTracker",Tu);var Mu=Tu,Lu=function(){function e(t,n){var i=this;_classCallCheck(this,e),n=A({isStatic:!1},n),this.isStatic=n.isStatic,this.trail=t,this._listeners=[],this.trailVisibleProperty=new st(this.trail.isVisible()),this._nodeVisibilityListeners=[];for(var r=0;r<this.trail.length;r++){var a=function(){i.trailVisibleProperty.set(t.isVisible())};this._nodeVisibilityListeners.push(a),t.nodes[r].visibleProperty.link(a)}this.boundTrailVisibilityChangedListener=this.onVisibilityChange.bind(this),this.trailVisibleProperty.link(this.boundTrailVisibilityChangedListener)}return _createClass(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=_.indexOf(this._listeners,e);this._listeners.splice(t,1)}},{key:"dispose",value:function(){for(var e=0;e<this.trail.length;e++){var t=this._nodeVisibilityListeners[e];this.trail.nodes[e].visibleProperty.hasListener(t)&&this.trail.nodes[e].visibleProperty.removeListener(t)}this.trailVisibleProperty.unlink(this.boundTrailVisibilityChangedListener)}},{key:"onVisibilityChange",value:function(){this.notifyListeners()}},{key:"notifyListeners",value:function(){var e=this._listeners;this._isStatic||(e=e.slice());for(var t=e.length,n=0;n<t;n++)e[n]()}}]),e}();Cr.register("TrailVisibilityTracker",Lu);var Iu=Lu,Ru={mutateNode:function(e,t){t?e.setPDOMAttribute("aria-haspopup",t):e.removePDOMAttribute("aria-haspopup"),e.positionInPDOM=!!t}};Cr.register("AriaHasPopUpMutator",Ru);var Du=Ru,Nu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({headingLevel:1},e);(i=t.call(this,r)).tagName="h".concat(r.headingLevel),i.focusHighlight="invisible";var a={blur:function(){i.focusable=!1}};return i.addInputListener(a),i.disposeFocusableHeadingNode=function(){i.removeInputListener(a)},i}return _createClass(n,[{key:"focus",value:function(){this.focusable=!0,_get(_getPrototypeOf(n.prototype),"focus",this).call(this)}},{key:"dispose",value:function(){this.disposeFocusableHeadingNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);Cr.register("FocusableHeadingNode",Nu);var qu=function(){function e(t){var n=this;_classCallCheck(this,e);var i=this;this.outputUtteranceProperty=new dt(new Ou(document.title,"off")),this.linearDOM=this.getLinearDOMElements(t),this.activeElement=null,this.activeLine=null,this.letterPosition=0,this.positionInLine=0,this.wordPosition=0,this.observers=[],this.keyState={},document.addEventListener("keydown",(function(e){var i;n.keyState[e.keyCode]=!0;var r=e.shiftKey?"PREVIOUS":"NEXT";if(n.linearDOM=n.getLinearDOMElements(t),n.updateLiveElementList(),!n.activeElement||"application"!==n.activeElement.getAttribute("role")){if(n.keyState[40]&&!n.keyState[45])i=n.readNextPreviousLine("NEXT");else if(n.keyState[38]&&!n.keyState[45])i=n.readNextPreviousLine("PREVIOUS");else if(n.keyState[72]){i=n.readNextPreviousHeading(["H1","H2","H3","H4","H5","H6"],r)}else n.keyState[9]||(n.keyState[39]&&!n.keyState[17]?i=n.readNextPreviousCharacter("NEXT"):n.keyState[37]&&!n.keyState[17]?i=n.readNextPreviousCharacter("PREVIOUS"):n.keyState[37]&&n.keyState[17]?i=n.readNextPreviousWord("PREVIOUS"):n.keyState[39]&&n.keyState[17]?i=n.readNextPreviousWord("NEXT"):n.keyState[45]&&n.keyState[38]?i=n.readActiveLine():n.keyState[49]?i=n.readNextPreviousHeading(["H1"],r):n.keyState[50]?i=n.readNextPreviousHeading(["H2"],r):n.keyState[51]?i=n.readNextPreviousHeading(["H3"],r):n.keyState[52]?i=n.readNextPreviousHeading(["H4"],r):n.keyState[53]?i=n.readNextPreviousHeading(["H5"],r):n.keyState[54]?i=n.readNextPreviousHeading(["H6"],r):n.keyState[70]?i=n.readNextPreviousFormElement(r):n.keyState[66]?i=n.readNextPreviousButton(r):n.keyState[76]?i=n.readNextPreviousList(r):n.keyState[73]?i=n.readNextPreviousListItem(r):n.keyState[45]&&n.keyState[40]&&n.readEntireDocument());n.activeElement&&n.isFocusable(n.activeElement)&&n.activeElement.focus()," "===i&&(i="space"),i&&n.outputUtteranceProperty.set(new Ou(i,"off"))}})),document.addEventListener("keyup",(function(e){n.keyState[e.keyCode]=!1})),document.addEventListener("focusin",(function(e){if(e.target!==i.activeElement){i.activeElement=e.target;var t=i.getAccessibleText(this.activeElement,!0);if(t){var n=i.activeElement.getAttribute("aria-live");i.outputUtteranceProperty.set(new Ou(t,n))}}}))}return _createClass(e,[{key:"getLinearDOMElements",value:function(e){for(var t=e.getElementsByTagName("*"),n=[],i=0;i<t.length;i++)t[i].nodeType===Node.ELEMENT_NODE&&(n[i]=t[i]);return n}},{key:"getLiveRole",value:function(e){var t=null;return["log","status","alert","progressbar","marquee","timer","assertive","polite"].forEach((function(n){e.getAttribute("aria-live")!==n&&e.getAttribute("role")!==n||(t=n)})),t}},{key:"getNextPreviousElement",value:function(e){this.activeElement||(this.activeElement=this.linearDOM[0]);var t="NEXT"===e?1:-1,n=this.linearDOM.indexOf(this.activeElement)+t;return this.linearDOM[n]}},{key:"getLabel",value:function(e){var t,n=document.getElementsByTagName("label");return Array.prototype.forEach.call(n,(function(e){e.getAttribute("for")&&(t=e)})),t}},{key:"getAccessibleText",value:function(e,t){var n="";if(!e)return"End of Document";if("ScreenView"===e.getAttribute("class"))return null;if("HEADER"===e.tagName)return null;if("SECTION"===e.tagName)return null;if("LABEL"===e.tagName)return null;for(var i=e;i.parentElement;){if(i.getAttribute("aria-hidden")||i.hidden)return null;i=i.parentElement}if("P"===e.tagName&&(n+=e.textContent),"H1"===e.tagName&&(n+="Heading Level 1, ".concat(e.textContent)),"H2"===e.tagName&&(n+="Heading Level 2, ".concat(e.textContent)),"H3"===e.tagName&&(n+="Heading Level 3, ".concat(e.textContent)),"UL"===e.tagName){var r=e.children.length;n+="List with ".concat(r," items")}if("LI"===e.tagName&&(n+="List Item: ".concat(e.textContent)),"BUTTON"===e.tagName){if(e.getAttribute("aria-pressed")){var a=" toggle";a+=" Button,","true"===e.getAttribute("aria-pressed")?a+=" pressed":a+=" not pressed",n+=e.textContent+","+a}else n+=e.textContent+" Button"}if("INPUT"===e.tagName&&("reset"===e.type&&(n+="".concat(e.getAttribute("value")," Button")),"checkbox"===e.type)){var s=this.getLabel(e.id).textContent;if("switch"===e.getAttribute("role")){var o=e.getAttribute("aria-checked");if(o){var l="true"===o?"On":"Off";n+="".concat(s+", ","switch").concat(",").concat(" ").concat(l)}}else{var u=e.checked?" Checked":" Not Checked";n+="".concat(e.textContent," Checkbox").concat(u)}}if(t){n.length>0&&(n+=",");var c=e.getAttribute("aria-label");c&&(n+=" "+c+",");var h,d=e.getAttribute("aria-labelledBy");if(d){var p=document.getElementById(d).textContent;n+=" "+p+","}for(i=e;i.parentElement;){if("document"===(h=i.getAttribute("role"))||"application"===h){n+=" "+h+",";break}i=i.parentElement}e.getAttribute("role")&&"button"===(h=e.getAttribute("role"))&&(n+="".concat(" ","Button")),e.draggable&&(n+="".concat(" ","draggable").concat(",")),"true"===e.getAttribute("aria-grabbed")&&(n+="".concat(" ","grabbed").concat(","));var f,m,g=e.getAttribute("aria-describedby");if(g)g.split(" ").forEach((function(e){f=document.getElementById(e),m=f.textContent,n+=" "+m}))}return","===n[n.length-1]&&(n=n.slice(0,-1)),n}},{key:"getNextPreviousElementWithPDOMContent",value:function(e){for(var t;!t;)this.activeElement=this.getNextPreviousElement(e),t=this.getAccessibleText(this.activeElement,!1);return this.activeElement}},{key:"getNextPreviousElementWithRole",value:function(e,t){var n=null,i="NEXT"===t?1:-1;this.activeElement||(this.activeElement=this.linearDOM[0]);for(var r=this.linearDOM.indexOf(this.activeElement)+i;this.linearDOM[r];){for(var a=0;a<e.length;a++){var s=this.linearDOM[r].tagName,o=this.linearDOM[r].type,l=this.linearDOM[r].getAttribute("role"),u=e[a];if(s===u||l===u||o===u){n=this.linearDOM[r];break}}if(n)break;r+=i}return n}},{key:"readNextPreviousLine",value:function(e){var t="";this.letterPosition=0,this.wordPosition=0,this.activeElement||(this.activeElement=this.getNextPreviousElementWithPDOMContent(e));var n=this.getAccessibleText(this.activeElement,!1).split(" ");if("PREVIOUS"===e&&(this.positionInLine=this.positionInLine-30),!n[this.positionInLine]){this.positionInLine=0;var i=this.activeElement;this.activeElement=this.getNextPreviousElementWithPDOMContent(e),n=this.getAccessibleText(this.activeElement,!1).split(" "),this.activeElement||(this.activeElement=i)}for(var r=this.positionInLine+15,a=this.positionInLine;a<r;a++)if(n[a]){if(t+=n[a],this.positionInLine+=1,!n[a+1]){this.positionInLine+=15-this.positionInLine%15;break}t+=" "}return this.activeLine=t,t}},{key:"readActiveLine",value:function(){var e="";this.activeLine||(this.activeLine=this.readNextPreviousLine("NEXT"));for(var t=this.activeLine.split(" "),n=0;n<15;n++)if(t[n]){if(e+=t[n],!t[n+1])break;e+=" "}return e}},{key:"readNextPreviousWord",value:function(e){this.activeLine||(this.activeLine=this.readNextPreviousLine(e));var t,n,i=this.activeLine.split(" ");"NEXT"===e?(n=i.length,t=1):"PREVIOUS"===e&&(n=0,t=-2),this.wordPosition===n&&(this.activeLine=this.readNextPreviousLine(e));var r=i[this.wordPosition];return this.wordPosition+=t,r}},{key:"readNextPreviousHeading",value:function(e,t){for(var n,i,r;!n;)r=this.activeElement,i=this.getNextPreviousElementWithRole(e,t),this.activeElement=i,n=this.getAccessibleText(i);if(!i){this.activeElement=r;var a="NEXT"===t?"more":"previous";if(1===e.length){var s="No ".concat(a," headings at "),o=e[0];return s+("H1"===o?"Level 1":"H2"===o?"Level 2":"H3"===o?"Level 3":"H4"===o?"Level 4":"H5"===o?"Level 5":"Level 6")}return"No ".concat(a," headings")}return this.activeElement=i,n}},{key:"readNextPreviousButton",value:function(e){for(var t,n,i,r=["button","BUTTON","submit","reset"];!n;)i=this.activeElement,t=this.getNextPreviousElementWithRole(r,e),this.activeElement=t,n=this.getAccessibleText(t,!0);return t?(this.activeElement=t,n):(this.activeElement=i,"No ".concat("NEXT"===e?"more":"previous"," buttons"))}},{key:"readNextPreviousFormElement",value:function(e){for(var t,n,i,r=["INPUT","BUTTON"].concat(["button"]);!n;)i=this.activeElement,t=this.getNextPreviousElementWithRole(r,e),this.activeElement=t,n=this.getAccessibleText(t,!0);return"End of Document"===n?(this.activeElement=i,"No ".concat("NEXT"===e?"next":"previous"," form field")):(this.activeElement=t,n)}},{key:"readNextPreviousListItem",value:function(e){var t;this.activeElement||(this.activeElement=this.getNextPreviousElementWithPDOMContent(e));var n=this.activeElement.parentElement;if("UL"===n.tagName||"OL"===n.tagName){for(var i="NEXT"===e?1:-1,r=Array.prototype.indexOf.call(n.children,this.activeElement)+i;n.children[r];){if(t=this.getAccessibleText(n.children[r])){this.activeElement=n.children[r];break}r+=i}t||(t=this.readNextPreviousList(e))}else t=this.readNextPreviousList(e);return t||"No ".concat("NEXT"===e?"more":"previous"," list items")}},{key:"readNextPreviousList",value:function(e){this.activeElement||(this.activeElement=this.getNextPreviousElementWithPDOMContent(e));var t,n=this.activeElement.parentElement;"UL"!==n.tagName&&"OL"!==n.tagName||(t=this.activeElement,this.activeElement=n);var i=this.getNextPreviousElementWithRole(["UL","OL"],e);if(!i)return t&&(this.activeElement=t),"No ".concat("NEXT"===e?"more":"previous"," lists");var r=this.getAccessibleText(i),a="",s=i.children[0];return s&&(a=this.getAccessibleText(s),this.activeElement=s),"".concat(r,", ").concat(a)}},{key:"readNextPreviousCharacter",value:function(e){var t,n,i;this.activeLine||(this.activeLine=this.readNextPreviousLine("NEXT")),"NEXT"===e?(t=this.activeLine.length,n=1,i=0):"PREVIOUS"===e&&(t=2,n=-1,i=-2),this.letterPosition===t&&(this.activeLine=this.readNextPreviousLine(e),this.letterPosition=this.activeLine.length);var r=this.activeLine[this.letterPosition+i];return this.letterPosition+=n,r}},{key:"updateLiveElementList",value:function(){for(var e,t=this,n=0;n<this.observers.length;n++)this.observers[n]&&this.observers[n].disconnect();this.observers=[];for(var i=0;i<this.linearDOM.length;i++){var r=this.linearDOM[i];this.getLiveRole(r)&&(e=void 0,(e=new MutationObserver((function(e){!function(e){e.forEach((function(e){for(var n,i=e.target;!n;)n=t.getLiveRole(i),i=i.parentElement;if(e.addedNodes[0]){var r=e.addedNodes[0].data;t.outputUtteranceProperty.set(new Ou(r,n))}}))}(e)}))).observe(r,{childList:!0,subtree:!0}),t.observers.push(e))}}},{key:"readEntireDocument",value:function(){for(var e=this.getAccessibleText(this.activeElement),t=this.activeElement;"End of Document"!==e;)t=this.activeElement,"End of Document"===(e=this.readNextPreviousLine("NEXT"))&&(this.activeElement=t),this.outputUtteranceProperty.set(new Ou(e,"polite"))}},{key:"isFocusable",value:function(e){var t=!1;return["tabindex","BUTTON","INPUT"].forEach((function(n){(e.getAttribute(n)||e.tagName===n)&&(t=!0)})),t}}]),e}();Cr.register("Cursor",qu);var Ou=_createClass((function e(t,n){_classCallCheck(this,e),this.text=t,this.liveRole=n})),Bu=_createClass((function e(t){var n=this;_classCallCheck(this,e),this.speakingStartedEmitter=new Et({parameters:[{valueType:Object}]}),this.speakingEndedEmitter=new Et({parameters:[{valueType:Object}]}),this.speaking=!1,this.politeUtterances=[];var i=navigator.userAgent,r=i.match(/Windows/),a=!!(i.match(/Version\/[5-9]\./)&&i.match(/Safari\//)&&i.match(/AppleWebKit/));window.speechSynthesis&&SpeechSynthesisUtterance&&window.speechSynthesis.speak?(this.synth=window.speechSynthesis,t.outputUtteranceProperty.link((function(e){var t,i=new SpeechSynthesisUtterance(e.text);if(i.addEventListener("start",(function(t){n.speakingStartedEmitter.emit(e)})),i.addEventListener("end",(function(t){n.speakingEndedEmitter.emit(e)})),n.synth.getVoices().forEach((function(e){e.default&&(t=e)})),i.voice=t,i.rate=1.2,"assertive"!==e.liveRole&&"off"!==e.liveRole&&e.liveRole){if("polite"===e.liveRole)if(a){n.politeUtterances.push(i);if(n.speaking)setTimeout((function(){!function(){n.speaking=!0;var e=n.politeUtterances.shift();e?n.synth.speak(e):n.speaking=!1}()}),2e3);else{n.synth.speak(i);var s=n.politeUtterances.indexOf(i);s>0&&n.politeUtterances.splice(s,1)}}else n.synth.speak(i)}else n.politeUtterances=[],n.speaking=!0,r?(n.synth.pause(),n.synth.cancel(),n.synth.speak(i),n.synth.resume()):(n.synth.cancel(),n.synth.speak(i))}))):t.outputUtteranceProperty.link((function(){n.speakingStartedEmitter.emit({text:"Sorry! Web Speech API not supported on this platform."})}))}));Cr.register("Reader",Bu);var Gu=[],Hu=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({parameters:Gu,phetioOuterType:n.PhetioActionIO,tandem:xe.OPTIONAL,phetioState:!1,phetioReadOnly:Be.DEFAULT_OPTIONS.phetioReadOnly,phetioHighFrequency:Be.DEFAULT_OPTIONS.phetioHighFrequency,phetioEventType:Be.DEFAULT_OPTIONS.phetioEventType,phetioDocumentation:"A class that wraps a function, adding API to execute that function and data stream capture."},i);return(r=t.call(this,a)).action=e,r.isExecutingCount=0,r.disposeOnExecuteCompletion=!1,r.executedEmitter=new Et({parameters:a.parameters,tandem:a.tandem.createTandem("executedEmitter"),phetioState:a.phetioState,phetioReadOnly:a.phetioReadOnly,phetioHighFrequency:a.phetioHighFrequency,phetioEventType:a.phetioEventType,phetioDocumentation:"Emitter that emits when this actions work is complete"}),r.disposePhetioAction=function(){r.executedEmitter.dispose()},r}return _createClass(n,[{key:"execute",value:function(){var e;this.isExecutingCount++;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioStartEvent("executed",{data:this.getPhetioData.apply(this,n)}),this.action.apply(null,n),(e=this.executedEmitter).emit.apply(e,n),xe.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&this.phetioEndEvent(),this.isExecutingCount--,this.disposeOnExecuteCompletion&&0===this.isExecutingCount&&(this.disposePhetioAction(),this.disposeOnExecuteCompletion=!1)}},{key:"dispose",value:function(){this.isExecutingCount>0?this.disposeOnExecuteCompletion=!0:this.disposePhetioAction(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(St),Fu=function(e){return e.typeName},Yu=new Map;Hu.PhetioActionIO=function(e){var t=e.map(Fu).join(",");return Yu.has(t)||Yu.set(t,new U("PhetioActionIO<".concat(e.map(Fu).join(", "),">"),{valueType:Hu,documentation:"Executes when an event occurs",events:["executed"],parameterTypes:e,metadataDefaults:{phetioState:!1},methods:{execute:{returnType:Je,parameterTypes:e,implementation:Hu.prototype.execute,documentation:"Executes the function the PhetioAction is wrapping.",invocableForReadOnlyElements:!1}}})),Yu.get(t)},V.register("PhetioAction",Hu);var zu=Hu,Uu=function(){function e(t){var n=this;_classCallCheck(this,e),_defineProperty(this,"keyState",{}),_defineProperty(this,"_lastKeyDown",null),_defineProperty(this,"attachedToDocument",!1),_defineProperty(this,"documentKeyupListener",null),_defineProperty(this,"documentKeydownListener",null),_defineProperty(this,"_enabled",!0),_defineProperty(this,"keydownEmitter",new Et({parameters:[{valueType:KeyboardEvent}]})),_defineProperty(this,"keyupEmitter",new Et({parameters:[{valueType:KeyboardEvent}]}));var i=S()({tandem:xe.OPTIONAL},t);this.keydownUpdateAction=new zu((function(e){var t=xa.getEventCode(e);if(t){if(n.correctModifierKeys(e),!n.isKeyDown(t)){var i=xa.getEventCode(e);n.keyState[i]={keyDown:!0,key:i,timeDown:0}}n._lastKeyDown=t,n.keydownEmitter.emit(e)}}),{phetioPlayback:!0,tandem:i.tandem.createTandem("keydownUpdateAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Action that executes whenever a keydown occurs from the input listeners this keyStateTracker adds (most likely to the document)."}),this.keyupUpdateAction=new zu((function(e){var t=xa.getEventCode(e);t&&(n.correctModifierKeys(e),n.isKeyDown(t)&&delete n.keyState[t],n.keyupEmitter.emit(e))}),{phetioPlayback:!0,tandem:i.tandem.createTandem("keyupUpdateAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Action that executes whenever a keyup occurs from the input listeners this keyStateTracker adds (most likely to the document)."});var r=this.step.bind(this);mt.addListener(r),this.disposeKeyStateTracker=function(){mt.removeListener(r),n.attachedToDocument&&n.detachFromDocument()}}return _createClass(e,[{key:"keydownUpdate",value:function(e){this.enabled&&this.keydownUpdateAction.execute(e)}},{key:"correctModifierKeys",value:function(e){var t=xa.getEventCode(e);e.shiftKey&&!this.shiftKeyDown&&(this.keyState[xa.KEY_SHIFT_LEFT]={keyDown:!0,key:t,timeDown:0}),e.altKey&&!this.altKeyDown&&(this.keyState[xa.KEY_ALT_LEFT]={keyDown:!0,key:t,timeDown:0}),e.ctrlKey&&!this.ctrlKeyDown&&(this.keyState[xa.KEY_CONTROL_LEFT]={keyDown:!0,key:t,timeDown:0}),!e.shiftKey&&this.shiftKeyDown&&(delete this.keyState[xa.KEY_SHIFT_LEFT],delete this.keyState[xa.KEY_SHIFT_RIGHT]),!e.altKey&&this.altKeyDown&&(delete this.keyState[xa.KEY_ALT_LEFT],delete this.keyState[xa.KEY_ALT_RIGHT]),!e.ctrlKey&&this.ctrlKeyDown&&(delete this.keyState[xa.KEY_CONTROL_LEFT],delete this.keyState[xa.KEY_CONTROL_RIGHT])}},{key:"keyupUpdate",value:function(e){this.enabled&&this.keyupUpdateAction.execute(e)}},{key:"movementKeysDown",get:function(){return this.isAnyKeyInListDown(xa.MOVEMENT_KEYS)}},{key:"getLastKeyDown",value:function(){return this._lastKeyDown}},{key:"isKeyDown",value:function(e){return!!this.keyState[e]&&this.keyState[e].keyDown}},{key:"isAnyKeyInListDown",value:function(e){for(var t=0;t<e.length;t++)if(this.isKeyDown(e[t]))return!0;return!1}},{key:"areKeysDown",value:function(e){for(var t=0;t<e.length;t++)if(!this.isKeyDown(e[t]))return!1;return!0}},{key:"keysAreDown",value:function(){return Object.keys(this.keyState).length>0}},{key:"enterKeyDown",get:function(){return this.isKeyDown(xa.KEY_ENTER)}},{key:"shiftKeyDown",get:function(){return this.isAnyKeyInListDown(xa.SHIFT_KEYS)}},{key:"altKeyDown",get:function(){return this.isAnyKeyInListDown(xa.ALT_KEYS)}},{key:"ctrlKeyDown",get:function(){return this.isAnyKeyInListDown(xa.CONTROL_KEYS)}},{key:"timeDownForKey",value:function(e){return this.keyState[e].timeDown}},{key:"clearState",value:function(){this.keyState={}}},{key:"step",value:function(e){if(this.keysAreDown()){var t=1e3*e;for(var n in this.keyState)this.keyState.hasOwnProperty(n)&&this.keyState[n].keyDown&&(this.keyState[n].timeDown+=t)}}},{key:"attachToWindow",value:function(){var e=this;this.documentKeydownListener=function(t){e.keydownUpdate(t)},this.documentKeyupListener=function(t){e.keyupUpdate(t)};var t=function(){window.addEventListener("keyup",e.documentKeyupListener,!0),window.addEventListener("keydown",e.documentKeydownListener,!0),e.attachedToDocument=!0};if(document)t();else{window.addEventListener("load",(function e(){t(),window.removeEventListener("load",e)}))}}},{key:"setEnabled",value:function(e){this._enabled!==e&&(this._enabled=e,!e&&this.clearState())}},{key:"enabled",get:function(){return this.isEnabled()},set:function(e){this.setEnabled(e)}},{key:"isEnabled",value:function(){return this._enabled}},{key:"detachFromDocument",value:function(){window.removeEventListener("keyup",this.documentKeyupListener),window.removeEventListener("keydown",this.documentKeydownListener),this.documentKeyupListener=null,this.documentKeydownListener=null,this.attachedToDocument=!1}},{key:"dispose",value:function(){this.disposeKeyStateTracker()}}]),e}();Cr.register("KeyStateTracker",Uu);var Wu=new(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e)).attachToWindow(),i}return _createClass(n)}(Uu))({tandem:xe.GENERAL_CONTROLLER.createTandem("keyStateTracker")});Cr.register("globalKeyStateTracker",Wu);var ju=Wu,Xu=["interactiveHighlight","interactiveHighlightLayerable","interactiveHighlightEnabled"],Qu=function(e){var t=Ol("InteractiveHighlightingClass",Xu,function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];(e=t.call.apply(t,[this].concat(r)))._activationListener={enter:e._onPointerEntered.bind(_assertThisInitialized(e)),move:e._onPointerMove.bind(_assertThisInitialized(e)),exit:e._onPointerExited.bind(_assertThisInitialized(e)),down:e._onPointerDown.bind(_assertThisInitialized(e))},e._pointer=null,e.displays={},e._interactiveHighlight=null,e._interactiveHighlightLayerable=!1,e._interactiveHighlightEnabled=!0,e.interactiveHighlightChangedEmitter=new d,e._changedInstanceListener=e.onChangedInstance.bind(_assertThisInitialized(e)),e.changedInstanceEmitter.addListener(e._changedInstanceListener),e._interactiveHighlightingEnabledListener=e._onInteractiveHighlightingEnabledChange.bind(_assertThisInitialized(e));var s=e._onPointerRelease.bind(_assertThisInitialized(e)),o=e._onPointerCancel.bind(_assertThisInitialized(e));return e._pointerListener={up:s,cancel:o,interrupt:o},e}return _createClass(n,[{key:"isInteractiveHighlighting",get:function(){return!0}},{key:"setInteractiveHighlight",value:function(e){this._interactiveHighlight!==e&&(this._interactiveHighlight=e,this._interactiveHighlightLayerable&&(e.visible=!1),this.interactiveHighlightChangedEmitter.emit())}},{key:"interactiveHighlight",get:function(){return this.getInteractiveHighlight()},set:function(e){this.setInteractiveHighlight(e)}},{key:"getInteractiveHighlight",value:function(){return this._interactiveHighlight}},{key:"setInteractiveHighlightLayerable",value:function(e){this._interactiveHighlightLayerable!==e&&(this._interactiveHighlightLayerable=e,this._interactiveHighlight&&(this._interactiveHighlight.visible=!1,this.interactiveHighlightChangedEmitter.emit()))}},{key:"interactiveHighlightLayerable",get:function(){return this.getInteractiveHighlightLayerable()},set:function(e){this.setInteractiveHighlightLayerable(e)}},{key:"getInteractiveHighlightLayerable",value:function(){return this._interactiveHighlightLayerable}},{key:"setInteractiveHighlightEnabled",value:function(e){this._interactiveHighlightEnabled=e;for(var t=Object.keys(this.displays),n=0;n<t.length;n++){var i=this.displays[t[n]];this._interactiveHighlightingEnabledListener(i.focusManager.pointerHighlightsVisibleProperty.value)}}},{key:"getInteractiveHighlightEnabled",value:function(){return this._interactiveHighlightEnabled}},{key:"interactiveHighlightEnabled",get:function(){return this.getInteractiveHighlightEnabled()},set:function(e){this.setInteractiveHighlightEnabled(e)}},{key:"isInteractiveHighlightActivated",value:function(){for(var e=!1,t=Object.keys(this.displays),n=0;n<t.length;n++){var i=this.displays[t[n]].focusManager.pointerFocusProperty.value;if(i&&i.trail.lastNode()===this){e=!0;break}}return e}},{key:"interactiveHighlightActivated",get:function(){return this.isInteractiveHighlightActivated()}},{key:"dispose",value:function(){this.changedInstanceEmitter.removeListener(this._changedInstanceListener),this.hasInputListener(this._activationListener)&&this.removeInputListener(this._activationListener);for(var e=Object.keys(this.displays),t=0;t<e.length;t++){this.displays[e[t]].focusManager.pointerHighlightsVisibleProperty.unlink(this._interactiveHighlightingEnabledListener),delete this.displays[e[t]]}_get(_getPrototypeOf(n.prototype),"dispose",this)&&_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"_onPointerEntered",value:function(e){for(var t=Object.values(this.displays),n=0;n<t.length;n++){var i=t[n];null!==i.focusManager.pointerFocusProperty.value&&e.trail.equals(i.focusManager.pointerFocusProperty.value.trail)||i.focusManager.pointerFocusProperty.set(new ya(i,e.trail))}}},{key:"_onPointerMove",value:function(e){for(var t=Object.values(this.displays),n=0;n<t.length;n++){var i=t[n],r=e.trail.subtrailTo(this);null!==i.focusManager.pointerFocusProperty.value&&r.equals(i.focusManager.pointerFocusProperty.value.trail)||this.getDescendantsUseHighlighting(e.trail)||i.focusManager.pointerFocusProperty.set(new ya(i,r))}}},{key:"_onPointerExited",value:function(e){for(var t=Object.values(this.displays),n=0;n<t.length;n++){t[n].focusManager.pointerFocusProperty.set(null)}}},{key:"_onPointerDown",value:function(e){if(null===this._pointer){for(var t=Object.values(this.displays),n=0;n<t.length;n++){var i=t[n],r=i.focusManager.pointerFocusProperty.value;r&&i.focusManager.lockedPointerFocusProperty.set(new ya(r.display,r.trail.copy()))}this._pointer=e.pointer,this._pointer.addInputListener(this._pointerListener)}}},{key:"_onPointerRelease",value:function(e){for(var t=Object.values(this.displays),n=0;n<t.length;n++){t[n].focusManager.lockedPointerFocusProperty.value=null}this._pointer&&this._pointer.listeners.includes(this._pointerListener)&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null)}},{key:"_onPointerCancel",value:function(e){for(var t=Object.values(this.displays),n=0;n<t.length;n++){t[n].focusManager.pointerFocusProperty.set(null)}this._onPointerRelease(e)}},{key:"_onInteractiveHighlightingEnabledChange",value:function(e){var t=e&&this._interactiveHighlightEnabled,n=this.hasInputListener(this._activationListener);t&&!n?this.addInputListener(this._activationListener):!t&&n&&this.removeInputListener(this._activationListener)}},{key:"onChangedInstance",value:function(e,t){if(t)this.displays[e.trail.uniqueId]=e.display,e.display.focusManager.pointerHighlightsVisibleProperty.hasListener(this._interactiveHighlightingEnabledListener)||e.display.focusManager.pointerHighlightsVisibleProperty.link(this._interactiveHighlightingEnabledListener);else{var n=this.displays[e.trail.uniqueId];n&&0===e.node.instances.length&&n.focusManager.pointerHighlightsVisibleProperty.unlink(this._interactiveHighlightingEnabledListener),delete this.displays[e.trail.uniqueId]}}},{key:"getDescendantsUseHighlighting",value:function(e){for(var t=e.nodes.indexOf(this),n=e.nodes.slice(t+1,e.nodes.length),i=!1,r=0;r<n.length;r++)if(n[r].isInteractiveHighlighting){i=!0;break}return i}}],[{key:"_mixesInteractiveHighlighting",get:function(){return!0}}]),n}(e));return t.prototype._mutatorKeys=Xu.concat(t.prototype._mutatorKeys),t};Cr.register("InteractiveHighlighting",Qu);var Ku=Qu,Ju=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(Ku(jo));Cr.register("InteractiveHighlightingNode",Ju);var Zu=Ju,$u={enabledProperty:null,enabled:!0,enabledPropertyOptions:null,phetioEnabledPropertyInstrumented:!0,tandem:xe.OPTIONAL},ec=function(){function e(t){var n=this;_classCallCheck(this,e);var i=E()({},$u,t),r=!i.enabledProperty;this.enabledProperty=i.enabledProperty||new qo(i.enabled,A({tandem:i.phetioEnabledPropertyInstrumented?i.tandem.createTandem(qo.TANDEM_NAME):xe.OPT_OUT},i.enabledPropertyOptions)),this.disposeEnabledComponent=function(){r&&n.enabledProperty.dispose()}}return _createClass(e,[{key:"setEnabled",value:function(e){this.enabledProperty.value=e}},{key:"enabled",get:function(){return this.isEnabled()},set:function(e){this.setEnabled(e)}},{key:"isEnabled",value:function(){return this.enabledProperty.value}},{key:"dispose",value:function(){this.disposeEnabledComponent()}}]),e}();h.register("EnabledComponent",ec);var tc=new c("phetcommon"),nc={format:function(e){var t=arguments;return e.replace(/{(\d)}/g,(function(e,n){return t[+n+1]}))},fillIn:function(e,t){for(var n=e=e&&e.get?e.get():e,i=e.match(/\{\{[^{}]+\}\}/g)||[],r=0;r<i.length;r++){var a=i[r],s=a.replace("{{","").replace("}}","");if(void 0!==t[s]){var o=t[s]&&t[s].get?t[s].get():t[s];n=n.replace(a,o)}}return n},isEmbeddingMark:function(e){return"‪"===e||"‫"===e||"‬"===e},embeddedSlice:function(e,t,n){var i,r=[];for(void 0===n&&(n=e.length),n<0&&(n+=e.length);t<e.length&&nc.isEmbeddingMark(e.charAt(t));)t++;for(;n>=1&&nc.isEmbeddingMark(e.charAt(n-1));)n--;if(t>=n||t>=e.length)return"";for(var a=0;a<t;a++)"‪"===(i=e.charAt(a))||"‫"===i?r.push(i):"‬"===i&&r.pop();for(var s=r.length,o=r.slice(),l=e.slice(t,n),u=0;u<l.length;u++)"‪"===(i=l.charAt(u))||"‫"===i?r.push(i):"‬"===i&&(r.pop(),s=Math.min(r.length,s));var c=r,h=Math.max(0,s-1);return o=o.slice(h),c=c.slice(h),o.join("")+l+c.join("").replace(/./g,"‬")},embeddedSplit:function(e,t,n){if(void 0===t)return[e];var i,r=[],a=e;function s(){var e,n;if(t instanceof window.RegExp){var i=a.match(t);i?(e=i.index,n=i[0].length):e=-1}else e=a.indexOf(t),n=t.length;return{index:e,length:n}}for(var o=0;(i=s()).index>=0;){r.push(nc.embeddedSlice(e,o,o+i.index));var l=i.index+i.length;a=a.slice(l),o+=l}return r.push(nc.embeddedSlice(e,o)),void 0!==n&&(r=_.first(r,n)),r},embeddedDebugString:function(e){return e.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")},assertContainsKey:function(e,t){},capitalize:function(e){return e[0].toUpperCase()+e.slice(1)}};tc.register("StringUtils",nc);var ic=nc,rc=new c("utteranceQueue"),ac={nameObjectContextHint:"{{NAME}}, {{OBJECT}}, {{CONTEXT}} {{HINT}}",nameObjectContext:"{{NAME}}, {{OBJECT}}, {{CONTEXT}}",nameObjectHint:"{{NAME}}, {{OBJECT}}, {{HINT}}",nameContextHint:"{{NAME}}, {{CONTEXT}} {{HINT}}",nameObject:"{{NAME}}, {{OBJECT}}",nameContext:"{{NAME}}, {{CONTEXT}}",nameHint:"{{NAME}}, {{HINT}}",name:"{{NAME}}",objectContextHint:"{{OBJECT}}, {{CONTEXT}} {{HINT}}",objectContext:"{{OBJECT}}, {{CONTEXT}}",objectHint:"{{OBJECT}}, {{HINT}}",contextHint:"{{CONTEXT}} {{HINT}}",object:"{{OBJECT}}",context:"{{CONTEXT}}",hint:"{{HINT}}"},sc=function(){function e(t){_classCallCheck(this,e);var n=E()({},ac,t);this.nameObjectContextHint=n.nameObjectContextHint,this.nameObjectContext=n.nameObjectContext,this.nameObjectHint=n.nameObjectHint,this.nameContextHint=n.nameContextHint,this.nameObject=n.nameObject,this.nameContext=n.nameContext,this.nameHint=n.nameHint,this.name=n.name,this.objectContextHint=n.objectContextHint,this.objectContext=n.objectContext,this.objectHint=n.objectHint,this.contextHint=n.contextHint,this.object=n.object,this.context=n.context,this.hint=n.hint}return _createClass(e,[{key:"getResponsePattern",value:function(e){var t=this[e];return t}}],[{key:"createPatternKey",value:function(e,t,n,i){var r="";return e&&(r=r.concat("NAME".concat("_"))),t&&(r=r.concat("OBJECT".concat("_"))),n&&(r=r.concat("CONTEXT".concat("_"))),i&&(r=r.concat("HINT".concat("_"))),_.camelCase(r)}}]),e}();_defineProperty(sc,"DEFAULT_RESPONSE_PATTERNS",new sc),rc.register("ResponsePatternCollection",sc);var oc=sc,lc={nameResponse:null,objectResponse:null,contextResponse:null,hintResponse:null,ignoreProperties:!1,responsePatternCollection:oc.DEFAULT_RESPONSE_PATTERNS},uc=function(){function e(t){_classCallCheck(this,e);var n=E()({},lc,t);this._nameResponse=n.nameResponse,this._objectResponse=n.objectResponse,this._contextResponse=n.contextResponse,this._hintResponse=n.hintResponse,this.ignoreProperties=n.ignoreProperties,this.responsePatternCollection=n.responsePatternCollection}return _createClass(e,[{key:"getNameResponse",value:function(){return e.getResponseText(this._nameResponse)}},{key:"nameResponse",get:function(){return this.getNameResponse()},set:function(e){this.setNameResponse(e)}},{key:"setNameResponse",value:function(e){this._nameResponse=e}},{key:"getObjectResponse",value:function(){return e.getResponseText(this._objectResponse)}},{key:"objectResponse",get:function(){return this.getObjectResponse()},set:function(e){this.setObjectResponse(e)}},{key:"setObjectResponse",value:function(e){this._objectResponse=e}},{key:"getContextResponse",value:function(){return e.getResponseText(this._contextResponse)}},{key:"contextResponse",get:function(){return this.getContextResponse()},set:function(e){this.setContextResponse(e)}},{key:"setContextResponse",value:function(e){this._contextResponse=e}},{key:"getHintResponse",value:function(){return e.getResponseText(this._hintResponse)}},{key:"hintResponse",get:function(){return this.getHintResponse()},set:function(e){this.setHintResponse(e)}},{key:"setHintResponse",value:function(e){this._hintResponse=e}},{key:"copy",value:function(){return new e(this.serialize())}},{key:"serialize",value:function(){return{nameResponse:this.nameResponse,objectResponse:this.objectResponse,contextResponse:this.contextResponse,hintResponse:this.hintResponse,ignoreProperties:this.ignoreProperties,responsePatternCollection:this.responsePatternCollection}}}],[{key:"getResponseText",value:function(e){return e instanceof ht||e instanceof st?e.value:"function"==typeof e?e():e}}]),e}();_defineProperty(uc,"DEFAULT_OPTIONS",lc),rc.register("ResponsePacket",uc);var cc=uc,hc=new(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).nameResponsesEnabledProperty=new pt(!0,{tandem:e.tandem.createTandem("nameResponsesEnabledProperty"),phetioState:!1}),i.objectResponsesEnabledProperty=new pt(!1,{tandem:e.tandem.createTandem("objectResponsesEnabledProperty"),phetioState:!1}),i.contextResponsesEnabledProperty=new pt(!1,{tandem:e.tandem.createTandem("contextResponsesEnabledProperty"),phetioState:!1}),i.hintResponsesEnabledProperty=new pt(!1,{tandem:e.tandem.createTandem("hintResponsesEnabledProperty"),phetioState:!1}),i}return _createClass(n,[{key:"reset",value:function(){this.nameResponsesEnabledProperty.reset(),this.objectResponsesEnabledProperty.reset(),this.contextResponsesEnabledProperty.reset(),this.hintResponsesEnabledProperty.reset()}},{key:"collectResponses",value:function(e){var t=E()({},cc.DEFAULT_OPTIONS,e),n=!(!t.nameResponse||!this.nameResponsesEnabledProperty.get()&&!t.ignoreProperties),i=!(!t.objectResponse||!this.objectResponsesEnabledProperty.get()&&!t.ignoreProperties),r=!(!t.contextResponse||!this.contextResponsesEnabledProperty.get()&&!t.ignoreProperties),a=!(!t.hintResponse||!this.hintResponsesEnabledProperty.get()&&!t.ignoreProperties),s=oc.createPatternKey(n,i,r,a),o="";if(s){var l=t.responsePatternCollection.getResponsePattern(s);o=ic.fillIn(l,{NAME:t.nameResponse,OBJECT:t.objectResponse,CONTEXT:t.contextResponse,HINT:t.hintResponse})}return o}}]),n}(Be))({tandem:xe.GENERAL_MODEL.createTandem("responseCollector"),phetioState:!1,phetioDocumentation:'A collection of Properties that determine what level of responses to provide through the "voicing" feature.'});rc.register("responseCollector",hc);var dc=hc,pc=1,fc=function(){function e(t){_classCallCheck(this,e);var n=S()({alert:null,predicate:function(){return!0},canAnnounceProperties:[],descriptionCanAnnounceProperties:[],voicingCanAnnounceProperties:[],alertStableDelay:200,alertMaximumDelay:Number.MAX_VALUE,announcerOptions:{},priority:1},t);this.id=pc++,this._alert=n.alert,this.predicate=n.predicate,this.canAnnounceProperty=new mc({dependentProperties:n.canAnnounceProperties}),this.descriptionCanAnnounceProperty=new mc({dependentProperties:n.descriptionCanAnnounceProperties}),this.voicingCanAnnounceProperty=new mc({dependentProperties:n.voicingCanAnnounceProperties}),this.alertStableDelay=n.alertStableDelay,this.alertMaximumDelay=n.alertMaximumDelay,this.announcerOptions=n.announcerOptions,this.priorityProperty=new Nt(n.priority),this.previousAlertText=null}return _createClass(e,[{key:"getAlertText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.alertableToText(this._alert,t);return this.previousAlertText=n,n}},{key:"getAlert",value:function(){return this._alert}},{key:"alert",get:function(){return this.getAlert()},set:function(e){this.setAlert(e)}},{key:"setAlert",value:function(e){this._alert=e}},{key:"setAlertStableDelay",value:function(e){this.alertStableDelay=e}},{key:"toString",value:function(){return"Utterance_".concat(this.id,"#").concat(this.getAlertText())}},{key:"toStateObject",value:function(){return{alert:Qe(ro([Te,Lt])).toStateObject(this.getAlertText())}}},{key:"reset",value:function(){this.previousAlertText=null}},{key:"setCanAnnounceProperties",value:function(e){this.canAnnounceProperty.setDependentProperties(e)}},{key:"canAnnounceProperties",get:function(){return this.getCanAnnounceProperties()},set:function(e){this.setCanAnnounceProperties(e)}},{key:"getCanAnnounceProperties",value:function(){return this.canAnnounceProperty.getDependentProperties()}},{key:"setDescriptionCanAnnounceProperties",value:function(e){this.descriptionCanAnnounceProperty.setDependentProperties(e)}},{key:"descriptionCanAnnounceProperties",get:function(){return this.getDescriptionCanAnnounceProperties()},set:function(e){this.setDescriptionCanAnnounceProperties(e)}},{key:"getDescriptionCanAnnounceProperties",value:function(){return this.descriptionCanAnnounceProperty.getDependentProperties()}},{key:"setVoicingCanAnnounceProperties",value:function(e){this.voicingCanAnnounceProperty.setDependentProperties(e)}},{key:"voicingCanAnnounceProperties",get:function(){return this.getVoicingCanAnnounceProperties()},set:function(e){this.setVoicingCanAnnounceProperties(e)}},{key:"getVoicingCanAnnounceProperties",value:function(){return this.voicingCanAnnounceProperty.getDependentProperties()}},{key:"dispose",value:function(){this.canAnnounceProperty.dispose(),this.descriptionCanAnnounceProperty.dispose(),this.voicingCanAnnounceProperty.dispose(),this.priorityProperty.dispose()}}],[{key:"getAlertStringFromResponsePacket",value:function(e,t){var n=e.serialize();return t||(n.ignoreProperties=!0),dc.collectResponses(n)}},{key:"alertableToText",value:function(t){var n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"==typeof t)n=t();else if(t instanceof cc)n=e.getAlertStringFromResponsePacket(t,i);else{if(t instanceof e)return t.getAlertText(i);n=t instanceof ht||t instanceof st?t.value:t}return n}}]),e}();_defineProperty(fc,"TOP_PRIORITY",10),_defineProperty(fc,"HIGH_PRIORITY",5),_defineProperty(fc,"MEDIUM_PRIORITY",2),_defineProperty(fc,"DEFAULT_PRIORITY",1),_defineProperty(fc,"LOW_PRIORITY",0),_defineProperty(fc,"UtteranceIO",new U("UtteranceIO",{valueType:fc,documentation:"Announces text to a specific browser technology (like aria-live or web speech)",toStateObject:function(e){return e.toStateObject()},stateSchema:{alert:Qe(ro([Te,Lt]))}}));var mc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({dependentProperties:[]},e),a=new dt(new st(!1));return(i=t.call(this,a))._dependentProperties=[],i.implementationProperty=a,i.setDependentProperties(r.dependentProperties),i}return _createClass(n,[{key:"setDependentProperties",value:function(e){this.implementationProperty.value&&this.implementationProperty.value.dispose();var t=0===e.length?[new st(!0)]:e;this.implementationProperty.value=Ut.and(t),this._dependentProperties=e}},{key:"dependentProperties",get:function(){return this.getDependentProperties()},set:function(e){this.setDependentProperties(e)}},{key:"getDependentProperties",value:function(){return this._dependentProperties.slice(0)}},{key:"dispose",value:function(){this.implementationProperty.dispose(),this._dependentProperties=[],_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}($t);rc.register("Utterance",fc);var gc=fc,yc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({respectResponseCollectorProperties:!0,tandem:xe.OPTIONAL,phetioType:n.AnnouncerIO,phetioState:!1},e);return _defineProperty(_assertThisInitialized(i=t.call(this,r)),"readyToAnnounce",!0),_defineProperty(_assertThisInitialized(i),"hasSpoken",!1),i.respectResponseCollectorProperties=r.respectResponseCollectorProperties,i.announcementCompleteEmitter=new Et({parameters:[{name:"utterance",phetioType:gc.UtteranceIO},{name:"text",phetioType:Qe(ro([Te,Lt]))}],tandem:r.tandem.createTandem("announcementCompleteEmitter"),phetioReadOnly:!0,phetioDocumentation:"The announcement that has just completed. The Utterance text could potentially differ from the exact text that was announced, so both are emitted. Use `text` for an exact match of what was announced."}),i}return _createClass(n,[{key:"shouldUtteranceCancelOther",value:function(e,t){return t.priorityProperty.value<e.priorityProperty.value}},{key:"onUtterancePriorityChange",value:function(e){}}]),n}(Be);_defineProperty(yc,"AnnouncerIO",new U("AnnouncerIO",{valueType:yc,documentation:"Announces text to a specific browser technology (like aria-live or web speech)"})),rc.register("Announcer",yc);var vc=yc,Ac={initialize:function(){if(window.speechSynthesis||window.SpeechSynthesis||window.SpeechSynthesisUtterance)throw new Error("SpeechSynthesis is supported here, the polyfill should not overwrite it");window.SpeechSynthesis=window.parent.SpeechSynthesis,window.speechSynthesis=new window.parent.SpeechSynthesis,window.SpeechSynthesisUtterance=window.parent.SpeechSynthesisUtterance}};rc.register("SpeechSynthesisParentPolyfill",Ac);var bc=Ac;window.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters.speechSynthesisFromParent&&bc.initialize();var Sc={cancelSelf:!0,cancelOther:!0},Ec=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({respectResponseCollectorProperties:!1,tandem:xe.OPTIONAL},e);return(i=t.call(this,r)).voiceProperty=new dt(null,{tandem:r.tandem.createTandem("voiceProperty"),phetioValueType:Qe(Vc),phetioState:!1}),i.voiceRateProperty=new Nt(1,{range:new Tt(.75,2),tandem:r.tandem.createTandem("voiceRateProperty"),phetioState:!1}),i.voicePitchProperty=new Nt(1,{range:new Tt(.5,2),tandem:r.tandem.createTandem("voicePitchProperty"),phetioState:!1}),i.voiceVolumeProperty=new Nt(1,{range:new Tt(0,1),tandem:r.tandem.createTandem("voiceVolumeProperty"),phetioState:!1}),i.hasSpoken=!1,i.timeSinceWakingEngine=0,i.timeSincePauseResume=0,i.timeSincePendingUtterance=0,i.timeSinceUtteranceEnd=125,i.startSpeakingEmitter=new Et({parameters:[{valueType:"string"},{valueType:gc}]}),i.endSpeakingEmitter=new Et({parameters:[{valueType:"string"},{valueType:gc}]}),i.voicesChangedEmitter=new Et,i.enabledComponentImplementation=new ec({enabled:!1,tandem:r.tandem.createTandem("enabledProperty"),enabledPropertyOptions:{phetioState:!1,phetioFeatured:!1}}),i.enabledProperty=i.enabledComponentImplementation.enabledProperty,i.mainWindowVoicingEnabledProperty=new pt(!0,{tandem:r.tandem.createTandem("mainWindowVoicingEnabledProperty"),phetioState:!1}),i.voicingFullyEnabledProperty=Ut.and([i.enabledProperty,i.mainWindowVoicingEnabledProperty]),i._speechAllowedAndFullyEnabledProperty=new pt(!1),i.speechAllowedAndFullyEnabledProperty=i._speechAllowedAndFullyEnabledProperty,i.synth=null,i.voices=[],i.speakingSpeechSynthesisUtteranceWrapper=null,i.initialized=!1,i.canSpeakProperty=null,i.boundHandleCanSpeakChange=i.handleCanSpeakChange.bind(_assertThisInitialized(i)),i.boundHandleCanAnnounceChange=i.handleCanAnnounceChange.bind(_assertThisInitialized(i)),i.currentlySpeakingUtterance=null,i.pendingSpeechSynthesisUtteranceWrapper=null,i}return _createClass(n,[{key:"initialize",value:function(e,t){var n=this,i=S()({speechAllowedProperty:new pt(!0)},t);this.synth=window.speechSynthesis,this.canSpeakProperty=Ut.and([i.speechAllowedProperty,this.enabledProperty]),this.canSpeakProperty.link(this.boundHandleCanSpeakChange),nn.multilink([i.speechAllowedProperty,this.voicingFullyEnabledProperty],(function(e,t){n._speechAllowedAndFullyEnabledProperty.value=e&&t})),this.getSynth().onvoiceschanged=function(){n.populateVoices()},this.populateVoices();e.addListener((function t(){n.timeSinceWakingEngine=5e3,e.removeListener(t)})),mt.addListener(this.step.bind(this)),this.initialized=!0}},{key:"step",value:function(e){e*=1e3;var t=this.getSynth();this.initialized&&t&&(this.hasSpoken||(this.hasSpoken=t.speaking),this.timeSinceUtteranceEnd=t.speaking?0:this.timeSinceUtteranceEnd+e,this.timeSincePendingUtterance=this.pendingSpeechSynthesisUtteranceWrapper?this.timeSincePendingUtterance+e:0,this.timeSincePendingUtterance>5e3&&(this.handleSpeechSynthesisEnd(this.pendingSpeechSynthesisUtteranceWrapper.announceText,this.pendingSpeechSynthesisUtteranceWrapper),this.pendingSpeechSynthesisUtteranceWrapper=null,this.cancelSynth()),this.timeSinceUtteranceEnd>125&&!this.pendingSpeechSynthesisUtteranceWrapper&&(this.readyToAnnounce=!0),la.chromium&&!la.android&&this.voiceProperty.value&&!this.voiceProperty.value.localService&&(this.timeSincePauseResume=t.speaking?this.timeSincePauseResume+e:0,this.timeSincePauseResume>1e4&&(this.timeSincePauseResume=0,t.pause(),t.resume())),this.timeSinceWakingEngine+=e,!t.speaking&&this.timeSinceWakingEngine>5e3&&(this.timeSinceWakingEngine=0,t.speak(new SpeechSynthesisUtterance(""))))}},{key:"handleCanSpeakChange",value:function(e){e||this.cancel()}},{key:"populateVoices",value:function(){var e=this.getSynth();e&&(this.voices=_.uniqBy(e.getVoices(),(function(e){return e.name})),this.voicesChangedEmitter.emit())}},{key:"getPrioritizedVoices",value:function(){var e=this.voices.slice(),t=function(t){return t.name.includes("Google")?-1:t.name.includes("Fred")?e.length:e.indexOf(t)};return e.sort((function(e,n){return t(e)-t(n)}))}},{key:"announce",value:function(e,t){this.initialized&&this.canSpeakProperty&&this.canSpeakProperty.value?this.requestSpeech(e,t):this.handleAnnouncementFailure(t,e)}},{key:"handleAnnouncementFailure",value:function(e,t){this.announcementCompleteEmitter.emit(e,t)}},{key:"speakIgnoringEnabled",value:function(e){this.initialized&&this.requestSpeech(e.getAlertText(this.respectResponseCollectorProperties),e)}},{key:"requestSpeech",value:function(e,t){var n=this;if(e){var i=Ls(e+"").split("<br/>").join(" ").split("<br>").join(" ");D(i,I.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR);var r=new SpeechSynthesisUtterance(i);r.voice=this.voiceProperty.value,r.pitch=this.voicePitchProperty.value,r.rate=this.voiceRateProperty.value,r.volume=this.voiceVolumeProperty.value;var a=function(){n.handleSpeechSynthesisEnd(i,s)};r.addEventListener("start",(function e(){n.startSpeakingEmitter.emit(i,t),n.pendingSpeechSynthesisUtteranceWrapper=null,n.currentlySpeakingUtterance=t,t.canAnnounceProperty.link(n.boundHandleCanAnnounceChange),t.voicingCanAnnounceProperty.link(n.boundHandleCanAnnounceChange),n.speakingSpeechSynthesisUtteranceWrapper=s,r.removeEventListener("start",e)})),r.addEventListener("end",a);var s=new kc(t,e,r,a);r.addEventListener("error",a),this.readyToAnnounce=!1,this.timeSinceUtteranceEnd=0,this.pendingSpeechSynthesisUtteranceWrapper=s,this.getSynth().speak(r)}else this.handleAnnouncementFailure(t,e)}},{key:"handleCanAnnounceChange",value:function(e){e||this.cancelUtterance(this.currentlySpeakingUtterance)}},{key:"handleSpeechSynthesisEnd",value:function(e,t){this.endSpeakingEmitter.emit(e,t.utterance),this.announcementCompleteEmitter.emit(t.utterance,t.speechSynthesisUtterance.text),t.speechSynthesisUtterance.removeEventListener("end",t.endListener);var n=t.utterance.canAnnounceProperty;n.hasListener(this.boundHandleCanAnnounceChange)&&n.unlink(this.boundHandleCanAnnounceChange);var i=t.utterance.voicingCanAnnounceProperty;i.hasListener(this.boundHandleCanAnnounceChange)&&i.unlink(this.boundHandleCanAnnounceChange),this.speakingSpeechSynthesisUtteranceWrapper=null,this.pendingSpeechSynthesisUtteranceWrapper=null,this.currentlySpeakingUtterance=null}},{key:"getSynth",value:function(){return this.synth}},{key:"cancel",value:function(){if(this.initialized){var e=this.speakingSpeechSynthesisUtteranceWrapper?this.speakingSpeechSynthesisUtteranceWrapper.utterance:this.pendingSpeechSynthesisUtteranceWrapper?this.pendingSpeechSynthesisUtteranceWrapper.utterance:null;e&&this.cancelUtterance(e)}}},{key:"cancelUtterance",value:function(e){var t=e===this.currentlySpeakingUtterance?this.speakingSpeechSynthesisUtteranceWrapper:this.pendingSpeechSynthesisUtteranceWrapper&&e===this.pendingSpeechSynthesisUtteranceWrapper.utterance?this.pendingSpeechSynthesisUtteranceWrapper:null;t&&(this.handleSpeechSynthesisEnd(t.announceText,t),this.cancelSynth())}},{key:"shouldUtteranceCancelOther",value:function(e,t){var n,i=E()({},Sc,e.announcerOptions);return t.priorityProperty.value!==e.priorityProperty.value?n=t.priorityProperty.value<e.priorityProperty.value:(n=i.cancelOther,t&&t===e&&(n=i.cancelSelf)),n}},{key:"onUtterancePriorityChange",value:function(e){this.currentlySpeakingUtterance&&this.shouldUtteranceCancelOther(e,this.currentlySpeakingUtterance)&&this.cancelUtterance(this.currentlySpeakingUtterance)}},{key:"cancelSynth",value:function(){var e=this.getSynth();e&&e.cancel()}}],[{key:"isSpeechSynthesisSupported",value:function(){return!!window.speechSynthesis&&!!window.SpeechSynthesisUtterance}}]),n}(vc),kc=_createClass((function e(t,n,i,r){_classCallCheck(this,e),this.utterance=t,this.announceText=n,this.speechSynthesisUtterance=i,this.endListener=r}));var Vc=new U("SpeechSynthesisVoiceIO",{isValidValue:function(e){return!0},toStateObject:function(e){return e.name}});rc.register("SpeechSynthesisAnnouncer",Ec);var wc=new(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=S()({respectResponseCollectorProperties:!0,tandem:xe.OPTIONAL,phetioDocumentation:"Announcer that manages the voicing feature, providing audio responses via WebAudio."},e);return t.call(this,i)}return _createClass(n,[{key:"initialize",value:function(e,t){var i=this;_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),ju.keyupEmitter.addListener((function(e){xa.isControlKey(e)&&i.cancel()}))}}]),n}(Ec))({tandem:xe.GLOBAL_VIEW.createTandem("voicingManager"),phetioDocumentation:'The Announcer responsible for announcing` to WebSpeech for the "voicing" feature.'});Cr.register("voicingManager",wc);var _c=wc,Cc=1,xc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).attributeString=e,i}return _createClass(n)}(ee);function Pc(e){for(var t=e.attributeString,n=document.createElement("div"),i=1;i<=4;i++){var r=document.createElement("p");r.setAttribute("id","elements-".concat(Cc,"-").concat(t,"-").concat(i)),r.setAttribute("aria-live",t),n.appendChild(r)}return n}_defineProperty(xc,"POLITE",new xc("polite")),_defineProperty(xc,"ASSERTIVE",new xc("assertive")),_defineProperty(xc,"enumeration",new re(xc));var Tc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({respectResponseCollectorProperties:!1},e);(i=t.call(this,r)).politeElementIndex=0,i.assertiveElementIndex=0,i.ariaLiveContainer=document.createElement("div"),i.ariaLiveContainer.setAttribute("id","aria-live-elements-".concat(Cc)),i.ariaLiveContainer.setAttribute("style","position: absolute; left: 0px; top: 0px; width: 0px; height: 0px; clip: rect(0px 0px 0px 0px); pointer-events: none;");var a=Pc(xc.POLITE),s=Pc(xc.ASSERTIVE);return i.ariaLiveContainer.appendChild(a),i.ariaLiveContainer.appendChild(s),i.politeElements=Array.from(a.children),i.assertiveElements=Array.from(s.children),Cc++,i}return _createClass(n,[{key:"announce",value:function(e,t,n){var i=S()({ariaLivePriority:xc.POLITE},n);if(this.hasSpoken=!0,e)if(i.ariaLivePriority===xc.POLITE){var r=this.politeElements[this.politeElementIndex];this.updateLiveElement(r,e,t),this.politeElementIndex=(this.politeElementIndex+1)%this.politeElements.length}else if(i.ariaLivePriority===xc.ASSERTIVE){var a=this.assertiveElements[this.assertiveElementIndex];this.updateLiveElement(a,e,t),this.assertiveElementIndex=(this.assertiveElementIndex+1)%this.assertiveElements.length}this.announcementCompleteEmitter.emit(t,e)}},{key:"cancel",value:function(){}},{key:"cancelUtterance",value:function(e){}},{key:"updateLiveElement",value:function(e,t,i){var r=this;e.textContent="",e.hidden=!1,this.readyToAnnounce=!1,mt.setTimeout((function(){i.predicate()&&(Gs.setTextContent(e,t),mt.setTimeout((function(){la.safari?e.hidden=!0:e.textContent="",r.readyToAnnounce=!0}),n.ARIA_LIVE_DELAY))}),0)}}]),n}(vc);_defineProperty(Tc,"ARIA_LIVE_DELAY",200),_defineProperty(Tc,"AriaLive",xc),rc.register("AriaLiveAnnouncer",Tc);var Mc=Tc,Lc=function(){function e(t){_classCallCheck(this,e),this.utterance=t,this.timeInQueue=0,this.stableTime=0,this.announcingUtterancePriorityListener=null}return _createClass(e,[{key:"resetTimingVariables",value:function(){this.timeInQueue=0,this.stableTime=0}}]),e}();rc.register("UtteranceWrapper",Lc);var Ic=Lc,Rc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({debug:!1,initialize:!0,featureSpecificAnnouncingControlPropertyName:null},i);return(r=t.call(this,a)).announcer=e,r._initialized=a.initialize,r.featureSpecificAnnouncingControlPropertyName=a.featureSpecificAnnouncingControlPropertyName,r.queue=[],r._muted=!1,r._enabled=!0,r.utteranceToPriorityListenerMap=new Map,r.announcingUtteranceWrapper=null,r.debug=a.debug,r.announcer.announcementCompleteEmitter.addListener((function(e){if(r.announcingUtteranceWrapper&&e===r.announcingUtteranceWrapper.utterance){var t=r.announcingUtteranceWrapper.announcingUtterancePriorityListener;r.announcingUtteranceWrapper.utterance.priorityProperty.hasListener(t)&&(r.announcingUtteranceWrapper.utterance.priorityProperty.unlink(t),r.announcingUtteranceWrapper.announcingUtterancePriorityListener=null,r.announcingUtteranceWrapper=null)}})),r.stepQueueListener=null,r._initialized&&(r.stepQueueListener=r.stepQueue.bind(_assertThisInitialized(r)),mt.addListener(r.stepQueueListener)),r}return _createClass(n,[{key:"length",get:function(){return this.queue.length}},{key:"addToBack",value:function(e){if(this.initializedAndEnabled)if(this.announcer.hasSpoken){var t=this.prepareUtterance(e);this.queue.push(t),this.debug&&console.log("addToBack"),this.addPriorityListenerAndPrioritizeQueue(t)}else this.announceImmediately(e)}},{key:"addToFront",value:function(e){if(x("`addToFront()` has been deprecated because it is confusing, and most of the time doesn't do what is expected, because Utterances are announced based on time-in-queue first, and then position in the queue. It is recommended to use addToBack, and then timing variables on Utterances, or instead call queue.clear() before adding a more important alert to the queue."),this.initializedAndEnabled){var t=this.prepareUtterance(e);this.queue.unshift(t)}}},{key:"addPriorityListenerAndPrioritizeQueue",value:function(e){var t=this,n=function(){t.prioritizeUtterances(e)};e.utterance.priorityProperty.lazyLink(n),this.utteranceToPriorityListenerMap.set(e.utterance,n),this.prioritizeUtterances(e)}},{key:"prepareUtterance",value:function(e){e instanceof gc||(e=new gc({alert:e}));var t=new Ic(e);return this.removeOthersAndUpdateUtteranceWrapper(t),t.stableTime=0,t}},{key:"removeUtterance",value:function(e){var t=function(t){return t.utterance===e},n=_.remove(this.queue,t);this.removePriorityListeners(n)}},{key:"prioritizeUtterances",value:function(e){for(var t=this.queue.indexOf(e),n=t>=0,i=n?t-1:-1;i>=0;i--){var r=this.queue[i];this.shouldUtteranceCancelOther(e.utterance,r.utterance)&&this.removeUtterance(r.utterance)}if(n){var a=this.queue[t+1];a&&this.shouldUtteranceCancelOther(a.utterance,e.utterance)&&this.removeUtterance(e.utterance)}this.queue.length>0&&this.announcer.onUtterancePriorityChange(this.queue[0].utterance)}},{key:"shouldUtteranceCancelOther",value:function(e,t){return this.announcer.shouldUtteranceCancelOther(e,t)}},{key:"removeOthersAndUpdateUtteranceWrapper",value:function(e){for(var t=[],n=0;n<this.queue.length;n++){var i=this.queue[n];i.utterance===e.utterance&&t.push(i.timeInQueue)}t.length>=1&&(e.timeInQueue=Math.max.apply(Math,t));var r=_.remove(this.queue,(function(t){return t.utterance===e.utterance}));this.removePriorityListeners(r)}},{key:"initializedAndEnabled",get:function(){return this._enabled&&this._initialized}},{key:"getNextUtterance",value:function(){for(var e=null,t=0;t<this.queue.length;t++){var n=this.queue[t];if(n.stableTime>n.utterance.alertStableDelay||n.timeInQueue>n.utterance.alertMaximumDelay){e=n;break}}return e}},{key:"hasUtterance",value:function(e){for(var t=0;t<this.queue.length;t++){if(e===this.queue[t].utterance)return!0}return!1}},{key:"clear",value:function(){this.removePriorityListeners(this.queue),this.queue.length=0}},{key:"cancelUtterance",value:function(e){this.announcer.cancelUtterance(e),this.hasUtterance(e)&&this.removeUtterance(e)}},{key:"cancel",value:function(){this.clear(),this.announcer.cancel()}},{key:"removePriorityListeners",value:function(e){var t=this;e.forEach((function(e){return t.removePriorityListener(e.utterance)}))}},{key:"removePriorityListener",value:function(e){var t=this.utteranceToPriorityListenerMap.get(e);t&&(e.priorityProperty.unlink(t),this.utteranceToPriorityListenerMap.delete(e))}},{key:"setMuted",value:function(e){this._muted=e}},{key:"muted",get:function(){return this.getMuted()},set:function(e){this.setMuted(e)}},{key:"getMuted",value:function(){return this._muted}},{key:"setEnabled",value:function(e){this._enabled=e}},{key:"enabled",get:function(){return this.isEnabled()},set:function(e){this.setEnabled(e)}},{key:"isEnabled",value:function(){return this._enabled}},{key:"stepQueue",value:function(e){if(this._enabled&&(e*=1e3,this.queue.length>0)){for(var t=0;t<this.queue.length;t++){var n=this.queue[t];n.timeInQueue+=e,n.stableTime+=e}var i=this.getNextUtterance();i&&this.attemptToAnnounce(i)}}},{key:"announceImmediately",value:function(e){if(this.initializedAndEnabled&&(e instanceof gc||(e=new gc({alert:e})),null===this.announcingUtteranceWrapper||this.announcer.shouldUtteranceCancelOther(e,this.announcingUtteranceWrapper.utterance))){var t=this.prepareUtterance(e);t.stableTime=Number.POSITIVE_INFINITY,t.timeInQueue=Number.POSITIVE_INFINITY,this.queue.unshift(t),this.addPriorityListenerAndPrioritizeQueue(t),this.queue.includes(t)&&this.attemptToAnnounce(t)}}},{key:"attemptToAnnounce",value:function(e){var t=this,n=e.utterance;if(this.announcer.readyToAnnounce){var i=n.getAlertText(this.announcer.respectResponseCollectorProperties);this.debug&&console.log("ready to announce in attemptToAnnounce(): ",i);var r=!this.featureSpecificAnnouncingControlPropertyName||n[this.featureSpecificAnnouncingControlPropertyName].value,a=n.canAnnounceProperty.value&&n.predicate()&&r;!this._muted&&a&&""!==i?(this.announcingUtteranceWrapper=e,this.announcingUtteranceWrapper.announcingUtterancePriorityListener=function(){t.prioritizeUtterances(e)},e.utterance.priorityProperty.link(this.announcingUtteranceWrapper.announcingUtterancePriorityListener),this.debug&&console.log("announcing: ",i),this.announcer.announce(i,n,n.announcerOptions)):this.debug&&console.log("announcer readyToAnnounce but utterance cannot announce, will not be spoken: ",i),this.queue.includes(e)&&this.removeUtterance(e.utterance)}else this.debug&&console.log("announcer not readyToAnnounce")}},{key:"dispose",value:function(){this._initialized&&mt.removeListener(this.stepQueueListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"fromFactory",value:function(){var e=new Mc,t=new n(e),i=e.ariaLiveContainer;document.body?document.body.appendChild(i):document.children[0].appendChild(i);var r=0;return window.requestAnimationFrame((function e(t){var n=t-r;r=t,phet.axon.stepTimer.emit(n/1e3),window.requestAnimationFrame(e)})),t}}]),n}(Be);rc.register("UtteranceQueue",Rc);var Dc=Rc,Nc=new Dc(_c,{featureSpecificAnnouncingControlPropertyName:"voicingCanAnnounceProperty"});Nc.enabled=!1,Cr.register("voicingUtteranceQueue",Nc);var qc=Nc;var Oc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e)}return _createClass(n)}(gc),Bc=["voicingNameResponse","voicingObjectResponse","voicingContextResponse","voicingHintResponse","voicingUtterance","voicingResponsePatternCollection","voicingIgnoreVoicingManagerProperties","voicingFocusListener"],Gc=function e(t){var n=Ol("Voicing",Bc,function(t){_inherits(i,t);var n=_createSuper(i);function i(){var e;_classCallCheck(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r)))._boundInstanceCanVoiceChangeListener=e.onInstanceCanVoiceChange.bind(_assertThisInitialized(e)),e._voicingUtterance=null,i.prototype.initialize.call(_assertThisInitialized(e)),e}return _createClass(i,[{key:"initialize",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _get(_getPrototypeOf(i.prototype),"initialize",this)&&_get(_getPrototypeOf(i.prototype),"initialize",this).call(this,n),this._voicingCanSpeakProperty=new st(!0),this._voicingResponsePacket=new cc,this._voicingFocusListener=this.defaultFocusListener,this.setVoicingUtterance(new Oc),this._voicingCanSpeakCount=0,this._boundInstancesChangedListener=this.addOrRemoveInstanceListeners.bind(this),this.changedInstanceEmitter.addListener(this._boundInstancesChangedListener),this._speakContentOnFocusListener={focus:function(t){e._voicingFocusListener&&e._voicingFocusListener(t)}},this.addInputListener(this._speakContentOnFocusListener),this}},{key:"voicingSpeakFullResponse",value:function(e){var t=k({},e);t.hasOwnProperty("nameResponse")||(t.nameResponse=this._voicingResponsePacket.nameResponse),t.hasOwnProperty("objectResponse")||(t.objectResponse=this._voicingResponsePacket.objectResponse),t.hasOwnProperty("contextResponse")||(t.contextResponse=this._voicingResponsePacket.contextResponse),t.hasOwnProperty("hintResponse")||(t.hintResponse=this._voicingResponsePacket.hintResponse),this.collectAndSpeakResponse(t)}},{key:"voicingSpeakResponse",value:function(e){var t=k({nameResponse:null,objectResponse:null,contextResponse:null,hintResponse:null},e);this.collectAndSpeakResponse(t)}},{key:"voicingSpeakNameResponse",value:function(e){var t=k({},e);t.hasOwnProperty("nameResponse")||(t.nameResponse=this._voicingResponsePacket.nameResponse),this.collectAndSpeakResponse(t)}},{key:"voicingSpeakObjectResponse",value:function(e){var t=k({},e);t.hasOwnProperty("objectResponse")||(t.objectResponse=this._voicingResponsePacket.objectResponse),this.collectAndSpeakResponse(t)}},{key:"voicingSpeakContextResponse",value:function(e){var t=k({},e);t.hasOwnProperty("contextResponse")||(t.contextResponse=this._voicingResponsePacket.contextResponse),this.collectAndSpeakResponse(t)}},{key:"voicingSpeakHintResponse",value:function(e){var t=k({},e);t.hasOwnProperty("hintResponse")||(t.hintResponse=this._voicingResponsePacket.hintResponse),this.collectAndSpeakResponse(t)}},{key:"collectAndSpeakResponse",value:function(e){this.speakContent(this.collectResponse(e))}},{key:"collectResponse",value:function(e){var t=k({ignoreProperties:this._voicingResponsePacket.ignoreProperties,responsePatternCollection:this._voicingResponsePacket.responsePatternCollection,utterance:this.voicingUtterance},e),n=dc.collectResponses(t);return t.utterance&&(t.utterance.alert=n,n=t.utterance),n}},{key:"speakContent",value:function(e){var t=!xe.PHET_IO_ENABLED||!this.isInsidePhetioArchetype();e&&t&&qc.addToBack(e)}},{key:"setVoicingNameResponse",value:function(e){this._voicingResponsePacket.nameResponse=e}},{key:"voicingNameResponse",get:function(){return this.getVoicingNameResponse()},set:function(e){this.setVoicingNameResponse(e)}},{key:"getVoicingNameResponse",value:function(){return this._voicingResponsePacket.nameResponse}},{key:"setVoicingObjectResponse",value:function(e){this._voicingResponsePacket.objectResponse=e}},{key:"voicingObjectResponse",get:function(){return this.getVoicingObjectResponse()},set:function(e){this.setVoicingObjectResponse(e)}},{key:"getVoicingObjectResponse",value:function(){return this._voicingResponsePacket.objectResponse}},{key:"setVoicingContextResponse",value:function(e){this._voicingResponsePacket.contextResponse=e}},{key:"voicingContextResponse",get:function(){return this.getVoicingContextResponse()},set:function(e){this.setVoicingContextResponse(e)}},{key:"getVoicingContextResponse",value:function(){return this._voicingResponsePacket.contextResponse}},{key:"setVoicingHintResponse",value:function(e){this._voicingResponsePacket.hintResponse=e}},{key:"voicingHintResponse",get:function(){return this.getVoicingHintResponse()},set:function(e){this.setVoicingHintResponse(e)}},{key:"getVoicingHintResponse",value:function(){return this._voicingResponsePacket.hintResponse}},{key:"setVoicingIgnoreVoicingManagerProperties",value:function(e){this._voicingResponsePacket.ignoreProperties=e}},{key:"voicingIgnoreVoicingManagerProperties",get:function(){return this.getVoicingIgnoreVoicingManagerProperties()},set:function(e){this.setVoicingIgnoreVoicingManagerProperties(e)}},{key:"getVoicingIgnoreVoicingManagerProperties",value:function(){return this._voicingResponsePacket.ignoreProperties}},{key:"setVoicingResponsePatternCollection",value:function(e){this._voicingResponsePacket.responsePatternCollection=e}},{key:"voicingResponsePatternCollection",get:function(){return this.getVoicingResponsePatternCollection()},set:function(e){this.setVoicingResponsePatternCollection(e)}},{key:"getVoicingResponsePatternCollection",value:function(){return this._voicingResponsePacket.responsePatternCollection}},{key:"setVoicingUtterance",value:function(t){if(this._voicingUtterance!==t){this._voicingUtterance&&this.cleanVoicingUtterance(),e.registerUtteranceToVoicingNode(t,this),this._voicingUtterance=t}}},{key:"voicingUtterance",get:function(){return this.getVoicingUtterance()},set:function(e){this.setVoicingUtterance(e)}},{key:"getVoicingUtterance",value:function(){return function(e){if(!(e instanceof gc))throw new Error("utterance is not an Utterance")}(this._voicingUtterance),this._voicingUtterance}},{key:"getVoicingCanSpeakProperty",value:function(){return this._voicingCanSpeakProperty}},{key:"voicingCanSpeakProperty",get:function(){return this.getVoicingCanSpeakProperty()}},{key:"setVoicingFocusListener",value:function(e){this._voicingFocusListener=e}},{key:"voicingFocusListener",get:function(){return this.getVoicingFocusListener()},set:function(e){this.setVoicingFocusListener(e)}},{key:"getVoicingFocusListener",value:function(){return this._voicingFocusListener}},{key:"defaultFocusListener",value:function(){this.voicingSpeakFullResponse({contextResponse:null})}},{key:"isVoicing",get:function(){return!0}},{key:"dispose",value:function(){this.removeInputListener(this._speakContentOnFocusListener),this.changedInstanceEmitter.removeListener(this._boundInstancesChangedListener),this._voicingUtterance&&(this.cleanVoicingUtterance(),this._voicingUtterance=null),_get(_getPrototypeOf(i.prototype),"dispose",this).call(this)}},{key:"clean",value:function(){this.removeInputListener(this._speakContentOnFocusListener),this.changedInstanceEmitter.removeListener(this._boundInstancesChangedListener),this._voicingUtterance&&(this.cleanVoicingUtterance(),this._voicingUtterance=null),_get(_getPrototypeOf(i.prototype),"clean",this)&&_get(_getPrototypeOf(i.prototype),"clean",this).call(this)}},{key:"onInstanceCanVoiceChange",value:function(e){e?this._voicingCanSpeakCount++:this._voicingCanSpeakCount--,this._voicingCanSpeakProperty.value=this._voicingCanSpeakCount>0}},{key:"handleInstancesChanged",value:function(e,t){e.visible&&e.voicingVisible&&(this._voicingCanSpeakCount=t?this._voicingCanSpeakCount+1:this._voicingCanSpeakCount-1),this._voicingCanSpeakProperty.value=this._voicingCanSpeakCount>0}},{key:"addOrRemoveInstanceListeners",value:function(e,t){t?e.canVoiceEmitter.addListener(this._boundInstanceCanVoiceChangeListener):e.canVoiceEmitter.removeListener(this._boundInstanceCanVoiceChangeListener),this.handleInstancesChanged(e,t)}},{key:"cleanVoicingUtterance",value:function(){this._voicingUtterance instanceof Oc?this._voicingUtterance.dispose():e.unregisterUtteranceToVoicingNode(this._voicingUtterance,this)}}]),i}(Ku(t)));return n.prototype._mutatorKeys=Bc.concat(n.prototype._mutatorKeys),n};Gc.VOICING_OPTION_KEYS=Bc,Gc.alertUtterance=function(e){qc.addToBack(e)},Gc.registerUtteranceToVoicingNode=function(e,t){var n=e.voicingCanAnnounceProperties;n.includes(t.voicingCanSpeakProperty)||(e.voicingCanAnnounceProperties=n.concat([t.voicingCanSpeakProperty]))},Gc.unregisterUtteranceToVoicingNode=function(e,t){var n=e.voicingCanAnnounceProperties,i=n.indexOf(t.voicingCanSpeakProperty);e.voicingCanAnnounceProperties=n.splice(i,1)},Gc.registerUtteranceToNode=function(e,t){var n=e.voicingCanAnnounceProperties;n.includes(t.visibleProperty)||(e.voicingCanAnnounceProperties=e.voicingCanAnnounceProperties.concat([t.visibleProperty])),n.includes(t.voicingVisibleProperty)||(e.voicingCanAnnounceProperties=e.voicingCanAnnounceProperties.concat([t.voicingVisibleProperty]))},Gc.unregisterUtteranceToNode=function(e,t){var n=e.voicingCanAnnounceProperties,i=n.indexOf(t.visibleProperty),r=n.splice(i,1).indexOf(t.voicingVisibleProperty),a=n.splice(r,1);e.voicingCanAnnounceProperties=a};Cr.register("Voicing",Gc);var Hc=Gc,Fc=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,i)).readingBlockFocus=e,r}return _createClass(n)}(gc);Cr.register("ReadingBlockUtterance",Fc);var Yc=Fc,zc=function(){function e(t,n){_classCallCheck(this,e),_defineProperty(this,"node",null),_defineProperty(this,"visibilityTracker",null);var i=S()({onRemoveFocus:_.noop},n);this.focusProperty=t,this.onRemoveFocus=i.onRemoveFocus,this.boundVisibilityListener=this.handleTrailVisibilityChange.bind(this),this.boundInstancesChangedListener=this.handleInstancesChange.bind(this),this.boundFocusListener=this.handleFocusChange.bind(this),this.focusProperty.link(this.boundFocusListener)}return _createClass(e,[{key:"handleFocusChange",value:function(e){this.removeDisplayedListeners(),e&&this.addDisplayedListeners(e)}},{key:"handleTrailVisibilityChange",value:function(){this.visibilityTracker&&!this.visibilityTracker.trailVisibleProperty.value&&(this.focusProperty.value=null,this.onRemoveFocus())}},{key:"handleInstancesChange",value:function(e){e.node&&0===e.node.instances.length&&(this.focusProperty.value=null,this.onRemoveFocus())}},{key:"addDisplayedListeners",value:function(e){this.visibilityTracker=new Iu(e.trail),this.visibilityTracker.addListener(this.boundVisibilityListener),this.node=e.trail.lastNode(),this.node.changedInstanceEmitter.addListener(this.boundInstancesChangedListener)}},{key:"removeDisplayedListeners",value:function(){this.visibilityTracker&&(this.visibilityTracker.removeListener(this.boundVisibilityListener),this.visibilityTracker.dispose(),this.visibilityTracker=null),this.node&&(this.node.changedInstanceEmitter.removeListener(this.boundInstancesChangedListener),this.node=null)}},{key:"dispose",value:function(){this.removeDisplayedListeners(),this.focusProperty.unlink(this.boundFocusListener),this.node=null,this.visibilityTracker=null,this.focusProperty=null}}]),e}();Cr.register("FocusDisplayedController",zc);var Uc=zc,Wc=function(){function e(){var t=this;_classCallCheck(this,e),this.pointerFocusProperty=new dt(null),this.readingBlockFocusProperty=new dt(null),this.lockedPointerFocusProperty=new dt(null),this.pdomFocusHighlightsVisibleProperty=new pt(!0),this.interactiveHighlightsVisibleProperty=new pt(!1),this.readingBlockHighlightsVisibleProperty=new pt(!1),this.voicingFullyEnabledListener=function(e){t.readingBlockHighlightsVisibleProperty.value=e},_c.voicingFullyEnabledProperty.link(this.voicingFullyEnabledListener),this.pointerHighlightsVisibleProperty=new Ut([this.interactiveHighlightsVisibleProperty,this.readingBlockHighlightsVisibleProperty],(function(e,t){return e||t})),this.readingBlockFocusController=new Uc(this.readingBlockFocusProperty),this.startSpeakingListener=function(e,n){t.readingBlockFocusProperty.value=n instanceof Yc?n.readingBlockFocus:null},_c.startSpeakingEmitter.addListener(this.startSpeakingListener),this.endSpeakingListener=function(e,n){n instanceof Yc&&t.readingBlockFocusProperty.value&&n.readingBlockFocus.trail.equals(t.readingBlockFocusProperty.value.trail)&&(t.readingBlockFocusProperty.value=null)},_c.endSpeakingEmitter.addListener(this.endSpeakingListener),this.pointerFocusDisplayedController=new Uc(this.pointerFocusProperty,{onRemoveFocus:function(){t.lockedPointerFocusProperty.value=null}})}return _createClass(e,[{key:"dispose",value:function(){this.readingBlockFocusController.dispose(),this.pointerFocusDisplayedController.dispose(),this.pointerHighlightsVisibleProperty.dispose(),_c.startSpeakingEmitter.removeListener(this.startSpeakingListener),_c.endSpeakingEmitter.removeListener(this.endSpeakingListener),_c.voicingFullyEnabledProperty.unlink(this.voicingFullyEnabledListener)}}],[{key:"pdomFocus",get:function(){return e.pdomFocusProperty.value},set:function(t){var n;e.pdomFocusProperty.value!==t&&(e.pdomFocusProperty.value&&(n=e.pdomFocusedNode),e.pdomFocusProperty.value=t,n&&!t&&n.blur())}},{key:"getPDOMFocusedNode",value:function(){var t=null,n=e.pdomFocusProperty.get();return n&&(t=n.trail.lastNode()),t}},{key:"pdomFocusedNode",get:function(){return this.getPDOMFocusedNode()}}]),e}();_defineProperty(Wc,"pdomFocusProperty",new dt(null,{tandem:xe.GENERAL_MODEL.createTandem("pdomFocusProperty"),phetioDocumentation:"Stores the current focus in the Parallel DOM, null if nothing has focus. This is not updated based on mouse or touch input, only keyboard and other alternative inputs. Note that this only applies to simulations that support alternative input.",phetioValueType:Qe(ya.FocusIO),phetioState:!1,phetioFeatured:!0,phetioReadOnly:!0})),Cr.register("FocusManager",Wc);var jc=new Rr("rgba(212,19,106,0.5)"),Xc=new Rr("rgba(250,40,135,0.9)"),Qc=new Rr("rgba(233,113,166,1.0)"),Kc=new Rr("rgba(233,113,166,1.0)"),Jc=new Rr("rgba(159,15,80,1.0)"),Zc=new Rr("rgba(159,15,80,1.0)"),$c=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({outerStroke:jc,innerStroke:Xc,outerLineWidth:null,innerLineWidth:null,transformSourceNode:null},i);_defineProperty(_assertThisInitialized(r=t.call(this,e)),"highlightChangedEmitter",new Et),r._innerHighlightColor=a.innerStroke,r._outerHighlightColor=a.outerStroke;var s=_.pick(a,Object.keys(Hl.DEFAULT_PATH_OPTIONS));r.innerLineWidth=a.innerLineWidth,r.outerLineWidth=a.outerLineWidth,r.transformSourceNode=a.transformSourceNode,a.stroke=a.outerStroke,r.mutate(a);var o=k({},s,{stroke:a.innerStroke});return r.innerHighlightPath=new Hl(e,o),r.addChild(r.innerHighlightPath),r.updateLineWidth(),r}return _createClass(n,[{key:"mutateWithInnerHighlight",value:function(e){_get(_getPrototypeOf(n.prototype),"mutate",this).call(this,e),this.innerHighlightPath&&this.innerHighlightPath.mutate(e),this.highlightChangedEmitter.emit()}},{key:"makeDashed",value:function(){this.mutateWithInnerHighlight({lineDash:[7,7]})}},{key:"setShape",value:function(e){return _get(_getPrototypeOf(n.prototype),"setShape",this).call(this,e),this.innerHighlightPath&&this.innerHighlightPath.setShape(e),this.highlightChangedEmitter&&this.highlightChangedEmitter.emit(),this}},{key:"updateLineWidth",value:function(e){e=e||this,this.lineWidth=this.getOuterLineWidth(e),this.innerHighlightPath.lineWidth=this.getInnerLineWidth(e),this.highlightChangedEmitter.emit()}},{key:"getOuterLineWidth",value:function(e){return this.outerLineWidth?this.outerLineWidth:n.getOuterLineWidthFromNode(e)}},{key:"getInnerLineWidth",value:function(e){return this.innerLineWidth?this.innerLineWidth:n.getInnerLineWidthFromNode(e)}},{key:"setInnerHighlightColor",value:function(e){this._innerHighlightColor=e,this.innerHighlightPath.setStroke(e),this.highlightChangedEmitter.emit()}},{key:"innerHighlightColor",get:function(){return this.getInnerHighlightColor()},set:function(e){this.setInnerHighlightColor(e)}},{key:"getInnerHighlightColor",value:function(){return this._innerHighlightColor}},{key:"setOuterHighlightColor",value:function(e){this._outerHighlightColor=e,this.setStroke(e),this.highlightChangedEmitter.emit()}},{key:"outerHighlightColor",get:function(){return this.getOuterHighlightColor()},set:function(e){this.setOuterHighlightColor(e)}},{key:"getOuterHighlightColor",value:function(){return this._outerHighlightColor}},{key:"getUniqueHighlightTrail",value:function(e){var t=this.transformSourceNode,n=null;if(t.instances.length<=1)n=t.getUniqueTrail();else{var i=t.getTrails().filter((function(t){return t.isExtensionOf(e,!0)}));n=i[0]}return n}}],[{key:"getInnerLineWidthFromNode",value:function(e){return 2.5/n.getWidthMagnitudeFromTransform(e)}},{key:"getOuterLineWidthFromNode",value:function(e){return 4/n.getWidthMagnitudeFromTransform(e)}},{key:"getWidthMagnitudeFromTransform",value:function(e){return e.transform.transformDelta2(pn.X_UNIT).magnitude}},{key:"getDilationCoefficient",value:function(e){return.75*n.getOuterLineWidthFromNode(e)}},{key:"getGroupDilationCoefficient",value:function(e){return 1.9*n.getOuterLineWidthFromNode(e)}}]),n}(Hl);_defineProperty($c,"OUTER_FOCUS_COLOR",jc),_defineProperty($c,"INNER_FOCUS_COLOR",Xc),_defineProperty($c,"INNER_LIGHT_GROUP_FOCUS_COLOR",Qc),_defineProperty($c,"OUTER_LIGHT_GROUP_FOCUS_COLOR",Kc),_defineProperty($c,"INNER_DARK_GROUP_FOCUS_COLOR",Jc),_defineProperty($c,"OUTER_DARK_GROUP_FOCUS_COLOR",Zc),_defineProperty($c,"GROUP_OUTER_LINE_WIDTH",2),_defineProperty($c,"GROUP_INNER_LINE_WIDTH",2),Cr.register("FocusHighlightPath",$c);var eh=$c,th=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({useLocalBounds:!0,dilationCoefficient:null,useGroupDilation:!1},i);return a.transformSourceNode=e,_defineProperty(_assertThisInitialized(r=t.call(this,null,a)),"observedBoundsProperty",null),_defineProperty(_assertThisInitialized(r),"boundsListener",null),r.useLocalBounds=a.useLocalBounds,r.useGroupDilation=a.useGroupDilation,r.dilationCoefficient=a.dilationCoefficient,e&&r.setShapeFromNode(e),r}return _createClass(n,[{key:"setShapeFromNode",value:function(e){var t=this;this.observedBoundsProperty&&this.observedBoundsProperty.unlink(this.boundsListener),this.observedBoundsProperty=this.useLocalBounds?e.localBoundsProperty:e.boundsProperty,this.boundsListener=function(n){if(n.isFinite()){var i=t.dilationCoefficient;null===t.dilationCoefficient&&(i=t.useGroupDilation?eh.getGroupDilationCoefficient(e):eh.getDilationCoefficient(e));var r=n.dilated(i);t.updateLineWidthFromNode(e),t.setShape(Ni.bounds(r))}},this.observedBoundsProperty.link(this.boundsListener)}},{key:"updateLineWidthFromNode",value:function(e){this.lineWidth=this.getOuterLineWidth(e),this.innerHighlightPath.lineWidth=this.getInnerLineWidth(e)}}]),n}(eh);Cr.register("FocusHighlightFromNode",th);var nh=th,ih=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({outerStroke:"grey",innerStroke:"black"},i);return t.call(this,e,r)}return _createClass(n)}(nh);Cr.register("ReadingBlockHighlight",ih);var rh=ih,ah=["readingBlockTagName","readingBlockNameResponse","readingBlockHintResponse","readingBlockResponsePatternCollection","readingBlockActiveHighlight"];var sh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,e,i)}return _createClass(n)}(Yc),oh=new oc({nameHint:"{{NAME}}. {{HINT}}"}),lh=function(e){var t=Ol("ReadingBlock",ah,function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._readingBlockTagName="button",e._readingBlockDisabledTagName="p",e._readingBlockActiveHighlight=null,e.readingBlockActiveHighlightChangedEmitter=new d,e.readingBlockResponsePatternCollection=oh,e._localBoundsChangedListener=e._onLocalBoundsChanged.bind(_assertThisInitialized(e)),e.localBoundsProperty.link(e._localBoundsChangedListener),e._readingBlockInputListener={focus:function(t){return e._speakReadingBlockContentListener(t)},up:function(t){return e._speakReadingBlockContentListener(t)},click:function(t){return e._speakReadingBlockContentListener(t)}},e._readingBlockFocusableChangeListener=e._onReadingBlockFocusableChanged.bind(_assertThisInitialized(e)),_c.speechAllowedAndFullyEnabledProperty.link(e._readingBlockFocusableChangeListener),e.focusHighlight=new rh(_assertThisInitialized(e)),e.voicingUtterance=new sh(null),e}return _createClass(n,[{key:"isReadingBlock",get:function(){return!0}},{key:"setReadingBlockTagName",value:function(e){this._readingBlockTagName=e,this._onReadingBlockFocusableChanged(_c.speechAllowedAndFullyEnabledProperty.value)}},{key:"readingBlockTagName",get:function(){return this.getReadingBlockTagName()},set:function(e){this.setReadingBlockTagName(e)}},{key:"getReadingBlockTagName",value:function(){return this._readingBlockTagName}},{key:"setReadingBlockNameResponse",value:function(e){this._voicingResponsePacket.nameResponse=e}},{key:"readingBlockNameResponse",get:function(){return this.getReadingBlockNameResponse()},set:function(e){this.setReadingBlockNameResponse(e)}},{key:"getReadingBlockNameResponse",value:function(){return this._voicingResponsePacket.nameResponse}},{key:"setReadingBlockHintResponse",value:function(e){this._voicingResponsePacket.hintResponse=e}},{key:"readingBlockHintResponse",get:function(){return this.getReadingBlockHintResponse()},set:function(e){this.setReadingBlockHintResponse(e)}},{key:"getReadingBlockHintResponse",value:function(){return this._voicingResponsePacket.hintResponse}},{key:"setReadingBlockResponsePatternCollection",value:function(e){this._voicingResponsePacket.responsePatternCollection=e}},{key:"readingBlockResponsePatternCollection",get:function(){return this.getReadingBlockResponsePatternCollection()},set:function(e){this.setReadingBlockResponsePatternCollection(e)}},{key:"getReadingBlockResponsePatternCollection",value:function(){return this._voicingResponsePacket.responsePatternCollection}},{key:"setVoicingUtterance",value:function(e){_get(_getPrototypeOf(n.prototype),"setVoicingUtterance",this).call(this,e)}},{key:"voicingUtterance",get:function(){return this.getVoicingUtterance()},set:function(e){_set(_getPrototypeOf(n.prototype),"voicingUtterance",e,this,!0)}},{key:"getVoicingUtterance",value:function(){var e=_get(_getPrototypeOf(n.prototype),"getVoicingUtterance",this).call(this);return e}},{key:"setVoicingNameResponse",value:function(){}},{key:"getVoicingNameResponse",value:function(){}},{key:"setVoicingObjectResponse",value:function(){}},{key:"getVoicingObjectResponse",value:function(){}},{key:"setVoicingContextResponse",value:function(){}},{key:"getVoicingContextResponse",value:function(){}},{key:"setVoicingHintResponse",value:function(){}},{key:"getVoicingHintResponse",value:function(){}},{key:"setVoicingResponsePatternCollection",value:function(){}},{key:"getVoicingResponsePatternCollection",value:function(){}},{key:"setReadingBlockActiveHighlight",value:function(e){this._readingBlockActiveHighlight!==e&&(this._readingBlockActiveHighlight=e,this.readingBlockActiveHighlightChangedEmitter.emit())}},{key:"readingBlockActiveHighlight",get:function(){return this._readingBlockActiveHighlight},set:function(e){this.setReadingBlockActiveHighlight(e)}},{key:"getReadingBlockActiveHighlight",value:function(){return this._readingBlockActiveHighlight}},{key:"isReadingBlockActivated",value:function(){for(var e=!1,t=Object.keys(this.displays),n=0;n<t.length;n++){var i=this.displays[t[n]].focusManager.readingBlockFocusProperty.value;if(i&&i.trail.lastNode()===this){e=!0;break}}return e}},{key:"readingBlockActivated",get:function(){return this.isReadingBlockActivated()}},{key:"_onReadingBlockFocusableChanged",value:function(e){this.focusable=e,e?(this.tagName=this._readingBlockTagName,this.hasInputListener(this._readingBlockInputListener)||this.addInputListener(this._readingBlockInputListener)):(this.tagName=this._readingBlockDisabledTagName,this.hasInputListener(this._readingBlockInputListener)&&this.removeInputListener(this._readingBlockInputListener))}},{key:"_onLocalBoundsChanged",value:function(e){this.mouseArea=e,this.touchArea=e}},{key:"_speakReadingBlockContentListener",value:function(e){var t=this.getConnectedDisplays(),n=this.voicingUtterance,i=this.collectResponse({nameResponse:this.getReadingBlockNameResponse(),hintResponse:this.getReadingBlockHintResponse(),ignoreProperties:this.voicingIgnoreVoicingManagerProperties,responsePatternCollection:this._voicingResponsePacket.responsePatternCollection,utterance:n});if(i)for(var r=0;r<t.length;r++)if(!this.getDescendantsUseHighlighting(e.trail)){var a=e.trail.subtrailTo(this),s=Hh.guessVisualTrail(a,t[r].rootNode),o=new ya(t[r],s);n.readingBlockFocus=o,this.speakContent(i)}}},{key:"cleanVoicingUtterance",value:function(){this._voicingUtterance instanceof Yc?this._voicingUtterance.dispose():_get(_getPrototypeOf(n.prototype),"cleanVoicingUtterance",this).call(this)}},{key:"dispose",value:function(){_c.speechAllowedAndFullyEnabledProperty.unlink(this._readingBlockFocusableChangeListener),this.localBoundsProperty.unlink(this._localBoundsChangedListener),this.hasInputListener(this._readingBlockInputListener)&&this.removeInputListener(this._readingBlockInputListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Hc(e)));return t.prototype._mutatorKeys=ah.concat(t.prototype._mutatorKeys),t};Cr.register("ReadingBlock",lh);var uh=lh,ch={isPlatformMac:function(){return _.includes(window.navigator.platform,"Mac")},getPlatformZoomMetaKey:function(){return ch.isPlatformMac()?"metaKey":"ctrlKey"},isZoomCommand:function(e,t){var n=t?xa.KEY_EQUALS:xa.KEY_MINUS;return e[ch.getPlatformZoomMetaKey()]&&xa.isKeyEvent(e,n)},isZoomResetCommand:function(e){return e[ch.getPlatformZoomMetaKey()]&&xa.isKeyEvent(e,xa.KEY_0)}};Cr.register("KeyboardZoomUtils",ch);var hh=ch,dh=function(){function e(t){_classCallCheck(this,e),t=A({seed:null},t),this.seed=null,this.seedrandom=null,this.setSeed(t.seed),this.numberOfCalls=0,e.allRandomInstances.add(this)}return _createClass(e,[{key:"dispose",value:function(){e.allRandomInstances.delete(this)}},{key:"getSeed",value:function(){return this.seed}},{key:"nextBoolean",value:function(){return this.nextDouble()>=.5}},{key:"nextInt",value:function(e){var t=this.nextDouble()*e;return Math.floor(t)}},{key:"nextIntBetween",value:function(e,t){var n=t-e;return this.nextInt(n+1)+e}},{key:"sample",value:function(e){return e[this.nextIntBetween(0,e.length-1)]}},{key:"shuffle",value:function(e){var t=this,n=-1,i=new Array(e.length);return _.forEach(e,(function(e){var r=t.nextIntBetween(0,++n);i[n]=i[r],i[r]=e})),i}},{key:"nextDouble",value:function(){return this.numberOfCalls++,this.seedrandom()}},{key:"nextDoubleBetween",value:function(e,t){var n=e+this.nextDouble()*(t-e);return n}},{key:"nextGaussian",value:function(){return En.boxMullerTransform(0,1,this)}},{key:"nextDoubleInRange",value:function(e){return e.min<e.max?this.nextDoubleBetween(e.min,e.max):e.min}},{key:"setSeed",value:function(e){"number"==typeof e||(e=Math.random()),this.seed=e,this.seedrandom=Math.seedrandom?new Math.seedrandom("".concat(e)):function(){return Math.random()}}},{key:"sampleProbabilities",value:function(e){for(var t=_.sum(e)*this.nextDouble(),n=0,i=0;i<e.length;i++)if((n+=e[i])>=t)return i;return e.length-1}}]),e}();dh.allRandomInstances=new Set,dh.isNormalized=function(e){},xt.register("Random",dh);var ph=dh,fh={INPUT:[].concat(_toConsumableArray(xa.ARROW_KEYS),[xa.KEY_PAGE_UP,xa.KEY_PAGE_DOWN,xa.KEY_HOME,xa.KEY_END,xa.KEY_ENTER,xa.KEY_SPACE]),DIV:[].concat(_toConsumableArray(xa.ARROW_KEYS),_toConsumableArray(xa.WASD_KEYS)),P:[xa.KEY_ESCAPE],BUTTON:[xa.KEY_ENTER,xa.KEY_SPACE]},mh=xa.ALL_KEYS,gh=function(){function e(t,n){_classCallCheck(this,e),this.display=t,this.random=new ph({seed:n}),this.numberOfComponentsTested=10,this.keyupListeners=[],this.currentElement=null}return _createClass(e,[{key:"chooseNextElement",value:function(){if(null===this.currentElement)this.currentElement=document.activeElement;else if(this.random.nextDouble()<.1){this.clearListeners();var e=Gs.getRandomFocusable(this.random);e.focus(),this.currentElement=e}}},{key:"clearListeners",value:function(){this.keyupListeners.forEach((function(e){mt.clearTimeout(e.timeout),e()}))}},{key:"triggerClickEvent",value:function(e){e instanceof HTMLElement&&e.click()}},{key:"triggerKeyDownUpEvents",value:function(e,t){var n=this;this.triggerDOMEvent("keydown",e,t);var i=this.random.nextInt(100),r=function i(){n.triggerDOMEvent("keyup",e,t),n.keyupListeners.includes(i)&&n.keyupListeners.splice(n.keyupListeners.indexOf(i),1)};r.timeout=mt.setTimeout(r,100===i?2e3:i),this.keyupListeners.push(r)}},{key:"triggerRandomKeyDownUpEvents",value:function(e){var t=mh[Math.floor(this.random.nextDouble()*(mh.length-1))];this.triggerKeyDownUpEvents(e,t)}},{key:"fuzzBoardEvents",value:function(e){if(this.display&&this.display._input&&this.display._input.pdomPointer){var t=this.display._input.pdomPointer;t&&!t.blockTrustedEvents&&(t.blockTrustedEvents=!0)}for(var n=0;n<this.numberOfComponentsTested;n++){this.chooseNextElement();for(var i=0;i<e/this.numberOfComponentsTested;i++){var r=document.activeElement;if(r&&fh[r.tagName.toUpperCase()]){var a=this.random.nextDouble();if(a<.6){var s=fh[r.tagName],o=this.random.sample(s);this.triggerKeyDownUpEvents(r,o)}else a<.7?this.triggerClickEvent(r):this.triggerRandomKeyDownUpEvents(r)}else r&&this.triggerRandomKeyDownUpEvents(r)}}}},{key:"triggerDOMEvent",value:function(e,t,n){var i=new KeyboardEvent(e,{bubbles:!0,code:n,shiftKey:ju.shiftKeyDown,altKey:ju.altKeyDown,ctrlKey:ju.ctrlKeyDown});t.dispatchEvent(i)}}]),e}();Cr.register("KeyboardFuzzer",gh);var yh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({outerStroke:eh.OUTER_LIGHT_GROUP_FOCUS_COLOR,innerStroke:eh.INNER_LIGHT_GROUP_FOCUS_COLOR,outerLineWidth:eh.GROUP_OUTER_LINE_WIDTH,innerLineWidth:eh.GROUP_INNER_LINE_WIDTH,useGroupDilation:!0},i);return t.call(this,e,r)}return _createClass(n)}(nh);Cr.register("GroupFocusHighlightFromNode",yh);var vh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({innerStroke:null,outerStroke:null,fill:"rgba(255,255,0,0.5)"},i);return t.call(this,e,r)}return _createClass(n)}(nh);_defineProperty(vh,"ACTIVATED_HIGHLIGHT_COLOR","rgba(255,255,0,0.5)"),Cr.register("ActivatedReadingBlockHighlight",vh);var Ah=vh,bh=Gs.TAGS.LABEL,Sh=Gs.TAGS.INPUT,Eh={attributes:!1,childList:!0,characterData:!0},kh=1,Vh=new jn(0,0,0,0),wh=new jn(0,0,0,0),_h=new oi,Ch=new oi,xh=new oi,Ph=function(){function e(t,n){_classCallCheck(this,e),this.initializePDOMPeer(t,n)}return _createClass(e,[{key:"initializePDOMPeer",value:function(e,t){var n=this;return t=A({primarySibling:null},t),this.id=this.id||kh++,this.pdomInstance=e,this.node=this.pdomInstance.node,this.display=e.display,this.trail=e.trail,this.visible=null,this.focusable=null,this._labelSibling=null,this._descriptionSibling=null,this._containerParent=null,this.topLevelElements=[],this.positionDirty=!1,this.childPositionDirty=!1,this.positionInPDOM=!1,this.mutationObserver=this.mutationObserver||new MutationObserver(this.invalidateCSSPositioning.bind(this)),this.transformListener=this.transformListener||this.invalidateCSSPositioning.bind(this),this.pdomInstance.transformTracker.addListener(this.transformListener),this._preservedDisabledValue=null,this.isDisposed=!1,this.pdomInstance.isRootInstance&&(this._primarySibling=t.primarySibling,this._primarySibling.classList.add(Ts.ROOT_CLASS_NAME),Gs.BLOCKED_DOM_EVENTS.forEach((function(e){n._primarySibling.addEventListener(e,(function(e){e.stopPropagation()}))}))),this}},{key:"update",value:function(e){var t=this.node.getBaseOptions(),n=[];null!==this.node.accessibleName&&(t=this.node.accessibleNameBehavior(this.node,t,this.node.accessibleName,n)),null!==this.node.pdomHeading&&(t=this.node.pdomHeadingBehavior(this.node,t,this.node.pdomHeading,n)),null!==this.node.helpText&&(t=this.node.helpTextBehavior(this.node,t,this.node.helpText,n)),this._primarySibling=Th(t.tagName,this.node.focusable,{namespace:t.pdomNamespace}),t.containerTagName&&(this._containerParent=Th(t.containerTagName,!1)),t.labelTagName&&(this._labelSibling=Th(t.labelTagName,!1,{excludeFromInput:this.node.excludeLabelSiblingFromInput})),t.descriptionTagName&&(this._descriptionSibling=Th(t.descriptionTagName,!1)),e&&this.updateIndicesStringAndElementIds(),this.orderElements(t),this.mutationObserver.disconnect(),this.mutationObserver.observe(this._primarySibling,Eh),t.labelContent&&null!==t.labelTagName&&this.setLabelSiblingContent(t.labelContent),t.innerContent&&null!==t.tagName&&this.setPrimarySiblingContent(t.innerContent),t.descriptionContent&&null!==t.descriptionTagName&&this.setDescriptionSiblingContent(t.descriptionContent),t.tagName.toUpperCase()===Sh&&t.inputType&&this.setAttributeToElement("type",t.inputType),this.setFocusable(this.node.focusable),this.setPositionInPDOM(this.node.positionInPDOM),this.onAriaLabelledbyAssociationChange(),this.onAriaDescribedbyAssociationChange(),this.onActiveDescendantAssociationChange(),this.onAttributeChange(t),this.onClassChange(),this.onInputValueChange(),this.node.updateOtherNodesAriaLabelledby(),this.node.updateOtherNodesAriaDescribedby(),this.node.updateOtherNodesActiveDescendant(),n.forEach((function(e){e()}))}},{key:"orderElements",value:function(e){this._containerParent?(this._containerParent.insertBefore(this._primarySibling,this._containerParent.children[0]||null),this.topLevelElements=[this._containerParent]):this.topLevelElements=[this._labelSibling,this._descriptionSibling,this._primarySibling].filter(_.identity),this._labelSibling&&this.arrangeContentElement(this._labelSibling,e.appendLabel),this._descriptionSibling&&this.arrangeContentElement(this._descriptionSibling,e.appendDescription)}},{key:"getPrimarySibling",value:function(){return this._primarySibling}},{key:"primarySibling",get:function(){return this.getPrimarySibling()}},{key:"getLabelSibling",value:function(){return this._labelSibling}},{key:"labelSibling",get:function(){return this.getLabelSibling()}},{key:"getDescriptionSibling",value:function(){return this._descriptionSibling}},{key:"descriptionSibling",get:function(){return this.getDescriptionSibling()}},{key:"getContainerParent",value:function(){return this._containerParent}},{key:"containerParent",get:function(){return this.getContainerParent()}},{key:"onAriaLabelledbyAssociationChange",value:function(){this.removeAttributeFromAllElements("aria-labelledby");for(var e=0;e<this.node.ariaLabelledbyAssociations.length;e++){var t=this.node.ariaLabelledbyAssociations[e];this.setAssociationAttribute("aria-labelledby",t)}}},{key:"onAriaDescribedbyAssociationChange",value:function(){this.removeAttributeFromAllElements("aria-describedby");for(var e=0;e<this.node.ariaDescribedbyAssociations.length;e++){var t=this.node.ariaDescribedbyAssociations[e];this.setAssociationAttribute("aria-describedby",t)}}},{key:"onActiveDescendantAssociationChange",value:function(){this.removeAttributeFromAllElements("aria-activedescendant");for(var e=0;e<this.node.activeDescendantAssociations.length;e++){var t=this.node.activeDescendantAssociations[e];this.setAssociationAttribute("aria-activedescendant",t)}}},{key:"handleAttributeWithPDOMOption",value:function(e,t){"string"==typeof t?this.setAttributeToElement(e,t):this.removeAttributeFromElement(e)}},{key:"onAttributeChange",value:function(e){for(var t=0;t<this.node.pdomAttributes.length;t++){var n=this.node.pdomAttributes[t];this.setAttributeToElement(n.attribute,n.value,n.options)}this.handleAttributeWithPDOMOption("aria-label",e.ariaLabel),this.handleAttributeWithPDOMOption("role",e.ariaRole)}},{key:"onClassChange",value:function(){for(var e=0;e<this.node.pdomClasses.length;e++){var t=this.node.pdomClasses[e];this.setClassToElement(t.className,t.options)}}},{key:"onInputValueChange",value:function(){if(null===this.node.inputValue)this.removeAttributeFromElement("value");else{var e="".concat(this.node.inputValue);this.setAttributeToElement("value",e,{asProperty:!0})}}},{key:"getElementByName",value:function(t){if(t===e.PRIMARY_SIBLING)return this._primarySibling;if(t===e.LABEL_SIBLING)return this._labelSibling;if(t===e.DESCRIPTION_SIBLING)return this._descriptionSibling;if(t===e.CONTAINER_PARENT)return this._containerParent;throw new Error("invalid elementName name: ".concat(t))}},{key:"setAttributeToElement",value:function(e,t,n){var i=(n=A({namespace:null,asProperty:!1,elementName:"PRIMARY_SIBLING",element:null},n)).element||this.getElementByName(n.elementName),r=t;"string"==typeof t&&(r=Ls(t)),"disabled"!==e||this.display.interactive||(this._preservedDisabledValue=!n.asProperty||r),n.namespace?i.setAttributeNS(n.namespace,e,r):n.asProperty?i[e]=r:i.setAttribute(e,r)}},{key:"removeAttributeFromElement",value:function(e,t){var n=(t=A({namespace:null,elementName:"PRIMARY_SIBLING",element:null},t)).element||this.getElementByName(t.elementName);t.namespace?n.removeAttributeNS(t.namespace,e):"disabled"!==e||this.display.interactive?n.removeAttribute(e):this._preservedDisabledValue=!1}},{key:"removeAttributeFromAllElements",value:function(e){this._primarySibling&&this._primarySibling.removeAttribute(e),this._labelSibling&&this._labelSibling.removeAttribute(e),this._descriptionSibling&&this._descriptionSibling.removeAttribute(e),this._containerParent&&this._containerParent.removeAttribute(e)}},{key:"setClassToElement",value:function(e,t){t=A({elementName:"PRIMARY_SIBLING"},t),this.getElementByName(t.elementName).classList.add(e)}},{key:"removeClassFromElement",value:function(e,t){t=A({elementName:"PRIMARY_SIBLING"},t),this.getElementByName(t.elementName).classList.remove(e)}},{key:"setAssociationAttribute",value:function(e,t){var n=t.otherNode.getPDOMInstances();if(n.length>0){var i=n[0];i===this.pdomInstance&&(i.peer=this);var r=i.peer.getElementByName(t.otherElementName),a=this.getElementByName(t.thisElementName);if(a&&r){var s=a.getAttribute(e)||"",o=[s.trim(),r.id].join(" ").trim();this.setAttributeToElement(e,o,{elementName:t.thisElementName})}}}},{key:"arrangeContentElement",value:function(e,t){if(this.topLevelElements[0]===this._containerParent)t?this._containerParent.appendChild(e):this._containerParent.insertBefore(e,this._primarySibling);else{J(this.topLevelElements,e);var n=this.topLevelElements.indexOf(this._primarySibling),i=t?this.topLevelElements.length:n;this.topLevelElements.splice(i,0,e)}}},{key:"isVisible",value:function(){return null===this.visible||this.visible}},{key:"setVisible",value:function(e){if(this.visible!==e){this.visible=e;for(var t=0;t<this.topLevelElements.length;t++){var n=this.topLevelElements[t];e?this.removeAttributeFromElement("hidden",{element:n}):this.setAttributeToElement("hidden","",{element:n})}this.invalidateCSSPositioning()}}},{key:"isFocused",value:function(){var e=Hh.guessVisualTrail(this.trail,this.display.rootNode);return Wc.pdomFocusProperty.value&&Wc.pdomFocusProperty.value.trail.equals(e)}},{key:"focus",value:function(){this._primarySibling.focus()}},{key:"blur",value:function(){this._primarySibling.blur()}},{key:"setFocusable",value:function(e){var t=this.isFocused();this.focusable!==e&&(this.focusable=e,Gs.overrideFocusWithTabIndex(this.primarySibling,e),t&&!e&&this.blur(),this.invalidateCSSPositioning())}},{key:"setLabelSiblingContent",value:function(t){this._labelSibling&&(Gs.setTextContent(this._labelSibling,t),this._labelSibling.tagName.toUpperCase()===bh&&this.setAttributeToElement("for",this._primarySibling.id,{elementName:e.LABEL_SIBLING}))}},{key:"setDescriptionSiblingContent",value:function(e){this._descriptionSibling&&Gs.setTextContent(this._descriptionSibling,e)}},{key:"setPrimarySiblingContent",value:function(e){this._primarySibling&&Gs.setTextContent(this._primarySibling,e)}},{key:"setPDOMTransformSourceNode",value:function(e){this.pdomInstance.transformTracker.removeListener(this.transformListener),this.pdomInstance.updateTransformTracker(e),this.pdomInstance.transformTracker.addListener(this.transformListener),this.invalidateCSSPositioning()}},{key:"setPositionInPDOM",value:function(e){this.positionInPDOM=e,this.invalidateCSSPositioning()}},{key:"getElementId",value:function(e,t){return"display".concat(this.display.id,"-").concat(e,"-").concat(t)}},{key:"updateIndicesStringAndElementIds",value:function(){var e=this.pdomInstance.getPDOMInstanceUniqueId();this._primarySibling&&(this._primarySibling.setAttribute(Gs.DATA_PDOM_UNIQUE_ID,e),this._primarySibling.id=this.getElementId("primary",e)),this._labelSibling&&(this._labelSibling.setAttribute(Gs.DATA_PDOM_UNIQUE_ID,e),this._labelSibling.id=this.getElementId("label",e)),this._descriptionSibling&&(this._descriptionSibling.setAttribute(Gs.DATA_PDOM_UNIQUE_ID,e),this._descriptionSibling.id=this.getElementId("description",e)),this._containerParent&&(this._containerParent.setAttribute(Gs.DATA_PDOM_UNIQUE_ID,e),this._containerParent.id=this.getElementId("container",e))}},{key:"invalidateCSSPositioning",value:function(){if(!this.positionDirty){this.positionDirty=!0;for(var e=this.pdomInstance.parent;e;)e.peer.childPositionDirty=!0,e=e.parent}}},{key:"positionElements",value:function(t){if(t){var n=this.node.pdomTransformSourceNode||this.node;if(Vh.set(n.localBounds),Vh.isFinite()){Vh.transform(this.pdomInstance.transformTracker.getMatrix());var i=this.display.bounds;if(i.intersectsBounds(Vh)){Vh.constrainBounds(i);var r=Lh(this._primarySibling),a=r.width,s=r.height;a>0&&s>0&&(wh.setMinMax(0,0,a,s),wh.transform(Mh(a,s,Vh)),Ih(this._primarySibling,wh)),this.labelSibling&&(a=(r=Lh(this._labelSibling)).width,(s=r.height)>0&&a>0&&(wh.setMinMax(0,0,a,s),wh.transform(Mh(a,s,Vh)),Ih(this._labelSibling,wh)))}}}else wh.set(e.OFFSCREEN_SIBLING_BOUNDS),Ih(this._primarySibling,wh),this._labelSibling&&Ih(this._labelSibling,wh);this.positionDirty=!1}},{key:"updateSubtreePositioning",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.childPositionDirty=!1;var t=this.positionInPDOM||e;this.positionDirty&&this.positionElements(t);for(var n=0;n<this.pdomInstance.children.length;n++){var i=this.pdomInstance.children[n].peer;(i.positionDirty||i.childPositionDirty)&&this.pdomInstance.children[n].peer.updateSubtreePositioning(t)}}},{key:"recursiveDisable",value:function(e){e?(this._preservedDisabledValue=this._primarySibling.disabled,this._primarySibling.disabled=!0):this._primarySibling.disabled=this._preservedDisabledValue;for(var t=0;t<this.pdomInstance.children.length;t++)this.pdomInstance.children[t].peer.recursiveDisable(e)}},{key:"dispose",value:function(){this.isDisposed=!0,this.blur(),this._primarySibling.removeEventListener("blur",this.blurEventListener),this._primarySibling.removeEventListener("focus",this.focusEventListener),this.pdomInstance.transformTracker.removeListener(this.transformListener),this.mutationObserver.disconnect(),this.pdomInstance=null,this.node=null,this.display=null,this.trail=null,this._primarySibling=null,this._labelSibling=null,this._descriptionSibling=null,this._containerParent=null,this.focusable=null,this.freeToPool()}}]),e}();function Th(e,t,n){n=A({siblingName:null,excludeFromInput:!1},n);var i=Gs.createElement(e,t,n);return n.excludeFromInput&&i.setAttribute(Gs.DATA_EXCLUDE_FROM_INPUT,!0),i}function Mh(e,t,n){return _h.setToTranslation(n.minX,n.minY),Ch.setToScale(n.width/e,n.height/t),_h.multiplyMatrix(Ch).multiplyMatrix(xh)}function Lh(e){var t=e.clientWidth,n=e.clientHeight;if(0===t&&0===n){var i=e.getBoundingClientRect();t=i.width,n=i.height}return{width:t,height:n}}function Ih(e,t){e.style.top="".concat(t.top,"px"),e.style.left="".concat(t.left,"px"),e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px")}Ph.PRIMARY_SIBLING="PRIMARY_SIBLING",Ph.LABEL_SIBLING="LABEL_SIBLING",Ph.DESCRIPTION_SIBLING="DESCRIPTION_SIBLING",Ph.CONTAINER_PARENT="CONTAINER_PARENT",Ph.OFFSCREEN_SIBLING_BOUNDS=new jn(0,0,1,1),Cr.register("PDOMPeer",Ph),Gi.mixInto(Ph,{initialize:Ph.prototype.initializePDOMPeer});var Rh=Ph,Dh=new ph({seed:_.hasIn(window,"phet.chipper.queryParameters.randomSeed")?window.phet.chipper.queryParameters.randomSeed:null});xt.register("dotRandom",Dh);var Nh=Dh,qh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(qh,"INDICES",new qh),_defineProperty(qh,"TRAIL_ID",new qh),_defineProperty(qh,"enumeration",new re(qh));var Oh=qh.TRAIL_ID,Bh=1,Gh=function(){function e(t,n,i){_classCallCheck(this,e),this.initializePDOMInstance(t,n,i)}return _createClass(e,[{key:"initializePDOMInstance",value:function(e,t,n){if(this.id=this.id||Bh++,this.parent=e,this.display=t,this.trail=n,this.isRootInstance=null===e,this.node=this.isRootInstance?null:n.lastNode(),this.children=Ui(this.children),this.node&&this.node.addPDOMInstance(this),this.peer=null,this.invisibleCount=0,this.relativeNodes=[],this.relativeVisibilities=[],this.relativeListeners=[],this.transformTracker=null,this.updateTransformTracker(this.node?this.node.pdomTransformSourceNode:null),this.isDisposed=!1,this.isRootInstance){var i=document.createElement("div");this.peer=Rh.createFromPool(this,{primarySibling:i})}else{this.peer=Rh.createFromPool(this),this.peer.update(Oh===qh.TRAIL_ID);for(var r=this.parent.trail,a=r.length;a<n.length;a++){var s=n.nodes[a];this.relativeNodes.push(s);var o=s._pdomDisplaysInfo.pdomDisplays,l=_.includes(o,t);this.relativeVisibilities.push(l),l||this.invisibleCount++;var u=this.checkAccessibleDisplayVisibility.bind(this,a-r.length);s.pdomDisplaysEmitter.addListener(u),this.relativeListeners.push(u)}this.updateVisibility()}return this}},{key:"addConsecutiveInstances",value:function(e){var t=this.children.length>0;Array.prototype.push.apply(this.children,e);for(var n=0;n<e.length;n++)Gs.insertElements(this.peer.primarySibling,e[n].peer.topLevelElements);t&&this.sortChildren(),Oh===qh.INDICES&&this.updateDescendantPeerIds(e)}},{key:"removeInstancesForTrail",value:function(e){for(var t=0;t<this.children.length;t++){var n=this.children[t],i=n.trail,r=i.length<e.length;if(!r)for(var a=this.trail.length;a<e.length;a++)if(e.nodes[a]!==i.nodes[a]){r=!0;break}r||(this.children.splice(t,1),n.dispose(),t-=1)}}},{key:"removeAllChildren",value:function(){for(;this.children.length;)this.children.pop().dispose()}},{key:"findChildWithTrail",value:function(e){for(var t=0;t<this.children.length;t++){var n=this.children[t];if(n.trail.equals(e))return n}return null}},{key:"removeSubtree",value:function(e){for(var t=this.children.length-1;t>=0;t--){var n=this.children[t];n.trail.isExtensionOf(e,!0)&&(this.children.splice(t,1),n.dispose())}}},{key:"checkAccessibleDisplayVisibility",value:function(e){var t=_.includes(this.relativeNodes[e]._pdomDisplaysInfo.pdomDisplays,this.display);if(t!==this.relativeVisibilities[e]){this.relativeVisibilities[e]=t;var n=0===this.invisibleCount;this.invisibleCount+=t?-1:1,0===this.invisibleCount!==n&&this.updateVisibility()}}},{key:"updateVisibility",value:function(){this.peer.setVisible(this.invisibleCount<=0),!this.peer.isVisible()&&Wc.pdomFocusedNode&&Wc.pdomFocusedNode.pdomInstances[0].trail.containsNode(this.node)&&(Wc.pdomFocus=null)}},{key:"isGloballyVisible",value:function(){return!!this.peer.isVisible()&&(!this.parent||this.parent.isGloballyVisible())}},{key:"getChildOrdering",value:function(e){var t,n=e.lastNode(),i=n.getEffectiveChildren(),r=[];if(n.hasPDOMContent&&n!==this.node){var a=n.pdomInstances;e:for(t=0;t<a.length;t++){var s=a[t];if(s.parent===this){for(var o=0;o<e.length;o++)if(e.nodes[o]!==s.trail.nodes[o+s.trail.length-e.length])continue e;r.push(s)}}}else for(t=0;t<i.length;t++)e.addDescendant(i[t],t),Array.prototype.push.apply(r,this.getChildOrdering(e)),e.removeDescendant();return r}},{key:"sortChildren",value:function(){var e=this.getChildOrdering(new bl(this.isRootInstance?this.display.rootNode:this.node));this.children=e;for(var t=this.peer.primarySibling,n=t.childNodes.length-1,i=this.children.length-1;i>=0;i--)for(var r=this.children[i].peer,a=r.topLevelElements.length-1;a>=0;a--){var s=r.topLevelElements[a];t.childNodes[n]!==s&&t.insertBefore(s,t.childNodes[n+1]),n--}Oh===qh.INDICES&&this.updateDescendantPeerIds(this.children)}},{key:"updateTransformTracker",value:function(t){this.transformTracker&&this.transformTracker.dispose();var n=null;n=t?t.getUniqueTrail():e.guessVisualTrail(this.trail,this.display.rootNode),this.transformTracker=new Mu(n)}},{key:"getPDOMInstanceUniqueId",value:function(){if(Oh===qh.INDICES){for(var e=[],t=this;t.parent;){var n=t.parent.children.indexOf(t);if(-1===n)return"STILL_BEING_CREATED"+Nh.nextDouble();e.unshift(n),t=t.parent}return e.join(Gs.PDOM_UNIQUE_ID_SEPARATOR)}return this.trail.getUniqueId()}},{key:"updateDescendantPeerIds",value:function(e){for(var t=[].concat(e);t.length>0;){var n=t.shift();n.peer.updateIndicesStringAndElementIds(),t.push.apply(t,_toConsumableArray(n.children))}}},{key:"dispose",value:function(){if(!this.isRootInstance){Gs.removeElements(this.parent.peer.primarySibling,this.peer.topLevelElements);for(var e=0;e<this.relativeNodes.length;e++)this.relativeNodes[e].pdomDisplaysEmitter.removeListener(this.relativeListeners[e])}for(;this.children.length;)this.children.pop().dispose();this.peer.dispose(),this.transformTracker.dispose(),this.transformTracker=null,this.node&&this.node.removePDOMInstance(this),this.relativeNodes=null,this.display=null,this.trail=null,this.node=null,this.peer=null,this.isDisposed=!0,this.freeToPool()}},{key:"toString",value:function(){return"".concat(this.id,"#{").concat(this.trail.toString(),"}")}},{key:"auditRoot",value:function(){return void 0}}],[{key:"uniqueIdToTrail",value:function(e,t){return Oh===qh.INDICES?e.getTrailFromPDOMIndicesString(t):bl.fromUniqueId(e.rootNode,t)}},{key:"guessVisualTrail",value:function(e,t){e.reindex();var n=e.indices.lastIndexOf(-1);if(n<0)return e;var i=n+1,r=e.nodes[i].getTrailsTo(t);if(0===r.length)return e;for(var a=r[0],s=i+1;s<e.length;s++)a.addDescendant(e.nodes[s]);return a}},{key:"createFakePDOMTree",value:function(e){return{node:null,children:function e(t){var n=_.flatten(t.getEffectiveChildren().map(e));return t.hasPDOMContent&&(n=[{node:t,children:n}]),n}(e)}}}]),e}();Cr.register("PDOMInstance",Gh),Gi.mixInto(Gh,{initialize:Gh.prototype.initializePDOMInstance});var Hh=Gh,Fh=null,Yh={addChild:function(e,t){var n=Yh.beforeOp(t);t._pdomParent||Yh.addTree(e,t),Yh.afterOp(n)},removeChild:function(e,t){var n=Yh.beforeOp(t);t._pdomParent||Yh.removeTree(e,t),Yh.afterOp(n)},childrenOrderChange:function(e){var t=Yh.beforeOp(e);Yh.reorder(e),Yh.afterOp(t)},pdomOrderChange:function(e,t,n){var i,r,a=Yh.beforeOp(e),s=[],o=[];Po(t||[],n||[],s,o);var l=Yh.findPDOMTrails(e);for(i=0;i<s.length;i++){var u=s[i];u&&(Yh.removeTree(e,u,l),u._pdomParent=null)}for(i=0;i<o.length;i++){var c=o[i];if(c){var h=c._parents;for(r=0;r<h.length;r++)Yh.removeTree(h[r],c);c._pdomParent=e}}for(i=0;i<s.length;i++){var d=s[i];if(d){var p=d._parents;for(r=0;r<p.length;r++)Yh.addTree(p[r],d)}}for(i=0;i<o.length;i++){var f=o[i];f&&Yh.addTree(e,f,l)}Yh.reorder(e,l),Yh.afterOp(a)},pdomContentChange:function(e){var t,n=Yh.beforeOp(e),i=e._pdomParent?[e._pdomParent]:e._parents,r=[];for(t=0;t<i.length;t++){var a=i[t],s=Yh.findPDOMTrails(a);r.push(s),Yh.removeTree(a,e,s)}for(t=0;t<i.length;t++)Yh.addTree(i[t],e,r[t]);for(t=0;t<e._rootedDisplays.length;t++){var o=e._rootedDisplays[t];o._accessible&&Yh.rebuildInstanceTree(o._rootPDOMInstance)}Yh.afterOp(n)},rebuildInstanceTree:function(e){var t=e.display.rootNode;e.removeAllChildren(),e.addConsecutiveInstances(Yh.createTree(new bl(t),e.display,e))},addTree:function(e,t,n){n=n||Yh.findPDOMTrails(e);for(var i=0;i<n.length;i++){var r=n[i],a=r.pdomInstance;r.fullTrail.addDescendant(t);var s=Yh.createTree(r.fullTrail,a.display,a);r.fullTrail.removeDescendant(t),a.addConsecutiveInstances(s)}},removeTree:function(e,t,n){n=n||Yh.findPDOMTrails(e);for(var i=0;i<n.length;i++){var r=n[i];r.fullTrail.addDescendant(t),r.pdomInstance.removeInstancesForTrail(r.fullTrail),r.fullTrail.removeDescendant(t)}},reorder:function(e,t){t=t||Yh.findPDOMTrails(e);for(var n=0;n<t.length;n++){t[n].pdomInstance.sortChildren()}},createTree:function(e,t,n){var i,r=e.lastNode(),a=r.getEffectiveChildren(),s=!1;r.hasPDOMContent&&((i=n.findChildWithTrail(e))?s=!0:i=Hh.createFromPool(n,t,e.copy()),n=i);for(var o=[],l=0;l<a.length;l++)e.addDescendant(a[l],l),Array.prototype.push.apply(o,Yh.createTree(e,t,n)),e.removeDescendant();return i?(i.addConsecutiveInstances(o),s?[]:[i]):o},beforeOp:function(e){Fh=Wc.pdomFocusedNode;for(var t=[],n=this.findPDOMTrails(e),i=0;i<n.length;i++){var r=n[i].pdomInstance.display;r.blockFocusCallbacks=!0,t.push(r)}return t},afterOp:function(e){Fh&&Fh.focus();for(var t=0;t<e.length;t++)e[t].blockFocusCallbacks=!1},findPDOMTrails:function(e){var t=[];return Yh.recursivePDOMTrailSearch(t,new bl(e)),t},recursivePDOMTrailSearch:function(e,t){var n,i=t.rootNode();if(i.hasPDOMContent){var r=i.pdomInstances;for(n=0;n<r.length;n++)e.push(new xs(r[n],t.copy(),!1))}else{var a=i.rootedDisplays;for(n=0;n<a.length;n++){var s=a[n];s._accessible&&e.push(new xs(s._rootPDOMInstance,t.copy(),!0))}var o=i._pdomParent?[i._pdomParent]:i._parents,l=o.length;for(n=0;n<l;n++){var u=o[n];t.addAncestor(u),Yh.recursivePDOMTrailSearch(e,t),t.removeAncestor()}}},auditPDOMDisplays:function(e){},auditNodeForPDOMCycles:function(e){},debugOrder:function(e){return null===e?"null":"[".concat(e.map((function(e){return null===e?"null":e._id})).join(","),"]")}};Cr.register("PDOMTree",Yh);var zh=Yh,Uh=function(){function e(t){_classCallCheck(this,e),this.indices=t}return _createClass(e,[{key:"size",value:function(){return this.indices.length}},{key:"apply",value:function(e){if("number"==typeof e)return this.indices[e];if(e.length!==this.size())throw new Error("Permutation length ".concat(this.size()," not equal to list length ").concat(e.length));for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[this.indices[n]];return t}},{key:"inverted",value:function(){for(var t=new Array(this.size()),n=0;n<this.size();n++)t[this.indices[n]]=n;return new e(t)}},{key:"withIndicesPermuted",value:function(t){var n=this,i=[];return e.forEachPermutation(t,(function(r){for(var a=n.indices,s=a.slice(0),o=0;o<t.length;o++)s[t[o]]=a[r[o]];i.push(new e(s))})),i}},{key:"toString",value:function(){return"P[".concat(this.indices.join(", "),"]")}},{key:"equals",value:function(e){return this.indices.length===e.indices.length&&_.isEqual(this.indices,e.indices)}}],[{key:"identity",value:function(t){for(var n=new Array(t),i=0;i<t;i++)n[i]=i;return new e(n)}},{key:"permutations",value:function(t){var n=[];return e.forEachPermutation(En.rangeInclusive(0,t-1),(function(t){n.push(new e(t.slice()))})),n}},{key:"forEachPermutation",value:function(e,t){!function e(t,n,i){if(0===t.length)i(n);else for(var r=0;r<t.length;r++){var a=t[r],s=t.slice(0);s.splice(r,1);var o=n.slice(0);o.push(a),e(s,o,i)}}(e,[],t)}},{key:"permutationsOf",value:function(t){var n=[];return e.forEachPermutation(t,(function(e){n.push(e.slice())})),n}}]),e}();xt.register("Permutation",Uh);var Wh=Uh,jh=function(){function e(t,n,i){_classCallCheck(this,e),i=i||null,this.nodeCount=t,this.logToConsole=n,this.nodes=_.range(0,t).map((function(){return new jo})),this.display=new Cy(this.nodes[0]),this.random=new ph({seed:i}),this.actionsTaken=[]}return _createClass(e,[{key:"step",value:function(){var e=this.random.sample(this.enumerateActions());if(this.logToConsole&&console.log(e.text),this.actionsTaken.push(e),e.execute(),this.display._rootPDOMInstance.auditRoot(),zh.auditPDOMDisplays(this.display.rootNode),this.logToConsole)for(var t=0;t<this.nodes.length;t++){var n=this.nodes[t];console.log("".concat(t,"#").concat(n.id," ").concat(n.tagName," ch:").concat(zh.debugOrder(n.children)," or:").concat(zh.debugOrder(n.pdomOrder)," vis:").concat(n.visible," avis:").concat(n.pdomVisible))}}},{key:"enumerateActions",value:function(){var e=this,t=[];return this.nodes.forEach((function(n){t.push({text:"#".concat(n.id,".visible = ").concat(!n.visible),execute:function(){n.visible=!n.visible}}),t.push({text:"#".concat(n.id,".pdomVisible = ").concat(!n.pdomVisible),execute:function(){n.pdomVisible=!n.pdomVisible}}),["span","div",null].forEach((function(e){n.tagName!==e&&t.push({text:"#".concat(n.id,".tagName = ").concat(e),execute:function(){n.tagName=e}})})),e.powerSet(Po(e.nodes,[n]).concat([null])).forEach((function(i){Wh.forEachPermutation(i,(function(i){e.isPDOMOrderChangeLegal(n,i)&&t.push({text:"#".concat(n.id,".pdomOrder = ").concat(zh.debugOrder(i)),execute:function(){n.pdomOrder=i}})}))})),e.nodes.forEach((function(i){e.isAddChildLegal(n,i)&&_.range(0,n.children.length+1).forEach((function(e){t.push({text:"#".concat(n.id,".insertChild(").concat(e,",#").concat(i.id,")"),execute:function(){n.insertChild(e,i)}})})),n.hasChild(i)&&t.push({text:"#".concat(n.id,".removeChild(#").concat(i.id,")"),execute:function(){n.removeChild(i)}})}))})),t}},{key:"isAddChildLegal",value:function(e,t){return!e.hasChild(t)&&this.isAcyclic(e,t)}},{key:"powerSet",value:function(e){if(0===e.length)return[[]];var t=this.powerSet(e.slice(1));return t.concat(t.map((function(t){return[e[0]].concat(t)})))}},{key:"isPDOMOrderChangeLegal",value:function(e,t){var n=this;if(null===t&&(t=[]),t=t.filter((function(e){return null!==e})),_.includes(t,e)||_.uniq(t).length<t.length)return!1;for(var i=0;i<t.length;i++)if(t[i]._pdomParent&&t[i]._pdomParent!==e)return!1;var r=function(n,i){return n===e?n.hasChild(i)||_.includes(t,i):n.hasChild(i)||!!n.pdomOrder&&_.includes(n.pdomOrder,i)},a=e.children.concat(t);return _.every(a,(function(t){return n.isAcyclic(e,t,r)}))}},{key:"isAcyclic",value:function(e,t,n){var i=this;if(e===t)return!1;for(var r=t.children.concat(t.pdomOrder).filter((function(e){return null!==e})),a=function(){var t=r.pop();if(t===e)return{v:!1};n?i.nodes.forEach((function(e){n(t,e)&&r.push(e)})):(Array.prototype.push.apply(r,t.children),t.pdomOrder&&Array.prototype.push.apply(r,t.pdomOrder.filter((function(e){return null!==e}))))};r.length;){var s=a();if("object"===_typeof(s))return s.v}return!0}},{key:"dispose",value:function(){this.display.dispose()}}]),e}();Cr.register("PDOMFuzzer",jh);var Xh=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(Xh,"DRAG",new Xh),_defineProperty(Xh,"KEYBOARD_DRAG",new Xh),_defineProperty(Xh,"enumeration",new re(Xh,{phetioDocumentation:"entries when signifying Intent of the pointer"}));var Qh=function(){function e(t,n,i){_classCallCheck(this,e),this.point=t,this.type=i,this.trail=null,this.inputEnabledTrail=null,this.isDownProperty=new pt(n),this.attachedProperty=new pt(!1),this._listeners=[],this._attachedListener=null,this._cursor=null,this.lastDOMEvent=null,this._intents=[],this._pointerCaptured=!1,this._listenerForDragReserve=null,this._listenerForKeyboardDragReserve=null}return _createClass(e,[{key:"setCursor",value:function(e){return this._cursor=e,this}},{key:"cursor",get:function(){return this.getCursor()},set:function(e){this.setCursor(e)}},{key:"getCursor",value:function(){return this._cursor}},{key:"getListeners",value:function(){return this._listeners.slice()}},{key:"listeners",get:function(){return this.getListeners()}},{key:"addInputListener",value:function(e,t){this._listeners.push(e),t&&this.attach(e)}},{key:"removeInputListener",value:function(e){var t=_.indexOf(this._listeners,e);this.isAttached()&&e===this._attachedListener&&this.detach(e),this._listeners.splice(t,1)}},{key:"getAttachedListener",value:function(){return this._attachedListener}},{key:"attachedListener",get:function(){return this.getAttachedListener()}},{key:"isAttached",value:function(){return this.attachedProperty.value}},{key:"isTouchLike",value:function(){return!1}},{key:"isDown",get:function(){return this.isDownProperty.value},set:function(e){this.isDownProperty.value=e}},{key:"interruptAttached",value:function(){this.isAttached()&&this._attachedListener.interrupt()}},{key:"interruptAll",value:function(){for(var e=this._listeners.slice(),t=0;t<e.length;t++){var n=e[t];n.interrupt&&n.interrupt()}}},{key:"attach",value:function(e){this.attachedProperty.value=!0,this._attachedListener=e}},{key:"detach",value:function(e){this.attachedProperty.value=!1,this._attachedListener=null}},{key:"hasPointChanged",value:function(e){return!(this.point===e||e&&this.point&&this.point.equals(e))}},{key:"addIntent",value:function(e){this._intents.includes(e)||this._intents.push(e)}},{key:"removeIntent",value:function(e){if(this._intents.includes(e)){var t=this._intents.indexOf(e);this._intents.splice(t,1)}}},{key:"hasIntent",value:function(e){return this._intents.includes(e)}},{key:"reserveForDrag",value:function(){var e=this;if(!this._intents.includes(Xh.DRAG)){this.addIntent(Xh.DRAG);var t={up:function(t){e.removeIntent(Xh.DRAG),e.removeInputListener(e._listenerForDragReserve),e._listenerForDragReserve=null}};this._listenerForDragReserve=t,this.addInputListener(this._listenerForDragReserve)}}},{key:"reserveForKeyboardDrag",value:function(){var e=this;if(!this._intents.includes(Xh.KEYBOARD_DRAG)){this.addIntent(Xh.KEYBOARD_DRAG);var t={keyup:function(e){return n()},blur:function(e){return n()}},n=function(){e.removeIntent(Xh.KEYBOARD_DRAG),e.removeInputListener(e._listenerForKeyboardDragReserve),e._listenerForKeyboardDragReserve=null};this._listenerForKeyboardDragReserve=t,this.addInputListener(this._listenerForKeyboardDragReserve)}}},{key:"onGotPointerCapture",value:function(){this._pointerCaptured=!0}},{key:"onLostPointerCapture",value:function(){this._pointerCaptured&&this.interruptAll(),this._pointerCaptured=!1}},{key:"dispose",value:function(){this._listenerForDragReserve&&this._listeners.includes(this._listenerForDragReserve)&&this.removeInputListener(this._listenerForDragReserve),this._listenerForKeyboardDragReserve&&this._listeners.includes(this._listenerForKeyboardDragReserve)&&this.removeInputListener(this._listenerForKeyboardDragReserve)}},{key:"toString",value:function(){return"Pointer#".concat(this.type,"_at_").concat(this.point)}}]),e}();Qh.PointerIO=new U("PointerIO",{valueType:Qh,toStateObject:function(e){return{point:e.point.toStateObject(),type:e.type}},stateSchema:{point:pn.Vector2IO,type:Te}}),Cr.register("Pointer",Qh);var Kh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e,!1,"mouse")).id=null,i.leftDown=!1,i.middleDown=!1,i.rightDown=!1,i.wheelDelta=new un(0,0,0),i.wheelDeltaMode=0,i}return _createClass(n,[{key:"down",value:function(e,t){var n=t,i=this.hasPointChanged(e);switch(this.point=e,this.isDown=!0,n.button){case 0:this.leftDown=!0;break;case 1:this.middleDown=!0;break;case 2:this.rightDown=!0}return i}},{key:"up",value:function(e,t){var n=t,i=this.hasPointChanged(e);switch(this.point=e,this.isDown=!1,n.button){case 0:this.leftDown=!1;break;case 1:this.middleDown=!1;break;case 2:this.rightDown=!1}return i}},{key:"move",value:function(e,t){var n=this.hasPointChanged(e);return this.point=e,n}},{key:"over",value:function(e,t){var n=this.hasPointChanged(e);return this.point=e,n}},{key:"out",value:function(e,t){return this.hasPointChanged(e)}},{key:"wheel",value:function(e){var t=e;this.wheelDelta.setXYZ(t.deltaX,t.deltaY,t.deltaZ),this.wheelDeltaMode=t.deltaMode}},{key:"toString",value:function(){return"Mouse"}}]),n}(Qh);Cr.register("Mouse",Kh);var Jh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this,i,!0,"touch")).id=e,a}return _createClass(n,[{key:"move",value:function(e,t){var n=this.hasPointChanged(e);return this.point=e,n}},{key:"end",value:function(e,t){var n=this.hasPointChanged(e);return this.point=e,this.isDown=!1,n}},{key:"cancel",value:function(e,t){var n=this.hasPointChanged(e);return this.point=e,this.isDown=!1,n}},{key:"toString",value:function(){return"Touch#".concat(this.id)}},{key:"isTouchLike",value:function(){return!0}}]),n}(Qh);Cr.register("Touch",Jh);var Zh=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this,i,!0,"pen")).id=e,a}return _createClass(n,[{key:"move",value:function(e,t){var n=this.hasPointChanged(e);return this.point=e,n}},{key:"end",value:function(e,t){var n=this.hasPointChanged(e);return this.point=e,this.isDown=!1,n}},{key:"cancel",value:function(e,t){var n=this.hasPointChanged(e);return this.point=e,this.isDown=!1,n}},{key:"toString",value:function(){return"Pen#".concat(this.id)}},{key:"isTouchLike",value:function(){return!0}}]),n}(Qh);Cr.register("Pen",Zh);var $h=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,pn.ZERO,!1,"pdom")).display=e,i.initializeListeners(),i.blockTrustedEvents=!1,i.keydownTargetNode=null,i}return _createClass(n,[{key:"initializeListeners",value:function(){var e=this;this.addInputListener({focus:function(t){var n=e.trail.lastNode();if(n.focusable){var i=Hh.guessVisualTrail(e.trail,e.display.rootNode);Wc.pdomFocus=new ya(e.display,i),e.point=i.parentToGlobalPoint(n.center),isNaN(e.point.x)&&e.point.setXY(0,0)}else t.target.blur(),t.abort()},blur:function(t){var n=e.display._input.getRelatedTargetTrail(t.domEvent);e.trail=null,n&&n.lastNode().focusable?Wc.pdomFocus=new ya(e.display,Hh.guessVisualTrail(n,e.display.rootNode)):Wc.pdomFocus=null,e.keydownTargetNode=null},keydown:function(t){e.blockTrustedEvents&&t.domEvent.isTrusted||(e.keydownTargetNode=t.target)},keyup:function(t){e.blockTrustedEvents&&t.domEvent.isTrusted||e.keydownTargetNode!==t.target&&t.abort()}})}},{key:"updateTrail",value:function(e){return this.trail&&this.trail.equals(e)||(this.trail=e),this.trail}}]),n}(Qh);Cr.register("PDOMPointer",$h);var ed=function(){function e(t,n,i,r){_classCallCheck(this,e),this.handled=!1,this.aborted=!1,this.trail=t,this.type=n,this.pointer=i,this.domEvent=r,this.currentTarget=null,this.target=t.lastNode(),this.isPrimary=!(i instanceof Kh&&r&&0!==r.button),r&&(i.lastDOMEvent=r)}return _createClass(e,[{key:"handle",value:function(){this.handled=!0}},{key:"abort",value:function(){this.aborted=!0}},{key:"isFromPDOM",value:function(){return this.pointer instanceof $h}},{key:"canStartPress",value:function(){return!(this.pointer.isAttached()||this.pointer instanceof Kh&&0!==this.domEvent.button)}}]),e}();ed.SceneryEventIO=new U("SceneryEventIO",{valueType:ed,documentation:'An event, with a "point" field',toStateObject:function(e){return{type:e.type,domEventType:Qe(Da).toStateObject(e.domEvent),point:e.pointer&&e.pointer.point?pn.Vector2IO.toStateObject(e.pointer.point):null}},stateSchema:{type:Te,domEventType:Qe(Da),point:Qe(pn.Vector2IO)}}),Cr.register("SceneryEvent",ed);var td=["altKey","button","charCode","clientX","clientY","code","ctrlKey","deltaMode","deltaX","deltaY","deltaZ","key","keyCode","metaKey","pageX","pageY","pointerId","pointerType","scale","shiftKey","target","type","relatedTarget","which"],nd=["deltaMode","deltaX","deltaY","deltaZ","altKey","button","charCode","clientX","clientY","code","ctrlKey","key","keyCode","metaKey","pageX","pageY","pointerId","pointerType","shiftKey","type","relatedTarget","which"],id=["target","relatedTarget"],rd=["focus","blur","focusin","focusout"],ad=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o){var l;_classCallCheck(this,n);var u=S()({phetioType:n.InputIO,tandem:xe.OPTIONAL,phetioDocumentation:"Central point for user input events, such as mouse, touch"},o);return(l=t.call(this,u)).display=e,l.rootNode=e.rootNode,l.attachToWindow=i,l.batchDOMEvents=r,l.assumeFullWindow=a,l.passiveEvents=s,l.batchedEvents=[],l.pdomPointer=null,l.mouse=null,l.pointers=[],l.pointerAddedEmitter=new d,l.currentlyFiringEvents=!1,l.upTimeStamp=0,l.validatePointersAction=new zu((function(){for(var e=l.pointers.length;e--;){var t=l.pointers[e];t.point&&t!==l.pdomPointer&&l.branchChangeEvents(t,t.lastDOMEvent,!1)}}),{phetioPlayback:!0,tandem:u.tandem.createTandem("validatePointersAction"),phetioHighFrequency:!0}),l.mouseUpAction=new zu((function(e,t){var n=l.ensureMouse(e),i=n.up(e,t);n.id=null,l.upEvent(n,t,i)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("mouseUpAction"),parameters:[{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a mouse button is released."}),l.mouseDownAction=new zu((function(e,t,n){var i=l.ensureMouse(t);i.id=e;var r=i.down(t,n);l.downEvent(i,n,r)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("mouseDownAction"),parameters:[{name:"id",phetioType:Qe(Lt)},{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a mouse button is pressed."}),l.mouseMoveAction=new zu((function(e,t){var n=l.ensureMouse(e);n.move(e,t),l.moveEvent(n,t)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("mouseMoveAction"),parameters:[{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the mouse is moved.",phetioHighFrequency:!0}),l.mouseOverAction=new zu((function(e,t){l.ensureMouse(e).over(e,t)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("mouseOverAction"),parameters:[{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the mouse is moved while on the sim."}),l.mouseOutAction=new zu((function(e,t){l.ensureMouse(e).out(e,t)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("mouseOutAction"),parameters:[{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the mouse moves out of the display."}),l.wheelScrollAction=new zu((function(e){var t=l.ensureMouse(l.pointFromEvent(e));if(t.wheel(e),t.point){var n=l.rootNode.trailUnderPointer(t)||new bl(l.rootNode);l.dispatchEvent(n,"wheel",t,e,!0)}}),{phetioPlayback:!0,tandem:u.tandem.createTandem("wheelScrollAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the mouse wheel scrolls.",phetioHighFrequency:!0}),l.touchStartAction=new zu((function(e,t,n){var i=new Jh(e,t,n);l.addPointer(i),l.downEvent(i,n,!1)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("touchStartAction"),parameters:[{name:"id",phetioType:Lt},{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a touch begins."}),l.touchEndAction=new zu((function(e,t,n){var i=l.findPointerById(e);if(i){var r=i.end(t,n);l.upEvent(i,n,r),l.removePointer(i)}}),{phetioPlayback:!0,tandem:u.tandem.createTandem("touchEndAction"),parameters:[{name:"id",phetioType:Lt},{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a touch ends."}),l.touchMoveAction=new zu((function(e,t,n){var i=l.findPointerById(e);i&&(i.move(t,n),l.moveEvent(i,n))}),{phetioPlayback:!0,tandem:u.tandem.createTandem("touchMoveAction"),parameters:[{name:"id",phetioType:Lt},{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a touch moves.",phetioHighFrequency:!0}),l.touchCancelAction=new zu((function(e,t,n){var i=l.findPointerById(e);if(i){var r=i.cancel(t,n);l.cancelEvent(i,n,r),l.removePointer(i)}}),{phetioPlayback:!0,tandem:u.tandem.createTandem("touchCancelAction"),parameters:[{name:"id",phetioType:Lt},{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a touch is canceled."}),l.penStartAction=new zu((function(e,t,n){var i=new Zh(e,t,n);l.addPointer(i),l.downEvent(i,n,!1)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("penStartAction"),parameters:[{name:"id",phetioType:Lt},{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a pen touches the screen."}),l.penEndAction=new zu((function(e,t,n){var i=l.findPointerById(e);if(i){var r=i.end(t,n);l.upEvent(i,n,r),l.removePointer(i)}}),{phetioPlayback:!0,tandem:u.tandem.createTandem("penEndAction"),parameters:[{name:"id",phetioType:Lt},{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a pen is lifted."}),l.penMoveAction=new zu((function(e,t,n){var i=l.findPointerById(e);i&&(i.move(t,n),l.moveEvent(i,n))}),{phetioPlayback:!0,tandem:u.tandem.createTandem("penMoveAction"),parameters:[{name:"id",phetioType:Lt},{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a pen is moved.",phetioHighFrequency:!0}),l.penCancelAction=new zu((function(e,t,n){var i=l.findPointerById(e);if(i){var r=i.cancel(t,n);l.cancelEvent(i,n,r),l.removePointer(i)}}),{phetioPlayback:!0,tandem:u.tandem.createTandem("penCancelAction"),parameters:[{name:"id",phetioType:Lt},{name:"point",phetioType:pn.Vector2IO},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a pen is canceled."}),l.gotPointerCaptureAction=new zu((function(e,t){var n=l.findPointerById(e);n&&n.onGotPointerCapture()}),{phetioPlayback:!0,tandem:u.tandem.createTandem("gotPointerCaptureAction"),parameters:[{name:"id",phetioType:Lt},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a pointer is captured (normally at the start of an interaction)",phetioHighFrequency:!0}),l.lostPointerCaptureAction=new zu((function(e,t){var n=l.findPointerById(e);n&&n.onLostPointerCapture()}),{phetioPlayback:!0,tandem:u.tandem.createTandem("lostPointerCaptureAction"),parameters:[{name:"id",phetioType:Lt},{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when a pointer loses its capture (normally at the end of an interaction)",phetioHighFrequency:!0}),l.focusinAction=new zu((function(e){var t=l.getPDOMEventTrail(e,"focusin");t&&(l.display.blockFocusCallbacks||(l.dispatchPDOMEvent(t,"focus",e,!1),l.dispatchPDOMEvent(t,"focusin",e,!0)))}),{phetioPlayback:!0,tandem:u.tandem.createTandem("focusinAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the PDOM root gets the focusin DOM event."}),l.focusoutAction=new zu((function(e){var t=l.getPDOMEventTrail(e,"focusout");t&&(l.display.blockFocusCallbacks||(l.dispatchPDOMEvent(t,"blur",e,!1),l.dispatchPDOMEvent(t,"focusout",e,!0)))}),{phetioPlayback:!0,tandem:u.tandem.createTandem("focusoutAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the PDOM root gets the focusout DOM event."}),l.clickAction=new zu((function(e){var t=l.getPDOMEventTrail(e,"click");t&&l.dispatchPDOMEvent(t,"click",e,!0)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("clickAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the PDOM root gets the click DOM event."}),l.inputAction=new zu((function(e){var t=l.getPDOMEventTrail(e,"input");t&&l.dispatchPDOMEvent(t,"input",e,!0)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("inputAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the PDOM root gets the input DOM event."}),l.changeAction=new zu((function(e){var t=l.getPDOMEventTrail(e,"change");t&&l.dispatchPDOMEvent(t,"change",e,!0)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("changeAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the PDOM root gets the change DOM event."}),l.keydownAction=new zu((function(e){l.dispatchGlobalEvent("globalkeydown",e,!0);var t=l.getPDOMEventTrail(e,"keydown");t&&l.dispatchPDOMEvent(t,"keydown",e,!0),l.dispatchGlobalEvent("globalkeydown",e,!1)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("keydownAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the PDOM root gets the keydown DOM event."}),l.keyupAction=new zu((function(e){l.dispatchGlobalEvent("globalkeyup",e,!0);var t=l.getPDOMEventTrail(e,"keydown");t&&l.dispatchPDOMEvent(t,"keyup",e,!0),l.dispatchGlobalEvent("globalkeyup",e,!1)}),{phetioPlayback:!0,tandem:u.tandem.createTandem("keyupAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Emits when the PDOM root gets the keyup DOM event."}),l}return _createClass(n,[{key:"interruptPointers",value:function(){_.each(this.pointers,(function(e){e.interruptAll()}))}},{key:"batchEvent",value:function(e,t,n,i){this.display.interactive&&(this.batchedEvents.push(ld.pool.create(e,t,n)),!i&&this.batchDOMEvents||this.fireBatchedEvents()),!0===this.passiveEvents||n===this.mouseDown&&!la.edge||t===od.ALT_TYPE||e.preventDefault()}},{key:"fireBatchedEvents",value:function(){if(!this.currentlyFiringEvents&&this.batchedEvents.length){this.currentlyFiringEvents=!0;for(var e=this.batchedEvents,t=0;t<e.length;t++){var n=e[t];n.run(this),n.dispose()}Ui(e),this.currentlyFiringEvents=!1}}},{key:"clearBatchedEvents",value:function(){this.batchedEvents.length=0}},{key:"validatePointers",value:function(){this.validatePointersAction.execute()}},{key:"removeTemporaryPointers",value:function(){for(var e={eek:"This is a fake DOM event created in removeTemporaryPointers(), called from a Scenery exit event. Our attempt to masquerade seems unsuccessful! :("},t=this.pointers.length-1;t>=0;t--){var n=this.pointers[t];if(!(n instanceof Kh)){this.pointers.splice(t,1);var i=n.trail||new bl(this.rootNode);this.exitEvents(n,e,i,0,!0)}}}},{key:"connectListeners",value:function(){hd.addDisplay(this.display,this.attachToWindow,this.passiveEvents)}},{key:"disconnectListeners",value:function(){hd.removeDisplay(this.display,this.attachToWindow,this.passiveEvents)}},{key:"pointFromEvent",value:function(e){var t=pn.pool.create(e.clientX,e.clientY);if(!this.assumeFullWindow){var n=this.display.domElement.getBoundingClientRect();n.width>0&&n.height>0&&(t.subtractXY(n.left,n.top),n.width===this.display.width&&n.height===this.display.height||(t.x*=this.display.width/n.width,t.y*=this.display.height/n.height))}return t}},{key:"addPointer",value:function(e){this.pointers.push(e),this.pointerAddedEmitter.emit(e)}},{key:"removePointer",value:function(e){for(var t=this.pointers.length-1;t>=0;t--)this.pointers[t]===e&&this.pointers.splice(t,1);e.dispose()}},{key:"findPointerById",value:function(e){for(var t=this.pointers.length;t--;){var n=this.pointers[t];if(n.id===e)return n}return null}},{key:"getPDOMEventTrail",value:function(e,t){if(!this.display.interactive)return null;var n=this.getTrailFromPDOMEvent(e);return n&&!("click"===t&&_.some(n.nodes,(function(e){return e.positionInPDOM}))&&e.timeStamp-this.upTimeStamp<=80)?n:null}},{key:"initMouse",value:function(e){var t=new Kh(e);return this.mouse=t,this.addPointer(t),t}},{key:"ensureMouse",value:function(e){var t=this.mouse;return t||this.initMouse(e)}},{key:"initPDOMPointer",value:function(){var e=new $h(this.display);return this.pdomPointer=e,this.addPointer(e),e}},{key:"ensurePDOMPointer",value:function(){var e=this.pdomPointer;return e||this.initPDOMPointer()}},{key:"dispatchPDOMEvent",value:function(e,t,n,i){(this.ensurePDOMPointer().updateTrail(e),Gs.USER_GESTURE_EVENTS.includes(t)&&Cy.userGestureEmitter.emit(),n.target&&n.target.hasAttribute(Gs.DATA_EXCLUDE_FROM_INPUT))||(e.isPickable()||rd.includes(t)||(e=new bl([])),this.dispatchEvent(e,t,this.pdomPointer,n,i))}},{key:"dispatchGlobalEvent",value:function(e,t,n){var i=this;this.ensurePDOMPointer();var r=this.pdomPointer,a=new ed(new bl,e,r,t);!function t(s){if(!s.isDisposed&&s.isVisible()&&s.isInputEnabled()){for(var o=s._children.length-1;o>=0;o--)t(s._children[o]);a.aborted||a.handled||(a.currentTarget=s,i.dispatchToListeners(r,s._inputListeners,e,a,n))}}(this.rootNode)}},{key:"getRelatedTargetTrail",value:function(e){var t=e.relatedTarget;if(t&&this.isTargetUnderPDOM(t)){var n=e.relatedTarget,i=n.getAttribute(Gs.DATA_PDOM_UNIQUE_ID);return Hh.uniqueIdToTrail(this.display,i)}return null}},{key:"getTrailFromPDOMEvent",value:function(e){if(!this.display._accessible)return null;if(e.targetSubstitute){var t=e.targetSubstitute.getAttribute(Gs.DATA_PDOM_UNIQUE_ID);return Hh.uniqueIdToTrail(this.display,t)}var n=e.target;if(n&&this.isTargetUnderPDOM(n)){var i=n.getAttribute(Gs.DATA_PDOM_UNIQUE_ID);return Hh.uniqueIdToTrail(this.display,i)}return null}},{key:"mouseDown",value:function(e,t,n){this.mouseDownAction.execute(e,t,n)}},{key:"mouseUp",value:function(e,t){this.mouseUpAction.execute(e,t)}},{key:"mouseMove",value:function(e,t){this.mouseMoveAction.execute(e,t)}},{key:"mouseOver",value:function(e,t){this.mouseOverAction.execute(e,t)}},{key:"mouseOut",value:function(e,t){this.mouseOutAction.execute(e,t)}},{key:"wheel",value:function(e){this.wheelScrollAction.execute(e)}},{key:"touchStart",value:function(e,t,n){this.touchStartAction.execute(e,t,n)}},{key:"touchEnd",value:function(e,t,n){this.touchEndAction.execute(e,t,n)}},{key:"touchMove",value:function(e,t,n){this.touchMoveAction.execute(e,t,n)}},{key:"touchCancel",value:function(e,t,n){this.touchCancelAction.execute(e,t,n)}},{key:"penStart",value:function(e,t,n){this.penStartAction.execute(e,t,n)}},{key:"penEnd",value:function(e,t,n){this.penEndAction.execute(e,t,n)}},{key:"penMove",value:function(e,t,n){this.penMoveAction.execute(e,t,n)}},{key:"penCancel",value:function(e,t,n){this.penCancelAction.execute(e,t,n)}},{key:"pointerDown",value:function(e,t,n,i){var r=this.attachToWindow?document.body:this.display.domElement;switch(r.setPointerCapture&&i.pointerId&&r.setPointerCapture(i.pointerId),t=this.handleUnknownPointerType(t,e)){case"mouse":this.mouseDown(e,n,i);break;case"touch":this.touchStart(e,n,i);break;case"pen":this.penStart(e,n,i);break;default:0}}},{key:"pointerUp",value:function(e,t,n,i){switch(this.upTimeStamp=i.timeStamp,t=this.handleUnknownPointerType(t,e)){case"mouse":this.mouseUp(n,i);break;case"touch":this.touchEnd(e,n,i);break;case"pen":this.penEnd(e,n,i);break;default:0}}},{key:"pointerCancel",value:function(e,t,n,i){switch(t=this.handleUnknownPointerType(t,e)){case"mouse":console&&console.log&&console.log("WARNING: Pointer mouse cancel was received");break;case"touch":this.touchCancel(e,n,i);break;case"pen":this.penCancel(e,n,i);break;default:console.log&&console.log("Unknown pointer type: ".concat(t))}}},{key:"gotPointerCapture",value:function(e,t,n,i){this.gotPointerCaptureAction.execute(e,i)}},{key:"lostPointerCapture",value:function(e,t,n,i){this.lostPointerCaptureAction.execute(e,i)}},{key:"pointerMove",value:function(e,t,n,i){switch(t=this.handleUnknownPointerType(t,e)){case"mouse":this.mouseMove(n,i);break;case"touch":this.touchMove(e,n,i);break;case"pen":this.penMove(e,n,i);break;default:console.log&&console.log("Unknown pointer type: ".concat(t))}}},{key:"pointerOver",value:function(e,t,n,i){}},{key:"pointerOut",value:function(e,t,n,i){}},{key:"pointerEnter",value:function(e,t,n,i){}},{key:"pointerLeave",value:function(e,t,n,i){}},{key:"focusIn",value:function(e){this.focusinAction.execute(e)}},{key:"focusOut",value:function(e){this.focusoutAction.execute(e)}},{key:"input",value:function(e){this.inputAction.execute(e)}},{key:"change",value:function(e){this.changeAction.execute(e)}},{key:"click",value:function(e){this.clickAction.execute(e)}},{key:"keyDown",value:function(e){this.keydownAction.execute(e)}},{key:"keyUp",value:function(e){this.keyupAction.execute(e)}},{key:"handleUnknownPointerType",value:function(e,t){return""!==e?e:this.mouse&&this.mouse.id===t?"mouse":"touch"}},{key:"getPointerTrail",value:function(e){return this.rootNode.trailUnderPointer(e)||new bl(this.rootNode)}},{key:"upEvent",value:function(e,t,n){if(!this.isTargetUnderPDOM(t.target)){var i=this.branchChangeEvents(e,t,n);this.dispatchEvent(i,"up",e,t,!0),e.isTouchLike()&&this.exitEvents(e,t,i,0,!0)}}},{key:"downEvent",value:function(e,t,n){if(!this.isTargetUnderPDOM(t.target)){var i=this.branchChangeEvents(e,t,n);this.dispatchEvent(i,"down",e,t,!0)}}},{key:"moveEvent",value:function(e,t){this.branchChangeEvents(e,t,!0)}},{key:"cancelEvent",value:function(e,t,n){var i=this.branchChangeEvents(e,t,n);this.dispatchEvent(i,"cancel",e,t,!0),e.isTouchLike()&&this.exitEvents(e,t,i,0,!0)}},{key:"branchChangeEvents",value:function(e,t,n){var i=this.getPointerTrail(e),r=i.slice(0,Math.min(i.nodes.length,i.getLastInputEnabledIndex()+1)),a=e.inputEnabledTrail||new bl(this.rootNode),s=bl.branchIndex(r,a),o=a.lastNode()!==r.lastNode();return n&&this.dispatchEvent(i,"move",e,t,!0),this.exitEvents(e,t,a,s,o),this.enterEvents(e,t,r,s,o),e.trail=i,e.inputEnabledTrail=r,i}},{key:"enterEvents",value:function(e,t,n,i,r){r&&this.dispatchEvent(n,"over",e,t,!0,!0);for(var a=i;a<n.length;a++)this.dispatchEvent(n.slice(0,a+1),"enter",e,t,!1)}},{key:"exitEvents",value:function(e,t,n,i,r){for(var a=n.length-1;a>=i;a--)this.dispatchEvent(n.slice(0,a+1),"exit",e,t,!1,!0);r&&this.dispatchEvent(n,"out",e,t,!0)}},{key:"dispatchEvent",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=new ed(e,t,n,i);this.dispatchToListeners(n,n.getListeners(),t,s),this.dispatchToTargets(e,t,n,s,r,a),this.dispatchToListeners(n,this.display.getInputListeners(),t,s),Cy.inputListeners.length&&this.dispatchToListeners(n,Cy.inputListeners.slice(),t,s)}},{key:"dispatchToListeners",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!i.handled)for(var a=e.type+n,s=0;s<t.length;s++){var o=t[s];null!==r&&r!==!!o.capture||(!i.aborted&&o[a]&&o[a](i),!i.aborted&&o[n]&&o[n](i))}}},{key:"dispatchToTargets",value:function(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!i.aborted&&!i.handled)for(var s=e.getLastInputEnabledIndex(),o=e.nodes.length-1;o>=0;r?o--:o=-1){var l=e.nodes[o],u=s<o;if(!(l.isDisposed||!a&&u)&&(i.currentTarget=l,this.dispatchToListeners(n,l.getInputListeners(),t,i),i.aborted||i.handled))return}}},{key:"isTargetUnderPDOM",value:function(e){return this.display._accessible&&this.display.pdomRootElement.contains(e)}}],[{key:"serializeDomEvent",value:function(e){var t={constructorName:e.constructor.name};return td.forEach((function(n){var i=e[n];if(null==i)t[n]=null;else if(i instanceof Element&&id.includes(n)&&"function"==typeof i.getAttribute&&i.hasAttribute(Gs.DATA_PDOM_UNIQUE_ID)){var r;t[n]=(_defineProperty(r={},Gs.DATA_PDOM_UNIQUE_ID,i.getAttribute(Gs.DATA_PDOM_UNIQUE_ID)),_defineProperty(r,"id",i.getAttribute("id")),r)}else t[n]="object"===_typeof(i)?{}:JSON.parse(JSON.stringify(i))})),t}},{key:"deserializeDomEvent",value:function(e){var t=e.constructorName||"Event",n=_.pick(e,nd);if(n.relatedTarget){var i=document.getElementById(n.relatedTarget.id);n.relatedTarget=i}var r=new window[t](t,n);for(var a in e){if(e.hasOwnProperty(a)&&!nd.includes(a))if("target"===a)r.targetSubstitute=_.clone(e[a])||{},r.targetSubstitute.getAttribute=function(e){return this[e]};else r[a]=e[a]}return r}},{key:"debugText",value:function(e,t){var n="".concat(t.timeStamp," ").concat(t.type);return null!==e&&(n="".concat(e.x,",").concat(e.y," ").concat(n)),n}},{key:"msPointerType",value:function(e){return e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?"touch":e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_PEN?"pen":e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?"mouse":e.pointerType}}]),n}(Be),sd=Ye(Qh.PointerIO);ad.InputIO=new U("InputIO",{valueType:ad,applyState:_.noop,toStateObject:function(e){return{pointers:sd.toStateObject(e.pointers)}},stateSchema:{pointers:sd}}),Cr.register("Input",ad);var od=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(od,"POINTER_TYPE",new od),_defineProperty(od,"MS_POINTER_TYPE",new od),_defineProperty(od,"TOUCH_TYPE",new od),_defineProperty(od,"MOUSE_TYPE",new od),_defineProperty(od,"WHEEL_TYPE",new od),_defineProperty(od,"ALT_TYPE",new od),_defineProperty(od,"enumeration",new re(od,{phetioDocumentation:"The type of batched event"}));var ld=function(){function e(t,n,i){_classCallCheck(this,e),this.initialize(t,n,i)}return _createClass(e,[{key:"initialize",value:function(e,t,n){this.domEvent=e,this.type=t,this.callback=n}},{key:"run",value:function(e){var t=this.domEvent,n=this.callback;if(e.validatePointers(),this.type===od.POINTER_TYPE){var i=t;n.call(e,i.pointerId,i.pointerType,e.pointFromEvent(i),i)}else if(this.type===od.MS_POINTER_TYPE){var r=t;n.call(e,r.pointerId,ad.msPointerType(r),e.pointFromEvent(r),r)}else if(this.type===od.TOUCH_TYPE)for(var a=t,s=0;s<a.changedTouches.length;s++){var o=a.changedTouches.item(s);n.call(e,o.identifier,e.pointFromEvent(o),a)}else if(this.type===od.MOUSE_TYPE){var l=t;n===e.mouseDown?n.call(e,null,e.pointFromEvent(l),l):n.call(e,e.pointFromEvent(l),l)}else{if(this.type!==od.WHEEL_TYPE&&this.type!==od.ALT_TYPE)throw new Error("bad type value: ".concat(this.type));n.call(e,t)}}},{key:"dispose",value:function(){this.domEvent=null,this.callback=null,this.freeToPool()}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}]),e}();_defineProperty(ld,"pool",new rn(ld)),Cr.register("BatchedDOMEvent",ld);var ud=function(){},cd={addDisplay:function(e,t,n){this.attachedDisplays.push(e),t?1===this.attachedDisplays.length&&this.connectWindowListeners(n):this.addOrRemoveListeners(e.domElement,!0,n),e.domElement.addEventListener("wheel",this.onwheel,cd.getEventOptions(n,!0))},removeDisplay:function(e,t,n){J(this.attachedDisplays,e),t?0===this.attachedDisplays.length&&this.disconnectWindowListeners(n):this.addOrRemoveListeners(e.domElement,!1,n),e.domElement.removeEventListener("wheel",this.onwheel,cd.getEventOptions(n,!0))},getEventOptions:function(e,t){return!(!zr.passive||null===e)&&(t?{capture:!1,passive:e}:{passive:e})},listenersAttachedToWindow:0,listenersAttachedToElement:0,attachedDisplays:[],canUsePointerEvents:!!(window.navigator&&window.navigator.pointerEnabled||window.PointerEvent)&&!la.firefox,canUseMSPointerEvents:window.navigator&&window.navigator.msPointerEnabled,pointerListenerTypes:["pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","gotpointercapture","lostpointercapture"],msPointerListenerTypes:["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerCancel"],touchListenerTypes:["touchstart","touchend","touchmove","touchcancel"],mouseListenerTypes:["mousedown","mouseup","mousemove","mouseover","mouseout"],wheelListenerTypes:["wheel"],altListenerTypes:Gs.DOM_EVENTS,getNonWheelUsedTypes:function(){return(this.canUsePointerEvents?this.pointerListenerTypes:this.canUseMSPointerEvents?this.msPointerListenerTypes:this.touchListenerTypes.concat(this.mouseListenerTypes)).concat(this.altListenerTypes)},connectWindowListeners:function(e){this.addOrRemoveListeners(window,!0,e)},disconnectWindowListeners:function(e){this.addOrRemoveListeners(window,!1,e)},addOrRemoveListeners:function(e,t,n){var i=e===window,r=t?1:-1;i?this.listenersAttachedToWindow+=r:this.listenersAttachedToElement+=r;for(var a=t?"addEventListener":"removeEventListener",s=this.getNonWheelUsedTypes(),o=0;o<s.length;o++){var l=s[o];i&&document[a](l,ud,cd.getEventOptions(n,!1));var u=this["on".concat(l)];e[a](l,u,cd.getEventOptions(n,!0))}},batchWindowEvent:function(e,t,n,i){for(var r=0;r<this.attachedDisplays.length;r++){var a=this.attachedDisplays[r]._input;a.batchEvent(e,t,a[n],i)}},onpointerdown:function(e){"mouse"===e.pointerType&&Cy.userGestureEmitter.emit(),cd.batchWindowEvent(e,od.POINTER_TYPE,"pointerDown",!1)},onpointerup:function(e){Cy.userGestureEmitter.emit(),cd.batchWindowEvent(e,od.POINTER_TYPE,"pointerUp",!0)},onpointermove:function(e){cd.batchWindowEvent(e,od.POINTER_TYPE,"pointerMove",!1)},onpointerover:function(e){cd.batchWindowEvent(e,od.POINTER_TYPE,"pointerOver",!1)},onpointerout:function(e){cd.batchWindowEvent(e,od.POINTER_TYPE,"pointerOut",!1)},onpointercancel:function(e){cd.batchWindowEvent(e,od.POINTER_TYPE,"pointerCancel",!1)},ongotpointercapture:function(e){cd.batchWindowEvent(e,od.POINTER_TYPE,"gotPointerCapture",!1)},onlostpointercapture:function(e){cd.batchWindowEvent(e,od.POINTER_TYPE,"lostPointerCapture",!1)},onMSPointerDown:function(e){cd.batchWindowEvent(e,od.MS_POINTER_TYPE,"pointerDown",!1)},onMSPointerUp:function(e){cd.batchWindowEvent(e,od.MS_POINTER_TYPE,"pointerUp",!0)},onMSPointerMove:function(e){cd.batchWindowEvent(e,od.MS_POINTER_TYPE,"pointerMove",!1)},onMSPointerOver:function(e){cd.batchWindowEvent(e,od.MS_POINTER_TYPE,"pointerOver",!1)},onMSPointerOut:function(e){cd.batchWindowEvent(e,od.MS_POINTER_TYPE,"pointerOut",!1)},onMSPointerCancel:function(e){cd.batchWindowEvent(e,od.MS_POINTER_TYPE,"pointerCancel",!1)},ontouchstart:function(e){cd.batchWindowEvent(e,od.TOUCH_TYPE,"touchStart",!1)},ontouchend:function(e){Cy.userGestureEmitter.emit(),cd.batchWindowEvent(e,od.TOUCH_TYPE,"touchEnd",!0)},ontouchmove:function(e){cd.batchWindowEvent(e,od.TOUCH_TYPE,"touchMove",!1)},ontouchcancel:function(e){cd.batchWindowEvent(e,od.TOUCH_TYPE,"touchCancel",!1)},onmousedown:function(e){Cy.userGestureEmitter.emit(),cd.batchWindowEvent(e,od.MOUSE_TYPE,"mouseDown",!1)},onmouseup:function(e){Cy.userGestureEmitter.emit(),cd.batchWindowEvent(e,od.MOUSE_TYPE,"mouseUp",!0)},onmousemove:function(e){cd.batchWindowEvent(e,od.MOUSE_TYPE,"mouseMove",!1)},onmouseover:function(e){cd.batchWindowEvent(e,od.MOUSE_TYPE,"mouseOver",!1)},onmouseout:function(e){cd.batchWindowEvent(e,od.MOUSE_TYPE,"mouseOut",!1)},onwheel:function(e){cd.batchWindowEvent(e,od.WHEEL_TYPE,"wheel",!1)},onfocusin:function(e){cd.batchWindowEvent(e,od.ALT_TYPE,"focusIn",!0)},onfocusout:function(e){cd.batchWindowEvent(e,od.ALT_TYPE,"focusOut",!0)},oninput:function(e){cd.batchWindowEvent(e,od.ALT_TYPE,"input",!0)},onchange:function(e){cd.batchWindowEvent(e,od.ALT_TYPE,"change",!0)},onclick:function(e){cd.batchWindowEvent(e,od.ALT_TYPE,"click",!0)},onkeydown:function(e){cd.batchWindowEvent(e,od.ALT_TYPE,"keyDown",!0)},onkeyup:function(e){cd.batchWindowEvent(e,od.ALT_TYPE,"keyUp",!0)}};Cr.register("BrowserEvents",cd);var hd=cd,dd=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.display=t,this.touches=[],this.nextTouchID=1,this.isMouseDown=!1,this.mousePosition=new pn(0,0),this.random=new ph({seed:n}),this.mouseToggleAction=function(){i.mouseToggle()},this.mouseMoveAction=function(){i.mouseMove()},this.touchStartAction=function(){var e=i.createTouch(i.getRandomPosition());i.touchStart(e)},this.touchMoveAction=function(){var e=i.random.sample(i.touches);i.touchMove(e)},this.touchEndAction=function(){var e=i.random.sample(i.touches);i.touchEnd(e),i.removeTouch(e)},this.touchCancelAction=function(){var e=i.random.sample(i.touches);i.touchCancel(e),i.removeTouch(e)}}return _createClass(e,[{key:"fuzzEvents",value:function(e,t,n,i){for(;this.random.nextDouble()<1-1/(e+1);){var r=this.touches.length+(this.isMouseDown?1:0)<i,a=[];t&&(this.isMouseDown||r)&&(a.push(this.mouseToggleAction),a.push(this.mouseMoveAction)),n&&(r&&a.push(this.touchStartAction),this.touches.length&&(a.push(this.random.nextDouble()<.8?this.touchEndAction:this.touchCancelAction),a.push(this.touchMoveAction))),this.random.sample(a)()}}},{key:"createTouchEvent",value:function(e,t){var n=this.display.domElement,i=t.map((function(e){return{identifier:e.id,target:n,clientX:e.position.x,clientY:e.position.y}}));if(void 0!==window.Touch&&void 0!==window.TouchEvent&&1===window.Touch.length&&1===window.TouchEvent.length){var r=i.map((function(e){return new window.Touch(e)}));return new window.TouchEvent(e,{cancelable:!0,bubbles:!0,touches:r,targetTouches:[],changedTouches:r,shiftKey:!1})}var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,!0,!0,{touches:i,targetTouches:[],changedTouches:i}),a}},{key:"getRandomPosition",value:function(){return new pn(Math.floor(this.random.nextDouble()*this.display.width),Math.floor(this.random.nextDouble()*this.display.height))}},{key:"createTouch",value:function(e){var t={id:this.nextTouchID++,position:e};return this.touches.push(t),t}},{key:"removeTouch",value:function(e){this.touches.splice(this.touches.indexOf(e),1)}},{key:"touchStart",value:function(e){var t=this.createTouchEvent("touchstart",[e]);this.display._input.validatePointers(),this.display._input.touchStart(e.id,e.position,t)}},{key:"touchMove",value:function(e){e.position=this.getRandomPosition();var t=this.createTouchEvent("touchmove",[e]);this.display._input.validatePointers(),this.display._input.touchMove(e.id,e.position,t)}},{key:"touchEnd",value:function(e){var t=this.createTouchEvent("touchend",[e]);this.display._input.validatePointers(),this.display._input.touchEnd(e.id,e.position,t)}},{key:"touchCancel",value:function(e){var t=this.createTouchEvent("touchcancel",[e]);this.display._input.validatePointers(),this.display._input.touchCancel(e.id,e.position,t)}},{key:"mouseToggle",value:function(){var e=document.createEvent("MouseEvent");e.initMouseEvent(this.isMouseDown?"mouseup":"mousedown",!0,!0,window,1,this.mousePosition.x,this.mousePosition.y,this.mousePosition.x,this.mousePosition.y,!1,!1,!1,!1,0,null),this.display._input.validatePointers(),this.isMouseDown?(this.display._input.mouseUp(this.mousePosition,e),this.isMouseDown=!1):(this.display._input.mouseDown(null,this.mousePosition,e),this.isMouseDown=!0)}},{key:"mouseMove",value:function(){this.mousePosition=this.getRandomPosition();var e=document.createEvent("MouseEvent");e.initMouseEvent("mousemove",!0,!0,window,0,this.mousePosition.x,this.mousePosition.y,this.mousePosition.x,this.mousePosition.y,!1,!1,!1,!1,0,null),this.display._input.validatePointers(),this.display._input.mouseMove(this.mousePosition,e)}}]),e}();Cr.register("InputFuzzer",dd);var pd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),e=A({mouseButton:0},e),(i=t.call(this,e)).options=e,i.isDown=!1,i.downCurrentTarget=null,i.downTrail=null,i.pointer=null,i.interrupted=!1,i.downListener={up:function(e){e.pointer instanceof Kh&&e.domEvent.button!==i.options.mouseButton||i.buttonUp(e)},interrupt:function(){i.interrupt()},cancel:function(e){i.buttonUp(e)}},i}return _createClass(n,[{key:"buttonDown",value:function(e){this.isDown||e.pointer instanceof Kh&&e.domEvent.button!==this.options.mouseButton||(e.pointer.addInputListener(this.downListener),this.isDown=!0,this.downCurrentTarget=e.currentTarget,this.downTrail=e.trail.subtrailTo(e.currentTarget,!1),this.pointer=e.pointer,this.options.down&&this.options.down(e,this.downTrail))}},{key:"buttonUp",value:function(e){this.isDown=!1,this.pointer.removeInputListener(this.downListener);var t=e.currentTarget;if(e.currentTarget=this.downCurrentTarget,this.options.upInside||this.options.upOutside){var n=e.trail.isExtensionOf(this.downTrail,!0)&&!this.interrupted;n&&this.options.upInside?this.options.upInside(e,this.downTrail):!n&&this.options.upOutside&&this.options.upOutside(e,this.downTrail)}this.options.up&&this.options.up(e,this.downTrail),e.currentTarget=t}},{key:"down",value:function(e){this.buttonDown(e)}},{key:"interrupt",value:function(){if(this.isDown){this.interrupted=!0;var e=new ed(new bl,"synthetic",this.pointer,null);e.currentTarget=this.downCurrentTarget,this.buttonUp(e),this.interrupted=!1}}}]),n}(Be);Cr.register("DownUpListener",pd);var fd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),e=A({tandem:xe.OPTIONAL,phetioType:n.ButtonListenerIO,phetioState:!1,phetioEventType:ce.USER},e),(i=t.call(this,{tandem:e.tandem,phetioType:e.phetioType,phetioState:e.phetioState,mouseButton:e.mouseButton||0,down:function(e,t){i.setButtonState(e,"down")},up:function(e,t){i.setButtonState(e,i._overCount>0?"over":"up")}})).buttonState="up",i._overCount=0,i._buttonOptions=e,i}return _createClass(n,[{key:"setButtonState",value:function(e,t){if(t!==this.buttonState){var n=this.buttonState;this.buttonState=t,this._buttonOptions[t]&&(this.phetioStartEvent(t),this._buttonOptions[t](e,n),this.phetioEndEvent()),this._buttonOptions.fire&&this._overCount>0&&!this.interrupted&&(this._buttonOptions.fireOnDown?"down"===t:"down"===n)&&(this.phetioStartEvent("fire"),this._buttonOptions.fire(e),this.phetioEndEvent())}}},{key:"enter",value:function(e){this._overCount++,1===this._overCount&&this.setButtonState(e,this.isDown?"down":"over")}},{key:"exit",value:function(e){this._overCount--,0===this._overCount&&this.setButtonState(e,this.isDown?"out":"up")}},{key:"focus",value:function(e){this.enter(e)}},{key:"blur",value:function(e){this.exit(e)}},{key:"click",value:function(e){this.setButtonState(e,"down"),this.setButtonState(e,"up")}}]),n}(pd);Cr.register("ButtonListener",fd),fd.ButtonListenerIO=new U("ButtonListenerIO",{valueType:fd,documentation:"Button listener",events:["up","over","down","out","fire"]});var md=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),e=A({start:null,drag:null,end:null,translate:null,allowTouchSnag:!1,mouseButton:0,dragCursor:"pointer",attach:!0,tandem:xe.REQUIRED,phetioState:!1,phetioEventType:ce.USER,phetioReadOnly:!0},e),(i=t.call(this)).options=e,i.isDraggingProperty=new pt(!1,{phetioReadOnly:e.phetioReadOnly,phetioState:!1,tandem:e.tandem.createTandem("isDraggingProperty"),phetioDocumentation:"Indicates whether the object is dragging"}),i.pointer=null,i.trail=null,i.transform=null,i.node=null,i.lastDragPoint=null,i.startTransformMatrix=null,i.mouseButton=void 0,i.interrupted=!1,i.lastInterruptedTouchLikePointer=null,i._attach=e.attach,i.dragStartAction=new zu((function(e,t){i.dragging||(i._attach&&(t.pointer.dragging=!0),t.pointer.cursor=i.options.dragCursor,t.pointer.addInputListener(i.dragListener,i.options.attach),t.pointer.reserveForDrag(),i.isDraggingProperty.set(!0),i.pointer=t.pointer,i.trail=t.trail.subtrailTo(t.currentTarget,!0),i.transform=i.trail.getTransform(),i.node=t.currentTarget,i.lastDragPoint=t.pointer.point,i.startTransformMatrix=t.currentTarget.getMatrix().copy(),i.mouseButton=t.pointer instanceof Kh?t.domEvent.button:void 0,i.options.start&&i.options.start.call(null,t,i.trail))}),{tandem:e.tandem.createTandem("dragStartAction"),phetioReadOnly:e.phetioReadOnly,parameters:[{name:"point",phetioType:pn.Vector2IO,phetioDocumentation:"the position of the drag start in view coordinates"},{phetioPrivate:!0,valueType:[ed,null]}]}),i.dragAction=new zu((function(e,t){if(i.dragging&&!i.isDisposed){var n=i.pointer.point.minus(i.lastDragPoint);if(0!==n.magnitudeSquared){var r=i.transform.inverseDelta2(n);if(i.options.translate){var a=i.node.getMatrix().getTranslation();i.options.translate.call(null,{delta:r,oldPosition:a,position:a.plus(r)})}if(i.lastDragPoint=i.pointer.point,i.options.drag){var s=t.currentTarget;t.currentTarget=i.node,i.options.drag.call(null,t,i.trail),t.currentTarget=s}}}}),{phetioHighFrequency:!0,phetioReadOnly:e.phetioReadOnly,tandem:e.tandem.createTandem("dragAction"),parameters:[{name:"point",phetioType:pn.Vector2IO,phetioDocumentation:"the position of the drag in view coordinates"},{phetioPrivate:!0,valueType:[ed,null]}]}),i.dragEndAction=new zu((function(e,t){i.dragging&&(i._attach&&(i.pointer.dragging=!1),i.pointer.cursor=null,i.pointer.removeInputListener(i.dragListener),i.isDraggingProperty.set(!1),i.options.end&&i.options.end.call(null,t,i.trail),i.pointer=null)}),{tandem:e.tandem.createTandem("dragEndAction"),phetioReadOnly:e.phetioReadOnly,parameters:[{name:"point",phetioType:pn.Vector2IO,phetioDocumentation:"the position of the drag end in view coordinates"},{phetioPrivate:!0,isValidValue:function(e){return null===e||e instanceof ed||e.pointer&&e.currentTarget}}]}),i.transformListener={transform:function(e){if(i.trail.isExtensionOf(e.trail,!0)){var t=e.trail.getMatrix(),n=i.transform.getMatrix();i.node.prependMatrix(t.inverted().timesMatrix(n)),i.transform.setMatrix(t)}}},i.dragListener={up:function(e){if(i.dragging&&!i.isDisposed&&(!(e.pointer instanceof Kh)||e.domEvent.button===i.mouseButton)){var t=e.currentTarget;e.currentTarget=i.node,i.endDrag(e),e.currentTarget=t}},cancel:function(e){if(i.dragging&&!i.isDisposed){var t=e.currentTarget;e.currentTarget=i.node,i.endDrag(e),e.currentTarget=t,i.transform||i.node.setMatrix(i.startTransformMatrix)}},move:function(e){i.dragAction.execute(e.pointer.point,e)},interrupt:function(){i.interrupt()}},i.initializePhetioObject({},e),i}return _createClass(n,[{key:"dragging",get:function(){return this.isDraggingProperty.get()},set:function(e){}},{key:"startDrag",value:function(e){this.dragStartAction.execute(e.pointer.point,e)}},{key:"endDrag",value:function(e){this.dragEndAction.execute(e?e.pointer.point:pn.ZERO,e)}},{key:"interrupt",value:function(){this.dragging&&(this.interrupted=!0,this.pointer&&this.pointer.isTouchLike()&&(this.lastInterruptedTouchLikePointer=this.pointer),this.endDrag({pointer:this.pointer,currentTarget:this.node}),this.interrupted=!1)}},{key:"tryToSnag",value:function(e){e.pointer instanceof Kh&&e.domEvent&&this.options.mouseButton!==e.domEvent.button&&-1!==this.options.mouseButton||this.isDisposed||this.dragging||e.pointer.dragging&&this._attach||e.pointer===this.lastInterruptedTouchLikePointer||!e.canStartPress()||this.startDrag(e)}},{key:"tryTouchToSnag",value:function(e){this.options.allowTouchSnag&&(!0===this.options.allowTouchSnag||this.options.allowTouchSnag(e))&&this.tryToSnag(e)}},{key:"down",value:function(e){this.tryToSnag(e)}},{key:"touchenter",value:function(e){this.tryTouchToSnag(e)}},{key:"touchmove",value:function(e){this.tryTouchToSnag(e)}},{key:"dispose",value:function(){this.dragging&&(this._attach&&(this.pointer.dragging=!1),this.pointer.cursor=null,this.pointer.removeInputListener(this.dragListener)),this.isDraggingProperty.dispose(),this.dragEndAction.dispose(),this.dragAction.dispose(),this.dragStartAction.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"createForwardingListener",value:function(e,t){return t=A({allowTouchSnag:!1},t),{down:function(t){!t.pointer.dragging&&t.canStartPress()&&e(t)},touchenter:function(e){t.allowTouchSnag&&this.down(e)},touchmove:function(e){t.allowTouchSnag&&this.down(e)}}}}]),n}(Be);Cr.register("SimpleDragHandler",md);var gd=0,yd=_.constant(!0),vd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({press:_.noop,release:_.noop,targetNode:null,drag:_.noop,attach:!0,mouseButton:0,pressCursor:"pointer",useInputListenerCursor:!1,canStartPress:yd,a11yLooksPressedInterval:100,collapseDragEvents:!1,phetioEnabledPropertyInstrumented:!1,tandem:xe.REQUIRED,phetioReadOnly:!0,phetioFeatured:Be.DEFAULT_OPTIONS.phetioFeatured},e);return(i=t.call(this,r))._id=gd++,i._mouseButton=r.mouseButton,i._a11yLooksPressedInterval=r.a11yLooksPressedInterval,i._pressCursor=r.pressCursor,i._pressListener=r.press,i._releaseListener=r.release,i._dragListener=r.drag,i._canStartPress=r.canStartPress,i._targetNode=r.targetNode,i._attach=r.attach,i._collapseDragEvents=r.collapseDragEvents,i.overPointers=Yt(),i.isPressedProperty=new pt(!1,{reentrant:!0}),i.isOverProperty=new pt(!1),i.looksOverProperty=new pt(!1),i.isHoveringProperty=new pt(!1),i.isHighlightedProperty=new pt(!1),i.isFocusedProperty=new pt(!1),i.cursorProperty=new Ut([i.enabledProperty],(function(e){return r.useInputListenerCursor&&e&&i._attach?i._pressCursor:null})),i.pointer=null,i.pressedTrail=null,i.interrupted=!1,i._pendingCollapsedDragEvent=null,i._listeningToPointer=!1,i._isHoveringListener=i.invalidateHovering.bind(_assertThisInitialized(i)),i._isHighlightedListener=i.invalidateHighlighted.bind(_assertThisInitialized(i)),i.pdomClickingProperty=new pt(!1),i.looksPressedProperty=Ut.or([i.pdomClickingProperty,i.isPressedProperty]),i._pdomClickingTimeoutListener=null,i._pointerListener={up:i.pointerUp.bind(_assertThisInitialized(i)),cancel:i.pointerCancel.bind(_assertThisInitialized(i)),move:i.pointerMove.bind(_assertThisInitialized(i)),interrupt:i.pointerInterrupt.bind(_assertThisInitialized(i)),listener:_assertThisInitialized(i)},i._pressAction=new zu(i.onPress.bind(_assertThisInitialized(i)),{tandem:r.tandem.createTandem("pressAction"),phetioDocumentation:"Executes whenever a press occurs. The first argument when executing can be used to convey info about the SceneryEvent.",phetioReadOnly:!0,phetioFeatured:r.phetioFeatured,phetioEventType:ce.USER,parameters:[{name:"event",phetioType:ed.SceneryEventIO},{phetioPrivate:!0,valueType:[jo,null]},{phetioPrivate:!0,valueType:["function",null]}]}),i._releaseAction=new zu(i.onRelease.bind(_assertThisInitialized(i)),{parameters:[{name:"event",phetioType:Qe(ed.SceneryEventIO)},{phetioPrivate:!0,valueType:["function",null]}],tandem:r.tandem.createTandem("releaseAction"),phetioDocumentation:"Executes whenever a release occurs.",phetioReadOnly:!0,phetioFeatured:r.phetioFeatured,phetioEventType:ce.USER}),i.display=null,i.boundInvalidateOverListener=i.invalidateOver.bind(_assertThisInitialized(i)),i.overPointers.lengthProperty.link(i.invalidateOver.bind(_assertThisInitialized(i))),i.isFocusedProperty.link(i.invalidateOver.bind(_assertThisInitialized(i))),i.overPointers.lengthProperty.link(i._isHoveringListener),i.isPressedProperty.link(i._isHoveringListener),i.overPointers.addItemAddedListener((function(e){return e.isDownProperty.link(i._isHoveringListener)})),i.overPointers.addItemRemovedListener((function(e){return e.isDownProperty.unlink(i._isHoveringListener)})),i.isHoveringProperty.link(i._isHighlightedListener),i.isPressedProperty.link(i._isHighlightedListener),i.enabledProperty.lazyLink(i.onEnabledPropertyChange.bind(_assertThisInitialized(i))),i}return _createClass(n,[{key:"isPressed",get:function(){return this.isPressedProperty.value}},{key:"cursor",get:function(){return this.cursorProperty.value}},{key:"attach",get:function(){return this._attach}},{key:"targetNode",get:function(){return this._targetNode}},{key:"getCurrentTarget",value:function(){return this.pressedTrail.lastNode()}},{key:"currentTarget",get:function(){return this.getCurrentTarget()}},{key:"canPress",value:function(e){return!!this.enabledProperty.value&&!this.isPressed&&this._canStartPress(e,this)&&(!(e.pointer instanceof Kh)||e.domEvent.button===this._mouseButton)&&(!this._attach||!e.pointer.isAttached())}},{key:"canClick",value:function(){return this.enabledProperty.value&&!this.isPressed&&this._canStartPress(null,this)}},{key:"press",value:function(e,t,n){return!!this.canPress(e)&&(this.flushCollapsedDrag(),this._pressAction.execute(e,t||null,n||null),!0)}},{key:"release",value:function(e,t){this.flushCollapsedDrag(),this._releaseAction.execute(e||null,t||null)}},{key:"drag",value:function(e){this._dragListener(e,this)}},{key:"interrupt",value:function(){this.pdomClickingProperty.value?(this.interrupted=!0,this._listeningToPointer?this.release():(this.isPressedProperty.value=!1,this._releaseListener(null,this)),mt.hasListener(this._pdomClickingTimeoutListener)&&(mt.clearTimeout(this._pdomClickingTimeoutListener),this.pdomClickingProperty.isDisposed||(this.pdomClickingProperty.value=!1))):this.isPressed&&(this.interrupted=!0,this.release())}},{key:"clearOverPointers",value:function(){this.overPointers.clear()}},{key:"step",value:function(){this.flushCollapsedDrag()}},{key:"setCreatePanTargetBounds",value:function(e){this._pointerListener.createPanTargetBounds=e}},{key:"createPanTargetBounds",set:function(e){this.setCreatePanTargetBounds(e)}},{key:"setCreatePanTargetBoundsFromTrail",value:function(e){this.setCreatePanTargetBounds((function(){return e.localToGlobalBounds(e.lastNode().localBounds)}))}},{key:"createPanTargetBoundsFromTrail",set:function(e){this.setCreatePanTargetBoundsFromTrail(e)}},{key:"flushCollapsedDrag",value:function(){this._pendingCollapsedDragEvent&&this.drag(this._pendingCollapsedDragEvent),this._pendingCollapsedDragEvent=null}},{key:"invalidateOver",value:function(){var e=!1;if(this._listeningToPointer)e=!1;else for(var t=0;t<this.overPointers.length;t++)if(this.overPointers.get(t).isAttached()){e=!0;break}this.isOverProperty.value=this.overPointers.length>0&&!e,this.looksOverProperty.value=this.isOverProperty.value||this.isFocusedProperty.value&&!!this.display&&this.display.focusManager.pdomFocusHighlightsVisibleProperty.value}},{key:"invalidateHovering",value:function(){for(var e=0;e<this.overPointers.length;e++){var t=this.overPointers[e];if(!t.isDown||t===this.pointer)return void(this.isHoveringProperty.value=!0)}this.isHoveringProperty.value=!1}},{key:"invalidateHighlighted",value:function(){this.isHighlightedProperty.value=this.isHoveringProperty.value||this.isPressedProperty.value}},{key:"onEnabledPropertyChange",value:function(e){!e&&this.interrupt()}},{key:"onPress",value:function(e,t,n){var i=t||this._targetNode;this.pointer=e.pointer,this.pressedTrail=i?i.getUniqueTrail():e.trail.subtrailTo(e.currentTarget,!1),this.interrupted=!1,this.pointer.addInputListener(this._pointerListener,this._attach),this._listeningToPointer=!0,this.pointer.cursor=this.pressedTrail.lastNode().getEffectiveCursor()||this._pressCursor,this.isPressedProperty.value=!0,this._pressListener(e,this),n&&n()}},{key:"onRelease",value:function(e,t){this.pointer.removeInputListener(this._pointerListener),this._listeningToPointer=!1,this.isPressedProperty.value=!1,this._releaseListener(e,this),t&&t(),this.pointer.cursor=null,this.pointer=null,this.pressedTrail=null}},{key:"down",value:function(e){this.press(e)}},{key:"up",value:function(e){this.invalidateOver(),this.invalidateHovering()}},{key:"enter",value:function(e){this.overPointers.push(e.pointer)}},{key:"move",value:function(e){this.invalidateOver()}},{key:"exit",value:function(e){this.overPointers.includes(e.pointer)&&this.overPointers.remove(e.pointer)}},{key:"pointerUp",value:function(e){this.isPressed&&this.release(e)}},{key:"pointerCancel",value:function(e){this.isPressed&&this.interrupt()}},{key:"pointerMove",value:function(e){this.isPressed&&(this._collapseDragEvents?this._pendingCollapsedDragEvent=e:this.drag(e))}},{key:"pointerInterrupt",value:function(){this.interrupt()}},{key:"click",value:function(e,t){var n=this;return this.canClick()&&(this.interrupted=!1,this.pdomClickingProperty.value=!0,this.isFocusedProperty.value=!0,this.isPressedProperty.value=!0,this._pressListener(e,this),t&&t(),this.isPressedProperty.value=!1,this._releaseListener(e,this),mt.clearTimeout(this._pdomClickingTimeoutListener),this._pdomClickingTimeoutListener=mt.setTimeout((function(){n.pdomClickingProperty.isDisposed||(n.pdomClickingProperty.value=!1)}),this._a11yLooksPressedInterval)),!0}},{key:"focus",value:function(e){var t=e.trail.rootNode().getRootedDisplays().filter((function(e){return e.isAccessible()}));this.display=t[0],this.display.focusManager.pdomFocusHighlightsVisibleProperty.hasListener(this.boundInvalidateOverListener)||this.display.focusManager.pdomFocusHighlightsVisibleProperty.link(this.boundInvalidateOverListener),this.isFocusedProperty.value=!0}},{key:"blur",value:function(){this.display&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.hasListener(this.boundInvalidateOverListener)&&this.display.focusManager.pdomFocusHighlightsVisibleProperty.unlink(this.boundInvalidateOverListener),this.display=null),this.isFocusedProperty.value=!1}},{key:"dispose",value:function(){this.overPointers.clear(),this._listeningToPointer&&this.isPressed&&this.pointer.removeInputListener(this._pointerListener),this.isPressedProperty.isDisposed||(this.isPressedProperty.unlink(this._isHighlightedListener),this.isPressedProperty.unlink(this._isHoveringListener)),!this.isHoveringProperty.isDisposed&&this.isHoveringProperty.unlink(this._isHighlightedListener),this.overPointers.dispose(),this.isPressedProperty.dispose(),this.isOverProperty.dispose(),this.isHoveringProperty.dispose(),this.isHighlightedProperty.dispose(),this.isFocusedProperty.dispose(),this.pdomClickingProperty.dispose(),this.looksPressedProperty.dispose(),this._pressAction.dispose(),this._releaseAction.dispose(),this.display&&(this.display.focusManager.pdomFocusHighlightsVisibleProperty.unlink(this.boundInvalidateOverListener),this.display=null),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(ec);_defineProperty(vd,"phetioAPI",{pressAction:{phetioType:zu.PhetioActionIO([ed.SceneryEventIO])},releaseAction:{phetioType:zu.PhetioActionIO([Qe(ed.SceneryEventIO)])}}),Cr.register("PressListener",vd);var Ad=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({fire:_.noop,fireOnDown:!1,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:xe.REQUIRED,phetioReadOnly:Be.DEFAULT_OPTIONS.phetioReadOnly},e);return(i=t.call(this,r))._fireOnDown=r.fireOnDown,i.firedEmitter=new Et({tandem:r.tandem.createTandem("firedEmitter"),phetioEventType:ce.USER,phetioReadOnly:r.phetioReadOnly,phetioDocumentation:"Emits at the time that the listener fires",parameters:[{name:"event",phetioType:Qe(ed.SceneryEventIO)}]}),i.firedEmitter.addListener(r.fire),r.fireOnHold&&(i._timer=new gt({callback:i.fire.bind(_assertThisInitialized(i),null),delay:r.fireOnHoldDelay,interval:r.fireOnHoldInterval})),i}return _createClass(n,[{key:"fire",value:function(e){this.firedEmitter.emit(e)}},{key:"press",value:function(e,t,i){var r=this;return _get(_getPrototypeOf(n.prototype),"press",this).call(this,e,t,(function(){r._fireOnDown&&r.fire(e),r._timer&&r._timer.start(),i&&i()}))}},{key:"release",value:function(e,t){var i=this;_get(_getPrototypeOf(n.prototype),"release",this).call(this,e,(function(){var n=!i._fireOnDown&&i.isHoveringProperty.value&&!i.interrupted;i._timer?i._timer.stop(n):n&&i.fire(e||null),t&&t()}))}},{key:"click",value:function(e,t){var i=this;return _get(_getPrototypeOf(n.prototype),"click",this).call(this,e,(function(){i.interrupted||i.fire(e),t&&t()}))}},{key:"interrupt",value:function(){_get(_getPrototypeOf(n.prototype),"interrupt",this).call(this),this._timer&&this._timer.stop(!1)}},{key:"dispose",value:function(){this.firedEmitter.dispose(),this._timer&&this._timer.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(vd);Cr.register("FireListener",Ad);var bd=new pn(0,0),Sd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({positionProperty:null,start:null,end:null,transform:null,dragBoundsProperty:null,allowTouchSnag:!0,applyOffset:!0,useParentOffset:!1,trackAncestors:!1,translateNode:!1,mapPosition:null,offsetPosition:null,allowClick:!1,tandem:xe.REQUIRED,phetioReadOnly:!0,phetioFeatured:Be.DEFAULT_OPTIONS.phetioFeatured},e);return(i=t.call(this,r))._allowTouchSnag=r.allowTouchSnag,i._applyOffset=r.applyOffset,i._useParentOffset=r.useParentOffset,i._trackAncestors=r.trackAncestors,i._translateNode=r.translateNode,i._transform=r.transform,i._positionProperty=r.positionProperty,i._mapPosition=r.mapPosition,i._offsetPosition=r.offsetPosition,i._dragBoundsProperty=r.dragBoundsProperty||new dt(null),i._start=r.start,i._end=r.end,i._allowClick=r.allowClick,i.isUserControlledProperty=i.isPressedProperty,i._globalPoint=new pn(0,0),i._localPoint=new pn(0,0),i._parentPoint=new pn(0,0),i._modelPoint=new pn(0,0),i._modelDelta=new pn(0,0),i._parentOffset=new pn(0,0),i._transformTracker=null,i._transformTrackerListener=i.ancestorTransformed.bind(_assertThisInitialized(i)),i._lastInterruptedTouchLikePointer=null,i._dragAction=new zu((function(e){var t=_assertThisInitialized(i).pointer.point;t&&(i._globalPoint.equals(t)||i.reposition(t)),vd.prototype.drag.call(_assertThisInitialized(i),e)}),{parameters:[{name:"event",phetioType:ed.SceneryEventIO}],phetioFeatured:r.phetioFeatured,tandem:r.tandem.createTandem("dragAction"),phetioHighFrequency:!0,phetioDocumentation:"Emits whenever a drag occurs with an SceneryEventIO argument.",phetioReadOnly:r.phetioReadOnly,phetioEventType:ce.USER}),i}return _createClass(n,[{key:"press",value:function(e,t,i){var r=this;return _get(_getPrototypeOf(n.prototype),"press",this).call(this,e,t,(function(){var t=r;t.pointer.reserveForDrag(),r.attachTransformTracker();var n=t.pointer.point,a=r.globalToParentPoint(r._localPoint.set(n));r._useParentOffset&&r.modelToParentPoint(r._parentOffset.set(r._positionProperty.value)).subtract(a),r.parentToLocalPoint(a),r.reposition(n),r._start&&r._start(e,t),i&&i()}))}},{key:"release",value:function(e,t){var i=this;_get(_getPrototypeOf(n.prototype),"release",this).call(this,e,(function(){i.detachTransformTracker(),i._end&&i._end(e||null,i),t&&t()}))}},{key:"canClick",value:function(){return _get(_getPrototypeOf(n.prototype),"canClick",this).call(this)&&this._allowClick}},{key:"click",value:function(e,t){var i=this;return _get(_getPrototypeOf(n.prototype),"click",this).call(this,e,(function(){i._start&&i._start(e,i),t&&t(),i._end&&i._end(e,i)}))}},{key:"drag",value:function(e){var t=this.pointer.point;t&&!this._globalPoint.equals(t)&&this._dragAction.execute(e)}},{key:"tryTouchSnag",value:function(e){!this._allowTouchSnag||this.attach&&e.pointer.isAttached()||this.press(e)}},{key:"getGlobalPoint",value:function(){return this._globalPoint.copy()}},{key:"globalPoint",get:function(){return this.getGlobalPoint()}},{key:"getLocalPoint",value:function(){return this._localPoint.copy()}},{key:"localPoint",get:function(){return this.getLocalPoint()}},{key:"getParentPoint",value:function(){return this._parentPoint.copy()}},{key:"parentPoint",get:function(){return this.getParentPoint()}},{key:"getModelPoint",value:function(){return this._modelPoint.copy()}},{key:"modelPoint",get:function(){return this.getModelPoint()}},{key:"getModelDelta",value:function(){return this._modelDelta.copy()}},{key:"modelDelta",get:function(){return this.getModelDelta()}},{key:"globalToParentPoint",value:function(e){return this.pressedTrail.getParentTransform().getInverse().multiplyVector2(e),e}},{key:"parentToLocalPoint",value:function(e){return this.pressedTrail.lastNode().getTransform().getInverse().multiplyVector2(e),e}},{key:"localToParentPoint",value:function(e){return this.pressedTrail.lastNode().getMatrix().multiplyVector2(e),e}},{key:"parentToModelPoint",value:function(e){return this._transform&&this._transform.getInverse().multiplyVector2(e),e}},{key:"modelToParentPoint",value:function(e){return this._transform&&this._transform.getMatrix().multiplyVector2(e),e}},{key:"mapModelPoint",value:function(e){return this._mapPosition?this._mapPosition(e):this._dragBoundsProperty.value?this._dragBoundsProperty.value.closestPointTo(e):e}},{key:"applyParentOffset",value:function(e){this._offsetPosition&&e.add(this._offsetPosition(e,this)),this._applyOffset&&(this._useParentOffset?e.add(this._parentOffset):(e.subtract(this.localToParentPoint(bd.set(this._localPoint))),e.add(this.localToParentPoint(bd.setXY(0,0)))))}},{key:"reposition",value:function(e){this._globalPoint.set(e),this.applyParentOffset(this.globalToParentPoint(this._parentPoint.set(e))),this._modelDelta.set(this._modelPoint).negate(),this._modelPoint.set(this.mapModelPoint(this.parentToModelPoint(bd.set(this._parentPoint)))),this._modelDelta.add(this._modelPoint),this.modelToParentPoint(this._parentPoint.set(this._modelPoint)),this._translateNode&&(this.pressedTrail.lastNode().translation=this._parentPoint),this._positionProperty&&(this._positionProperty.value=this._modelPoint.copy())}},{key:"touchenter",value:function(e){this.tryTouchSnag(e)}},{key:"touchmove",value:function(e){this.tryTouchSnag(e)}},{key:"ancestorTransformed",value:function(){var e=this.pointer.point;e&&this.reposition(e)}},{key:"attachTransformTracker",value:function(){this._trackAncestors&&(this._transformTracker=new Mu(this.pressedTrail.copy().removeDescendant()),this._transformTracker.addListener(this._transformTrackerListener))}},{key:"detachTransformTracker",value:function(){this._transformTracker&&(this._transformTracker.removeListener(this._transformTrackerListener),this._transformTracker.dispose(),this._transformTracker=null)}},{key:"getDragBounds",value:function(){return this._dragBoundsProperty.value}},{key:"dragBounds",get:function(){return this.getDragBounds()}},{key:"setTransform",value:function(e){this._transform=e}},{key:"transform",get:function(){return this.getTransform()},set:function(e){this.setTransform(e)}},{key:"getTransform",value:function(){return this._transform}},{key:"interrupt",value:function(){this.pointer&&this.pointer.isTouchLike()&&(this._lastInterruptedTouchLikePointer=this.pointer),_get(_getPrototypeOf(n.prototype),"interrupt",this).call(this)}},{key:"canPress",value:function(e){return e.pointer!==this._lastInterruptedTouchLikePointer&&_get(_getPrototypeOf(n.prototype),"canPress",this).call(this,e)}},{key:"dispose",value:function(){this._dragAction.dispose(),this.detachTransformTracker(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"createForwardingListener",value:function(e,t){var n=S()({allowTouchSnag:!0},t);return{down:function(t){t.canStartPress()&&e(t)},touchenter:function(e){n.allowTouchSnag&&this.down(e)},touchmove:function(e){n.allowTouchSnag&&this.down(e)}}}}]),n}(vd);function Ed(e){return"[object Array]"===Object.prototype.toString.call(e)}Cr.register("DragListener",Sd),y.register("isArray",Ed);var kd=Ed,Vd=window.Float64Array||Array,wd=function(){function e(t){var n,i;_classCallCheck(this,e);var r=t.entries;this.n=t.getColumnDimension();var a=this.n;for(this.V=new Vd(a*a),this.d=new Vd(a),this.e=new Vd(a),this.issymmetric=!0,i=0;i<a&&this.issymmetric;i++)for(n=0;n<a&&this.issymmetric;n++)this.issymmetric=r[n*this.n+i]===r[i*this.n+n];if(this.issymmetric){for(n=0;n<a;n++)for(i=0;i<a;i++)this.V[n*this.n+i]=r[n*this.n+i];this.tred2(),this.tql2()}else{for(this.H=new Vd(a*a),this.ort=new Vd(a),i=0;i<a;i++)for(n=0;n<a;n++)this.H[n*this.n+i]=r[n*this.n+i];this.orthes(),this.hqr2()}}return _createClass(e,[{key:"getV",value:function(){return this.V.copy()}},{key:"getRealEigenvalues",value:function(){return this.d}},{key:"getImagEigenvalues",value:function(){return this.e}},{key:"getD",value:function(){for(var e=this.n,t=this.d,n=this.e,i=new qd(e,e),r=i.entries,a=0;a<e;a++){for(var s=0;s<e;s++)r[a*this.n+s]=0;r[a*this.n+a]=t[a],n[a]>0?r[a*this.n+a+1]=n[a]:n[a]<0&&(r[a*this.n+a-1]=n[a])}return i}},{key:"tred2",value:function(){var e,t,n,i,r,a,s=this.n,o=this.V,l=this.d,u=this.e;for(t=0;t<s;t++)l[t]=o[(s-1)*s+t];for(e=s-1;e>0;e--){var c=0;for(a=0,n=0;n<e;n++)c+=Math.abs(l[n]);if(0===c)for(u[e]=l[e-1],t=0;t<e;t++)l[t]=o[(e-1)*s+t],o[e*this.n+t]=0,o[t*this.n+e]=0;else{for(n=0;n<e;n++)l[n]/=c,a+=l[n]*l[n];for(i=l[e-1],r=Math.sqrt(a),i>0&&(r=-r),u[e]=c*r,a-=i*r,l[e-1]=i-r,t=0;t<e;t++)u[t]=0;for(t=0;t<e;t++){for(i=l[t],o[t*this.n+e]=i,r=u[t]+o[t*s+t]*i,n=t+1;n<=e-1;n++)r+=o[n*s+t]*l[n],u[n]+=o[n*s+t]*i;u[t]=r}for(i=0,t=0;t<e;t++)u[t]/=a,i+=u[t]*l[t];var h=i/(a+a);for(t=0;t<e;t++)u[t]-=h*l[t];for(t=0;t<e;t++){for(i=l[t],r=u[t],n=t;n<=e-1;n++)o[n*s+t]-=i*u[n]+r*l[n];l[t]=o[(e-1)*s+t],o[e*this.n+t]=0}}l[e]=a}for(e=0;e<s-1;e++){if(o[(s-1)*s+e]=o[e*s+e],o[e*s+e]=1,0!==(a=l[e+1])){for(n=0;n<=e;n++)l[n]=o[n*s+(e+1)]/a;for(t=0;t<=e;t++){for(r=0,n=0;n<=e;n++)r+=o[n*s+(e+1)]*o[n*s+t];for(n=0;n<=e;n++)o[n*s+t]-=r*l[n]}}for(n=0;n<=e;n++)o[n*s+(e+1)]=0}for(t=0;t<s;t++)l[t]=o[(s-1)*s+t],o[(s-1)*s+t]=0;o[(s-1)*s+(s-1)]=1,u[0]=0}},{key:"tql2",value:function(){var e,t,n,i,r,a,s=this.n,o=this.V,l=this.d,u=this.e;for(e=1;e<s;e++)u[e-1]=u[e];u[s-1]=0;var c=0,h=0,d=Math.pow(2,-52);for(i=0;i<s;i++){h=Math.max(h,Math.abs(l[i])+Math.abs(u[i]));for(var p=i;p<s&&!(Math.abs(u[p])<=d*h);)p++;if(p>i){0;do{1,r=l[i],a=(l[i+1]-r)/(2*u[i]);var f=qd.hypot(a,1);a<0&&(f=-f),l[i]=u[i]/(a+f),l[i+1]=u[i]*(a+f);var m=l[i+1],g=r-l[i];for(e=i+2;e<s;e++)l[e]-=g;c+=g,a=l[p];var y=1,v=y,A=y,b=u[i+1],S=0,E=0;for(e=p-1;e>=i;e--)for(A=v,v=y,E=S,r=y*u[e],g=y*a,f=qd.hypot(a,u[e]),u[e+1]=S*f,S=u[e]/f,a=(y=a/f)*l[e]-S*r,l[e+1]=g+S*(y*r+S*l[e]),n=0;n<s;n++)g=o[n*s+(e+1)],o[n*s+(e+1)]=S*o[n*s+e]+y*g,o[n*s+e]=y*o[n*s+e]-S*g;a=-S*E*A*b*u[i]/m,u[i]=S*a,l[i]=y*a}while(Math.abs(u[i])>d*h)}l[i]=l[i]+c,u[i]=0}for(e=0;e<s-1;e++){for(n=e,a=l[e],t=e+1;t<s;t++)l[t]<a&&(n=t,a=l[t]);if(n!==e)for(l[n]=l[e],l[e]=a,t=0;t<s;t++)a=o[t*this.n+e],o[t*this.n+e]=o[t*s+n],o[t*s+n]=a}}},{key:"orthes",value:function(){var e,t,n,i,r,a=this.n,s=this.V,o=this.H,l=this.ort,u=a-1;for(n=1;n<=u-1;n++){var c=0;for(e=n;e<=u;e++)c+=Math.abs(o[e*a+(n-1)]);if(0!==c){var h=0;for(e=u;e>=n;e--)l[e]=o[e*a+(n-1)]/c,h+=l[e]*l[e];for(r=Math.sqrt(h),l[n]>0&&(r=-r),h-=l[n]*r,l[n]=l[n]-r,t=n;t<a;t++){for(i=0,e=u;e>=n;e--)i+=l[e]*o[e*this.n+t];for(i/=h,e=n;e<=u;e++)o[e*this.n+t]-=i*l[e]}for(e=0;e<=u;e++){for(i=0,t=u;t>=n;t--)i+=l[t]*o[e*this.n+t];for(i/=h,t=n;t<=u;t++)o[e*this.n+t]-=i*l[t]}l[n]=c*l[n],o[n*a+(n-1)]=c*r}}for(e=0;e<a;e++)for(t=0;t<a;t++)s[e*this.n+t]=e===t?1:0;for(n=u-1;n>=1;n--)if(0!==o[n*a+(n-1)]){for(e=n+1;e<=u;e++)l[e]=o[e*a+(n-1)];for(t=n;t<=u;t++){for(r=0,e=n;e<=u;e++)r+=l[e]*s[e*this.n+t];for(r=r/l[n]/o[n*a+(n-1)],e=n;e<=u;e++)s[e*this.n+t]+=r*l[e]}}}},{key:"cdiv",value:function(e,t,n,i){var r,a;Math.abs(n)>Math.abs(i)?(a=n+(r=i/n)*i,this.cdivr=(e+r*t)/a,this.cdivi=(t-r*e)/a):(a=i+(r=n/i)*n,this.cdivr=(r*e+t)/a,this.cdivi=(r*t-e)/a)}},{key:"hqr2",value:function(){var e,t,n,i,r,a,s,o=this.V,l=this.d,u=this.e,c=this.H,h=this.n;e=h-1;var d,p,f,m,g=h-1,y=Math.pow(2,-52),v=0,A=0,b=0,S=0,E=0,k=0,V=0;for(t=0;t<h;t++)for((t<0||t>g)&&(l[t]=c[t*e+t],u[t]=0),n=Math.max(t-1,0);n<h;n++)V+=Math.abs(c[t*this.n+n]);for(s=0;e>=0;){for(r=e;r>0&&(0===(E=Math.abs(c[(r-1)*e+(r-1)])+Math.abs(c[r*e+r]))&&(E=V),!(Math.abs(c[r*e+(r-1)])<y*E));)r--;if(r===e)c[e*e+e]=c[e*e+e]+v,l[e]=c[e*e+e],u[e]=0,e--,s=0;else if(r===e-1){if(p=c[e*e+e-1]*c[(e-1)*e+e],b=(A=(c[(e-1)*e+(e-1)]-c[e*e+e])/2)*A+p,k=Math.sqrt(Math.abs(b)),c[e*e+e]=c[e*e+e]+v,c[(e-1)*e+(e-1)]=c[(e-1)*e+(e-1)]+v,f=c[e*e+e],b>=0){for(k=A>=0?A+k:A-k,l[e-1]=f+k,l[e]=l[e-1],0!==k&&(l[e]=f-p/k),u[e-1]=0,u[e]=0,A=(f=c[e*e+e-1])/(E=Math.abs(f)+Math.abs(k)),b=k/E,A/=S=Math.sqrt(A*A+b*b),b/=S,n=e-1;n<h;n++)k=c[(e-1)*e+n],c[(e-1)*e+n]=b*k+A*c[e*e+n],c[e*e+n]=b*c[e*e+n]-A*k;for(t=0;t<=e;t++)k=c[t*e+e-1],c[t*e+e-1]=b*k+A*c[t*e+e],c[t*e+e]=b*c[t*e+e]-A*k;for(t=0;t<=g;t++)k=o[t*e+e-1],o[t*e+e-1]=b*k+A*o[t*e+e],o[t*e+e]=b*o[t*e+e]-A*k}else l[e-1]=f+A,l[e]=f+A,u[e-1]=k,u[e]=-k;e-=2,s=0}else{if(f=c[e*e+e],m=0,p=0,r<e&&(m=c[(e-1)*e+(e-1)],p=c[e*e+e-1]*c[(e-1)*e+e]),10===s){for(v+=f,t=0;t<=e;t++)c[t*e+t]-=f;f=m=.75*(E=Math.abs(c[e*e+e-1])+Math.abs(c[(e-1)*e+e-2])),p=-.4375*E*E}if(30===s&&(E=(E=(m-f)/2)*E+p)>0){for(E=Math.sqrt(E),m<f&&(E=-E),E=f-p/((m-f)/2+E),t=0;t<=e;t++)c[t*e+t]-=E;v+=E,f=m=p=.964}for(s+=1,a=e-2;a>=r&&(A=((S=f-(k=c[a*e+a]))*(E=m-k)-p)/c[(a+1)*e+a]+c[a*e+a+1],b=c[(a+1)*e+a+1]-k-S-E,S=c[(a+2)*e+a+1],A/=E=Math.abs(A)+Math.abs(b)+Math.abs(S),b/=E,S/=E,a!==r)&&!(Math.abs(c[a*e+(a-1)])*(Math.abs(b)+Math.abs(S))<y*(Math.abs(A)*(Math.abs(c[(a-1)*e+a-1])+Math.abs(k)+Math.abs(c[(a+1)*e+a+1]))));)a--;for(t=a+2;t<=e;t++)c[t*e+t-2]=0,t>a+2&&(c[t*e+t-3]=0);for(i=a;i<=e-1;i++){var w=i!==e-1;if(i!==a&&(A=c[i*e+i-1],b=c[(i+1)*e+i-1],S=w?c[(i+2)*e+i-1]:0,0!==(f=Math.abs(A)+Math.abs(b)+Math.abs(S))&&(A/=f,b/=f,S/=f)),0===f)break;if(E=Math.sqrt(A*A+b*b+S*S),A<0&&(E=-E),0!==E){for(i!==a?c[i*e+i-1]=-E*f:r!==a&&(c[i*e+i-1]=-c[i*e+i-1]),f=(A+=E)/E,m=b/E,k=S/E,b/=A,S/=A,n=i;n<h;n++)A=c[i*e+n]+b*c[(i+1)*e+n],w&&(A+=S*c[(i+2)*e+n],c[(i+2)*e+n]=c[(i+2)*e+n]-A*k),c[i*e+n]=c[i*e+n]-A*f,c[(i+1)*e+n]=c[(i+1)*e+n]-A*m;for(t=0;t<=Math.min(e,i+3);t++)A=f*c[t*e+i]+m*c[t*e+i+1],w&&(A+=k*c[t*e+i+2],c[t*e+i+2]=c[t*e+i+2]-A*S),c[t*e+i]=c[t*e+i]-A,c[t*e+i+1]=c[t*e+i+1]-A*b;for(t=0;t<=g;t++)A=f*o[t*e+i]+m*o[t*e+i+1],w&&(A+=k*o[t*e+i+2],o[t*e+i+2]=o[t*e+i+2]-A*S),o[t*e+i]=o[t*e+i]-A,o[t*e+i+1]=o[t*e+i+1]-A*b}}}}if(0!==V){for(e=h-1;e>=0;e--)if(A=l[e],0===(b=u[e]))for(r=e,c[e*e+e]=1,t=e-1;t>=0;t--){for(p=c[t*e+t]-A,S=0,n=r;n<=e;n++)S+=c[t*this.n+n]*c[n*e+e];if(u[t]<0)k=p,E=S;else if(r=t,0===u[t]?c[t*e+e]=0!==p?-S/p:-S/(y*V):(f=c[t*e+t+1],m=c[(t+1)*e+t],d=(f*E-k*S)/(b=(l[t]-A)*(l[t]-A)+u[t]*u[t]),c[t*e+e]=d,Math.abs(f)>Math.abs(k)?c[(t+1)*e+e]=(-S-p*d)/f:c[(t+1)*e+e]=(-E-m*d)/k),y*(d=Math.abs(c[t*e+e]))*d>1)for(n=t;n<=e;n++)c[n*e+e]=c[n*e+e]/d}else if(b<0)for(r=e-1,Math.abs(c[e*e+e-1])>Math.abs(c[(e-1)*e+e])?(c[(e-1)*e+(e-1)]=b/c[e*e+e-1],c[(e-1)*e+e]=-(c[e*e+e]-A)/c[e*e+e-1]):(this.cdiv(0,-c[(e-1)*e+e],c[(e-1)*e+(e-1)]-A,b),c[(e-1)*e+(e-1)]=this.cdivr,c[(e-1)*e+e]=this.cdivi),c[e*e+e-1]=0,c[e*e+e]=1,t=e-2;t>=0;t--){var _=void 0,C=void 0,x=void 0,P=void 0;for(_=0,C=0,n=r;n<=e;n++)_+=c[t*this.n+n]*c[n*e+e-1],C+=c[t*this.n+n]*c[n*e+e];if(p=c[t*e+t]-A,u[t]<0)k=p,S=_,E=C;else if(r=t,0===u[t]?(this.cdiv(-_,-C,p,b),c[t*e+e-1]=this.cdivr,c[t*e+e]=this.cdivi):(f=c[t*e+t+1],m=c[(t+1)*e+t],x=(l[t]-A)*(l[t]-A)+u[t]*u[t]-b*b,P=2*(l[t]-A)*b,0===x&&0===P&&(x=y*V*(Math.abs(p)+Math.abs(b)+Math.abs(f)+Math.abs(m)+Math.abs(k))),this.cdiv(f*S-k*_+b*C,f*E-k*C-b*_,x,P),c[t*e+e-1]=this.cdivr,c[t*e+e]=this.cdivi,Math.abs(f)>Math.abs(k)+Math.abs(b)?(c[(t+1)*e+e-1]=(-_-p*c[t*e+e-1]+b*c[t*e+e])/f,c[(t+1)*e+e]=(-C-p*c[t*e+e]-b*c[t*e+e-1])/f):(this.cdiv(-S-m*c[t*e+e-1],-E-m*c[t*e+e],k,b),c[(t+1)*e+e-1]=this.cdivr,c[(t+1)*e+e]=this.cdivi)),y*(d=Math.max(Math.abs(c[t*e+e-1]),Math.abs(c[t*e+e])))*d>1)for(n=t;n<=e;n++)c[n*e+e-1]=c[n*e+e-1]/d,c[n*e+e]=c[n*e+e]/d}for(t=0;t<h;t++)if(t<0||t>g)for(n=t;n<h;n++)o[t*this.n+n]=c[t*this.n+n];for(n=h-1;n>=0;n--)for(t=0;t<=g;t++){for(k=0,i=0;i<=Math.min(n,g);i++)k+=o[t*e+i]*c[i*e+n];o[t*this.n+n]=k}}}}]),e}();xt.register("EigenvalueDecomposition",wd);var _d=window.Float64Array||Array,Cd=function(){function e(t){var n,i,r;_classCallCheck(this,e),this.matrix=t,this.LU=t.getArrayCopy();var a=this.LU;this.m=t.getRowDimension();var s=this.m;this.n=t.getColumnDimension();var o=this.n;for(this.piv=new Uint32Array(s),n=0;n<s;n++)this.piv[n]=n;this.pivsign=1;var l=new _d(s);for(i=0;i<o;i++){for(n=0;n<s;n++)l[n]=a[t.index(n,i)];for(n=0;n<s;n++){var u=Math.min(n,i),c=0;for(r=0;r<u;r++){c+=a[t.index(n,r)]*l[r]}l[n]-=c,a[t.index(n,i)]=l[n]}var h=i;for(n=i+1;n<s;n++)Math.abs(l[n])>Math.abs(l[h])&&(h=n);if(h!==i){for(r=0;r<o;r++){var d=t.index(h,r),p=t.index(i,r),f=a[d];a[d]=a[p],a[p]=f}r=this.piv[h],this.piv[h]=this.piv[i],this.piv[i]=r,this.pivsign=-this.pivsign}if(i<s&&0!==a[this.matrix.index(i,i)])for(n=i+1;n<s;n++)a[t.index(n,i)]/=a[t.index(i,i)]}}return _createClass(e,[{key:"isNonsingular",value:function(){for(var e=0;e<this.n;e++){var t=this.matrix.index(e,e);if(0===this.LU[t])return!1}return!0}},{key:"getL",value:function(){for(var e=new qd(this.m,this.n),t=0;t<this.m;t++)for(var n=0;n<this.n;n++)e.entries[e.index(t,n)]=t>n?this.LU[this.matrix.index(t,n)]:t===n?1:0;return e}},{key:"getU",value:function(){for(var e=new qd(this.n,this.n),t=0;t<this.n;t++)for(var n=0;n<this.n;n++)e.entries[e.index(t,n)]=t<=n?this.LU[this.matrix.index(t,n)]:0;return e}},{key:"getPivot",value:function(){for(var e=new Uint32Array(this.m),t=0;t<this.m;t++)e[t]=this.piv[t];return e}},{key:"getDoublePivot",value:function(){for(var e=new _d(this.m),t=0;t<this.m;t++)e[t]=this.piv[t];return e}},{key:"det",value:function(){if(this.m!==this.n)throw new Error("Matrix must be square.");for(var e=this.pivsign,t=0;t<this.n;t++)e*=this.LU[this.matrix.index(t,t)];return e}},{key:"solve",value:function(e){var t,n,i;if(e.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isNonsingular())throw new Error("Matrix is singular.");var r=e.getColumnDimension(),a=e.getArrayRowMatrix(this.piv,0,r-1);for(i=0;i<this.n;i++)for(t=i+1;t<this.n;t++)for(n=0;n<r;n++)a.entries[a.index(t,n)]-=a.entries[a.index(i,n)]*this.LU[this.matrix.index(t,i)];for(i=this.n-1;i>=0;i--){for(n=0;n<r;n++)a.entries[a.index(i,n)]/=this.LU[this.matrix.index(i,i)];for(t=0;t<i;t++)for(n=0;n<r;n++)a.entries[a.index(t,n)]-=a.entries[a.index(i,n)]*this.LU[this.matrix.index(t,i)]}return a}}]),e}();xt.register("LUDecomposition",Cd);var xd=Cd,Pd=window.Float64Array||Array,Td=function(){function e(t){_classCallCheck(this,e),this.matrix=t,this.QR=t.getArrayCopy();var n=this.QR;this.m=t.getRowDimension();var i=this.m;this.n=t.getColumnDimension();var r,a,s,o=this.n;for(this.Rdiag=new Pd(o),s=0;s<o;s++){var l=0;for(r=s;r<i;r++)l=qd.hypot(l,n[this.matrix.index(r,s)]);if(0!==l){for(n[this.matrix.index(s,s)]<0&&(l=-l),r=s;r<i;r++)n[this.matrix.index(r,s)]/=l;for(n[this.matrix.index(s,s)]+=1,a=s+1;a<o;a++){var u=0;for(r=s;r<i;r++)u+=n[this.matrix.index(r,s)]*n[this.matrix.index(r,a)];for(u=-u/n[this.matrix.index(s,s)],r=s;r<i;r++)n[this.matrix.index(r,a)]+=u*n[this.matrix.index(r,s)]}}this.Rdiag[s]=-l}}return _createClass(e,[{key:"isFullRank",value:function(){for(var e=0;e<this.n;e++)if(0===this.Rdiag[e])return!1;return!0}},{key:"getH",value:function(){for(var e=new qd(this.m,this.n),t=0;t<this.m;t++)for(var n=0;n<this.n;n++)e.entries[e.index(t,n)]=t>=n?this.QR[this.matrix.index(t,n)]:0;return e}},{key:"getR",value:function(){for(var e=new qd(this.n,this.n),t=0;t<this.n;t++)for(var n=0;n<this.n;n++)e.entries[e.index(t,n)]=t<n?this.QR[this.matrix.index(t,n)]:t===n?this.Rdiag[t]:0;return e}},{key:"getQ",value:function(){var e,t,n,i=new qd(this.m,this.n);for(n=this.n-1;n>=0;n--){for(e=0;e<this.m;e++)i.entries[i.index(e,n)]=0;for(i.entries[i.index(n,n)]=1,t=n;t<this.n;t++)if(0!==this.QR[this.matrix.index(n,n)]){var r=0;for(e=n;e<this.m;e++)r+=this.QR[this.matrix.index(e,n)]*i.entries[i.index(e,t)];for(r=-r/this.QR[this.matrix.index(n,n)],e=n;e<this.m;e++)i.entries[i.index(e,t)]+=r*this.QR[this.matrix.index(e,n)]}}return i}},{key:"solve",value:function(e){if(e.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isFullRank())throw new Error("Matrix is rank deficient.");var t,n,i,r=e.getColumnDimension(),a=e.getArrayCopy();for(i=0;i<this.n;i++)for(n=0;n<r;n++){var s=0;for(t=i;t<this.m;t++)s+=this.QR[this.matrix.index(t,i)]*a[e.index(t,n)];for(s=-s/this.QR[this.matrix.index(i,i)],t=i;t<this.m;t++)a[e.index(t,n)]+=s*this.QR[this.matrix.index(t,i)]}for(i=this.n-1;i>=0;i--){for(n=0;n<r;n++)a[e.index(i,n)]/=this.Rdiag[i];for(t=0;t<i;t++)for(n=0;n<r;n++)a[e.index(t,n)]-=a[e.index(i,n)]*this.QR[this.matrix.index(t,i)]}return new qd(this.n,r,a,!0).getMatrix(0,this.n-1,0,r-1)}}]),e}();xt.register("QRDecomposition",Td);var Md=Td,Ld=window.Float64Array||Array,Id=function(){function e(t){_classCallCheck(this,e),this.matrix=t;var n=t,i=n.getArrayCopy();this.m=n.getRowDimension(),this.n=n.getColumnDimension();var r=this.m,a=this.n,s=Math.min,o=Math.max,l=Math.pow,u=Math.abs,c=s(r,a);this.s=new Ld(s(r+1,a));var h=this.s;this.U=new Ld(r*c);var d=this.U;this.V=new Ld(a*a);var p,f,m,g,y,v,A,b=this.V,S=new Ld(a),E=new Ld(r),k=qd.hypot,V=s(r-1,a),w=o(0,s(a-2,r));for(m=0;m<o(V,w);m++){if(m<V){for(h[m]=0,p=m;p<r;p++)h[m]=k(h[m],i[p*a+m]);if(0!==h[m]){for(i[m*a+m]<0&&(h[m]=-h[m]),p=m;p<r;p++)i[p*a+m]/=h[m];i[m*a+m]+=1}h[m]=-h[m]}for(f=m+1;f<a;f++){if(m<V&&0!==h[m]){for(g=0,p=m;p<r;p++)g+=i[p*a+m]*i[p*a+f];for(g=-g/i[m*a+m],p=m;p<r;p++)i[p*a+f]+=g*i[p*a+m]}S[f]=i[m*a+f]}if(m<V)for(p=m;p<r;p++)d[p*c+m]=i[p*a+m];if(m<w){for(S[m]=0,p=m+1;p<a;p++)S[m]=k(S[m],S[p]);if(0!==S[m]){for(S[m+1]<0&&(S[m]=-S[m]),p=m+1;p<a;p++)S[p]/=S[m];S[m+1]+=1}if(S[m]=-S[m],m+1<r&&0!==S[m]){for(p=m+1;p<r;p++)E[p]=0;for(f=m+1;f<a;f++)for(p=m+1;p<r;p++)E[p]+=S[f]*i[p*a+f];for(f=m+1;f<a;f++)for(g=-S[f]/S[m+1],p=m+1;p<r;p++)i[p*a+f]+=g*E[p]}for(p=m+1;p<a;p++)b[p*a+m]=S[p]}}var _=s(a,r+1);for(V<a&&(h[V]=i[V*a+V]),r<_&&(h[_-1]=0),w+1<_&&(S[w]=i[w*a+_-1]),S[_-1]=0,f=V;f<c;f++){for(p=0;p<r;p++)d[p*c+f]=0;d[f*c+f]=1}for(m=V-1;m>=0;m--)if(0!==h[m]){for(f=m+1;f<c;f++){for(g=0,p=m;p<r;p++)g+=d[p*c+m]*d[p*c+f];for(g=-g/d[m*c+m],p=m;p<r;p++)d[p*c+f]+=g*d[p*c+m]}for(p=m;p<r;p++)d[p*c+m]=-d[p*c+m];for(d[m*c+m]=1+d[m*c+m],p=0;p<m-1;p++)d[p*c+m]=0}else{for(p=0;p<r;p++)d[p*c+m]=0;d[m*c+m]=1}for(m=a-1;m>=0;m--){if(m<w&&0!==S[m])for(f=m+1;f<c;f++){for(g=0,p=m+1;p<a;p++)g+=b[p*a+m]*b[p*a+f];for(g=-g/b[(m+1)*a+m],p=m+1;p<a;p++)b[p*a+f]+=g*b[p*a+m]}for(p=0;p<a;p++)b[p*a+m]=0;b[m*a+m]=1}for(var C=_-1,x=0,P=l(2,-52),T=l(2,-966);_>0;){var M=void 0;if(x>500)break;for(m=_-2;m>=-1&&-1!==m;m--)if(u(S[m])<=T+P*(u(h[m])+u(h[m+1]))){S[m]=0;break}if(m===_-2)M=4;else{var L=void 0;for(L=_-1;L>=m&&L!==m;L--)if(g=(L!==_?u(S[L]):0)+(L!==m+1?u(S[L-1]):0),u(h[L])<=T+P*g){h[L]=0;break}L===m?M=3:L===_-1?M=1:(M=2,m=L)}switch(m++,M){case 1:for(y=S[_-2],S[_-2]=0,f=_-2;f>=m;f--)for(g=k(h[f],y),v=h[f]/g,A=y/g,h[f]=g,f!==m&&(y=-A*S[f-1],S[f-1]=v*S[f-1]),p=0;p<a;p++)g=v*b[p*a+f]+A*b[p*a+_-1],b[p*a+_-1]=-A*b[p*a+f]+v*b[p*a+_-1],b[p*a+f]=g;break;case 2:for(y=S[m-1],S[m-1]=0,f=m;f<_;f++)for(g=k(h[f],y),v=h[f]/g,A=y/g,h[f]=g,y=-A*S[f],S[f]=v*S[f],p=0;p<r;p++)g=v*d[p*c+f]+A*d[p*c+m-1],d[p*c+m-1]=-A*d[p*c+f]+v*d[p*c+m-1],d[p*c+f]=g;break;case 3:var I=o(o(o(o(u(h[_-1]),u(h[_-2])),u(S[_-2])),u(h[m])),u(S[m])),R=h[_-1]/I,D=h[_-2]/I,N=S[_-2]/I,q=h[m]/I,O=S[m]/I,B=((D+R)*(D-R)+N*N)/2,G=R*N*(R*N),H=0;0===B&&0===G||(H=Math.sqrt(B*B+G),B<0&&(H=-H),H=G/(B+H)),y=(q+R)*(q-R)+H;var F=q*O;for(f=m;f<_-1;f++){for(v=y/(g=k(y,F)),A=F/g,f!==m&&(S[f-1]=g),y=v*h[f]+A*S[f],S[f]=v*S[f]-A*h[f],F=A*h[f+1],h[f+1]=v*h[f+1],p=0;p<a;p++)g=v*b[p*a+f]+A*b[p*a+f+1],b[p*a+f+1]=-A*b[p*a+f]+v*b[p*a+f+1],b[p*a+f]=g;if(v=y/(g=k(y,F)),A=F/g,h[f]=g,y=v*S[f]+A*h[f+1],h[f+1]=-A*S[f]+v*h[f+1],F=A*S[f+1],S[f+1]=v*S[f+1],f<r-1)for(p=0;p<r;p++)g=v*d[p*c+f]+A*d[p*c+f+1],d[p*c+f+1]=-A*d[p*c+f]+v*d[p*c+f+1],d[p*c+f]=g}S[_-2]=y,x+=1;break;case 4:if(h[m]<=0)for(h[m]=h[m]<0?-h[m]:0,p=0;p<=C;p++)b[p*a+m]=-b[p*a+m];for(;m<C&&!(h[m]>=h[m+1]);){if(g=h[m],h[m]=h[m+1],h[m+1]=g,m<a-1)for(p=0;p<a;p++)g=b[p*a+m+1],b[p*a+m+1]=b[p*a+m],b[p*a+m]=g;if(m<r-1)for(p=0;p<r;p++)g=d[p*c+m+1],d[p*c+m+1]=d[p*c+m],d[p*c+m]=g;m++}x=0,_--;break;default:throw new Error("invalid kase: ".concat(M))}}}return _createClass(e,[{key:"getU",value:function(){return new qd(this.m,Math.min(this.m+1,this.n),this.U,!0)}},{key:"getV",value:function(){return new qd(this.n,this.n,this.V,!0)}},{key:"getSingularValues",value:function(){return this.s}},{key:"getS",value:function(){for(var e=new qd(this.n,this.n),t=0;t<this.n;t++){for(var n=0;n<this.n;n++)e.entries[e.index(t,n)]=0;e.entries[e.index(t,t)]=this.s[t]}return e}},{key:"norm2",value:function(){return this.s[0]}},{key:"cond",value:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"rank",value:function(){for(var e=Math.pow(2,-23),t=Math.max(this.m,this.n)*this.s[0]*e,n=0,i=0;i<this.s.length;i++)this.s[i]>t&&n++;return n}}],[{key:"pseudoinverse",value:function(t){var n=new e(t),i=qd.diagonalMatrix(n.getSingularValues().map((function(e){return Math.abs(e)<1e-300?0:1/e})));return n.getV().times(i).times(n.getU().transpose())}}]),e}();xt.register("SingularValueDecomposition",Id);var Rd=Id,Dd=window.Float64Array||Array,Nd=function(){function e(t,n,i,r){_classCallCheck(this,e),this.m=t,this.n=n;var a,s=t*n;if(this.size=s,r)this.entries=i;else if(i||(i=0),this.entries=new Dd(s),kd(i))for(a=0;a<s;a++)this.entries[a]=i[a];else for(a=0;a<s;a++)this.entries[a]=i}return _createClass(e,[{key:"copy",value:function(){for(var t=new e(this.m,this.n),n=0;n<this.size;n++)t.entries[n]=this.entries[n];return t}},{key:"getArray",value:function(){return this.entries}},{key:"getArrayCopy",value:function(){return new Dd(this.entries)}},{key:"getRowDimension",value:function(){return this.m}},{key:"getColumnDimension",value:function(){return this.n}},{key:"index",value:function(e,t){return e*this.n+t}},{key:"get",value:function(e,t){return this.entries[this.index(e,t)]}},{key:"set",value:function(e,t,n){this.entries[this.index(e,t)]=n}},{key:"getMatrix",value:function(t,n,i,r){for(var a=new e(n-t+1,r-i+1),s=t;s<=n;s++)for(var o=i;o<=r;o++)a.entries[a.index(s-t,o-i)]=this.entries[this.index(s,o)];return a}},{key:"getArrayRowMatrix",value:function(t,n,i){for(var r=new e(t.length,i-n+1),a=0;a<t.length;a++)for(var s=n;s<=i;s++)r.entries[r.index(a,s-n)]=this.entries[this.index(t[a],s)];return r}},{key:"transpose",value:function(t){t=t||new e(this.n,this.m);for(var n=0;n<this.m;n++)for(var i=0;i<this.n;i++)t.entries[t.index(i,n)]=this.entries[this.index(n,i)];return t}},{key:"norm1",value:function(){for(var e=0,t=0;t<this.n;t++){for(var n=0,i=0;i<this.m;i++)n+=Math.abs(this.entries[this.index(i,t)]);e=Math.max(e,n)}return e}},{key:"norm2",value:function(){return new Rd(this).norm2()}},{key:"normInf",value:function(){for(var e=0,t=0;t<this.m;t++){for(var n=0,i=0;i<this.n;i++)n+=Math.abs(this.entries[this.index(t,i)]);e=Math.max(e,n)}return e}},{key:"normF",value:function(){for(var t=0,n=0;n<this.m;n++)for(var i=0;i<this.n;i++)t=e.hypot(t,this.entries[this.index(n,i)]);return t}},{key:"uminus",value:function(){for(var t=new e(this.m,this.n),n=0;n<this.m;n++)for(var i=0;i<this.n;i++)t.entries[t.index(n,i)]=-this.entries[this.index(n,i)];return t}},{key:"plus",value:function(t){this.checkMatrixDimensions(t);for(var n=new e(this.m,this.n),i=0;i<this.m;i++)for(var r=0;r<this.n;r++){var a=n.index(i,r);n.entries[a]=this.entries[a]+t.entries[a]}return n}},{key:"plusEquals",value:function(e){this.checkMatrixDimensions(e);for(var t=0;t<this.m;t++)for(var n=0;n<this.n;n++){var i=this.index(t,n);this.entries[i]=this.entries[i]+e.entries[i]}return this}},{key:"blendEquals",value:function(e,t){this.checkMatrixDimensions(e);for(var n=0;n<this.m;n++)for(var i=0;i<this.n;i++){var r=this.index(n,i),a=this.entries[r],s=e.entries[r];this.entries[r]=a+(s-a)*t}return this}},{key:"minus",value:function(t){this.checkMatrixDimensions(t);for(var n=new e(this.m,this.n),i=0;i<this.m;i++)for(var r=0;r<this.n;r++){var a=this.index(i,r);n.entries[a]=this.entries[a]-t.entries[a]}return n}},{key:"minusEquals",value:function(e){this.checkMatrixDimensions(e);for(var t=0;t<this.m;t++)for(var n=0;n<this.n;n++){var i=this.index(t,n);this.entries[i]=this.entries[i]-e.entries[i]}return this}},{key:"arrayTimes",value:function(t){this.checkMatrixDimensions(t);for(var n=new e(this.m,this.n),i=0;i<this.m;i++)for(var r=0;r<this.n;r++){var a=n.index(i,r);n.entries[a]=this.entries[a]*t.entries[a]}return n}},{key:"arrayTimesEquals",value:function(e){this.checkMatrixDimensions(e);for(var t=0;t<this.m;t++)for(var n=0;n<this.n;n++){var i=this.index(t,n);this.entries[i]=this.entries[i]*e.entries[i]}return this}},{key:"arrayRightDivide",value:function(t){this.checkMatrixDimensions(t);for(var n=new e(this.m,this.n),i=0;i<this.m;i++)for(var r=0;r<this.n;r++){var a=this.index(i,r);n.entries[a]=this.entries[a]/t.entries[a]}return n}},{key:"arrayRightDivideEquals",value:function(e){this.checkMatrixDimensions(e);for(var t=0;t<this.m;t++)for(var n=0;n<this.n;n++){var i=this.index(t,n);this.entries[i]=this.entries[i]/e.entries[i]}return this}},{key:"arrayLeftDivide",value:function(t){this.checkMatrixDimensions(t);for(var n=new e(this.m,this.n),i=0;i<this.m;i++)for(var r=0;r<this.n;r++){var a=this.index(i,r);n.entries[a]=t.entries[a]/this.entries[a]}return n}},{key:"arrayLeftDivideEquals",value:function(e){this.checkMatrixDimensions(e);for(var t=0;t<this.m;t++)for(var n=0;n<this.n;n++){var i=this.index(t,n);this.entries[i]=e.entries[i]/this.entries[i]}return this}},{key:"times",value:function(t){var n,i,r,a,s,o;if(t.isMatrix){if((o=t).m!==this.n)throw new Error("Matrix inner dimensions must agree.");n=new e(this.m,o.n);var l=new Dd(this.n);for(r=0;r<o.n;r++){for(a=0;a<this.n;a++)l[a]=o.entries[o.index(a,r)];for(i=0;i<this.m;i++){for(s=0,a=0;a<this.n;a++)s+=this.entries[this.index(i,a)]*l[a];n.entries[n.index(i,r)]=s}}return n}for(s=t,n=new e(this.m,this.n),i=0;i<this.m;i++)for(r=0;r<this.n;r++)n.entries[n.index(i,r)]=s*this.entries[this.index(i,r)];return n}},{key:"timesEquals",value:function(e){for(var t=0;t<this.m;t++)for(var n=0;n<this.n;n++){var i=this.index(t,n);this.entries[i]=e*this.entries[i]}return this}},{key:"solve",value:function(e){return this.m===this.n?new xd(this).solve(e):new Md(this).solve(e)}},{key:"solveTranspose",value:function(e){return this.transpose().solve(e.transpose())}},{key:"inverse",value:function(){return this.solve(e.identity(this.m,this.m))}},{key:"det",value:function(){return new xd(this).det()}},{key:"rank",value:function(){return new Rd(this).rank()}},{key:"cond",value:function(){return new Rd(this).cond()}},{key:"trace",value:function(){for(var e=0,t=0;t<Math.min(this.m,this.n);t++)e+=this.entries[this.index(t,t)];return e}},{key:"checkMatrixDimensions",value:function(e){if(e.m!==this.m||e.n!==this.n)throw new Error("Matrix dimensions must agree.")}},{key:"toString",value:function(){var e="";e+="dim: ".concat(this.getRowDimension(),"x").concat(this.getColumnDimension(),"\n");for(var t=0;t<this.getRowDimension();t++){for(var n=0;n<this.getColumnDimension();n++)e+="".concat(this.get(t,n)," ");e+="\n"}return e}},{key:"extractVector2",value:function(e){return new pn(this.get(0,e),this.get(1,e))}},{key:"extractVector3",value:function(e){return new un(this.get(0,e),this.get(1,e),this.get(2,e))}},{key:"extractVector4",value:function(e){return new an(this.get(0,e),this.get(1,e),this.get(2,e),this.get(3,e))}},{key:"setVectors3",value:function(e){for(var t=e.length,n=0;n<t;n++){var i=e[n];this.entries[n]=i.x,this.entries[n+t]=i.y,this.entries[n+2*t]=i.z}return this}}],[{key:"hypot",value:function(e,t){var n;return Math.abs(e)>Math.abs(t)?(n=t/e,n=Math.abs(e)*Math.sqrt(1+n*n)):0!==t?(n=e/t,n=Math.abs(t)*Math.sqrt(1+n*n)):n=0,n}},{key:"identity",value:function(t,n){for(var i=new e(t,n),r=0;r<t;r++)for(var a=0;a<n;a++)i.entries[i.index(r,a)]=r===a?1:0;return i}},{key:"diagonalMatrix",value:function(t){for(var n=t.length,i=new e(n,n),r=0;r<n;r++)i.entries[i.index(r,r)]=t[r];return i}},{key:"rowVector2",value:function(t){return new e(1,2,[t.x,t.y])}},{key:"rowVector3",value:function(t){return new e(1,3,[t.x,t.y,t.z])}},{key:"rowVector4",value:function(t){return new e(1,4,[t.x,t.y,t.z,t.w])}},{key:"rowVector",value:function(t){if(t.isVector2)return e.rowVector2(t);if(t.isVector3)return e.rowVector3(t);if(t.isVector4)return e.rowVector4(t);throw new Error("undetected type of vector: ".concat(t.toString()))}},{key:"columnVector2",value:function(t){return new e(2,1,[t.x,t.y])}},{key:"columnVector3",value:function(t){return new e(3,1,[t.x,t.y,t.z])}},{key:"columnVector4",value:function(t){return new e(4,1,[t.x,t.y,t.z,t.w])}},{key:"columnVector",value:function(t){if(t.isVector2)return e.columnVector2(t);if(t.isVector3)return e.columnVector3(t);if(t.isVector4)return e.columnVector4(t);throw new Error("undetected type of vector: ".concat(t.toString()))}},{key:"fromVectors2",value:function(t){for(var n=t.length,i=new Dd(2*n),r=0;r<n;r++){var a=t[r];i[r]=a.x,i[r+n]=a.y}return new e(2,n,i,!0)}},{key:"fromVectors3",value:function(t){for(var n=t.length,i=new Dd(3*n),r=0;r<n;r++){var a=t[r];i[r]=a.x,i[r+n]=a.y,i[r+2*n]=a.z}return new e(3,n,i,!0)}},{key:"fromVectors4",value:function(t){for(var n=t.length,i=new Dd(4*n),r=0;r<n;r++){var a=t[r];i[r]=a.x,i[r+n]=a.y,i[r+2*n]=a.z,i[r+3*n]=a.w}return new e(4,n,i,!0)}}]),e}();Nd.prototype.isMatrix=!0,xt.register("Matrix",Nd);var qd=Nd,Od=function(){function e(t,n){var i=this;_classCallCheck(this,e),n=A({mouseButton:0,pressCursor:"pointer",allowScale:!0,allowRotation:!0,allowMultitouchInterruption:!1,allowMoveInterruption:!0,minScale:1,maxScale:4,tandem:xe.REQUIRED},n),this._targetNode=t,this._minScale=n.minScale,this._maxScale=n.maxScale,this._mouseButton=n.mouseButton,this._pressCursor=n.pressCursor,this._allowScale=n.allowScale,this._allowRotation=n.allowRotation,this._allowMultitouchInterruption=n.allowMultitouchInterruption,this._allowMoveInterruption=n.allowMoveInterruption,this._presses=[],this._backgroundPresses=[],this.matrixProperty=new dt(t.matrix.copy(),{phetioValueType:oi.Matrix3IO,tandem:n.tandem.createTandem("matrixProperty")}),this.matrixProperty.link((function(e){i._targetNode.matrix=e})),this._interrupted=!1,this._pressListener={move:function(e){i.movePress(i.findPress(e.pointer))},up:function(e){i.removePress(i.findPress(e.pointer))},cancel:function(e){var t=i.findPress(e.pointer);t.interrupted=!0,i.removePress(t)},interrupt:function(){i.interrupt()}},this._backgroundListener={up:function(e){i._interrupted||i.removeBackgroundPress(i.findBackgroundPress(e.pointer))},move:function(e){if(i.canMoveFromPointer(e.pointer)&&!i.anyBackgroundPressesWithDragIntent()&&i._allowMoveInterruption){var t=i.findBackgroundPress(e.pointer).initialPoint.minus(e.pointer.point),n=i._backgroundPresses.length<=1&&1===i.getCurrentScale();t.magnitude>25&&!n&&(i.interruptOtherListeners(e.pointer),i.convertBackgroundPresses(),i.movePress(i.findPress(e.pointer)))}},cancel:function(e){i._interrupted||i.removeBackgroundPress(i.findBackgroundPress(e.pointer))},interrupt:function(){i.interrupt()}}}return _createClass(e,[{key:"findPress",value:function(e){for(var t=0;t<this._presses.length;t++)if(this._presses[t].pointer===e)return this._presses[t];return null}},{key:"findBackgroundPress",value:function(e){for(var t=0;t<this._backgroundPresses.length;t++)if(this._backgroundPresses[t].pointer===e)return this._backgroundPresses[t];return null}},{key:"hasPress",value:function(e){return _.some(this._presses.concat(this._backgroundPresses),(function(t){return t.pointer===e.pointer}))}},{key:"anyBackgroundPressesWithDragIntent",value:function(){var e=this;return _.some(this._backgroundPresses,(function(t){return!e.canMoveFromPointer(t.pointer)}))}},{key:"interruptOtherListeners",value:function(e){for(var t=e._listeners.slice(),n=0;n<t.length;n++){var i=t[n];i!==this._backgroundListener&&i.interrupt&&i.interrupt()}}},{key:"canMoveFromPointer",value:function(e){return!e.hasIntent(Xh.DRAG)}},{key:"down",value:function(e){if(!(e.pointer instanceof Kh&&e.domEvent.button!==this._mouseButton)){var t;this._interrupted=!1,t=_.includes(e.trail.nodes,this._targetNode)?e.trail.subtrailTo(this._targetNode,!1):this._targetNode.getUniqueTrailTo(e.target);var n=new Bd(e.pointer,t);this._allowMoveInterruption||this._allowMultitouchInterruption?this.addBackgroundPress(n):e.pointer.isAttached()||(this.addPress(n),this.convertBackgroundPresses())}}},{key:"addPress",value:function(e){this.hasPress(e)||(this._presses.push(e),e.pointer.cursor=this._pressCursor,e.pointer.addInputListener(this._pressListener,!0),this.recomputeLocals(),this.reposition())}},{key:"movePress",value:function(e){this.reposition()}},{key:"removePress",value:function(e){e.pointer.removeInputListener(this._pressListener),e.pointer.cursor=null,J(this._presses,e),this.recomputeLocals(),this.reposition()}},{key:"addBackgroundPress",value:function(e){this.hasPress(e)||(this._backgroundPresses.push(e),e.pointer.addInputListener(this._backgroundListener,!1))}},{key:"removeBackgroundPress",value:function(e){e.pointer.removeInputListener(this._backgroundListener),J(this._backgroundPresses,e)}},{key:"convertBackgroundPresses",value:function(){for(var e=this._backgroundPresses.slice(),t=0;t<e.length;t++){var n=e[t];this.removeBackgroundPress(n),n.pointer.interruptAttached(),this.addPress(n)}}},{key:"reposition",value:function(){this.matrixProperty.set(this.computeMatrix())}},{key:"recomputeLocals",value:function(){for(var e=0;e<this._presses.length;e++)this._presses[e].recomputeLocalPoint()}},{key:"interrupt",value:function(){for(;this._presses.length;)this.removePress(this._presses[this._presses.length-1]);for(;this._backgroundPresses.length;)this.removeBackgroundPress(this._backgroundPresses[this._backgroundPresses.length-1]);this._interrupted=!0}},{key:"computeMatrix",value:function(){return 0===this._presses.length?this._targetNode.getMatrix():1===this._presses.length?this.computeSinglePressMatrix():this._allowScale&&this._allowRotation?this.computeTranslationRotationScaleMatrix():this._allowScale?this.computeTranslationScaleMatrix():this._allowRotation?this.computeTranslationRotationMatrix():this.computeTranslationMatrix()}},{key:"computeSinglePressMatrix",value:function(){var e=this._presses[0].targetPoint,t=this._targetNode.localToParentPoint(this._presses[0].localPoint),n=e.minus(t);return oi.translationFromVector(n).timesMatrix(this._targetNode.getMatrix())}},{key:"computeTranslationMatrix",value:function(){for(var e=new pn(0,0),t=0;t<this._presses.length;t++)e.add(this._presses[t].targetPoint),e.subtract(this._presses[t].localPoint);return oi.translationFromVector(e.dividedScalar(this._presses.length))}},{key:"computeTranslationScaleMatrix",value:function(){var e=this._presses.map((function(e){return e.localPoint})),t=this._presses.map((function(e){return e.targetPoint})),n=new pn(0,0),i=new pn(0,0);e.forEach((function(e){n.add(e)})),t.forEach((function(e){i.add(e)})),n.divideScalar(this._presses.length),i.divideScalar(this._presses.length);var r=0,a=0;e.forEach((function(e){r+=e.distanceSquared(n)})),t.forEach((function(e){a+=e.distanceSquared(i)}));var s=this.getCurrentScale();0!==a&&(s=this.limitScale(Math.sqrt(a/r)));var o=oi.translation(i.x,i.y),l=oi.translation(-n.x,-n.y);return o.timesMatrix(oi.scaling(s)).timesMatrix(l)}},{key:"limitScale",value:function(e){var t=Math.max(e,this._minScale);return t=Math.min(t,this._maxScale)}},{key:"computeTranslationRotationMatrix",value:function(){var e,t=new qd(2,this._presses.length),n=new qd(2,this._presses.length),i=new pn(0,0),r=new pn(0,0);for(e=0;e<this._presses.length;e++){var a=this._presses[e].localPoint,s=this._presses[e].targetPoint;i.add(a),r.add(s),t.set(0,e,a.x),t.set(1,e,a.y),n.set(0,e,s.x),n.set(1,e,s.y)}for(i.divideScalar(this._presses.length),r.divideScalar(this._presses.length),e=0;e<this._presses.length;e++)t.set(0,e,t.get(0,e)-i.x),t.set(1,e,t.get(1,e)-i.y),n.set(0,e,n.get(0,e)-r.x),n.set(1,e,n.get(1,e)-r.y);var o=t.times(n.transpose()),l=new Rd(o),u=l.getV().times(l.getU().transpose());u.det()<0&&(u=l.getV().times(qd.diagonalMatrix([1,-1])).times(l.getU().transpose()));var c=(new oi).rowMajor(u.get(0,0),u.get(0,1),0,u.get(1,0),u.get(1,1),0,0,0,1),h=r.minus(c.timesVector2(i));return c.set02(h.x),c.set12(h.y),c}},{key:"computeTranslationRotationScaleMatrix",value:function(){var e,t=new qd(2*this._presses.length,4);for(e=0;e<this._presses.length;e++){var n=this._presses[e].localPoint;t.set(2*e+0,0,n.x),t.set(2*e+0,1,n.y),t.set(2*e+0,2,1),t.set(2*e+1,0,n.y),t.set(2*e+1,1,-n.x),t.set(2*e+1,3,1)}var i=new qd(2*this._presses.length,1);for(e=0;e<this._presses.length;e++){var r=this._presses[e].targetPoint;i.set(2*e+0,0,r.x),i.set(2*e+1,0,r.y)}var a=Rd.pseudoinverse(t).times(i),s=a.get(0,0),o=a.get(1,0),l=a.get(2,0),u=a.get(3,0);return(new oi).rowMajor(s,o,l,-o,s,u,0,0,1)}},{key:"getCurrentScale",value:function(){return this._targetNode.getScaleVector().x}},{key:"resetTransform",value:function(){this._targetNode.resetTransform(),this.matrixProperty.set(this._targetNode.matrix.copy())}}]),e}();Cr.register("MultiListener",Od);var Bd=function(){function e(t,n){_classCallCheck(this,e),this.pointer=t,this.trail=n,this.interrupted=!1,this.initialPoint=t.point,this.localPoint=null,this.recomputeLocalPoint()}return _createClass(e,[{key:"recomputeLocalPoint",value:function(){this.localPoint=this.trail.globalToLocalPoint(this.pointer.point)}},{key:"targetPoint",get:function(){return this.trail.globalToParentPoint(this.pointer.point)}}]),e}(),Gd=Od,Hd=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"modelToViewPosition",value:function(e){return this.transformPosition2(e)}},{key:"modelToViewXY",value:function(e,t){return new pn(this.modelToViewX(e),this.modelToViewY(t))}},{key:"modelToViewX",value:function(e){return this.matrix.m00()*e+this.matrix.m02()}},{key:"modelToViewY",value:function(e){return this.matrix.m11()*e+this.matrix.m12()}},{key:"modelToViewDelta",value:function(e){return this.transformDelta2(e)}},{key:"modelToViewNormal",value:function(e){return this.transformNormal2(e)}},{key:"modelToViewDeltaX",value:function(e){return this.transformDeltaX(e)}},{key:"modelToViewDeltaY",value:function(e){return this.transformDeltaY(e)}},{key:"modelToViewBounds",value:function(e){return this.transformBounds2(e)}},{key:"modelToViewShape",value:function(e){return this.transformShape(e)}},{key:"modelToViewRay",value:function(e){return this.transformRay2(e)}},{key:"viewToModelPosition",value:function(e){return this.inversePosition2(e)}},{key:"viewToModelXY",value:function(e,t){return new pn(this.viewToModelX(e),this.viewToModelY(t))}},{key:"viewToModelX",value:function(e){var t=this.getInverse();return t.m00()*e+t.m02()}},{key:"viewToModelY",value:function(e){var t=this.getInverse();return t.m11()*e+t.m12()}},{key:"viewToModelDelta",value:function(e){return this.inverseDelta2(e)}},{key:"viewToModelDeltaXY",value:function(e,t){return new pn(this.viewToModelDeltaX(e),this.viewToModelDeltaY(t))}},{key:"viewToModelNormal",value:function(e){return this.inverseNormal2(e)}},{key:"viewToModelDeltaX",value:function(e){return this.inverseDeltaX(e)}},{key:"viewToModelDeltaY",value:function(e){return this.inverseDeltaY(e)}},{key:"viewToModelBounds",value:function(e){return this.inverseBounds2(e)}},{key:"viewToModelShape",value:function(e){return this.inverseShape(e)}},{key:"viewToModelRay",value:function(e){return this.inverseRay2(e)}},{key:"validateMatrix",value:function(e){_get(_getPrototypeOf(n.prototype),"validateMatrix",this).call(this,e)}},{key:"setToRectangleMapping",value:function(e,t){var n=t.width/e.width,i=t.x-n*e.x,r=t.height/e.height,a=t.y-r*e.y;return this.setMatrix(oi.affine(n,0,i,0,r,a)),this}},{key:"setToRectangleInvertedYMapping",value:function(e,t){var n=t.width/e.width,i=t.x-n*e.x,r=-t.height/e.height,a=t.y-r*e.getMaxY();return this.setMatrix(oi.affine(n,0,i,0,r,a)),this}}],[{key:"createIdentity",value:function(){return new n(oi.IDENTITY)}},{key:"createOffsetScaleMapping",value:function(e,t){return new n(oi.affine(t,0,e.x,0,t,e.y))}},{key:"createOffsetXYScaleMapping",value:function(e,t,i){return new n(oi.affine(t,0,e.x,0,i,e.y))}},{key:"createSinglePointXYScaleMapping",value:function(e,t,i,r){var a=t.x-e.x*i,s=t.y-e.y*r;return n.createOffsetXYScaleMapping(new pn(a,s),i,r)}},{key:"createSinglePointScaleMapping",value:function(e,t,i){return n.createSinglePointXYScaleMapping(e,t,i,i)}},{key:"createSinglePointScaleInvertedYMapping",value:function(e,t,i){return n.createSinglePointXYScaleMapping(e,t,i,-i)}},{key:"createRectangleMapping",value:function(e,t){return(new n).setToRectangleMapping(e,t)}},{key:"createRectangleInvertedYMapping",value:function(e,t){return(new n).setToRectangleInvertedYMapping(e,t)}}]),n}(_i);tc.register("ModelViewTransform2",Hd);var Fd=Hd,Yd=new oi,zd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),i=A({panBounds:jn.NOTHING,targetBounds:null,targetScale:1,allowRotation:!1,tandem:xe.OPTIONAL},i),(r=t.call(this,e,i))._panBounds=i.panBounds,r._targetBounds=i.targetBounds||e.globalBounds.copy(),r._targetScale=i.targetScale,r.sourceFramePanBoundsProperty=new dt(xe.API_GENERATION?new jn(0,0,0,0):r._panBounds,{tandem:i.tandem.createTandem("sourceFramePanBoundsProperty"),phetioValueType:jn.Bounds2IO}),r.sourceFramePanBoundsProperty.lazyLink((function(){if(_.hasIn(window,"phet.joist.sim")&&phet.joist.sim.isSettingPhetioStateProperty.value){var e=Fd.createRectangleMapping(r.sourceFramePanBoundsProperty.get(),r._panBounds),t=r._targetNode.matrix.translation.componentMultiply(e.matrix.getScaleVector()),n=r.matrixProperty.get().getScaleVector();r.matrixProperty.set(oi.translationFromVector(t).timesMatrix(oi.scaling(n.x,n.y)))}}),{phetioDependencies:[r.matrixProperty]}),r}return _createClass(n,[{key:"correctReposition",value:function(){Yd.set(this._targetNode.matrix);var e=this._targetBounds.transformed(this._targetNode.getMatrix());e.left>this._panBounds.left&&(this._targetNode.left=this._panBounds.left-(e.left-this._targetNode.left)),e.top>this._panBounds.top&&(this._targetNode.top=this._panBounds.top-(e.top-this._targetNode.top)),e.right<this._panBounds.right&&(this._targetNode.right=this._panBounds.right+(this._targetNode.right-e.right)),e.bottom<this._panBounds.bottom&&(this._targetNode.bottom=this._panBounds.bottom+(this._targetNode.bottom-e.bottom)),Yd.equals(this._targetNode.matrix)||this.matrixProperty.set(this._targetNode.matrix.copy())}},{key:"addPress",value:function(e){_get(_getPrototypeOf(n.prototype),"addPress",this).call(this,e);var t=this._targetBounds.transformed(this._targetNode.getMatrix()).equalsEpsilon(this._panBounds,1e-8);e.pointer.cursor=t?null:this._pressCursor}},{key:"reposition",value:function(){_get(_getPrototypeOf(n.prototype),"reposition",this).call(this),this.correctReposition()}},{key:"resetTransform",value:function(){Gd.prototype.resetTransform.call(this),this.correctReposition()}},{key:"setPanBounds",value:function(e){this._panBounds=e,xe.API_GENERATION||this.sourceFramePanBoundsProperty.set(this._panBounds),this.correctReposition()}},{key:"setTargetBounds",value:function(e){this._targetBounds=e,this.correctReposition()}},{key:"setTargetScale",value:function(e){this._targetScale=e}},{key:"getTargetBounds",value:function(e){return this._targetBounds}}]),n}(Gd);Cr.register("PanZoomListener",zd);var Ud=zd,Wd=new pn(0,0),jd=new pn(0,0),Xd=new pn(0,0),Qd=new jn(0,0,0,0),Kd=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),i=A({tandem:xe.REQUIRED},i),(r=t.call(this,e,i)).sourcePosition=null,r.destinationPosition=null,r.sourceScale=r.getCurrentScale(),r.destinationScale=r.getCurrentScale(),r.scaleGestureTargetPosition=null,r.discreteScales=ep(r._minScale,r._maxScale),r.middlePress=null,r._dragBounds=null,r._transformedPanBounds=r._panBounds.transformed(r._targetNode.matrix.inverted()),r._draggingInDragBounds=!1,r._attachedPointers=[],r.boundsFinite=!1;var a=null,s=null;r.gestureStartAction=new zu((function(e){e.preventDefault(),r.trackpadGestureStartScale=e.scale,r.scaleGestureTargetPosition=new pn(e.pageX,e.pageY)}),{phetioPlayback:!0,tandem:i.tandem.createTandem("gestureStartAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Action that executes whenever a gesture starts on a trackpad in macOS Safari."}),r.gestureChangeAction=new zu((function(e){e.preventDefault();var t=r.sourceScale+e.scale-r.trackpadGestureStartScale;r.setDestinationScale(t)}),{phetioPlayback:!0,tandem:i.tandem.createTandem("gestureChangeAction"),parameters:[{name:"event",phetioType:Da}],phetioEventType:ce.USER,phetioDocumentation:"Action that executes whenever a gesture changes on a trackpad in macOS Safari."}),la.safari&&!la.mobileSafari&&(a=r.handleGestureStartEvent.bind(_assertThisInitialized(r)),s=r.handleGestureChangeEvent.bind(_assertThisInitialized(r)),r.trackpadGestureStartScale=r.getCurrentScale(),window.addEventListener("gesturestart",a),window.addEventListener("gesturechange",s)),ju.keydownEmitter.addListener(r.windowKeydown.bind(_assertThisInitialized(r)));var o=function(e){e&&r.getCurrentScale()>1&&r.keepTrailInView(e.trail)};return Wc.pdomFocusProperty.link(o),r.sourceFramePanBoundsProperty.lazyLink((function(){_.hasIn(window,"phet.joist.sim")&&phet.joist.sim.isSettingPhetioStateProperty.value&&(r.initializePositions(),r.sourceScale=r.getCurrentScale(),r.setDestinationScale(r.sourceScale))}),{phetioDependencies:[r.matrixProperty]}),r.disposeAnimatedPanZoomListener=function(){a&&window.removeEventListener("gesturestart",a),s&&window.removeEventListener("gestureChange",s),Wc.pdomFocusProperty.unlink(o)},r}return _createClass(n,[{key:"step",value:function(e){this.middlePress&&this.handleMiddlePress(e),this._attachedPointers.length>0&&this.getCurrentScale()>1&&(this._attachedPointers.length>0&&(this._attachedPointers=this._attachedPointers.filter((function(e){return e.attachedListener}))),(this._draggingInDragBounds||this._attachedPointers.some((function(e){return e instanceof $h})))&&this.repositionDuringDrag()),this.animateToTargets(e)}},{key:"down",value:function(e){Ud.prototype.down.call(this,e),null!==this._dragBounds&&e.pointer.hasIntent(Xh.DRAG)&&(0===this._attachedPointers.length&&(this._draggingInDragBounds=this._dragBounds.containsPoint(e.pointer.point)),e.pointer.attachedListener&&(this._attachedPointers.includes(e.pointer)||this._attachedPointers.push(e.pointer))),"mouse"===e.pointer.type&&e.pointer.middleDown&&!this.middlePress?(this.middlePress=new $d(e.pointer,e.trail),e.pointer.cursor="all-scroll"):this.cancelMiddlePress()}},{key:"cancelMiddlePress",value:function(){this.middlePress&&(this.middlePress.pointer.cursor=null,this.middlePress=null,this.stopInProgressAnimation())}},{key:"movePress",value:function(e){this.middlePress||Ud.prototype.movePress.call(this,e)}},{key:"move",value:function(e){if(this._attachedPointers.length>0&&this.getCurrentScale()>1)if(this._draggingInDragBounds){if(!this._attachedPointers.includes(e.pointer)){var t=this.hasDragIntent(e.pointer);null!==e.currentTarget&&t&&e.pointer.attachedListener&&this._attachedPointers.push(e.pointer)}}else this._draggingInDragBounds=this._dragBounds.containsPoint(e.pointer.point)}},{key:"getGlobalBoundsToViewDuringDrag",value:function(){var e=null;if(this._attachedPointers.length>0){var t=this._attachedPointers[0].attachedListener;if(t.createPanTargetBounds)e=t.createPanTargetBounds();else if(t.listener instanceof vd||t.listener instanceof sp){var n=t.listener;if(n.isPressed){var i=n.getCurrentTarget();1===i.instances.length&&(e=i.instances[0].trail.parentToGlobalBounds(i.visibleBounds))}}}return e}},{key:"repositionDuringDrag",value:function(){var e=this.getGlobalBoundsToViewDuringDrag();e&&this.keepBoundsInView(e,this._attachedPointers.some((function(e){return e instanceof $h})))}},{key:"cancelPanningDuringDrag",value:function(e){if(e){var t=this._attachedPointers.indexOf(e.pointer);t>-1&&this._attachedPointers.splice(t,1)}else this._attachedPointers=[];this._draggingInDragBounds=!1}},{key:"up",value:function(e){this.cancelPanningDuringDrag(e)}},{key:"wheel",value:function(e){if(!this.middlePress){var t=new Zd(e,this._targetScale);this.repositionFromWheel(t,e)}}},{key:"windowKeydown",value:function(e){if(this.cancelMiddlePress(),(!phet.joist.display._accessible||!phet.joist.display.pdomRootElement.contains(e.target))&&(this.handleZoomCommands(e),xa.isArrowKey(e))){var t=new Jd(ju,this.getCurrentScale(),this._targetScale);this.repositionFromKeys(t)}}},{key:"keydown",value:function(e){var t=e.domEvent;this.cancelMiddlePress(),this.handleZoomCommands(t);var n=e.pointer.hasIntent(Xh.KEYBOARD_DRAG);if(xa.isArrowKey(t)&&!n){var i=new Jd(ju,this.getCurrentScale(),this._targetScale);this.repositionFromKeys(i)}xa.isMovementKey(t)&&n&&e.pointer.isAttached()&&(this._attachedPointers.includes(e.pointer)||this._attachedPointers.push(e.pointer))}},{key:"handleZoomCommands",value:function(e){var t=hh.isZoomCommand(e,!0),n=hh.isZoomCommand(e,!1);if(t||n){e.preventDefault();var i=this.getNextDiscreteScale(t),r=new Jd(ju,i,this._targetScale);this.repositionFromKeys(r)}else hh.isZoomResetCommand(e)&&(e.preventDefault(),this.resetTransform())}},{key:"handleGestureStartEvent",value:function(e){this.gestureStartAction.execute(e)}},{key:"handleGestureChangeEvent",value:function(e){this.gestureChangeAction.execute(e)}},{key:"handleMiddlePress",value:function(e){if(e>0){var t=this.middlePress.pointer.point.minus(this.middlePress.initialPoint),n=t.magnitude/100;n>0&&(t.setMagnitude(Math.min(n/e,150*this._targetScale)),this.setDestinationPosition(this.sourcePosition.plus(t)))}}},{key:"translateScaleToTarget",value:function(e,t){var n=this._targetNode.globalToLocalPoint(e),i=this._targetNode.globalToParentPoint(e),r=oi.translation(-n.x,-n.y),a=oi.translation(i.x,i.y),s=this.limitScale(this.getCurrentScale()+t),o=a.timesMatrix(oi.scaling(s)).timesMatrix(r);this.matrixProperty.set(o),this.correctReposition()}},{key:"setTranslationScaleToTarget",value:function(e,t){var n=this._targetNode.globalToLocalPoint(e),i=this._targetNode.globalToParentPoint(e),r=oi.translation(-n.x,-n.y),a=oi.translation(i.x,i.y),s=this.limitScale(t),o=a.timesMatrix(oi.scaling(s)).timesMatrix(r);this.matrixProperty.set(o),this.correctReposition()}},{key:"translateDelta",value:function(e){var t=this._targetNode.globalToParentPoint(this._panBounds.center),n=t.plus(e);this.translateToTarget(n,t)}},{key:"translateToTarget",value:function(e,t){var n=this._targetNode.globalToParentPoint(e),i=this._targetNode.globalToParentPoint(t).minus(n);this.matrixProperty.set(oi.translationFromVector(i).timesMatrix(this._targetNode.getMatrix())),this.correctReposition()}},{key:"repositionFromKeys",value:function(e){var t=e.scale;t!==this.getCurrentScale()?(this.setDestinationScale(t),this.scaleGestureTargetPosition=e.computeScaleTargetFromKeyPress()):e.translationVector.equals(pn.ZERO)||this.setDestinationPosition(this.sourcePosition.plus(e.translationVector)),this.correctReposition()}},{key:"repositionFromWheel",value:function(e,t){if(t.domEvent.preventDefault(),e.isCtrlKeyDown){var n=this.limitScale(this.getCurrentScale()+e.scaleDelta);this.scaleGestureTargetPosition=e.targetPoint,this.setDestinationScale(n)}else this.setDestinationPosition(this.sourcePosition.plus(e.translationVector));this.correctReposition()}},{key:"correctReposition",value:function(){_get(_getPrototypeOf(n.prototype),"correctReposition",this).call(this),this._panBounds.isFinite()&&(this._transformedPanBounds=this._panBounds.transformed(this._targetNode.matrix.inverted()),this.sourcePosition=this._transformedPanBounds.center,this.sourceScale=this.getCurrentScale())}},{key:"addPress",value:function(e){_get(_getPrototypeOf(n.prototype),"addPress",this).call(this,e),this.stopInProgressAnimation()}},{key:"removePress",value:function(e){_get(_getPrototypeOf(n.prototype),"removePress",this).call(this,e),this.middlePress&&(e.pointer.cursor="all-scroll"),0===this._presses.length&&this.stopInProgressAnimation()}},{key:"interrupt",value:function(){this.cancelPanningDuringDrag(),this.cancelMiddlePress(),_get(_getPrototypeOf(n.prototype),"interrupt",this).call(this)}},{key:"cancel",value:function(){this.interrupt()}},{key:"hasDragIntent",value:function(e){return e.hasIntent(Xh.KEYBOARD_DRAG)||e.hasIntent(Xh.DRAG)}},{key:"panToNode",value:function(e){this.keepBoundsInView(e.globalBounds,!0)}},{key:"keepBoundsInView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._targetNode.globalToLocalBounds(e),i=new pn(0,0),r=0,a=0,s=0,o=0;t?(r=this._transformedPanBounds.centerX-n.centerX,a=this._transformedPanBounds.centerX-n.centerX,s=this._transformedPanBounds.centerY-n.centerY,o=this._transformedPanBounds.centerY-n.centerY):n.width<this._transformedPanBounds.width&&n.height<this._transformedPanBounds.height&&(r=this._transformedPanBounds.left-n.left,a=this._transformedPanBounds.right-n.right,s=this._transformedPanBounds.top-n.top,o=this._transformedPanBounds.bottom-n.bottom),o<0&&(i.y=-o),s>0&&(i.y=-s),a<0&&(i.x=-a),r>0&&(i.x=-r),this.setDestinationPosition(this.sourcePosition.plus(i))}},{key:"keepTrailInView",value:function(e){if(this._panBounds.isFinite()&&e.lastNode().bounds.isFinite()){var t=e.localToGlobalBounds(e.lastNode().localBounds);this._panBounds.containsBounds(t)||this.keepBoundsInView(t,!0)}}},{key:"animateToTargets",value:function(e){var t=!this.destinationPosition.equalsEpsilon(this.sourcePosition,.1),n=!En.equalsEpsilon(this.sourceScale,this.destinationScale,.001);if(0===this._presses.length||null!==this.middlePress){if(t){var i=this.destinationPosition.minus(this.sourcePosition),r=i;0!==i.magnitude&&(r=i.normalized());var a=this.getTranslationSpeed(i.magnitude);Xd.setXY(a,a);var s=Xd.multiplyScalar(e),o=r.componentTimes(s);o.magnitude>i.magnitude&&o.set(i),this.translateDelta(o)}if(n){var l=this.destinationScale-this.sourceScale,u=l*e*6;Math.abs(u)>Math.abs(l)&&(u=l),this.translateScaleToTarget(this.scaleGestureTargetPosition,u),this.setDestinationPosition(this.sourcePosition)}else this.destinationScale!==this.sourceScale&&(this.setTranslationScaleToTarget(this.scaleGestureTargetPosition,this.destinationScale),this.setDestinationPosition(this.sourcePosition))}}},{key:"stopInProgressAnimation",value:function(){this.boundsFinite&&(this.setDestinationScale(this.sourceScale),this.setDestinationPosition(this.sourcePosition))}},{key:"initializePositions",value:function(){this.boundsFinite=this._transformedPanBounds.isFinite(),this.boundsFinite?(this.sourcePosition=this._transformedPanBounds.center,this.setDestinationPosition(this.sourcePosition)):(this.sourcePosition=null,this.destinationPosition=null)}},{key:"setPanBounds",value:function(e){_get(_getPrototypeOf(n.prototype),"setPanBounds",this).call(this,e),this.initializePositions(),this._dragBounds=e.erodedXY(.1*e.width,.1*e.height)}},{key:"setTargetBounds",value:function(e){_get(_getPrototypeOf(n.prototype),"setTargetBounds",this).call(this,e),this.initializePositions()}},{key:"setDestinationPosition",value:function(e){Qd.setMinMax(this.sourcePosition.x-this._transformedPanBounds.left-this._panBounds.left,this.sourcePosition.y-this._transformedPanBounds.top-this._panBounds.top,this.sourcePosition.x+this._panBounds.right-this._transformedPanBounds.right,this.sourcePosition.y+this._panBounds.bottom-this._transformedPanBounds.bottom),this.destinationPosition=Qd.closestPointTo(e)}},{key:"setDestinationScale",value:function(e){this.destinationScale=this.limitScale(e)}},{key:"getTranslationSpeed",value:function(e){var t=e*this.getCurrentScale(),n=t*(1/(Math.pow(t,2)-Math.pow(5,2))+5);return Math.min(Math.abs(n),1e3*this.getCurrentScale())}},{key:"resetTransform",value:function(){_get(_getPrototypeOf(n.prototype),"resetTransform",this).call(this),this.stopInProgressAnimation()}},{key:"getNextDiscreteScale",value:function(e){for(var t,n=this.getCurrentScale(),i=Number.POSITIVE_INFINITY,r=0;r<this.discreteScales.length;r++){var a=Math.abs(this.discreteScales[r]-n);a<i&&(i=a,t=r)}var s=e?t+1:t-1;return s=En.clamp(s,0,this.discreteScales.length-1),this.discreteScales[s]}},{key:"dispose",value:function(){this.disposeAnimatedPanZoomListener()}}]),n}(Ud),Jd=function(){function e(t,n,i,r){_classCallCheck(this,e),r=A({translationMagnitude:80},r);var a=0;a+=t.isKeyDown(xa.KEY_RIGHT_ARROW),a-=t.isKeyDown(xa.KEY_LEFT_ARROW);var s=0;if(s+=t.isKeyDown(xa.KEY_DOWN_ARROW),s-=t.isKeyDown(xa.KEY_UP_ARROW),Wd.setXY(a,s),!Wd.equals(pn.ZERO)){var o=r.translationMagnitude*i;Wd.setMagnitude(o)}this.translationVector=Wd,this.scale=n}return _createClass(e,[{key:"computeScaleTargetFromKeyPress",value:function(){if(jd.setXY(0,0),Wc.pdomFocusProperty.value){var e=Wc.pdomFocusProperty.value.trail,t=e.lastNode();t.bounds.isFinite()&&jd.set(e.parentToGlobalPoint(t.center))}else{var n=Gs.getNextFocusable();if(n!==document.body){var i=n.offsetLeft+n.offsetWidth/2,r=n.offsetTop+n.offsetHeight/2;jd.setXY(i,r)}}return jd}}]),e}(),Zd=_createClass((function e(t,n){_classCallCheck(this,e);var i=t.domEvent;this.isCtrlKeyDown=t.domEvent.ctrlKey,this.scaleDelta=i.deltaY>0?-.5:.5,this.targetPoint=t.pointer.point;var r=.5*i.deltaX,a=.5*i.deltaY;i.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(r*=25,a*=25),this.translationVector=Wd.setXY(r*n,a*n)})),$d=_createClass((function e(t,n){_classCallCheck(this,e),this.pointer=t,this.trail=n,this.initialPoint=t.point.copy()})),ep=function(e,t){for(var n=[],i=0;i<8;i++)n[i]=(t-e)/8*(i*i);for(var r=n[7],a=0;a<n.length;a++)n[a]=e+n[a]*(t-e)/r;return n};Cr.register("AnimatedPanZoomListener",Kd);var tp=Kd,np=new(function(){function e(){_classCallCheck(this,e),this._listener=null}return _createClass(e,[{key:"initialize",value:function(e,t){this._listener=new tp(e,t)}},{key:"dispose",value:function(){this._listener.dispose(),this._listener=null}},{key:"listener",get:function(){return this._listener}},{key:"initialized",get:function(){return!!this._listener}}]),e}());Cr.register("animatedPanZoomSingleton",np);var ip=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"down",value:function(e){e.handle()}}]),e}();Cr.register("HandleDownlistener",ip);var rp=new Map([["both",{left:[xa.KEY_A,xa.KEY_LEFT_ARROW],right:[xa.KEY_RIGHT_ARROW,xa.KEY_D],up:[xa.KEY_UP_ARROW,xa.KEY_W],down:[xa.KEY_DOWN_ARROW,xa.KEY_S]}],["leftRight",{left:[xa.KEY_A,xa.KEY_LEFT_ARROW,xa.KEY_DOWN_ARROW,xa.KEY_S],right:[xa.KEY_RIGHT_ARROW,xa.KEY_D,xa.KEY_UP_ARROW,xa.KEY_W],up:[],down:[]}],["upDown",{left:[],right:[],up:[xa.KEY_RIGHT_ARROW,xa.KEY_D,xa.KEY_UP_ARROW,xa.KEY_W],down:[xa.KEY_A,xa.KEY_LEFT_ARROW,xa.KEY_DOWN_ARROW,xa.KEY_S]}]]),ap=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({dragDelta:10,shiftDragDelta:5,dragVelocity:0,shiftDragVelocity:0,keyboardDragDirection:"both",positionProperty:null,transform:null,dragBoundsProperty:null,start:null,drag:null,end:null,moveOnHoldDelay:0,moveOnHoldInterval:0,hotkeyHoldInterval:800,phetioEnabledPropertyInstrumented:!1,tandem:xe.REQUIRED,phetioReadOnly:!0},e);(i=t.call(this,r))._start=r.start,i._drag=r.drag,i._end=r.end,i._dragBoundsProperty=r.dragBoundsProperty||new dt(null),i._transform=r.transform,i._positionProperty=r.positionProperty,i._dragVelocity=r.dragVelocity,i._shiftDragVelocity=r.shiftDragVelocity,i._dragDelta=r.dragDelta,i._shiftDragDelta=r.shiftDragDelta,i._moveOnHoldDelay=r.moveOnHoldDelay,i._moveOnHoldInterval=r.moveOnHoldInterval,i._hotkeyHoldInterval=r.hotkeyHoldInterval,i._keyboardDragDirection=r.keyboardDragDirection,i.keyState=[],i._hotkeys=[],i.currentHotkey=null,i.hotkeyDisablingDragging=!1,i.hotkeyHoldIntervalCounter=i._hotkeyHoldInterval,i.useDragVelocity=r.dragVelocity>0||r.shiftDragVelocity>0,i.moveOnHoldDelayCounter=0,i.moveOnHoldIntervalCounter=0,i.delayComplete=!1,i.dragStartAction=new zu((function(e){var t=xa.getEventCode(e.domEvent);if(!i.movementKeysDown&&xa.isMovementKey(e.domEvent)&&(i._pointer=e.pointer,e.pointer.addInputListener(i._pointerListener,!0)),i.keyState.push({keyDown:!0,key:t,timeDown:0}),i._start&&i.movementKeysDown&&i._start(e),!i.useDragVelocity){var n=i.shiftKeyDown()?i._shiftDragDelta:i._dragDelta;i.updatePosition(n)}}),{parameters:[{name:"event",phetioType:ed.SceneryEventIO}],tandem:r.tandem.createTandem("dragStartAction"),phetioDocumentation:"Emits whenever a keyboard drag starts.",phetioReadOnly:r.phetioReadOnly,phetioEventType:ce.USER}),i.dragEmitter=new Et({tandem:r.tandem.createTandem("dragEmitter"),phetioHighFrequency:!0,phetioDocumentation:"Emits whenever a keyboard drag occurs.",phetioReadOnly:r.phetioReadOnly,phetioEventType:ce.USER}),i.dragEndAction=new zu((function(e){i.movementKeysDown||(i._pointer.removeInputListener(i._pointerListener),i._pointer=null),i._end&&i._end(e)}),{parameters:[{name:"event",phetioType:ed.SceneryEventIO}],tandem:r.tandem.createTandem("dragEndAction"),phetioDocumentation:"Emits whenever a keyboard drag ends.",phetioReadOnly:r.phetioReadOnly,phetioEventType:ce.USER});var a=i.step.bind(_assertThisInitialized(i));return mt.addListener(a),i.enabledProperty.lazyLink(i.onEnabledPropertyChange.bind(_assertThisInitialized(i))),i._pointerListener={listener:_assertThisInitialized(i),interrupt:i.interrupt.bind(_assertThisInitialized(i))},i._pointer=null,i._disposeKeyboardDragListener=function(){mt.removeListener(a)},i}return _createClass(n,[{key:"getDragBounds",value:function(){return this._dragBoundsProperty.value}},{key:"dragBounds",get:function(){return this.getDragBounds()}},{key:"setTransform",value:function(e){this._transform=e}},{key:"transform",get:function(){return this.getTransform()},set:function(e){this.setTransform(e)}},{key:"getTransform",value:function(){return this._transform}},{key:"dragVelocity",get:function(){return this._dragVelocity},set:function(e){this._dragVelocity=e}},{key:"shiftDragVelocity",get:function(){return this._shiftDragVelocity},set:function(e){this._shiftDragVelocity=e}},{key:"dragDelta",get:function(){return this._dragDelta},set:function(e){this._dragDelta=e}},{key:"shiftDragDelta",get:function(){return this._shiftDragDelta},set:function(e){this._shiftDragDelta=e}},{key:"moveOnHoldDelay",get:function(){return this._moveOnHoldDelay},set:function(e){this._moveOnHoldDelay=e}},{key:"moveOnHoldInterval",get:function(){return this._moveOnHoldInterval},set:function(e){this._moveOnHoldInterval=e}},{key:"hotkeyHoldInterval",get:function(){return this._hotkeyHoldInterval},set:function(e){this._hotkeyHoldInterval=e}},{key:"isPressed",get:function(){return!!this._pointer}},{key:"getCurrentTarget",value:function(){return this._pointer.trail.lastNode()}},{key:"onEnabledPropertyChange",value:function(e){!e&&this.interrupt()}},{key:"keydown",value:function(e){var t=e.domEvent,n=xa.getEventCode(t);t.metaKey||(xa.isMovementKey(t)&&t.preventDefault(),e.pointer.reserveForKeyboardDrag(),this.keyInListDown([n])||(la.safari&&xa.isArrowKey(t)&&this.keyInListDown([xa.KEY_RIGHT_ARROW,xa.KEY_LEFT_ARROW,xa.KEY_UP_ARROW,xa.KEY_DOWN_ARROW])?this.interrupt():this.canDrag()&&this.dragStartAction.execute(e)))}},{key:"keyup",value:function(e){var t=e.domEvent,n=xa.getEventCode(t),i=this.movementKeysDown;n===xa.KEY_TAB&&t.shiftKey&&this.keyState.push({keyDown:!0,key:xa.KEY_SHIFT_LEFT,timeDown:0});for(var r=0;r<this.keyState.length;r++)n===this.keyState[r].key&&this.keyState.splice(r,1);var a=this.movementKeysDown;a||i===a||this.dragEndAction.execute(e),this.currentHotkey&&!this.allKeysInListDown(this.currentHotkey.keys)&&this.resetHotkeyState(),this.resetPressAndHold()}},{key:"focusout",value:function(e){this.interrupt()}},{key:"step",value:function(e){var t=1e3*e;if(this.keyState.length>0){for(var n=0;n<this.keyState.length;n++)this.keyState[n].keyDown&&(this.keyState[n].timeDown+=t);this.movementKeysDown&&(this.moveOnHoldDelayCounter+=t,this.moveOnHoldIntervalCounter+=t),this.currentHotkey&&(this.hotkeyHoldIntervalCounter+=t);var i=0;if(this.useDragVelocity){i=t*((this.shiftKeyDown()?this._shiftDragVelocity:this._dragVelocity)/1e3)}else{var r=!1;this.moveOnHoldDelayCounter>=this._moveOnHoldDelay&&!this.delayComplete&&(r=!0,this.delayComplete=!0),this.delayComplete&&this.moveOnHoldIntervalCounter>=this._moveOnHoldInterval&&(r=!0),i=r?this.shiftKeyDown()?this._shiftDragDelta:this._dragDelta:0}i>0&&this.updatePosition(i)}}},{key:"canDrag",value:function(){return this.enabledProperty.value}},{key:"updateHotkeys",value:function(){for(var e=0;e<this._hotkeys.length;e++){for(var t=[],n=this._hotkeys[e].keys,i=0;i<n.length;i++)for(var r=0;r<this.keyState.length;r++)this.keyState[r].key===n[i]&&t.push(this.keyState[r]);for(var a=1===t.length&&1===n.length,s=0;s<t.length-1;s++)t[s+1]&&t[s].timeDown>t[s+1].timeDown&&(a=!0);a&&(this.currentHotkey=this._hotkeys[e],this.hotkeyHoldIntervalCounter>=this._hotkeyHoldInterval&&(this.hotkeyHoldIntervalCounter=0,this._hotkeys[e].callback()))}this.currentHotkey&&(this.keyInListDown(this.currentHotkey.keys)?this.hotkeyDisablingDragging=!0:(this.hotkeyDisablingDragging=!1,this.currentHotkey=null))}},{key:"updatePosition",value:function(e){if(this.updateHotkeys(),!this.hotkeyDisablingDragging){var t=0,n=0;this.leftMovementKeysDown()?t=-e:this.rightMovementKeysDown()&&(t=e),this.upMovementKeysDown()?n=-e:this.downMovementKeysDown()&&(n=e);var i=new pn(t,n);if(!i.equals(pn.ZERO)){if(this._transform&&(i=this._transform.inverseDelta2(i)),this._positionProperty){var r=this._positionProperty.get().plus(i),a=this._dragBoundsProperty.value;a&&(r=a.closestPointTo(r)),r.equals(this._positionProperty.get())||this._positionProperty.set(r)}this._drag&&this._drag(i),this.dragEmitter.emit()}}this.moveOnHoldIntervalCounter=0}},{key:"keyInListDown",value:function(e){for(var t=!1,n=0;n<this.keyState.length;n++){if(this.keyState[n].keyDown)for(var i=0;i<e.length;i++)if(e[i]===this.keyState[n].key){t=!0;break}if(t)break}return t}},{key:"allKeysInListDown",value:function(e){for(var t=this,n=!0,i=function(i){var r=_.find(t.keyState,(function(t){return t.key===e[i]}));if(!r||!r.keyDown)return n=!1,"break"},r=0;r<e.length;r++){if("break"===i(r))break}return n}},{key:"getKeyboardDragDirectionKeys",value:function(){var e=rp.get(this._keyboardDragDirection);return e}},{key:"leftMovementKeysDown",value:function(){return this.keyInListDown(this.getKeyboardDragDirectionKeys().left)}},{key:"rightMovementKeysDown",value:function(){return this.keyInListDown(this.getKeyboardDragDirectionKeys().right)}},{key:"upMovementKeysDown",value:function(){return this.keyInListDown(this.getKeyboardDragDirectionKeys().up)}},{key:"downMovementKeysDown",value:function(){return this.keyInListDown(this.getKeyboardDragDirectionKeys().down)}},{key:"getMovementKeysDown",value:function(){return this.rightMovementKeysDown()||this.leftMovementKeysDown()||this.upMovementKeysDown()||this.downMovementKeysDown()}},{key:"movementKeysDown",get:function(){return this.getMovementKeysDown()}},{key:"enterKeyDown",value:function(){return this.keyInListDown([xa.KEY_ENTER])}},{key:"shiftKeyDown",value:function(){return this.keyInListDown(xa.SHIFT_KEYS)}},{key:"addHotkey",value:function(e){this._hotkeys.push(e)}},{key:"removeHotkey",value:function(e){var t=this._hotkeys.indexOf(e);this._hotkeys.splice(t,1)}},{key:"setHotkeys",value:function(e){this._hotkeys=e.slice(0)}},{key:"hotkeys",set:function(e){this.setHotkeys(e)}},{key:"removeAllHotkeys",value:function(){this._hotkeys=[]}},{key:"resetPressAndHold",value:function(){this.delayComplete=!1,this.moveOnHoldDelayCounter=0,this.moveOnHoldIntervalCounter=0}},{key:"resetHotkeyState",value:function(){this.currentHotkey=null,this.hotkeyHoldIntervalCounter=this._hotkeyHoldInterval,this.hotkeyDisablingDragging=!1}},{key:"interrupt",value:function(){this.keyState=[],this.resetHotkeyState(),this.resetPressAndHold(),this._pointer&&(this._pointer.removeInputListener(this._pointerListener),this._pointer=null)}},{key:"dispose",value:function(){this.interrupt(),this._disposeKeyboardDragListener()}}],[{key:"isLeftMovementKey",value:function(e){return e===xa.KEY_A||e===xa.KEY_LEFT_ARROW}},{key:"isRightMovementKey",value:function(e){return e===xa.KEY_D||e===xa.KEY_RIGHT_ARROW}},{key:"isUpMovementKey",value:function(e){return e===xa.KEY_W||e===xa.KEY_UP_ARROW}},{key:"isDownMovementKey",value:function(e){return e===xa.KEY_S||e===xa.KEY_DOWN_ARROW}}]),n}(ec);Cr.register("KeyboardDragListener",ap);var sp=ap,op=function(){function e(t){_classCallCheck(this,e);var n=S()({callback:_.noop,fireOnKeyUp:!1,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100},t);this._callback=n.callback,this._fireOnKeyUp=n.fireOnKeyUp,this._keyGroups=this.convertKeysToKeyGroups(n.keys),this._fireOnHold=n.fireOnHold,this._fireOnHoldDelay=n.fireOnHoldDelay,this._fireOnHoldInterval=n.fireOnHoldInterval,this._activeKeyGroups=[]}return _createClass(e,[{key:"fireCallback",value:function(e,t){this._callback(e,t)}},{key:"keydown",value:function(e){var t=this;this._fireOnKeyUp||this._keyGroups.forEach((function(n){t._activeKeyGroups.includes(n)||ju.areKeysDown(n.allKeys)&&ju.getLastKeyDown()===n.key&&(t._activeKeyGroups.push(n),n.timer&&n.timer.start(),t.fireCallback(e,n.naturalKeys))}))}},{key:"keyup",value:function(e){var t=this;this._activeKeyGroups.length>0&&this._activeKeyGroups.forEach((function(e,n){ju.areKeysDown(e.allKeys)||(e.timer&&e.timer.stop(!1),t._activeKeyGroups.splice(n,1))})),this._fireOnKeyUp&&this._keyGroups.forEach((function(n){ju.areKeysDown(n.modifierKeys)&&xa.getEventCode(e.domEvent)===n.key&&t.fireCallback(e,n.naturalKeys)}))}},{key:"cancel",value:function(){this.clearActiveKeyGroups()}},{key:"interrupt",value:function(){this.clearActiveKeyGroups()}},{key:"dispose",value:function(){this._keyGroups.forEach((function(e){e.timer&&e.timer.dispose()})),this._keyGroups.length=0}},{key:"clearActiveKeyGroups",value:function(){this._activeKeyGroups.forEach((function(e){e.timer&&e.timer.stop(!1)})),this._activeKeyGroups.length=0}},{key:"convertKeysToKeyGroups",value:function(e){var t=this;return e.map((function(e){var n=e.split("+"),i=n.slice(-1)[0],r=Ta[i],a=[];n.length>1&&(a=n.slice(0,n.length-1).map((function(e){var t=Ta[e];return t})));var s=t._fireOnHold?new gt({callback:function(){t.fireCallback(null,e)},delay:t._fireOnHoldDelay,interval:t._fireOnHoldInterval}):null;return{key:r,modifierKeys:a,naturalKeys:e,allKeys:a.concat(r),timer:s}}))}}]),e}();Cr.register("KeyboardListener",op);var lp=function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).spriteInstance=null,e}return _createClass(n,[{key:"press",value:function(e,t,i){if(this.isPressed)return!1;if(this.spriteInstance=null,e.currentTarget instanceof ru){var r=e.currentTarget;this.spriteInstance=r.getSpriteInstanceFromPoint(r.globalToLocalPoint(e.pointer.point))}return!!this.spriteInstance&&_get(_getPrototypeOf(n.prototype),"press",this).call(this,e,t,i)}}]),n}(e)};Cr.register("SpriteListenable",lp);var up=function(){function e(t){var n=this;_classCallCheck(this,e),this._pointer=null,this.downPoint=null,this.downEvent=null,this.enabled=!1,this.lastPoint=null,this.currentPoint=null,this.velocity=null,this.swipeDistance=null,this.firstUp=!1,this.timeSinceLastDown=0,this.downPointers=[],this.holdingTime=0,this.focusedNode=null,this.handleEventListener={down:function(e){e.handle(),e.abort(),n.handleDown(e)}},t.pointerAddedEmitter.addListener((function(e){n.enabled&&e.addInputListener(n.handleEventListener,!0)})),this._attachedPointerListener={up:function(e){n.focusedNode&&n.focusedNode.swipeEnd&&n.focusedNode.swipeEnd.bind(n.focusedNode)(e,n),n.focusedNode=null,n._pointer.removeInputListener(n._attachedPointerListener),n._pointer=null},move:function(e){n.focusedNode&&n.focusedNode.swipeMove&&n.focusedNode.swipeMove.bind(n.focusedNode)(e,n)},interrupt:function(e){n.focusedNode=null,n._pointer.removeInputListener(n._attachedPointerListener),n._pointer=null},cancel:function(e){n.focusedNode=null,n._pointer.removeInputListener(n._attachedPointerListener),n._pointer=null}},this._pointerListener={up:function(e){n.endSwipe(),n._pointer=null,n.swipeDistance=e.pointer.point.minus(n.downPoint);var t=n.swipeDistance.y,i=n.swipeDistance.x;if(Math.abs(i)>100&&Math.abs(t)<100)if(i>0){if(Wc.pdomFocusedNode&&"Reset All"===Wc.pdomFocusedNode.innerContent)return;Gs.getNextFocusable(document.body).focus()}else Gs.getPreviousFocusable(document.body).focus();else if(n.firstUp){if(n.timeSinceLastDown<.6){n.firstUp=!1,n.timeSinceLastDown=0;var r=document.getElementsByClassName("a11y-pdom-root")[0];r&&r.contains(document.activeElement)&&document.activeElement.click()}}else n.firstUp=!0},move:function(e){n.lastPoint=n.currentPoint,n.currentPoint=e.pointer.point},interrupt:function(){n.interrupt()},cancel:function(){n.interrupt()}},mt.addListener(this.step.bind(this))}return _createClass(e,[{key:"handleDown",value:function(e){e.pointer.addIntent(Xh.DRAG),this.downPointers.push(e.pointer),this.downPointers.length>1&&(this.downPointers.forEach((function(e){return e.removeIntent(Xh.DRAG)})),e.pointer.removeIntent(Xh.DRAG)),e.pointer.removeInputListener(this.handleEventListener),null===this._pointer&&"touch"===e.pointer.type&&(this._pointer=e.pointer,e.pointer.addInputListener(this._pointerListener,!0),e.abort(),this.downEvent=e,this.downPoint=e.pointer.point,this.currentPoint=this.downPoint.copy(),this.previousPoint=this.currentPoint.copy())}},{key:"up",value:function(e){var t=this.downPointers.indexOf(e.pointer);t>-1&&this.downPointers.splice(t,1)}},{key:"step",value:function(e){if(this.firstUp&&(this.timeSinceLastDown+=e,this.timeSinceLastDown>.6&&(this.firstUp=!1,this.timeSinceLastDown=0)),this._pointer&&!this._pointer.listeners.includes(this._attachedPointerListener))if(this.holdingTime>.75){var t=Wc.pdomFocusedNode;t&&(this._pointer.removeInputListener(this._pointerListener),this.holdingTime=0,this.focusedNode=t,this._pointer.addInputListener(this._attachedPointerListener,!0),this.focusedNode.swipeStart&&this.focusedNode.swipeStart(this.downEvent,this),this.downEvent=null)}else this.holdingTime+=e;null!==this.lastPoint&&null!==this.currentPoint&&(this.velocity=this.lastPoint.minus(this.currentPoint).dividedScalar(e))}},{key:"endSwipe",value:function(){this.holdingTime=0,this._pointer&&this._pointer.listeners.includes(this._pointerListener)&&this._pointer.removeInputListener(this._pointerListener)}},{key:"detachPointerListener",value:function(){this._pointer.detach(this._attachedPointerListener)}},{key:"interrupt",value:function(){this.endSwipe(),this._pointer=null,this.downEvent=null}}]),e}();Cr.register("SwipeListener",up);var cp=["left","right","center","origin"],hp=["top","bottom","center","origin"],dp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,n),(r=t.call(this)).horizontal=e,r.vertical=i,r.padRatio=a,r}return _createClass(n,null,[{key:"getAllowedAligns",value:function(e){return[].concat(_toConsumableArray(e===In.HORIZONTAL?cp:hp),[null])}},{key:"alignToInternal",value:function(e,t){return e===In.HORIZONTAL?n.horizontalAlignToInternal(t):n.verticalAlignToInternal(t)}},{key:"horizontalAlignToInternal",value:function(e){return null===e?null:pp[e]}},{key:"verticalAlignToInternal",value:function(e){return null===e?null:fp[e]}},{key:"internalToAlign",value:function(e,t){return null===t?null:e===In.HORIZONTAL?t.horizontal:t.vertical}}]),n}(ee);_defineProperty(dp,"START",new dp("left","top",0)),_defineProperty(dp,"END",new dp("right","bottom",1)),_defineProperty(dp,"CENTER",new dp("center","center",.5)),_defineProperty(dp,"ORIGIN",new dp("origin","origin")),_defineProperty(dp,"enumeration",new re(dp,{phetioDocumentation:"Alignment for layout containers"}));var pp={left:dp.START,right:dp.END,center:dp.CENTER,origin:dp.ORIGIN},fp={top:dp.START,bottom:dp.END,center:dp.CENTER,origin:dp.ORIGIN};Cr.register("LayoutAlign",dp);var mp=["left","right","center","spaceBetween","spaceAround","spaceEvenly"],gp=["top","bottom","center","spaceBetween","spaceAround","spaceEvenly"],yp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this)).spacingFunctionFactory=e,a.horizontal=i,a.vertical=r,a}return _createClass(n,null,[{key:"getAllowedJustificationValues",value:function(e){return e===In.HORIZONTAL?mp:gp}},{key:"justifyToInternal",value:function(e,t){return e===In.HORIZONTAL?vp[t]:Ap[t]}},{key:"internalToJustify",value:function(e,t){return e===In.HORIZONTAL?t.horizontal:t.vertical}}]),n}(ee);_defineProperty(yp,"START",new yp((function(){return function(){return 0}}),"left","top")),_defineProperty(yp,"END",new yp((function(e){return function(t){return 0===t?e:0}}),"right","bottom")),_defineProperty(yp,"CENTER",new yp((function(e){return function(t){return 0===t?e/2:0}}),"center","center")),_defineProperty(yp,"SPACE_BETWEEN",new yp((function(e,t){return function(n){return 0!==n?e/(t-1):0}}),"spaceBetween","spaceBetween")),_defineProperty(yp,"SPACE_AROUND",new yp((function(e,t){return function(n){return(0!==n?2:1)*e/(2*t)}}),"spaceAround","spaceAround")),_defineProperty(yp,"SPACE_EVENLY",new yp((function(e,t){return function(n){return e/(t+1)}}),"spaceEvenly","spaceEvenly")),_defineProperty(yp,"enumeration",new re(yp,{phetioDocumentation:"Justify for layout containers"}));var vp={left:yp.START,right:yp.END,center:yp.CENTER,spaceBetween:yp.SPACE_BETWEEN,spaceAround:yp.SPACE_AROUND,spaceEvenly:yp.SPACE_EVENLY},Ap={top:yp.START,bottom:yp.END,center:yp.CENTER,spaceBetween:yp.SPACE_BETWEEN,spaceAround:yp.SPACE_AROUND,spaceEvenly:yp.SPACE_EVENLY};Cr.register("LayoutJustification",yp);var bp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,S()({layoutOptions:{stretch:!0,isSeparator:!0},stroke:"rgb(100,100,100)"},e))}return _createClass(n)}(tu);Cr.register("Separator",bp);var Sp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).localPreferredHeightProperty.link((function(e){null!==e&&(i.y2=e)})),i.mutate(e),i}return _createClass(n)}(fl(bp));Cr.register("VSeparator",Sp);var Ep=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).localPreferredWidthProperty.link((function(e){null!==e&&(i.x2=e)})),i.mutate(e),i}return _createClass(n)}(ul(bp));Cr.register("HSeparator",Ep);var kp=function(){function e(t){_classCallCheck(this,e),this.initialize(t)}return _createClass(e,[{key:"initialize",value:function(e){this.trail=e}},{key:"checkPreconditions",value:function(){}},{key:"node",get:function(){return this.trail.lastNode()}},{key:"bounds",get:function(){return this.trail.parentToGlobalBounds(this.node.bounds)}},{key:"visibleBounds",get:function(){return this.trail.parentToGlobalBounds(this.node.visibleBounds)}},{key:"width",get:function(){return this.bounds.width}},{key:"height",get:function(){return this.bounds.height}},{key:"x",get:function(){return this.trail.getParentTransform().transformX(this.node.x)},set:function(e){this.node.x=this.trail.getParentTransform().inverseX(e)}},{key:"y",get:function(){return this.trail.getParentTransform().transformY(this.node.y)},set:function(e){this.node.y=this.trail.getParentTransform().inverseY(e)}},{key:"translation",get:function(){return this.trail.getParentTransform().transformPosition2(this.node.translation)},set:function(e){this.node.translation=this.trail.getParentTransform().inversePosition2(e)}},{key:"left",get:function(){return this.trail.getParentTransform().transformX(this.node.left)},set:function(e){this.node.left=this.trail.getParentTransform().inverseX(e)}},{key:"right",get:function(){return this.trail.getParentTransform().transformX(this.node.right)},set:function(e){this.node.right=this.trail.getParentTransform().inverseX(e)}},{key:"centerX",get:function(){return this.trail.getParentTransform().transformX(this.node.centerX)},set:function(e){this.node.centerX=this.trail.getParentTransform().inverseX(e)}},{key:"top",get:function(){return this.trail.getParentTransform().transformY(this.node.top)},set:function(e){this.node.top=this.trail.getParentTransform().inverseY(e)}},{key:"bottom",get:function(){return this.trail.getParentTransform().transformY(this.node.bottom)},set:function(e){this.node.bottom=this.trail.getParentTransform().inverseY(e)}},{key:"centerY",get:function(){return this.trail.getParentTransform().transformY(this.node.centerY)},set:function(e){this.node.centerY=this.trail.getParentTransform().inverseY(e)}},{key:"leftTop",get:function(){return this.trail.getParentTransform().transformPosition2(this.node.leftTop)},set:function(e){this.node.leftTop=this.trail.getParentTransform().inversePosition2(e)}},{key:"centerTop",get:function(){return this.trail.getParentTransform().transformPosition2(this.node.centerTop)},set:function(e){this.node.centerTop=this.trail.getParentTransform().inversePosition2(e)}},{key:"rightTop",get:function(){return this.trail.getParentTransform().transformPosition2(this.node.rightTop)},set:function(e){this.node.rightTop=this.trail.getParentTransform().inversePosition2(e)}},{key:"leftCenter",get:function(){return this.trail.getParentTransform().transformPosition2(this.node.leftCenter)},set:function(e){this.node.leftCenter=this.trail.getParentTransform().inversePosition2(e)}},{key:"center",get:function(){return this.trail.getParentTransform().transformPosition2(this.node.center)},set:function(e){this.node.center=this.trail.getParentTransform().inversePosition2(e)}},{key:"rightCenter",get:function(){return this.trail.getParentTransform().transformPosition2(this.node.rightCenter)},set:function(e){this.node.rightCenter=this.trail.getParentTransform().inversePosition2(e)}},{key:"leftBottom",get:function(){return this.trail.getParentTransform().transformPosition2(this.node.leftBottom)},set:function(e){this.node.leftBottom=this.trail.getParentTransform().inversePosition2(e)}},{key:"centerBottom",get:function(){return this.trail.getParentTransform().transformPosition2(this.node.centerBottom)},set:function(e){this.node.centerBottom=this.trail.getParentTransform().inversePosition2(e)}},{key:"rightBottom",get:function(){return this.trail.getParentTransform().transformPosition2(this.node.rightBottom)},set:function(e){this.node.rightBottom=this.trail.getParentTransform().inversePosition2(e)}},{key:"widthSizable",get:function(){return this.node.widthSizable}},{key:"heightSizable",get:function(){return this.node.heightSizable}},{key:"preferredWidth",get:function(){var e=this.node.preferredWidth;return null===e?null:Math.abs(this.trail.getParentTransform().transformDeltaX(e))},set:function(e){this.node.preferredWidth=null===e?null:Math.abs(this.trail.getParentTransform().inverseDeltaX(e))}},{key:"preferredHeight",get:function(){var e=this.node.preferredHeight;return null===e?null:Math.abs(this.trail.getParentTransform().transformDeltaY(e))},set:function(e){this.node.preferredHeight=null===e?null:Math.abs(this.trail.getParentTransform().inverseDeltaY(e))}},{key:"minimumWidth",get:function(){var e=ol(this.node)?this.node.minimumWidth||0:this.node.width;return Math.abs(this.trail.getParentTransform().transformDeltaX(e))}},{key:"minimumHeight",get:function(){var e=dl(this.node)?this.node.minimumHeight||0:this.node.height;return Math.abs(this.trail.getParentTransform().transformDeltaY(e))}},{key:"getMinimum",value:function(e){return e===In.HORIZONTAL?this.minimumWidth:this.minimumHeight}},{key:"maxWidth",get:function(){return null===this.node.maxWidth?null:Math.abs(this.trail.getParentTransform().transformDeltaX(this.node.maxWidth))},set:function(e){this.node.maxWidth=null===e?null:Math.abs(this.trail.getParentTransform().inverseDeltaX(e))}},{key:"maxHeight",get:function(){return null===this.node.maxHeight?null:Math.abs(this.trail.getParentTransform().transformDeltaY(this.node.maxHeight))},set:function(e){this.node.maxHeight=null===e?null:Math.abs(this.trail.getParentTransform().inverseDeltaY(e))}},{key:"getMax",value:function(e){return e===In.HORIZONTAL?this.maxWidth:this.maxHeight}},{key:"visible",get:function(){return this.node.visible},set:function(e){this.node.visible=e}},{key:"dispose",value:function(){this.trail=null,this.freeToPool()}},{key:"freeToPool",value:function(){e.pool.freeToPool(this)}}]),e}();_defineProperty(kp,"pool",new rn(kp,{maxSize:1e3})),Cr.register("LayoutProxy",kp);var Vp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=new El(e,i);_defineProperty(_assertThisInitialized(a=t.call(this,[s],(function(e){return 1===e.length?kp.pool.create(e[0].copy().removeAncestor()):null}))),"transformTracker",null),a.trailsBetweenProperty=s,a.lazyLink((function(e,t){t&&t.dispose()}));var o=null==r?void 0:r.onTransformChange;return o&&a.link((function(t){a.transformTracker&&(a.transformTracker.dispose(),a.transformTracker=null),t&&(a.transformTracker=new Mu(t.trail.copy().addAncestor(e)),a.transformTracker.addListener(o))})),a}return _createClass(n,[{key:"dispose",value:function(){this.trailsBetweenProperty.dispose(),this.transformTracker&&this.transformTracker.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Qt);Cr.register("LayoutProxyProperty",Vp);var wp=function(){function e(t){_classCallCheck(this,e),_defineProperty(this,"_layoutLockCount",0),_defineProperty(this,"_layoutAttemptDuringLock",!1),_defineProperty(this,"_enabled",!0),_defineProperty(this,"_listenedNodes",new Set),_defineProperty(this,"finishedLayoutEmitter",new d),this.ancestorNode=t,this._updateLayoutListener=this.updateLayoutAutomatically.bind(this)}return _createClass(e,[{key:"addNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(e._activeParentLayoutConstraint=this),e.boundsProperty.lazyLink(this._updateLayoutListener),e.visibleProperty.lazyLink(this._updateLayoutListener),ll(e)&&(e.minimumWidthProperty.lazyLink(this._updateLayoutListener),e.isWidthResizableProperty.lazyLink(this._updateLayoutListener)),pl(e)&&(e.minimumHeightProperty.lazyLink(this._updateLayoutListener),e.isHeightResizableProperty.lazyLink(this._updateLayoutListener)),this._listenedNodes.add(e)}},{key:"removeNode",value:function(e){e._activeParentLayoutConstraint===this&&(e._activeParentLayoutConstraint=null),e.boundsProperty.unlink(this._updateLayoutListener),e.visibleProperty.unlink(this._updateLayoutListener),ll(e)&&(e.minimumWidthProperty.unlink(this._updateLayoutListener),e.isWidthResizableProperty.unlink(this._updateLayoutListener)),pl(e)&&(e.minimumHeightProperty.unlink(this._updateLayoutListener),e.isHeightResizableProperty.unlink(this._updateLayoutListener)),this._listenedNodes.delete(e)}},{key:"layout",value:function(){}},{key:"isLocked",get:function(){return this._layoutLockCount>0}},{key:"lock",value:function(){this._layoutLockCount++}},{key:"unlock",value:function(){this._layoutLockCount--}},{key:"validateLocalPreferredWidth",value:function(e){0}},{key:"validateLocalPreferredHeight",value:function(e){0}},{key:"validateLocalPreferredSize",value:function(e){0}},{key:"updateLayout",value:function(){if(this.isLocked)this._layoutAttemptDuringLock=!0;else{this.lock();do{this._layoutAttemptDuringLock=!1,this.layout()}while(this._layoutAttemptDuringLock);this.unlock()}}},{key:"updateLayoutAutomatically",value:function(){this._enabled&&this.updateLayout()}},{key:"createLayoutProxy",value:function(e){var t=this,n=e.getTrails((function(e){return e===t.ancestorNode}));return 1===n.length?kp.pool.create(n[0].removeAncestor()):null}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e,this.updateLayoutAutomatically())}},{key:"dispose",value:function(){for(var e=_toConsumableArray(this._listenedNodes.keys()),t=0;t<e.length;t++)this.removeNode(e[t])}}]),e}();Cr.register("LayoutConstraint",wp);var _p=function(){function e(t,n,i){var r=this;_classCallCheck(this,e),i?(this.layoutProxyProperty=null,this._proxy=i):(this._proxy=null,this.layoutProxyProperty=new Vp(t.ancestorNode,n,{onTransformChange:function(){return t.updateLayoutAutomatically()}}),this.layoutProxyProperty.link((function(e){r._proxy=e,t.updateLayoutAutomatically()}))),this._constraint=t,this._node=n,this.layoutOptionsListener=this.onLayoutOptionsChange.bind(this),this.node.layoutOptionsChangedEmitter.addListener(this.layoutOptionsListener)}return _createClass(e,[{key:"onLayoutOptionsChange",value:function(){}},{key:"node",get:function(){return this._node}},{key:"isConnected",value:function(){return null!==this._proxy}},{key:"proxy",get:function(){return this._proxy}},{key:"isSizable",value:function(e){return e===In.HORIZONTAL?this.proxy.widthSizable:this.proxy.heightSizable}},{key:"dispose",value:function(){this.layoutProxyProperty&&this.layoutProxyProperty.dispose(),this.node.layoutOptionsChangedEmitter.removeListener(this.layoutOptionsListener)}}]),e}();Cr.register("LayoutCell",_p);var Cp=function(){function e(t,n){var i=this;_classCallCheck(this,e),_defineProperty(this,"_map",new Map),this._enumeration=t,this._values=t.enumeration.values,this._values.forEach((function(e){i._map.set(e,n(e))}))}return _createClass(e,[{key:"get",value:function(e){return this._map.get(e)}},{key:"set",value:function(e,t){this._map.set(e,t)}},{key:"map",value:function(t){var n=this;return new e(this._enumeration,(function(e){return t(n.get(e),e)}))}},{key:"forEach",value:function(e){var t=this;this._values.forEach((function(n){return e(t.get(n),n)}))}},{key:"values",value:function(){var e=this;return this._values.map((function(t){return e.get(t)}))}}]),e}();y.register("EnumerationMap",Cp);var xp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,In,(function(t){return t===In.HORIZONTAL?e:i}))}return _createClass(n,[{key:"horizontal",get:function(){return this.get(In.HORIZONTAL)},set:function(e){this.set(In.HORIZONTAL,e)}},{key:"vertical",get:function(){return this.get(In.VERTICAL)},set:function(e){this.set(In.VERTICAL,e)}}],[{key:"create",value:function(e){return new n(e(In.HORIZONTAL),e(In.VERTICAL))}}]),n}(Cp);y.register("OrientationPair",xp);var Pp=xp,Tp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),_defineProperty(_assertThisInitialized(a=t.call(this,e,i,r)),"preferredSizeSet",new Pp(!1,!1)),_defineProperty(_assertThisInitialized(a),"lastAvailableBounds",jn.NOTHING.copy()),_defineProperty(_assertThisInitialized(a),"lastUsedBounds",jn.NOTHING.copy()),a._marginConstraint=e,a}return _createClass(n,[{key:"reposition",value:function(e,t,n,i,r,a){var s=i&&this.isSizable(e)?t:this.getMinimumSize(e);this.attemptPreferredSize(e,s),a===dp.ORIGIN?this.positionOrigin(e,n+r):this.positionStart(e,n+(t-this.getCellBounds()[e.size])*a.padRatio);var o=this.getCellBounds();return this.lastAvailableBounds[e.minCoordinate]=n,this.lastAvailableBounds[e.maxCoordinate]=n+t,this.lastUsedBounds.set(o),o}},{key:"effectiveLeftMargin",get:function(){return null!==this._leftMargin?this._leftMargin:this._marginConstraint._leftMargin}},{key:"effectiveRightMargin",get:function(){return null!==this._rightMargin?this._rightMargin:this._marginConstraint._rightMargin}},{key:"effectiveTopMargin",get:function(){return null!==this._topMargin?this._topMargin:this._marginConstraint._topMargin}},{key:"effectiveBottomMargin",get:function(){return null!==this._bottomMargin?this._bottomMargin:this._marginConstraint._bottomMargin}},{key:"getEffectiveMinMargin",value:function(e){return e===In.HORIZONTAL?this.effectiveLeftMargin:this.effectiveTopMargin}},{key:"getEffectiveMaxMargin",value:function(e){return e===In.HORIZONTAL?this.effectiveRightMargin:this.effectiveBottomMargin}},{key:"effectiveMinContentWidth",get:function(){return null!==this._minContentWidth?this._minContentWidth:this._marginConstraint._minContentWidth}},{key:"effectiveMinContentHeight",get:function(){return null!==this._minContentHeight?this._minContentHeight:this._marginConstraint._minContentHeight}},{key:"getEffectiveMinContent",value:function(e){return e===In.HORIZONTAL?this.effectiveMinContentWidth:this.effectiveMinContentHeight}},{key:"effectiveMaxContentWidth",get:function(){return null!==this._maxContentWidth?this._maxContentWidth:this._marginConstraint._maxContentWidth}},{key:"effectiveMaxContentHeight",get:function(){return null!==this._maxContentHeight?this._maxContentHeight:this._marginConstraint._maxContentHeight}},{key:"getEffectiveMaxContent",value:function(e){return e===In.HORIZONTAL?this.effectiveMaxContentWidth:this.effectiveMaxContentHeight}},{key:"getMinimumSize",value:function(e){return this.getEffectiveMinMargin(e)+Math.max(this.proxy.getMinimum(e),this.getEffectiveMinContent(e)||0)+this.getEffectiveMaxMargin(e)}},{key:"getMaximumSize",value:function(e){return this.getEffectiveMinMargin(e)+(this.getEffectiveMaxContent(e)||Number.POSITIVE_INFINITY)+this.getEffectiveMaxMargin(e)}},{key:"attemptPreferredSize",value:function(e,t){if(this.proxy[e.sizable]){var n=this.getMinimumSize(e),i=this.getMaximumSize(e),r=(t=En.clamp(t,n,i))-this.getEffectiveMinMargin(e)-this.getEffectiveMaxMargin(e),a=this.proxy.getMax(e);null!==a&&(r=Math.min(a,r)),this._marginConstraint.setProxyPreferredSize(e,this.proxy,r),this.preferredSizeSet.set(e,!0)}}},{key:"unsetPreferredSize",value:function(e){this.proxy[e.sizable]&&this._marginConstraint.setProxyPreferredSize(e,this.proxy,null)}},{key:"positionStart",value:function(e,t){var n=this.getEffectiveMinMargin(e)+t;this._marginConstraint.setProxyMinSide(e,this.proxy,n)}},{key:"positionOrigin",value:function(e,t){this._marginConstraint.setProxyOrigin(e,this.proxy,t)}},{key:"getOriginBounds",value:function(){return this.getCellBounds().shiftedXY(-this.proxy.x,-this.proxy.y)}},{key:"getCellBounds",value:function(){return this.proxy.bounds.withOffsets(this.effectiveLeftMargin,this.effectiveTopMargin,this.effectiveRightMargin,this.effectiveBottomMargin)}},{key:"dispose",value:function(){var e=this;In.enumeration.values.forEach((function(t){e.preferredSizeSet.get(t)&&e.unsetPreferredSize(t)})),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"createHelperNode",value:function(e,t,n){var i=new jo,r=Ni.union(e.map((function(e){return Ni.bounds(e.lastAvailableBounds)}))),a=Ni.union(e.map((function(e){return Ni.bounds(e.lastUsedBounds)}))),s=Ni.union(e.map((function(e){return Ni.bounds(e.proxy.bounds)}))),o=Ni.bounds(t).shapeDifference(r),l=r.shapeDifference(a),u=a.shapeDifference(s),c=function(e,t,n){var i=new Xl(e,{font:new Qr({size:6,family:"monospace"}),fill:t}),r=iu.bounds(i.bounds,{fill:n,children:[i]});return new $s(r,4,Math.floor(r.left),Math.ceil(r.top+1),Math.floor(r.width),Math.floor(r.height-2),oi.rotation2(-Math.PI/4))};return i.addChild(new Hl(o,{fill:c("spacing","#000","#fff"),opacity:.6})),i.addChild(new Hl(l,{fill:c("empty","#aaa","#000"),opacity:.6})),i.addChild(new Hl(u,{fill:c("margin","#600","#f00"),opacity:.6})),i.addChild(iu.bounds(t,{stroke:"white",lineDash:[2,2],lineDashOffset:2,lineWidth:.4})),i.addChild(iu.bounds(t,{stroke:"black",lineDash:[2,2],lineWidth:.4})),e.forEach((function(e){i.addChild(iu.bounds(e.getCellBounds(),{stroke:"rgba(0,255,0,1)",lineWidth:.4}))})),e.forEach((function(e){i.addChild(iu.bounds(e.proxy.bounds,{stroke:"rgba(255,0,0,1)",lineWidth:.4}))})),e.forEach((function(e){var t=e.getCellBounds(),r=new vd;i.addChild(iu.bounds(t,{inputListeners:[r]}));var a=n(e);e.effectiveLeftMargin&&(a+="leftMargin: ".concat(e.effectiveLeftMargin,"\n")),e.effectiveRightMargin&&(a+="rightMargin: ".concat(e.effectiveRightMargin,"\n")),e.effectiveTopMargin&&(a+="topMargin: ".concat(e.effectiveTopMargin,"\n")),e.effectiveBottomMargin&&(a+="bottomMargin: ".concat(e.effectiveBottomMargin,"\n")),e.effectiveMinContentWidth&&(a+="minContentWidth: ".concat(e.effectiveMinContentWidth,"\n")),e.effectiveMinContentHeight&&(a+="minContentHeight: ".concat(e.effectiveMinContentHeight,"\n")),e.effectiveMaxContentWidth&&(a+="maxContentWidth: ".concat(e.effectiveMaxContentWidth,"\n")),e.effectiveMaxContentHeight&&(a+="maxContentHeight: ".concat(e.effectiveMaxContentHeight,"\n")),a+="layoutOptions: ".concat(JSON.stringify(e.node.layoutOptions,null,2).replace(/ /g,"&nbsp;"),"\n");var s=new Pf(a.trim().replace(/\n/g,"<br>"),{font:new Qr({size:12})}),o=iu.bounds(s.bounds.dilated(3),{fill:"rgba(255,255,255,0.8)",children:[s],leftTop:t.leftTop});i.addChild(o),r.isOverProperty.link((function(e){o.visible=e}))})),i}}]),n}(_p);Cr.register("MarginLayoutCell",Tp);var Mp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({valueType:pn,validBounds:null,validators:[],phetioValueType:pn.Vector2IO},i);return a.validBounds&&a.validators.push({validationMessage:"Vector2 is not within validBounds",isValidValue:function(e){return a.validBounds.containsPoint(e)}}),(r=t.call(this,e,a)).validBounds=a.validBounds,r}return _createClass(n)}(dt);xt.register("Vector2Property",Mp);var Lp=Mp,Ip=["resize","layoutOrigin"],Rp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),_defineProperty(_assertThisInitialized(i=t.call(this,e)),"layoutOriginProperty",new Lp(pn.ZERO)),i}return _createClass(n,[{key:"linkLayoutBounds",value:function(){var e=this;this._constraint.layoutBoundsProperty.link((function(t){e.localBounds=t}))}},{key:"setExcludeInvisibleChildrenFromBounds",value:function(e){_get(_getPrototypeOf(n.prototype),"setExcludeInvisibleChildrenFromBounds",this).call(this,e),this._constraint.excludeInvisible=e}},{key:"setChildren",value:function(e){if(this.constraint.isLocked)return _get(_getPrototypeOf(n.prototype),"setChildren",this).call(this,e);var t=this.getChildren();return this.constraint.lock(),_get(_getPrototypeOf(n.prototype),"setChildren",this).call(this,e),this.constraint.unlock(),_.isEqual(t,e)||this.constraint.updateLayoutAutomatically(),this}},{key:"updateLayout",value:function(){this._constraint.updateLayout()}},{key:"resize",get:function(){return this._constraint.enabled},set:function(e){this._constraint.enabled=e}},{key:"layoutOrigin",get:function(){return this.layoutOriginProperty.value},set:function(e){this.layoutOriginProperty.value=e}},{key:"constraint",get:function(){return this._constraint}},{key:"dispose",value:function(){this._constraint.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(vl(jo));Cr.register("LayoutNode",Rp);var Dp=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"initializeLayoutLine",value:function(){this.min=0,this.max=Number.POSITIVE_INFINITY,this.minOrigin=Number.POSITIVE_INFINITY,this.maxOrigin=Number.NEGATIVE_INFINITY,this.size=0,this.position=0}},{key:"hasOrigin",value:function(){return isFinite(this.minOrigin)&&isFinite(this.maxOrigin)}}]),e}();Cr.register("LayoutLine",Dp);var Np=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({preferredWidthProperty:new st(null),preferredHeightProperty:new st(null),minimumWidthProperty:new st(null),minimumHeightProperty:new st(null),layoutOriginProperty:new st(pn.ZERO)},i);return _defineProperty(_assertThisInitialized(r=t.call(this,e)),"_excludeInvisible",!0),r.layoutBoundsProperty=new dt(jn.NOTHING,{useDeepEquality:!0}),r.preferredWidthProperty=a.preferredWidthProperty,r.preferredHeightProperty=a.preferredHeightProperty,r.minimumWidthProperty=a.minimumWidthProperty,r.minimumHeightProperty=a.minimumHeightProperty,r.layoutOriginProperty=a.layoutOriginProperty,r.preferredWidthProperty.lazyLink(r._updateLayoutListener),r.preferredHeightProperty.lazyLink(r._updateLayoutListener),r.layoutOriginProperty.lazyLink(r._updateLayoutListener),r}return _createClass(n,[{key:"filterLayoutCells",value:function(e){var t=this;return e.filter((function(e){return e.isConnected()&&e.proxy.bounds.isValid()&&(!t.excludeInvisible||e.node.visible)}))}},{key:"excludeInvisible",get:function(){return this._excludeInvisible},set:function(e){this._excludeInvisible!==e&&(this._excludeInvisible=e,this.updateLayoutAutomatically())}},{key:"setProxyPreferredSize",value:function(e,t,n){t[e.preferredSize]=n}},{key:"setProxyMinSide",value:function(e,t,n){Math.abs(t[e.minSide]-n)>1e-9&&(t[e.minSide]=n)}},{key:"setProxyOrigin",value:function(e,t,n){Math.abs(t[e.coordinate]-n)>1e-9&&(t[e.coordinate]=n)}},{key:"dispose",value:function(){this.preferredWidthProperty.unlink(this._updateLayoutListener),this.preferredHeightProperty.unlink(this._updateLayoutListener),this.layoutOriginProperty.unlink(this._updateLayoutListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(wp);Cr.register("NodeLayoutConstraint",Np);var qp=["margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","minContentWidth","minContentHeight","maxContentWidth","maxContentHeight"],Op=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"_leftMargin",null),_defineProperty(_assertThisInitialized(e),"_rightMargin",null),_defineProperty(_assertThisInitialized(e),"_topMargin",null),_defineProperty(_assertThisInitialized(e),"_bottomMargin",null),_defineProperty(_assertThisInitialized(e),"_minContentWidth",null),_defineProperty(_assertThisInitialized(e),"_minContentHeight",null),_defineProperty(_assertThisInitialized(e),"_maxContentWidth",null),_defineProperty(_assertThisInitialized(e),"_maxContentHeight",null),_defineProperty(_assertThisInitialized(e),"changedEmitter",new d),e}return _createClass(n,[{key:"mutateConfigurable",value:function(e){H(e,["margin"],["xMargin","yMargin"]),H(e,["xMargin"],["leftMargin","rightMargin"]),H(e,["yMargin"],["topMargin","bottomMargin"])}},{key:"setConfigToBaseDefault",value:function(){this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._minContentWidth=null,this._minContentHeight=null,this._maxContentWidth=null,this._maxContentHeight=null,this.changedEmitter.emit()}},{key:"setConfigToInherit",value:function(){this._leftMargin=null,this._rightMargin=null,this._topMargin=null,this._bottomMargin=null,this._minContentWidth=null,this._minContentHeight=null,this._maxContentWidth=null,this._maxContentHeight=null,this.changedEmitter.emit()}},{key:"leftMargin",get:function(){return this._leftMargin},set:function(e){this._leftMargin!==e&&(this._leftMargin=e,this.changedEmitter.emit())}},{key:"rightMargin",get:function(){return this._rightMargin},set:function(e){this._rightMargin!==e&&(this._rightMargin=e,this.changedEmitter.emit())}},{key:"topMargin",get:function(){return this._topMargin},set:function(e){this._topMargin!==e&&(this._topMargin=e,this.changedEmitter.emit())}},{key:"bottomMargin",get:function(){return this._bottomMargin},set:function(e){this._bottomMargin!==e&&(this._bottomMargin=e,this.changedEmitter.emit())}},{key:"xMargin",get:function(){return this._leftMargin},set:function(e){this._leftMargin===e&&this._rightMargin===e||(this._leftMargin=e,this._rightMargin=e,this.changedEmitter.emit())}},{key:"yMargin",get:function(){return this._topMargin},set:function(e){this._topMargin===e&&this._bottomMargin===e||(this._topMargin=e,this._bottomMargin=e,this.changedEmitter.emit())}},{key:"margin",get:function(){return this._topMargin},set:function(e){this._leftMargin===e&&this._rightMargin===e&&this._topMargin===e&&this._bottomMargin===e||(this._leftMargin=e,this._rightMargin=e,this._topMargin=e,this._bottomMargin=e,this.changedEmitter.emit())}},{key:"minContentWidth",get:function(){return this._minContentWidth},set:function(e){this._minContentWidth!==e&&(this._minContentWidth=e,this.changedEmitter.emit())}},{key:"minContentHeight",get:function(){return this._minContentHeight},set:function(e){this._minContentHeight!==e&&(this._minContentHeight=e,this.changedEmitter.emit())}},{key:"maxContentWidth",get:function(){return this._maxContentWidth},set:function(e){this._maxContentWidth!==e&&(this._maxContentWidth=e,this.changedEmitter.emit())}},{key:"maxContentHeight",get:function(){return this._maxContentHeight},set:function(e){this._maxContentHeight!==e&&(this._maxContentHeight=e,this.changedEmitter.emit())}}]),n}(e)}));Cr.register("MarginLayoutConfigurable",Op);var Bp=Op,Gp=["orientation","align","stretch","grow"].concat(qp),Hp=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"_orientation",In.HORIZONTAL),_defineProperty(_assertThisInitialized(e),"_align",null),_defineProperty(_assertThisInitialized(e),"_stretch",null),_defineProperty(_assertThisInitialized(e),"_grow",null),_defineProperty(_assertThisInitialized(e),"orientationChangedEmitter",new d),e}return _createClass(n,[{key:"mutateConfigurable",value:function(e){_get(_getPrototypeOf(n.prototype),"mutateConfigurable",this).call(this,e),du(this,Gp,e)}},{key:"setConfigToBaseDefault",value:function(){this._align=dp.CENTER,this._stretch=!1,this._grow=0,_get(_getPrototypeOf(n.prototype),"setConfigToBaseDefault",this).call(this)}},{key:"setConfigToInherit",value:function(){this._align=null,this._stretch=null,this._grow=null,_get(_getPrototypeOf(n.prototype),"setConfigToInherit",this).call(this)}},{key:"orientation",get:function(){return this._orientation===In.HORIZONTAL?"horizontal":"vertical"},set:function(e){var t="horizontal"===e?In.HORIZONTAL:In.VERTICAL;this._orientation!==t&&(this._orientation=t,this.orientationChangedEmitter.emit(),this.changedEmitter.emit())}},{key:"align",get:function(){var e=dp.internalToAlign(this._orientation,this._align);return e},set:function(e){var t=dp.alignToInternal(this._orientation.opposite,e);this._align!==t&&(this._align=t,this.changedEmitter.emit())}},{key:"stretch",get:function(){return this._stretch},set:function(e){this._stretch!==e&&(this._stretch=e,this.changedEmitter.emit())}},{key:"grow",get:function(){return this._grow},set:function(e){this._grow!==e&&(this._grow=e,this.changedEmitter.emit())}}]),n}(Bp(e))}));Cr.register("FlowConfigurable",Hp);var Fp=Hp,Yp=([].concat(_toConsumableArray(Gp),["isSeparator"]),function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),_defineProperty(_assertThisInitialized(a=t.call(this,e,i,r)),"size",0),_defineProperty(_assertThisInitialized(a),"_isSeparator",!1),a.flowConstraint=e,a.orientation=e.orientation,a.onLayoutOptionsChange(),a}return _createClass(n,[{key:"effectiveAlign",get:function(){return null!==this._align?this._align:this.flowConstraint._align}},{key:"effectiveStretch",get:function(){return null!==this._stretch?this._stretch:this.flowConstraint._stretch}},{key:"effectiveGrow",get:function(){return null!==this._grow?this._grow:this.flowConstraint._grow}},{key:"onLayoutOptionsChange",value:function(){this.node.layoutOptions&&this.setOptions(this.node.layoutOptions),_get(_getPrototypeOf(n.prototype),"onLayoutOptionsChange",this).call(this)}},{key:"setOptions",value:function(e){var t=S()({isSeparator:!1},e);this._isSeparator=t.isSeparator,this.setConfigToInherit(),this.mutateConfigurable(t)}}]),n}(Fp(Tp)));Cr.register("FlowCell",Yp);var zp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).initialize(e,i),r}return _createClass(n,[{key:"initialize",value:function(e,t){this.orientation=e,this.cells=t,this.initializeLayoutLine()}},{key:"getMinimumSize",value:function(e){var t=this;return(this.cells.length-1)*e+_.sum(this.cells.map((function(e){return e.getMinimumSize(t.orientation)})))}},{key:"freeToPool",value:function(){n.pool.freeToPool(this)}}]),n}(Dp);_defineProperty(zp,"pool",new rn(zp,{defaultArguments:[In.HORIZONTAL,[]]})),Cr.register("FlowLine",zp);var Up=[].concat(_toConsumableArray(Gp),["spacing","lineSpacing","justify","justifyLines","wrap","excludeInvisible"]),Wp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),_defineProperty(_assertThisInitialized(r=t.call(this,e,i)),"cells",[]),_defineProperty(_assertThisInitialized(r),"_justify",yp.SPACE_BETWEEN),_defineProperty(_assertThisInitialized(r),"_justifyLines",null),_defineProperty(_assertThisInitialized(r),"_wrap",!1),_defineProperty(_assertThisInitialized(r),"_spacing",0),_defineProperty(_assertThisInitialized(r),"_lineSpacing",0),_defineProperty(_assertThisInitialized(r),"displayedCells",[]),r.setConfigToBaseDefault(),r.mutateConfigurable(i),du(_assertThisInitialized(r),Up,i),r.changedEmitter.addListener(r._updateLayoutListener),r.orientationChangedEmitter.addListener((function(){return r.cells.forEach((function(e){e.orientation=r.orientation}))})),r}return _createClass(n,[{key:"updateSeparatorVisibility",value:function(){for(var e=0;e<this.cells.length;e++){var t=this.cells[e];if(t._isSeparator)t.node.visible=!1;else if(t.node.visible)break}for(var n=!1,i=this.cells.length-1;i>e;i--){var r=this.cells[i];r._isSeparator?(r.node.visible=n,n=!1):r.node.visible&&(n=!0)}}},{key:"layout",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"layout",this).call(this);var t=this._orientation,i=this._orientation.opposite;this.updateSeparatorVisibility();var r=this.filterLayoutCells(this.cells);if(this.displayedCells=r,!r.length)return this.layoutBoundsProperty.value=jn.NOTHING,this.minimumWidthProperty.value=null,void(this.minimumHeightProperty.value=null);var a=this.getPreferredProperty(t).value,s=this.getPreferredProperty(i).value,o=Math.max.apply(Math,_toConsumableArray(r.map((function(e){return e.getMinimumSize(t)||0}))));o>(a||Number.POSITIVE_INFINITY)&&(a=o);var l=[];if(this.wrap){for(var u=[],c=a||Number.POSITIVE_INFINITY;r.length;){var h=r.shift(),d=h.getMinimumSize(t);0===u.length?(u.push(h),c-=d):this.spacing+d<=c+1e-7?(u.push(h),c-=this.spacing+d):(l.push(zp.pool.create(t,u)),c=a||Number.POSITIVE_INFINITY,u=[h],c-=d)}u.length&&l.push(zp.pool.create(t,u))}else l.push(zp.pool.create(t,r));l.forEach((function(e){e.cells.forEach((function(t){if(e.min=Math.max(e.min,t.getMinimumSize(i)),e.max=Math.min(e.max,t.getMaximumSize(i)),t.effectiveAlign===dp.ORIGIN){var n=t.getOriginBounds();e.minOrigin=Math.min(n[i.minCoordinate],e.minOrigin),e.maxOrigin=Math.max(n[i.maxCoordinate],e.maxOrigin)}})),isFinite(e.minOrigin)&&isFinite(e.maxOrigin)?e.size=Math.max(e.min,e.maxOrigin-e.minOrigin):e.size=e.min}));var p=Math.max.apply(Math,_toConsumableArray(l.map((function(t){return t.getMinimumSize(e.spacing)})))),f=_.sum(l.map((function(e){return e.size})))+(l.length-1)*this.lineSpacing,m=this.wrap?o:p,g=Math.max(p,a||0),y=Math.max(f,s||0),v=this.layoutOriginProperty.value[t.coordinate],A=this.layoutOriginProperty.value[t.opposite.coordinate];l.forEach((function(n){var i,r=_.sum(n.cells.map((function(e){return e.getMinimumSize(t)}))),a=e.spacing*(n.cells.length-1),s=g-r-a;n.cells.forEach((function(e){e.size=e.getMinimumSize(t)}));for(var o=function(){var e=_.sum(i.map((function(e){return e.effectiveGrow}))),n=Math.min(Math.min.apply(Math,_toConsumableArray(i.map((function(e){return(e.getMaximumSize(t)-e.size)/e.effectiveGrow})))),s/e);i.forEach((function(e){e.size+=n*e.effectiveGrow})),s-=n*e};s>1e-7&&(i=n.cells.filter((function(e){return 0!==e.effectiveGrow&&e.size<e.getMaximumSize(t)-1e-7}))).length;)o();n.cells.forEach((function(e){return e.attemptPreferredSize(t,e.size)}));var l=e._justify.spacingFunctionFactory(s,n.cells.length),u=v;n.cells.forEach((function(n,i){u+=l(i),i>0&&(u+=e.spacing),n.positionStart(t,u),n.lastAvailableBounds[t.minCoordinate]=u,n.lastAvailableBounds[t.maxCoordinate]=u+n.size,u+=n.size}))}));var b=y-f,S=(l[0].hasOrigin()?l[0].minOrigin:0)+A,E=S;if(null===this._justifyLines)l.forEach((function(e){e.size+=b/l.length})),l.forEach((function(t){t.position=E,E+=t.size+e.lineSpacing}));else{var k=this._justifyLines.spacingFunctionFactory(b,l.length);l.forEach((function(t,n){E+=k(n),t.position=E,E+=t.size+e.lineSpacing}))}l.forEach((function(e){return e.cells.forEach((function(t){t.reposition(i,e.size,e.position,t.effectiveStretch,-e.minOrigin,t.effectiveAlign)}))}));var V=v,w=v+g,C=S,x=S+y;this.layoutBoundsProperty.value=jn.oriented(t,V,C,w,x),this.minimumWidthProperty.value=t===In.HORIZONTAL?m:f,this.minimumHeightProperty.value=t===In.HORIZONTAL?f:m,this.finishedLayoutEmitter.emit(),l.forEach((function(e){return e.freeToPool()}))}},{key:"justify",get:function(){var e=yp.internalToJustify(this._orientation,this._justify);return e},set:function(e){var t=yp.justifyToInternal(this._orientation,e);this._justify!==t&&(this._justify=t,this.updateLayoutAutomatically())}},{key:"justifyLines",get:function(){if(null===this._justifyLines)return null;var e=yp.internalToJustify(this._orientation,this._justifyLines);return e},set:function(e){var t=null===e?null:yp.justifyToInternal(this._orientation.opposite,e);this._justifyLines!==t&&(this._justifyLines=t,this.updateLayoutAutomatically())}},{key:"wrap",get:function(){return this._wrap},set:function(e){this._wrap!==e&&(this._wrap=e,this.updateLayoutAutomatically())}},{key:"spacing",get:function(){return this._spacing},set:function(e){this._spacing!==e&&(this._spacing=e,this.updateLayoutAutomatically())}},{key:"lineSpacing",get:function(){return this._lineSpacing},set:function(e){this._lineSpacing!==e&&(this._lineSpacing=e,this.updateLayoutAutomatically())}},{key:"insertCell",value:function(e,t){t.orientation=this.orientation,this.cells.splice(e,0,t),this.addNode(t.node),t.changedEmitter.addListener(this._updateLayoutListener),this.updateLayoutAutomatically()}},{key:"removeCell",value:function(e){J(this.cells,e),this.removeNode(e.node),e.changedEmitter.removeListener(this._updateLayoutListener),this.updateLayoutAutomatically()}},{key:"reorderCells",value:function(e,t,n){var i;(i=this.cells).splice.apply(i,[t,n-t+1].concat(_toConsumableArray(e))),this.updateLayoutAutomatically()}},{key:"getPreferredProperty",value:function(e){return e===In.HORIZONTAL?this.preferredWidthProperty:this.preferredHeightProperty}},{key:"dispose",value:function(){var e=this;this.lock(),this.cells.forEach((function(t){return e.removeCell(t)})),this.displayedCells=[],_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.unlock()}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Fp(Np));Cr.register("FlowConstraint",Wp);var jp=[].concat(Ip,_toConsumableArray(Up.filter((function(e){return"excludeInvisible"!==e})))),Xp={orientation:"horizontal",spacing:0,align:"center",stretch:!1},Qp=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({excludeInvisibleChildrenFromBounds:!0,resize:!0,disabledOpacity:Pr.DISABLED_OPACITY},e);_defineProperty(_assertThisInitialized(i=t.call(this)),"_cellMap",new Map),i._constraint=new Wp(_assertThisInitialized(i),{preferredWidthProperty:i.localPreferredWidthProperty,preferredHeightProperty:i.localPreferredHeightProperty,minimumWidthProperty:i.localMinimumWidthProperty,minimumHeightProperty:i.localMinimumHeightProperty,layoutOriginProperty:i.layoutOriginProperty,orientation:Xp.orientation,spacing:Xp.spacing,align:Xp.align,stretch:Xp.stretch,excludeInvisible:!1}),i.onChildInserted=i.onFlowBoxChildInserted.bind(_assertThisInitialized(i)),i.onChildRemoved=i.onFlowBoxChildRemoved.bind(_assertThisInitialized(i)),i.onChildrenReordered=i.onFlowBoxChildrenReordered.bind(_assertThisInitialized(i)),i.onChildrenChanged=i.onFlowBoxChildrenChanged.bind(_assertThisInitialized(i)),i.childInsertedEmitter.addListener(i.onChildInserted),i.childRemovedEmitter.addListener(i.onChildRemoved),i.childrenReorderedEmitter.addListener(i.onChildrenReordered),i.childrenChangedEmitter.addListener(i.onChildrenChanged);var a=_.omit(r,Yo),s=_.pick(r,Yo);return i._constraint.lock(),i.mutate(a),i._constraint.unlock(),i._constraint.updateLayout(),i.mutate(s),i.linkLayoutBounds(),i}return _createClass(n,[{key:"onFlowBoxChildInserted",value:function(e,t){var n=new Yp(this._constraint,e,this._constraint.createLayoutProxy(e));this._cellMap.set(e,n),this._constraint.insertCell(t,n)}},{key:"onFlowBoxChildRemoved",value:function(e){var t=this._cellMap.get(e);this._cellMap.delete(e),this._constraint.removeCell(t),t.dispose()}},{key:"onFlowBoxChildrenReordered",value:function(e,t){var n=this;this._constraint.reorderCells(this._children.slice(e,t+1).map((function(e){return n._cellMap.get(e)})),e,t)}},{key:"onFlowBoxChildrenChanged",value:function(){this._constraint.updateLayoutAutomatically()}},{key:"getCell",value:function(e){var t=this._cellMap.get(e);return t}},{key:"orientation",get:function(){return this._constraint.orientation},set:function(e){this._constraint.orientation=e}},{key:"spacing",get:function(){return this._constraint.spacing},set:function(e){this._constraint.spacing=e}},{key:"lineSpacing",get:function(){return this._constraint.lineSpacing},set:function(e){this._constraint.lineSpacing=e}},{key:"justify",get:function(){return this._constraint.justify},set:function(e){this._constraint.justify=e}},{key:"justifyLines",get:function(){return this._constraint.justifyLines},set:function(e){this._constraint.justifyLines=e}},{key:"wrap",get:function(){return this._constraint.wrap},set:function(e){this._constraint.wrap=e}},{key:"align",get:function(){return this._constraint.align},set:function(e){this._constraint.align=e}},{key:"stretch",get:function(){return this._constraint.stretch},set:function(e){this._constraint.stretch=e}},{key:"grow",get:function(){return this._constraint.grow},set:function(e){this._constraint.grow=e}},{key:"margin",get:function(){return this._constraint.margin},set:function(e){this._constraint.margin=e}},{key:"xMargin",get:function(){return this._constraint.xMargin},set:function(e){this._constraint.xMargin=e}},{key:"yMargin",get:function(){return this._constraint.yMargin},set:function(e){this._constraint.yMargin=e}},{key:"leftMargin",get:function(){return this._constraint.leftMargin},set:function(e){this._constraint.leftMargin=e}},{key:"rightMargin",get:function(){return this._constraint.rightMargin},set:function(e){this._constraint.rightMargin=e}},{key:"topMargin",get:function(){return this._constraint.topMargin},set:function(e){this._constraint.topMargin=e}},{key:"bottomMargin",get:function(){return this._constraint.bottomMargin},set:function(e){this._constraint.bottomMargin=e}},{key:"minContentWidth",get:function(){return this._constraint.minContentWidth},set:function(e){this._constraint.minContentWidth=e}},{key:"minContentHeight",get:function(){return this._constraint.minContentHeight},set:function(e){this._constraint.minContentHeight=e}},{key:"maxContentWidth",get:function(){return this._constraint.maxContentWidth},set:function(e){this._constraint.maxContentWidth=e}},{key:"maxContentHeight",get:function(){return this._constraint.maxContentHeight},set:function(e){this._constraint.maxContentHeight=e}},{key:"dispose",value:function(){this._constraint.lock(),this.childInsertedEmitter.removeListener(this.onChildInserted),this.childRemovedEmitter.removeListener(this.onChildRemoved),this.childrenReorderedEmitter.removeListener(this.onChildrenReordered),this.childrenChangedEmitter.removeListener(this.onChildrenChanged);var e,t=_createForOfIteratorHelper(this._cellMap.values());try{for(t.s();!(e=t.n()).done;){e.value.dispose()}}catch(i){t.e(i)}finally{t.f()}_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"setOrientation",value:function(e){return this.orientation=e,this}},{key:"getOrientation",value:function(){return this.orientation}},{key:"setSpacing",value:function(e){return this.spacing=e,this}},{key:"getSpacing",value:function(){return this.spacing}},{key:"setAlign",value:function(e){return this.align=e,this}},{key:"getAlign",value:function(){return this.align}},{key:"setResize",value:function(e){return this.resize=e,this}},{key:"isResize",value:function(){return this.resize}},{key:"getHelperNode",value:function(){return Tp.createHelperNode(this.constraint.displayedCells,this.constraint.layoutBoundsProperty.value,(function(e){var t="",n="horizontal"===e.orientation?In.HORIZONTAL:In.VERTICAL;return t+="align: ".concat(dp.internalToAlign(n,e.effectiveAlign),"\n"),t+="stretch: ".concat(e.effectiveStretch,"\n"),t+="grow: ".concat(e.effectiveGrow,"\n")}))}}]),n}(Rp);_defineProperty(Qp,"DEFAULT_FLOW_BOX_OPTIONS",Xp),Qp.prototype._mutatorKeys=[].concat(_toConsumableArray(gl),_toConsumableArray(jp),_toConsumableArray(jo.prototype._mutatorKeys)),Cr.register("FlowBox",Qp);var Kp=["xAlign","yAlign","stretch","xStretch","yStretch","grow","xGrow","yGrow"].concat(qp),Jp=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(r))),"_xAlign",null),_defineProperty(_assertThisInitialized(e),"_yAlign",null),_defineProperty(_assertThisInitialized(e),"_xStretch",null),_defineProperty(_assertThisInitialized(e),"_yStretch",null),_defineProperty(_assertThisInitialized(e),"_xGrow",null),_defineProperty(_assertThisInitialized(e),"_yGrow",null),e}return _createClass(n,[{key:"mutateConfigurable",value:function(e){_get(_getPrototypeOf(n.prototype),"mutateConfigurable",this).call(this,e),H(e,["stretch"],["xStretch","yStretch"]),H(e,["grow"],["xGrow","yGrow"]),du(this,Kp,e)}},{key:"setConfigToBaseDefault",value:function(){this._xAlign=dp.CENTER,this._yAlign=dp.CENTER,this._xStretch=!1,this._yStretch=!1,this._xGrow=0,this._yGrow=0,_get(_getPrototypeOf(n.prototype),"setConfigToBaseDefault",this).call(this)}},{key:"setConfigToInherit",value:function(){this._xAlign=null,this._yAlign=null,this._xStretch=null,this._yStretch=null,this._xGrow=null,this._yGrow=null,_get(_getPrototypeOf(n.prototype),"setConfigToInherit",this).call(this)}},{key:"xAlign",get:function(){var e=null===this._xAlign?null:this._xAlign.horizontal;return e},set:function(e){var t=dp.horizontalAlignToInternal(e);this._xAlign!==t&&(this._xAlign=t,this.changedEmitter.emit())}},{key:"yAlign",get:function(){var e=null===this._yAlign?null:this._yAlign.vertical;return e},set:function(e){var t=dp.verticalAlignToInternal(e);this._yAlign!==t&&(this._yAlign=t,this.changedEmitter.emit())}},{key:"grow",get:function(){return this._xGrow},set:function(e){this._xGrow===e&&this._yGrow===e||(this._xGrow=e,this._yGrow=e,this.changedEmitter.emit())}},{key:"xGrow",get:function(){return this._xGrow},set:function(e){this._xGrow!==e&&(this._xGrow=e,this.changedEmitter.emit())}},{key:"yGrow",get:function(){return this._yGrow},set:function(e){this._yGrow!==e&&(this._yGrow=e,this.changedEmitter.emit())}},{key:"stretch",get:function(){return this._xStretch},set:function(e){this._xStretch===e&&this._yStretch===e||(this._xStretch=e,this._yStretch=e,this.changedEmitter.emit())}},{key:"xStretch",get:function(){return this._xStretch},set:function(e){this._xStretch!==e&&(this._xStretch=e,this.changedEmitter.emit())}},{key:"yStretch",get:function(){return this._yStretch},set:function(e){this._yStretch!==e&&(this._yStretch=e,this.changedEmitter.emit())}}]),n}(Bp(e))}));Cr.register("GridConfigurable",Jp);var Zp=Jp,$p=([].concat(_toConsumableArray(Kp),["row","column","horizontalSpan","verticalSpan"]),function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,i,r)).gridConstraint=e,a.setOptions(i.layoutOptions),a.onLayoutOptionsChange(),a}return _createClass(n,[{key:"effectiveXAlign",get:function(){return null!==this._xAlign?this._xAlign:this.gridConstraint._xAlign}},{key:"effectiveYAlign",get:function(){return null!==this._yAlign?this._yAlign:this.gridConstraint._yAlign}},{key:"getEffectiveAlign",value:function(e){return e===In.HORIZONTAL?this.effectiveXAlign:this.effectiveYAlign}},{key:"effectiveXGrow",get:function(){return null!==this._xGrow?this._xGrow:this.gridConstraint._xGrow}},{key:"effectiveYGrow",get:function(){return null!==this._yGrow?this._yGrow:this.gridConstraint._yGrow}},{key:"getEffectiveGrow",value:function(e){return e===In.HORIZONTAL?this.effectiveXGrow:this.effectiveYGrow}},{key:"effectiveXStretch",get:function(){return null!==this._xStretch?this._xStretch:this.gridConstraint._xStretch}},{key:"effectiveYStretch",get:function(){return null!==this._yStretch?this._yStretch:this.gridConstraint._yStretch}},{key:"getEffectiveStretch",value:function(e){return e===In.HORIZONTAL?this.effectiveXStretch:this.effectiveYStretch}},{key:"onLayoutOptionsChange",value:function(){this.setOptions(this.node.layoutOptions),_get(_getPrototypeOf(n.prototype),"onLayoutOptionsChange",this).call(this)}},{key:"setOptions",value:function(e){var t=S()({column:0,row:0,horizontalSpan:1,verticalSpan:1},e);this.setConfigToInherit(),this.position=new Pp(t.column,t.row),this.size=new Pp(t.horizontalSpan,t.verticalSpan),this.mutateConfigurable(t)}},{key:"containsIndex",value:function(e,t){var n=this.position.get(e),i=this.size.get(e);return t>=n&&t<n+i}},{key:"containsRow",value:function(e){return this.containsIndex(In.VERTICAL,e)}},{key:"containsColumn",value:function(e){return this.containsIndex(In.HORIZONTAL,e)}},{key:"getIndices",value:function(e){var t=this.position.get(e),n=this.size.get(e);return _.range(t,t+n)}}]),n}(Zp(Tp)));Cr.register("GridCell",$p);var ef=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this)).initialize(e,i,r),a}return _createClass(n,[{key:"initialize",value:function(e,t,n){this.index=e,this.cells=t,this.grow=n,this.initializeLayoutLine()}},{key:"freeToPool",value:function(){n.pool.freeToPool(this)}}]),n}(Dp);_defineProperty(ef,"pool",new rn(ef,{defaultArguments:[0,[],0]})),Cr.register("GridLine",ef);var tf=[].concat(_toConsumableArray(Kp),["excludeInvisible","spacing","xSpacing","ySpacing"]),nf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),_defineProperty(_assertThisInitialized(r=t.call(this,e,i)),"cells",new Set),_defineProperty(_assertThisInitialized(r),"displayedCells",[]),_defineProperty(_assertThisInitialized(r),"displayedLines",new Pp(new Map,new Map)),_defineProperty(_assertThisInitialized(r),"_spacing",new Pp(0,0)),r.setConfigToBaseDefault(),r.mutateConfigurable(i),du(_assertThisInitialized(r),tf,i),r.changedEmitter.addListener(r._updateLayoutListener),r}return _createClass(n,[{key:"layout",value:function(){var e=this;_get(_getPrototypeOf(n.prototype),"layout",this).call(this);var t=this.filterLayoutCells(_toConsumableArray(this.cells));if(this.displayedCells=t,!t.length)return this.layoutBoundsProperty.value=jn.NOTHING,this.minimumWidthProperty.value=null,this.minimumHeightProperty.value=null,void this.displayedLines.forEach((function(e){return e.clear()}));var i=new Pp(0,0),r=new Pp(this.preferredWidthProperty.value,this.preferredHeightProperty.value),a=new jn(0,0,0,0);[In.HORIZONTAL,In.VERTICAL].forEach((function(n){var s=e._spacing.get(n),o=e.displayedLines.get(n);o.forEach((function(e){return e.freeToPool()})),o.clear();var l=_.sortedUniq(_.sortBy(_.flatten(t.map((function(e){return e.getIndices(n)}))))).map((function(e){var i=_.filter(t,(function(t){return t.containsIndex(n,e)})),r=Math.max.apply(Math,_toConsumableArray(i.map((function(e){return e.getEffectiveGrow(n)})))),a=ef.pool.create(e,i,r);return o.set(e,a),a})),u=l.slice(0,-1).map((function(e){return"number"==typeof s?s:s[e.index]}));t.forEach((function(e){if(1===e.size.get(n)){var t=o.get(e.position.get(n));if(t.min=Math.max(t.min,e.getMinimumSize(n)),t.max=Math.min(t.max,e.getMaximumSize(n)),e.getEffectiveAlign(n)===dp.ORIGIN){var i=e.getOriginBounds();t.minOrigin=Math.min(i[n.minCoordinate],t.minOrigin),t.maxOrigin=Math.max(i[n.maxCoordinate],t.maxOrigin)}}})),t.forEach((function(e){if(e.size.get(n)>1){var t=e.getIndices(n).map((function(e){return o.get(e)})),i=_.sum(t.map((function(e){return e.min}))),r=e.getMinimumSize(n);if(r>i){var a=(r-i)/t.length;t.forEach((function(e){e.min+=a}))}}})),l.forEach((function(e){e.hasOrigin()?e.size=Math.max(e.min,e.maxOrigin-e.minOrigin):e.size=e.min}));var c=_.sum(l.map((function(e){return e.size})))+_.sum(u);i.set(n,c);for(var h,d=Math.max(c,r.get(n)||0),p=d-c,f=function(){var e=_.sum(h.map((function(e){return e.grow}))),t=Math.min(Math.min.apply(Math,_toConsumableArray(h.map((function(e){return(e.max-e.size)/e.grow})))),p/e);h.forEach((function(e){e.size+=t*e.grow})),p-=t*e};p>1e-7&&(h=l.filter((function(e){return e.grow>0&&e.size<e.max-1e-7}))).length;)f();var m=(l[0].hasOrigin()?l[0].minOrigin:0)+e.layoutOriginProperty.value[n.coordinate];a[n.minCoordinate]=m,a[n.maxCoordinate]=m+d,l.forEach((function(e,t){var n=_.sum(l.slice(0,t).map((function(e){return e.size}))),i=_.sum(u.slice(0,t));e.position=m+n+i})),t.forEach((function(e){var t=e.position.get(n),i=e.size.get(n),r=t+i-1,s=e.getIndices(n).map((function(e){return o.get(e)})),c=o.get(t),h=0;t!==r&&l.slice(0,-1).forEach((function(e,n){e.index>=t&&e.index<r&&(h+=u[n])}));var d=_.sum(s.map((function(e){return e.size})))+h,p=c.position,f=e.reposition(n,d,p,e.getEffectiveStretch(n),-c.minOrigin,e.getEffectiveAlign(n));a[n.minCoordinate]=Math.min(a[n.minCoordinate],f[n.minCoordinate]),a[n.maxCoordinate]=Math.max(a[n.maxCoordinate],f[n.maxCoordinate])}))})),this.layoutBoundsProperty.value=a,this.minimumWidthProperty.value=i.horizontal,this.minimumHeightProperty.value=i.vertical,this.finishedLayoutEmitter.emit()}},{key:"spacing",get:function(){return this.xSpacing},set:function(e){this._spacing.get(In.HORIZONTAL)===e&&this._spacing.get(In.VERTICAL)===e||(this._spacing.set(In.HORIZONTAL,e),this._spacing.set(In.VERTICAL,e),this.updateLayoutAutomatically())}},{key:"xSpacing",get:function(){return this._spacing.get(In.HORIZONTAL)},set:function(e){this._spacing.get(In.HORIZONTAL)!==e&&(this._spacing.set(In.HORIZONTAL,e),this.updateLayoutAutomatically())}},{key:"ySpacing",get:function(){return this._spacing.get(In.VERTICAL)},set:function(e){this._spacing.get(In.VERTICAL)!==e&&(this._spacing.set(In.VERTICAL,e),this.updateLayoutAutomatically())}},{key:"addCell",value:function(e){this.cells.add(e),this.addNode(e.node),e.changedEmitter.addListener(this._updateLayoutListener),this.updateLayoutAutomatically()}},{key:"removeCell",value:function(e){this.cells.delete(e),this.removeNode(e.node),e.changedEmitter.removeListener(this._updateLayoutListener),this.updateLayoutAutomatically()}},{key:"dispose",value:function(){var e=this;this.lock(),_toConsumableArray(this.cells).forEach((function(t){return e.removeCell(t)})),this.displayedLines.forEach((function(e){return e.clear()})),this.displayedCells=[],_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.unlock()}},{key:"getIndices",value:function(e){var t=[];return this.cells.forEach((function(n){t.push.apply(t,_toConsumableArray(n.getIndices(e)))})),_.sortedUniq(_.sortBy(t))}},{key:"getCell",value:function(e,t){return _.find(_toConsumableArray(this.cells),(function(n){return n.containsRow(e)&&n.containsColumn(t)}))||null}},{key:"getCellFromNode",value:function(e){return _.find(_toConsumableArray(this.cells),(function(t){return t.node===e}))||null}},{key:"getCells",value:function(e,t){return _.filter(_toConsumableArray(this.cells),(function(n){return n.containsIndex(e,t)}))}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Zp(Np));Cr.register("GridConstraint",nf);var rf=[].concat(Ip,_toConsumableArray(tf.filter((function(e){return"excludeInvisible"!==e}))),["rows","columns","autoRows","autoColumns"]),af=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({excludeInvisibleChildrenFromBounds:!0,resize:!0},e);_defineProperty(_assertThisInitialized(i=t.call(this)),"_cellMap",new Map),_defineProperty(_assertThisInitialized(i),"_autoRows",null),_defineProperty(_assertThisInitialized(i),"_autoColumns",null),_defineProperty(_assertThisInitialized(i),"_autoLockCount",0),i._constraint=new nf(_assertThisInitialized(i),{preferredWidthProperty:i.localPreferredWidthProperty,preferredHeightProperty:i.localPreferredHeightProperty,minimumWidthProperty:i.localMinimumWidthProperty,minimumHeightProperty:i.localMinimumHeightProperty,layoutOriginProperty:i.layoutOriginProperty,excludeInvisible:!1}),i.onChildInserted=i.onGridBoxChildInserted.bind(_assertThisInitialized(i)),i.onChildRemoved=i.onGridBoxChildRemoved.bind(_assertThisInitialized(i)),i.onChildVisibilityToggled=i.updateAllAutoLines.bind(_assertThisInitialized(i)),i.childInsertedEmitter.addListener(i.onChildInserted),i.childRemovedEmitter.addListener(i.onChildRemoved);var a=_.omit(r,Yo),s=_.pick(r,Yo);return i._constraint.lock(),i.mutate(a),i._constraint.unlock(),i._constraint.updateLayout(),i.mutate(s),i.linkLayoutBounds(),i}return _createClass(n,[{key:"setLines",value:function(e,t){for(var n=[],i=0;i<t.length;i++)for(var r=t[i],a=0;a<r.length;a++){var s,o=r[a];if(null!==o)n.push(o),o.mutateLayoutOptions((_defineProperty(s={},e.line,i),_defineProperty(s,e.opposite.line,a),s))}this.children=n}},{key:"getLines",value:function(e){var t,n=[],i=_createForOfIteratorHelper(this._cellMap.values());try{for(i.s();!(t=i.n()).done;){for(var r=t.value,a=r.position.get(e),s=r.position.get(e.opposite);n.length<a+1;)n.push([]);for(;n[a].length<s+1;)n[a].push(null);n[a][s]=r.node}}catch(o){i.e(o)}finally{i.f()}return n}},{key:"rows",get:function(){return this.getLines(In.VERTICAL)},set:function(e){this.setLines(In.VERTICAL,e)}},{key:"columns",get:function(){return this.getLines(In.HORIZONTAL)},set:function(e){this.setLines(In.HORIZONTAL,e)}},{key:"getNodeAt",value:function(e,t){var n=this.constraint.getCell(e,t);return n?n.node:null}},{key:"getRowOfNode",value:function(e){return this.constraint.getCellFromNode(e).position.vertical}},{key:"getColumnOfNode",value:function(e){return this.constraint.getCellFromNode(e).position.horizontal}},{key:"getNodesInRow",value:function(e){return this.constraint.getCells(In.VERTICAL,e).map((function(e){return e.node}))}},{key:"getNodesInColumn",value:function(e){return this.constraint.getCells(In.HORIZONTAL,e).map((function(e){return e.node}))}},{key:"addRow",value:function(e){return this.rows=[].concat(_toConsumableArray(this.rows),[e]),this}},{key:"addColumn",value:function(e){return this.columns=[].concat(_toConsumableArray(this.columns),[e]),this}},{key:"insertRow",value:function(e,t){return this.rows=[].concat(_toConsumableArray(this.rows.slice(0,e)),[t],_toConsumableArray(this.rows.slice(e))),this}},{key:"insertColumn",value:function(e,t){return this.columns=[].concat(_toConsumableArray(this.columns.slice(0,e)),[t],_toConsumableArray(this.columns.slice(e))),this}},{key:"removeRow",value:function(e){return this.rows=[].concat(_toConsumableArray(this.rows.slice(0,e)),_toConsumableArray(this.rows.slice(e+1))),this}},{key:"removeColumn",value:function(e){return this.columns=[].concat(_toConsumableArray(this.columns.slice(0,e)),_toConsumableArray(this.columns.slice(e+1))),this}},{key:"autoRows",get:function(){return this._autoRows},set:function(e){this._autoRows!==e&&(this._autoRows=e,this.updateAutoRows())}},{key:"autoColumns",get:function(){return this._autoColumns},set:function(e){this._autoColumns!==e&&(this._autoColumns=e,this.updateAutoColumns())}},{key:"updateAutoLines",value:function(e,t){var n=this;if(null!==t&&0===this._autoLockCount){var i=0;this.constraint.lock(),this.children.filter((function(e){return e.bounds.isValid()&&(!n._constraint.excludeInvisible||e.visible)})).forEach((function(n,r){var a,s=r%t,o=Math.floor(r/t);n.layoutOptions&&n.layoutOptions[e.line]===s&&n.layoutOptions[e.opposite.line]===o&&1===n.layoutOptions.horizontalSpan&&1===n.layoutOptions.verticalSpan||(i++,n.mutateLayoutOptions((_defineProperty(a={},e.line,r%t),_defineProperty(a,e.opposite.line,Math.floor(r/t)),_defineProperty(a,"horizontalSpan",1),_defineProperty(a,"verticalSpan",1),a)))})),this.constraint.unlock(),i>0&&this.constraint.updateLayoutAutomatically()}}},{key:"updateAutoRows",value:function(){this.updateAutoLines(In.VERTICAL,this.autoRows)}},{key:"updateAutoColumns",value:function(){this.updateAutoLines(In.HORIZONTAL,this.autoColumns)}},{key:"updateAllAutoLines",value:function(){this.updateAutoRows(),this.updateAutoColumns()}},{key:"setChildren",value:function(e){var t=this.getChildren();return this._autoLockCount++,_get(_getPrototypeOf(n.prototype),"setChildren",this).call(this,e),this._autoLockCount--,_.isEqual(t,e)||this.updateAllAutoLines(),this}},{key:"onGridBoxChildInserted",value:function(e,t){e.visibleProperty.lazyLink(this.onChildVisibilityToggled);var n=new $p(this._constraint,e,this._constraint.createLayoutProxy(e));this._cellMap.set(e,n),this._constraint.addCell(n),this.updateAllAutoLines()}},{key:"onGridBoxChildRemoved",value:function(e){var t=this._cellMap.get(e);this._cellMap.delete(e),this._constraint.removeCell(t),t.dispose(),this.updateAllAutoLines(),e.visibleProperty.unlink(this.onChildVisibilityToggled)}},{key:"mutate",value:function(e){return H(e,["rows"],["columns"],["children","autoRows","autoColumns"]),_get(_getPrototypeOf(n.prototype),"mutate",this).call(this,e)}},{key:"spacing",get:function(){return this._constraint.spacing},set:function(e){this._constraint.spacing=e}},{key:"xSpacing",get:function(){return this._constraint.xSpacing},set:function(e){this._constraint.xSpacing=e}},{key:"ySpacing",get:function(){return this._constraint.ySpacing},set:function(e){this._constraint.ySpacing=e}},{key:"xAlign",get:function(){return this._constraint.xAlign},set:function(e){this._constraint.xAlign=e}},{key:"yAlign",get:function(){return this._constraint.yAlign},set:function(e){this._constraint.yAlign=e}},{key:"grow",get:function(){return this._constraint.grow},set:function(e){this._constraint.grow=e}},{key:"xGrow",get:function(){return this._constraint.xGrow},set:function(e){this._constraint.xGrow=e}},{key:"yGrow",get:function(){return this._constraint.yGrow},set:function(e){this._constraint.yGrow=e}},{key:"stretch",get:function(){return this._constraint.stretch},set:function(e){this._constraint.stretch=e}},{key:"xStretch",get:function(){return this._constraint.xStretch},set:function(e){this._constraint.xStretch=e}},{key:"yStretch",get:function(){return this._constraint.yStretch},set:function(e){this._constraint.yStretch=e}},{key:"margin",get:function(){return this._constraint.margin},set:function(e){this._constraint.margin=e}},{key:"xMargin",get:function(){return this._constraint.xMargin},set:function(e){this._constraint.xMargin=e}},{key:"yMargin",get:function(){return this._constraint.yMargin},set:function(e){this._constraint.yMargin=e}},{key:"leftMargin",get:function(){return this._constraint.leftMargin},set:function(e){this._constraint.leftMargin=e}},{key:"rightMargin",get:function(){return this._constraint.rightMargin},set:function(e){this._constraint.rightMargin=e}},{key:"topMargin",get:function(){return this._constraint.topMargin},set:function(e){this._constraint.topMargin=e}},{key:"bottomMargin",get:function(){return this._constraint.bottomMargin},set:function(e){this._constraint.bottomMargin=e}},{key:"minContentWidth",get:function(){return this._constraint.minContentWidth},set:function(e){this._constraint.minContentWidth=e}},{key:"minContentHeight",get:function(){return this._constraint.minContentHeight},set:function(e){this._constraint.minContentHeight=e}},{key:"maxContentWidth",get:function(){return this._constraint.maxContentWidth},set:function(e){this._constraint.maxContentWidth=e}},{key:"maxContentHeight",get:function(){return this._constraint.maxContentHeight},set:function(e){this._constraint.maxContentHeight=e}},{key:"setExcludeInvisibleChildrenFromBounds",value:function(e){_get(_getPrototypeOf(n.prototype),"setExcludeInvisibleChildrenFromBounds",this).call(this,e),this.updateAllAutoLines()}},{key:"dispose",value:function(){this._constraint.lock(),this.childInsertedEmitter.removeListener(this.onChildInserted),this.childRemovedEmitter.removeListener(this.onChildRemoved);var e,t=_createForOfIteratorHelper(this._cellMap.values());try{for(t.s();!(e=t.n()).done;){var i=e.value;i.dispose(),i.node.visibleProperty.unlink(this.onChildVisibilityToggled)}}catch(r){t.e(r)}finally{t.f()}_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"getHelperNode",value:function(){return Tp.createHelperNode(this.constraint.displayedCells,this.constraint.layoutBoundsProperty.value,(function(e){var t="";return t+="row: ".concat(e.position.vertical,"\n"),t+="column: ".concat(e.position.horizontal,"\n"),e.size.horizontal>1&&(t+="horizontalSpan: ".concat(e.size.horizontal,"\n")),e.size.vertical>1&&(t+="verticalSpan: ".concat(e.size.vertical,"\n")),t+="xAlign: ".concat(dp.internalToAlign(In.HORIZONTAL,e.effectiveXAlign),"\n"),t+="yAlign: ".concat(dp.internalToAlign(In.VERTICAL,e.effectiveYAlign),"\n"),t+="xStretch: ".concat(e.effectiveXStretch,"\n"),t+="yStretch: ".concat(e.effectiveYStretch,"\n"),t+="xGrow: ".concat(e.effectiveXGrow,"\n"),t+="yGrow: ".concat(e.effectiveYGrow,"\n")}))}}]),n}(Rp);af.prototype._mutatorKeys=[].concat(_toConsumableArray(gl),_toConsumableArray(rf),_toConsumableArray(jo.prototype._mutatorKeys)),Cr.register("GridBox",af);var sf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),H(i,["createCellBackground"],["fill","stroke"]);var a=S()({fill:"white",stroke:"black",createCellBackground:function(e){return iu.bounds(e.lastAvailableBounds,{fill:a.fill,stroke:a.stroke})}},i);return(r=t.call(this)).constraint=e,r.createCellBackground=a.createCellBackground,r.layoutListener=r.update.bind(_assertThisInitialized(r)),r.constraint.finishedLayoutEmitter.addListener(r.layoutListener),r.update(),r.mutate(a),r}return _createClass(n,[{key:"update",value:function(){this.children=this.constraint.displayedCells.map(this.createCellBackground).filter(_.identity)}},{key:"dispose",value:function(){this.constraint.finishedLayoutEmitter.removeListener(this.layoutListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);Cr.register("GridBackgroundNode",sf);var of=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).lock(),a.nodes=i,a.cells=i.map((function(e){return new _p(_assertThisInitialized(a),e,null)})),a.layoutCallback=r,a.nodes.forEach((function(e){return a.addNode(e,!1)})),a.unlock(),a.updateLayout(),a}return _createClass(n,[{key:"layout",value:function(){if(_get(_getPrototypeOf(n.prototype),"layout",this).call(this),!_.some(this.cells,(function(e){return!e.isConnected()}))){var e=this.cells.map((function(e){return e.proxy}));this.layoutCallback.apply(null,e),this.finishedLayoutEmitter.emit()}}},{key:"dispose",value:function(){this.cells.forEach((function(e){return e.dispose()})),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"create",value:function(e,t,i){return new n(e,t,i)}}]),n}(wp);Cr.register("ManualConstraint",of);var lf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this,e)).lock(),a.nodes=i,a.cells=i.map((function(e){return new _p(_assertThisInitialized(a),e,null)})),a.layoutCallback=r,a.nodes.forEach((function(e){return a.addNode(e,!1)})),a.unlock(),a.updateLayout(),a}return _createClass(n,[{key:"layout",value:function(){_get(_getPrototypeOf(n.prototype),"layout",this).call(this);var e=this.cells.map((function(e){return e.isConnected()?e.proxy:null}));this.layoutCallback.apply(null,e),this.finishedLayoutEmitter.emit()}},{key:"dispose",value:function(){this.cells.forEach((function(e){return e.dispose()})),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"create",value:function(e,t,i){return new n(e,t,i)}}]),n}(wp);Cr.register("RelaxedManualConstraint",lf);var uf=vl(jo),cf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({children:[e]},i);return _defineProperty(_assertThisInitialized(r=t.call(this,{sizable:!1})),"_xSet",!1),_defineProperty(_assertThisInitialized(r),"_ySet",!1),_defineProperty(_assertThisInitialized(r),"_contentBoundsListener",_.noop),r._content=e,r._alignBounds=null,r._xAlign="center",r._yAlign="center",r._leftMargin=0,r._rightMargin=0,r._topMargin=0,r._bottomMargin=0,r._group=null,r._contentBoundsListener=r.invalidateAlignment.bind(_assertThisInitialized(r)),r._alignBoundsProperty=null,r._alignBoundsPropertyListener=_.noop,H(a,["alignBounds"],["alignBoundsProperty"]),null!=i&&i.alignBoundsProperty&&(r._alignBoundsProperty=i.alignBoundsProperty,a.alignBounds=r._alignBoundsProperty.value,r._alignBoundsPropertyListener=function(e){r.alignBounds=e},r._alignBoundsProperty.lazyLink(r._alignBoundsPropertyListener)),r.localBounds=new jn(0,0,0,0),r.constraint=new hf(_assertThisInitialized(r),e),r._content.boundsProperty.link(r._contentBoundsListener),r.mutate(a),nn.multilink([r.localPreferredWidthProperty,r.localPreferredHeightProperty],(function(e,t){if(null!==e||null!==t){var n=r._alignBounds||new jn(0,0,0,0);e&&(n.minX=0,n.maxX=e,r._xSet=!0),t&&(n.minY=0,n.maxY=t,r._ySet=!0),r._alignBounds=n,r.constraint.updateLayout()}})),r}return _createClass(n,[{key:"invalidateAlignment",value:function(){this._group&&this._group.onAlignBoxResized(this),this.constraint.updateLayout()}},{key:"setAlignBounds",value:function(e){return this._xSet=!0,this._ySet=!0,this._alignBounds===e||e&&this._alignBounds&&e.equals(this._alignBounds)||(this._alignBounds=e,this.constraint.updateLayout()),this}},{key:"alignBounds",get:function(){return this.getAlignBounds()},set:function(e){this.setAlignBounds(e)}},{key:"getAlignBounds",value:function(){return this._alignBounds}},{key:"setGroup",value:function(e){return this._group!==e&&(this._group&&this._group.removeAlignBox(this),this._group=e,this._group&&this._group.addAlignBox(this)),this}},{key:"group",get:function(){return this.getGroup()},set:function(e){this.setGroup(e)}},{key:"getGroup",value:function(){return this._group}},{key:"setXAlign",value:function(e){return this._xAlign!==e&&(this._xAlign=e,this.invalidateAlignment()),this}},{key:"xAlign",get:function(){return this.getXAlign()},set:function(e){this.setXAlign(e)}},{key:"getXAlign",value:function(){return this._xAlign}},{key:"setYAlign",value:function(e){return this._yAlign!==e&&(this._yAlign=e,this.invalidateAlignment()),this}},{key:"yAlign",get:function(){return this.getYAlign()},set:function(e){this.setYAlign(e)}},{key:"getYAlign",value:function(){return this._yAlign}},{key:"setMargin",value:function(e){return this._leftMargin===e&&this._rightMargin===e&&this._topMargin===e&&this._bottomMargin===e||(this._leftMargin=this._rightMargin=this._topMargin=this._bottomMargin=e,this.invalidateAlignment()),this}},{key:"margin",get:function(){return this.getMargin()},set:function(e){this.setMargin(e)}},{key:"getMargin",value:function(){return this._leftMargin}},{key:"setXMargin",value:function(e){return this._leftMargin===e&&this._rightMargin===e||(this._leftMargin=this._rightMargin=e,this.invalidateAlignment()),this}},{key:"xMargin",get:function(){return this.getXMargin()},set:function(e){this.setXMargin(e)}},{key:"getXMargin",value:function(){return this._leftMargin}},{key:"setYMargin",value:function(e){return this._topMargin===e&&this._bottomMargin===e||(this._topMargin=this._bottomMargin=e,this.invalidateAlignment()),this}},{key:"yMargin",get:function(){return this.getYMargin()},set:function(e){this.setYMargin(e)}},{key:"getYMargin",value:function(){return this._topMargin}},{key:"setLeftMargin",value:function(e){return this._leftMargin!==e&&(this._leftMargin=e,this.invalidateAlignment()),this}},{key:"leftMargin",get:function(){return this.getLeftMargin()},set:function(e){this.setLeftMargin(e)}},{key:"getLeftMargin",value:function(){return this._leftMargin}},{key:"setRightMargin",value:function(e){return this._rightMargin!==e&&(this._rightMargin=e,this.invalidateAlignment()),this}},{key:"rightMargin",get:function(){return this.getRightMargin()},set:function(e){this.setRightMargin(e)}},{key:"getRightMargin",value:function(){return this._rightMargin}},{key:"setTopMargin",value:function(e){return this._topMargin!==e&&(this._topMargin=e,this.invalidateAlignment()),this}},{key:"topMargin",get:function(){return this.getTopMargin()},set:function(e){this.setTopMargin(e)}},{key:"getTopMargin",value:function(){return this._topMargin}},{key:"setBottomMargin",value:function(e){return this._bottomMargin!==e&&(this._bottomMargin=e,this.invalidateAlignment()),this}},{key:"bottomMargin",get:function(){return this.getBottomMargin()},set:function(e){this.setBottomMargin(e)}},{key:"getBottomMargin",value:function(){return this._bottomMargin}},{key:"getContentBounds",value:function(){var e=this._content.bounds;return new jn(e.left-this._leftMargin,e.top-this._topMargin,e.right+this._rightMargin,e.bottom+this._bottomMargin)}},{key:"setAdjustedLocalBounds",value:function(e){if(this._xSet&&this._ySet)this.localBounds=e;else if(this._xSet){var t=this.getContentBounds();this.localBounds=new jn(e.minX,t.minY,e.maxX,t.maxY)}else if(this._ySet){var n=this.getContentBounds();this.localBounds=new jn(n.minX,e.minY,n.maxX,e.maxY)}else this.localBounds=this.getContentBounds()}},{key:"dispose",value:function(){this._alignBoundsProperty&&this._alignBoundsProperty.unlink(this._alignBoundsPropertyListener),this._content.boundsProperty.unlink(this._contentBoundsListener),this.group=null,this.constraint.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(uf),hf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,e)).alignBox=e,r.content=i,r.addNode(i),e.isWidthResizableProperty.lazyLink(r._updateLayoutListener),e.isHeightResizableProperty.lazyLink(r._updateLayoutListener),r}return _createClass(n,[{key:"updateProperty",value:function(e,t){var n=this.content[e],i=this.alignBox.localBounds[e]+t;Math.abs(n-i)>1e-5&&(this.content[e]=i)}},{key:"layout",value:function(){_get(_getPrototypeOf(n.prototype),"layout",this).call(this);var e=this.alignBox,t=this.content;if(t.bounds.isValid()){var i=e.leftMargin+e.rightMargin,r=e.topMargin+e.bottomMargin;if(null!==e.alignBounds)e.setAdjustedLocalBounds(e.alignBounds);else{var a=t.width+i,s=t.height+r;e.setAdjustedLocalBounds(new jn(0,0,a,s))}var o=isFinite(t.width)?(ol(t)?t.minimumWidth||0:t.width)+i:null,l=isFinite(t.height)?(dl(t)?t.minimumHeight||0:t.height)+r:null;t.localBounds.isEmpty()||("center"===e.xAlign?this.updateProperty("centerX",(e.leftMargin-e.rightMargin)/2):"left"===e.xAlign?this.updateProperty("left",e.leftMargin):"right"===e.xAlign?this.updateProperty("right",-e.rightMargin):"stretch"===e.xAlign&&(t.preferredWidth=e.localWidth-e.leftMargin-e.rightMargin,this.updateProperty("left",e.leftMargin)),"center"===e.yAlign?this.updateProperty("centerY",(e.topMargin-e.bottomMargin)/2):"top"===e.yAlign?this.updateProperty("top",e.topMargin):"bottom"===e.yAlign?this.updateProperty("bottom",-e.bottomMargin):"stretch"===e.yAlign&&(t.preferredHeight=e.localHeight-e.topMargin-e.bottomMargin,this.updateProperty("top",e.topMargin))),e.localMinimumWidth=e.widthSizable?o:e.localWidth,e.localMinimumHeight=e.heightSizable?l:e.localHeight}}}]),n}(wp);cf.prototype._mutatorKeys=["alignBounds","xAlign","yAlign","margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","group"].concat(uf.prototype._mutatorKeys),Cr.register("AlignBox",cf);var df=1,pf={matchHorizontal:!0,matchVertical:!0},ff=function(){function e(t){_classCallCheck(this,e);var n=E()({},pf,t);this._alignBoxes=[],this._matchHorizontal=n.matchHorizontal,this._matchVertical=n.matchVertical,this._resizeLock=!1,this._maxWidthProperty=new Nt(0),this._maxHeightProperty=new Nt(0),this.id=df++}return _createClass(e,[{key:"getMaxWidth",value:function(){return this._maxWidthProperty.value}},{key:"maxWidth",get:function(){return this.getMaxWidth()}},{key:"getMaxWidthProperty",value:function(){return this._maxWidthProperty}},{key:"maxWidthProperty",get:function(){return this.getMaxWidthProperty()}},{key:"getMaxHeight",value:function(){return this._maxHeightProperty.value}},{key:"maxHeight",get:function(){return this.getMaxHeight()}},{key:"getMaxHeightProperty",value:function(){return this._maxHeightProperty}},{key:"maxHeightProperty",get:function(){return this.getMaxHeightProperty()}},{key:"createBox",value:function(e,t){return new cf(e,k({group:this},t))}},{key:"setMatchHorizontal",value:function(e){return this._matchHorizontal!==e&&(this._matchHorizontal=e,this.updateLayout()),this}},{key:"matchHorizontal",get:function(){return this.getMatchHorizontal()},set:function(e){this.setMatchHorizontal(e)}},{key:"getMatchHorizontal",value:function(){return this._matchHorizontal}},{key:"setMatchVertical",value:function(e){return this._matchVertical!==e&&(this._matchVertical=e,this.updateLayout()),this}},{key:"matchVertical",get:function(){return this.getMatchVertical()},set:function(e){this.setMatchVertical(e)}},{key:"getMatchVertical",value:function(){return this._matchVertical}},{key:"dispose",value:function(){for(var e=this._alignBoxes.length-1;e>=0;e--)this._alignBoxes[e].dispose()}},{key:"updateLayout",value:function(){if(!this._resizeLock){this._resizeLock=!0;for(var e=0,t=0,n=0;n<this._alignBoxes.length;n++){var i=this._alignBoxes[n].getContentBounds();!i.isEmpty()&&i.isFinite()&&(e=Math.max(e,i.width),t=Math.max(t,i.height))}if(this._maxWidthProperty.value=e,this._maxHeightProperty.value=t,e>0&&t>0)for(var r=0;r<this._alignBoxes.length;r++)this.setBoxBounds(this._alignBoxes[r],e,t);this._resizeLock=!1}}},{key:"setBoxBounds",value:function(e,t,n){var i;if(this._matchVertical&&this._matchHorizontal)i=new jn(0,0,t,n);else{var r=e.getContentBounds();i=this._matchVertical?new jn(0,0,isFinite(r.width)?r.width:t,n):this._matchHorizontal?new jn(0,0,t,isFinite(r.height)?r.height:n):r}e.alignBounds=i}},{key:"onAlignBoxResized",value:function(e){this.updateLayout()}},{key:"addAlignBox",value:function(e){this._alignBoxes.push(e),this.updateLayout()}},{key:"removeAlignBox",value:function(e){J(this._alignBoxes,e),this.updateLayout()}}]),e}();Cr.register("AlignGroup",ff);var mf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,S()({orientation:"horizontal"},e))}return _createClass(n,[{key:"onFlowBoxChildInserted",value:function(e,t){_get(_getPrototypeOf(n.prototype),"onFlowBoxChildInserted",this).call(this,e,t)}}]),n}(Qp);Cr.register("HBox",mf);var gf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,S()({orientation:"vertical"},e))}return _createClass(n,[{key:"onFlowBoxChildInserted",value:function(e,t){_get(_getPrototypeOf(n.prototype),"onFlowBoxChildInserted",this).call(this,e,t)}}]),n}(Qp);Cr.register("VBox",gf);var yf=["boundsMethod","font","fill","stroke","lineWidth","subScale","subXSpacing","subYOffset","supScale","supXSpacing","supYOffset","capHeightScale","underlineLineWidth","underlineHeightScale","strikethroughLineWidth","strikethroughHeightScale","linkFill","linkEventsHandled","links","align","leading","lineWrap",Xl.STRING_PROPERTY_NAME,"text"],vf=function(e){return"element"===e.type.toLowerCase()},Af=function(e){return"text"===e.type.toLowerCase()},bf=new Qr({size:20}),Sf=["b","strong","i","em","sub","sup","u","s"],Ef="COMPLETE",kf="INCOMPLETE",Vf="NONE",wf=function(e,t){if(!t)return null;var n=_.find(t.attributes,(function(t){return t.key===e}));return n&&n.value||null},_f=new Xl(""),Cf={"font-family":"family","font-size":"size","font-stretch":"stretch","font-style":"style","font-variant":"variant","font-weight":"weight","line-height":"lineHeight"},xf=Object.keys(Cf),Pf=(["color"].concat(xf),function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({fill:"#000000",tandem:xe.OPTIONAL,tandemNameSuffix:"Text",phetioType:n.RichTextIO,phetioVisiblePropertyInstrumented:!1},i);return"string"==typeof e||"number"==typeof e?a.text=e:a.stringProperty=e,(r=t.call(this))._stringProperty=new _n("",!0,r.onStringPropertyChange.bind(_assertThisInitialized(r))),r._font=bf,r._boundsMethod="hybrid",r._fill="#000000",r._stroke=null,r._lineWidth=1,r._subScale=.75,r._subXSpacing=0,r._subYOffset=0,r._supScale=.75,r._supXSpacing=0,r._supYOffset=0,r._capHeightScale=.75,r._underlineLineWidth=1,r._underlineHeightScale=.15,r._strikethroughLineWidth=1,r._strikethroughHeightScale=.3,r._linkFill="rgb(27,0,241)",r._linkEventsHandled=!1,r._links={},r._align="left",r._leading=0,r._lineWrap=null,r._linkItems=[],r._hasAddedLeafToLine=!1,r.lineContainer=new jo({}),r.addChild(r.lineContainer),r.rebuildRichText(),r.mutate(a),r}return _createClass(n,[{key:"onStringPropertyChange",value:function(){this.rebuildRichText()}},{key:"setStringProperty",value:function(e){return this._stringProperty.setTargetProperty(this,n.STRING_PROPERTY_TANDEM_NAME,e)}},{key:"stringProperty",get:function(){return this.getStringProperty()},set:function(e){this.setStringProperty(e)}},{key:"getStringProperty",value:function(){return this._stringProperty}},{key:"initializePhetioObject",value:function(e,t){var i=this,r=S()({},t),a=this.isPhetioInstrumented();_get(_getPrototypeOf(n.prototype),"initializePhetioObject",this).call(this,e,r),xe.PHET_IO_ENABLED&&!a&&this.isPhetioInstrumented()&&this._stringProperty.initializePhetio(this,n.STRING_PROPERTY_TANDEM_NAME,(function(){return new wn(i.text,k({phetioReadOnly:!0,tandem:i.tandem.createTandem(n.STRING_PROPERTY_TANDEM_NAME),phetioDocumentation:"Property for the displayed text"},r.stringPropertyOptions))}))}},{key:"rebuildRichText",value:function(){var e=this;if(this.freeChildrenToPool(),""!==this.text){var t=this.text.replace(/\u202a/g,'<span dir="ltr">').replace(/\u202b/g,'<span dir="rtl">').replace(/\u202c/g,"</span>"),n=himalaya.parse(t);this._linkItems.length=0;var i=null===this._lineWrap?Number.POSITIVE_INFINITY:this._lineWrap,r=Mf.pool.create(!0);for(this._hasAddedLeafToLine=!1;n.length;){var a=n[0],s=r.bounds.isValid()?r.width:0,o=this.appendElement(r,a,this._font,this._fill,!0,i-s);o!==Vf&&(r.bounds.isValid()?this.appendLine(r):this.appendLine(Rf.pool.create(_f.setText("X").setFont(this._font).height)),r=Mf.pool.create(!0),this._hasAddedLeafToLine=!1),o!==kf&&n.splice(0,1)}for(r.bounds.isValid()&&this.appendLine(r),0===this.lineContainer.getChildrenCount()&&this.appendEmptyLeaf(),this.alignLines();this._linkItems.length;)!function(){var t,n=e._linkItems[0].element,i=e._linkItems[0].href,r=[];for(t=e._linkItems.length-1;t>=0;t--){var a=e._linkItems[t];a.element===n&&(r.push(a.node),e._linkItems.splice(t,1))}var s=If.pool.create(n.innerContent,i);for(e.lineContainer.addChild(s),t=0;t<r.length;t++){var o=r[t],l=o.getUniqueTrailTo(e.lineContainer).getMatrix();o.detach(),o.matrix=l,s.addChild(o)}}();this._linkItems.length=0}else this.appendEmptyLeaf()}},{key:"freeChildrenToPool",value:function(){for(;this.lineContainer._children.length;){var e=this.lineContainer._children[this.lineContainer._children.length-1];this.lineContainer.removeChild(e),e.clean()}}},{key:"dispose",value:function(){this.freeChildrenToPool(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this._stringProperty.dispose()}},{key:"appendLine",value:function(e){this.lineContainer.bounds.isValid()&&(e.top=this.lineContainer.bottom+this._leading,e.left=0),this.lineContainer.addChild(e)}},{key:"appendEmptyLeaf",value:function(){this.appendLine(Lf.pool.create("",!0,this._font,this._boundsMethod,this._fill,this._stroke,this._lineWidth))}},{key:"alignLines",value:function(){for(var e="center"===this._align?"centerX":this._align,t=this.lineContainer[e],n=0;n<this.lineContainer.getChildrenCount();n++)this.lineContainer.getChildAt(n)[e]=t}},{key:"appendElement",value:function(e,t,i,r,a,s){var o,l,u,c=Vf;if(Af(t)){o=Lf.pool.create(t.content,a,i,this._boundsMethod,r,this._stroke,this._lineWidth);var h=a?e.rightSpacing:e.leftSpacing;if(!o.fitsIn(s-h,this._hasAddedLeafToLine,a)){var d=os(t.content),p=function(e){return 0===e.length?"":t.content.slice(e[0].min,e[e.length-1].max)};if(this._hasAddedLeafToLine||d.length>1){var f=[],m=!1;for(f.unshift(d.pop());d.length;){if((o=Lf.pool.create(p(d),a,i,this._boundsMethod,r,this._stroke,this._lineWidth)).fitsIn(s-h,this._hasAddedLeafToLine,a)||!(this._hasAddedLeafToLine||d.length>1)){m=!0;break}f.unshift(d.pop())}if(!m)return kf;c=kf,t.content=p(f)}}this._hasAddedLeafToLine=!0}else if(vf(t)){if("br"===t.tagName)return Ef;if("span"===t.tagName){var g=wf("dir",t);g&&(a="ltr"===g)}o=Mf.pool.create(a);var y=wf("style",t);if(y){var v=(l=y.split(";"),u={},l.forEach((function(e){if(e.length>0){var t=e.split(":");u[t[0].trim()]=t[1].trim()}})),u);v.color&&(r=new Rr(v.color));for(var A={},b=0;b<xf.length;b++){var S=xf[b];v[S]&&(A[Cf[S]]=v[S])}i=("string"==typeof i?Qr.fromCSS(i):i).copy(A)}if("a"===t.tagName){var E=wf("href",t);null!==E&&!0!==this._links&&(E=E.startsWith("{{")&&E.indexOf("}}")===E.length-2?this._links[E.slice(2,-2)]:null),E&&(null!==this._linkFill&&(r=this._linkFill),t.innerContent||(t.innerContent=n.himalayaElementToAccessibleString(t,a)),this._linkItems.push({element:t,node:o,href:E}))}else"b"===t.tagName||"strong"===t.tagName?i=("string"==typeof i?Qr.fromCSS(i):i).copy({weight:"bold"}):"i"===t.tagName||"em"===t.tagName?i=("string"==typeof i?Qr.fromCSS(i):i).copy({style:"italic"}):"sub"===t.tagName?(o.scale(this._subScale),o.addExtraBeforeSpacing(this._subXSpacing),o.y+=this._subYOffset):"sup"===t.tagName&&(o.scale(this._supScale),o.addExtraBeforeSpacing(this._supXSpacing),o.y+=this._supYOffset);for(var k=o.getScaleVector().x;c===Vf&&t.children.length;){var V=o.bounds.isValid()?o.width:0,w=t.children[0];(c=this.appendElement(o,w,i,r,a,s/k))!==kf&&t.children.splice(0,1),s+=V-(o.bounds.isValid()?o.width:0)}if(c===Ef&&t.children.length&&(c=kf),"sub"===t.tagName)isFinite(o.height)&&(o.centerY=0);else if("sup"===t.tagName)isFinite(o.height)&&(o.centerY=_f.setText("X").setFont(i).top*this._capHeightScale);else if("u"===t.tagName){var _=-o.top*this._underlineHeightScale;isFinite(o.top)&&o.addChild(new tu(o.localLeft,_,o.localRight,_,{stroke:r,lineWidth:this._underlineLineWidth}))}else if("s"===t.tagName){var C=o.top*this._strikethroughHeightScale;isFinite(o.top)&&o.addChild(new tu(o.localLeft,C,o.localRight,C,{stroke:r,lineWidth:this._strikethroughLineWidth}))}}o&&(e.addElement(o)||(this._linkItems=this._linkItems.filter((function(e){return e.node!==o})),o.clean()));return c}},{key:"setText",value:function(e){return e="".concat(e),this._stringProperty.set(e),this}},{key:"text",get:function(){return this.getText()},set:function(e){this.setText(e)}},{key:"getText",value:function(){return this._stringProperty.value}},{key:"setBoundsMethod",value:function(e){return e!==this._boundsMethod&&(this._boundsMethod=e,this.rebuildRichText()),this}},{key:"boundsMethod",get:function(){return this.getBoundsMethod()},set:function(e){this.setBoundsMethod(e)}},{key:"getBoundsMethod",value:function(){return this._boundsMethod}},{key:"setFont",value:function(e){return this._font!==e&&(this._font=e,this.rebuildRichText()),this}},{key:"font",get:function(){return this.getFont()},set:function(e){this.setFont(e)}},{key:"getFont",value:function(){return this._font}},{key:"setFill",value:function(e){return this._fill!==e&&(this._fill=e,this.rebuildRichText()),this}},{key:"fill",get:function(){return this.getFill()},set:function(e){this.setFill(e)}},{key:"getFill",value:function(){return this._fill}},{key:"setStroke",value:function(e){return this._stroke!==e&&(this._stroke=e,this.rebuildRichText()),this}},{key:"stroke",get:function(){return this.getStroke()},set:function(e){this.setStroke(e)}},{key:"getStroke",value:function(){return this._stroke}},{key:"setLineWidth",value:function(e){return this._lineWidth!==e&&(this._lineWidth=e,this.rebuildRichText()),this}},{key:"lineWidth",get:function(){return this.getLineWidth()},set:function(e){this.setLineWidth(e)}},{key:"getLineWidth",value:function(){return this._lineWidth}},{key:"setSubScale",value:function(e){return this._subScale!==e&&(this._subScale=e,this.rebuildRichText()),this}},{key:"subScale",get:function(){return this.getSubScale()},set:function(e){this.setSubScale(e)}},{key:"getSubScale",value:function(){return this._subScale}},{key:"setSubXSpacing",value:function(e){return this._subXSpacing!==e&&(this._subXSpacing=e,this.rebuildRichText()),this}},{key:"subXSpacing",get:function(){return this.getSubXSpacing()},set:function(e){this.setSubXSpacing(e)}},{key:"getSubXSpacing",value:function(){return this._subXSpacing}},{key:"setSubYOffset",value:function(e){return this._subYOffset!==e&&(this._subYOffset=e,this.rebuildRichText()),this}},{key:"subYOffset",get:function(){return this.getSubYOffset()},set:function(e){this.setSubYOffset(e)}},{key:"getSubYOffset",value:function(){return this._subYOffset}},{key:"setSupScale",value:function(e){return this._supScale!==e&&(this._supScale=e,this.rebuildRichText()),this}},{key:"supScale",get:function(){return this.getSupScale()},set:function(e){this.setSupScale(e)}},{key:"getSupScale",value:function(){return this._supScale}},{key:"setSupXSpacing",value:function(e){return this._supXSpacing!==e&&(this._supXSpacing=e,this.rebuildRichText()),this}},{key:"supXSpacing",get:function(){return this.getSupXSpacing()},set:function(e){this.setSupXSpacing(e)}},{key:"getSupXSpacing",value:function(){return this._supXSpacing}},{key:"setSupYOffset",value:function(e){return this._supYOffset!==e&&(this._supYOffset=e,this.rebuildRichText()),this}},{key:"supYOffset",get:function(){return this.getSupYOffset()},set:function(e){this.setSupYOffset(e)}},{key:"getSupYOffset",value:function(){return this._supYOffset}},{key:"setCapHeightScale",value:function(e){return this._capHeightScale!==e&&(this._capHeightScale=e,this.rebuildRichText()),this}},{key:"capHeightScale",get:function(){return this.getCapHeightScale()},set:function(e){this.setCapHeightScale(e)}},{key:"getCapHeightScale",value:function(){return this._capHeightScale}},{key:"setUnderlineLineWidth",value:function(e){return this._underlineLineWidth!==e&&(this._underlineLineWidth=e,this.rebuildRichText()),this}},{key:"underlineLineWidth",get:function(){return this.getUnderlineLineWidth()},set:function(e){this.setUnderlineLineWidth(e)}},{key:"getUnderlineLineWidth",value:function(){return this._underlineLineWidth}},{key:"setUnderlineHeightScale",value:function(e){return this._underlineHeightScale!==e&&(this._underlineHeightScale=e,this.rebuildRichText()),this}},{key:"underlineHeightScale",get:function(){return this.getUnderlineHeightScale()},set:function(e){this.setUnderlineHeightScale(e)}},{key:"getUnderlineHeightScale",value:function(){return this._underlineHeightScale}},{key:"setStrikethroughLineWidth",value:function(e){return this._strikethroughLineWidth!==e&&(this._strikethroughLineWidth=e,this.rebuildRichText()),this}},{key:"strikethroughLineWidth",get:function(){return this.getStrikethroughLineWidth()},set:function(e){this.setStrikethroughLineWidth(e)}},{key:"getStrikethroughLineWidth",value:function(){return this._strikethroughLineWidth}},{key:"setStrikethroughHeightScale",value:function(e){return this._strikethroughHeightScale!==e&&(this._strikethroughHeightScale=e,this.rebuildRichText()),this}},{key:"strikethroughHeightScale",get:function(){return this.getStrikethroughHeightScale()},set:function(e){this.setStrikethroughHeightScale(e)}},{key:"getStrikethroughHeightScale",value:function(){return this._strikethroughHeightScale}},{key:"setLinkFill",value:function(e){return this._linkFill!==e&&(this._linkFill=e,this.rebuildRichText()),this}},{key:"linkFill",get:function(){return this.getLinkFill()},set:function(e){this.setLinkFill(e)}},{key:"getLinkFill",value:function(){return this._linkFill}},{key:"setLinkEventsHandled",value:function(e){return this._linkEventsHandled!==e&&(this._linkEventsHandled=e,this.rebuildRichText()),this}},{key:"linkEventsHandled",get:function(){return this.getLinkEventsHandled()},set:function(e){this.setLinkEventsHandled(e)}},{key:"getLinkEventsHandled",value:function(){return this._linkEventsHandled}},{key:"setLinks",value:function(e){return this._links!==e&&(this._links=e,this.rebuildRichText()),this}},{key:"links",get:function(){return this.getLinks()},set:function(e){this.setLinks(e)}},{key:"getLinks",value:function(){return this._links}},{key:"setAlign",value:function(e){return this._align!==e&&(this._align=e,this.rebuildRichText()),this}},{key:"align",get:function(){return this.getAlign()},set:function(e){this.setAlign(e)}},{key:"getAlign",value:function(){return this._align}},{key:"setLeading",value:function(e){return this._leading!==e&&(this._leading=e,this.rebuildRichText()),this}},{key:"leading",get:function(){return this.getLeading()},set:function(e){this.setLeading(e)}},{key:"getLeading",value:function(){return this._leading}},{key:"setLineWrap",value:function(e){return this._lineWrap!==e&&(this._lineWrap=e,this.rebuildRichText()),this}},{key:"lineWrap",get:function(){return this.getLineWrap()},set:function(e){this.setLineWrap(e)}},{key:"getLineWrap",value:function(){return this._lineWrap}},{key:"mutate",value:function(e){return _get(_getPrototypeOf(n.prototype),"mutate",this).call(this,e)}}],[{key:"stringWithFont",value:function(e,t){return"".concat("<span style='font-style: ").concat(t.style,";")+"font-variant: ".concat(t.variant,";")+"font-weight: ".concat(t.weight,";")+"font-stretch: ".concat(t.stretch,";")+"font-size: ".concat(t.size,";")+"font-family: ".concat(t.family,";")+"line-height: ".concat(t.lineHeight,";")+"'>".concat(e,"</span>")}},{key:"himalayaElementToString",value:function(e,t){if(Af(e))return n.contentToString(e.content,t);if(vf(e)){var i=wf("dir",e);return"span"===e.tagName&&i&&(t="ltr"===i),e.children.map((function(e){return n.himalayaElementToString(e,t)})).join("")}return""}},{key:"himalayaElementToAccessibleString",value:function(e,t){if(Af(e))return n.contentToString(e.content,t);if(vf(e)){var i=wf("dir",e);"span"===e.tagName&&i&&(t="ltr"===i);var r=e.children.map((function(e){return n.himalayaElementToAccessibleString(e,t)})).join("");return _.includes(Sf,e.tagName)?"<".concat(e.tagName,">").concat(r,"</").concat(e.tagName,">"):r}return""}},{key:"contentToString",value:function(e,t){var n=he.decode(e);return t?"‪".concat(n,"‬"):"‫".concat(n,"‬")}}]),n}(jo));_defineProperty(Pf,"STRING_PROPERTY_TANDEM_NAME",Xl.STRING_PROPERTY_TANDEM_NAME),Pf.prototype._mutatorKeys=yf.concat(jo.prototype._mutatorKeys),Cr.register("RichText",Pf);var Tf=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"isCleanable",get:function(){return!0}},{key:"clean",value:function(){for(var e=this._children.length-1;e>=0;e--){var t=this._children[e];t.isCleanable&&(this.removeChild(t),t.clean())}this.matrix=oi.IDENTITY,this.freeToPool()}}]),n}(e)})),Mf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).initialize(e),i}return _createClass(n,[{key:"initialize",value:function(e){return this.isLTR=e,this.leftSpacing=0,this.rightSpacing=0,this}},{key:"addElement",value:function(e){var t=this.children.length>0,n=e.width>0,i=e.getScaleVector().x,r=e.leftSpacing*i,a=e.rightSpacing*i;return!(!t&&!n)&&(t?n?(this.isLTR?(e.left=this.localRight+this.rightSpacing+r,this.rightSpacing=a):(e.right=this.localLeft-this.leftSpacing-a,this.leftSpacing=r),this.addChild(e),!0):(this.isLTR?this.rightSpacing+=r+a:this.leftSpacing+=r+a,!1):(this.isLTR?(e.left=0,this.leftSpacing=r,this.rightSpacing=a):(e.right=0,this.leftSpacing=r,this.rightSpacing=a),this.addChild(e),!0))}},{key:"addExtraBeforeSpacing",value:function(e){this.isLTR?this.leftSpacing+=e:this.rightSpacing+=e}},{key:"freeToPool",value:function(){n.pool.freeToPool(this)}}]),n}(Tf(jo));_defineProperty(Mf,"pool",new rn(Mf));var Lf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o,l){var u;return _classCallCheck(this,n),(u=t.call(this,"")).initialize(e,i,r,a,s,o,l),u}return _createClass(n,[{key:"initialize",value:function(e,t,n,i,r,a,s){for(var o="";e.startsWith(" ");)o+=" ",e=e.slice(1);for(var l="";e.endsWith(" ");)l=" ",e=e.slice(0,e.length-1);this.text=Pf.contentToString(e,t),this.boundsMethod=i,this.font=n,this.fill=r,this.stroke=a,this.lineWidth=s;var u=o.length?_f.setText(o).setFont(n).width:0,c=l.length?_f.setText(l).setFont(n).width:0;return this.leftSpacing=t?u:c,this.rightSpacing=t?c:u,this}},{key:"clean",value:function(){_get(_getPrototypeOf(n.prototype),"clean",this).call(this),this.fill=null,this.stroke=null}},{key:"fitsIn",value:function(e,t,n){return this.width+(t?n?this.leftSpacing:this.rightSpacing:0)<=e}},{key:"freeToPool",value:function(){n.pool.freeToPool(this)}}]),n}(Tf(Xl));_defineProperty(Lf,"pool",new rn(Lf));var If=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),_defineProperty(_assertThisInitialized(r=t.call(this)),"fireListener",null),_defineProperty(_assertThisInitialized(r),"accessibleInputListener",null),_defineProperty(_assertThisInitialized(r),"allowLinksListener",null),r.initialize(e,i,!1),r.mutate({cursor:"pointer",tagName:"a"}),r}return _createClass(n,[{key:"initialize",value:function(e,t){var i=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r&&_get(_getPrototypeOf(n.prototype),"initialize",this).call(this),this.innerContent=e,this.voicingNameResponse=e,"function"==typeof t?(this.fireListener=new Ad({fire:t,tandem:xe.OPT_OUT}),this.addInputListener(this.fireListener),this.setPDOMAttribute("href","#"),this.setPDOMAttribute("target","_self"),this.accessibleInputListener={click:function(e){e.domEvent&&e.domEvent.preventDefault(),t()}},this.addInputListener(this.accessibleInputListener)):(this.fireListener=new Ad({fire:function(e){e.isFromPDOM()&&e.domEvent.preventDefault(),self._linkEventsHandled&&e.handle(),as(t)},tandem:xe.OPT_OUT}),this.addInputListener(this.fireListener),this.setPDOMAttribute("href",t),this.setPDOMAttribute("target","_blank"),this.allowLinksListener=function(e){i.visible=e},is.link(this.allowLinksListener)),this}},{key:"clean",value:function(){_get(_getPrototypeOf(n.prototype),"clean",this).call(this),this.fireListener&&this.removeInputListener(this.fireListener),this.fireListener=null,this.accessibleInputListener&&(this.removeInputListener(this.accessibleInputListener),this.accessibleInputListener=null),this.allowLinksListener&&(is.unlink(this.allowLinksListener),this.allowLinksListener=null)}},{key:"freeToPool",value:function(){n.pool.freeToPool(this)}}]),n}(Hc(Tf(jo)));_defineProperty(If,"pool",new rn(If));var Rf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).initialize(e),i}return _createClass(n,[{key:"initialize",value:function(e){return this.localBounds=new jn(0,0,0,e),this}},{key:"freeToPool",value:function(){n.pool.freeToPool(this)}}]),n}(Tf(jo));_defineProperty(Rf,"pool",new rn(Rf)),Pf.RichTextIO=new U("RichTextIO",{valueType:Pf,supertype:jo.NodeIO,documentation:"The tandem IO Type for the scenery RichText node"});var Df=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({readingBlockNameResponse:e,tagName:"p",innerContent:e},i);return(r=t.call(this,e)).focusHighlight=new rh(_assertThisInitialized(r)),r.mutate(a),r}return _createClass(n)}(uh(Xl));Cr.register("VoicingText",Df);var Nf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({readingBlockNameResponse:e,innerContent:e,readingBlockTagName:"button"},i);return(r=t.call(this,e)).focusHighlight=new rh(_assertThisInitialized(r)),r.mutate(a),r}return _createClass(n)}(uh(Pf));Cr.register("VoicingRichText",Nf);var qf=function e(t){if(t instanceof pn)return{type:"Vector2",x:t.x,y:t.y};if(t instanceof oi)return{type:"Matrix3",m00:t.m00(),m01:t.m01(),m02:t.m02(),m10:t.m10(),m11:t.m11(),m12:t.m12(),m20:t.m20(),m21:t.m21(),m22:t.m22()};if(t instanceof jn){var n=t;return{type:"Bounds2",maxX:n.maxX,maxY:n.maxY,minX:n.minX,minY:n.minY}}if(t instanceof Ni)return{type:"Shape",path:t.getSVGPath()};if(Array.isArray(t))return{type:"Array",value:t.map(e)};if(t instanceof Rr)return{type:"Color",red:t.red,green:t.green,blue:t.blue,alpha:t.alpha};if(t instanceof ht)return{type:"Property",value:e(t.value)};if(Xs&&t instanceof Xs){var i={};return t.transformMatrix&&(i.transformMatrix=e(t.transformMatrix)),Qs&&(t instanceof Js||t instanceof Ks)&&(i.stops=t.stops.map((function(t){return{ratio:t.ratio,stop:e(t.color)}})),i.start=e(t.start),i.end=e(t.end),Ks&&t instanceof Ks?i.type="LinearGradient":Js&&t instanceof Js&&(i.type="RadialGradient",i.startRadius=t.startRadius,i.endRadius=t.endRadius)),Zs&&t instanceof Zs&&(i.type="Pattern",i.url=t.image.src),i}if(t instanceof jo){var r=t,a={},s={};["visible","opacity","disabledOpacity","pickable","inputEnabled","cursor","transformBounds","renderer","usesOpacity","layerSplit","cssTransform","excludeInvisible","webglScale","preventFit"].forEach((function(e){r[e]!==jo.DEFAULT_NODE_OPTIONS[e]&&(a[e]=r[e])})),["tagName","innerContent","accessibleName","helpText"].forEach((function(e){null!==r[e]&&(a[e]=r[e])})),["maxWidth","maxHeight","clipArea","mouseArea","touchArea"].forEach((function(t){r[t]!==jo.DEFAULT_NODE_OPTIONS[t]&&(s[t]=e(r[t]))})),r.matrix.isIdentity()||(s.matrix=e(r.matrix)),r._localBoundsOverridden&&(s.localBounds=e(r.localBounds)),s.children=r.children.map((function(e){return e.id})),s.hasInputListeners=r.inputListeners.length>0;var o={id:r.id,type:"Node",types:ne(r.constructor).map((function(e){return e.name})).filter((function(e){return e&&"Object"!==e&&"Node"!==e})),name:r.constructor.name,options:a,setup:s};if(Hl&&r instanceof Hl&&(o.type="Path",s.path=e(r.shape),r.boundsMethod!==Hl.DEFAULT_PATH_OPTIONS.boundsMethod&&(a.boundsMethod=r.boundsMethod)),$l&&r instanceof $l&&(o.type="Circle",a.radius=r.radius),tu&&r instanceof tu&&(o.type="Line",a.x1=r.x1,a.y1=r.y1,a.x2=r.x2,a.y2=r.y2),iu&&r instanceof iu&&(o.type="Rectangle",a.rectX=r.rectX,a.rectY=r.rectY,a.rectWidth=r.rectWidth,a.rectHeight=r.rectHeight,a.cornerXRadius=r.cornerXRadius,a.cornerYRadius=r.cornerYRadius),Xl&&r instanceof Xl&&(o.type="Text","hybrid"!==r.boundsMethod&&(a.boundsMethod=r.boundsMethod),a.text=r.text,a.font=r.font),Bl&&r instanceof Bl&&(o.type="Image",["imageOpacity","initialWidth","initialHeight","mipmapBias","mipmapInitialLevel","mipmapMaxLevel"].forEach((function(e){r[e]!==Bl.DEFAULT_IMAGE_OPTIONS[e]&&(a[e]=r[e])})),s.width=r.imageWidth,s.height=r.imageHeight,r._mipmapData?(s.imageType="mipmapData",s.mipmapData=r._mipmapData.map((function(e){return{url:e.url,width:e.width,height:e.height}}))):(r._mipmap&&(s.generateMipmaps=!0),r._image instanceof HTMLImageElement?(s.imageType="image",s.src=r._image.src):r._image instanceof HTMLCanvasElement&&(s.imageType="canvas",s.src=r._image.toDataURL()))),Zl&&r instanceof Zl||au&&r instanceof au){o.type=Zl&&r instanceof Zl?"CanvasNode":"WebGLNode",s.canvasBounds=e(r.canvasBounds);var l=document.createElement("canvas");l.width=Math.ceil(1*r.canvasBounds.width),l.height=Math.ceil(1*r.canvasBounds.height);var u=l.getContext("2d"),c=new Ha(l,u),h=oi.scale(1);c.context.setTransform(1,0,0,1,-r.canvasBounds.left,-r.canvasBounds.top),r.renderToCanvasSelf(c,h),s.url=l.toDataURL(),s.scale=1,s.offset=e(r.canvasBounds.leftTop)}return eu&&r instanceof eu&&(o.type="DOM",o.element=(new window.XMLSerializer).serializeToString(r.element),r.element instanceof window.HTMLCanvasElement&&(o.dataURL=r.element.toDataURL()),a.preventTransform=r.preventTransform),(Hl&&r instanceof Hl||Xl&&r instanceof Xl)&&(["fillPickable","strokePickable","lineWidth","lineCap","lineJoin","lineDashOffset","miterLimit"].forEach((function(e){r[e]!==Cl[e]&&(a[e]=r[e])})),r.fill!==Cl.fill&&(s.fill=e(r.fill)),r.stroke!==Cl.stroke&&(s.stroke=e(r.stroke)),r.lineDash.length&&(s.lineDash=e(r.lineDash))),o}return t instanceof Cy?{type:"Display",width:t.width,height:t.height,backgroundColor:e(t.backgroundColor),tree:{type:"Subtree",rootNodeId:t.rootNode.id,nodes:Of(t.rootNode)}}:{type:"value",value:t}},Of=function(e){return e.getSubtreeNodes().map(qf)};Cr.register("scenerySerialize",qf);var Bf=function e(t){if("Vector2"===t.type)return new pn(t.x,t.y);if("Matrix3"===t.type)return(new oi).rowMajor(t.m00,t.m01,t.m02,t.m10,t.m11,t.m12,t.m20,t.m21,t.m22);if("Bounds2"===t.type)return new jn(t.minX,t.minY,t.maxX,t.maxY);if("Shape"===t.type)return new Ni(t.path);if("Array"===t.type)return t.value.map(e);if("Color"===t.type)return new Rr(t.red,t.green,t.blue,t.alpha);if("Property"===t.type)return new dt(e(t.value));if("Pattern"===t.type||"LinearGradient"===t.type||"RadialGradient"===t.type){var n;if("Pattern"===t.type){var i=new window.Image;i.src=t.url,n=new Zs(i)}else{var r=e(t.start),a=e(t.end);"LinearGradient"===t.type?n=new Ks(r.x,r.y,a.x,a.y):"RadialGradient"===t.type&&(n=new Js(r.x,r.y,t.startRadius,a.x,a.y,t.endRadius)),t.stops.forEach((function(t){n.addColorStop(t.ratio,e(t.stop))}))}return t.transformMatrix&&n.setTransformMatrix(e(t.transformMatrix)),n}if(_.includes(["Node","Path","Circle","Line","Rectangle","Text","Image","CanvasNode","WebGLNode","DOM"],t.type)){var s,o=t.setup;if("Node"===t.type)s=new jo;else if("Path"===t.type)s=new Hl(e(o.path));else if("Circle"===t.type)s=new $l({});else if("Line"===t.type)s=new tu({});else if("Rectangle"===t.type)s=new iu({});else if("Text"===t.type)s=new Xl("");else if("Image"===t.type){if("image"===o.imageType||"canvas"===o.imageType)s=new Bl(o.src),o.generateMipmaps&&(s.mipmap=!0);else if("mipmapData"===o.imageType){var l=o.mipmapData.map((function(e){var t={width:e.width,height:e.height,url:e.url};t.img=new window.Image,t.img.src=e.url,t.canvas=document.createElement("canvas"),t.canvas.width=e.width,t.canvas.height=e.height;var n=t.canvas.getContext("2d");return t.updateCanvas=function(){t.img.complete&&(void 0===t.img.naturalWidth||t.img.naturalWidth>0)&&(n.drawImage(t.img,0,0),delete t.updateCanvas)},t}));s=new Bl(l)}s.initialWidth=o.width,s.initialHeight=o.height}else if("CanvasNode"===t.type||"WebGLNode"===t.type)s=new jo({children:[new Bl(o.url,{translation:e(o.offset),scale:1/o.scale})]});else if("DOM"===t.type){var u=document.createElement("div");u.innerHTML=t.element;var c=u.childNodes[0];if(u.removeChild(c),t.dataURL){var h=new window.Image;h.onload=function(){c.getContext("2d").drawImage(h,0,0)},h.src=t.dataURL}s=new eu(c)}return o.clipArea&&(s.clipArea=e(o.clipArea)),o.mouseArea&&(s.mouseArea=e(o.mouseArea)),o.touchArea&&(s.touchArea=e(o.touchArea)),o.matrix&&(s.matrix=e(o.matrix)),o.localBounds&&(s.localBounds=e(o.localBounds)),o.fill&&(s.fill=e(o.fill)),o.stroke&&(s.stroke=e(o.stroke)),o.lineDash&&(s.lineDash=e(o.lineDash)),s.mutate(t.options),s._serialization=t,s}if("Subtree"===t.type){var d={},p=t.nodes.map(e);return p.forEach((function(e){d[e._serialization.id]=e})),p.forEach((function(e){e._serialization.setup.children.forEach((function(t){e.addChild(d[t])}))})),d[t.rootNodeId]}return"value"===t.type?t.value:null};Cr.register("sceneryDeserialize",Bf);var Gf=Bf,Hf=function(e){return Gf(qf(e))};Cr.register("sceneryCopy",Hf);var Ff=1,Yf=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"initialize",value:function(e){return this.id=this.id||Ff++,this.clean(),this.renderer=e,this.dirty=!0,this.isDisposed=!1,this.linksDirty=!1,this.visibleProperty=new st(!0),this.fittableProperty=new st(!0),this}},{key:"clean",value:function(){this.parentDrawable=null,this.backbone=null,this.pendingParentDrawable=null,this.pendingBackbone=null,this.pendingAddition=!1,this.pendingRemoval=!1,this.previousDrawable=null,this.nextDrawable=null,this.oldPreviousDrawable=null,this.oldNextDrawable=null,this.visibleProperty&&this.visibleProperty.removeAllListeners(),this.fittableProperty&&this.fittableProperty.removeAllListeners()}},{key:"update",value:function(){var e=!1;return this.dirty&&!this.isDisposed&&(this.dirty=!1,e=!0),e}},{key:"setVisible",value:function(e){this.visibleProperty.value=e}},{key:"visible",get:function(){return this.isVisible()},set:function(e){this.setVisible(e)}},{key:"isVisible",value:function(){return this.visibleProperty.value}},{key:"setFittable",value:function(e){this.fittableProperty.value=e}},{key:"fittable",get:function(){return this.isFittable()},set:function(e){this.setFittable(e)}},{key:"isFittable",value:function(){return this.fittableProperty.value}},{key:"setBlockBackbone",value:function(e){this.parentDrawable=e,this.backbone=e,this.pendingParentDrawable=e,this.pendingBackbone=e,this.pendingAddition=!1,this.pendingRemoval=!1}},{key:"notePendingAddition",value:function(e,t,n){this.pendingParentDrawable=t,this.pendingBackbone=n,this.pendingAddition=!0,this.pendingRemoval||e.markDrawableChangedBlock(this)}},{key:"notePendingRemoval",value:function(e){this.pendingRemoval=!0,this.pendingAddition||e.markDrawableChangedBlock(this)}},{key:"notePendingMove",value:function(e,t){this.pendingParentDrawable=t,this.pendingRemoval&&this.pendingAddition||e.markDrawableChangedBlock(this),this.pendingAddition=!0,this.pendingRemoval=!0}},{key:"updateBlock",value:function(){var e=!1;return(this.pendingRemoval||this.pendingAddition)&&((e=!this.pendingRemoval||!this.pendingAddition||this.parentDrawable!==this.pendingParentDrawable||this.backbone!==this.pendingBackbone)?(this.pendingRemoval&&(this.parentDrawable.removeDrawable(this),this.pendingAddition||(this.pendingParentDrawable=null,this.pendingBackbone=null)),this.parentDrawable=this.pendingParentDrawable,this.backbone=this.pendingBackbone,this.pendingAddition&&this.parentDrawable.addDrawable(this)):this.pendingAddition&&Zr.isCanvas(this.renderer)&&this.parentDrawable.onPotentiallyMovedDrawable(this),this.pendingAddition=!1,this.pendingRemoval=!1),e}},{key:"updateLinks",value:function(){this.oldNextDrawable=this.nextDrawable,this.oldPreviousDrawable=this.previousDrawable,this.linksDirty=!1}},{key:"markDirty",value:function(){this.dirty||(this.dirty=!0,this.parentDrawable&&this.parentDrawable.markDirtyDrawable(this))}},{key:"markLinksDirty",value:function(e){this.linksDirty||(this.linksDirty=!0,e.markDrawableForLinksUpdate(this))}},{key:"markForDisposal",value:function(t){e.disconnectBefore(this,t),e.disconnectAfter(this,t),t.markDrawableForDisposal(this)}},{key:"disposeImmediately",value:function(t){e.disconnectBefore(this,t),e.disconnectAfter(this,t),this.dispose()}},{key:"dispose",value:function(){this.clean(),this.isDisposed=!0,this.freeToPool()}},{key:"audit",value:function(e,t,n){0}},{key:"toString",value:function(){return"".concat(this.constructor.name,"#").concat(this.id)}},{key:"toDetailedString",value:function(){return this.toString()}}],[{key:"connectDrawables",value:function(e,t,n){e.nextDrawable!==t&&(e.nextDrawable&&(e.nextDrawable.markLinksDirty(n),e.nextDrawable.previousDrawable=null),t.previousDrawable&&(t.previousDrawable.markLinksDirty(n),t.previousDrawable.nextDrawable=null),e.nextDrawable=t,t.previousDrawable=e,e.markLinksDirty(n),t.markLinksDirty(n))}},{key:"disconnectBefore",value:function(e,t){e.previousDrawable&&(e.markLinksDirty(t),e.previousDrawable.markLinksDirty(t),e.previousDrawable.nextDrawable=null,e.previousDrawable=null)}},{key:"disconnectAfter",value:function(e,t){e.nextDrawable&&(e.markLinksDirty(t),e.nextDrawable.markLinksDirty(t),e.nextDrawable.previousDrawable=null,e.nextDrawable=null)}},{key:"listToArray",value:function(e,t){for(var n=[],i=e;n.push(i),i!==t;i=i.nextDrawable);return n}},{key:"oldListToArray",value:function(e,t){for(var n=[],i=e;n.push(i),i!==t;i=i.oldNextDrawable);return n}}]),e}();Cr.register("Drawable",Yf);var zf=Yf,Uf=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).initialize(e,i),r}return _createClass(n,[{key:"initialize",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e),this.drawableVisibilityListener=this.drawableVisibilityListener||this.updateSelfVisibility.bind(this),this.instance=t,this.node=t.trail.lastNode(),this.node.attachDrawable(this),this.instance.selfVisibleEmitter.addListener(this.drawableVisibilityListener),this.updateSelfVisibility(),this}},{key:"dispose",value:function(){this.instance.selfVisibleEmitter.removeListener(this.drawableVisibilityListener),this.node.detachDrawable(this),this.instance=null,this.node=null,_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"updateSelfVisibility",value:function(){this.visible=this.instance.selfVisible}},{key:"toDetailedString",value:function(){return"".concat(this.toString()," (").concat(this.instance.trail.toPathString(),")")}}]),n}(zf);Cr.register("SelfDrawable",Uf);var Wf=Uf,jf=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){for(var i,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(i=_get(_getPrototypeOf(n.prototype),"initialize",this)).call.apply(i,[this,e,t].concat(a)),this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new vu(this.fillCallback),this.strokeObserver=this.strokeObserver||new vu(this.strokeCallback),this.fillObserver.setPrimary(t.node._fill),this.strokeObserver.setPrimary(t.node._stroke)}},{key:"dispose",value:function(){this.fillObserver.clean(),this.strokeObserver.clean(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"markDirtyFill",value:function(){this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)}},{key:"markDirtyStroke",value:function(){this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)}},{key:"markDirtyLineWidth",value:function(){this.markPaintDirty()}},{key:"markDirtyLineOptions",value:function(){this.markPaintDirty()}},{key:"markDirtyCachedPaints",value:function(){this.markPaintDirty()}}]),n}(e)}));Cr.register("PaintableStatelessDrawable",jf);var Xf=jf,Qf=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){for(var i,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(i=_get(_getPrototypeOf(n.prototype),"initialize",this)).call.apply(i,[this,e,t].concat(a)),this.dirtyFill=!0,this.hadStroke=!1,this.dirtyStroke=!0,this.dirtyLineWidth=!0,this.dirtyLineOptions=!0,this.dirtyCachedPaints=!0,this.lastCachedPaints=[],this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new vu(this.fillCallback),this.strokeObserver=this.strokeObserver||new vu(this.strokeCallback),this.fillObserver.setPrimary(t.node._fill),this.strokeObserver.setPrimary(t.node._stroke)}},{key:"cleanPaintableState",value:function(){this.dirtyFill=!1,this.dirtyStroke=!1,this.dirtyLineWidth=!1,this.dirtyLineOptions=!1,this.dirtyCachedPaints=!1,this.hadStroke=null!==this.node.getStroke()}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.fillObserver.clean(),this.strokeObserver.clean()}},{key:"markDirtyFill",value:function(){this.dirtyFill=!0,this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)}},{key:"markDirtyStroke",value:function(){this.dirtyStroke=!0,this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)}},{key:"markDirtyLineWidth",value:function(){this.dirtyLineWidth=!0,this.markPaintDirty()}},{key:"markDirtyLineOptions",value:function(){this.dirtyLineOptions=!0,this.markPaintDirty()}},{key:"markDirtyCachedPaints",value:function(){this.dirtyCachedPaints=!0,this.markPaintDirty()}}]),n}(e)}));Cr.register("PaintableStatefulDrawable",Qf);var Kf=Qf,Jf=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute()}},{key:"markTransformDirty",value:function(){this.markDirty()}},{key:"markPaintDirty",value:function(){this.markDirty()}},{key:"updateSelfVisibility",value:function(){_get(_getPrototypeOf(n.prototype),"updateSelfVisibility",this).call(this),this.markDirty()}},{key:"dispose",value:function(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Wf);Cr.register("CanvasSelfDrawable",Jf);var Zf=Jf,$f=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.markTransformDirty(),this.visibilityDirty=!0,t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute(),this}},{key:"markTransformDirty",value:function(){this.transformDirty=!0,this.markDirty()}},{key:"getTransformMatrix",value:function(){return this.instance.relativeTransform.validate(),this.instance.relativeTransform.matrix}},{key:"update",value:function(){return!!_get(_getPrototypeOf(n.prototype),"update",this).call(this)&&(this.updateDOM(),this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.visibility=this.visible?"":"hidden"),this.cleanPaintableState&&this.cleanPaintableState(),!0)}},{key:"updateDOM",value:function(){}},{key:"updateSelfVisibility",value:function(){_get(_getPrototypeOf(n.prototype),"updateSelfVisibility",this).call(this),this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}},{key:"dispose",value:function(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Wf);Cr.register("DOMSelfDrawable",$f);var em=$f,tm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t,i,r){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.usesPaint=i,this.keepElements=r,this.svgElement=null,this.svgBlock=null,this.usesPaint&&(this.paintState?this.paintState.initialize():this.paintState=new Eu),this}},{key:"update",value:function(){return!!_get(_getPrototypeOf(n.prototype),"update",this).call(this)&&(this.updateSVG(),!0)}},{key:"updateSVG",value:function(){if(this.paintDirty&&this.updateSVGSelf(this.node,this.svgElement),this.usesPaint&&this.dirtyCachedPaints){var e,t,n=this.node._cachedPaints.slice();for(e=0;e<n.length;e++){var i=n[e],r=!0;for(t=0;t<this.lastCachedPaints.length;t++)if(i===this.lastCachedPaints[t]){r=!1;break}r&&this.svgBlock.incrementPaint(i)}for(e=0;e<this.lastCachedPaints.length;e++){var a=this.lastCachedPaints[e],s=!0;for(t=0;t<n.length;t++)if(a===n[t]){s=!1;break}s&&this.svgBlock.decrementPaint(a)}this.lastCachedPaints=n}this.setToCleanState()}},{key:"updateFillStrokeStyle",value:function(e){if(this.usesPaint){this.dirtyFill&&this.paintState.updateFill(this.svgBlock,this.node.getFillValue()),this.dirtyStroke&&this.paintState.updateStroke(this.svgBlock,this.node.getStrokeValue());var t=this.dirtyLineWidth||this.dirtyLineOptions;t&&this.paintState.updateStrokeDetailStyle(this.node),(this.dirtyFill||this.dirtyStroke||t)&&e.setAttribute("style",this.paintState.baseStyle+this.paintState.strokeDetailStyle),this.cleanPaintableState()}}},{key:"updateSVGBlock",value:function(e){var t=this.svgBlock;if(this.usesPaint&&t)for(var n=0;n<this.lastCachedPaints.length;n++)t.decrementPaint(this.lastCachedPaints[n]);if(this.svgBlock=e,this.usesPaint)for(var i=0;i<this.lastCachedPaints.length;i++)e.incrementPaint(this.lastCachedPaints[i]);this.updateDefsSelf&&this.updateDefsSelf(e),this.usesPaint&&this.paintState.updateSVGBlock(e),this.usesPaint&&this.markDirtyFill(),this.usesPaint&&this.markDirtyStroke()}},{key:"dispose",value:function(){this.keepElements||(this.svgElement=null),this.updateDefsSelf&&this.updateDefsSelf(null),this.usesPaint&&this.paintState.dispose(),this.defs=null,this.svgBlock=null,_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Wf);Cr.register("SVGSelfDrawable",tm);var nm=tm,im=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),t.relativeTransform.addListener(this.transformListener),t.relativeTransform.addPrecompute(),this}},{key:"markTransformDirty",value:function(){this.markDirty()}},{key:"updateSelfVisibility",value:function(){_get(_getPrototypeOf(n.prototype),"updateSelfVisibility",this).call(this),this.markDirty()}},{key:"dispose",value:function(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Wf);Cr.register("WebGLSelfDrawable",im);var rm=im,am=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){for(var i,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(i=_get(_getPrototypeOf(n.prototype),"initialize",this)).call.apply(i,[this,e,t].concat(a)),this.paintDirty=!0,this.dirtyRadius=!0}},{key:"markPaintDirty",value:function(){this.paintDirty=!0,this.markDirty()}},{key:"markDirtyRadius",value:function(){this.dirtyRadius=!0,this.markPaintDirty()}},{key:"setToCleanState",value:function(){this.paintDirty=!1,this.dirtyRadius=!1}}]),n}(Kf(e))}));Cr.register("CircleStatefulDrawable",am);var sm=am,om=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){for(var i,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(i=_get(_getPrototypeOf(n.prototype),"initialize",this)).call.apply(i,[this,e,t].concat(a)),this.paintDirty=!0,this.dirtyImage=!0,this.dirtyImageOpacity=!0,this.dirtyMipmap=!0}},{key:"markPaintDirty",value:function(){this.paintDirty=!0,this.markDirty()}},{key:"markDirtyImage",value:function(){this.dirtyImage=!0,this.markPaintDirty()}},{key:"markDirtyImageOpacity",value:function(){this.dirtyImageOpacity=!0,this.markPaintDirty()}},{key:"markDirtyMipmap",value:function(){this.dirtyMipmap=!0,this.markPaintDirty()}},{key:"setToCleanState",value:function(){this.paintDirty=!1,this.dirtyImage=!1,this.dirtyImageOpacity=!1,this.dirtyMipmap=!1}}]),n}(e)}));Cr.register("ImageStatefulDrawable",om);var lm=om,um=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){for(var i,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(i=_get(_getPrototypeOf(n.prototype),"initialize",this)).call.apply(i,[this,e,t].concat(a)),this.paintDirty=!0}},{key:"markPaintDirty",value:function(){this.paintDirty=!0,this.markDirty()}},{key:"markDirtyLine",value:function(){this.markPaintDirty()}},{key:"markDirtyP1",value:function(){this.markPaintDirty()}},{key:"markDirtyP2",value:function(){this.markPaintDirty()}},{key:"markDirtyX1",value:function(){this.markPaintDirty()}},{key:"markDirtyY1",value:function(){this.markPaintDirty()}},{key:"markDirtyX2",value:function(){this.markPaintDirty()}},{key:"markDirtyY2",value:function(){this.markPaintDirty()}}]),n}(Xf(e))}));Cr.register("LineStatelessDrawable",um);var cm=um,hm=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){for(var i,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(i=_get(_getPrototypeOf(n.prototype),"initialize",this)).call.apply(i,[this,e,t].concat(a)),this.paintDirty=!0,this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0}},{key:"markPaintDirty",value:function(){this.paintDirty=!0,this.markDirty()}},{key:"markDirtyLine",value:function(){this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()}},{key:"markDirtyP1",value:function(){this.dirtyX1=!0,this.dirtyY1=!0,this.markPaintDirty()}},{key:"markDirtyP2",value:function(){this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()}},{key:"markDirtyX1",value:function(){this.dirtyX1=!0,this.markPaintDirty()}},{key:"markDirtyY1",value:function(){this.dirtyY1=!0,this.markPaintDirty()}},{key:"markDirtyX2",value:function(){this.dirtyX2=!0,this.markPaintDirty()}},{key:"markDirtyY2",value:function(){this.dirtyY2=!0,this.markPaintDirty()}},{key:"setToCleanState",value:function(){this.paintDirty=!1,this.dirtyX1=!1,this.dirtyY1=!1,this.dirtyX2=!1,this.dirtyY2=!1}}]),n}(Kf(e))}));Cr.register("LineStatefulDrawable",hm);var dm=hm,pm=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){for(var i,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(i=_get(_getPrototypeOf(n.prototype),"initialize",this)).call.apply(i,[this,e,t].concat(a)),this.paintDirty=!0,this.dirtyShape=!0}},{key:"markPaintDirty",value:function(){this.paintDirty=!0,this.markDirty()}},{key:"markDirtyShape",value:function(){this.dirtyShape=!0,this.markPaintDirty()}},{key:"setToCleanState",value:function(){this.paintDirty=!1,this.dirtyShape=!1}}]),n}(Kf(e))}));Cr.register("PathStatefulDrawable",pm);var fm=pm,mm=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){for(var i,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(i=_get(_getPrototypeOf(n.prototype),"initialize",this)).call.apply(i,[this,e,t].concat(a)),this.paintDirty=!0,this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0}},{key:"markPaintDirty",value:function(){this.paintDirty=!0,this.markDirty()}},{key:"markDirtyRectangle",value:function(){this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0,this.markPaintDirty()}},{key:"markDirtyX",value:function(){this.dirtyX=!0,this.markPaintDirty()}},{key:"markDirtyY",value:function(){this.dirtyY=!0,this.markPaintDirty()}},{key:"markDirtyWidth",value:function(){this.dirtyWidth=!0,this.markPaintDirty()}},{key:"markDirtyHeight",value:function(){this.dirtyHeight=!0,this.markPaintDirty()}},{key:"markDirtyCornerXRadius",value:function(){this.dirtyCornerXRadius=!0,this.markPaintDirty()}},{key:"markDirtyCornerYRadius",value:function(){this.dirtyCornerYRadius=!0,this.markPaintDirty()}},{key:"setToCleanState",value:function(){this.paintDirty=!1,this.dirtyX=!1,this.dirtyY=!1,this.dirtyWidth=!1,this.dirtyHeight=!1,this.dirtyCornerXRadius=!1,this.dirtyCornerYRadius=!1}}]),n}(Kf(e))}));Cr.register("RectangleStatefulDrawable",mm);var gm=mm,ym=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){for(var i,r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];(i=_get(_getPrototypeOf(n.prototype),"initialize",this)).call.apply(i,[this,e,t].concat(a)),this.paintDirty=!0,this.dirtyText=!0,this.dirtyFont=!0,this.dirtyBounds=!0}},{key:"markPaintDirty",value:function(){this.paintDirty=!0,this.markDirty()}},{key:"markDirtyText",value:function(){this.dirtyText=!0,this.markPaintDirty()}},{key:"markDirtyFont",value:function(){this.dirtyFont=!0,this.markPaintDirty()}},{key:"markDirtyBounds",value:function(){this.dirtyBounds=!0,this.markPaintDirty()}},{key:"setToCleanState",value:function(){this.paintDirty=!1,this.dirtyText=!1,this.dirtyFont=!1,this.dirtyBounds=!1}}]),n}(Kf(e))}));Cr.register("TextStatefulDrawable",ym);var vm=ym,Am=[],bm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"paintCanvas",value:function(e,t,n){if(!t.selfBounds.isEmpty()){var i=e.context;i.save(),i.fillStyle="black",i.strokeStyle="black",i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.lineDash=Am,i.lineDashOffset=0,i.miterLimit=10,t.paintCanvas(i),i.restore()}}}]),n}(Zf);Cr.register("CanvasNodeDrawable",bm),Gi.mixInto(bm);var Sm=bm,Em=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"paintCanvas",value:function(e,t,n){var i=e.context;i.beginPath(),i.arc(0,0,t._radius,0,2*Math.PI,!1),i.closePath(),t.hasFill()&&(t.beforeCanvasFill(e),i.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),i.stroke(),t.afterCanvasStroke(e))}},{key:"markDirtyRadius",value:function(){this.markPaintDirty()}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Xf(Zf));Cr.register("CircleCanvasDrawable",Em),Gi.mixInto(Em);var km=Em,Vm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),r=t.call(this,e,i),ma.prepareForTransform(r.domElement),r}return _createClass(n,[{key:"initialize",value:function(e,t){if(_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.matrix=this.matrix||oi.pool.fetch(),!this.fillElement||!this.strokeElement){var i=document.createElement("div");this.fillElement=i;var r=document.createElement("div");this.strokeElement=r,i.style.display="block",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.pointerEvents="none",r.style.display="block",r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.pointerEvents="none",i.appendChild(r)}this.domElement=this.fillElement}},{key:"updateDOM",value:function(){var e=this.node,t=this.fillElement,n=this.strokeElement;if(this.paintDirty&&(this.dirtyRadius&&(t.style.width="".concat(2*e._radius,"px"),t.style.height="".concat(2*e._radius,"px"),t.style[zr.borderRadius]="".concat(e._radius,"px")),this.dirtyFill&&(t.style.backgroundColor=e.getCSSFill()),this.dirtyStroke&&(e.hasStroke()?n.style.borderStyle="solid":n.style.borderStyle="none"),e.hasStroke())){var i=!this.hadStroke;(i||this.dirtyLineWidth||this.dirtyRadius)&&(n.style.width="".concat(2*e._radius-e.getLineWidth(),"px"),n.style.height="".concat(2*e._radius-e.getLineWidth(),"px"),n.style[zr.borderRadius]="".concat(e._radius+e.getLineWidth()/2,"px")),(i||this.dirtyLineWidth)&&(n.style.left="".concat(-e.getLineWidth()/2,"px"),n.style.top="".concat(-e.getLineWidth()/2,"px"),n.style.borderWidth="".concat(e.getLineWidth(),"px")),(i||this.dirtyStroke)&&(n.style.borderColor=e.getSimpleCSSStroke())}if(this.transformDirty||this.dirtyRadius){this.matrix.set(this.getTransformMatrix());var r=oi.translation(-e._radius,-e._radius);this.matrix.multiplyMatrix(r),r.freeToPool(),ma.applyPreparedTransform(this.matrix,this.fillElement)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(sm(em));Cr.register("CircleDOMDrawable",Vm),Gi.mixInto(Vm);var wm=Vm,_m=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t,!0,!0),this.svgElement=this.svgElement||document.createElementNS(ea,"circle")}},{key:"updateSVGSelf",value:function(){var e=this.svgElement;this.dirtyRadius&&e.setAttribute("r",this.node._radius),this.updateFillStrokeStyle(e)}}]),n}(sm(nm));Cr.register("CircleSVGDrawable",_m),Gi.mixInto(_m);var Cm=_m,xm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),r=t.call(this,e,i),ma.prepareForTransform(r.domElement),r}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.domElement=this.node._container}},{key:"updateDOM",value:function(){this.transformDirty&&!this.node._preventTransform&&ma.applyPreparedTransform(this.getTransformMatrix(),this.domElement),this.transformDirty=!1}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.domElement=null}}]),n}(em);Cr.register("DOMDrawable",xm),Gi.mixInto(xm);var Pm=xm,Tm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"paintCanvas",value:function(e,t,n){var i=1!==t._imageOpacity;if(t._image&&0!==t._image.width&&0!==t._image.height){if(i&&(e.context.save(),e.context.globalAlpha*=t._imageOpacity),t._mipmap&&t.hasMipmaps()){var r=t.getMipmapLevel(n,Nl.CANVAS_MIPMAP_BIAS_ADJUSTMENT),a=t.getMipmapCanvas(r),s=Math.pow(2,r);e.context.drawImage(a,0,0,a.width*s,a.height*s)}else e.context.drawImage(t._image,0,0);i&&e.context.restore()}}},{key:"markDirtyImage",value:function(){this.markPaintDirty()}},{key:"markDirtyMipmap",value:function(){this.markPaintDirty()}},{key:"markDirtyImageOpacity",value:function(){this.markPaintDirty()}}]),n}(Zf);Cr.register("ImageCanvasDrawable",Tm),Gi.mixInto(Tm);var Mm=Tm,Lm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),r=t.call(this,e,i),ma.prepareForTransform(r.domElement),r}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.domElement||(this.domElement=document.createElement("img"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0"),this.hasOpacity=!1}},{key:"updateDOM",value:function(){var e=this.node,t=this.domElement;this.paintDirty&&this.dirtyImage&&(t.src=e._image?e._image.src:"//:0"),this.dirtyImageOpacity&&(1===e._imageOpacity?this.hasOpacity&&(this.hasOpacity=!1,t.style.opacity=""):(this.hasOpacity=!0,t.style.opacity=e._imageOpacity)),this.transformDirty&&ma.applyPreparedTransform(this.getTransformMatrix(),this.domElement),this.setToCleanState(),this.transformDirty=!1}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(lm(em));Cr.register("ImageDOMDrawable",Lm),Gi.mixInto(Lm);var Im=Lm,Rm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t,!1,!0),this.svgElement=this.svgElement||document.createElementNS(ea,"image"),this.svgElement.setAttribute("x","0"),this.svgElement.setAttribute("y","0"),this.hasOpacity=!1,this.usingMipmap=!1,this.mipmapLevel=-1,this._mipmapTransformListener=this._mipmapTransformListener||this.onMipmapTransform.bind(this),this._mipmapListener=this._mipmapListener||this.onMipmap.bind(this),this.node.mipmapEmitter.addListener(this._mipmapListener),this.updateMipmapStatus(t.node._mipmap)}},{key:"updateSVGSelf",value:function(){var e=this.svgElement;this.dirtyImage?this.node._image?this.updateURL(e,!0):(e.setAttribute("width","0"),e.setAttribute("height","0"),e.setAttributeNS(na,"xlink:href","//:0")):this.dirtyMipmap&&this.node._image&&this.updateURL(e,!1),this.dirtyImageOpacity&&(1===this.node._imageOpacity?this.hasOpacity&&(this.hasOpacity=!1,e.removeAttribute("opacity")):(this.hasOpacity=!0,e.setAttribute("opacity",this.node._imageOpacity)))}},{key:"updateURL",value:function(e,t){var n=-1;if(this.node._mipmap&&(n=this.node.getMipmapLevel(this.instance.relativeTransform.matrix)),t||n!==this.mipmapLevel)if(this.mipmapLevel>=0&&-1===n&&e.removeAttribute("transform"),this.mipmapLevel=n,this.node._mipmap&&this.node.hasMipmaps()){var i=this.node.getMipmapURL(n),r=this.node.getMipmapCanvas(n);e.setAttribute("width","".concat(r.width,"px")),e.setAttribute("height","".concat(r.height,"px")),e.setAttribute("transform","scale(".concat(Math.pow(2,n).toFixed(20),")")),e.setAttributeNS(na,"xlink:href",i)}else e.setAttribute("width","".concat(this.node.getImageWidth(),"px")),e.setAttribute("height","".concat(this.node.getImageHeight(),"px")),e.setAttributeNS(na,"xlink:href",this.node.getImageURL())}},{key:"updateMipmapStatus",value:function(e){this.usingMipmap!==e&&(this.usingMipmap=e,e?(this.instance.relativeTransform.addListener(this._mipmapTransformListener),this.instance.relativeTransform.addPrecompute()):(this.instance.relativeTransform.removeListener(this._mipmapTransformListener),this.instance.relativeTransform.removePrecompute()),this.markDirtyMipmap())}},{key:"onMipmap",value:function(){this.markDirtyMipmap(),this.updateMipmapStatus(this.node._mipmap)}},{key:"onMipmapTransform",value:function(){this.markDirtyMipmap()}},{key:"dispose",value:function(){this.updateMipmapStatus(!1),this.node.mipmapEmitter.removeListener(this._mipmapListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(lm(nm));Cr.register("ImageSVGDrawable",Rm),Gi.mixInto(Rm);var Dm=Rm,Nm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.vertexArray=this.vertexArray||new Float32Array(30),this.upperLeft=new pn(0,0),this.lowerLeft=new pn(0,0),this.upperRight=new pn(0,0),this.lowerRight=new pn(0,0),this.xyDirty=!0,this.uvDirty=!0,this.updatedOnce=!1,this.sprite=null}},{key:"onAddToBlock",value:function(e){this.webglBlock=e,this.markDirty(),this.reserveSprite()}},{key:"onRemoveFromBlock",value:function(e){this.unreserveSprite()}},{key:"reserveSprite",value:function(){if(this.sprite){if(this.sprite.image===this.node._image)return;this.unreserveSprite()}var e=this.node.getImageWidth(),t=this.node.getImageHeight();this.sprite=e>0&&t>0?this.webglBlock.addSpriteSheetImage(this.node._image,e,t):null,this.xyDirty=!0,this.uvDirty=!0}},{key:"unreserveSprite",value:function(){this.sprite&&this.webglBlock.removeSpriteSheetImage(this.sprite),this.sprite=null}},{key:"markTransformDirty",value:function(){this.xyDirty=!0,_get(_getPrototypeOf(n.prototype),"markTransformDirty",this).call(this)}},{key:"markPaintDirty",value:function(){this.xyDirty=!0,this.uvDirty=!0,this.markDirty()}},{key:"update",value:function(){if(!_get(_getPrototypeOf(n.prototype),"update",this).call(this))return!1;if(this.reserveSprite(),!this.dirtyImageOpacity&&this.updatedOnce||(this.vertexArray[4]=this.node._imageOpacity,this.vertexArray[9]=this.node._imageOpacity,this.vertexArray[14]=this.node._imageOpacity,this.vertexArray[19]=this.node._imageOpacity,this.vertexArray[24]=this.node._imageOpacity,this.vertexArray[29]=this.node._imageOpacity),this.updatedOnce=!0,!this.sprite)return!1;if(this.uvDirty){this.uvDirty=!1;var e=this.sprite.uvBounds;this.vertexArray[2]=e.minX,this.vertexArray[3]=e.minY,this.vertexArray[7]=e.minX,this.vertexArray[8]=e.maxY,this.vertexArray[12]=e.maxX,this.vertexArray[13]=e.minY,this.vertexArray[17]=e.maxX,this.vertexArray[18]=e.minY,this.vertexArray[22]=e.minX,this.vertexArray[23]=e.maxY,this.vertexArray[27]=e.maxX,this.vertexArray[28]=e.maxY}if(this.xyDirty){this.xyDirty=!1;var t=this.node.getImageWidth(),i=this.node.getImageHeight(),r=this.instance.relativeTransform.matrix;r.multiplyVector2(this.upperLeft.setXY(0,0)),r.multiplyVector2(this.lowerLeft.setXY(0,i)),r.multiplyVector2(this.upperRight.setXY(t,0)),r.multiplyVector2(this.lowerRight.setXY(t,i)),this.vertexArray[0]=this.upperLeft.x,this.vertexArray[1]=this.upperLeft.y,this.vertexArray[5]=this.lowerLeft.x,this.vertexArray[6]=this.lowerLeft.y,this.vertexArray[10]=this.upperRight.x,this.vertexArray[11]=this.upperRight.y,this.vertexArray[15]=this.upperRight.x,this.vertexArray[16]=this.upperRight.y,this.vertexArray[20]=this.lowerLeft.x,this.vertexArray[21]=this.lowerLeft.y,this.vertexArray[25]=this.lowerRight.x,this.vertexArray[26]=this.lowerRight.y}return!0}}]),n}(lm(rm));Nm.prototype.webglRenderer=Zr.webglTexturedTriangles,Cr.register("ImageWebGLDrawable",Nm),Gi.mixInto(Nm);var qm=Nm,Om=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"paintCanvas",value:function(e,t,n){var i=e.context;i.beginPath(),i.moveTo(t.x1,t.y1),i.lineTo(t.x2,t.y2),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),i.stroke(),t.afterCanvasStroke(e))}}]),n}(cm(Zf));Cr.register("LineCanvasDrawable",Om),Gi.mixInto(Om);var Bm=Om,Gm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t,!0,!0),this.svgElement=this.svgElement||document.createElementNS(ea,"line")}},{key:"updateSVGSelf",value:function(){var e=this.svgElement;this.dirtyX1&&e.setAttribute("x1",this.node.x1),this.dirtyY1&&e.setAttribute("y1",this.node.y1),this.dirtyX2&&e.setAttribute("x2",this.node.x2),this.dirtyY2&&e.setAttribute("y2",this.node.y2),this.updateFillStrokeStyle(e)}}]),n}(dm(nm));Cr.register("LineSVGDrawable",Gm),Gi.mixInto(Gm);var Hm=Gm,Fm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"paintCanvas",value:function(e,t,n){var i=e.context;t.hasShape()&&(i.beginPath(),t._shape.writeToContext(i),t.hasFill()&&(t.beforeCanvasFill(e),i.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),i.stroke(),t.afterCanvasStroke(e)))}},{key:"markDirtyShape",value:function(){this.markPaintDirty()}}]),n}(Xf(Zf));Cr.register("PathCanvasDrawable",Fm),Gi.mixInto(Fm);var Ym=Fm,zm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t,!0,!0),this.svgElement=this.svgElement||document.createElementNS(ea,"path")}},{key:"updateSVGSelf",value:function(){var e=this.svgElement;if(this.dirtyShape){var t=this.node.hasShape()?this.node._shape.getSVGPath():"";t||(t="M0 0"),e.setAttribute("d",t)}this.updateFillStrokeStyle(e)}}]),n}(fm(nm));Cr.register("PathSVGDrawable",zm),Gi.mixInto(zm);var Um=zm,Wm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"writeRectangularPath",value:function(e,t){e.beginPath(),e.moveTo(t._rectX,t._rectY),e.lineTo(t._rectX+t._rectWidth,t._rectY),e.lineTo(t._rectX+t._rectWidth,t._rectY+t._rectHeight),e.lineTo(t._rectX,t._rectY+t._rectHeight),e.closePath()}},{key:"paintCanvas",value:function(e,t,n){var i=e.context;if(t.isRounded()){i.beginPath();var r=t.getMaximumArcSize(),a=Math.min(t._cornerXRadius,r),s=Math.min(t._cornerYRadius,r),o=t._rectX+a,l=t._rectX+t._rectWidth-a,u=t._rectY+s,c=t._rectY+t._rectHeight-s;a===s?(i.arc(l,u,a,-Math.PI/2,0,!1),i.arc(l,c,a,0,Math.PI/2,!1),i.arc(o,c,a,Math.PI/2,Math.PI,!1),i.arc(o,u,a,Math.PI,3*Math.PI/2,!1)):(i.ellipse(l,u,a,s,0,-Math.PI/2,0,!1),i.ellipse(l,c,a,s,0,0,Math.PI/2,!1),i.ellipse(o,c,a,s,0,Math.PI/2,Math.PI,!1),i.ellipse(o,u,a,s,0,Math.PI,3*Math.PI/2,!1)),i.closePath(),t.hasFill()&&(t.beforeCanvasFill(e),i.fill(),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),i.stroke(),t.afterCanvasStroke(e))}else t.hasFill()&&(t.getFillValue().transformMatrix?(this.writeRectangularPath(i,t),t.beforeCanvasFill(e),i.fill(),t.afterCanvasFill(e)):(t.beforeCanvasFill(e),i.fillRect(t._rectX,t._rectY,t._rectWidth,t._rectHeight),t.afterCanvasFill(e))),t.hasPaintableStroke()&&(t.getStrokeValue().transformMatrix?(this.writeRectangularPath(i,t),t.beforeCanvasStroke(e),i.stroke(),t.afterCanvasStroke(e)):(t.beforeCanvasStroke(e),i.strokeRect(t._rectX,t._rectY,t._rectWidth,t._rectHeight),t.afterCanvasStroke(e)))}},{key:"markDirtyRectangle",value:function(){this.markPaintDirty()}},{key:"markDirtyX",value:function(){this.markDirtyRectangle()}},{key:"markDirtyY",value:function(){this.markDirtyRectangle()}},{key:"markDirtyWidth",value:function(){this.markDirtyRectangle()}},{key:"markDirtyHeight",value:function(){this.markDirtyRectangle()}},{key:"markDirtyCornerXRadius",value:function(){this.markDirtyRectangle()}},{key:"markDirtyCornerYRadius",value:function(){this.markDirtyRectangle()}}]),n}(Xf(Zf));Cr.register("RectangleCanvasDrawable",Wm),Gi.mixInto(Wm);var jm=Wm,Xm=oi.pool.fetch(),Qm=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),r=t.call(this,e,i),ma.prepareForTransform(r.domElement),r}return _createClass(n,[{key:"initialize",value:function(e,t){if(_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),!this.fillElement||!this.strokeElement){var i=document.createElement("div");this.fillElement=i,i.style.display="block",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.pointerEvents="none";var r=document.createElement("div");this.strokeElement=r,r.style.display="block",r.style.position="absolute",r.style.left="0",r.style.top="0",r.style.pointerEvents="none",i.appendChild(r)}this.domElement=this.fillElement}},{key:"updateDOM",value:function(){var e=this.node,t=this.fillElement,n=this.strokeElement;if(this.paintDirty){var i=Math.min(e._cornerXRadius,e._cornerYRadius),r=this.dirtyCornerXRadius||this.dirtyCornerYRadius;if(this.dirtyWidth&&(t.style.width="".concat(e._rectWidth,"px")),this.dirtyHeight&&(t.style.height="".concat(e._rectHeight,"px")),r&&(t.style[zr.borderRadius]="".concat(i,"px")),this.dirtyFill&&(t.style.backgroundColor=e.getCSSFill()),this.dirtyStroke&&(e.hasStroke()?n.style.borderStyle="solid":n.style.borderStyle="none"),e.hasStroke()){var a=!this.hadStroke;(a||this.dirtyWidth||this.dirtyLineWidth)&&(n.style.width="".concat(e._rectWidth-e.getLineWidth(),"px")),(a||this.dirtyHeight||this.dirtyLineWidth)&&(n.style.height="".concat(e._rectHeight-e.getLineWidth(),"px")),(a||this.dirtyLineWidth)&&(n.style.left="".concat(-e.getLineWidth()/2,"px"),n.style.top="".concat(-e.getLineWidth()/2,"px"),n.style.borderWidth="".concat(e.getLineWidth(),"px")),(a||this.dirtyStroke)&&(n.style.borderColor=e.getSimpleCSSStroke()),(a||r||this.dirtyLineWidth||this.dirtyLineOptions)&&(n.style[zr.borderRadius]=e.isRounded()||"round"===e.getLineJoin()?"".concat(i+e.getLineWidth()/2,"px"):"0")}}if(this.transformDirty||this.dirtyX||this.dirtyY){Xm.set(this.getTransformMatrix());var s=oi.translation(e._rectX,e._rectY);Xm.multiplyMatrix(s),s.freeToPool(),ma.applyPreparedTransform(Xm,this.fillElement)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(gm(em));Cr.register("RectangleDOMDrawable",Qm),Gi.mixInto(Qm);var Km=Qm,Jm=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t,!0,!0),this.lastArcW=-1,this.lastArcH=-1,this.svgElement=this.svgElement||document.createElementNS(ea,"rect")}},{key:"updateSVGSelf",value:function(){var e=this.svgElement;if(this.dirtyX&&e.setAttribute("x",this.node._rectX),this.dirtyY&&e.setAttribute("y",this.node._rectY),this.dirtyWidth&&e.setAttribute("width",this.node._rectWidth),this.dirtyHeight&&e.setAttribute("height",this.node._rectHeight),this.dirtyCornerXRadius||this.dirtyCornerYRadius||this.dirtyWidth||this.dirtyHeight){var t=0,n=0;if(this.node.isRounded()){var i=this.node.getMaximumArcSize();t=Math.min(this.node._cornerXRadius,i),n=Math.min(this.node._cornerYRadius,i)}t!==this.lastArcW&&(this.lastArcW=t,e.setAttribute("rx",t)),n!==this.lastArcH&&(this.lastArcH=n,e.setAttribute("ry",n))}this.updateFillStrokeStyle(e)}}]),n}(gm(nm));Cr.register("RectangleSVGDrawable",Jm),Gi.mixInto(Jm);var Zm=Jm,$m=new Rr("transparent"),eg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.vertexArray||(this.vertexArray=new Float32Array(36)),this.upperLeft=new pn(0,0),this.lowerLeft=new pn(0,0),this.upperRight=new pn(0,0),this.lowerRight=new pn(0,0),this.transformDirty=!0,this.includeVertices=!0}},{key:"onAddToBlock",value:function(e){this.webglBlock=e,this.markDirty()}},{key:"onRemoveFromBlock",value:function(e){}},{key:"markTransformDirty",value:function(){this.transformDirty=!0,_get(_getPrototypeOf(n.prototype),"markTransformDirty",this).call(this)}},{key:"update",value:function(){if(!_get(_getPrototypeOf(n.prototype),"update",this).call(this))return!1;if(this.dirtyFill&&(this.includeVertices=this.node.hasFill(),this.includeVertices))for(var e=this.node.fill instanceof ht?this.node.fill.value:this.node.fill,t=$m.set(e),i=t.red/255,r=t.green/255,a=t.blue/255,s=t.alpha,o=0;o<6;o++){var l=6*o;this.vertexArray[2+l]=i,this.vertexArray[3+l]=r,this.vertexArray[4+l]=a,this.vertexArray[5+l]=s}if(this.transformDirty||this.dirtyX||this.dirtyY||this.dirtyWidth||this.dirtyHeight){this.transformDirty=!1;var u=this.node._rectX,c=this.node._rectY,h=this.node._rectWidth,d=this.node._rectHeight,p=this.instance.relativeTransform.matrix;p.multiplyVector2(this.upperLeft.setXY(u,c)),p.multiplyVector2(this.lowerLeft.setXY(u,c+d)),p.multiplyVector2(this.upperRight.setXY(u+h,c)),p.multiplyVector2(this.lowerRight.setXY(u+h,c+d)),this.vertexArray[0]=this.upperLeft.x,this.vertexArray[1]=this.upperLeft.y,this.vertexArray[6]=this.lowerLeft.x,this.vertexArray[7]=this.lowerLeft.y,this.vertexArray[12]=this.upperRight.x,this.vertexArray[13]=this.upperRight.y,this.vertexArray[18]=this.upperRight.x,this.vertexArray[19]=this.upperRight.y,this.vertexArray[24]=this.lowerLeft.x,this.vertexArray[25]=this.lowerLeft.y,this.vertexArray[30]=this.lowerRight.x,this.vertexArray[31]=this.lowerRight.y}return this.setToCleanState(),this.cleanPaintableState(),!0}}]),n}(gm(rm));eg.prototype.webglRenderer=Zr.webglVertexColorPolygons,Cr.register("RectangleWebGLDrawable",eg),Gi.mixInto(eg);var tg=eg,ng=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"paintCanvas",value:function(e,t,n){for(var i=Nl.getApproximateMatrixScale(n)*(window.devicePixelRatio||1),r=t._spriteInstances.length,a=0;a<r;a++){var s=t._spriteInstances[a],o=s.sprite.imageProperty.value,l=1!==s.alpha||1!==o.imageOpacity,u=o._mipmap&&o.hasMipmaps();if(l&&(e.context.save(),e.context.globalAlpha*=s.alpha*o.imageOpacity),s.transformType===cs.TRANSLATION&&n.isTranslation())if(u){var c=o.getMipmapLevelFromScale(i,Nl.CANVAS_MIPMAP_BIAS_ADJUSTMENT),h=o.getMipmapCanvas(c),d=Math.pow(2,c);e.context.drawImage(h,s.matrix.m02()-o.offset.x,s.matrix.m12()-o.offset.y,h.width*d,h.height*d)}else e.context.drawImage(o.image,s.matrix.m02()-o.offset.x,s.matrix.m12()-o.offset.y);else{if(e.context.save(),s.matrix.canvasAppendTransform(e.context),u){var p=o.getMipmapLevelFromScale(i*Nl.getApproximateMatrixScale(s.matrix),Nl.CANVAS_MIPMAP_BIAS_ADJUSTMENT),f=o.getMipmapCanvas(p),m=Math.pow(2,p);e.context.drawImage(f,-o.offset.x,-o.offset.y,f.width*m,f.height*m)}else e.context.drawImage(o.image,-o.offset.x,-o.offset.y);e.context.restore()}l&&e.context.restore()}}}]),n}(Zf);Cr.register("SpritesCanvasDrawable",ng),Gi.mixInto(ng);var ig=ng,rg=new pn(0,0),ag=new pn(0,0),sg=new pn(0,0),og=new pn(0,0),lg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){var i=this;_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.contextChangeListener=this.onWebGLContextChange.bind(this),this.spriteSheet=new ys(!0),this.spriteImageUVMap={},this.vertexArray=new Float32Array(3840),this.transformMatrixArray=new Float32Array(9),this.spriteChangeListener=this.onSpriteChange.bind(this),this.node._sprites.forEach((function(e){e.imageProperty.lazyLink(i.spriteChangeListener),i.addSpriteImage(e.imageProperty.value)})),this.hasDrawn=!1}},{key:"addSpriteImage",value:function(e){this.spriteImageUVMap[e.id]=this.spriteSheet.addImage(e.image,e.image.width,e.image.height).uvBounds}},{key:"removeSpriteImage",value:function(e){this.spriteSheet.removeImage(e.image),delete this.spriteImageUVMap[e.id]}},{key:"onSpriteChange",value:function(e,t){this.removeSpriteImage(t),this.addSpriteImage(e)}},{key:"setup",value:function(){var e=this.webGLBlock.gl;this.spriteSheet.initializeContext(e),this.shaderProgram=new As(e,["attribute vec2 aVertex;","attribute vec2 aTextureCoord;","attribute float aAlpha;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform mat3 uProjectionMatrix;","uniform mat3 uTransformMatrix;","void main() {","  vTextureCoord = aTextureCoord;","  vAlpha = aAlpha;","  vec3 ndc = uProjectionMatrix * ( uTransformMatrix * vec3( aVertex, 1.0 ) );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join("\n"),["precision mediump float;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform sampler2D uTexture;","void main() {","  vec4 color = texture2D( uTexture, vTextureCoord, -0.7 );","  color.a *= vAlpha;","  gl_FragColor = color;","}"].join("\n"),{attributes:["aVertex","aTextureCoord","aAlpha"],uniforms:["uTexture","uProjectionMatrix","uTransformMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}},{key:"onWebGLContextChange",value:function(){this.setup()}},{key:"onAddToBlock",value:function(e){this.webGLBlock=e,this.setup(),e.glChangedEmitter.addListener(this.contextChangeListener)}},{key:"onRemoveFromBlock",value:function(e){e.glChangedEmitter.removeListener(this.contextChangeListener)}},{key:"draw",value:function(){var e=this,t=this.node._spriteInstances.length;if(0===t)return 0;this.spriteSheet.updateTexture(),this.shaderProgram.use();for(var n=0,i=!1;30*t>this.vertexArray.length;)this.vertexArray=new Float32Array(2*this.vertexArray.length),i=!0;for(var r=0;r<t;r++){var a=this.node._spriteInstances[r],s=a.sprite.imageProperty.value,o=a.alpha*s.imageOpacity,l=this.spriteImageUVMap[s.id],u=a.matrix,c=s.offset,h=s.image.width,d=s.image.height;u.multiplyVector2(rg.setXY(-c.x,-c.y)),u.multiplyVector2(ag.setXY(-c.x,d-c.y)),u.multiplyVector2(sg.setXY(h-c.x,-c.y)),u.multiplyVector2(og.setXY(h-c.x,d-c.y)),this.vertexArray[n+0]=rg.x,this.vertexArray[n+1]=rg.y,this.vertexArray[n+2]=l.minX,this.vertexArray[n+3]=l.minY,this.vertexArray[n+4]=o,this.vertexArray[n+5]=ag.x,this.vertexArray[n+6]=ag.y,this.vertexArray[n+7]=l.minX,this.vertexArray[n+8]=l.maxY,this.vertexArray[n+9]=o,this.vertexArray[n+10]=sg.x,this.vertexArray[n+11]=sg.y,this.vertexArray[n+12]=l.maxX,this.vertexArray[n+13]=l.minY,this.vertexArray[n+14]=o,this.vertexArray[n+15]=sg.x,this.vertexArray[n+16]=sg.y,this.vertexArray[n+17]=l.maxX,this.vertexArray[n+18]=l.minY,this.vertexArray[n+19]=o,this.vertexArray[n+20]=ag.x,this.vertexArray[n+21]=ag.y,this.vertexArray[n+22]=l.minX,this.vertexArray[n+23]=l.maxY,this.vertexArray[n+24]=o,this.vertexArray[n+25]=og.x,this.vertexArray[n+26]=og.y,this.vertexArray[n+27]=l.maxX,this.vertexArray[n+28]=l.maxY,this.vertexArray[n+29]=o,n+=30}var p=this.webGLBlock.gl;p.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.webGLBlock.projectionMatrixArray),this.instance.relativeTransform.matrix.copyToArray(this.transformMatrixArray),p.uniformMatrix3fv(this.shaderProgram.uniformLocations.uTransformMatrix,!1,this.transformMatrixArray),p.bindBuffer(p.ARRAY_BUFFER,this.vertexBuffer),i?p.bufferData(p.ARRAY_BUFFER,this.vertexArray,p.DYNAMIC_DRAW):p.bufferSubData(p.ARRAY_BUFFER,0,this.vertexArray.subarray(0,n));var f=Float32Array.BYTES_PER_ELEMENT,g=5*f;return p.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,p.FLOAT,!1,g,0*f),p.vertexAttribPointer(this.shaderProgram.attributeLocations.aTextureCoord,2,p.FLOAT,!1,g,2*f),p.vertexAttribPointer(this.shaderProgram.attributeLocations.aAlpha,1,p.FLOAT,!1,g,4*f),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,this.spriteSheet.texture),p.uniform1i(this.shaderProgram.uniformLocations.uTexture,0),p.drawArrays(p.TRIANGLES,0,n/5),p.bindTexture(p.TEXTURE_2D,null),this.shaderProgram.unuse(),!this.hasDrawn&&la.safari&&m.setTimeout((function(){return e.markDirty()}),0),this.hasDrawn=!0,1}},{key:"dispose",value:function(){var e=this;this.node._sprites.forEach((function(t){t.imageProperty.unlink(e.spriteChangeListener)})),this.webGLBlock&&(this.webGLBlock=null),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"markPaintDirty",value:function(){this.markDirty()}}]),n}(rm);lg.prototype.webglRenderer=Zr.webglCustom,Cr.register("SpritesWebGLDrawable",lg),Gi.mixInto(lg);var ug=lg,cg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"paintCanvas",value:function(e,t,n){var i=e.context;(t.hasFill()||t.hasPaintableStroke())&&(e.setFont(t._font.getFont()),e.setDirection("ltr")),t.hasFill()&&(t.beforeCanvasFill(e),i.fillText(t.renderedText,0,0),t.afterCanvasFill(e)),t.hasPaintableStroke()&&(t.beforeCanvasStroke(e),i.strokeText(t.renderedText,0,0),t.afterCanvasStroke(e))}},{key:"markDirtyText",value:function(){this.markPaintDirty()}},{key:"markDirtyFont",value:function(){this.markPaintDirty()}},{key:"markDirtyBounds",value:function(){this.markPaintDirty()}}]),n}(Xf(Zf));Cr.register("TextCanvasDrawable",cg),Gi.mixInto(cg);var hg=cg,dg=oi.pool.fetch(),pg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),r=t.call(this,e,i),ma.prepareForTransform(r.domElement),r}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.domElement||(this.domElement=document.createElement("div"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0",this.domElement.setAttribute("dir","ltr"))}},{key:"updateDOM",value:function(){var e=this.node,t=this.domElement;if(this.paintDirty&&(this.dirtyFont&&(t.style.font=e.getFont()),this.dirtyStroke&&(t.style.color=e.getCSSFill()),this.dirtyBounds&&(t.style.width="".concat(e.getSelfBounds().width,"px"),t.style.height="".concat(e.getSelfBounds().height,"px")),this.dirtyText&&(t.textContent=e.renderedText)),this.transformDirty||this.dirtyText||this.dirtyFont||this.dirtyBounds){var n=e.getSelfBounds().minY;dg.set(this.getTransformMatrix());var i=oi.translation(0,n);dg.multiplyMatrix(i),i.freeToPool(),ma.applyPreparedTransform(dg,t)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(vm(em));Cr.register("TextDOMDrawable",pg),Gi.mixInto(pg);var fg=pg,mg=!la.edge,gg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){if(_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t,!0,!0),this.hasLength=!1,!this.svgElement){var i=document.createElementNS(ea,"text");this.svgElement=i,i.appendChild(document.createTextNode("")),i.setAttribute("dominant-baseline","alphabetic"),i.setAttribute("text-rendering","geometricPrecision"),i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("direction","ltr")}}},{key:"updateSVGSelf",value:function(){var e=this.svgElement;(this.dirtyFont&&(e.setAttribute("font-family",this.node._font.getFamily()),e.setAttribute("font-size",this.node._font.getSize()),e.setAttribute("font-style",this.node._font.getStyle()),e.setAttribute("font-weight",this.node._font.getWeight()),e.setAttribute("font-stretch",this.node._font.getStretch())),this.dirtyText&&(e.lastChild.nodeValue=ma.safariEmbeddingMarkWorkaround(this.node.renderedText)),this.dirtyBounds&&mg)&&("accurate"!==this.node._boundsMethod&&isFinite(this.node.selfBounds.width)?(this.hasLength||(this.hasLength=!0,e.setAttribute("lengthAdjust","spacingAndGlyphs")),e.setAttribute("textLength",this.node.selfBounds.width)):this.hasLength&&(this.hasLength=!1,e.removeAttribute("lengthAdjust"),e.removeAttribute("textLength")));this.updateFillStrokeStyle(e)}}]),n}(vm(nm));Cr.register("TextSVGDrawable",gg),Gi.mixInto(gg);var yg=gg,vg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.contextChangeListener=this.contextChangeListener||this.onWebGLContextChange.bind(this),this.painter=null}},{key:"createPainter",value:function(){return new(0,this.node.painterType)(this.webGLBlock.gl,this.node)}},{key:"onWebGLContextChange",value:function(){this.painter=this.createPainter()}},{key:"onAddToBlock",value:function(e){this.webGLBlock=e,this.painter=this.createPainter(),e.glChangedEmitter.addListener(this.contextChangeListener)}},{key:"onRemoveFromBlock",value:function(e){e.glChangedEmitter.removeListener(this.contextChangeListener)}},{key:"draw",value:function(){var e=this.instance.relativeTransform.matrix,t=this.painter.paint(e,this.webGLBlock.projectionMatrix);return t}},{key:"dispose",value:function(){this.painter.dispose(),this.painter=null,this.webGLBlock&&(this.webGLBlock=null),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"markPaintDirty",value:function(){this.markDirty()}},{key:"shaderAttributes",get:function(){return this.node.shaderAttributes}}]),n}(rm);vg.prototype.webglRenderer=Zr.webglCustom,Cr.register("WebGLNodeDrawable",vg),Gi.mixInto(vg);var Ag=vg,bg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).initialize(e,i),r}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e),this.instance=t}},{key:"stitch",value:function(e,t,n,i){}}]),n}(zf);Cr.register("InlineCanvasCacheDrawable",bg);var Sg=bg,Eg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;return _classCallCheck(this,n),(s=t.call(this)).initialize(e,i,r,a),s}return _createClass(n,[{key:"initialize",value:function(e,t,i,r){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,t),this.instance=i,this.sharedInstance=r}}]),n}(zf);Cr.register("SharedCanvasCacheDrawable",Eg);var kg=Eg,Vg=function(){function e(t){_classCallCheck(this,e),this.instance=t}return _createClass(e,[{key:"initialize",value:function(e,t){return this.display=e,this.trail=t,this.node=t&&t.lastNode(),this.transformDirty=!0,this.nodeTransformListener=this.nodeTransformListener||this.onNodeTransformDirty.bind(this),this.matrix=this.matrix||oi.identity(),this.relativeSelfDirty=!0,this.relativeChildrenListenersCount=0,this.relativePrecomputeCount=0,this.relativeChildrenPrecomputeCount=0,this.relativeFrameId=-1,this.relativeChildDirtyFrame=e?e._frameId:0,this.relativeTransformListeners=Ui(this.relativeTransformListeners),this}},{key:"parent",get:function(){return this.instance.parent?this.instance.parent.relativeTransform:null}},{key:"addInstance",value:function(e){e.stateless||(e.relativeTransform.hasAncestorListenerNeed()&&this.incrementTransformListenerChildren(),e.relativeTransform.hasAncestorComputeNeed()&&this.incrementTransformPrecomputeChildren()),e.relativeTransform.forceMarkTransformDirty()}},{key:"removeInstance",value:function(e){e.relativeTransform.hasAncestorListenerNeed()&&this.decrementTransformListenerChildren(),e.relativeTransform.hasAncestorComputeNeed()&&this.decrementTransformPrecomputeChildren()}},{key:"attachNodeListeners",value:function(){this.node.transformEmitter.addListener(this.nodeTransformListener)}},{key:"detachNodeListeners",value:function(){this.node.transformEmitter.removeListener(this.nodeTransformListener)}},{key:"hasDescendantListenerNeed",value:function(){return this.instance.isTransformed?this.relativeChildrenListenersCount>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0}},{key:"hasAncestorListenerNeed",value:function(){return this.instance.isTransformed?this.relativeTransformListeners.length>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0}},{key:"hasSelfListenerNeed",value:function(){return this.relativeTransformListeners.length>0}},{key:"incrementTransformListenerChildren",value:function(){var e=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount++,e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.incrementTransformListenerChildren()}},{key:"decrementTransformListenerChildren",value:function(){var e=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount--,e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()}},{key:"addListener",value:function(e){var t=this.hasAncestorListenerNeed();this.relativeTransformListeners.push(e),t!==this.hasAncestorListenerNeed()&&(this.parent&&this.parent.incrementTransformListenerChildren(),this.hasAncestorComputeNeed()||this.forceMarkTransformDirty())}},{key:"removeListener",value:function(e){var t=this.hasAncestorListenerNeed();this.relativeTransformListeners.splice(_.indexOf(this.relativeTransformListeners,e),1),t!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()}},{key:"hasDescendantComputeNeed",value:function(){return this.instance.isTransformed?this.relativeChildrenPrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0}},{key:"hasAncestorComputeNeed",value:function(){return this.instance.isTransformed?this.relativePrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0}},{key:"hasSelfComputeNeed",value:function(){return this.relativePrecomputeCount>0}},{key:"incrementTransformPrecomputeChildren",value:function(){var e=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount++,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.incrementTransformPrecomputeChildren()}},{key:"decrementTransformPrecomputeChildren",value:function(){var e=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount--,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()}},{key:"addPrecompute",value:function(){var e=this.hasAncestorComputeNeed();this.relativePrecomputeCount++,e!==this.hasAncestorComputeNeed()&&(this.parent&&this.parent.incrementTransformPrecomputeChildren(),this.hasAncestorListenerNeed()||this.forceMarkTransformDirty())}},{key:"removePrecompute",value:function(){var e=this.hasAncestorComputeNeed();this.relativePrecomputeCount--,e!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()}},{key:"onNodeTransformDirty",value:function(){this.transformDirty||this.forceMarkTransformDirty()}},{key:"forceMarkTransformDirty",value:function(){this.transformDirty=!0,this.relativeSelfDirty=!0;for(var e=this.display._frameId,t=this.instance.parent;t&&t.relativeTransform.relativeChildDirtyFrame!==e;){var n=t.parent,i=t.isTransformed;if(t.relativeTransform.relativeChildDirtyFrame=e,null===n){this.display.markTransformRootDirty(t,i);break}if(i){this.display.markTransformRootDirty(t,!0);break}t=n}}},{key:"computeRelativeTransform",value:function(){var e=this.node.getMatrix();this.instance.parent&&!this.instance.parent.isTransformed?(this.matrix.set(this.parent.matrix),this.matrix.multiplyMatrix(e)):this.matrix.set(e),this.relativeFrameId=this.display._frameId,this.relativeSelfDirty=!1}},{key:"isValidationNotNeeded",value:function(){return this.hasAncestorComputeNeed()||this.relativeFrameId===this.display._frameId}},{key:"validate",value:function(){if(!this.isValidationNotNeeded()&&(this.instance.parent&&!this.instance.parent.isTransformed&&this.parent.validate(),this.relativeSelfDirty)){this.computeRelativeTransform();for(var e=this.instance.children.length,t=0;t<e;t++)this.instance.children[t].relativeTransform.relativeSelfDirty=!0}}},{key:"updateTransformListenersAndCompute",value:function(e,t,n,i){var r,a;if(i)for(r=this.instance.children.length,a=0;a<r;a++)this.instance.children[a].relativeTransform.updateTransformListenersAndCompute(!1,!1,n,!1);else{var s=e||this.relativeSelfDirty,o=s||this.relativeChildDirtyFrame===n,l=this.hasDescendantComputeNeed(),u=this.hasDescendantListenerNeed(),c=this.hasSelfComputeNeed(),h=this.hasSelfListenerNeed();if(l||!s||t||(this.relativeSelfDirty=!0),!o||!l&&!u&&!c&&!h)return;if(s&&(l||c)&&this.computeRelativeTransform(),this.transformDirty&&(this.transformDirty=!1),this.notifyRelativeTransformListeners(),!this.instance.isTransformed||i){var d=s&&!(l||c);for(r=this.instance.children.length,a=0;a<r;a++)this.instance.children[a].relativeTransform.updateTransformListenersAndCompute(s,d,n,!1)}}}},{key:"notifyRelativeTransformListeners",value:function(){for(var e=this.relativeTransformListeners.length,t=0;t<e;t++)this.relativeTransformListeners[t]()}},{key:"audit",value:function(e,t){}}]),e}();Cr.register("RelativeTransform",Vg);var wg=Vg,_g=function(){function e(t,n){_classCallCheck(this,e),this.initialize(t,n)}return _createClass(e,[{key:"initialize",value:function(e,t){this.nextChangeInterval=null,this.drawableBefore=e,this.drawableAfter=t,this.collapsedEmpty=!1}},{key:"dispose",value:function(){this.nextChangeInterval=null,this.drawableBefore=null,this.drawableAfter=null,this.freeToPool()}},{key:"constrict",value:function(){var e=!1;if(this.isEmpty())return!0;for(;this.drawableBefore&&this.drawableBefore.nextDrawable===this.drawableBefore.oldNextDrawable;)if(this.drawableBefore=this.drawableBefore.nextDrawable,e=!0,this.drawableBefore||(this.collapsedEmpty=!0),this.isEmpty())return!0;for(;this.drawableAfter&&this.drawableAfter.previousDrawable===this.drawableAfter.oldPreviousDrawable;)if(this.drawableAfter=this.drawableAfter.previousDrawable,e=!0,this.drawableAfter||(this.collapsedEmpty=!0),this.isEmpty())return!0;return e}},{key:"isEmpty",value:function(){return this.collapsedEmpty||null!==this.drawableBefore&&this.drawableBefore===this.drawableAfter}},{key:"getOldInternalDrawableCount",value:function(e,t){for(var n=this.drawableBefore?this.drawableBefore.oldNextDrawable:e,i=this.drawableAfter,r=0,a=n;a!==i;a=a.oldNextDrawable)r++;return r}},{key:"getNewInternalDrawableCount",value:function(e,t){for(var n=this.drawableBefore?this.drawableBefore.nextDrawable:e,i=this.drawableAfter,r=0,a=n;a!==i;a=a.nextDrawable)r++;return r}}],[{key:"newForDisplay",value:function(t,n,i){var r=e.createFromPool(t,n);return i.markChangeIntervalToDispose(r),r}}]),e}();Cr.register("ChangeInterval",_g),Gi.mixInto(_g);var Cg=_g,xg=function(){function e(t){_classCallCheck(this,e),this.instance=t}return _createClass(e,[{key:"initialize",value:function(e,t){return this.display=e,this.trail=t,this.node=t&&t.lastNode(),this.selfFittable=!!t&&this.isSelfFitSupported(),this.ancestorsFittable=this.selfFittable,this.subtreeUnfittableCount=this.selfFittable?0:1,this.subtreeFittabilityChangeEmitter=this.subtreeFittabilityChangeEmitter||new d,this}},{key:"parent",get:function(){return this.instance.parent?this.instance.parent.fittability:null}},{key:"checkSelfFittability",value:function(){var e=this.isSelfFitSupported();this.selfFittable!==e&&this.updateSelfFittable()}},{key:"isSelfFitSupported",value:function(){return!this.node.isPreventFit()}},{key:"markSubtreeFittable",value:function(){if(this.selfFittable){this.ancestorsFittable=!0;for(var e=this.instance.children,t=0;t<e.length;t++)e[t].fittability.markSubtreeFittable();this.instance.updateDrawableFittability(!0)}}},{key:"markSubtreeUnfittable",value:function(){if(this.ancestorsFittable){this.ancestorsFittable=!1;for(var e=this.instance.children,t=0;t<e.length;t++)e[t].fittability.markSubtreeUnfittable();this.instance.updateDrawableFittability(!1)}}},{key:"updateSelfFittable",value:function(){var e=this.isSelfFitSupported();this.selfFittable=e,!this.selfFittable||this.parent&&!this.parent.ancestorsFittable?this.selfFittable||this.markSubtreeUnfittable():this.markSubtreeFittable(),this.selfFittable?this.decrementSubtreeUnfittableCount():this.incrementSubtreeUnfittableCount()}},{key:"incrementSubtreeUnfittableCount",value:function(){this.subtreeUnfittableCount++,1===this.subtreeUnfittableCount&&(this.parent&&this.parent.incrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())}},{key:"decrementSubtreeUnfittableCount",value:function(){this.subtreeUnfittableCount--,0===this.subtreeUnfittableCount&&(this.parent&&this.parent.decrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())}},{key:"onInsert",value:function(e){this.ancestorsFittable||e.markSubtreeUnfittable(),e.subtreeUnfittableCount>0&&this.incrementSubtreeUnfittableCount()}},{key:"onRemove",value:function(e){this.ancestorsFittable||e.markSubtreeFittable(),e.subtreeUnfittableCount>0&&this.decrementSubtreeUnfittableCount()}},{key:"audit",value:function(){}}]),e}();Cr.register("Fittability",xg);var Pg=xg,Tg=1,Mg=function(){function e(t,n,i){_classCallCheck(this,e),this.id="group".concat(Tg++),this.initialize(t,n,i)}return _createClass(e,[{key:"initialize",value:function(e,t,n){this.block=e,this.instance=t,this.node=t.trail.lastNode(),this.parent=n,this.children=Ui(this.children),this.hasSelfDrawable=!1,this.selfDrawable=null,this.dirty=!0,this.willApplyTransforms=this.block.transformRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.willApplyFilters=this.block.filterRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.transformDirty=!0,this.hasTransform=void 0!==this.hasTransform&&this.hasTransform,this.transformDirtyListener=this.transformDirtyListener||this.markTransformDirty.bind(this),this.willApplyTransforms&&this.node.transformEmitter.addListener(this.transformDirtyListener),this.filterDirty=!0,this.visibilityDirty=!0,this.clipDirty=!0,this.filterElement=this.filterElement||null,this.hasOpacity=void 0!==this.hasOpacity&&this.hasOpacity,this.hasFilter=!1,this.clipDefinition=void 0!==this.clipDefinition?this.clipDefinition:null,this.clipPath=void 0!==this.clipPath?this.clipPath:null,this.filterChangeListener=this.filterChangeListener||this.onFilterChange.bind(this),this.visibilityDirtyListener=this.visibilityDirtyListener||this.onVisibleChange.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.onClipChange.bind(this),this.node.visibleProperty.lazyLink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.filterChangeEmitter.addListener(this.filterChangeListener),this.node.clipAreaProperty.lazyLink(this.clipDirtyListener),this.orderDirty=!0,this.orderDirtyListener=this.orderDirtyListener||this.markOrderDirty.bind(this),this.node.childrenChangedEmitter.addListener(this.orderDirtyListener),this.svgGroup||(this.svgGroup=document.createElementNS(ea,"g")),this.instance.addSVGGroup(this),this.block.markDirtyGroup(this)}},{key:"addSelfDrawable",value:function(e){this.selfDrawable=e,this.svgGroup.insertBefore(e.svgElement,this.children.length?this.children[0].svgGroup:null),this.hasSelfDrawable=!0}},{key:"removeSelfDrawable",value:function(e){this.hasSelfDrawable=!1,this.svgGroup.removeChild(e.svgElement),this.selfDrawable=null}},{key:"addChildGroup",value:function(e){this.markOrderDirty(),e.parent=this,this.children.push(e),this.svgGroup.appendChild(e.svgGroup)}},{key:"removeChildGroup",value:function(e){this.markOrderDirty(),e.parent=null,this.children.splice(_.indexOf(this.children,e),1),this.svgGroup.removeChild(e.svgGroup)}},{key:"markDirty",value:function(){this.dirty||(this.dirty=!0,this.block.markDirtyGroup(this))}},{key:"markOrderDirty",value:function(){this.orderDirty||(this.orderDirty=!0,this.markDirty())}},{key:"markTransformDirty",value:function(){this.transformDirty||(this.transformDirty=!0,this.markDirty())}},{key:"onFilterChange",value:function(){this.filterDirty||(this.filterDirty=!0,this.markDirty())}},{key:"onVisibleChange",value:function(){this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}},{key:"onClipChange",value:function(){this.clipDirty||(this.clipDirty=!0,this.markDirty())}},{key:"update",value:function(){if(this.block){var e=this.svgGroup;if(this.dirty=!1,this.transformDirty)if(this.transformDirty=!1,this.willApplyTransforms)this.node.transform.isIdentity()?this.hasTransform&&(this.hasTransform=!1,e.removeAttribute("transform")):(this.hasTransform=!0,e.setAttribute("transform",this.node.transform.getMatrix().getSVGTransform()));else this.hasTransform&&(this.hasTransform=!1,e.removeAttribute("transform"));if(this.visibilityDirty&&(this.visibilityDirty=!1,e.style.display=this.node.isVisible()?"":"none"),this.filterDirty){this.filterDirty=!1;var t=this.node.effectiveOpacity;this.willApplyFilters&&1!==t?(this.hasOpacity=!0,e.setAttribute("opacity",t)):this.hasOpacity&&(this.hasOpacity=!1,e.removeAttribute("opacity"));var n=this.willApplyFilters&&this.node._filters.length,i="filter-".concat(this.id);if(n){for(this.filterElement||(this.filterElement=document.createElementNS(ea,"filter"),this.filterElement.setAttribute("id",i));this.filterElement.firstChild;)this.filterElement.removeChild(this.filterElement.lastChild);for(var r=50,a="SourceGraphic",s=this.node._filters.length,o=0;o<s;o++){var l=this.node._filters[o],u=o===s-1?void 0:"e".concat(o);l.applySVGFilter(this.filterElement,a,u),r+=l.filterRegionPercentageIncrease,a=u}var c="-".concat(ai(r),"%"),h="".concat(ai(2*r+100),"%");this.filterElement.setAttribute("x",c),this.filterElement.setAttribute("y",c),this.filterElement.setAttribute("width",h),this.filterElement.setAttribute("height",h)}n&&(this.hasFilter||this.block.defs.appendChild(this.filterElement),e.setAttribute("filter","url(#".concat(i,")")),this.hasFilter=!0),this.hasFilter&&!n&&(e.removeAttribute("filter"),this.hasFilter=!1,this.block.defs.removeChild(this.filterElement))}if(this.clipDirty)if(this.clipDirty=!1,this.node.clipArea){if(!this.clipDefinition){var d="clip".concat(this.node.getId());this.clipDefinition=document.createElementNS(ea,"clipPath"),this.clipDefinition.setAttribute("id",d),this.clipDefinition.setAttribute("clipPathUnits","userSpaceOnUse"),this.block.defs.appendChild(this.clipDefinition),this.clipPath=document.createElementNS(ea,"path"),this.clipDefinition.appendChild(this.clipPath),e.setAttribute("clip-path","url(#".concat(d,")"))}this.clipPath.setAttribute("d",this.node.clipArea.getSVGPath())}else this.clipDefinition&&(e.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null);if(this.orderDirty){this.orderDirty=!1;for(var p=this.children.length-1,f=this.instance.children,m=f.length-1;m>=0;m--){var g=f[m].lookupSVGGroup(this.block);if(g){if(this.children[p]!==g){e.insertBefore(g.svgGroup,p+1>=this.children.length?null:this.children[p+1].svgGroup);var y=_.indexOf(this.children,g);this.children.splice(y,1),this.children.splice(p,0,g)}p--}}}}}},{key:"isReleasable",value:function(){return!this.hasSelfDrawable&&!this.children.length&&this.parent}},{key:"dispose",value:function(){this.hasFilter&&(this.svgGroup.removeAttribute("filter"),this.hasFilter=!1,this.block.defs.removeChild(this.filterElement)),this.willApplyTransforms&&this.node.transformEmitter.removeListener(this.transformDirtyListener),this.node.visibleProperty.unlink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.filterChangeEmitter.removeListener(this.filterChangeListener),this.node.clipAreaProperty.unlink(this.clipDirtyListener),this.node.childrenChangedEmitter.removeListener(this.orderDirtyListener),this.instance.active&&this.instance.removeSVGGroup(this),this.clipDefinition&&(this.svgGroup.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null),this.parent=null,this.block=null,this.instance=null,this.node=null,Ui(this.children),this.selfDrawable=null,this.freeToPool()}},{key:"toString",value:function(){return"SVGGroup:".concat(this.block.toString(),"_").concat(this.instance.toString())}}],[{key:"addDrawable",value:function(t,n){e.ensureGroupsToInstance(t,n.instance).addSelfDrawable(n)}},{key:"removeDrawable",value:function(t,n){n.instance.lookupSVGGroup(t).removeSelfDrawable(n),e.releaseGroupsToInstance(t,n.instance)}},{key:"ensureGroupsToInstance",value:function(t,n){var i=n.lookupSVGGroup(t);if(!i){var r=e.ensureGroupsToInstance(t,n.parent);i=e.createFromPool(t,n,r),r.addChildGroup(i)}return i}},{key:"releaseGroupsToInstance",value:function(t,n){var i=n.lookupSVGGroup(t);if(i.isReleasable()){var r=i.parent;r.removeChildGroup(i),e.releaseGroupsToInstance(t,r.instance),i.dispose()}}}]),e}();Cr.register("SVGGroup",Mg),Gi.mixInto(Mg);var Lg=Mg,Ig=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,t),this.display=e,this.drawableCount=0,this.used=!0,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,this.zIndex=0}},{key:"dispose",value:function(){this.display=null,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"addDrawable",value:function(e){this.drawableCount++,this.markDirtyDrawable(e)}},{key:"removeDrawable",value:function(e){this.drawableCount--,this.markDirty()}},{key:"onIntervalChange",value:function(e,t){}},{key:"updateInterval",value:function(){this.pendingFirstDrawable===this.firstDrawable&&this.pendingLastDrawable===this.lastDrawable||(this.onIntervalChange(this.pendingFirstDrawable,this.pendingLastDrawable),this.firstDrawable=this.pendingFirstDrawable,this.lastDrawable=this.pendingLastDrawable)}},{key:"notifyInterval",value:function(e,t){this.pendingFirstDrawable=e,this.pendingLastDrawable=t,this.updateInterval()}},{key:"audit",value:function(e,t,n){}}]),n}(zf);Cr.register("Block",Ig);var Rg=Ig,Dg=jn.NOTHING.copy(),Ng=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"initialize",value:function(e,t,i,r){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t),this.transformRootInstance=i,this.canBeFullDisplay=i.isDisplayRoot,this.preferredFit=r,this.fit=r,this.dirtyFit=!0,this.commonFitInstance=null,this.fitBounds=jn.NOTHING.copy(),this.oldFitBounds=jn.NOTHING.copy(),this.unfittableDrawableCount=0,this.dirtyFitListener=this.dirtyFitListener||this.markDirtyFit.bind(this),this.fittableListener=this.fittableListener||this.onFittabilityChange.bind(this),this.display.sizeProperty.lazyLink(this.dirtyFitListener),this}},{key:"setFit",value:function(e){this.canBeFullDisplay||e!==n.FULL_DISPLAY||(e=n.COMMON_ANCESTOR),this.fit!==e&&(this.fit=e,this.markDirtyFit(),this.oldFitBounds.set(jn.NOTHING),e===n.COMMON_ANCESTOR&&this.removeCommonFitInstance())}},{key:"markDirtyFit",value:function(){this.dirtyFit=!0,this.markDirty()}},{key:"updateFit",value:function(){if(this.dirtyFit||this.fit!==n.FULL_DISPLAY)if(this.dirtyFit=!1,this.fit===n.COMMON_ANCESTOR&&null===this.commonFitInstance&&this.addCommonFitInstance(this.computeCommonAncestorInstance()),this.fit===n.COMMON_ANCESTOR&&this.commonFitInstance.fittability.subtreeUnfittableCount>0&&this.canBeFullDisplay&&(this.oldFitBounds.set(jn.NOTHING),this.fit=n.FULL_DISPLAY),this.fit===n.FULL_DISPLAY)this.fitBounds.set(jn.NOTHING),this.setSizeFullDisplay();else{if(this.fit!==n.COMMON_ANCESTOR)throw new Error("unknown fit");this.fitBounds.set(this.commonFitInstance.node.getLocalBounds());for(var e=this.commonFitInstance;e!==this.transformRootInstance;)this.fitBounds.transform(e.node.getMatrix()),e=e.parent;this.fitBounds.roundOut(),this.fitBounds.dilate(4),this.transformRootInstance.isDisplayRoot&&(Dg.setMinMax(0,0,this.display.width,this.display.height),this.fitBounds.constrainBounds(Dg)),this.fitBounds.isValid()||this.fitBounds.setMinMax(0,0,0,0),this.fitBounds.equals(this.oldFitBounds)||(this.oldFitBounds.set(this.fitBounds),this.setSizeFitBounds())}}},{key:"setSizeFullDisplay",value:function(){}},{key:"setSizeFitBounds",value:function(){}},{key:"addCommonFitInstance",value:function(e){e&&(this.commonFitInstance=e,this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.addListener(this.dirtyFitListener))}},{key:"removeCommonFitInstance",value:function(){this.commonFitInstance&&(this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.removeListener(this.dirtyFitListener),this.commonFitInstance=null)}},{key:"dispose",value:function(){this.display.sizeProperty.unlink(this.dirtyFitListener),this.removeCommonFitInstance(),this.transformRootInstance=null,_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"addDrawable",value:function(e){_get(_getPrototypeOf(n.prototype),"addDrawable",this).call(this,e),e.fittableProperty.lazyLink(this.fittableListener),e.fittable||this.incrementUnfittable()}},{key:"removeDrawable",value:function(e){_get(_getPrototypeOf(n.prototype),"removeDrawable",this).call(this,e),e.fittableProperty.unlink(this.fittableListener),e.fittable||this.decrementUnfittable()}},{key:"onFittabilityChange",value:function(e){e?this.decrementUnfittable():this.incrementUnfittable()}},{key:"incrementUnfittable",value:function(){this.unfittableDrawableCount++,1===this.unfittableDrawableCount&&this.checkFitConstraints()}},{key:"decrementUnfittable",value:function(){this.unfittableDrawableCount--,0===this.unfittableDrawableCount&&this.checkFitConstraints()}},{key:"checkFitConstraints",value:function(){this.unfittableDrawableCount>0&&this.canBeFullDisplay?this.setFit(n.FULL_DISPLAY):this.setFit(this.preferredFit)}},{key:"computeCommonAncestorInstance",value:function(){for(var e=this.firstDrawable.instance,t=this.lastDrawable.instance,n=Math.min(e.trail.length,t.trail.length);e.trail.length>n;)e=e.parent;for(;t.trail.length>n;)t=t.parent;for(;e!==t;)e=e.parent,t=t.parent;return e}},{key:"onIntervalChange",value:function(e,t){_get(_getPrototypeOf(n.prototype),"onIntervalChange",this).call(this,e,t),this.fit===n.COMMON_ANCESTOR&&(this.removeCommonFitInstance(),this.markDirtyFit())}}]),n}(Rg);Cr.register("FittedBlock",Ng),Ng.FULL_DISPLAY=1,Ng.COMMON_ANCESTOR=2,Ng.fitString={1:"fullDisplay",2:"commonAncestor"};var qg=Ng,Og=new oi,Bg=new oi,Gg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;return _classCallCheck(this,n),(s=t.call(this)).initialize(e,i,r,a),s}return _createClass(n,[{key:"initialize",value:function(e,t,i,r){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t,i,qg.COMMON_ANCESTOR),this.filterRootInstance=r,this.dirtyDrawables=Ui(this.dirtyDrawables),this.domElement||(this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id="scenery-canvas".concat(this.id),this.context=this.canvas.getContext("2d"),this.context.save(),this.context.miterLimit=20,this.context.miterLimit=10,this.wrapper=new Ha(this.canvas,this.context),this.domElement=this.canvas,this.wrapperStack=[this.wrapper]),this.wrapperStackIndex=0,this.filterListenerCountMap=this.filterListenerCountMap||{},ma.prepareForTransform(this.canvas),ma.unsetTransform(this.canvas),this.canvasDrawOffset=new pn(0,0),this.currentDrawable=null,this.clipDirty=!0,this.clipCount=0,this.backingScale=t&Zr.bitmaskCanvasLowResolution?1:ma.backingScale(this.context),this.clipDirtyListener=this.markDirty.bind(this),this.opacityDirtyListener=this.markDirty.bind(this)}},{key:"setSizeFullDisplay",value:function(){var e=this.display.getSize();this.canvas.width=e.width*this.backingScale,this.canvas.height=e.height*this.backingScale,this.canvas.style.width="".concat(e.width,"px"),this.canvas.style.height="".concat(e.height,"px"),this.wrapper.resetStyles(),this.canvasDrawOffset.setXY(0,0),ma.unsetTransform(this.canvas)}},{key:"setSizeFitBounds",value:function(){var e=this.fitBounds.minX,t=this.fitBounds.minY;this.canvasDrawOffset.setXY(-e,-t),ma.setTransform("matrix(1,0,0,1,".concat(e,",").concat(t,")"),this.canvas),this.canvas.width=this.fitBounds.width*this.backingScale,this.canvas.height=this.fitBounds.height*this.backingScale,this.canvas.style.width="".concat(this.fitBounds.width,"px"),this.canvas.style.height="".concat(this.fitBounds.height,"px"),this.wrapper.resetStyles()}},{key:"update",value:function(){if(!_get(_getPrototypeOf(n.prototype),"update",this).call(this))return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();this.updateFit(),this.context.restore(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.wrapper.resetStyles(),this.currentDrawable=null;for(var e=this.firstDrawable;null!==e&&(this.renderDrawable(e),e!==this.lastDrawable);e=e.nextDrawable);return this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,0),!0}},{key:"applyClip",value:function(e){this.clipDirty=!1;var t=this.wrapperStack[this.wrapperStackIndex],n=t.context;if(n.restore(),n.save(),t.resetStyles(),this.clipCount){var i=e.instance.trail;Og.rowMajor(this.backingScale,0,this.canvasDrawOffset.x*this.backingScale,0,this.backingScale,this.canvasDrawOffset.y*this.backingScale,0,0,1),Bg.set(this.transformRootInstance.trail.getMatrix()).invert(),Bg.multiplyMatrix(Og).canvasSetTransform(n);for(var r=0;r<i.length;r++){var a=i.nodes[r];a.getMatrix().canvasAppendTransform(n),a.hasClipArea()&&(n.beginPath(),a.clipArea.writeToContext(n),n.clip())}}}},{key:"pushWrapper",value:function(){if(this.wrapperStackIndex++,this.clipDirty=!0,this.wrapperStackIndex===this.wrapperStack.length){var e=document.createElement("canvas"),t=e.getContext("2d");t.save(),this.wrapperStack.push(new Ha(e,t))}var n=this.wrapperStack[this.wrapperStackIndex],i=n.context;n.setDimensions(this.canvas.width,this.canvas.height),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"popWrapper",value:function(){this.wrapperStackIndex--,this.clipDirty=!0}},{key:"walkDown",value:function(e,t){for(var n=this.filterRootInstance.trail.length-1,i=e.length-1;i>=t;i--){var r=e.nodes[i];if(r.hasClipArea()&&(this.clipCount--,this.clipDirty=!0),i>n){if(r._filters.length){var a=this.wrapperStack[this.wrapperStackIndex],s=this.wrapperStack[this.wrapperStackIndex-1];this.popWrapper(),s.context.setTransform(1,0,0,1,0,0);for(var o=r._filters,l=zr.canvasFilter,u=0;u<o.length;u++)l=l&&o[u].isDOMCompatible();if(l){for(var c="",h=0;h<o.length;h++)c+="".concat(c?" ":"").concat(o[h].getCSSFilterString());s.context.filter=c,s.context.drawImage(a.canvas,0,0),s.context.filter="none"}else{for(var d=0;d<o.length;d++)o[d].applyCanvasFilter(a);s.context.drawImage(a.canvas,0,0)}}if(1!==r.getEffectiveOpacity()){var p=this.wrapperStack[this.wrapperStackIndex],f=this.wrapperStack[this.wrapperStackIndex-1];this.popWrapper(),f.context.setTransform(1,0,0,1,0,0),f.context.globalAlpha=r.getEffectiveOpacity(),f.context.drawImage(p.canvas,0,0),f.context.globalAlpha=1}}}}},{key:"walkUp",value:function(e,t){for(var n=this.filterRootInstance.trail.length-1,i=t;i<e.length;i++){var r=e.nodes[i];i>n&&(1!==r.getEffectiveOpacity()&&this.pushWrapper(),r._filters.length&&this.pushWrapper()),r.hasClipArea()&&(this.clipCount++,this.clipDirty=!0)}}},{key:"renderDrawable",value:function(e){if(e.visible&&0!==this.canvas.width&&0!==this.canvas.height){var t=this.currentDrawable?e.instance.getBranchIndexTo(this.currentDrawable.instance):0;this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,t),this.walkUp(e.instance.trail,t);var n=this.wrapperStack[this.wrapperStackIndex],i=n.context;this.clipDirty&&this.applyClip(e);var r=e.instance.relativeTransform.matrix;i.setTransform(this.backingScale,0,0,this.backingScale,this.canvasDrawOffset.x*this.backingScale,this.canvasDrawOffset.y*this.backingScale),e.instance!==this.transformRootInstance&&r.canvasAppendTransform(i),e.paintCanvas(n,e.instance.node,e.instance.relativeTransform.matrix),this.currentDrawable=e}}},{key:"dispose",value:function(){this.transformRootInstance=null,Ui(this.dirtyDrawables),this.canvas.width=0,this.canvas.height=0,_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"markDirtyDrawable",value:function(e){this.dirtyDrawables.push(e),this.markDirty()}},{key:"addDrawable",value:function(e){_get(_getPrototypeOf(n.prototype),"addDrawable",this).call(this,e);for(var t=e.instance;t&&t!==this.filterRootInstance;t=t.parent){var i=t.node;this.filterListenerCountMap[i.id]?this.filterListenerCountMap[i.id]++:(this.filterListenerCountMap[i.id]=1,i.filterChangeEmitter.addListener(this.opacityDirtyListener),i.clipAreaProperty.lazyLink(this.clipDirtyListener))}}},{key:"removeDrawable",value:function(e){for(var t=e.instance;t&&t!==this.filterRootInstance;t=t.parent){var i=t.node;this.filterListenerCountMap[i.id]--,0===this.filterListenerCountMap[i.id]&&(delete this.filterListenerCountMap[i.id],i.clipAreaProperty.unlink(this.clipDirtyListener),i.filterChangeEmitter.removeListener(this.opacityDirtyListener))}_get(_getPrototypeOf(n.prototype),"removeDrawable",this).call(this,e)}},{key:"onIntervalChange",value:function(e,t){_get(_getPrototypeOf(n.prototype),"onIntervalChange",this).call(this,e,t),this.markDirty()}},{key:"onPotentiallyMovedDrawable",value:function(e){e.markDirty()}},{key:"toString",value:function(){return"CanvasBlock#".concat(this.id,"-").concat(qg.fitString[this.fit])}}]),n}(qg);Cr.register("CanvasBlock",Gg),Gi.mixInto(Gg);var Hg=Gg,Fg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this)).initialize(e,i),r}return _createClass(n,[{key:"initialize",value:function(e,t){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t.renderer),this.domDrawable=t,this.domElement=t.domElement,this}},{key:"update",value:function(){return!!_get(_getPrototypeOf(n.prototype),"update",this).call(this)&&(this.domDrawable.update(),!0)}},{key:"dispose",value:function(){this.domDrawable=null,this.domElement=null,_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"markDirtyDrawable",value:function(e){this.markDirty()}},{key:"addDrawable",value:function(e){_get(_getPrototypeOf(n.prototype),"addDrawable",this).call(this,e)}},{key:"removeDrawable",value:function(e){_get(_getPrototypeOf(n.prototype),"removeDrawable",this).call(this,e)}}]),n}(Rg);Cr.register("DOMBlock",Fg),Gi.mixInto(Fg);var Yg=Fg,zg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;return _classCallCheck(this,n),(s=t.call(this)).initialize(e,i,r,a),s}return _createClass(n,[{key:"initialize",value:function(e,t,i,r){_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t,i,qg.COMMON_ANCESTOR),this.filterRootInstance=r,this.dirtyGradients=Ui(this.dirtyGradients),this.dirtyGroups=Ui(this.dirtyGroups),this.dirtyDrawables=Ui(this.dirtyDrawables),this.paintCountMap=this.paintCountMap||new Za(this.onAddPaint.bind(this),this.onRemovePaint.bind(this)),this.areReferencesReduced=!0,this.domElement||(this.svg=document.createElementNS(ea,"svg"),this.svg.style.position="absolute",this.svg.style.left="0",this.svg.style.top="0",this.svg.setAttribute("focusable",!1),this.svg.style["pointer-events"]="none",this.defs=document.createElementNS(ea,"defs"),this.svg.appendChild(this.defs),this.baseTransformGroup=document.createElementNS(ea,"g"),this.svg.appendChild(this.baseTransformGroup),this.domElement=this.svg),ma.prepareForTransform(this.svg),ma.unsetTransform(this.svg),this.baseTransformGroup.setAttribute("transform","");var a=i.trail.nodes.length>r.trail.nodes.length?r:i;return this.rootGroup=Lg.createFromPool(this,a,null),this.baseTransformGroup.appendChild(this.rootGroup.svgGroup),this}},{key:"onAddPaint",value:function(e){var t=e.createSVGPaint(this);return t.definition.setAttribute("id","".concat(e.id,"-").concat(this.id)),this.defs.appendChild(t.definition),t}},{key:"onRemovePaint",value:function(e,t){this.defs.removeChild(t.definition),t.dispose()}},{key:"incrementPaint",value:function(e){this.paintCountMap.increment(e)}},{key:"decrementPaint",value:function(e){this.paintCountMap.decrement(e)}},{key:"markDirtyGradient",value:function(e){this.dirtyGradients.push(e),this.markDirty()}},{key:"markDirtyGroup",value:function(e){this.dirtyGroups.push(e),this.markDirty(),this.areReferencesReduced&&this.display.markForReducedReferences(this),this.areReferencesReduced=!1}},{key:"markDirtyDrawable",value:function(e){this.dirtyDrawables.push(e),this.markDirty(),this.areReferencesReduced&&this.display.markForReducedReferences(this),this.areReferencesReduced=!1}},{key:"setSizeFullDisplay",value:function(){this.baseTransformGroup.removeAttribute("transform"),ma.unsetTransform(this.svg);var e=this.display.getSize();this.svg.setAttribute("width",e.width),this.svg.setAttribute("height",e.height)}},{key:"setSizeFitBounds",value:function(){var e=this.fitBounds.minX,t=this.fitBounds.minY;this.baseTransformGroup.setAttribute("transform","translate(".concat(-e,",").concat(-t,")")),ma.setTransform("matrix(1,0,0,1,".concat(e,",").concat(t,")"),this.svg),this.svg.setAttribute("width",this.fitBounds.width),this.svg.setAttribute("height",this.fitBounds.height)}},{key:"update",value:function(){if(!_get(_getPrototypeOf(n.prototype),"update",this).call(this))return!1;for(;this.dirtyGroups.length;){var e=this.dirtyGroups.pop();e.block===this&&e.update()}for(;this.dirtyGradients.length;)this.dirtyGradients.pop().update();for(;this.dirtyDrawables.length;){var t=this.dirtyDrawables.pop();t.parentDrawable===this&&t.update()}return this.areReferencesReduced=!0,this.updateFit(),!0}},{key:"reduceReferences",value:function(){if(!this.areReferencesReduced){for(var e=0,t=0;e<this.dirtyGroups.length;){var n=this.dirtyGroups[e];n.block===this&&(t!==e&&(this.dirtyGroups[t]=n),t++),e++}for(;this.dirtyGroups.length>t;)this.dirtyGroups.pop();for(e=0,t=0;e<this.dirtyDrawables.length;){var i=this.dirtyDrawables[e];i.parentDrawable===this&&(t!==e&&(this.dirtyDrawables[t]=i),t++),e++}for(;this.dirtyDrawables.length>t;)this.dirtyDrawables.pop();this.areReferencesReduced=!0}}},{key:"dispose",value:function(){for(this.svg.setAttribute("width","0"),this.svg.setAttribute("height","0"),this.filterRootInstance=null,Ui(this.dirtyGradients),Ui(this.dirtyGroups),Ui(this.dirtyDrawables),this.paintCountMap.clear(),this.baseTransformGroup.removeChild(this.rootGroup.svgGroup),this.rootGroup.dispose(),this.rootGroup=null;this.defs.childNodes.length;)this.defs.removeChild(this.defs.childNodes[0]);_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"addDrawable",value:function(e){_get(_getPrototypeOf(n.prototype),"addDrawable",this).call(this,e),Lg.addDrawable(this,e),e.updateSVGBlock(this)}},{key:"removeDrawable",value:function(e){Lg.removeDrawable(this,e),_get(_getPrototypeOf(n.prototype),"removeDrawable",this).call(this,e)}},{key:"onIntervalChange",value:function(e,t){_get(_getPrototypeOf(n.prototype),"onIntervalChange",this).call(this,e,t)}},{key:"toString",value:function(){return"SVGBlock#".concat(this.id,"-").concat(qg.fitString[this.fit])}}]),n}(qg);Cr.register("SVGBlock",zg),Gi.mixInto(zg);var Ug=zg,Wg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;return _classCallCheck(this,n),(s=t.call(this)).initialize(e,i,r,a),s}return _createClass(n,[{key:"initialize",value:function(e,t,i,r){return _get(_getPrototypeOf(n.prototype),"initialize",this).call(this,e,t,i,qg.FULL_DISPLAY),this.filterRootInstance=r,this.preserveDrawingBuffer=e._preserveDrawingBuffer,this.dirtyDrawables=Ui(this.dirtyDrawables),this.spriteSheets=this.spriteSheets||[],this.projectionMatrix=this.projectionMatrix||new oi,this.projectionMatrixArray=new Float32Array(9),this.customProcessor=this.customProcessor||new Xg,this.vertexColorPolygonsProcessor=this.vertexColorPolygonsProcessor||new Qg(this.projectionMatrixArray),this.texturedTrianglesProcessor=this.texturedTrianglesProcessor||new Kg(this.projectionMatrixArray),this.glChangedEmitter=new d,this.isContextLost=!1,this.contextLostListener=this.onContextLoss.bind(this),this.contextRestoreListener=this.onContextRestoration.bind(this),this.domElement||(this.domElement=document.createElement("div"),this.domElement.className="webgl-container",this.domElement.style.position="absolute",this.domElement.style.left="0",this.domElement.style.top="0",this.rebuildCanvas()),this.gl.clear(this.gl.COLOR_BUFFER_BIT),ma.prepareForTransform(this.canvas),ma.unsetTransform(this.canvas),this}},{key:"rebuildCanvas",value:function(){var e=document.createElement("canvas"),t=this.getContextFromCanvas(e);t&&(this.canvas&&(this.domElement.removeChild(this.canvas),this.canvas.removeEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoreListener,!1)),this.canvas=e,this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id="scenery-webgl".concat(this.id),this.canvas.addEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoreListener,!1),this.domElement.appendChild(this.canvas),this.setupContext(t))}},{key:"setupContext",value:function(e){this.isContextLost=!1,this.gl=e,this.backingScale=ma.backingScale(this.gl),this.display._allowBackingScaleAntialiasing&&0===e.getParameter(e.SAMPLES)&&(this.backingScale*=2),this.originalBackingScale=this.backingScale,ma.applyWebGLContextDefaults(this.gl),this.markDirty(),this.dirtyFit=!0,this.customProcessor.initializeContext(this.gl),this.vertexColorPolygonsProcessor.initializeContext(this.gl),this.texturedTrianglesProcessor.initializeContext(this.gl);for(var t=0;t<this.spriteSheets.length;t++)this.spriteSheets[t].initializeContext(this.gl);this.glChangedEmitter.emit()}},{key:"delayedRebuildCanvas",value:function(){var e=this;window.setTimeout((function(){e.rebuildCanvas()}))}},{key:"onContextLoss",value:function(e){this.isContextLost||(this.isContextLost=!0,e.preventDefault(),this.canvas.style.display="none",this.markDirty())}},{key:"onContextRestoration",value:function(e){if(this.isContextLost){var t=this.getContextFromCanvas(this.canvas);this.setupContext(t),this.canvas.style.display=""}}},{key:"getContextFromCanvas",value:function(e){var t={antialias:!0,preserveDrawingBuffer:this.preserveDrawingBuffer};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)}},{key:"setSizeFullDisplay",value:function(){var e=this.display.getSize();this.canvas.width=Math.ceil(e.width*this.backingScale),this.canvas.height=Math.ceil(e.height*this.backingScale),this.canvas.style.width="".concat(e.width,"px"),this.canvas.style.height="".concat(e.height,"px")}},{key:"setSizeFitBounds",value:function(){throw new Error("setSizeFitBounds unimplemented for WebGLBlock")}},{key:"update",value:function(){if(!_get(_getPrototypeOf(n.prototype),"update",this).call(this))return!1;var e=this.gl;for(this.isContextLost&&this.display._aggressiveContextRecreation&&this.delayedRebuildCanvas();this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();for(var t=this.spriteSheets.length,i=0;i<t;i++)this.spriteSheets[i].updateTexture();this.firstDrawable&&this.firstDrawable===this.lastDrawable&&this.firstDrawable.node&&null!==this.firstDrawable.node._hints.webglScale&&this.backingScale!==this.originalBackingScale*this.firstDrawable.node._hints.webglScale&&(this.backingScale=this.originalBackingScale*this.firstDrawable.node._hints.webglScale,this.dirtyFit=!0),this.updateFit(),this.projectionMatrix.rowMajor(2/this.display.width,0,-1,0,-2/this.display.height,1,0,0,1),this.projectionMatrix.copyToArray(this.projectionMatrixArray),this.preserveDrawingBuffer&&e.clear(e.COLOR_BUFFER_BIT),e.viewport(0,0,this.canvas.width,this.canvas.height);for(var r=null,a=0,s=this.firstDrawable;null!==s;s=s.nextDrawable){if(s.visible){var o=null;s.webglRenderer===Zr.webglTexturedTriangles?o=this.texturedTrianglesProcessor:s.webglRenderer===Zr.webglCustom?o=this.customProcessor:s.webglRenderer===Zr.webglVertexColorPolygons&&(o=this.vertexColorPolygonsProcessor),o!==r&&(r&&(a+=r.deactivate()),(r=o).activate()),r.processDrawable(s)}if(s===this.lastDrawable)break}return r&&(a+=r.deactivate()),0!==a||this.preserveDrawingBuffer||e.clear(e.COLOR_BUFFER_BIT),e.flush(),!0}},{key:"dispose",value:function(){Ui(this.dirtyDrawables),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"markDirtyDrawable",value:function(e){this.dirtyDrawables.push(e),this.markDirty()}},{key:"addDrawable",value:function(e){_get(_getPrototypeOf(n.prototype),"addDrawable",this).call(this,e),e.onAddToBlock(this)}},{key:"removeDrawable",value:function(e){for(var t=0;(t=this.dirtyDrawables.indexOf(e,t))>=0;)this.dirtyDrawables.splice(t,1);e.onRemoveFromBlock(this),_get(_getPrototypeOf(n.prototype),"removeDrawable",this).call(this,e)}},{key:"addSpriteSheetImage",value:function(e,t,n){for(var i=null,r=this.spriteSheets.length,a=0;a<r;a++){if(i=this.spriteSheets[a].addImage(e,t,n))break}if(!i){var s=new ys(!0);if(i=s.addImage(e,t,n),s.initializeContext(this.gl),this.spriteSheets.push(s),!i)throw new Error("Attempt to load image that is too large for sprite sheets")}return i}},{key:"removeSpriteSheetImage",value:function(e){e.spriteSheet.removeImage(e.image)}},{key:"onIntervalChange",value:function(e,t){_get(_getPrototypeOf(n.prototype),"onIntervalChange",this).call(this,e,t),this.markDirty()}},{key:"onPotentiallyMovedDrawable",value:function(e){this.markDirty()}},{key:"toString",value:function(){return"WebGLBlock#".concat(this.id,"-").concat(qg.fitString[this.fit])}}]),n}(qg);Cr.register("WebGLBlock",Wg);var jg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"activate",value:function(){}},{key:"initializeContext",value:function(e){}},{key:"processDrawable",value:function(e){}},{key:"deactivate",value:function(){}}]),e}(),Xg=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).drawable=null,e}return _createClass(n,[{key:"activate",value:function(){this.drawCount=0}},{key:"processDrawable",value:function(e){this.drawable=e,this.draw()}},{key:"deactivate",value:function(){return this.drawCount}},{key:"draw",value:function(){if(this.drawable){var e=this.drawable.draw();this.drawCount+=e,this.drawable=null}}}]),n}(jg),Qg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).projectionMatrixArray=e,i.lastArrayLength=128,i.vertexArray=new Float32Array(i.lastArrayLength),i}return _createClass(n,[{key:"initializeContext",value:function(e){this.gl=e,this.shaderProgram=new As(e,["attribute vec2 aVertex;","attribute vec4 aColor;","varying vec4 vColor;","uniform mat3 uProjectionMatrix;","void main() {","  vColor = aColor;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main() {","  gl_FragColor = vec4( vColor.rgb * vColor.a, vColor.a );","}"].join("\n"),{attributes:["aVertex","aColor"],uniforms:["uProjectionMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}},{key:"activate",value:function(){this.shaderProgram.use(),this.vertexArrayIndex=0,this.drawCount=0}},{key:"processDrawable",value:function(e){if(e.includeVertices){for(var t=e.vertexArray;t.length+this.vertexArrayIndex>this.vertexArray.length;){var n=new Float32Array(2*this.vertexArray.length);n.set(this.vertexArray),this.vertexArray=n}this.vertexArray.set(t,this.vertexArrayIndex),this.vertexArrayIndex+=t.length,this.drawCount++}}},{key:"deactivate",value:function(){return this.drawCount&&this.draw(),this.shaderProgram.unuse(),this.drawCount}},{key:"draw",value:function(){var e=this.gl;e.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));var t=Float32Array.BYTES_PER_ELEMENT,n=6*t;e.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,e.FLOAT,!1,n,0*t),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aColor,4,e.FLOAT,!1,n,2*t),e.drawArrays(e.TRIANGLES,0,this.vertexArrayIndex/6),this.vertexArrayIndex=0}}]),n}(jg),Kg=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).projectionMatrixArray=e,i.lastArrayLength=128,i.vertexArray=new Float32Array(i.lastArrayLength),i}return _createClass(n,[{key:"initializeContext",value:function(e){this.gl=e,this.shaderProgram=new As(e,["attribute vec2 aVertex;","attribute vec2 aTextureCoord;","attribute float aAlpha;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform mat3 uProjectionMatrix;","void main() {","  vTextureCoord = aTextureCoord;","  vAlpha = aAlpha;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join("\n"),["precision mediump float;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform sampler2D uTexture;","void main() {","  vec4 color = texture2D( uTexture, vTextureCoord, -0.7 );","  color.a *= vAlpha;","  gl_FragColor = color;","}"].join("\n"),{attributes:["aVertex","aTextureCoord","aAlpha"],uniforms:["uTexture","uProjectionMatrix"]}),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW)}},{key:"activate",value:function(){this.shaderProgram.use(),this.currentSpriteSheet=null,this.vertexArrayIndex=0,this.drawCount=0}},{key:"processDrawable",value:function(e){if(e.sprite){this.currentSpriteSheet&&e.sprite.spriteSheet!==this.currentSpriteSheet&&this.draw(),this.currentSpriteSheet=e.sprite.spriteSheet;for(var t=e.vertexArray;t.length+this.vertexArrayIndex>this.vertexArray.length;){var n=new Float32Array(2*this.vertexArray.length);n.set(this.vertexArray),this.vertexArray=n}this.vertexArray.set(t,this.vertexArrayIndex),this.vertexArrayIndex+=t.length}}},{key:"deactivate",value:function(){return this.currentSpriteSheet&&this.draw(),this.shaderProgram.unuse(),this.drawCount}},{key:"draw",value:function(){var e=this.gl;e.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));var t=Float32Array.BYTES_PER_ELEMENT,n=5*t;e.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,e.FLOAT,!1,n,0*t),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aTextureCoord,2,e.FLOAT,!1,n,2*t),e.vertexAttribPointer(this.shaderProgram.attributeLocations.aAlpha,1,e.FLOAT,!1,n,4*t),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.currentSpriteSheet.texture),e.uniform1i(this.shaderProgram.uniformLocations.uTexture,0),e.drawArrays(e.TRIANGLES,0,this.vertexArrayIndex/5),e.bindTexture(e.TEXTURE_2D,null),this.drawCount++,this.currentSpriteSheet=null,this.vertexArrayIndex=0}}]),n}(jg);Gi.mixInto(Wg);var Jg=Wg,Zg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"initialize",value:function(e,t,n,i,r,a,s){this.backbone=e,this.firstDrawable=t,this.lastDrawable=n,this.touchedBlocks=Ui(this.touchedBlocks)}},{key:"clean",value:function(){this.backbone=null,this.firstDrawable=null,this.lastDrawable=null}},{key:"recordBackboneBoundaries",value:function(){this.backbone.previousFirstDrawable=this.firstDrawable,this.backbone.previousLastDrawable=this.lastDrawable}},{key:"notePendingAddition",value:function(e,t){e.notePendingAddition(this.backbone.display,t,this.backbone)}},{key:"notePendingMove",value:function(e,t){e.notePendingMove(this.backbone.display,t)}},{key:"notePendingRemoval",value:function(e){e.notePendingRemoval(this.backbone.display)}},{key:"markBlockForDisposal",value:function(e){e.domElement.parentNode===this.backbone.domElement&&this.backbone.domElement.removeChild(e.domElement),e.markForDisposal(this.backbone.display)}},{key:"removeAllBlocks",value:function(){for(;this.backbone.blocks.length;){var e=this.backbone.blocks[0];this.removeBlock(e),this.markBlockForDisposal(e)}}},{key:"notifyInterval",value:function(e,t,n){e.notifyInterval(t,n),this.backbone.markDirtyDrawable(e)}},{key:"markBeforeBlock",value:function(e,t){e.pendingFirstDrawable=t,this.touchedBlocks.push(e)}},{key:"markAfterBlock",value:function(e,t){e.pendingLastDrawable=t,this.touchedBlocks.push(e)}},{key:"updateBlockIntervals",value:function(){for(;this.touchedBlocks.length;){var e=this.touchedBlocks.pop();e.used&&(e.updateInterval(),this.backbone.markDirtyDrawable(e))}}},{key:"createBlock",value:function(e,t){var n,i=this.backbone;if(Zr.isCanvas(e))n=Hg.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance);else if(Zr.isSVG(e))n=Ug.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance);else if(Zr.isDOM(e))n=Yg.createFromPool(i.display,t);else{if(!Zr.isWebGL(e))throw new Error("unsupported renderer for createBlock: ".concat(e));n=Jg.createFromPool(i.display,e,i.transformRootInstance,i.backboneInstance)}return n.setBlockBackbone(i),i.domElement.appendChild(n.domElement),i.isDisplayRoot&&n.domElement.setAttribute("aria-hidden",!0),i.markDirtyDrawable(n),n}},{key:"appendBlock",value:function(e){this.backbone.blocks.push(e)}},{key:"removeBlock",value:function(e){var t=_.indexOf(this.backbone.blocks,e);this.backbone.blocks.splice(t,1)}},{key:"useNoBlocks",value:function(){Ui(this.backbone.blocks)}},{key:"reindex",value:function(){this.backbone.reindexBlocks()}},{key:"auditStitch",value:function(){}}],[{key:"debugIntervals",value:function(e){}},{key:"debugDrawables",value:function(e,t,n,i,r){}}]),e}();Cr.register("Stitcher",Zg);var $g=Zg;function ey(e,t){return e.renderer!==t.renderer||Zr.isDOM(e.renderer)||Zr.isDOM(t.renderer)}function ty(e){return null!==e.previousDrawable&&!ey(e.previousDrawable,e)}function ny(e){return null!==e.nextDrawable&&!ey(e,e.nextDrawable)}function iy(e,t,n){return e.drawableBefore?e.drawableBefore.oldNextDrawable!==e.drawableAfter:e.drawableAfter?e.drawableAfter.oldPreviousDrawable!==e.drawableBefore:null!==t}function ry(e,t,n){var i=e.drawableBefore?e.drawableBefore.parentDrawable:null,r=e.drawableAfter?e.drawableAfter.parentDrawable:null;return(!i||!r||i!==r)&&(i?i.nextBlock!==r:r?r.previousBlock!==i:null!==t)}var ay=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"stitch",value:function(e,t,n,i,r,a,s){var o;if(this.initialize(e,t,n,i,r,a,s),this.blockOrderChanged=!1,this.reusableBlocks=Ui(this.reusableBlocks),this.blockWasAdded=!1,this.recordBackboneBoundaries(),e.blocks.length){var l=e.blocks[0];e.blocks[e.blocks.length-1];for(o=a;null!==o;o=o.nextChangeInterval){if(iy(o,i))for(var u=o.drawableBefore?o.drawableBefore.oldNextDrawable:i,c=o.drawableAfter?o.drawableAfter.oldPreviousDrawable:r,h=u;this.notePendingRemoval(h),h!==c;h=h.oldNextDrawable);if(ry(o,l))for(var d=null===o.drawableBefore?e.blocks[0]:o.drawableBefore.parentDrawable.nextBlock,p=null===o.drawableAfter?e.blocks[e.blocks.length-1]:o.drawableAfter.parentDrawable.previousBlock,f=d;this.unuseBlock(f),f!==p;f=f.nextBlock);}}if(t)for(o=a;null!==o;o=o.nextChangeInterval)this.processInterval(e,o,t,n);this.removeUnusedBlocks(),this.updateBlockIntervals(),null===t?this.useNoBlocks():this.blockOrderChanged&&(this.processBlockLinkedList(e,t.pendingParentDrawable,n.pendingParentDrawable),this.reindex()),this.clean(),Ui(this.reusableBlocks)}},{key:"processInterval",value:function(e,t,n,i){if(function(e,t,n){return e.drawableBefore?e.drawableBefore.nextDrawable!==e.drawableAfter:e.drawableAfter?e.drawableAfter.previousDrawable!==e.drawableBefore:null!==t}(t,n))for(var r=t.drawableBefore?t.drawableBefore.nextDrawable:n,a=null,s=null,o=!0;;){var l=r.nextDrawable,u=l===t.drawableAfter;if(a||(a=r),null===s&&r.parentDrawable&&!r.parentDrawable.used&&r.backbone===e&&r.parentDrawable.parentDrawable===e&&(s=r.parentDrawable),(u||ey(r,l))&&(o&&this.processEdgeCases(t,ty(a),ny(r)),this.processSubBlock(t,a,r,s,o,u),a=null,s=null,o=!1),u)break;r=l}else{if(t.drawableBefore&&t.drawableAfter){var c=!ey(t.drawableBefore,t.drawableAfter);this.processEdgeCases(t,c,c)}t.drawableBefore&&!ny(t.drawableBefore)?this.linkAfterDrawable(t.drawableBefore):t.drawableAfter&&!ty(t.drawableAfter)&&this.linkBeforeDrawable(t.drawableAfter)}}},{key:"processSubBlock",value:function(e,t,n,i,r,a){var s=ty(t),o=ny(n);s&&(i=t.previousDrawable.pendingParentDrawable),o&&(i=n.nextDrawable.pendingParentDrawable),i=this.ensureUsedBlock(i,t);for(var l=t;this.notePendingAddition(l,i),l!==n;l=l.nextDrawable);s||this.linkBeforeDrawable(t),a&&!o&&this.linkAfterDrawable(n)}},{key:"processEdgeCases",value:function(e,t,n){if(null!==e.drawableBefore&&null!==e.drawableAfter){var i,r=e.drawableBefore.pendingParentDrawable,a=e.drawableAfter.pendingParentDrawable,s=e.nextChangeInterval&&e.nextChangeInterval.drawableAfter?e.nextChangeInterval.drawableAfter.pendingParentDrawable:null;r===a&&(this.blockWasAdded=!0),t&&n?i=r:this.blockWasAdded||r===a?(i=this.createBlock(e.drawableAfter.renderer,e.drawableAfter),this.blockOrderChanged=!0):i=a,a===i?this.blockWasAdded=!0:this.changeExternals(e,i),s!==a&&(this.blockWasAdded||this.unuseBlock(a),this.blockWasAdded=!1)}}},{key:"changeExternals",value:function(e,t){var n=function(e){var t=e.drawableAfter;if(t){for(var n=t.renderer,i=e.nextChangeInterval?e.nextChangeInterval.drawableBefore.nextDrawable:null,r=t;;){var a=r.nextDrawable;if(a===i||a.renderer!==n)break;r=a}return r}return null}(e);this.notePendingMoves(t,e.drawableAfter,n),e.nextChangeInterval&&e.nextChangeInterval.drawableBefore===n||this.linkAfterDrawable(n)}},{key:"notePendingMoves",value:function(e,t,n){for(var i=t;this.notePendingMove(i,e),i!==n;i=i.nextDrawable);}},{key:"ensureUsedBlock",value:function(e,t){return e?e.used||this.useBlock(e):e=this.getBlockForRenderer(t.renderer,t),e}},{key:"getBlockForRenderer",value:function(e,t){var n;if(!Zr.isDOM(e))for(var i=this.reusableBlocks.length-1;i>=0;i--){var r=this.reusableBlocks[i];if(r.renderer===e){this.useBlockAtIndex(r,i),n=r;break}}return n||(n=this.createBlock(e,t)),this.blockOrderChanged=!0,n}},{key:"unuseBlock",value:function(e){e.used&&(e.used=!1,this.reusableBlocks.push(e))}},{key:"useBlock",value:function(e){this.useBlockAtIndex(e,_.indexOf(this.reusableBlocks,e))}},{key:"useBlockAtIndex",value:function(e,t){this.reusableBlocks.splice(t,1),e.used=!0}},{key:"removeUnusedBlocks",value:function(){for(;this.reusableBlocks.length;){var e=this.reusableBlocks.pop();this.markBlockForDisposal(e),this.blockOrderChanged=!0}}},{key:"linkBeforeDrawable",value:function(e){var t=e.previousDrawable;this.linkBlocks(t?t.pendingParentDrawable:null,e.pendingParentDrawable,t,e)}},{key:"linkAfterDrawable",value:function(e){var t=e.nextDrawable;this.linkBlocks(e.pendingParentDrawable,t?t.pendingParentDrawable:null,e,t)}},{key:"linkBlocks",value:function(e,t,n,i){e&&(e.nextBlock!==t&&(this.blockOrderChanged=!0,e.nextBlock&&(e.nextBlock.previousBlock=null),e.nextBlock=t),this.markAfterBlock(e,n)),t&&(t.previousBlock!==e&&(this.blockOrderChanged=!0,t.previousBlock&&(t.previousBlock.nextBlock=null),t.previousBlock=e),this.markBeforeBlock(t,i))}},{key:"processBlockLinkedList",value:function(e,t,n){for(;e.blocks.length;)e.blocks.pop();if(t)for(var i=t;e.blocks.push(i),i!==n;i=i.nextBlock);}}]),n}($g);Cr.register("GreedyStitcher",ay);var sy=ay,oy=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"stitch",value:function(e,t,n,i,r,a,s){this.initialize(e,t,n,i,r,a,s);for(var o=e.previousFirstDrawable;null!==o&&(this.notePendingRemoval(o),o!==e.previousLastDrawable);o=o.oldNextDrawable);this.recordBackboneBoundaries(),this.removeAllBlocks();for(var l=null,u=0,c=null,h=t;null!==h&&(l&&h.renderer===u||(l&&this.notifyInterval(l,c,h.previousDrawable),u=h.renderer,l=this.createBlock(u,h),Zr.isDOM(u)&&(u=0),this.appendBlock(l),c=h),this.notePendingAddition(h,l),h!==n);h=h.nextDrawable);l&&this.notifyInterval(l,c,n),this.reindex(),this.clean()}}]),n}($g);Cr.register("RebuildStitcher",oy);var ly=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s){var o;return _classCallCheck(this,n),(o=t.call(this)).initialize(e,i,r,a,s),o}return _createClass(n,[{key:"initialize",value:function(e,t,i,r,a){if(_get(_getPrototypeOf(n.prototype),"initialize",this).call(this,r),this.display=e,this.backboneInstance=t,this.transformRootInstance=i,this.filterRootAncestorInstance=t.parent?t.parent.getFilterRootInstance():t,this.transformRootAncestorInstance=t.parent?t.parent.getTransformRootInstance():t,this.willApplyTransform=this.transformRootAncestorInstance!==this.transformRootInstance,this.willApplyFilters=this.filterRootAncestorInstance!==this.backboneInstance,this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.willApplyTransform&&(this.backboneInstance.relativeTransform.addListener(this.transformListener),this.backboneInstance.relativeTransform.addPrecompute()),this.backboneVisibilityListener=this.backboneVisibilityListener||this.updateBackboneVisibility.bind(this),this.backboneInstance.relativeVisibleEmitter.addListener(this.backboneVisibilityListener),this.updateBackboneVisibility(),this.visibilityDirty=!0,this.renderer=r,this.domElement=a?e.domElement:n.createDivBackbone(),this.isDisplayRoot=a,this.dirtyDrawables=Ui(this.dirtyDrawables),ma.prepareForTransform(this.domElement),this.watchedFilterNodes=Ui(this.watchedFilterNodes),this.filterDirty=!0,this.clipDirty=!0,this.filterDirtyListener=this.filterDirtyListener||this.onFilterDirty.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.onClipDirty.bind(this),this.willApplyFilters)for(var s=this.backboneInstance;s!==this.filterRootAncestorInstance;s=s.parent){var o=s.node;this.watchedFilterNodes.push(o),o.filterChangeEmitter.addListener(this.filterDirtyListener),o.clipAreaProperty.lazyLink(this.clipDirtyListener)}this.lastZIndex=0,this.blocks=this.blocks||[],this.previousFirstDrawable=null,this.previousLastDrawable=null,this.removedDrawables=!1,this.stitcher=this.stitcher||new sy}},{key:"dispose",value:function(){for(;this.watchedFilterNodes.length;){var e=this.watchedFilterNodes.pop();e.filterChangeEmitter.removeListener(this.filterDirtyListener),e.clipAreaProperty.unlink(this.clipDirtyListener)}if(this.backboneInstance.relativeVisibleEmitter.removeListener(this.backboneVisibilityListener),!this.removedDrawables)for(var t=this.previousFirstDrawable;null!==t&&(t.parentDrawable.removeDrawable(t),t!==this.previousLastDrawable);t=t.nextDrawable);this.markBlocksForDisposal(),this.willApplyTransform&&(this.backboneInstance.relativeTransform.removeListener(this.transformListener),this.backboneInstance.relativeTransform.removePrecompute()),this.backboneInstance=null,this.transformRootInstance=null,this.filterRootAncestorInstance=null,this.transformRootAncestorInstance=null,Ui(this.dirtyDrawables),Ui(this.watchedFilterNodes),this.previousFirstDrawable=null,this.previousLastDrawable=null,_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"markBlocksForDisposal",value:function(){for(;this.blocks.length;){var e=this.blocks.pop();e.domElement.parentNode===this.domElement&&this.domElement.removeChild(e.domElement),e.markForDisposal(this.display)}}},{key:"updateBackboneVisibility",value:function(){this.visible=this.backboneInstance.relativeVisible,this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())}},{key:"markForDisposal",value:function(e){for(var t=this.previousFirstDrawable;null!==t&&(t.notePendingRemoval(this.display),t!==this.previousLastDrawable);t=t.oldNextDrawable);this.removedDrawables=!0,_get(_getPrototypeOf(n.prototype),"markForDisposal",this).call(this,e)}},{key:"markDirtyDrawable",value:function(e){this.dirtyDrawables.push(e),this.markDirty()}},{key:"markTransformDirty",value:function(){ma.applyPreparedTransform(this.backboneInstance.relativeTransform.matrix,this.domElement)}},{key:"onFilterDirty",value:function(){this.filterDirty||(this.filterDirty=!0,this.markDirty())}},{key:"onClipDirty",value:function(){this.clipDirty||(this.clipDirty=!0,this.markDirty())}},{key:"update",value:function(){if(!_get(_getPrototypeOf(n.prototype),"update",this).call(this))return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();if(this.filterDirty){this.filterDirty=!1;for(var e="",t=this.watchedFilterNodes.length,i=0;i<t;i++){for(var r=this.watchedFilterNodes[i],a=r.getEffectiveOpacity(),s=0;s<r._filters.length;s++)e+="".concat(e?" ":"").concat(r._filters[s].getCSSFilterString());1!==a&&(e+="".concat(e?" ":"","opacity(").concat(ai(a),")"))}this.domElement.style.filter=e}return this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.display=this.visible?"":"none"),this.clipDirty&&(this.clipDirty=!1),!0}},{key:"getFilterVisibility",value:function(){for(var e=this.watchedFilterNodes.length,t=0;t<e;t++)if(!this.watchedFilterNodes[t].isVisible())return!1;return!0}},{key:"getFilterClip",value:function(){return""}},{key:"reindexBlocks",value:function(){for(var e=0,t=0;t<this.blocks.length;t++){var n=this.blocks[t];if(n.zIndex<=e){var i=t+1<this.blocks.length&&this.blocks[t+1].zIndex-1>e?Math.ceil((e+this.blocks[t+1].zIndex)/2):e+20;n.domElement.style.zIndex=n.zIndex=i}e=n.zIndex}this.lastZIndex=e+1}},{key:"stitch",value:function(e,t,n,i){if(null!==n&&null!==i){0;for(var r=null,a=n,s=!1;a;)s=a.constrict()||s,a.isEmpty()?r&&(r.nextChangeInterval=a.nextChangeInterval):(r||(n=a),r=a),a=a.nextChangeInterval;if(r)(i=r).nextChangeInterval=null,this.stitcher.stitch(this,e,t,this.previousFirstDrawable,this.previousLastDrawable,n,i)}}},{key:"audit",value:function(e,t,n){}}],[{key:"createDivBackbone",value:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0",e}},{key:"repurposeBackboneContainer",value:function(e){return"relative"===e.style.position&&"absolute"===e.style.position||(e.style.position="relative"),e.style.left="0",e.style.top="0",e}}]),n}(zf);Cr.register("BackboneDrawable",ly),Gi.mixInto(ly);var uy=ly,cy=function(){function e(t,n,i){_classCallCheck(this,e),this.display=t,this.rootNode=n;var r=document.createElementNS(ea,"svg");r.style.position="absolute",r.setAttribute("class",i),r.style.top="0",r.style.left="0",r.style["pointer-events"]="none",this.svg=r,t.sizeProperty.link((function(e){var t,n;t=e.width,n=e.height,r.setAttribute("width",""+t),r.setAttribute("height",""+n),r.style.clip="rect(0px,".concat(t,"px,").concat(n,"px,0px)")})),this.domElement=r}return _createClass(e,[{key:"addShape",value:function(e,t,n){var i=document.createElementNS(ea,"path"),r=e.getSVGPath();r||(r="M0 0"),r?i.setAttribute("d",r):i.hasAttribute("d")&&i.removeAttribute("d"),i.setAttribute("style","fill: none; stroke: ".concat(t,"; stroke-dasharray: 5, 3; stroke-dashoffset: ").concat(n?5:0,"; stroke-width: 3;")),this.svg.appendChild(i)}},{key:"update",value:function(){for(;this.svg.childNodes.length;)this.svg.removeChild(this.svg.childNodes[this.svg.childNodes.length-1]);this.addShapes()}},{key:"dispose",value:function(){}}]),e}();Cr.register("ShapeBasedOverlay",cy);var hy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,e,i,"canvasNodeBoundsOverlay")}return _createClass(n,[{key:"addShapes",value:function(){var e=this;new bl(this.rootNode).eachTrailUnder((function(t){var n=t.lastNode();if(!n.isVisible())return!0;if(n instanceof Zl&&t.isVisible()){var i=t.getTransform();e.addShape(i.transformShape(Ni.bounds(n.selfBounds)),"rgba(0,255,0,0.8)",!0)}return!1}))}}]),n}(cy);Cr.register("CanvasNodeBoundsOverlay",hy);var dy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,e,i,"canvasNodeBoundsOverlay")}return _createClass(n,[{key:"addShapes",value:function(){var e=this;function t(t,i){t.willApplyTransform&&(i=i.timesMatrix(t.backboneInstance.relativeTransform.matrix)),t.blocks.forEach((function(t){!function(t,i){t instanceof qg&&!t.fitBounds.isEmpty()&&e.addShape(Ni.bounds(t.fitBounds).transformed(i),"rgba(255,0,0,0.8)",!0);if(t.firstDrawable&&t.lastDrawable){for(var r=t.firstDrawable;r!==t.lastDrawable;r=r.nextDrawable)n(r,i);n(t.lastDrawable,i)}}(t,i)}))}function n(e,n){e instanceof uy&&t(e,n)}t(this.display.rootBackbone,oi.IDENTITY)}}]),n}(cy);Cr.register("FittedBlockBoundsOverlay",dy);var py=eh.OUTER_FOCUS_COLOR,fy=eh.INNER_FOCUS_COLOR,my=eh.INNER_LIGHT_GROUP_FOCUS_COLOR,gy=eh.OUTER_LIGHT_GROUP_FOCUS_COLOR,yy=function(){function e(t,n,i){_classCallCheck(this,e),_defineProperty(this,"trail",null),_defineProperty(this,"node",null),_defineProperty(this,"activeHighlight",null),_defineProperty(this,"mode",null),_defineProperty(this,"groupMode",null),_defineProperty(this,"groupHighlightNode",null),_defineProperty(this,"transformTracker",null),_defineProperty(this,"groupTransformTracker",null),_defineProperty(this,"nodeModeHighlight",null),_defineProperty(this,"nodeModeHighlightLayered",!1),_defineProperty(this,"transformDirty",!0),_defineProperty(this,"highlightNode",new jo),_defineProperty(this,"readingBlockHighlightNode",new jo),_defineProperty(this,"addedReadingBlockHighlight",null),_defineProperty(this,"activeReadingBlockNode",null),_defineProperty(this,"readingBlockTrail",null),_defineProperty(this,"readingBlockTransformDirty",!0),_defineProperty(this,"readingBlockTransformTracker",null);var r=S()({pdomFocusHighlightsVisibleProperty:new pt(!0),interactiveHighlightsVisibleProperty:new pt(!1),readingBlockHighlightsVisibleProperty:new pt(!1)},i);this.display=t,this.focusRootNode=n,this.focusRootNode.addChild(this.highlightNode),this.focusRootNode.addChild(this.readingBlockHighlightNode),this.pdomFocusHighlightsVisibleProperty=r.pdomFocusHighlightsVisibleProperty,this.interactiveHighlightsVisibleProperty=r.interactiveHighlightsVisibleProperty,this.readingBlockHighlightsVisibleProperty=r.readingBlockHighlightsVisibleProperty,this.focusDisplay=new Cy(this.focusRootNode,{allowWebGL:t.isWebGLAllowed(),allowCSSHacks:!1,accessibility:!1,interactive:!1}),this.domElement=this.focusDisplay.domElement,this.domElement.style.pointerEvents="none",this.shapeFocusHighlightPath=new eh(null),this.boundsFocusHighlightPath=new nh(null,{useLocalBounds:!0}),this.highlightNode.addChild(this.shapeFocusHighlightPath),this.highlightNode.addChild(this.boundsFocusHighlightPath),this.groupFocusHighlightPath=new nh(null,{useLocalBounds:!0,useGroupDilation:!0,outerLineWidth:eh.GROUP_OUTER_LINE_WIDTH,innerLineWidth:eh.GROUP_INNER_LINE_WIDTH,innerStroke:eh.OUTER_FOCUS_COLOR}),this.groupFocusHighlightParent=new jo({children:[this.groupFocusHighlightPath]}),this.focusRootNode.addChild(this.groupFocusHighlightParent),this.readingBlockHighlightPath=new Ah(null),this.readingBlockHighlightNode.addChild(this.readingBlockHighlightPath),this.boundsListener=this.onBoundsChange.bind(this),this.transformListener=this.onTransformChange.bind(this),this.domFocusListener=this.onFocusChange.bind(this),this.readingBlockTransformListener=this.onReadingBlockTransformChange.bind(this),this.focusHighlightListener=this.onFocusHighlightChange.bind(this),this.interactiveHighlightListener=this.onInteractiveHighlightChange.bind(this),this.focusHighlightsVisibleListener=this.onFocusHighlightsVisibleChange.bind(this),this.voicingHighlightsVisibleListener=this.onVoicingHighlightsVisibleChange.bind(this),this.pointerFocusListener=this.onPointerFocusChange.bind(this),this.lockedPointerFocusListener=this.onLockedPointerFocusChange.bind(this),this.readingBlockFocusListener=this.onReadingBlockFocusChange.bind(this),this.readingBlockHighlightChangeListener=this.onReadingBlockHighlightChange.bind(this),Wc.pdomFocusProperty.link(this.domFocusListener),t.focusManager.pointerFocusProperty.link(this.pointerFocusListener),t.focusManager.readingBlockFocusProperty.link(this.readingBlockFocusListener),t.focusManager.lockedPointerFocusProperty.link(this.lockedPointerFocusListener),this.pdomFocusHighlightsVisibleProperty.link(this.focusHighlightsVisibleListener),this.interactiveHighlightsVisibleProperty.link(this.voicingHighlightsVisibleListener)}return _createClass(e,[{key:"dispose",value:function(){this.hasHighlight()&&this.deactivateHighlight(),Wc.pdomFocusProperty.unlink(this.domFocusListener),this.pdomFocusHighlightsVisibleProperty.unlink(this.focusHighlightsVisibleListener),this.interactiveHighlightsVisibleProperty.unlink(this.voicingHighlightsVisibleListener),this.display.focusManager.pointerFocusProperty.unlink(this.pointerFocusListener),this.display.focusManager.readingBlockFocusProperty.unlink(this.readingBlockFocusListener),this.focusDisplay.dispose()}},{key:"hasHighlight",value:function(){return!!this.trail}},{key:"hasReadingBlockHighlight",value:function(){return!!this.readingBlockTrail}},{key:"activateHighlight",value:function(e,t,n,i,r){this.trail=e,this.node=t;var a=n;this.activeHighlight=a;var s=e;if("invisible"===a)this.mode="invisible";else if(a instanceof Ni)this.mode="shape",this.shapeFocusHighlightPath.visible=!0,this.shapeFocusHighlightPath.setShape(a);else if(a instanceof jo){if(this.mode="node",a instanceof eh)a.transformSourceNode&&(s=a.getUniqueHighlightTrail(this.trail));this.nodeModeHighlight=a,i?(this.nodeModeHighlightLayered=!0,this.nodeModeHighlight.visible=r.get()):(this.nodeModeHighlight.visible=!0,this.highlightNode.addChild(this.nodeModeHighlight))}else this.mode="bounds",this.boundsFocusHighlightPath.setShapeFromNode(this.node),this.boundsFocusHighlightPath.visible=!0,this.node.localBoundsProperty.lazyLink(this.boundsListener),this.onBoundsChange();this.transformTracker=new Mu(s,{isStatic:!0}),this.transformTracker.addListener(this.transformListener),this.activateGroupHighlights(),this.updateHighlightColors(),this.transformDirty=!0}},{key:"activateFocusHighlight",value:function(e,t){this.activateHighlight(e,t,t.focusHighlight,t.focusHighlightLayerable,this.pdomFocusHighlightsVisibleProperty),t.focusHighlightChangedEmitter.addListener(this.focusHighlightListener)}},{key:"activateInteractiveHighlight",value:function(e,t){this.activateHighlight(e,t,t.interactiveHighlight||t.focusHighlight,t.interactiveHighlightLayerable,this.interactiveHighlightsVisibleProperty),t.interactiveHighlightChangedEmitter.addListener(this.interactiveHighlightListener),t.focusHighlightChangedEmitter.addListener(this.interactiveHighlightListener)}},{key:"activateReadingBlockHighlight",value:function(e){this.readingBlockTrail=e;var t=e.lastNode();this.activeReadingBlockNode=t;var n=this.activeReadingBlockNode.readingBlockActiveHighlight;this.addedReadingBlockHighlight=n,"invisible"===n||(n instanceof Ni?(this.readingBlockHighlightPath.setShape(n),this.readingBlockHighlightPath.visible=!0):n instanceof jo?this.readingBlockHighlightNode.addChild(n):(this.readingBlockHighlightPath.setShapeFromNode(this.activeReadingBlockNode),this.readingBlockHighlightPath.visible=!0)),this.readingBlockTransformTracker=new Mu(this.readingBlockTrail,{isStatic:!0}),this.readingBlockTransformTracker.addListener(this.readingBlockTransformListener),this.activeReadingBlockNode.readingBlockActiveHighlightChangedEmitter.addListener(this.readingBlockHighlightChangeListener),this.readingBlockTransformDirty=!0}},{key:"deactivateReadingBlockHighlight",value:function(){this.readingBlockHighlightPath.visible=!1,this.addedReadingBlockHighlight instanceof jo&&this.readingBlockHighlightNode.removeChild(this.addedReadingBlockHighlight);var e=this.readingBlockTransformTracker;e.removeListener(this.readingBlockTransformListener),e.dispose(),this.readingBlockTransformTracker=null,this.activeReadingBlockNode.readingBlockActiveHighlightChangedEmitter.removeListener(this.readingBlockHighlightChangeListener),this.activeReadingBlockNode=null,this.readingBlockTrail=null,this.addedReadingBlockHighlight=null}},{key:"deactivateHighlight",value:function(){var e=this.node;if("shape"===this.mode)this.shapeFocusHighlightPath.visible=!1;else if("node"===this.mode){var t=this.nodeModeHighlight;this.nodeModeHighlightLayered?this.nodeModeHighlightLayered=!1:this.highlightNode.removeChild(t),t.visible=!1,this.nodeModeHighlight=null}else"bounds"===this.mode&&(this.boundsFocusHighlightPath.visible=!1,e.localBoundsProperty.unlink(this.boundsListener));e.focusHighlightChangedEmitter.hasListener(this.focusHighlightListener)&&e.focusHighlightChangedEmitter.removeListener(this.focusHighlightListener);var n=e;n.isInteractiveHighlighting&&(n.interactiveHighlightChangedEmitter.hasListener(this.interactiveHighlightListener)&&n.interactiveHighlightChangedEmitter.removeListener(this.interactiveHighlightListener),n.focusHighlightChangedEmitter.hasListener(this.interactiveHighlightListener)&&n.focusHighlightChangedEmitter.removeListener(this.interactiveHighlightListener)),this.deactivateGroupHighlights(),this.trail=null,this.node=null,this.mode=null,this.activeHighlight=null,this.transformTracker.removeListener(this.transformListener),this.transformTracker.dispose(),this.transformTracker=null}},{key:"activateGroupHighlights",value:function(){for(var e=this.trail,t=0;t<e.length;t++){var n=e.nodes[t],i=n.groupFocusHighlight;if(i){var r=e.upToNode(n);this.groupTransformTracker=new Mu(r),this.groupTransformTracker.addListener(this.transformListener),"boolean"==typeof i?(this.groupFocusHighlightPath.setShapeFromNode(n),this.groupFocusHighlightPath.visible=!0,this.groupHighlightNode=this.groupFocusHighlightPath,this.groupMode="bounds"):i instanceof jo&&(this.groupHighlightNode=i,this.groupFocusHighlightParent.addChild(i),this.groupMode="node");break}}}},{key:"updateHighlightColors",value:function(){"shape"===this.mode?(this.shapeFocusHighlightPath.innerHighlightColor!==e.getInnerHighlightColor()&&this.shapeFocusHighlightPath.setInnerHighlightColor(e.getInnerHighlightColor()),this.shapeFocusHighlightPath.outerHighlightColor!==e.getOuterHighlightColor()&&this.shapeFocusHighlightPath.setOuterHighlightColor(e.getOuterHighlightColor())):"bounds"===this.mode&&(this.boundsFocusHighlightPath.innerHighlightColor!==e.getInnerHighlightColor()&&this.boundsFocusHighlightPath.setInnerHighlightColor(e.getInnerHighlightColor()),this.boundsFocusHighlightPath.outerHighlightColor!==e.getOuterHighlightColor()&&this.boundsFocusHighlightPath.setOuterHighlightColor(e.getOuterHighlightColor())),this.groupMode&&(this.groupFocusHighlightPath.innerHighlightColor!==e.getInnerGroupHighlightColor()&&this.groupFocusHighlightPath.setInnerHighlightColor(e.getInnerGroupHighlightColor()),this.groupFocusHighlightPath.outerHighlightColor!==e.getOuterGroupHighlightColor()&&this.groupFocusHighlightPath.setOuterHighlightColor(e.getOuterGroupHighlightColor()))}},{key:"deactivateGroupHighlights",value:function(){this.groupMode&&("bounds"===this.groupMode?this.groupFocusHighlightPath.visible=!1:"node"===this.groupMode&&this.groupFocusHighlightParent.removeChild(this.groupHighlightNode),this.groupMode=null,this.groupHighlightNode=null,this.groupTransformTracker.removeListener(this.transformListener),this.groupTransformTracker.dispose(),this.groupTransformTracker=null)}},{key:"afterTransform",value:function(){"shape"===this.mode?this.shapeFocusHighlightPath.updateLineWidth():"bounds"===this.mode?this.boundsFocusHighlightPath.updateLineWidth():"node"===this.mode&&this.activeHighlight instanceof eh&&this.activeHighlight.updateLineWidth&&this.activeHighlight.updateLineWidth(this.node)}},{key:"onTransformChange",value:function(){this.transformDirty=!0}},{key:"onReadingBlockTransformChange",value:function(){this.readingBlockTransformDirty=!0}},{key:"onBoundsChange",value:function(){this.boundsFocusHighlightPath.setShapeFromNode(this.node)}},{key:"onFocusChange",value:function(e){var t=e&&e.display===this.display?e.trail:null;if(this.hasHighlight()&&this.deactivateHighlight(),t&&this.pdomFocusHighlightsVisibleProperty.value){var n=t.lastNode();this.activateFocusHighlight(t,n)}else this.display.focusManager.pointerFocusProperty.value&&this.interactiveHighlightsVisibleProperty.value&&this.updateInteractiveHighlight(this.display.focusManager.pointerFocusProperty.value)}},{key:"onPointerFocusChange",value:function(e){this.display.focusManager.lockedPointerFocusProperty.value||this.display.focusManager.pdomFocusHighlightsVisibleProperty.value||this.updateInteractiveHighlight(e)}},{key:"updateInteractiveHighlight",value:function(e){var t=e&&e.display===this.display?e.trail:null;this.hasHighlight()&&this.deactivateHighlight();var n=!1;if(t&&!this.display.focusManager.pdomFocusHighlightsVisibleProperty.value){var i=t.lastNode();(i.isReadingBlock&&this.readingBlockHighlightsVisibleProperty.value||!i.isReadingBlock&&this.interactiveHighlightsVisibleProperty.value)&&(this.activateInteractiveHighlight(t,i),n=!0)}!n&&Wc.pdomFocus&&this.pdomFocusHighlightsVisibleProperty.value&&this.onFocusChange(Wc.pdomFocus)}},{key:"onLockedPointerFocusChange",value:function(e){this.updateInteractiveHighlight(e||this.display.focusManager.pointerFocusProperty.value)}},{key:"onReadingBlockFocusChange",value:function(e){this.hasReadingBlockHighlight()&&this.deactivateReadingBlockHighlight();var t=e&&e.display===this.display?e.trail:null;t&&this.activateReadingBlockHighlight(t)}},{key:"onFocusHighlightChange",value:function(){this.onFocusChange(Wc.pdomFocus)}},{key:"onInteractiveHighlightChange",value:function(){this.updateInteractiveHighlight(this.display.focusManager.lockedPointerFocusProperty.value)}},{key:"onReadingBlockHighlightChange",value:function(){this.onReadingBlockFocusChange(this.display.focusManager.readingBlockFocusProperty.value)}},{key:"onFocusHighlightsVisibleChange",value:function(){this.onFocusChange(Wc.pdomFocus)}},{key:"onVoicingHighlightsVisibleChange",value:function(){this.onPointerFocusChange(this.display.focusManager.pointerFocusProperty.value)}},{key:"update",value:function(){this.hasHighlight()&&this.transformDirty&&(this.transformDirty=!1,this.highlightNode.setMatrix(this.transformTracker.matrix),this.groupHighlightNode&&this.groupHighlightNode.setMatrix(this.groupTransformTracker.matrix),this.afterTransform()),this.hasReadingBlockHighlight()&&this.readingBlockTransformDirty&&(this.readingBlockTransformDirty=!1,this.readingBlockHighlightNode.setMatrix(this.readingBlockTransformTracker.matrix)),this.display.size.equals(this.focusDisplay.size)||this.focusDisplay.setWidthHeight(this.display.width,this.display.height),this.focusDisplay.updateDisplay()}}],[{key:"setInnerHighlightColor",value:function(e){fy=e}},{key:"getInnerHighlightColor",value:function(){return fy}},{key:"setOuterHilightColor",value:function(e){py=e}},{key:"getOuterHighlightColor",value:function(){return py}},{key:"setInnerGroupHighlightColor",value:function(e){my=e}},{key:"getInnerGroupHighlightColor",value:function(){return my}},{key:"setOuterGroupHighlightColor",value:function(e){gy=e}},{key:"getOuterGroupHighlightColor",value:function(){return gy}}]),e}();Cr.register("HighlightOverlay",yy);var vy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,e,i,"hitAreaOverlay")}return _createClass(n,[{key:"addShapes",value:function(){var e=this;new bl(this.rootNode).eachTrailUnder((function(t){var i=t.lastNode();if(!i.isVisible()||!1===i.pickable)return!0;if(i.inputListeners.length&&t.isVisible()){var r=n.getLocalMouseShape(i),a=n.getLocalTouchShape(i),s=t.getMatrix();r.bounds.isEmpty()||e.addShape(r.transformed(s),"rgba(0,0,255,0.8)",!0),a.bounds.isEmpty()||e.addShape(a.transformed(s),"rgba(255,0,0,0.8)",!1)}return!1}))}}],[{key:"getLocalMouseShape",value:function(e){var t=Ni.union([e.mouseArea?e.mouseArea instanceof Ni?e.mouseArea:Ni.bounds(e.mouseArea):e.getSelfShape()].concat(_toConsumableArray(e.children.filter((function(t){return e.visible&&!1!==e.pickable})).map((function(e){return n.getLocalMouseShape(e).transformed(e.matrix)})))));return e.hasClipArea()&&(t=t.shapeIntersection(e.clipArea)),t}},{key:"getLocalTouchShape",value:function(e){var t=Ni.union([e.touchArea?e.touchArea instanceof Ni?e.touchArea:Ni.bounds(e.touchArea):e.getSelfShape()].concat(_toConsumableArray(e.children.filter((function(t){return e.visible&&!1!==e.pickable})).map((function(e){return n.getLocalTouchShape(e).transformed(e.matrix)})))));return e.hasClipArea()&&(t=t.shapeIntersection(e.clipArea)),t}}]),n}(cy);Cr.register("HitAreaOverlay",vy);var Ay=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,e,i,"mouseTouchAreaOverlay")}return _createClass(n,[{key:"addShapes",value:function(){var e=this;new bl(this.rootNode).eachTrailUnder((function(t){var n=t.lastNode();if(!n.isVisible())return!0;if((n.mouseArea||n.touchArea)&&t.isVisible()){var i=t.getTransform();n.mouseArea&&e.addShape(i.transformShape(n.mouseArea instanceof jn?Ni.bounds(n.mouseArea):n.mouseArea),"rgba(0,0,255,0.8)",!0),n.touchArea&&e.addShape(i.transformShape(n.touchArea instanceof jn?Ni.bounds(n.touchArea):n.touchArea),"rgba(255,0,0,0.8)",!1)}return!1}))}}]),n}(cy);Cr.register("PointerAreaOverlay",Ay);var by=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.display=t,this.rootNode=n,this.pointerSVGContainer=document.createElement("div"),this.pointerSVGContainer.style.position="absolute",this.pointerSVGContainer.style.top="0",this.pointerSVGContainer.style.left="0",this.pointerSVGContainer.style["pointer-events"]="none";t.sizeProperty.lazyLink((function(e){i.pointerSVGContainer.setAttribute("width",""+e.width),i.pointerSVGContainer.setAttribute("height",""+e.height),i.pointerSVGContainer.style.clip="rect(0px,".concat(e.width,"px,").concat(e.height,"px,0px)")}));var r=oi.IDENTITY.copy();this.pointerAdded=function(e){var t=document.createElementNS(ea,"svg");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style["pointer-events"]="none",ma.prepareForTransform(t),t.setAttribute("width","21"),t.setAttribute("height","21");var n=document.createElementNS(ea,"circle");n.setAttribute("cx","10.5"),n.setAttribute("cy","10.5"),n.setAttribute("r","10"),n.setAttribute("style","fill:black;"),n.setAttribute("style","stroke:white;"),n.setAttribute("opacity","0.4");var a=function(e){return ma.applyPreparedTransform(r.setToTranslation(e.x-10.5,e.y-10.5),t)},s=function(){e.isTouchLike()&&(i.pointerSVGContainer.removeChild(t),e.removeInputListener(o))},o={move:function(){e.point&&a(e.point)},up:s,cancel:s,focus:function(){e instanceof $h&&e.point&&(a(e.point),i.pointerSVGContainer.appendChild(t))},blur:function(){i.pointerSVGContainer.contains(t)&&i.pointerSVGContainer.removeChild(t)}};e.addInputListener(o),o.move(),t.appendChild(n),i.pointerSVGContainer.appendChild(t)},t._input.pointerAddedEmitter.addListener(this.pointerAdded),t._input&&t._input.mouse&&this.pointerAdded(t._input.mouse),this.domElement=this.pointerSVGContainer}return _createClass(e,[{key:"dispose",value:function(){this.display._input.pointerAddedEmitter.removeListener(this.pointerAdded)}},{key:"update",value:function(){}}]),e}();Cr.register("PointerOverlay",by);var Sy=1,Ey=Zr.createOrderBitmask(Zr.bitmaskSVG,Zr.bitmaskCanvas,Zr.bitmaskDOM,Zr.bitmaskWebGL),ky=function(){function e(t,n,i,r){_classCallCheck(this,e),this.active=!1,this.initialize(t,n,i,r)}return _createClass(e,[{key:"initialize",value:function(e,t,n,i){return t.setImmutable(),this.id=this.id||Sy++,this.isWebGLSupported=e.isWebGLAllowed()&&ma.isWebGLSupported,this.relativeTransform=this.relativeTransform||new wg(this),this.fittability=this.fittability||new Pg(this),this.visible=!0,this.relativeVisible=!0,this.selfVisible=!0,this.visibilityDirty=!0,this.childVisibilityDirty=!0,this.voicingVisible=!0,this.branchIndexMap=this.branchIndexMap||{},this.branchIndexReferences=Ui(this.branchIndexReferences),this.addRemoveCounter=0,this.stitchChangeFrame=e._frameId,this.stitchChangeBefore=0,this.stitchChangeAfter=0,this.stitchChangeOnChildren=0,this.stitchChangeIncluded=!1,this.childInsertedListener=this.childInsertedListener||this.onChildInserted.bind(this),this.childRemovedListener=this.childRemovedListener||this.onChildRemoved.bind(this),this.childrenReorderedListener=this.childrenReorderedListener||this.onChildrenReordered.bind(this),this.visibilityListener=this.visibilityListener||this.onVisibilityChange.bind(this),this.markRenderStateDirtyListener=this.markRenderStateDirtyListener||this.markRenderStateDirty.bind(this),this.visibleEmitter=new d,this.relativeVisibleEmitter=new d,this.selfVisibleEmitter=new d,this.canVoiceEmitter=new d,this.cleanInstance(e,t),this.node.addInstance(this),this.externalReferenceCount=0,this.stateless=!0,this.isDisplayRoot=n,this.isSharedCanvasCacheRoot=i,this.preferredRenderers=0,this.isUnderCanvasCache=i,this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCachePlaceholder=!1,this.isSharedCanvasCacheSelf=i,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0,this.renderStateDirtyFrame=e._frameId,this.skipPruningFrame=e._frameId,this.active=!0,this}},{key:"cleanInstance",value:function(e,t){this.display=e,this.trail=t,this.node=t?t.lastNode():null,this.parent=null,this.oldParent=null,this.children=Ui(this.children),this.sharedCacheInstance=null,this.relativeTransform.initialize(e,t),this.fittability.initialize(e,t),this.instanceRemovalCheckList=Ui(this.instanceRemovalCheckList),this.selfDrawable=null,this.groupDrawable=null,this.sharedCacheDrawable=null,this.firstDrawable=null,this.lastDrawable=null,this.firstInnerDrawable=null,this.lastInnerDrawable=null,this.svgGroups=Ui(this.svgGroups),this.cleanSyncTreeResults()}},{key:"cleanSyncTreeResults",value:function(){this.beforeStableIndex=this.children.length,this.afterStableIndex=-1,this.firstChangeInterval=null,this.lastChangeInterval=null,this.incompatibleStateChange=!1,this.groupChanged=!1,this.cascadingStateChange=!1,this.anyStateChange=!1}},{key:"updateRenderingState",value:function(){var e=this.isBackbone,t=this.isTransformed,n=this.isVisibilityApplied,i=this.isInstanceCanvasCache,r=this.isSharedCanvasCacheSelf,a=this.isSharedCanvasCachePlaceholder,s=this.isUnderCanvasCache,o=this.selfRenderer,l=this.groupRenderer,u=this.sharedCacheRenderer,c=this.preferredRenderers;this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCacheSelf=!1,this.isSharedCanvasCachePlaceholder=!1,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0;var h=this.node._hints;this.isUnderCanvasCache=this.isSharedCanvasCacheRoot||!!this.parent&&(this.parent.isUnderCanvasCache||this.parent.isInstanceCanvasCache||this.parent.isSharedCanvasCacheSelf),this.preferredRenderers=this.parent?this.parent.preferredRenderers:Ey,h.renderer&&(this.preferredRenderers=Zr.pushOrderBitmask(this.preferredRenderers,h.renderer));var d=this.node.hasClipArea(),p=1!==this.node.effectiveOpacity||h.usesOpacity||this.node._filters.length>0,f=!1,m=!1;if(p)for(var g=0;g<this.node._filters.length;g++){var y=this.node._filters[g];y.isSVGCompatible()||(f=!0),y.isCanvasCompatible()||(m=!0)}var v=h.cssTransform||h.layerSplit,A=this.isDisplayRoot||!this.isUnderCanvasCache&&v,b=!A&&(p||d)&&(!f&&this.node._rendererSummary.isSubtreeRenderedExclusivelySVG(this.preferredRenderers)||!m&&this.node._rendererSummary.isSubtreeRenderedExclusivelyCanvas(this.preferredRenderers));if(!b&&(A||p||d)?(this.isBackbone=!0,this.isVisibilityApplied=!0,this.isTransformed=this.isDisplayRoot||!!h.cssTransform,this.groupRenderer=Zr.bitmaskDOM):!b&&(p||d||h.canvasCache)&&(h.singleCache?this.isSharedCanvasCacheRoot?(this.isSharedCanvasCacheSelf=!0,this.sharedCacheRenderer=this.isWebGLSupported?Zr.bitmaskWebGL:Zr.bitmaskCanvas):this.isSharedCanvasCachePlaceholder=!0:(this.isInstanceCanvasCache=!0,this.isUnderCanvasCache=!0,this.groupRenderer=this.isWebGLSupported?Zr.bitmaskWebGL:Zr.bitmaskCanvas)),this.node.isPainted())if(this.isUnderCanvasCache)this.selfRenderer=Zr.bitmaskCanvas;else{var S=this.node._rendererBitmask;if(!this.isWebGLSupported)S^=S&Zr.bitmaskWebGL;this.selfRenderer=S&Zr.bitmaskOrder(this.preferredRenderers,0)||S&Zr.bitmaskOrder(this.preferredRenderers,1)||S&Zr.bitmaskOrder(this.preferredRenderers,2)||S&Zr.bitmaskOrder(this.preferredRenderers,3)||S&Zr.bitmaskSVG||S&Zr.bitmaskCanvas||S&Zr.bitmaskDOM||S&Zr.bitmaskWebGL||0}this.groupChanged=e!==this.isBackbone||i!==this.isInstanceCanvasCache||r!==this.isSharedCanvasCacheSelf,this.cascadingStateChange=s!==this.isUnderCanvasCache||c!==this.preferredRenderers,this.incompatibleStateChange=this.isTransformed!==t||this.isSharedCanvasCachePlaceholder!==a,this.anyStateChange=this.groupChanged||this.cascadingStateChange||this.incompatibleStateChange||o!==this.selfRenderer||l!==this.groupRenderer||u!==this.sharedCacheRenderer,n!==this.isVisibilityApplied&&(this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()),this.fittability.checkSelfFittability()}},{key:"getStateString",value:function(){var e="S[ ".concat(this.isDisplayRoot?"displayRoot ":"").concat(this.isBackbone?"backbone ":"").concat(this.isInstanceCanvasCache?"instanceCache ":"").concat(this.isSharedCanvasCachePlaceholder?"sharedCachePlaceholder ":"").concat(this.isSharedCanvasCacheSelf?"sharedCacheSelf ":"").concat(this.isTransformed?"TR ":"").concat(this.isVisibilityApplied?"VIS ":"").concat(this.selfRenderer?this.selfRenderer.toString(16):"-",",").concat(this.groupRenderer?this.groupRenderer.toString(16):"-",",").concat(this.sharedCacheRenderer?this.sharedCacheRenderer.toString(16):"-"," ");return"".concat(e,"]")}},{key:"baseSyncTree",value:function(){this.syncTree(),this.cleanSyncTreeResults()}},{key:"syncTree",value:function(){var e=this.stateless;if((e||this.parent&&this.parent.cascadingStateChange||this.renderStateDirtyFrame===this.display._frameId)&&this.updateRenderingState(),!e&&this.incompatibleStateChange)return!1;if(this.stateless=!1,e&&(this.isTransformed&&this.display.markTransformRootDirty(this,!0),this.attachNodeListeners()),this.isSharedCanvasCachePlaceholder)this.sharedSyncTree();else if(e||this.skipPruningFrame===this.display._frameId||this.anyStateChange){this.prepareChildInstances(e);this.firstDrawable,this.lastDrawable,this.firstInnerDrawable,this.lastInnerDrawable;var t=this.updateSelfDrawable();this.localSyncTree(t),this.groupSyncTree(e)}return!0}},{key:"localSyncTree",value:function(e){var t=this.display._frameId,n=this.selfDrawable,i=n,r=null;e&&(r=Cg.newForDisplay(null,null,this.display));for(var a=r,s=e?null:this.selfDrawable,o=0;o<this.children.length;o++){var l=this.children[o];l.syncTree()||(l=this.updateIncompatibleChildInstance(l,o)).syncTree();var u=l.shouldIncludeInParentDrawables();u&&l.firstDrawable&&(i?zf.connectDrawables(i,l.firstDrawable,this.display):n=l.firstDrawable,i=l.lastDrawable);var c=l.stitchChangeIncluded,h=u;l.stitchChangeIncluded=h,l.stitchChangeFrame===t&&(l.firstChangeInterval=l.lastChangeInterval=Cg.newForDisplay(null,null,this.display));var d=l.firstChangeInterval,p=a&&null===a.drawableAfter,f=d&&null===d.drawableBefore;if(l.stitchChangeBefore===t&&!p&&!f){var m=Cg.newForDisplay(s,null,this.display);a&&(a.nextChangeInterval=m),a=m,r=r||a,p=!0}if((c||h)&&(p?d?null===d.drawableBefore?(a.drawableAfter=d.drawableAfter,a.nextChangeInterval=d.nextChangeInterval,a=l.lastChangeInterval===d?a:l.lastChangeInterval):(a.drawableAfter=l.firstDrawable,a.nextChangeInterval=d,a=l.lastChangeInterval):a.drawableAfter=l.firstDrawable:d&&(r=r||d,null===d.drawableBefore&&(d.drawableBefore=s),a&&(a.nextChangeInterval=d),a=l.lastChangeInterval),s=a&&null===a.drawableAfter?null:l.lastDrawable?l.lastDrawable:s),o===this.children.length-1&&l.stitchChangeAfter===t&&(!a||null!==a.drawableAfter)){var g=Cg.newForDisplay(s,null,this.display);a&&(a.nextChangeInterval=g),a=g,r=r||a}l.cleanSyncTreeResults()}r||this.stitchChangeOnChildren!==this.display._frameId||0!==this.children.length||(r=a=Cg.newForDisplay(null,null,this.display)),this.firstChangeInterval=r,this.lastChangeInterval=a,this.firstDrawable=this.firstInnerDrawable=n,this.lastDrawable=this.lastInnerDrawable=i}},{key:"updateSelfDrawable",value:function(){if(this.node.isPainted()){var e=this.selfRenderer;if(!this.selfDrawable||0==(this.selfDrawable.renderer&e&Zr.bitmaskRendererArea))return this.selfDrawable&&this.selfDrawable.markForDisposal(this.display),this.selfDrawable=Zr.createSelfDrawable(this,this.node,e,this.fittability.ancestorsFittable),!0}return!1}},{key:"updateIncompatibleChildInstance",value:function(t,n){this.display.markInstanceRootForDisposal(t);var i=e.createFromPool(this.display,this.trail.copy().addDescendant(t.node,n),!1,!1);return this.replaceInstanceWithIndex(t,i,n),i}},{key:"groupSyncTree",value:function(e){var t=this.groupRenderer,n=!!t!=!!this.groupDrawable||!e&&this.groupChanged||this.groupDrawable&&this.groupDrawable.renderer!==t;n&&(this.groupDrawable&&(this.groupDrawable.markForDisposal(this.display),this.groupDrawable=null),this.firstChangeInterval=this.lastChangeInterval=Cg.newForDisplay(null,null,this.display)),t&&(this.firstDrawable&&zf.disconnectBefore(this.firstDrawable,this.display),this.lastDrawable&&zf.disconnectAfter(this.lastDrawable,this.display),this.isBackbone?(n&&(this.groupDrawable=uy.createFromPool(this.display,this,this.getTransformRootInstance(),t,this.isDisplayRoot),this.isTransformed&&this.display.markTransformRootDirty(this,!0)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isInstanceCanvasCache?(n&&(this.groupDrawable=Sg.createFromPool(t,this)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isSharedCanvasCacheSelf&&n&&(this.groupDrawable=Hg.createFromPool(t,this)),this.groupDrawable.setFittable(this.fittability.ancestorsFittable),this.firstDrawable=this.lastDrawable=this.groupDrawable),n?this.firstChangeInterval=this.lastChangeInterval=Cg.newForDisplay(null,null,this.display):t&&(this.firstChangeInterval=this.lastChangeInterval=null)}},{key:"sharedSyncTree",value:function(){this.ensureSharedCacheInitialized();var e=this.sharedCacheRenderer;this.sharedCacheDrawable&&this.sharedCacheDrawable.renderer===e||(this.sharedCacheDrawable&&this.sharedCacheDrawable.markForDisposal(this.display),this.sharedCacheDrawable=new kg(this.trail,e,this,this.sharedCacheInstance),this.firstDrawable=this.sharedCacheDrawable,this.lastDrawable=this.sharedCacheDrawable,this.firstChangeInterval=this.lastChangeInterval=Cg.newForDisplay(null,null,this.display))}},{key:"prepareChildInstances",value:function(t){for(;this.instanceRemovalCheckList.length;){var n=this.instanceRemovalCheckList.pop();-1===n.addRemoveCounter&&(n.addRemoveCounter=0,this.display.markInstanceRootForDisposal(n))}if(t)for(var i=0;i<this.node.children.length;i++){var r=this.node.children[i];this.appendInstance(e.createFromPool(this.display,this.trail.copy().addDescendant(r,i),!1,!1))}}},{key:"ensureSharedCacheInitialized",value:function(){if(!this.sharedCacheInstance){var t=this.node.getId();this.sharedCacheInstance=this.display._sharedCanvasInstances[t],this.sharedCacheInstance||(this.sharedCacheInstance=e.createFromPool(this.display,new bl(this.node),!1,!0),this.sharedCacheInstance.syncTree(),this.display._sharedCanvasInstances[t]=this.sharedCacheInstance,this.display.markTransformRootDirty(this.sharedCacheInstance,!0)),this.sharedCacheInstance.externalReferenceCount++,this.isTransformed&&this.display.markTransformRootDirty(this,!0)}}},{key:"shouldIncludeInParentDrawables",value:function(){return this.node.isVisible()||!this.node.isExcludeInvisible()}},{key:"findPreviousDrawable",value:function(e){for(var t=e-1;t>=0;t--){var n=this.children[t].lastDrawable;if(null!==n)return n}return null}},{key:"findNextDrawable",value:function(e){for(var t=this.children.length,n=e+1;n<t;n++){var i=this.children[n].firstDrawable;if(null!==i)return i}return null}},{key:"appendInstance",value:function(e){this.insertInstance(e,this.children.length)}},{key:"insertInstance",value:function(e,t){e.stitchChangeFrame=this.display._frameId,this.stitchChangeOnChildren=this.display._frameId,this.children.splice(t,0,e),e.parent=this,e.oldParent=this,t<=this.beforeStableIndex&&(this.beforeStableIndex=t-1),t>this.afterStableIndex?this.afterStableIndex=t+1:this.afterStableIndex++,this.fittability.onInsert(e.fittability),this.relativeTransform.addInstance(e),this.markChildVisibilityDirty()}},{key:"removeInstance",value:function(e){this.removeInstanceWithIndex(e,_.indexOf(this.children,e))}},{key:"removeInstanceWithIndex",value:function(e,t){var n=this.display._frameId;e.stitchChangeFrame=n,this.stitchChangeOnChildren=n,t-1>=0&&(this.children[t-1].stitchChangeAfter=n),t+1<this.children.length&&(this.children[t+1].stitchChangeBefore=n),this.children.splice(t,1),e.parent=null,e.oldParent=this,t<=this.beforeStableIndex&&(this.beforeStableIndex=t-1),t>=this.afterStableIndex?this.afterStableIndex=t:this.afterStableIndex--,this.fittability.onRemove(e.fittability),this.relativeTransform.removeInstance(e)}},{key:"replaceInstanceWithIndex",value:function(e,t,n){this.removeInstanceWithIndex(e,n),this.insertInstance(t,n)}},{key:"reorderInstances",value:function(e,t){var n=this.display._frameId;this.children.splice(e,t-e+1);for(var i=e;i<=t;i++){var r=this.findChildInstanceOnNode(this.node._children[i]);this.children.splice(i,0,r),r.stitchChangeFrame=n,i>e&&(r.stitchChangeAfter=n),i<t&&(r.stitchChangeBefore=n)}this.stitchChangeOnChildren=n,this.beforeStableIndex=Math.min(this.beforeStableIndex,e-1),this.afterStableIndex=Math.max(this.afterStableIndex,t+1)}},{key:"findChildInstanceOnNode",value:function(e){for(var t=e.getInstances(),n=0;n<t.length;n++)if(t[n].oldParent===this)return t[n];return null}},{key:"onChildInserted",value:function(t,n){var i=this.findChildInstanceOnNode(t);i?i.addRemoveCounter+=1:i=e.createFromPool(this.display,this.trail.copy().addDescendant(t,n),!1,!1),this.insertInstance(i,n),this.markSkipPruning()}},{key:"onChildRemoved",value:function(e,t){var n=this.findChildInstanceOnNode(e);n.addRemoveCounter-=1,this.instanceRemovalCheckList.push(n),this.removeInstanceWithIndex(n,t),this.markSkipPruning()}},{key:"onChildrenReordered",value:function(e,t){this.reorderInstances(e,t),this.markSkipPruning()}},{key:"onVisibilityChange",value:function(){this.stitchChangeFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning(),this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()}},{key:"onOpacityChange",value:function(){this.markRenderStateDirty()}},{key:"markChildVisibilityDirty",value:function(){this.childVisibilityDirty||(this.childVisibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty())}},{key:"updateDrawableFittability",value:function(e){this.selfDrawable&&this.selfDrawable.setFittable(e),this.groupDrawable&&this.groupDrawable.setFittable(e)}},{key:"updateVisibility",value:function(e,t,n,i){this.visibilityDirty&&(i=!0);var r=this.node.isVisible(),a=this.visible,s=this.relativeVisible,o=this.selfVisible,l=this.node.voicingVisibleProperty.value,u=this.voicingVisible,c=a&&u;this.visible=e&&r,this.voicingVisible=t&&l,this.relativeVisible=n&&r,this.selfVisible=!!this.isVisibilityApplied||this.relativeVisible;for(var h=this.children.length,d=0;d<h;d++){var p=this.children[d];(i||p.visibilityDirty||p.childVisibilityDirty)&&p.updateVisibility(this.visible,this.voicingVisible,!!this.isVisibilityApplied||this.relativeVisible,i)}this.visibilityDirty=!1,this.childVisibilityDirty=!1,this.visible!==a&&this.visibleEmitter.emit(),this.relativeVisible!==s&&this.relativeVisibleEmitter.emit(),this.selfVisible!==o&&this.selfVisibleEmitter.emit();var f=this.voicingVisible&&this.visible;f!==c&&this.canVoiceEmitter.emit(f)}},{key:"getDescendantCount",value:function(){for(var e=this.children.length,t=0;t<this.children.length;t++)e+=this.children[t].getDescendantCount();return e}},{key:"addSVGGroup",value:function(e){this.svgGroups.push(e)}},{key:"removeSVGGroup",value:function(e){J(this.svgGroups,e)}},{key:"lookupSVGGroup",value:function(e){for(var t=this.svgGroups.length,n=0;n<t;n++){var i=this.svgGroups[n];if(i.block===e)return i}return null}},{key:"getFilterRootInstance",value:function(){return this.isBackbone||this.isInstanceCanvasCache||!this.parent?this:this.parent.getFilterRootInstance()}},{key:"getTransformRootInstance",value:function(){return this.isTransformed||!this.parent?this:this.parent.getTransformRootInstance()}},{key:"getVisibilityRootInstance",value:function(){return this.isVisibilityApplied||!this.parent?this:this.parent.getVisibilityRootInstance()}},{key:"attachNodeListeners",value:function(){this.relativeTransform.attachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.addListener(this.childInsertedListener),this.node.childRemovedEmitter.addListener(this.childRemovedListener),this.node.childrenReorderedEmitter.addListener(this.childrenReorderedListener),this.node.visibleProperty.lazyLink(this.visibilityListener),this.node.voicingVisibleProperty.lazyLink(this.visibilityListener),this.node.filterChangeEmitter.addListener(this.markRenderStateDirtyListener),this.node.clipAreaProperty.lazyLink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.addListener(this.markRenderStateDirtyListener))}},{key:"detachNodeListeners",value:function(){this.relativeTransform.detachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.removeListener(this.childInsertedListener),this.node.childRemovedEmitter.removeListener(this.childRemovedListener),this.node.childrenReorderedEmitter.removeListener(this.childrenReorderedListener),this.node.visibleProperty.unlink(this.visibilityListener),this.node.voicingVisibleProperty.unlink(this.visibilityListener),this.node.filterChangeEmitter.removeListener(this.markRenderStateDirtyListener),this.node.clipAreaProperty.unlink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.removeListener(this.markRenderStateDirtyListener))}},{key:"markRenderStateDirty",value:function(){this.renderStateDirtyFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()}},{key:"markSkipPruning",value:function(){this.skipPruningFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()}},{key:"getBranchIndexTo",value:function(e){var t=this.branchIndexMap[e.id];if(void 0!==t)return t;var n=this.trail.getBranchIndexTo(e.trail);return this.branchIndexMap[e.id]=n,e.branchIndexMap[this.id]=n,this.branchIndexReferences.push(e),e.branchIndexReferences.push(this),n}},{key:"dispose",value:function(){for(this.active=!1;this.branchIndexReferences.length;){var e=this.branchIndexReferences.pop();delete this.branchIndexMap[e.id],delete e.branchIndexMap[this.id],J(e.branchIndexReferences,this)}this.groupDrawable&&this.groupDrawable.disposeImmediately(this.display),this.sharedCacheDrawable&&this.sharedCacheDrawable.disposeImmediately(this.display),this.selfDrawable&&this.selfDrawable.disposeImmediately(this.display);for(var t=this.children.length,n=0;n<t;n++)this.children[n].dispose();for(;this.instanceRemovalCheckList.length;){var i=this.instanceRemovalCheckList.pop();i.active&&i.dispose()}this.stateless||this.detachNodeListeners(),this.node.removeInstance(this),this.sharedCacheInstance&&(this.sharedCacheInstance.externalReferenceCount--,0===this.sharedCacheInstance.externalReferenceCount&&(delete this.display._sharedCanvasInstances[this.node.getId()],this.sharedCacheInstance.dispose())),this.cleanInstance(null,null),this.visibleEmitter.removeAllListeners(),this.relativeVisibleEmitter.removeAllListeners(),this.selfVisibleEmitter.removeAllListeners(),this.canVoiceEmitter.removeAllListeners(),this.freeToPool()}},{key:"audit",value:function(e,t){}},{key:"auditVisibility",value:function(e){}},{key:"auditChangeIntervals",value:function(e,t,n,i){if(e)for(var r=e;r!==t;)r=r.oldNextDrawable;if(n)for(var a=n;a!==i;)a=a.nextDrawable}},{key:"toString",value:function(){return"".concat(this.id,"#").concat(this.node?"".concat(this.node.constructor.name?this.node.constructor.name:"?","#").concat(this.node.id):"-")}}]),e}();Cr.register("Instance",ky),Gi.mixInto(ky);var Vy=ky,wy={"scenery-grab-pointer":["grab","-moz-grab","-webkit-grab","pointer"],"scenery-grabbing-pointer":["grabbing","-moz-grabbing","-webkit-grabbing","pointer"]},_y=1,Cy=function(){function e(t,n){_classCallCheck(this,e);var i=S()({width:n&&n.container&&n.container.clientWidth||640,height:n&&n.container&&n.container.clientHeight||480,allowCSSHacks:!0,allowSceneOverflow:!1,defaultCursor:"default",backgroundColor:null,preserveDrawingBuffer:!1,allowWebGL:!0,accessibility:!0,supportsInteractiveHighlights:!1,interactive:!0,listenToOnlyElement:!1,batchDOMEvents:!1,assumeFullWindow:!1,aggressiveContextRecreation:!0,passiveEvents:!la.safari&&null,allowBackingScaleAntialiasing:!0,tandem:xe.OPTIONAL},n);this.id=_y++,this._accessible=i.accessibility,this._preserveDrawingBuffer=i.preserveDrawingBuffer,this._allowWebGL=i.allowWebGL,this._allowCSSHacks=i.allowCSSHacks,this._allowSceneOverflow=i.allowSceneOverflow,this._defaultCursor=i.defaultCursor,this.sizeProperty=new st(new ms(i.width,i.height)),this._currentSize=new ms(-1,-1),this._rootNode=t,this._rootNode.addRootedDisplay(this),this._rootBackbone=null,this._domElement=i.container?uy.repurposeBackboneContainer(i.container):uy.createDivBackbone(),this._sharedCanvasInstances={},this._baseInstance=null,this._frameId=0,this._dirtyTransformRoots=[],this._dirtyTransformRootsWithoutPass=[],this._instanceRootsToDispose=[],this._reduceReferencesNeeded=[],this._drawablesToDispose=[],this._drawablesToChangeBlock=[],this._drawablesToUpdateLinks=[],this._changeIntervalsToDispose=[],this._lastCursor=null,this._currentBackgroundCSS=null,this._backgroundColor=null,this._requestAnimationFrameID=0,this._input=null,this._inputListeners=[],this._interactive=i.interactive,this._listenToOnlyElement=i.listenToOnlyElement,this._batchDOMEvents=i.batchDOMEvents,this._assumeFullWindow=i.assumeFullWindow,this._passiveEvents=i.passiveEvents,this._aggressiveContextRecreation=i.aggressiveContextRecreation,this._allowBackingScaleAntialiasing=i.allowBackingScaleAntialiasing,this._overlays=[],this._pointerOverlay=null,this._pointerAreaOverlay=null,this._hitAreaOverlay=null,this._canvasAreaBoundsOverlay=null,this._fittedBlockBoundsOverlay=null,this.applyCSSHacks(),this.setBackgroundColor(i.backgroundColor);var r=new Mc({tandem:i.tandem.createTandem("ariaLiveAnnouncer"),phetioDocumentation:"The Announcer responsible for announcing to aria-live for this Display."});if(this.descriptionUtteranceQueue=new Dc(r,{initialize:this._accessible,featureSpecificAnnouncingControlPropertyName:"descriptionCanAnnounceProperty"}),this.focusManager=new Wc,(this._accessible||i.supportsInteractiveHighlights)&&(this._focusRootNode=new jo,this._focusOverlay=new yy(this,this._focusRootNode,{pdomFocusHighlightsVisibleProperty:this.focusManager.pdomFocusHighlightsVisibleProperty,interactiveHighlightsVisibleProperty:this.focusManager.interactiveHighlightsVisibleProperty,readingBlockHighlightsVisibleProperty:this.focusManager.readingBlockHighlightsVisibleProperty}),this.addOverlay(this._focusOverlay)),this._accessible){this.blockFocusCallbacks=!1,this._rootPDOMInstance=Hh.createFromPool(null,this,new bl),zh.rebuildInstanceTree(this._rootPDOMInstance),this._domElement.appendChild(this._rootPDOMInstance.peer.primarySibling);var a=r.ariaLiveContainer;this._domElement.appendChild(a),a.style[zr.userSelect]="none",this._boundHandleFullScreenNavigation=this.handleFullScreenNavigation.bind(this),ju.keydownEmitter.addListener(this._boundHandleFullScreenNavigation)}}return _createClass(e,[{key:"getDOMElement",value:function(){return this._domElement}},{key:"domElement",get:function(){return this.getDOMElement()}},{key:"updateDisplay",value:function(){var e=!!this._baseInstance;for(this._input&&this._input.validatePointers(),this._accessible&&this._rootPDOMInstance.peer.updateSubtreePositioning(),this._rootNode.validateWatchedBounds(),this._baseInstance=this._baseInstance||Vy.createFromPool(this,new bl(this._rootNode),!0,!1),this._baseInstance.baseSyncTree(),e&&this.markTransformRootDirty(this._baseInstance,this._baseInstance.isTransformed);this._drawablesToUpdateLinks.length;)this._drawablesToUpdateLinks.pop().updateLinks();for(;this._changeIntervalsToDispose.length;)this._changeIntervalsToDispose.pop().dispose();for(this._rootBackbone=this._rootBackbone||this._baseInstance.groupDrawable;this._drawablesToChangeBlock.length;){this._drawablesToChangeBlock.pop().updateBlock();0}for(0,this.updateDirtyTransformRoots(),this._baseInstance.updateVisibility(!0,!0,!0,!1);this._instanceRootsToDispose.length;)this._instanceRootsToDispose.pop().dispose();for(0;this._drawablesToDispose.length;)this._drawablesToDispose.pop().dispose();if(this._rootBackbone.update(),this.updateCursor(),this.updateBackgroundColor(),this.updateSize(),this._overlays.length)for(var t=this._rootBackbone.lastZIndex,n=0;n<this._overlays.length;n++){var i=this._overlays[n];i.domElement.style.zIndex=""+t++,i.update()}for(;this._reduceReferencesNeeded.length;)this._reduceReferencesNeeded.pop().reduceReferences();this._frameId++,zh.auditPDOMDisplays(this.rootNode)}},{key:"getPhetioElementAt",value:function(e){var t=this._rootNode.getPhetioMouseHit(e);return t&&t.isPhetioInstrumented()?t:null}},{key:"updateSize",value:function(){var e=!1;this.size.width!==this._currentSize.width&&(e=!0,this._currentSize.width=this.size.width,this._domElement.style.width="".concat(this.size.width,"px")),this.size.height!==this._currentSize.height&&(e=!0,this._currentSize.height=this.size.height,this._domElement.style.height="".concat(this.size.height,"px")),e&&!this._allowSceneOverflow&&(this._domElement.style.clip="rect(0px,".concat(this.size.width,"px,").concat(this.size.height,"px,0px)"))}},{key:"isWebGLAllowed",value:function(){return this._allowWebGL}},{key:"webglAllowed",get:function(){return this.isWebGLAllowed()}},{key:"getRootNode",value:function(){return this._rootNode}},{key:"rootNode",get:function(){return this.getRootNode()}},{key:"getRootBackbone",value:function(){return this._rootBackbone}},{key:"rootBackbone",get:function(){return this.getRootBackbone()}},{key:"getSize",value:function(){return this.sizeProperty.value}},{key:"size",get:function(){return this.getSize()}},{key:"getBounds",value:function(){return this.size.toBounds()}},{key:"bounds",get:function(){return this.getBounds()}},{key:"setSize",value:function(e){this.sizeProperty.value=e}},{key:"setWidthHeight",value:function(e,t){this.setSize(new ms(e,t))}},{key:"getWidth",value:function(){return this.size.width}},{key:"width",get:function(){return this.getWidth()},set:function(e){this.setWidth(e)}},{key:"setWidth",value:function(e){return this.getWidth()!==e&&this.setSize(new ms(e,this.getHeight())),this}},{key:"getHeight",value:function(){return this.size.height}},{key:"height",get:function(){return this.getHeight()},set:function(e){this.setHeight(e)}},{key:"setHeight",value:function(e){return this.getHeight()!==e&&this.setSize(new ms(this.getWidth(),e)),this}},{key:"setBackgroundColor",value:function(e){return this._backgroundColor=e,this}},{key:"backgroundColor",get:function(){return this.getBackgroundColor()},set:function(e){this.setBackgroundColor(e)}},{key:"getBackgroundColor",value:function(){return this._backgroundColor}},{key:"interactive",get:function(){return this._interactive},set:function(e){this._accessible&&e!==this._interactive&&this._rootPDOMInstance.peer.recursiveDisable(!e),this._interactive=e,!this._interactive&&this._input&&(this._input.interruptPointers(),this._input.clearBatchedEvents(),this._input.removeTemporaryPointers(),this._rootNode.interruptSubtreeInput(),this.interruptInput())}},{key:"addOverlay",value:function(e){this._overlays.push(e),this._domElement.appendChild(e.domElement),e.domElement.setAttribute("aria-hidden","true")}},{key:"removeOverlay",value:function(e){this._domElement.removeChild(e.domElement),this._overlays.splice(_.indexOf(this._overlays,e),1)}},{key:"getPDOMRootElement",value:function(){return this._accessible?this._rootPDOMInstance.peer.primarySibling:null}},{key:"pdomRootElement",get:function(){return this.getPDOMRootElement()}},{key:"isAccessible",value:function(){return this._accessible}},{key:"handleFullScreenNavigation",value:function(e){if(Qa.isFullScreen()&&xa.isKeyEvent(e,xa.KEY_TAB)){var t=this.pdomRootElement;(e.shiftKey?Gs.getPreviousFocusable(t||void 0):Gs.getNextFocusable(t||void 0))===e.target&&e.preventDefault()}}},{key:"getUsedRenderersBitmask",value:function(){return function e(t){var n=0;return _.each(t.blocks,(function(t){t instanceof Yg&&t.domDrawable instanceof uy?n|=e(t.domDrawable):n|=t.renderer})),n}(this._rootBackbone)&Zr.bitmaskRendererArea}},{key:"markTransformRootDirty",value:function(e,t){t?this._dirtyTransformRoots.push(e):this._dirtyTransformRootsWithoutPass.push(e)}},{key:"updateDirtyTransformRoots",value:function(){for(;this._dirtyTransformRoots.length;)this._dirtyTransformRoots.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!0);for(;this._dirtyTransformRootsWithoutPass.length;)this._dirtyTransformRootsWithoutPass.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!1)}},{key:"markDrawableChangedBlock",value:function(e){this._drawablesToChangeBlock.push(e)}},{key:"markForReducedReferences",value:function(e){this._reduceReferencesNeeded.push(e)}},{key:"markInstanceRootForDisposal",value:function(e){this._instanceRootsToDispose.push(e)}},{key:"markDrawableForDisposal",value:function(e){this._drawablesToDispose.push(e)}},{key:"markDrawableForLinksUpdate",value:function(e){this._drawablesToUpdateLinks.push(e)}},{key:"markChangeIntervalToDispose",value:function(e){this._changeIntervalsToDispose.push(e)}},{key:"updateBackgroundColor",value:function(){var e=null===this._backgroundColor?"":this._backgroundColor.toCSS?this._backgroundColor.toCSS():this._backgroundColor;e!==this._currentBackgroundCSS&&(this._currentBackgroundCSS=e,this._domElement.style.backgroundColor=e)}},{key:"updateCursor",value:function(){if(this._input&&this._input.mouse&&this._input.mouse.point){if(this._input.mouse.cursor)return void this.setSceneCursor(this._input.mouse.cursor);var e=this._rootNode.trailUnderPointer(this._input.mouse);if(e)for(var t=e.getCursorCheckIndex();t>=0;t--){var n=e.nodes[t],i=n.getEffectiveCursor();if(i)return void this.setSceneCursor(i)}}this.setSceneCursor(this._defaultCursor)}},{key:"setElementCursor",value:function(e){this._domElement.style.cursor=e,this._assumeFullWindow&&(document.body.style.cursor=e)}},{key:"setSceneCursor",value:function(e){if(e!==this._lastCursor){this._lastCursor=e;var t=wy[e];if(t)for(var n=t.length-1;n>=0;n--)this.setElementCursor(t[n]);else this.setElementCursor(e)}}},{key:"applyCSSHacks",value:function(){this._allowSceneOverflow||(this._domElement.style.overflow="hidden"),this._domElement.style.msTouchAction="none",zr.setStyle(this._domElement,zr.fontSmoothing,"antialiased"),this._allowCSSHacks&&(document.onselectstart=function(){return!1},document.body.style.msContentZooming="none",zr.setStyle(this._domElement,zr.userDrag,"none"),zr.setStyle(this._domElement,zr.userSelect,"none"),zr.setStyle(this._domElement,zr.touchAction,"none"),zr.setStyle(this._domElement,zr.touchCallout,"none"),zr.setStyle(this._domElement,zr.tapHighlightColor,"rgba(0,0,0,0)"))}},{key:"canvasDataURL",value:function(e){this.canvasSnapshot((function(t){e(t.toDataURL())}))}},{key:"canvasSnapshot",value:function(e){var t=document.createElement("canvas");t.width=this.size.width,t.height=this.size.height;var n=t.getContext("2d");this._rootNode.renderToCanvas(t,n,(function(){e(t,n.getImageData(0,0,t.width,t.height))}),this.domElement.style.backgroundColor)}},{key:"setPointerDisplayVisible",value:function(e){e!==!!this._pointerOverlay&&(e?(this._pointerOverlay=new by(this,this._rootNode),this.addOverlay(this._pointerOverlay)):(this.removeOverlay(this._pointerOverlay),this._pointerOverlay.dispose(),this._pointerOverlay=null))}},{key:"setPointerAreaDisplayVisible",value:function(e){e!==!!this._pointerAreaOverlay&&(e?(this._pointerAreaOverlay=new Ay(this,this._rootNode),this.addOverlay(this._pointerAreaOverlay)):(this.removeOverlay(this._pointerAreaOverlay),this._pointerAreaOverlay.dispose(),this._pointerAreaOverlay=null))}},{key:"setHitAreaDisplayVisible",value:function(e){e!==!!this._hitAreaOverlay&&(e?(this._hitAreaOverlay=new vy(this,this._rootNode),this.addOverlay(this._hitAreaOverlay)):(this.removeOverlay(this._hitAreaOverlay),this._hitAreaOverlay.dispose(),this._hitAreaOverlay=null))}},{key:"setCanvasNodeBoundsVisible",value:function(e){e!==!!this._canvasAreaBoundsOverlay&&(e?(this._canvasAreaBoundsOverlay=new hy(this,this._rootNode),this.addOverlay(this._canvasAreaBoundsOverlay)):(this.removeOverlay(this._canvasAreaBoundsOverlay),this._canvasAreaBoundsOverlay.dispose(),this._canvasAreaBoundsOverlay=null))}},{key:"setFittedBlockBoundsVisible",value:function(e){e!==!!this._fittedBlockBoundsOverlay&&(e?(this._fittedBlockBoundsOverlay=new dy(this,this._rootNode),this.addOverlay(this._fittedBlockBoundsOverlay)):(this.removeOverlay(this._fittedBlockBoundsOverlay),this._fittedBlockBoundsOverlay.dispose(),this._fittedBlockBoundsOverlay=null))}},{key:"resizeOnWindowResize",value:function(){var e=this,t=function(){e.setWidthHeight(window.innerWidth,window.innerHeight)};window.addEventListener("resize",t),t()}},{key:"updateOnRequestAnimationFrame",value:function(e){var t=0,n=0,i=this;!function r(){i._requestAnimationFrameID=window.requestAnimationFrame(r,i._domElement);var a=Date.now();0!==t&&(n=(a-t)/1e3),t=a,mt.emit(n),e&&e(n),i.updateDisplay()}()}},{key:"cancelUpdateOnRequestAnimationFrame",value:function(){window.cancelAnimationFrame(this._requestAnimationFrameID)}},{key:"initializeEvents",value:function(e){var t=new ad(this,!this._listenToOnlyElement,this._batchDOMEvents,this._assumeFullWindow,this._passiveEvents,e);this._input=t,t.connectListeners()}},{key:"detachEvents",value:function(){this._input.disconnectListeners(),this._input=null}},{key:"addInputListener",value:function(e){return _.includes(this._inputListeners,e)||this._inputListeners.push(e),this}},{key:"removeInputListener",value:function(e){return this._inputListeners.splice(_.indexOf(this._inputListeners,e),1),this}},{key:"hasInputListener",value:function(e){for(var t=0;t<this._inputListeners.length;t++)if(this._inputListeners[t]===e)return!0;return!1}},{key:"getInputListeners",value:function(){return this._inputListeners.slice(0)}},{key:"inputListeners",get:function(){return this.getInputListeners()}},{key:"interruptInput",value:function(){for(var e=this.inputListeners,t=0;t<e.length;t++){var n=e[t];n.interrupt&&n.interrupt()}return this}},{key:"ensureNotPainting",value:function(){}},{key:"loseWebGLContexts",value:function(){!function e(t){t.blocks&&t.blocks.forEach((function(t){var n=t.gl;n&&ma.loseContext(n);for(var i=t.firstDrawable;null!==i&&(e(i),i!==t.lastDrawable);i=i.nextDrawable);}))}(this._rootBackbone)}},{key:"inspect",value:function(){localStorage.scenerySnapshot=JSON.stringify(qf(this))}},{key:"getDebugHTML",value:function(){var e="font-weight: bold; font-size: 120%; margin-top: 5px;",t=0,n="";n+='<div style="'.concat(e,'">Display (').concat(this.id,") Summary</div>"),n+="".concat(this.size.toString()," frame:").concat(this._frameId," input:").concat(!!this._input," cursor:").concat(this._lastCursor,"<br/>"),n+="Nodes: ".concat(function e(t){for(var n=1,i=0;i<t.children.length;i++)n+=e(t.children[i]);return n}(this._rootNode),"<br/>"),n+=this._baseInstance?"Instances: ".concat(function e(t){for(var n=1,i=0;i<t.children.length;i++)n+=e(t.children[i]);return n}(this._baseInstance),"<br/>"):"",n+=this._rootBackbone?"Drawables: ".concat(function e(t){var n=1;if(t.blocks)_.each(t.blocks,(function(t){n+=e(t)}));else if(t.firstDrawable&&t.lastDrawable){for(var i=t.firstDrawable;i!==t.lastDrawable;i=i.nextDrawable)n+=e(i);n+=e(t.lastDrawable)}return n}(this._rootBackbone),"<br/>"):"";var i={};function r(e){var t=e.constructor.name;i[t]?i[t]++:i[t]=1}for(var a in n+=this._baseInstance?"Retained Drawables: ".concat(function e(t){var n=0;t.selfDrawable&&(r(t.selfDrawable),n++),t.groupDrawable&&(r(t.groupDrawable),n++),t.sharedCacheDrawable&&(r(t.sharedCacheDrawable),n++);for(var i=0;i<t.children.length;i++)n+=e(t.children[i]);return n}(this._baseInstance),"<br/>"):"",i)n+="&nbsp;&nbsp;&nbsp;&nbsp;".concat(a,": ").concat(i[a],"<br/>");function s(e){if(!e.firstDrawable||!e.lastDrawable)return"";var n=e.domDrawable&&e.domDrawable.blocks,i='<div style="margin-left: '.concat(20*t,'px">');if(i+=e.toString(),n||(i+=" (".concat(e.drawableCount," drawables)")),i+="</div>",t+=1,n)for(var r=0;r<e.domDrawable.blocks.length;r++)i+=s(e.domDrawable.blocks[r]);return t-=1,i}if(this._rootBackbone){n+='<div style="'.concat(e,'">Block Summary</div>');for(var o=0;o<this._rootBackbone.blocks.length;o++)n+=s(this._rootBackbone.blocks[o])}function l(e){var t="";function n(e){t+=' <span style="color: #008">'.concat(e,"</span>")}var i=e.node;t+=e.id,t+=" ".concat(i.constructor.name?i.constructor.name:"?"),t+=' <span style="font-weight: '.concat(i.isPainted()?"bold":"normal",'">').concat(i.id,"</span>"),t+=i.getDebugHTMLExtras(),i.visible||n("invis"),e.visible||n("I-invis"),e.relativeVisible||n("I-rel-invis"),e.selfVisible||n("I-self-invis"),e.fittability.ancestorsFittable||n("nofit-ancestor"),e.fittability.selfFittable||n("nofit-self"),!0===i.pickable&&n("pickable"),!1===i.pickable&&n("unpickable"),e.trail.isPickable()&&n('<span style="color: #808">hits</span>'),i.getEffectiveCursor()&&n("effectiveCursor:".concat(i.getEffectiveCursor())),i.clipArea&&n("clipArea"),i.mouseArea&&n("mouseArea"),i.touchArea&&n("touchArea"),i.getInputListeners().length&&n("inputListeners"),i.getRenderer()&&n("renderer:".concat(i.getRenderer())),i.isLayerSplit()&&n("layerSplit"),i.opacity<1&&n("opacity:".concat(i.opacity)),i.disabledOpacity<1&&n("disabledOpacity:".concat(i.disabledOpacity)),i._boundsEventCount>0&&n('<span style="color: #800">boundsListen:'.concat(i._boundsEventCount,":").concat(i._boundsEventSelfCount,"</span>"));var r="";switch(i.transform.getMatrix().type){case si.IDENTITY:r="";break;case si.TRANSLATION_2D:r="translated";break;case si.SCALING:r="scale";break;case si.AFFINE:r="affine";break;case si.OTHER:r="other";break;default:throw new Error("invalid matrix type: ".concat(i.transform.getMatrix().type))}return r&&(t+=' <span style="color: #88f" title="'.concat(i.transform.getMatrix().toString().replace("\n","&#10;"),'">').concat(r,"</span>")),t+=' <span style="color: #888">[Trail '.concat(e.trail.indices.join("."),"]</span>"),t+=' <span style="color: #8c8">'.concat(i._rendererSummary.bitmask.toString(16)).concat(i._rendererBitmask!==Zr.bitmaskNodeDefault?" (".concat(i._rendererBitmask.toString(16),")"):"","</span>")}function u(e){var t=e.toString();return e.visible&&(t="<strong>".concat(t,"</strong>")),e.dirty&&(t+=e.dirty?' <span style="color: #c00;">[x]</span>':""),e.fittable||(t+=e.dirty?' <span style="color: #0c0;">[no-fit]</span>':""),t}function c(e){var i='<div style="margin-left: '.concat(20*t,'px">');function r(e,t){i+=' <span style="color: #888">'.concat(e,":").concat(u(t),"</span>")}i+=l(e),e.selfDrawable&&r("self",e.selfDrawable),e.groupDrawable&&r("group",e.groupDrawable),e.sharedCacheDrawable&&r("sharedCache",e.sharedCacheDrawable),n+=i+="</div>",t+=1,_.each(e.children,(function(e){c(e)})),t-=1}return this._baseInstance&&(n+='<div style="'.concat(e,'">Root Instance Tree</div>'),c(this._baseInstance)),_.each(this._sharedCanvasInstances,(function(t){n+='<div style="'.concat(e,'">Shared Canvas Instance Tree</div>'),c(t)})),this._rootBackbone&&(n+='<div style="font-weight: bold;">Root Drawable Tree</div>',function e(i){var r='<div style="margin-left: '.concat(20*t,'px">');if(r+=u(i),i.instance?(r+=' <span style="color: #0a0;">('.concat(i.instance.trail.toPathString(),")</span>"),r+="&nbsp;&nbsp;&nbsp;".concat(l(i.instance))):i.backboneInstance&&(r+=' <span style="color: #a00;">('.concat(i.backboneInstance.trail.toPathString(),")</span>"),r+="&nbsp;&nbsp;&nbsp;".concat(l(i.backboneInstance))),n+=r+="</div>",i.blocks)t+=1,_.each(i.blocks,(function(t){e(t)})),t-=1;else if(i.firstDrawable&&i.lastDrawable){t+=1;for(var a=i.firstDrawable;a!==i.lastDrawable;a=a.nextDrawable)e(a);e(i.lastDrawable),t-=1}}(this._rootBackbone)),n}},{key:"getDebugURI",value:function(){return"data:text/html;charset=utf-8,".concat(encodeURIComponent("".concat('<!DOCTYPE html><html lang="en"><head><title>Scenery Debug Snapshot</title></head><body style="font-size: 12px;">').concat(this.getDebugHTML(),"</body>")+"</html>"))}},{key:"popupDebug",value:function(){window.open(this.getDebugURI())}},{key:"iframeDebug",value:function(){var e=document.createElement("iframe");e.width=""+window.innerWidth,e.height=""+window.innerHeight,e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.zIndex="10000",document.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.write(this.getDebugHTML()),e.contentWindow.document.close(),e.contentWindow.document.body.style.background="white";var t=document.createElement("button");t.style.position="absolute",t.style.top="0",t.style.right="0",t.style.zIndex="10001",document.body.appendChild(t),t.textContent="close",["pointerdown","click","touchdown"].forEach((function(n){t.addEventListener(n,(function(){document.body.removeChild(e),document.body.removeChild(t)}),!0)}))}},{key:"getPDOMDebugHTML",value:function(){var e="",t="font-weight: bold; font-size: 120%; margin-top: 5px;",n="&nbsp;&nbsp;&nbsp;&nbsp;";e+='<div style="'.concat(t,'">Accessible Instances</div><br>'),function t(i,r){e+="".concat(r+Yl("".concat(i.isRootInstance?"":i.node.tagName," ").concat(i.toString())),"<br>"),i.children.forEach((function(e){t(e,r+n)}))}(this._rootPDOMInstance,""),e+='<br><div style="'.concat(t,'">Parallel DOM</div><br>');for(var i=this._rootPDOMInstance.peer.primarySibling.outerHTML,r=(i=i.replace(/></g,">\n<")).split("\n"),a="",s=0;s<r.length;s++){var o=r[s],l="</"===o.slice(0,2);l&&(a=a.slice(n.length)),e+="".concat(a+Yl(o),"<br>"),l||(a+=n)}return e}},{key:"foreignObjectRasterization",value:function(t){var n={},i=0;function r(e){e.id||(e.id="unknown-canvas-".concat(i++)),n[e.id]=e.toDataURL()}!function e(t){if(t instanceof uy)_.each(t.blocks,(function(t){e(t)}));else if(t instanceof Rg&&t.firstDrawable&&t.lastDrawable){for(var n=t.firstDrawable;n!==t.lastDrawable;n=n.nextDrawable)e(n);e(t.lastDrawable),(t instanceof Hg||t instanceof Jg)&&t.canvas&&t.canvas instanceof window.HTMLCanvasElement&&r(t.canvas)}Pm&&t instanceof Pm&&(t.domElement instanceof window.HTMLCanvasElement&&r(t.domElement),Array.prototype.forEach.call(t.domElement.getElementsByTagName("canvas"),(function(e){r(e)})))}(this._rootBackbone);var a=document.implementation.createHTMLDocument("");a.documentElement.innerHTML=this.domElement.outerHTML,a.documentElement.setAttribute("xmlns",a.documentElement.namespaceURI),a.documentElement.appendChild(document.createElement("style")).innerHTML=".".concat(Ts.ROOT_CLASS_NAME," { display:none; } ");var s=a.documentElement.getElementsByTagName("canvas");s=Array.prototype.slice.call(s);for(var o=0;o<s.length;o++){var l=s[o],u=l.style.cssText,c=a.createElement("img"),h=n[l.id];c.src=h,c.setAttribute("style",u),l.parentNode.replaceChild(c,l)}for(var d=this.width,p=this.height,f=function(){e.elementToSVGDataURL(a.documentElement,d,p,t)},m=0,g=!1,y=Array.prototype.slice.call(a.documentElement.getElementsByTagName("image")),v=function(e){var t,n,i=y[e],r=i.getAttribute("xlink:href");"data:"!==r.slice(0,5)&&(m++,g=!0,t=new window.Image,n=i,t.onload=function(){var e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),n.setAttribute("xlink:href",e.toDataURL()),0==--m&&f()},t.onerror=function(){0==--m&&f()},t.src=r)},A=0;A<y.length;A++)v(A);g||f()}},{key:"popupRasterization",value:function(){this.foreignObjectRasterization((function(e){e&&window.open(e)}))}},{key:"getTrailFromPDOMIndicesString",value:function(e){if(!this._rootPDOMInstance)return null;for(var t=this._rootPDOMInstance,n=e.split(Gs.PDOM_UNIQUE_ID_SEPARATOR),i=0;i<n.length;i++){var r=Number(n[i]);if(!(t=t.children[r]))return null}return t&&t.trail?t.trail:null}},{key:"dispose",value:function(){this._input&&this.detachEvents(),this._rootNode.removeRootedDisplay(this),this._accessible&&(ju.keydownEmitter.removeListener(this._boundHandleFullScreenNavigation),this._rootPDOMInstance.dispose()),this._focusOverlay&&this._focusOverlay.dispose(),this.sizeProperty.dispose(),this._baseInstance&&this._baseInstance.dispose(),this.descriptionUtteranceQueue.dispose(),this.focusManager&&this.focusManager.dispose()}}],[{key:"elementToSVGDataURL",value:function(e,t,n,i){var r=document.createElement("canvas"),a=r.getContext("2d");r.width=t,r.height=n;var s=(new window.XMLSerializer).serializeToString(e),o='<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(t,'" height="').concat(n,'">')+'<foreignObject width="100%" height="100%">'+'<div xmlns="http://www.w3.org/1999/xhtml">'.concat(s,"</div>")+"</foreignObject></svg>",l=new window.Image;l.onload=function(){a.drawImage(l,0,0),i(r.toDataURL())},l.onerror=function(){i(null)};var u=new window.TextEncoderLite("utf-8").encode(o),c=window.fromByteArray(u);l.src="data:image/svg+xml;base64,".concat(c)}},{key:"assertSubtreeDisposed",value:function(e){}},{key:"addInputListener",value:function(t){_.includes(e.inputListeners,t)||e.inputListeners.push(t)}},{key:"removeInputListener",value:function(t){e.inputListeners.splice(_.indexOf(e.inputListeners,t),1)}},{key:"interruptInput",value:function(){for(var t=e.inputListeners.slice(0),n=0;n<t.length;n++){var i=t[n];i.interrupt&&i.interrupt()}}}]),e}();Cr.register("Display",Cy),Cy.userGestureEmitter=new Et,Cy.inputListeners=[];var xy={},Py=0,Ty=new U("IndexedNodeIO",{valueType:jo,documentation:"Node that can be moved forward/back by index, which specifies z-order and/or layout order",supertype:jo.NodeIO,toStateObject:function(e){var t={};return e.parents[0]?t.index=e.parents[0].indexOfChild(e):t.index=null,t},applyState:function(e,t){var n=e.parents[0];if(n&&t.index){var i=n.children;i[n.indexOfChild(e)]=i[t.index],i[t.index]=e,n.setChildren(i)}},stateSchema:{index:Qe(Lt)},methods:{linkIndex:{returnType:Lt,parameterTypes:[We(Je,[Lt])],documentation:"Following the PropertyIO.link pattern, subscribe for notifications when the index in the parent changes, and receive a callback with the current value.  The return value is a numeric ID for use with clearLinkIndex.",implementation:function(e){var t=this,n=function(){var n=t.parents[0].indexOfChild(t);e(n)};this.parents[0].childrenChangedEmitter.addListener(n),n();var i=Py;return xy[i]=n,Py++,i}},clearLinkIndex:{returnType:Je,parameterTypes:[Lt],documentation:"Unlink a listener that has been added using linkIndex, by its numerical ID (like setTimeout/clearTimeout)",implementation:function(e){var t=xy[e];this.parents[0].childrenChangedEmitter.removeListener(t),delete xy[e]}},moveForward:{returnType:Je,parameterTypes:[],implementation:function(){return this.moveForward()},documentation:"Move this node one index forward in each of its parents.  If the node is already at the front, this is a no-op."},moveBackward:{returnType:Je,parameterTypes:[],implementation:function(){return this.moveBackward()},documentation:"Move this node one index backward in each of its parents.  If the node is already at the back, this is a no-op."}}});Cr.register("IndexedNodeIO",Ty);var My=Ty,Ly=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){_classCallCheck(this,n),r=A({nodeTandem:xe.REQUIRED},r);var a=new pt(!0,{tandem:r.nodeTandem.createTandem("visibleProperty")});return t.call(this,[a].concat(_toConsumableArray(e)),(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e&&i.apply(void 0,n)}))}return _createClass(n)}(Ut);Cr.register("PhetioControlledVisibilityProperty",Ly);var Iy=new c("sceneryPhet"),Ry=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s){var o;if(_classCallCheck(this,n),o=t.call(this),r!==e||a!==i){var l=n.getArrowShapePoints(e,i,r,a,[],s);o.moveTo(l[0].x,l[0].y);var u=_.tail(l);_.each(u,(function(e){return o.lineTo(e.x,e.y)})),o.close()}return o}return _createClass(n,null,[{key:"getArrowShapePoints",value:function(e,t,n,i,r,a){var s=S()({tailWidth:5,headWidth:10,headHeight:10,fractionalHeadHeight:.5,doubleHead:!1,isHeadDynamic:!1,scaleTailToo:!1},a);if(r||(r=[]),n===e&&i===t)r.length=0;else{var o=new pn(n-e,i-t),l=o.magnitude,u=s.headWidth,c=s.headHeight,h=s.tailWidth;if(s.isHeadDynamic){var d=s.fractionalHeadHeight*l;s.headHeight>d&&(c=d,s.scaleTailToo&&(u=s.headWidth*c/s.headHeight,h=s.tailWidth*c/s.headHeight))}else c=Math.min(s.headHeight,s.doubleHead?.35*l:.99*l);var p=0,f=o.normalized(),m=f.rotated(Math.PI/2),g=function(n,i){var a=f.x*n+m.x*i+e,s=f.y*n+m.y*i+t;r[p]?(r[p].x=a,r[p].y=s):r.push(new pn(a,s)),p++};s.doubleHead?(g(0,0),g(c,u/2),g(c,h/2)):g(0,h/2),g(l-c,h/2),g(l-c,u/2),g(l,0),g(l-c,-u/2),g(l-c,-h/2),s.doubleHead?(g(c,-h/2),g(c,-u/2)):g(0,-h/2),p<r.length&&(r.length=p)}return r}}]),n}(Ni);Iy.register("ArrowShape",Ry);var Dy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s){var o;_classCallCheck(this,n);var l=S()({headHeight:10,headWidth:10,tailWidth:5,isHeadDynamic:!1,scaleTailToo:!1,fractionalHeadHeight:.5,doubleHead:!1,fill:"black",stroke:"black",lineWidth:1,tandem:xe.OPTIONAL},s);return(o=t.call(this,null)).options=l,o.shapePoints=[],o.tailX=e,o.tailY=i,o.tipX=r,o.tipY=a,o.setTailAndTip(e,i,r,a),o.mutate(l),o}return _createClass(n,[{key:"updateShapePoints",value:function(){var e=this.shapePoints.length;return this.shapePoints=Ry.getArrowShapePoints(this.tailX,this.tailY,this.tipX,this.tipY,this.shapePoints,this.options),this.shapePoints.length!==e}},{key:"updateShape",value:function(){var e=new Ni;if(this.shapePoints.length>1){e.moveToPoint(this.shapePoints[0]);for(var t=1;t<this.shapePoints.length;t++)e.lineToPoint(this.shapePoints[t]);e.close()}this.shape=e}},{key:"setTailAndTip",value:function(e,t,n,i){this.tailX=e,this.tailY=t,this.tipX=n,this.tipY=i;var r=this.updateShapePoints();!this.shape||r?this.updateShape():this.shape.invalidatePoints()}},{key:"setTail",value:function(e,t){this.setTailAndTip(e,t,this.tipX,this.tipY)}},{key:"setTip",value:function(e,t){this.setTailAndTip(this.tailX,this.tailY,e,t)}},{key:"setTailWidth",value:function(e){this.options.tailWidth=e,this.updateShapePoints(),this.updateShape()}},{key:"setDoubleHead",value:function(e){this.options.doubleHead=e,this.updateShapePoints(),this.updateShape()}}]),n}(Hl);Iy.register("ArrowNode",Dy);var Ny=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({value:0,extension:20,doubleHead:!0,headHeight:10,headWidth:10,tailWidth:2},r);(a=t.call(this,0,0,0,0,s)).chartTransform=e,a.axisOrientation=i,a.value=s.value,a.extension=s.extension,a.update();var o=function(){return a.update()};return e.changedEmitter.addListener(o),a.disposeAxisNode=function(){return e.changedEmitter.removeListener(o)},a}return _createClass(n,[{key:"update",value:function(){var e=this.chartTransform.modelToView(this.axisOrientation.opposite,this.value);this.axisOrientation===In.VERTICAL?(this.setTailAndTip(e,0-this.extension,e,this.chartTransform.viewHeight+this.extension),this.setVisible(e>=0&&e<=this.chartTransform.viewWidth)):(this.setTailAndTip(0-this.extension,e,this.chartTransform.viewWidth+this.extension,e),this.setVisible(e>=0&&e<=this.chartTransform.viewHeight))}},{key:"dispose",value:function(){this.disposeAxisNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Dy);Mn.register("AxisArrowNode",Ny);var qy=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({value:0,extension:0,stroke:"black",lineWidth:2},r);(a=t.call(this,0,0,0,0,s)).chartTransform=e,a.axisOrientation=i,a.value=s.value,a.extension=s.extension,a.update();var o=function(){return a.update()};return e.changedEmitter.addListener(o),a.disposeAxisLine=function(){return e.changedEmitter.removeListener(o)},a}return _createClass(n,[{key:"update",value:function(){var e=this.chartTransform.modelToView(this.axisOrientation.opposite,this.value);this.axisOrientation===In.VERTICAL?(this.setLine(e,0-this.extension,e,this.chartTransform.viewHeight+this.extension),this.setVisible(e>=0&&e<=this.chartTransform.viewWidth)):(this.setLine(0-this.extension,e,this.chartTransform.viewWidth+this.extension,e),this.setVisible(e>=0&&e<=this.chartTransform.viewHeight))}},{key:"dispose",value:function(){this.disposeAxisLine(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(tu);Mn.register("AxisLine",qy);var Oy={aa:{name:"Afar",localizedName:"Afar",direction:"ltr"},ab:{name:"Abkhazian",localizedName:"Abkhazian",direction:"ltr"},ae:{name:"Avestan",localizedName:"Avestan",direction:"rtl"},af:{name:"Afrikaans",localizedName:"Afrikaans",direction:"ltr"},ak:{name:"Akan",localizedName:"Akan",direction:"ltr"},am:{name:"Amharic",localizedName:"Amharic",direction:"ltr"},an:{name:"Aragonese",localizedName:"Aragonese",direction:"ltr"},ar:{name:"Arabic",localizedName:"العربية",direction:"rtl"},ar_MA:{name:"Arabic, Morocco",localizedName:"العربية (المغرب)",direction:"rtl"},ar_SA:{name:"Arabic, Saudi Arabia",localizedName:"العربية (السعودية)",direction:"rtl"},as:{name:"Assamese",localizedName:"Assamese",direction:"ltr"},av:{name:"Avaric",localizedName:"Avaric",direction:"ltr"},ay:{name:"Aymara",localizedName:"Aymara",direction:"ltr"},az:{name:"Azerbaijani",localizedName:"Azerbaijani",direction:"ltr"},ba:{name:"Bashkir",localizedName:"Bashkir",direction:"ltr"},be:{name:"Belarusian",localizedName:"беларускі",direction:"ltr"},bg:{name:"Bulgarian",localizedName:"български",direction:"ltr"},bh:{name:"Bihari",localizedName:"Bihari",direction:"ltr"},bi:{name:"Bislama",localizedName:"Bislama",direction:"ltr"},bm:{name:"Bambara",localizedName:"Bambara",direction:"ltr"},bn:{name:"Bengali",localizedName:"Bengali",direction:"ltr"},bo:{name:"Tibetan",localizedName:"Tibetan",direction:"ltr"},br:{name:"Breton",localizedName:"Breton",direction:"ltr"},bs:{name:"Bosnian",localizedName:"Bosnian",direction:"ltr"},ca:{name:"Catalan",localizedName:"català",direction:"ltr"},ce:{name:"Chechen",localizedName:"Chechen",direction:"ltr"},ch:{name:"Chamorro",localizedName:"Chamorro",direction:"ltr"},co:{name:"Corsican",localizedName:"Corsican",direction:"ltr"},cr:{name:"Cree",localizedName:"Cree",direction:"ltr"},cs:{name:"Czech",localizedName:"čeština",direction:"ltr"},cu:{name:"Church Slavic",localizedName:"Church Slavic",direction:"ltr"},cv:{name:"Chuvash",localizedName:"Chuvash",direction:"ltr"},cy:{name:"Welsh",localizedName:"Welsh",direction:"ltr"},da:{name:"Danish",localizedName:"Dansk",direction:"ltr"},de:{name:"German",localizedName:"Deutsch",direction:"ltr"},dv:{name:"Divehi",localizedName:"Divehi",direction:"ltr"},dz:{name:"Dzongkha",localizedName:"Dzongkha",direction:"ltr"},ee:{name:"Ewe",localizedName:"Ewe",direction:"ltr"},el:{name:"Greek",localizedName:"Ελληνικά",direction:"ltr"},en:{name:"English",localizedName:"English",direction:"ltr"},en_CA:{name:"English, Canada",localizedName:"English (Canada)",direction:"ltr"},en_GB:{name:"English, United Kingdom",localizedName:"English (United Kingdom)",direction:"ltr"},eo:{name:"Esperanto",localizedName:"Esperanto",direction:"ltr"},es:{name:"Spanish",localizedName:"español",direction:"ltr"},es_CO:{name:"Spanish, Colombia",localizedName:"español (Colombia)",direction:"ltr"},es_CR:{name:"Spanish, Costa Rica",localizedName:"español (Costa Rica)",direction:"ltr"},es_ES:{name:"Spanish, Spain",localizedName:"español (España)",direction:"ltr"},es_MX:{name:"Spanish, Mexico",localizedName:"español (México)",direction:"ltr"},es_PE:{name:"Spanish, Peru",localizedName:"español (Perú)",direction:"ltr"},et:{name:"Estonian",localizedName:"Eesti",direction:"ltr"},eu:{name:"Basque",localizedName:"Basque",direction:"ltr"},fa:{name:"Persian",localizedName:"Persian",direction:"rtl"},ff:{name:"Fulah",localizedName:"Fulah",direction:"ltr"},fi:{name:"Finnish",localizedName:"suomi",direction:"ltr"},fj:{name:"Fijian",localizedName:"Fijian",direction:"ltr"},fo:{name:"Faroese",localizedName:"Faroese",direction:"ltr"},fr:{name:"French",localizedName:"français",direction:"ltr"},fu:{name:"Friulian",localizedName:"fu",direction:"ltr"},fy:{name:"Western Frisian",localizedName:"Frisian",direction:"ltr"},ga:{name:"Irish",localizedName:"Gaeilge",direction:"ltr"},gd:{name:"Scottish Gaelic",localizedName:"Scottish Gaelic",direction:"ltr"},gl:{name:"Galician",localizedName:"Gallegan",direction:"ltr"},gn:{name:"Guarani",localizedName:"Guarani",direction:"ltr"},gu:{name:"Gujarati",localizedName:"Gujarati",direction:"ltr"},gv:{name:"Manx",localizedName:"Manx",direction:"ltr"},ha:{name:"Hausa",localizedName:"Hausa",direction:"ltr"},hi:{name:"Hindi",localizedName:"हिंदी",direction:"ltr"},ho:{name:"Hiri Motu",localizedName:"Hiri Motu",direction:"ltr"},hr:{name:"Croatian",localizedName:"hrvatski",direction:"ltr"},ht:{name:"Haitian",localizedName:"Haitian",direction:"ltr"},hu:{name:"Hungarian",localizedName:"magyar",direction:"ltr"},hy:{name:"Armenian",localizedName:"Armenian",direction:"ltr"},hz:{name:"Herero",localizedName:"Herero",direction:"ltr"},ia:{name:"Interlingua",localizedName:"Interlingua",direction:"ltr"},ie:{name:"Interlingue",localizedName:"Interlingue",direction:"ltr"},ig:{name:"Igbo",localizedName:"Igbo",direction:"ltr"},ii:{name:"Sichuan Yi",localizedName:"Sichuan Yi",direction:"ltr"},ik:{name:"Inupiaq",localizedName:"Inupiaq",direction:"ltr"},in:{name:"Indonesian",localizedName:"Bahasa Indonesia",direction:"ltr"},io:{name:"Ido",localizedName:"Ido",direction:"ltr"},is:{name:"Icelandic",localizedName:"íslenska",direction:"ltr"},it:{name:"Italian",localizedName:"italiano",direction:"ltr"},iu:{name:"Inuktitut",localizedName:"Inuktitut",direction:"ltr"},iw:{name:"Hebrew",localizedName:"עברית",direction:"rtl"},ja:{name:"Japanese",localizedName:"日本語",direction:"ltr"},ji:{name:"Yiddish",localizedName:"Yiddish",direction:"ltr"},jv:{name:"Javanese",localizedName:"Javanese",direction:"ltr"},ka:{name:"Georgian",localizedName:"Georgian",direction:"ltr"},kg:{name:"Kongo",localizedName:"Kongo",direction:"ltr"},ki:{name:"Kikuyu",localizedName:"Kikuyu",direction:"ltr"},kj:{name:"Kwanyama",localizedName:"Kwanyama",direction:"ltr"},kk:{name:"Kazakh",localizedName:"Kazakh",direction:"ltr"},kl:{name:"Kalaallisut",localizedName:"Greenlandic",direction:"ltr"},km:{name:"Khmer",localizedName:"Khmer",direction:"ltr"},kn:{name:"Kannada",localizedName:"Kannada",direction:"ltr"},ko:{name:"Korean",localizedName:"한국어",direction:"ltr"},kr:{name:"Kanuri",localizedName:"Kanuri",direction:"ltr"},ks:{name:"Kashmiri",localizedName:"Kashmiri",direction:"ltr"},ku:{name:"Kurdish",localizedName:"Kurdish",direction:"ltr"},ku_TR:{name:"Kurdish, Turkey",localizedName:"Kurdish (Turkey)",direction:"ltr"},kv:{name:"Komi",localizedName:"Komi",direction:"ltr"},kw:{name:"Cornish",localizedName:"Cornish",direction:"ltr"},ky:{name:"Kirghiz",localizedName:"Kirghiz",direction:"ltr"},la:{name:"Latin",localizedName:"Latin",direction:"ltr"},lb:{name:"Luxembourgish",localizedName:"Luxembourgish",direction:"ltr"},lg:{name:"Ganda",localizedName:"Ganda",direction:"ltr"},li:{name:"Limburgish",localizedName:"Limburgish",direction:"ltr"},lk:{name:"Lakota",localizedName:"Lakota",direction:"ltr"},ln:{name:"Lingala",localizedName:"Lingala",direction:"ltr"},lo:{name:"Lao",localizedName:"Lao",direction:"ltr"},lt:{name:"Lithuanian",localizedName:"Lietuvių",direction:"ltr"},lu:{name:"Luba-Katanga",localizedName:"Luba-Katanga",direction:"ltr"},lv:{name:"Latvian",localizedName:"Latviešu",direction:"ltr"},mg:{name:"Malagasy",localizedName:"Malagasy",direction:"ltr"},mh:{name:"Marshallese",localizedName:"Marshallese",direction:"ltr"},mi:{name:"Maori",localizedName:"Maori",direction:"ltr"},mk:{name:"Macedonian",localizedName:"македонски",direction:"ltr"},ml:{name:"Malayalam",localizedName:"Malayalam",direction:"ltr"},mn:{name:"Mongolian",localizedName:"Mongolian",direction:"ltr"},mo:{name:"Moldavian",localizedName:"Moldavian",direction:"ltr"},mr:{name:"Marathi",localizedName:"Marathi",direction:"ltr"},ms:{name:"Malay",localizedName:"Bahasa Melayu",direction:"ltr"},mt:{name:"Maltese",localizedName:"Malti",direction:"ltr"},my:{name:"Burmese",localizedName:"Burmese",direction:"ltr"},na:{name:"Nauru",localizedName:"Nauru",direction:"ltr"},nb:{name:"Norwegian Bokmal",localizedName:"Norwegian Bokmål",direction:"ltr"},nd:{name:"North Ndebele",localizedName:"North Ndebele",direction:"ltr"},ne:{name:"Nepali",localizedName:"Nepali",direction:"ltr"},ng:{name:"Ndonga",localizedName:"Ndonga",direction:"ltr"},nl:{name:"Dutch",localizedName:"Nederlands",direction:"ltr"},nn:{name:"Norwegian Nynorsk",localizedName:"Norwegian Nynorsk",direction:"ltr"},nr:{name:"South Ndebele",localizedName:"South Ndebele",direction:"ltr"},nv:{name:"Navajo",localizedName:"Navajo",direction:"ltr"},ny:{name:"Chichewa",localizedName:"Nyanja",direction:"ltr"},oc:{name:"Occitan",localizedName:"Occitan",direction:"ltr"},oj:{name:"Ojibwa",localizedName:"Ojibwa",direction:"ltr"},om:{name:"Oromo",localizedName:"Oromo",direction:"ltr"},or:{name:"Oriya",localizedName:"Oriya",direction:"ltr"},os:{name:"Ossetian",localizedName:"Ossetian",direction:"ltr"},pa:{name:"Panjabi",localizedName:"Panjabi",direction:"ltr"},pi:{name:"Pali",localizedName:"Pali",direction:"ltr"},pl:{name:"Polish",localizedName:"polski",direction:"ltr"},ps:{name:"Pashto",localizedName:"Pushto",direction:"ltr"},pt:{name:"Portuguese",localizedName:"português",direction:"ltr"},pt_BR:{name:"Portuguese, Brazil",localizedName:"português (Brasil)",direction:"ltr"},qu:{name:"Quechua",localizedName:"Quechua",direction:"ltr"},rm:{name:"Raeto-Romance",localizedName:"Raeto-Romance",direction:"ltr"},rn:{name:"Kirundi",localizedName:"Rundi",direction:"ltr"},ro:{name:"Romanian",localizedName:"română",direction:"ltr"},ru:{name:"Russian",localizedName:"русский",direction:"ltr"},rw:{name:"Kinyarwanda",localizedName:"Kinyarwanda",direction:"ltr"},ry:{name:"Rusyn",localizedName:"ry",direction:"ltr"},sa:{name:"Sanskrit",localizedName:"Sanskrit",direction:"ltr"},sc:{name:"Sardinian",localizedName:"Sardinian",direction:"ltr"},sd:{name:"Sindhi",localizedName:"Sindhi",direction:"ltr"},se:{name:"Northern Sami",localizedName:"Northern Sami",direction:"ltr"},sg:{name:"Sango",localizedName:"Sango",direction:"ltr"},sh:{name:"Serbo-Croatian",localizedName:"sh",direction:"ltr"},si:{name:"Sinhalese",localizedName:"Sinhalese",direction:"ltr"},sk:{name:"Slovak",localizedName:"Slovenčina",direction:"ltr"},sl:{name:"Slovenian",localizedName:"Slovenščina",direction:"ltr"},sm:{name:"Samoan",localizedName:"Samoan",direction:"ltr"},sn:{name:"Shona",localizedName:"Shona",direction:"ltr"},so:{name:"Somali",localizedName:"Somali",direction:"ltr"},sq:{name:"Albanian",localizedName:"shqipe",direction:"ltr"},sr:{name:"Serbian",localizedName:"Српски",direction:"ltr"},ss:{name:"Swati",localizedName:"Swati",direction:"ltr"},st:{name:"Sotho",localizedName:"Southern Sotho",direction:"ltr"},su:{name:"Sundanese",localizedName:"Sundanese",direction:"ltr"},sv:{name:"Swedish",localizedName:"svenska",direction:"ltr"},sw:{name:"Swahili",localizedName:"Swahili",direction:"ltr"},ta:{name:"Tamil",localizedName:"Tamil",direction:"ltr"},te:{name:"Telugu",localizedName:"Telugu",direction:"ltr"},tg:{name:"Tajik",localizedName:"Tajik",direction:"ltr"},th:{name:"Thai",localizedName:"ไทย",direction:"ltr"},ti:{name:"Tigrinya",localizedName:"Tigrinya",direction:"ltr"},tk:{name:"Turkmen",localizedName:"Turkmen",direction:"ltr"},tl:{name:"Tagalog",localizedName:"Tagalog",direction:"ltr"},tn:{name:"Tswana",localizedName:"Tswana",direction:"ltr"},to:{name:"Tonga",localizedName:"Tonga",direction:"ltr"},tr:{name:"Turkish",localizedName:"Türkçe",direction:"ltr"},ts:{name:"Tsonga",localizedName:"Tsonga",direction:"ltr"},tt:{name:"Tatar",localizedName:"Tatar",direction:"ltr"},tw:{name:"Twi",localizedName:"Twi",direction:"ltr"},ty:{name:"Tahitian",localizedName:"Tahitian",direction:"ltr"},ug:{name:"Uighur",localizedName:"Uighur",direction:"ltr"},uk:{name:"Ukrainian",localizedName:"українська",direction:"ltr"},ur:{name:"Urdu",localizedName:"Urdu",direction:"rtl"},uz:{name:"Uzbek",localizedName:"Uzbek",direction:"ltr"},ve:{name:"Venda",localizedName:"Venda",direction:"ltr"},vi:{name:"Vietnamese",localizedName:"Tiếng Việt",direction:"ltr"},vo:{name:"Volapuk",localizedName:"Volapük",direction:"ltr"},wa:{name:"Walloon",localizedName:"Walloon",direction:"ltr"},wo:{name:"Wolof",localizedName:"Wolof",direction:"ltr"},xh:{name:"Xhosa",localizedName:"Xhosa",direction:"ltr"},yo:{name:"Yoruba",localizedName:"Yoruba",direction:"ltr"},za:{name:"Zhuang",localizedName:"Zhuang",direction:"ltr"},zh_CN:{name:"Chinese, Simplified",localizedName:"中文 (中国)",direction:"ltr"},zh_HK:{name:"Chinese, Hong Kong",localizedName:"中文 (香港)",direction:"ltr"},zh_TW:{name:"Chinese, Traditional",localizedName:"中文 (台灣)",direction:"ltr"},zu:{name:"Zulu",localizedName:"Zulu",direction:"ltr"}},By=new c("joist"),Gy=Object.keys(phet.chipper.strings).sort(),Hy=function(e){return e&&Oy[e]},Fy="string"==typeof phet.chipper.locale?phet.chipper.locale.slice(0,2):void 0,Yy=Hy(phet.chipper.locale)?phet.chipper.locale:Hy(Fy)?Fy:"en";phet.chipper.locale=Yy;var zy=new(function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n,[{key:"unguardedSet",value:function(e){Gy.includes(e)&&_get(_getPrototypeOf(n.prototype),"unguardedSet",this).call(this,e)}}]),n}(wn))(Yy,{tandem:xe.GENERAL_MODEL.createTandem("localeProperty"),phetioFeatured:!0,validValues:Gy});if(phet.chipper.queryParameters.keyboardLocaleSwitcher){var Uy=xa.KEY_I,Wy=xa.KEY_U;ju.keydownEmitter.addListener((function(e){var t=function(t){e.preventDefault();var n=(Gy.indexOf(zy.value)+t+Gy.length)%Gy.length;zy.value=Gy[n],console.log(zy.value)};!e.ctrlKey||e.shiftKey||e.metaKey||e.altKey||(xa.isKeyEvent(e,Uy)?t(1):xa.isKeyEvent(e,Wy)&&t(-1))}))}By.register("localeProperty",zy);var jy=zy,Xy=new dt([],{tandem:xe.GENERAL_MODEL.createTandem("fallbackLocalesProperty"),phetioDocumentation:'An ordered list of locales to "fall back" on when a translation is missing for the selected locale, for example: ["es", "de" ]. "en" will always be added to the end of this, because it hasguaranteed full coverage of all translated keys.',phetioFeatured:!0,isValidValue:function(e){return _.every(e,(function(e){return!!Oy[e]}))},phetioValueType:Ye(Te)});By.register("fallbackLocalesProperty",Xy);var Qy=new Ut([jy,Xy],(function(e,t){var n=[e],i=e.slice(0,2);e===i||n.includes(i)||n.push(i);for(var r=0;r<t.length;r++){var a=t[r];n.includes(a)||n.push(a)}n.includes("en")||n.push("en");var s=n.indexOf("en");return n.slice(0,s+1)}));By.register("localeOrderProperty",Qy);var Ky=Qy,Jy=new c("chipper"),Zy="en",$y=function(){function e(t,n,i){var r=this;_classCallCheck(this,e),_defineProperty(this,"localePropertyMap",new Map),_defineProperty(this,"initialValues",{});var a=i&&"boolean"==typeof i.phetioReadOnly?i.phetioReadOnly:B.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioReadOnly,s=!i||"boolean"!=typeof i.phetioFeatured||i.phetioFeatured;this.englishProperty=new st(t),this.initialValues[Zy]=t,this.localeOrderListener=this.onLocaleOrderChange.bind(this),Ky.lazyLink(this.localeOrderListener),this.property=new $t(jy,{derive:function(e){return r.getLocaleSpecificProperty(e)},bidirectional:!0,phetioValueType:Te,phetioState:!1,tandem:n,phetioFeatured:s,phetioReadOnly:a}),tv.push(this)}return _createClass(e,[{key:"setInitialValue",value:function(e,t){this.initialValues[e]=t,this.getLocaleSpecificProperty(e).value=t}},{key:"getStateDelta",value:function(){var e=this,t={};return this.usedLocales.forEach((function(n){var i=e.getRawStringValue(n);null!==i&&i!==e.initialValues[n]&&(t[n]=i)})),t}},{key:"setStateDelta",value:function(e){var t=this;Object.keys(e).forEach((function(e){return t.getLocaleSpecificProperty(e)})),this.usedLocales.forEach((function(n){var i=t.getLocaleSpecificProperty(n),r=void 0!==t.initialValues[n]?t.initialValues[n]:null,a=void 0!==e[n]?e[n]:null;null===a?null===r?i.clearOverride():i.value=r:i.value=a}))}},{key:"getRawStringValue",value:function(e){var t=this.getLocaleSpecificProperty(e);return t instanceof Cn?t.isOverridden?t.value:null:t.value}},{key:"usedLocales",get:function(){return[Zy].concat(_toConsumableArray(this.localePropertyMap.keys()))}},{key:"onLocaleOrderChange",value:function(t){for(var n=[].concat(_toConsumableArray(this.usedLocales),_toConsumableArray(t)),i=n.length-1;i>=0;i--){var r=n[i],a=this.getLocaleSpecificProperty(r);a instanceof Cn&&(a.targetProperty=this.getLocaleSpecificProperty(e.getFallbackLocale(r)))}}},{key:"getLocaleSpecificProperty",value:function(t){return"en"===t?this.englishProperty:(this.localePropertyMap.has(t)||this.localePropertyMap.set(t,new Cn(this.getLocaleSpecificProperty(e.getFallbackLocale(t)))),this.localePropertyMap.get(t))}},{key:"dispose",value:function(){Ky.unlink(this.localeOrderListener),this.property.dispose(),J(tv,this)}}],[{key:"getFallbackLocale",value:function(e){if("en"===e)return"en";var t=Ky.value,n=t.indexOf(e);return n>=0?t[n+1]:e.includes("_")?e.slice(0,2):"en"}}]),e}();Jy.register("LocalizedString",$y);var ev=$y,tv=[];window.phet.chipper.setAllStrings=function(e){tv.forEach((function(t){t.property.value=e}))};var nv=new U("StringStateIO",{isValidValue:function(){return!0},toStateObject:function(){var e={};return tv.forEach((function(t){var n=t.getStateDelta();Object.keys(n).length>0&&(e[t.property.tandem.phetioID]=n)})),{data:e}},stateSchema:{data:Ia},applyState:function(e,t){Object.keys(t.data).forEach((function(e){if(!tv.find((function(t){return t.property.tandem.phetioID===e})))throw new so})),tv.forEach((function(e){e.setStateDelta(t.data[e.property.tandem.phetioID]||{})}))}});Be.create({phetioType:nv,tandem:xe.GENERAL_MODEL.createTandem("stringsState"),phetioState:!0});var iv=function(e){var t="".concat(e,"/"),n=Object.keys(phet.chipper.strings.en).filter((function(e){return e.startsWith(t)}));phet.chipper.usedStringsEN&&(n=n.filter((function(e){return phet.chipper.usedStringsEN.hasOwnProperty(e)})));var i={},r={};return n.forEach((function(n){var a=n.slice(t.length).split("."),s=a[a.length-1],o=a.slice(0,a.length-1),l=r;if(o.forEach((function(e,t){"".concat(t>0?".":"").concat(e),l[e]||(l[e]={}),l=l[e]})),"string"!=typeof l){for(var u=xe.GENERAL_MODEL.createTandem("strings").createTandem(_.camelCase(e)),c=0;c<a.length;c++){var h="a11y"===a[c]?a[c]:_.camelCase(a[c]);if(c===a.length-1){for(var d=h,p=0,f=!0;f;)p++,d="".concat(h).concat(1===p?"":p,"StringProperty"),f=u.hasChild(d);h=d}u=u.createTandem(h)}var m=new ev(phet.chipper.mapString(phet.chipper.strings.en[n]),u,phet.chipper.stringMetadata[n]);i[n]=m,Object.keys(phet.chipper.strings).forEach((function(e){var t=phet.chipper.strings[e][n];"string"==typeof t&&m.setInitialValue(e,phet.chipper.mapString(t))})),l["".concat(s,"StringProperty")]=m.property,m.property.link((function(e){l[s]=e}))}})),r},rv=iv("BAMBOO");Mn.register("BambooStrings",rv);var av={fill:"black"},sv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({barWidth:10,barTailValue:0,pointToPaintableFields:function(e){return av}},r);(a=t.call(this,s)).chartTransform=e,a.barTailValue=s.barTailValue,a.dataSet=i,a.barWidth=s.barWidth,a.pointToPaintableFields=s.pointToPaintableFields,a.rectangles=[],a.setDataSet(i);var o=function(){return a.update()};return e.changedEmitter.addListener(o),a.disposeBarPlot=function(){return e.changedEmitter.removeListener(o)},a}return _createClass(n,[{key:"setDataSet",value:function(e){this.dataSet=e,this.update()}},{key:"update",value:function(){for(;this.rectangles.length<this.dataSet.length;){var e=new iu(0,0,0,0);this.rectangles.push(e),this.addChild(e)}for(;this.rectangles.length>this.dataSet.length;){var t=this.rectangles.pop();this.removeChild(t)}for(var n=0;n<this.rectangles.length;n++){var i=this.chartTransform.modelToViewPosition(new pn(this.dataSet[n].x,this.barTailValue)),r=this.chartTransform.modelToViewPosition(this.dataSet[n]),a=r.y-i.y,s=Math.min(i.y,r.y);this.rectangles[n].setRect(i.x-this.barWidth/2,s,this.barWidth,Math.abs(a));var o=this.pointToPaintableFields(this.dataSet[n]);this.rectangles[n].mutate(o)}}},{key:"dispose",value:function(){this.disposeBarPlot(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);Mn.register("BarPlot",sv);var ov=_createClass((function e(t){_classCallCheck(this,e);var n=S()({visible:!0},t);this.visible=n.visible,this.isDisposed=!1}));Mn.register("CanvasPainter",ov);var lv=ov,uv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({origin:0,clippingType:"strict",stroke:"black",lineDash:[1],lineWidth:1,lineDashOffset:0},a);return(s=t.call(this)).chartTransform=e,s.axisOrientation=i,s.spacing=r,s.origin=o.origin,s.clippingType=o.clippingType,s.stroke=o.stroke,s.lineDash=o.lineDash,s.lineWidth=o.lineWidth,s.lineDashOffset=o.lineDashOffset,s}return _createClass(n,[{key:"setSpacing",value:function(e){this.spacing!==e&&(this.spacing=e)}},{key:"setLineDashOffset",value:function(e){this.lineDashOffset=e}},{key:"paintCanvas",value:function(e){var t=this;e.strokeStyle=this.stroke,e.lineWidth=this.lineWidth,e.beginPath(),e.setLineDash(this.lineDash),e.lineDashOffset=this.lineDashOffset,this.chartTransform.forEachSpacing(this.axisOrientation,this.spacing,this.origin,this.clippingType,(function(n,i){t.axisOrientation===In.VERTICAL?(e.moveTo(0,i),e.lineTo(t.chartTransform.viewWidth,i)):(e.moveTo(i,0),e.lineTo(i,t.chartTransform.viewHeight))})),e.stroke()}}]),n}(lv);Mn.register("CanvasGridLineSet",uv);var cv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({stroke:"black",lineWidth:1},r);return(a=t.call(this)).chartTransform=e,a.dataSet=i,a.lineWidth=s.lineWidth,a.strokeCSS=null,a.setStroke(s.stroke),a}return _createClass(n,[{key:"setStroke",value:function(e){this.strokeCSS=e instanceof Rr?e.toCSS():e}},{key:"stroke",set:function(e){this.setStroke(e)}},{key:"dispose",value:function(){this.isDisposed=!0}},{key:"setDataSet",value:function(e){this.dataSet=e}},{key:"paintCanvas",value:function(e){if(e.beginPath(),this.strokeCSS){e.strokeStyle=this.strokeCSS,e.lineWidth=this.lineWidth;for(var t=!0,n=this.dataSet.length,i=0;i<n;i++){var r=this.dataSet[i];if(r){var a=this.chartTransform.modelToViewPosition(r);t?(e.moveTo(a.x,a.y),t=!1):e.lineTo(a.x,a.y)}else t=!0}e.stroke()}}}]),n}(lv);Mn.register("CanvasLinePlot",cv);var hv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({canvasBounds:new jn(0,0,e.viewWidth,e.viewHeight)},r);(a=t.call(this,s)).chartTransform=e,a.painters=i,a.update();var o=function(){return a.update()};return e.changedEmitter.addListener(o),a.disposeChartCanvasLinePlot=function(){return e.changedEmitter.removeListener(o)},a}return _createClass(n,[{key:"setPainters",value:function(e){this.painters=e,this.update()}},{key:"update",value:function(){this.invalidatePaint()}},{key:"paintCanvas",value:function(e){this.painters.forEach((function(t){t.visible&&(e.save(),t.paintCanvas(e),e.restore())}))}},{key:"dispose",value:function(){this.disposeChartCanvasLinePlot(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Zl);Mn.register("ChartCanvasNode",hv);var dv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),(r=t.call(this,0,0,0,0,i)).chartTransform=e,r.update();var a=function(){return r.update()};return e.changedEmitter.addListener(a),r.disposeChartRectangle=function(){return e.changedEmitter.removeListener(a)},r}return _createClass(n,[{key:"update",value:function(){this.setRect(0,0,this.chartTransform.viewWidth,this.chartTransform.viewHeight)}},{key:"dispose",value:function(){this.disposeChartRectangle(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(iu);Mn.register("ChartRectangle",dv);var pv=function(){function e(t,n,i){_classCallCheck(this,e),i=A({domain:new Tt(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY),range:new Tt(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},i),this.evaluationFunction=t,this.inverseFunction=n,this.domain=i.domain,this.range=i.range}return _createClass(e,[{key:"evaluate",value:function(e){var t=this.evaluationFunction(e);return t}},{key:"inverse",value:function(e){var t=this.inverseFunction(e);return t}}]),e}();xt.register("Transform1",pv);var fv=pv,mv=function(){function e(t){_classCallCheck(this,e);var n=S()({viewWidth:100,modelXRange:new Tt(-1,1),modelXRangeInverted:!1,xTransform:new fv((function(e){return e}),(function(e){return e})),viewHeight:100,modelYRange:new Tt(-1,1),modelYRangeInverted:!1,yTransform:new fv((function(e){return e}),(function(e){return e}))},t);this.changedEmitter=new Et,this.viewWidth=n.viewWidth,this.viewHeight=n.viewHeight,this.modelXRange=n.modelXRange,this.modelXRangeInverted=n.modelXRangeInverted,this.modelYRange=n.modelYRange,this.modelYRangeInverted=n.modelYRangeInverted,this.xTransform=n.xTransform,this.yTransform=n.yTransform}return _createClass(e,[{key:"dispose",value:function(){this.changedEmitter.dispose()}},{key:"forEachSpacing",value:function(e,t,n,i,r){for(var a=this.getModelRange(e),s=gv(a.min,i,n,t,Math.ceil),o=gv(a.max,i,n,t,Math.floor),l=s;l<=o+1e-6;l++){var u=l*t+n;r(u,this.modelToView(e,u))}}},{key:"modelToView",value:function(e,t){var n=e===In.HORIZONTAL?this.modelXRange:this.modelYRange,i=e===In.HORIZONTAL?this.viewWidth:this.viewHeight,r=e===In.HORIZONTAL?this.xTransform:this.yTransform,a=e===In.HORIZONTAL?this.modelXRangeInverted:this.modelYRangeInverted,s=r.evaluate(t),o=a?i:0,l=a?0:i,u=e===In.HORIZONTAL?En.linear(r.evaluate(n.min),r.evaluate(n.max),o,l,s):En.linear(r.evaluate(n.max),r.evaluate(n.min),o,l,s);return u}},{key:"modelToViewX",value:function(e){return this.modelToView(In.HORIZONTAL,e)}},{key:"modelToViewY",value:function(e){return this.modelToView(In.VERTICAL,e)}},{key:"modelToViewXY",value:function(e,t){return new pn(this.modelToViewX(e),this.modelToViewY(t))}},{key:"modelToViewPosition",value:function(e){return this.modelToViewXY(e.x,e.y)}},{key:"modelToViewDelta",value:function(e,t){return this.modelToView(e,t)-this.modelToView(e,0)}},{key:"modelToViewDeltaX",value:function(e){return this.modelToViewDelta(In.HORIZONTAL,e)}},{key:"modelToViewDeltaY",value:function(e){return this.modelToViewDelta(In.VERTICAL,e)}},{key:"viewToModel",value:function(e,t){var n=e===In.HORIZONTAL?this.modelXRange:this.modelYRange,i=e===In.HORIZONTAL?this.viewWidth:this.viewHeight,r=e===In.HORIZONTAL?this.xTransform:this.yTransform,a=e===In.HORIZONTAL?this.modelXRangeInverted:this.modelYRangeInverted,s=a?i:0,o=a?0:i,l=e===In.HORIZONTAL?En.linear(s,o,r.evaluate(n.min),r.evaluate(n.max),t):En.linear(s,o,r.evaluate(n.max),r.evaluate(n.min),t),u=r.inverse(l);return u}},{key:"viewToModelX",value:function(e){return this.viewToModel(In.HORIZONTAL,e)}},{key:"viewToModelY",value:function(e){return this.viewToModel(In.VERTICAL,e)}},{key:"viewToModelXY",value:function(e,t){return new pn(this.viewToModelX(e),this.viewToModelY(t))}},{key:"viewToModelPosition",value:function(e){return this.viewToModelXY(e.x,e.y)}},{key:"viewToModelDeltaX",value:function(e){return this.viewToModelX(e)-this.viewToModelX(0)}},{key:"viewToModelDeltaY",value:function(e){return this.viewToModelY(e)-this.viewToModelY(0)}},{key:"viewToModelDelta",value:function(e){return this.viewToModelPosition(e).minus(this.viewToModelPosition(pn.ZERO))}},{key:"setViewWidth",value:function(e){e!==this.viewWidth&&(this.viewWidth=e,this.changedEmitter.emit())}},{key:"setViewHeight",value:function(e){e!==this.viewHeight&&(this.viewHeight=e,this.changedEmitter.emit())}},{key:"setModelXRange",value:function(e){e.equals(this.modelXRange)||(this.modelXRange=e,this.changedEmitter.emit())}},{key:"setModelYRange",value:function(e){e.equals(this.modelYRange)||(this.modelYRange=e,this.changedEmitter.emit())}},{key:"getModelRange",value:function(e){return e===In.HORIZONTAL?this.modelXRange:this.modelYRange}},{key:"setXTransform",value:function(e){this.xTransform!==e&&(this.xTransform=e,this.changedEmitter.emit())}},{key:"setYTransform",value:function(e){this.yTransform!==e&&(this.yTransform=e,this.changedEmitter.emit())}}]),e}();function gv(e,t,n,i,r){return"lenient"===t?En.roundSymmetric((e-n)/i):r((e-n)/i)}Mn.register("ChartTransform",mv);Mn.register("ClippingTypeValues",["strict","lenient"]);var yv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({origin:0,clippingType:"strict",stroke:"black"},a);(s=t.call(this,null,o)).chartTransform=e,s.axisOrientation=i,s.spacing=r,s.origin=o.origin,s.clippingType=o.clippingType,s.update();var l=function(){return s.update()};return e.changedEmitter.addListener(l),s.disposeGridLineSet=function(){return e.changedEmitter.removeListener(l)},s}return _createClass(n,[{key:"update",value:function(){var e=this,t=new Ni;this.chartTransform.forEachSpacing(this.axisOrientation,this.spacing,this.origin,this.clippingType,(function(n,i){e.axisOrientation===In.VERTICAL?(t.moveTo(0,i),t.lineTo(e.chartTransform.viewWidth,i)):(t.moveTo(i,0),t.lineTo(i,e.chartTransform.viewHeight))})),this.shape=t.makeImmutable()}},{key:"setSpacing",value:function(e){this.spacing!==e&&(this.spacing=e,this.update())}},{key:"dispose",value:function(){this.disposeGridLineSet(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Hl);Mn.register("GridLineSet",yv);var vv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({stroke:"black"},r);(a=t.call(this,null,s)).chartTransform=e,a.dataSet=i,a.update();var o=function(){return a.update()};return e.changedEmitter.addListener(o),a.disposeLinePlot=function(){return e.changedEmitter.removeListener(o)},a}return _createClass(n,[{key:"setDataSet",value:function(e){this.dataSet=e,this.update()}},{key:"update",value:function(){for(var e=new Ni,t=!0,n=0;n<this.dataSet.length;n++){var i=this.dataSet[n];if(i){var r=this.chartTransform.modelToViewPosition(i);t?(e.moveToPoint(r),t=!1):e.lineToPoint(r)}else t=!0}this.shape=e.makeImmutable()}},{key:"dispose",value:function(){this.disposeLinePlot(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Hl);Mn.register("LinePlot",vv);var Av=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({stroke:"black",lineWidth:1},a);(s=t.call(this,0,0,1,1,o)).chartTransform=e,s._m=i,s._b=r,s.update();var l=function(){return s.update()};return e.changedEmitter.addListener(l),s.disposeStraightLinePlot=function(){return e.changedEmitter.removeListener(l)},s}return _createClass(n,[{key:"setSlope",value:function(e){this._m=e,this.update()}},{key:"m",get:function(){return this._m},set:function(e){this.setSlope(e)}},{key:"setYIntercept",value:function(e){this._b=e,this.update()}},{key:"b",get:function(){return this._b},set:function(e){this.setYIntercept(e)}},{key:"solve",value:function(e){return this._m*e+this._b}},{key:"update",value:function(){if(this._m===1/0||this._m===-1/0){var e=this.chartTransform.modelYRange.min,t=this.chartTransform.modelYRange.max,n=this.chartTransform.modelToViewX(0),i=this.chartTransform.modelToViewY(e),r=this.chartTransform.modelToViewY(t);this.setLine(n,i,n,r)}else{var a=this.chartTransform.modelXRange.min,s=this.solve(a),o=this.chartTransform.modelXRange.max,l=this.solve(o),u=this.chartTransform.modelToViewX(a),c=this.chartTransform.modelToViewY(s),h=this.chartTransform.modelToViewX(o),d=this.chartTransform.modelToViewY(l);this.setLine(u,c,h,d)}}},{key:"dispose",value:function(){this.disposeStraightLinePlot(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(tu);Mn.register("LinearEquationPlot",Av);var bv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({radius:2,fill:"black"},r);(a=t.call(this,null,s)).chartTransform=e,a.dataSet=i,a.radius=s.radius,a.update();var o=function(){return a.update()};return e.changedEmitter.addListener(o),a.disposeScatterPlot=function(){return e.changedEmitter.removeListener(o)},a}return _createClass(n,[{key:"setDataSet",value:function(e){this.dataSet=e,this.update()}},{key:"update",value:function(){for(var e=new Ni,t=this.dataSet.length,n=0;n<t;n++){var i=this.dataSet[n];if(i.isFinite()){var r=this.chartTransform.modelToViewPosition(i);e.moveToPoint(r),e.circle(r.x,r.y,this.radius)}}this.shape=e.makeImmutable()}},{key:"dispose",value:function(){this.disposeScatterPlot(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Hl);Mn.register("ScatterPlot",bv);var Sv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s){var o;_classCallCheck(this,n);var l=S()({color:"black",spacing:0,outerLineLength:6,arrowNodeOptions:{doubleHead:!0,headHeight:4.5,headWidth:5,tailWidth:1.5,stroke:null}},s);l.orientation=i===In.HORIZONTAL?"vertical":"horizontal",l.arrowNodeOptions.fill=l.arrowNodeOptions.fill||l.color,(o=t.call(this)).chartTransform=e,o.axisOrientation=i,o.delta=r,o.labelNode=a,o.color=l.color,o.outerLineLength=l.outerLineLength,o.viewWidth=0,o.arrowNodeOptions=l.arrowNodeOptions,o.update(),o.mutate(l);var u=function(){return o.update()};return e.changedEmitter.addListener(u),o.disposeSpanNode=function(){return e.changedEmitter.removeListener(u)},o}return _createClass(n,[{key:"setDelta",value:function(e){e!==this.delta&&(this.delta=e,this.update())}},{key:"update",value:function(){var e=this,t=this.chartTransform.modelToViewDelta(this.axisOrientation,this.delta);if(Math.abs(t-this.viewWidth)>1e-13){this.viewWidth=t;var n=function(t){return new tu(0,0,0,e.outerLineLength,{stroke:e.color,centerX:t})},i=n(0),r=n(t),a=new Dy(i.right,i.centerY,r.left,r.centerY,this.arrowNodeOptions),s=new jo({children:[i,r,a]});this.labelNode.maxWidth=s.width,this.children=[s,this.labelNode]}}},{key:"dispose",value:function(){this.disposeSpanNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Qp);Mn.register("SpanNode",Sv);var Ev=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({value:0,edge:null,origin:0,stroke:"black",lineWidth:1,extent:n.DEFAULT_EXTENT,clippingType:"strict"},a);o.edge,(s=t.call(this,null,o)).chartTransform=e,s.axisOrientation=i,s.spacing=r,s.value=o.value,s.edge=o.edge,s.origin=o.origin,s.extent=o.extent,s.clippingType=o.clippingType,s.update();var l=function(){return s.update()};return e.changedEmitter.addListener(l),s.disposeTickMarkSet=function(){return e.changedEmitter.removeListener(l)},s}return _createClass(n,[{key:"setSpacing",value:function(e){e!==this.spacing&&(this.spacing=e,this.update())}},{key:"update",value:function(){var e=this,t=new Ni;this.chartTransform.forEachSpacing(this.axisOrientation,this.spacing,this.origin,this.clippingType,(function(n,i){var r=new jn(0,0,0,0);if(e.axisOrientation===In.HORIZONTAL){var a="min"===e.edge?e.chartTransform.viewHeight:"max"===e.edge?0:e.chartTransform.modelToView(e.axisOrientation.opposite,e.value);t.moveTo(i,a-e.extent/2),t.lineTo(i,a+e.extent/2),r.setMinMax(i,a-e.extent/2,i,a+e.extent/2)}else{var s="min"===e.edge?0:"max"===e.edge?e.chartTransform.viewWidth:e.chartTransform.modelToView(e.axisOrientation.opposite,e.value);t.moveTo(s-e.extent/2,i),t.lineTo(s+e.extent/2,i),r.setMinMax(s-e.extent/2,i,s+e.extent/2,i)}})),this.shape=t.makeImmutable()}},{key:"dispose",value:function(){this.disposeTickMarkSet(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Hl);_defineProperty(Ev,"DEFAULT_EXTENT",10),Mn.register("TickMarkSet",Ev);var kv=Ev,Vv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({value:0,edge:null,origin:0,extent:kv.DEFAULT_EXTENT,clippingType:"strict",createLabel:function(e){return new Xl(En.toFixed(e,1),{fontSize:12})},positionLabel:function(e,t,n){return n===In.HORIZONTAL?e.centerTop=t.centerBottom.plusXY(0,1):e.rightCenter=t.leftCenter.plusXY(-1,0),e}},a);o.edge,(s=t.call(this,null,o)).chartTransform=e,s.axisOrientation=i,s.spacing=r,s.origin=o.origin,s.extent=o.extent,s.value=o.value,s.clippingType=o.clippingType,s.edge=o.edge,s.createLabel=o.createLabel,s.positionLabel=o.positionLabel,s.labelMap=new Map,s.update();var l=function(){return s.update()};return e.changedEmitter.addListener(l),s.disposeTickLabelSet=function(){return e.changedEmitter.removeListener(l)},s}return _createClass(n,[{key:"setSpacing",value:function(e){this.spacing!==e&&(this.spacing=e,this.update())}},{key:"update",value:function(){var e=this,t=[],n=new Set;this.chartTransform.forEachSpacing(this.axisOrientation,this.spacing,this.origin,this.clippingType,(function(i,r){var a=new jn(0,0,0,0);if(e.axisOrientation===In.HORIZONTAL){var s="min"===e.edge?e.chartTransform.viewHeight:"max"===e.edge?0:e.chartTransform.modelToView(e.axisOrientation.opposite,e.value);a.setMinMax(r,s-e.extent/2,r,s+e.extent/2)}else{var o="min"===e.edge?0:"max"===e.edge?e.chartTransform.viewWidth:e.chartTransform.modelToView(e.axisOrientation.opposite,e.value);a.setMinMax(o-e.extent/2,r,o+e.extent/2,r)}var l=e.labelMap.has(i)?e.labelMap.get(i):e.createLabel?e.createLabel(i):null;e.labelMap.set(i,l),l&&e.positionLabel(l,a,e.axisOrientation),l&&t.push(l),n.add(i)}));var i,r=[],a=_createForOfIteratorHelper(this.labelMap.keys());try{for(a.s();!(i=a.n()).done;){var s=i.value;n.has(s)||r.push(s)}}catch(o){a.e(o)}finally{a.f()}r.forEach((function(t){e.labelMap.delete(t)})),this.children=t}},{key:"invalidateTickLabelSet",value:function(){this.labelMap.clear(),this.update()}},{key:"dispose",value:function(){this.disposeTickLabelSet(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Hl);Mn.register("TickLabelSet",Vv);var wv={fill:"black"},_v=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({arrowNodeOptions:{},pointToPaintableFields:function(e){return wv}},r);(a=t.call(this,s)).chartTransform=e,a.dataSet=i,a.pointToPaintableFields=s.pointToPaintableFields,a.arrowNodeOptions=s.arrowNodeOptions,a.arrowNodes=[],a.setDataSet(i);var o=function(){return a.update()};return e.changedEmitter.addListener(o),a.disposeUpDownArrowPLot=function(){return e.changedEmitter.removeListener(o)},a}return _createClass(n,[{key:"setDataSet",value:function(e){this.dataSet=e,this.update()}},{key:"update",value:function(){for(;this.arrowNodes.length<this.dataSet.length;){var e=new Dy(0,0,0,0,this.arrowNodeOptions);this.arrowNodes.push(e),this.addChild(e)}for(;this.arrowNodes.length>this.dataSet.length;){var t=this.arrowNodes.pop();this.removeChild(t)}for(var n=0;n<this.arrowNodes.length;n++){var i=this.dataSet[n],r=this.chartTransform.modelToViewPosition(new pn(i.x,0)),a=this.chartTransform.modelToViewPosition(i);this.arrowNodes[n].setTailAndTip(r.x,r.y,a.x,a.y);var s=this.pointToPaintableFields(i);this.arrowNodes[n].mutate(s)}}},{key:"dispose",value:function(){this.disposeUpDownArrowPLot(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);Mn.register("UpDownArrowPlot",_v);var Cv=Mn,xv=function(){function e(t,n,i,r,a,s){_classCallCheck(this,e),this.minX=t,this.minY=n,this.minZ=i,this.maxX=r,this.maxY=a,this.maxZ=s}return _createClass(e,[{key:"getWidth",value:function(){return this.maxX-this.minX}},{key:"width",get:function(){return this.getWidth()}},{key:"getHeight",value:function(){return this.maxY-this.minY}},{key:"height",get:function(){return this.getHeight()}},{key:"getDepth",value:function(){return this.maxZ-this.minZ}},{key:"depth",get:function(){return this.getDepth()}},{key:"getX",value:function(){return this.minX}},{key:"x",get:function(){return this.getX()}},{key:"getY",value:function(){return this.minY}},{key:"y",get:function(){return this.getY()}},{key:"getZ",value:function(){return this.minZ}},{key:"z",get:function(){return this.getZ()}},{key:"getMinX",value:function(){return this.minX}},{key:"getMinY",value:function(){return this.minY}},{key:"getMinZ",value:function(){return this.minZ}},{key:"getMaxX",value:function(){return this.maxX}},{key:"getMaxY",value:function(){return this.maxY}},{key:"getMaxZ",value:function(){return this.maxZ}},{key:"getLeft",value:function(){return this.minX}},{key:"left",get:function(){return this.minX}},{key:"getTop",value:function(){return this.minY}},{key:"top",get:function(){return this.minY}},{key:"getBack",value:function(){return this.minZ}},{key:"back",get:function(){return this.minZ}},{key:"getRight",value:function(){return this.maxX}},{key:"right",get:function(){return this.maxX}},{key:"getBottom",value:function(){return this.maxY}},{key:"bottom",get:function(){return this.maxY}},{key:"getFront",value:function(){return this.maxZ}},{key:"front",get:function(){return this.maxZ}},{key:"getCenterX",value:function(){return(this.maxX+this.minX)/2}},{key:"centerX",get:function(){return this.getCenterX()}},{key:"getCenterY",value:function(){return(this.maxY+this.minY)/2}},{key:"centerY",get:function(){return this.getCenterY()}},{key:"getCenterZ",value:function(){return(this.maxZ+this.minZ)/2}},{key:"centerZ",get:function(){return this.getCenterZ()}},{key:"getCenter",value:function(){return new un(this.getCenterX(),this.getCenterY(),this.getCenterZ())}},{key:"center",get:function(){return this.getCenter()}},{key:"isEmpty",value:function(){return this.getWidth()<0||this.getHeight()<0||this.getDepth()<0}},{key:"isFinite",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isFinite(this.minX)&&isFinite(this.minY)&&isFinite(this.minZ)&&isFinite(this.maxX)&&isFinite(this.maxY)&&isFinite(this.maxZ)}))},{key:"hasNonzeroArea",value:function(){return this.getWidth()>0&&this.getHeight()>0&&this.getDepth()>0}},{key:"isValid",value:function(){return!this.isEmpty()&&this.isFinite()}},{key:"containsCoordinates",value:function(e,t,n){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY&&this.minZ<=n&&n<=this.maxZ}},{key:"containsPoint",value:function(e){return this.containsCoordinates(e.x,e.y,e.z)}},{key:"containsBounds",value:function(e){return this.minX<=e.minX&&this.maxX>=e.maxX&&this.minY<=e.minY&&this.maxY>=e.maxY&&this.minZ<=e.minZ&&this.maxZ>=e.maxZ}},{key:"intersectsBounds",value:function(e){return!this.intersection(e).isEmpty()}},{key:"toString",value:function(){return"[x:(".concat(this.minX,",").concat(this.maxX,"),y:(").concat(this.minY,",").concat(this.maxY,"),z:(").concat(this.minZ,",").concat(this.maxZ,")]")}},{key:"equals",value:function(e){return this.minX===e.minX&&this.minY===e.minY&&this.minZ===e.minZ&&this.maxX===e.maxX&&this.maxY===e.maxY&&this.maxZ===e.maxZ}},{key:"equalsEpsilon",value:function(e,t){t=void 0!==t?t:0;var n=this.isFinite(),i=e.isFinite();return n&&i?Math.abs(this.minX-e.minX)<t&&Math.abs(this.minY-e.minY)<t&&Math.abs(this.minZ-e.minZ)<t&&Math.abs(this.maxX-e.maxX)<t&&Math.abs(this.maxY-e.maxY)<t&&Math.abs(this.maxZ-e.maxZ)<t:n===i&&(this===e||(isFinite(this.minX+e.minX)?Math.abs(this.minX-e.minX)<t:this.minX===e.minX)&&(isFinite(this.minY+e.minY)?Math.abs(this.minY-e.minY)<t:this.minY===e.minY)&&(isFinite(this.minZ+e.minZ)?Math.abs(this.minZ-e.minZ)<t:this.minZ===e.minZ)&&(isFinite(this.maxX+e.maxX)?Math.abs(this.maxX-e.maxX)<t:this.maxX===e.maxX)&&(isFinite(this.maxY+e.maxY)?Math.abs(this.maxY-e.maxY)<t:this.maxY===e.maxY)&&(isFinite(this.maxZ+e.maxZ)?Math.abs(this.maxZ-e.maxZ)<t:this.maxZ===e.maxZ))}},{key:"copy",value:function(t){return t?t.set(this):new e(this.minX,this.minY,this.minZ,this.maxX,this.maxY,this.maxZ)}},{key:"union",value:function(t){return new e(Math.min(this.minX,t.minX),Math.min(this.minY,t.minY),Math.min(this.minZ,t.minZ),Math.max(this.maxX,t.maxX),Math.max(this.maxY,t.maxY),Math.max(this.maxZ,t.maxZ))}},{key:"intersection",value:function(t){return new e(Math.max(this.minX,t.minX),Math.max(this.minY,t.minY),Math.max(this.minZ,t.minZ),Math.min(this.maxX,t.maxX),Math.min(this.maxY,t.maxY),Math.min(this.maxZ,t.maxZ))}},{key:"withCoordinates",value:function(t,n,i){return new e(Math.min(this.minX,t),Math.min(this.minY,n),Math.min(this.minZ,i),Math.max(this.maxX,t),Math.max(this.maxY,n),Math.max(this.maxZ,i))}},{key:"withPoint",value:function(e){return this.withCoordinates(e.x,e.y,e.z)}},{key:"withMinX",value:function(t){return new e(t,this.minY,this.minZ,this.maxX,this.maxY,this.maxZ)}},{key:"withMinY",value:function(t){return new e(this.minX,t,this.minZ,this.maxX,this.maxY,this.maxZ)}},{key:"withMinZ",value:function(t){return new e(this.minX,this.minY,t,this.maxX,this.maxY,this.maxZ)}},{key:"withMaxX",value:function(t){return new e(this.minX,this.minY,this.minZ,t,this.maxY,this.maxZ)}},{key:"withMaxY",value:function(t){return new e(this.minX,this.minY,this.minZ,this.maxX,t,this.maxZ)}},{key:"withMaxZ",value:function(t){return new e(this.minX,this.minY,this.minZ,this.maxX,this.maxY,t)}},{key:"roundedOut",value:function(){return new e(Math.floor(this.minX),Math.floor(this.minY),Math.floor(this.minZ),Math.ceil(this.maxX),Math.ceil(this.maxY),Math.ceil(this.maxZ))}},{key:"roundedIn",value:function(){return new e(Math.ceil(this.minX),Math.ceil(this.minY),Math.ceil(this.minZ),Math.floor(this.maxX),Math.floor(this.maxY),Math.floor(this.maxZ))}},{key:"transformed",value:function(e){return this.copy().transform(e)}},{key:"dilated",value:function(e){return this.dilatedXYZ(e,e,e)}},{key:"dilatedX",value:function(t){return new e(this.minX-t,this.minY,this.minZ,this.maxX+t,this.maxY,this.maxZ)}},{key:"dilatedY",value:function(t){return new e(this.minX,this.minY-t,this.minZ,this.maxX,this.maxY+t,this.maxZ)}},{key:"dilatedZ",value:function(t){return new e(this.minX,this.minY,this.minZ-t,this.maxX,this.maxY,this.maxZ+t)}},{key:"dilatedXYZ",value:function(t,n,i){return new e(this.minX-t,this.minY-n,this.minZ-i,this.maxX+t,this.maxY+n,this.maxZ+i)}},{key:"eroded",value:function(e){return this.dilated(-e)}},{key:"erodedX",value:function(e){return this.dilatedX(-e)}},{key:"erodedY",value:function(e){return this.dilatedY(-e)}},{key:"erodedZ",value:function(e){return this.dilatedZ(-e)}},{key:"erodedXYZ",value:function(e,t,n){return this.dilatedXYZ(-e,-t,-n)}},{key:"shiftedX",value:function(t){return new e(this.minX+t,this.minY,this.minZ,this.maxX+t,this.maxY,this.maxZ)}},{key:"shiftedY",value:function(t){return new e(this.minX,this.minY+t,this.minZ,this.maxX,this.maxY+t,this.maxZ)}},{key:"shiftedZ",value:function(t){return new e(this.minX,this.minY,this.minZ+t,this.maxX,this.maxY,this.maxZ+t)}},{key:"shiftedXYZ",value:function(t,n,i){return new e(this.minX+t,this.minY+n,this.minZ+i,this.maxX+t,this.maxY+n,this.maxZ+i)}},{key:"shifted",value:function(e){return this.shiftedXYZ(e.x,e.y,e.z)}},{key:"setMinMax",value:function(e,t,n,i,r,a){return this.minX=e,this.minY=t,this.minZ=n,this.maxX=i,this.maxY=r,this.maxZ=a,this}},{key:"setMinX",value:function(e){return this.minX=e,this}},{key:"setMinY",value:function(e){return this.minY=e,this}},{key:"setMinZ",value:function(e){return this.minZ=e,this}},{key:"setMaxX",value:function(e){return this.maxX=e,this}},{key:"setMaxY",value:function(e){return this.maxY=e,this}},{key:"setMaxZ",value:function(e){return this.maxZ=e,this}},{key:"set",value:function(e){return this.setMinMax(e.minX,e.minY,e.minZ,e.maxX,e.maxY,e.maxZ)}},{key:"includeBounds",value:function(e){return this.setMinMax(Math.min(this.minX,e.minX),Math.min(this.minY,e.minY),Math.min(this.minZ,e.minZ),Math.max(this.maxX,e.maxX),Math.max(this.maxY,e.maxY),Math.max(this.maxZ,e.maxZ))}},{key:"constrainBounds",value:function(e){return this.setMinMax(Math.max(this.minX,e.minX),Math.max(this.minY,e.minY),Math.max(this.minZ,e.minZ),Math.min(this.maxX,e.maxX),Math.min(this.maxY,e.maxY),Math.min(this.maxZ,e.maxZ))}},{key:"addCoordinates",value:function(e,t,n){return this.setMinMax(Math.min(this.minX,e),Math.min(this.minY,t),Math.min(this.minZ,n),Math.max(this.maxX,e),Math.max(this.maxY,t),Math.max(this.maxZ,n))}},{key:"addPoint",value:function(e){return this.addCoordinates(e.x,e.y,e.z)}},{key:"roundOut",value:function(){return this.setMinMax(Math.floor(this.minX),Math.floor(this.minY),Math.floor(this.minZ),Math.ceil(this.maxX),Math.ceil(this.maxY),Math.ceil(this.maxZ))}},{key:"roundIn",value:function(){return this.setMinMax(Math.ceil(this.minX),Math.ceil(this.minY),Math.ceil(this.minZ),Math.floor(this.maxX),Math.floor(this.maxY),Math.floor(this.maxZ))}},{key:"transform",value:function(e){if(this.isEmpty())return this;if(e.isIdentity())return this;var t=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=new un(0,0,0);function l(e){t=Math.min(t,e.x),n=Math.min(n,e.y),i=Math.min(i,e.z),r=Math.max(r,e.x),a=Math.max(a,e.y),s=Math.max(s,e.z)}return l(e.multiplyVector3(o.setXYZ(this.minX,this.minY,this.minZ))),l(e.multiplyVector3(o.setXYZ(this.minX,this.maxY,this.minZ))),l(e.multiplyVector3(o.setXYZ(this.maxX,this.minY,this.minZ))),l(e.multiplyVector3(o.setXYZ(this.maxX,this.maxY,this.minZ))),l(e.multiplyVector3(o.setXYZ(this.minX,this.minY,this.maxZ))),l(e.multiplyVector3(o.setXYZ(this.minX,this.maxY,this.maxZ))),l(e.multiplyVector3(o.setXYZ(this.maxX,this.minY,this.maxZ))),l(e.multiplyVector3(o.setXYZ(this.maxX,this.maxY,this.maxZ))),this.setMinMax(t,n,i,r,a,s)}},{key:"dilate",value:function(e){return this.dilateXYZ(e,e,e)}},{key:"dilateX",value:function(e){return this.setMinMax(this.minX-e,this.minY,this.minZ,this.maxX+e,this.maxY,this.maxZ)}},{key:"dilateY",value:function(e){return this.setMinMax(this.minX,this.minY-e,this.minZ,this.maxX,this.maxY+e,this.maxZ)}},{key:"dilateZ",value:function(e){return this.setMinMax(this.minX,this.minY,this.minZ-e,this.maxX,this.maxY,this.maxZ+e)}},{key:"dilateXYZ",value:function(e,t,n){return this.setMinMax(this.minX-e,this.minY-t,this.minZ-n,this.maxX+e,this.maxY+t,this.maxZ+n)}},{key:"erode",value:function(e){return this.dilate(-e)}},{key:"erodeX",value:function(e){return this.dilateX(-e)}},{key:"erodeY",value:function(e){return this.dilateY(-e)}},{key:"erodeZ",value:function(e){return this.dilateZ(-e)}},{key:"erodeXYZ",value:function(e,t,n){return this.dilateXYZ(-e,-t,-n)}},{key:"shiftX",value:function(e){return this.setMinMax(this.minX+e,this.minY,this.minZ,this.maxX+e,this.maxY,this.maxZ)}},{key:"shiftY",value:function(e){return this.setMinMax(this.minX,this.minY+e,this.minZ,this.maxX,this.maxY+e,this.maxZ)}},{key:"shiftZ",value:function(e){return this.setMinMax(this.minX,this.minY,this.minZ+e,this.maxX,this.maxY,this.maxZ+e)}},{key:"shiftXYZ",value:function(e,t,n){return this.setMinMax(this.minX+e,this.minY+t,this.minZ+n,this.maxX+e,this.maxY+t,this.maxZ+n)}},{key:"shift",value:function(e){return this.shiftXYZ(e.x,e.y,e.z)}}],[{key:"cuboid",value:function(t,n,i,r,a,s){return new e(t,n,i,t+r,n+a,i+s)}},{key:"point",value:function(t,n,i){return new e(t,n,i,t,n,i)}}]),e}();xv.prototype.isBounds=!0,xv.prototype.dimension=3,xt.register("Bounds3",xv),Gi.mixInto(xv,{initialize:xv.prototype.setMinMax}),xv.NOTHING=new xv(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),xv.EVERYTHING=new xv(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),xv.Bounds3IO=new U("Bounds3IO",{valueType:xv,documentation:"a 3-dimensional bounds (bounding box)",stateSchema:{minX:Lt,minY:Lt,minZ:Lt,maxX:Lt,maxY:Lt,maxZ:Lt},toStateObject:function(e){return{minX:e.minX,minY:e.minY,minZ:e.minZ,maxX:e.maxX,maxY:e.maxY,maxZ:e.maxZ}},fromStateObject:function(e){return new xv(e.minX,e.minY,e.minZ,e.maxX,e.maxY,e.maxZ)}});var Pv=function(){function e(t){_classCallCheck(this,e),this.inclusions=t}return _createClass(e,[{key:"size",value:function(){return this.inclusions.length}},{key:"includes",value:function(e){return this.inclusions[e]}},{key:"apply",value:function(e){var t=this;return e.filter((function(e,n){return t.inclusions[n]}))}},{key:"inverted",value:function(){return new e(this.inclusions.map((function(e){return!e})))}},{key:"getIncludedIndices",value:function(){var e=this;return _.range(0,this.size()).filter((function(t){return e.inclusions[t]}))}},{key:"toString",value:function(){return"C[".concat(this.inclusions.map((function(e){return e?"1":"0"})).join(""),"]")}},{key:"equals",value:function(e){return this.inclusions.length===e.inclusions.length&&_.isEqual(this.inclusions,e.inclusions)}}],[{key:"empty",value:function(t){return new e(_.range(0,t).map((function(){return!1})))}},{key:"full",value:function(t){return new e(_.range(0,t).map((function(){return!0})))}},{key:"combinations",value:function(t){var n=[],i=[];return function r(a){a===t?n.push(new e(i.slice())):(i.push(!1),r(a+1),i.pop(),i.push(!0),r(a+1),i.pop())}(0),n}},{key:"forEachCombination",value:function(e,t){var n=[];!function i(r){r===e.length?t(n):(i(r+1),n.push(e[r]),i(r+1),n.pop())}(0)}},{key:"combinationsOf",value:function(t){var n=[];return e.forEachCombination(t,(function(e){n.push(e.slice())})),n}}]),e}();xt.register("Combination",Pv);var Tv=function(){function e(t){_classCallCheck(this,e),this.points=t.slice();for(var n=0;n<this.points.length-2;n++){var i=this.points[n],r=this.points[n+1],a=this.points[n+2];En.arePointsCollinear(i,r,a)&&(this.points.splice(n+1,1),n--)}}return _createClass(e,[{key:"findMatchingPair",value:function(e){for(var t=0;t<this.points.length-2&&this.points[t+1].x<e;)t++;return[this.points[t],this.points[t+1]]}},{key:"evaluate",value:function(e){if(1===this.points.length)return this.points[0].y;var t=_slicedToArray(this.findMatchingPair(e),2),n=t[0],i=t[1];return n.x===e?n.y:i.x===e?i.y:En.linear(n.x,i.x,n.y,i.y,e)}},{key:"getCombinedXValues",value:function(t){return e.sortedUniqueEpsilon(this.points.map((function(e){return e.x})).concat(t.points.map((function(e){return e.x}))))}},{key:"getIntersectedXValues",value:function(t){for(var n=this.getCombinedXValues(t),i=[],r=0;r<n.length-1;r++){var a=n[r],s=n[r+1],o=En.lineLineIntersection(new pn(a,this.evaluate(a)),new pn(s,this.evaluate(s)),new pn(a,t.evaluate(a)),new pn(s,t.evaluate(s)));o&&(0===r||o.x>a)&&(r===n.length-2||o.x<s)&&i.push(o.x)}var l=e.sortedUniqueEpsilon([].concat(_toConsumableArray(n),i));return[l[0]-1].concat(_toConsumableArray(l),[l[l.length-1]+1])}},{key:"binaryXOperation",value:function(t,n,i){var r=this;return new e(i.map((function(e){return new pn(e,n(r.evaluate(e),t.evaluate(e)))})))}},{key:"binaryPointwiseOperation",value:function(e,t){return this.binaryXOperation(e,t,this.getCombinedXValues(e))}},{key:"binaryIntersectingOperation",value:function(e,t){return this.binaryXOperation(e,t,this.getIntersectedXValues(e))}},{key:"plus",value:function(e){return this.binaryPointwiseOperation(e,(function(e,t){return e+t}))}},{key:"minus",value:function(e){return this.binaryPointwiseOperation(e,(function(e,t){return e-t}))}},{key:"min",value:function(e){return this.binaryIntersectingOperation(e,Math.min)}},{key:"max",value:function(e){return this.binaryIntersectingOperation(e,Math.max)}},{key:"withXValues",value:function(t){var n=this;return new e(t.map((function(e){return new pn(e,n.evaluate(e))})))}},{key:"inverted",value:function(){var t=this.points.map((function(e){return new pn(e.y,e.x)}));return t.length>1&&t[0].x>t[1].x&&t.reverse(),new e(t)}}],[{key:"sum",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.plus(t)}))}},{key:"min",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.min(t)}))}},{key:"max",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.max(t)}))}},{key:"constant",value:function(t){return new e([new pn(0,t)])}},{key:"linear",value:function(t,n){return new e([new pn(0,n),new pn(1,t+n)])}},{key:"sortedUniqueEpsilon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-10;e=_.sortBy(e);for(var n=0;n<e.length-1;n++)Math.abs(e[n]-e[n+1])<t&&(e.splice(n,1),n--);return e}}]),e}();xt.register("CompletePiecewiseLinearFunction",Tv);var Mv=Tv,Lv=function(){function e(t,n){_classCallCheck(this,e),this.real=t,this.imaginary=n}return _createClass(e,[{key:"copy",value:function(t){return t?t.set(this):new e(this.real,this.imaginary)}},{key:"phase",value:function(){return Math.atan2(this.imaginary,this.real)}},{key:"getMagnitude",value:function(){return Math.sqrt(this.magnitudeSquared)}},{key:"magnitude",get:function(){return this.getMagnitude()}},{key:"getMagnitudeSquared",value:function(){return this.real*this.real+this.imaginary*this.imaginary}},{key:"magnitudeSquared",get:function(){return this.getMagnitudeSquared()}},{key:"equals",value:function(e){return this.real===e.real&&this.imaginary===e.imaginary}},{key:"equalsEpsilon",value:function(e,t){return t||(t=0),Math.max(Math.abs(this.real-e.real),Math.abs(this.imaginary-e.imaginary))<=t}},{key:"plus",value:function(t){return new e(this.real+t.real,this.imaginary+t.imaginary)}},{key:"minus",value:function(t){return new e(this.real-t.real,this.imaginary-t.imaginary)}},{key:"times",value:function(t){return new e(this.real*t.real-this.imaginary*t.imaginary,this.real*t.imaginary+this.imaginary*t.real)}},{key:"dividedBy",value:function(t){var n=t.magnitudeSquared;return new e((this.real*t.real+this.imaginary*t.imaginary)/n,(this.imaginary*t.real-this.real*t.imaginary)/n)}},{key:"sqrtOf",value:function(){var t=this.magnitude;return new e(Math.sqrt((t+this.real)/2),(this.imaginary>=0?1:-1)*Math.sqrt((t-this.real)/2))}},{key:"powerByReal",value:function(t){var n=Math.pow(this.magnitude,t),i=t*this.phase();return new e(n*Math.cos(i),n*Math.sin(i))}},{key:"sinOf",value:function(){return new e(Math.sin(this.real)*En.cosh(this.imaginary),Math.cos(this.real)*En.sinh(this.imaginary))}},{key:"cosOf",value:function(){return new e(Math.cos(this.real)*En.cosh(this.imaginary),-Math.sin(this.real)*En.sinh(this.imaginary))}},{key:"squared",value:function(){return this.times(this)}},{key:"conjugated",value:function(){return new e(this.real,-this.imaginary)}},{key:"exponentiated",value:function(){return e.createPolar(Math.exp(this.real),this.imaginary)}},{key:"setRealImaginary",value:function(e,t){return this.real=e,this.imaginary=t,this}},{key:"setReal",value:function(e){return this.real=e,this}},{key:"setImaginary",value:function(e){return this.imaginary=e,this}},{key:"set",value:function(e){return this.setRealImaginary(e.real,e.imaginary)}},{key:"setPolar",value:function(e,t){return this.setRealImaginary(e*Math.cos(t),e*Math.sin(t))}},{key:"add",value:function(e){return this.setRealImaginary(this.real+e.real,this.imaginary+e.imaginary)}},{key:"subtract",value:function(e){return this.setRealImaginary(this.real-e.real,this.imaginary-e.imaginary)}},{key:"multiply",value:function(e){return this.setRealImaginary(this.real*e.real-this.imaginary*e.imaginary,this.real*e.imaginary+this.imaginary*e.real)}},{key:"divide",value:function(e){var t=e.magnitudeSquared;return this.setRealImaginary((this.real*e.real+this.imaginary*e.imaginary)/t,(this.imaginary*e.real-this.real*e.imaginary)/t)}},{key:"exponentiate",value:function(){return this.setPolar(Math.exp(this.real),this.imaginary)}},{key:"square",value:function(){return this.multiply(this)}},{key:"sqrt",value:function(){var e=this.magnitude;return this.setRealImaginary(Math.sqrt((e+this.real)/2),(this.imaginary>=0?1:-1)*Math.sqrt((e-this.real)/2))}},{key:"sin",value:function(){return this.setRealImaginary(Math.sin(this.real)*En.cosh(this.imaginary),Math.cos(this.real)*En.sinh(this.imaginary))}},{key:"cos",value:function(){return this.setRealImaginary(Math.cos(this.real)*En.cosh(this.imaginary),-Math.sin(this.real)*En.sinh(this.imaginary))}},{key:"conjugate",value:function(){return this.setRealImaginary(this.real,-this.imaginary)}},{key:"toString",value:function(){return"Complex(".concat(this.real,", ").concat(this.imaginary,")")}}],[{key:"real",value:function(t){return new e(t,0)}},{key:"imaginary",value:function(t){return new e(0,t)}},{key:"createPolar",value:function(t,n){return new e(t*Math.cos(n),t*Math.sin(n))}}]),e}();xt.register("Complex",Lv),Lv.ZERO=new Lv(0,0),Lv.ONE=new Lv(1,0),Lv.I=Lv.imaginary(1);var Iv={grahamScan:function(e,t){if(e.length<=2)return e;var n=Number.POSITIVE_INFINITY,i=null;_.each(e,(function(e){e.y<=n&&(e.y===n&&i?e.x<i.x&&(i=e):(n=e.y,i=e))})),(e=_.sortBy(e,(function(e){return e.minus(i).angle}))).splice(_.indexOf(e,i),1);var r=[i];return _.each(e,(function(e){if(i.x!==e.x||i.y!==e.y){for(;n();)r.pop();r.push(e)}function n(){if(r.length<2)return!1;var n,i,a,s=(n=r[r.length-2],i=r[r.length-1],a=e,i.minus(n).crossScalar(a.minus(n)));return t?s<0:s<=0}})),r}};xt.register("ConvexHull2",Iv);var Rv=function(){function e(t,n,i,r,a){_classCallCheck(this,e),this.dampingConstant=n/t,this.angularFrequencySquared=i/t,this.discriminant=this.dampingConstant*this.dampingConstant-4*this.angularFrequencySquared,this.solutionType=0,this.c1=0,this.c2=0,Math.abs(this.discriminant)<1e-5?(this.solutionType=e.CRITICALLY_DAMPED,this.angularFrequency=Math.sqrt(this.angularFrequencySquared),this.c1=r,this.c2=a+this.angularFrequency*r):this.discriminant<0?(this.solutionType=e.UNDER_DAMPED,this.frequency=.5*Math.sqrt(-this.discriminant),this.c1=r,this.c2=this.dampingConstant*r/(2*this.frequency)+a/this.frequency):(this.solutionType=e.OVER_DAMPED,this.positiveRoot=.5*(-this.dampingConstant+Math.sqrt(this.discriminant)),this.negativeRoot=.5*(-this.dampingConstant-Math.sqrt(this.discriminant)),this.c2=(this.negativeRoot*r-a)/(this.negativeRoot-this.positiveRoot),this.c1=r-this.c2)}return _createClass(e,[{key:"getValue",value:function(t){if(this.solutionType===e.CRITICALLY_DAMPED)return(this.c1+this.c2*t)*Math.exp(-this.angularFrequency*t);if(this.solutionType===e.UNDER_DAMPED){var n=this.frequency*t;return Math.exp(-this.dampingConstant/2*t)*(this.c1*Math.cos(n)+this.c2*Math.sin(n))}if(this.solutionType===e.OVER_DAMPED)return this.c1*Math.exp(this.negativeRoot*t)+this.c2*Math.exp(this.positiveRoot*t);throw new Error("Unknown solution type?")}},{key:"getDerivative",value:function(t){if(this.solutionType===e.CRITICALLY_DAMPED)return Math.exp(-this.angularFrequency*t)*(this.c2-this.angularFrequency*(this.c1+this.c2*t));if(this.solutionType===e.UNDER_DAMPED){var n=this.frequency*t,i=Math.cos(n),r=Math.sin(n),a=this.frequency*(this.c2*i-this.c1*r),s=.5*this.dampingConstant*(this.c1*i+this.c2*r);return Math.exp(-.5*this.dampingConstant*t)*(a-s)}if(this.solutionType===e.OVER_DAMPED)return this.c1*this.negativeRoot*Math.exp(this.negativeRoot*t)+this.c2*this.positiveRoot*Math.exp(this.positiveRoot*t);throw new Error("Unknown solution type?")}}]),e}();Rv.OVER_DAMPED=1,Rv.UNDER_DAMPED=2,Rv.CRITICALLY_DAMPED=3,xt.register("DampedHarmonic",Rv);var Dv=Rv,Nv=function(){function e(t,n,i){var r;if(_classCallCheck(this,e),i=A({},i),this.points=t,this.constraints=n,this.triangles=[],this.edges=[],this.convexHull=[],0!==t.length){for(this.vertices=t.map((function(e,t){return new qv(e,t)})),r=0;r<this.constraints.length;r++){var a=this.constraints[r],s=a[0],o=a[1];this.vertices[s].constrainedVertices.push(this.vertices[o])}for(this.vertices.sort(e.vertexComparison),r=0;r<this.vertices.length;r++){var l=this.vertices[r];l.sortedIndex=r;for(var u=l.constrainedVertices.length-1;u>=0;u--){var c=l.constrainedVertices[u];-1===c.sortedIndex&&(c.constrainedVertices.push(l),l.constrainedVertices.splice(u,1))}}this.bottomVertex=this.vertices[0],this.remainingVertices=this.vertices.slice(1);var h=jn.NOTHING.copy();for(r=t.length-1;r>=0;r--)h.addPoint(t[r]);this.artificialMinVertex=new qv(new pn(h.minX-.4*h.width,h.minY-.4*h.height),-1),this.artificialMaxVertex=new qv(new pn(h.maxX+.4*h.width,h.minY-.4*h.height),-2),this.edges.push(new Ov(this.artificialMinVertex,this.artificialMaxVertex)),this.edges.push(new Ov(this.artificialMaxVertex,this.bottomVertex)),this.edges.push(new Ov(this.bottomVertex,this.artificialMinVertex)),this.triangles.push(new Bv(this.artificialMinVertex,this.artificialMaxVertex,this.bottomVertex,this.edges[1],this.edges[2],this.edges[0])),this.firstFrontEdge=this.edges[1],this.edges[1].connectAfter(this.edges[2]),this.firstHullEdge=this.edges[0]}}return _createClass(e,[{key:"step",value:function(){for(var e=this.remainingVertices.shift(),t=e.point.x,n=this.firstFrontEdge;n;){if(t>n.endVertex.point.x){var i=new Ov(n.startVertex,e),r=new Ov(e,n.endVertex);i.connectAfter(r),this.edges.push(i),this.edges.push(r),this.triangles.push(new Bv(n.endVertex,n.startVertex,e,i,r,n)),this.reconnectFrontEdges(n,n,i,r),this.legalizeEdge(n),this.addHalfPiHeuristic(i,r),this.constrainEdges(e,i,r);break}if(t===n.endVertex.point.x){var a=n.nextEdge,s=n,o=n.endVertex,l=a.endVertex,u=s.startVertex,c=new Ov(e,l),h=new Ov(u,e),d=new Ov(o,e);h.connectAfter(c),this.edges.push(c),this.edges.push(h),this.edges.push(d),this.triangles.push(new Bv(l,o,e,d,c,a)),this.triangles.push(new Bv(o,u,e,h,d,s)),this.reconnectFrontEdges(s,a,h,c),this.legalizeEdge(a),this.legalizeEdge(s),this.legalizeEdge(d),this.addHalfPiHeuristic(h,c),this.constrainEdges(e,h,c);break}n=n.nextEdge}}},{key:"fillBorderTriangle",value:function(e,t,n,i,r){var a=new Ov(n,r);return this.edges.push(a),this.triangles.push(new Bv(r,i,n,e,a,t)),this.legalizeEdge(e),this.legalizeEdge(t),a}},{key:"reconnectFrontEdges",value:function(e,t,n,i){var r=e.previousEdge,a=t.nextEdge;r?(r.disconnectAfter(),r.connectAfter(n)):this.firstFrontEdge=n,a&&(t.disconnectAfter(),i.connectAfter(a))}},{key:"addHalfPiHeuristic",value:function(e,t){for(var n=e.endVertex;e.previousEdge&&En.triangleAreaSigned(n.point,e.startVertex.point,e.previousEdge.startVertex.point)>0&&n.point.minus(e.startVertex.point).angleBetween(e.previousEdge.startVertex.point.minus(e.startVertex.point))<Math.PI/2;){var i=e.previousEdge,r=new Ov(i.startVertex,n);this.edges.push(r),this.triangles.push(new Bv(n,e.startVertex,i.startVertex,i,r,e)),this.reconnectFrontEdges(i,e,r,r),this.legalizeEdge(i),this.legalizeEdge(e),e=r}for(;t.nextEdge&&En.triangleAreaSigned(n.point,t.nextEdge.endVertex.point,t.endVertex.point)>0&&n.point.minus(t.endVertex.point).angleBetween(t.nextEdge.endVertex.point.minus(t.endVertex.point))<Math.PI/2;){var a=t.nextEdge,s=new Ov(n,a.endVertex);this.edges.push(s),this.triangles.push(new Bv(n,t.nextEdge.endVertex,t.endVertex,a,t,s)),this.reconnectFrontEdges(t,a,s,s),this.legalizeEdge(a),this.legalizeEdge(t),t=s}}},{key:"constrainEdges",value:function(t,n,i){for(var r=0;r<t.constrainedVertices.length;r++){var a=t.constrainedVertices[r];if(a===n.startVertex||a===i.endVertex)break;var s=[],o=[],l=null,u=null,c=[],h=[],d=e.vertexProduct(t,n.startVertex,a)>0,p=e.vertexProduct(t,i.endVertex,a)<0;if(!d&&!p){var f=n.startVertex,m=void 0;for(l=n.triangles[0];e.vertexProduct(t,m=l.getEdgeOppositeFromVertex(t).getOtherVertex(f),a)<0;)l=l.getEdgeOppositeFromVertex(f).getOtherTriangle(l),f=m;if(l.hasVertex(a))break;c.push(l),u=l.getEdgeOppositeFromVertex(t),h.push(u),s.push(l.getEdgeOppositeFromVertex(f)),o.push(l.getEdgeOppositeFromVertex(u.getOtherVertex(f)))}for(;!d&&!p;)if(u.triangles.length>1){var g=u.getOtherTriangle(l);if(g.hasVertex(a)){c.push(g),s.push(g.getNextEdge(u)),o.push(g.getPreviousEdge(u));break}var y=void 0;g.aEdge!==u&&g.aEdge.intersectsConstrainedEdge(t,a)?y=g.aEdge:g.bEdge!==u&&g.bEdge.intersectsConstrainedEdge(t,a)?y=g.bEdge:g.cEdge!==u&&g.cEdge.intersectsConstrainedEdge(t,a)&&(y=g.cEdge),g.getNextEdge(y)===u?s.push(g.getPreviousEdge(y)):o.push(g.getNextEdge(y)),u=y,h.push(u),l=g,c.push(l)}else a.point.x<t.point.x?p=!0:d=!0;for(var v=0;v<c.length;v++){var A=c[v];J(this.triangles,A),A.remove()}for(var b=0;b<h.length;b++)J(this.edges,h[b]);var S=new Ov(a,t);S.isConstrained=!0,this.edges.push(S),s.push(S),o.push(S),o.reverse(),window.triDebug&&window.triDebug(this),this.triangulatePolygon(s),this.triangulatePolygon(o)}}},{key:"triangulatePolygon",value:function(e){for(;e.length>3;){for(var t=0;t<e.length;t++)e.length;for(var n=0;n<e.length;n++){var i=n<e.length-1?n+1:0,r=e[n],a=e[i],s=r.getSharedVertex(a),o=r.getOtherVertex(s),l=a.getOtherVertex(s);if(!(En.triangleAreaSigned(o.point,s.point,l.point)<=0)){for(var u=l.point.minus(s.point),c=o.point.minus(s.point),h=u.dot(u),d=u.dot(c),p=c.dot(c),f=h*p-d*d,m=e[0].getSharedVertex(e[e.length-1]),g=!1,y=0;y<e.length;y++){var v=e[y].getOtherVertex(m);if(v!==s&&v!==o&&v!==l){var A=v.point.minus(s.point),b=u.dot(A),S=c.dot(A),E=(p*b-d*S)/f,k=(h*S-d*b)/f;if(E>=-1e-10&&k>=-1e-10&&E+k<1+1e-10){g=!0;break}}m=v}if(!g){var V=new Ov(o,l);this.edges.push(V),this.triangles.push(new Bv(o,s,l,a,V,r)),i>n?e.splice(n,2,V):(e.splice(n,1,V),e.splice(i,1)),window.triDebug&&window.triDebug(this)}}}}3===e.length&&(this.triangles.push(new Bv(e[0].getSharedVertex(e[1]),e[1].getSharedVertex(e[2]),e[0].getSharedVertex(e[2]),e[2],e[0],e[1])),window.triDebug&&window.triDebug(this))}},{key:"finalize",value:function(){for(var e=[],t=this.firstFrontEdge.nextEdge;t&&t.nextEdge;)e.push(t),t=t.nextEdge;for(var n=this.firstFrontEdge,i=t,r=0;r<e.length-1;r++){var a=e[r],s=e[r+1];if(En.triangleAreaSigned(s.endVertex.point,a.endVertex.point,a.startVertex.point)>1e-10){var o=this.fillBorderTriangle(a,s,a.startVertex,a.endVertex,s.endVertex);e.splice(r,2,o),r=Math.max(r-2,-1),window.triDebug&&window.triDebug(this)}}this.firstFrontEdge=null;for(var l=[],u=[n],c=n;c!==i;){var h=c.triangles[0];h.remove(),J(this.triangles,h);var d=h.getNonArtificialEdge();if(d){l.push(d);var p=d.getSharedVertex(c);c=h.getEdgeOppositeFromVertex(p)}else u.push(h.getEdgeOppositeFromVertex(c.endVertex)),c=h.getEdgeOppositeFromVertex(c.startVertex);u.push(c)}for(var f=0;f<u.length;f++)J(this.edges,u[f]);window.triDebug&&window.triDebug(this);for(var m=0;m<l.length-1;m++){var g=l[m+1],y=l[m],v=g.getSharedVertex(y),A=g.getOtherVertex(v),b=y.getOtherVertex(v);if(En.triangleAreaSigned(b.point,v.point,A.point)>1e-10){var S=this.fillBorderTriangle(g,y,A,v,b);l.splice(m,2,S),m=Math.max(m-2,-1),window.triDebug&&window.triDebug(this)}}for(var E=0;E<e.length;E++)this.convexHull.push(e[E].startVertex);this.convexHull.push(e[e.length-1].endVertex);for(var k=l.length-1;k>=1;k--)this.convexHull.push(l[k].getSharedVertex(l[k-1]))}},{key:"legalizeEdge",value:function(e){if(_.includes(this.edges,e)&&2===e.triangles.length&&!e.isConstrained){var t=e.triangles[0],n=e.triangles[1],i=t.getVertexOppositeFromEdge(e),r=n.getVertexOppositeFromEdge(e);if(En.pointInCircleFromPoints(t.aVertex.point,t.bVertex.point,t.cVertex.point,r.point)||En.pointInCircleFromPoints(n.aVertex.point,n.bVertex.point,n.cVertex.point,i.point)){t.remove(),n.remove(),J(this.triangles,t),J(this.triangles,n),J(this.edges,e);var a=new Ov(i,r);this.edges.push(a);var s=n.getEdgeOppositeFromVertex(n.getVertexBefore(r)),o=t.getEdgeOppositeFromVertex(t.getVertexAfter(i)),l=t.getEdgeOppositeFromVertex(t.getVertexBefore(i)),u=n.getEdgeOppositeFromVertex(n.getVertexAfter(r));this.triangles.push(new Bv(i,r,t.getVertexBefore(i),s,o,a)),this.triangles.push(new Bv(r,i,n.getVertexBefore(r),l,u,a)),this.legalizeEdge(s),this.legalizeEdge(o),this.legalizeEdge(l),this.legalizeEdge(u)}}}}],[{key:"vertexComparison",value:function(e,t){return e=e.point,t=t.point,e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}},{key:"vertexProduct",value:function(e,t,n){var i=t.point.minus(e.point),r=n.point.minus(e.point);return i.crossScalar(r)}}]),e}();xt.register("DelaunayTriangulation",Nv);var qv=function(){function e(t,n){_classCallCheck(this,e),this.point=t,this.index=n,this.sortedIndex=-1,this.constrainedVertices=[]}return _createClass(e,[{key:"isArtificial",value:function(){return this.index<0}}]),e}(),Ov=function(){function e(t,n){_classCallCheck(this,e),this.startVertex=t,this.endVertex=n,this.triangles=[],this.nextEdge=null,this.previousEdge=null,this.isConstrained=!1}return _createClass(e,[{key:"isArtificial",value:function(){return this.startVertex.isArtificial()||this.endVertex.isArtificial()}},{key:"connectAfter",value:function(e){this.nextEdge=e,e.previousEdge=this}},{key:"disconnectAfter",value:function(){this.nextEdge.previousEdge=null,this.nextEdge=null}},{key:"addTriangle",value:function(e){this.triangles.push(e)}},{key:"removeTriangle",value:function(e){J(this.triangles,e)}},{key:"getSharedTriangle",value:function(e){for(var t=0;t<this.triangles.length;t++)for(var n=this.triangles[t],i=0;i<e.triangles.length;i++)if(e.triangles[i]===n)return n;throw new Error("No common triangle")}},{key:"getSharedVertex",value:function(e){return this.startVertex===e.startVertex||this.startVertex===e.endVertex?this.startVertex:this.endVertex}},{key:"getOtherVertex",value:function(e){return e===this.startVertex?this.endVertex:this.startVertex}},{key:"getOtherTriangle",value:function(e){return this.triangles[0]===e?this.triangles[1]:this.triangles[0]}},{key:"intersectsConstrainedEdge",value:function(e,t){return En.lineSegmentIntersection(e.point.x,e.point.y,t.point.x,t.point.y,this.startVertex.point.x,this.startVertex.point.y,this.endVertex.point.x,this.endVertex.point.y)}}]),e}(),Bv=function(){function e(t,n,i,r,a,s){_classCallCheck(this,e),this.aVertex=t,this.bVertex=n,this.cVertex=i,this.aEdge=r,this.bEdge=a,this.cEdge=s,this.aEdge.addTriangle(this),this.bEdge.addTriangle(this),this.cEdge.addTriangle(this)}return _createClass(e,[{key:"hasVertex",value:function(e){return this.aVertex===e||this.bVertex===e||this.cVertex===e}},{key:"getVertexOppositeFromEdge",value:function(e){return e===this.aEdge?this.aVertex:e===this.bEdge?this.bVertex:this.cVertex}},{key:"getEdgeOppositeFromVertex",value:function(e){return e===this.aVertex?this.aEdge:e===this.bVertex?this.bEdge:this.cEdge}},{key:"getVertexBefore",value:function(e){return e===this.aVertex?this.cVertex:e===this.bVertex?this.aVertex:this.bVertex}},{key:"getVertexAfter",value:function(e){return e===this.aVertex?this.bVertex:e===this.bVertex?this.cVertex:this.aVertex}},{key:"getNonArtificialEdge",value:function(){return this.aEdge.isArtificial()?this.bEdge.isArtificial()?this.cEdge.isArtificial()?null:this.cEdge:this.bEdge:this.aEdge}},{key:"getNextEdge",value:function(e){if(this.aEdge===e)return this.bEdge;if(this.bEdge===e)return this.cEdge;if(this.cEdge===e)return this.aEdge;throw new Error("illegal edge")}},{key:"getPreviousEdge",value:function(e){if(this.aEdge===e)return this.cEdge;if(this.bEdge===e)return this.aEdge;if(this.cEdge===e)return this.bEdge;throw new Error("illegal edge")}},{key:"isArtificial",value:function(){return this.aVertex.isArtificial()||this.bVertex.isArtificial()||this.cVertex.isArtificial()}},{key:"remove",value:function(){this.aEdge.removeTriangle(this),this.bEdge.removeTriangle(this),this.cEdge.removeTriangle(this)}}]),e}(),Gv=function(){function e(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];_classCallCheck(this,e),this.a1=t,this.a2=n,this.b1=i,this.b2=r,this.clamp=a}return _createClass(e,[{key:"evaluate",value:function(e){return Hv(this.a1,this.a2,this.b1,this.b2,e,this.clamp)}},{key:"inverse",value:function(e){return Hv(this.b1,this.b2,this.a1,this.a2,e,this.clamp)}}]),e}(),Hv=function(e,t,n,i,r,a){var s=En.linear(e,t,n,i,r);if(a){var o=Math.max(n,i),l=Math.min(n,i);s=En.clamp(s,l,o)}return s};xt.register("LinearFunction",Gv);var Fv=Math.sqrt(.5),Yv={Array:xt.FastArray,index3:function(e,t){return 3*e+t},set3:function(e,t){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8]},transpose3:function(e,t){var n=e[3],i=e[6],r=e[1],a=e[7],s=e[2],o=e[5];t[0]=e[0],t[1]=n,t[2]=i,t[3]=r,t[4]=e[4],t[5]=a,t[6]=s,t[7]=o,t[8]=e[8]},det3:function(e){return e[0]*e[4]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]-e[1]*e[3]*e[8]-e[0]*e[5]*e[7]},mult3:function(e,t,n){var i=e[0]*t[0]+e[1]*t[3]+e[2]*t[6],r=e[0]*t[1]+e[1]*t[4]+e[2]*t[7],a=e[0]*t[2]+e[1]*t[5]+e[2]*t[8],s=e[3]*t[0]+e[4]*t[3]+e[5]*t[6],o=e[3]*t[1]+e[4]*t[4]+e[5]*t[7],l=e[3]*t[2]+e[4]*t[5]+e[5]*t[8],u=e[6]*t[0]+e[7]*t[3]+e[8]*t[6],c=e[6]*t[1]+e[7]*t[4]+e[8]*t[7],h=e[6]*t[2]+e[7]*t[5]+e[8]*t[8];n[0]=i,n[1]=r,n[2]=a,n[3]=s,n[4]=o,n[5]=l,n[6]=u,n[7]=c,n[8]=h},mult3LeftTranspose:function(e,t,n){var i=e[0]*t[0]+e[3]*t[3]+e[6]*t[6],r=e[0]*t[1]+e[3]*t[4]+e[6]*t[7],a=e[0]*t[2]+e[3]*t[5]+e[6]*t[8],s=e[1]*t[0]+e[4]*t[3]+e[7]*t[6],o=e[1]*t[1]+e[4]*t[4]+e[7]*t[7],l=e[1]*t[2]+e[4]*t[5]+e[7]*t[8],u=e[2]*t[0]+e[5]*t[3]+e[8]*t[6],c=e[2]*t[1]+e[5]*t[4]+e[8]*t[7],h=e[2]*t[2]+e[5]*t[5]+e[8]*t[8];n[0]=i,n[1]=r,n[2]=a,n[3]=s,n[4]=o,n[5]=l,n[6]=u,n[7]=c,n[8]=h},mult3RightTranspose:function(e,t,n){var i=e[0]*t[0]+e[1]*t[1]+e[2]*t[2],r=e[0]*t[3]+e[1]*t[4]+e[2]*t[5],a=e[0]*t[6]+e[1]*t[7]+e[2]*t[8],s=e[3]*t[0]+e[4]*t[1]+e[5]*t[2],o=e[3]*t[3]+e[4]*t[4]+e[5]*t[5],l=e[3]*t[6]+e[4]*t[7]+e[5]*t[8],u=e[6]*t[0]+e[7]*t[1]+e[8]*t[2],c=e[6]*t[3]+e[7]*t[4]+e[8]*t[5],h=e[6]*t[6]+e[7]*t[7]+e[8]*t[8];n[0]=i,n[1]=r,n[2]=a,n[3]=s,n[4]=o,n[5]=l,n[6]=u,n[7]=c,n[8]=h},mult3BothTranspose:function(e,t,n){var i=e[0]*t[0]+e[3]*t[1]+e[6]*t[2],r=e[0]*t[3]+e[3]*t[4]+e[6]*t[5],a=e[0]*t[6]+e[3]*t[7]+e[6]*t[8],s=e[1]*t[0]+e[4]*t[1]+e[7]*t[2],o=e[1]*t[3]+e[4]*t[4]+e[7]*t[5],l=e[1]*t[6]+e[4]*t[7]+e[7]*t[8],u=e[2]*t[0]+e[5]*t[1]+e[8]*t[2],c=e[2]*t[3]+e[5]*t[4]+e[8]*t[5],h=e[2]*t[6]+e[5]*t[7]+e[8]*t[8];n[0]=i,n[1]=r,n[2]=a,n[3]=s,n[4]=o,n[5]=l,n[6]=u,n[7]=c,n[8]=h},mult3Vector3:function(e,t,n){var i=e[0]*t.x+e[1]*t.y+e[2]*t.z,r=e[3]*t.x+e[4]*t.y+e[5]*t.z,a=e[6]*t.x+e[7]*t.y+e[8]*t.z;n.x=i,n.y=r,n.z=a},swapNegateColumn:function(e,t,n){var i=e[t],r=e[t+3],a=e[t+6];e[t]=e[n],e[t+3]=e[n+3],e[t+6]=e[n+6],e[n]=-i,e[n+3]=-r,e[n+6]=-a},setIdentity3:function(e){e[0]=e[4]=e[8]=1,e[1]=e[2]=e[3]=e[5]=e[6]=e[7]=0},setGivens3:function(e,t,n,i,r){this.setIdentity3(e),e[this.index3(i,i)]=t,e[this.index3(r,r)]=t,e[this.index3(i,r)]=n,e[this.index3(r,i)]=-n},preMult3Givens:function(e,t,n,i,r){var a=3*i,s=3*r,o=t*e[a+0]+n*e[s+0],l=t*e[s+0]-n*e[a+0],u=t*e[a+1]+n*e[s+1],c=t*e[s+1]-n*e[a+1],h=t*e[a+2]+n*e[s+2],d=t*e[s+2]-n*e[a+2];e[a+0]=o,e[s+0]=l,e[a+1]=u,e[s+1]=c,e[a+2]=h,e[s+2]=d},postMult3Givens:function(e,t,n,i,r){var a=t*e[i+0]+n*e[r+0],s=t*e[r+0]-n*e[i+0],o=t*e[i+3]+n*e[r+3],l=t*e[r+3]-n*e[i+3],u=t*e[i+6]+n*e[r+6],c=t*e[r+6]-n*e[i+6];e[i+0]=a,e[r+0]=s,e[i+3]=o,e[r+3]=l,e[i+6]=u,e[r+6]=c},applyJacobi3:function(e,t,n,i){var r=e[3*n+n],a=e[3*n+i],s=e[3*i+i],o=a*a,l=r-s,u=o<(l*=l),c=1/Math.sqrt(o+l),h=u?c*(r-s):Fv,d=u?c*a:Fv;this.preMult3Givens(e,h,d,n,i),this.postMult3Givens(e,h,d,n,i),this.preMult3Givens(t,h,d,n,i)},jacobiIteration3:function(e,t,n){for(var i=0;i<n;i++)this.applyJacobi3(e,t,0,1),this.applyJacobi3(e,t,0,2),this.applyJacobi3(e,t,1,2)},qrAnnihilate3:function(e,t,n,i){var r,a,s=t[this.index3(i,i)],o=t[this.index3(n,i)],l=s*s,u=o*o;if(l+u<1e-10)r=s>0?1:0,a=0;else{var c=1/Math.sqrt(l+u);r=c*s,a=c*o}this.preMult3Givens(t,r,a,i,n),this.postMult3Givens(e,r,a,i,n)},svd3:function(e,t,n,i,r){var a=n,s=r,o=i;this.mult3LeftTranspose(e,e,o),this.setIdentity3(a),this.jacobiIteration3(o,a,t),this.transpose3(a,s),this.mult3(e,s,o);var l,u=o[0]*o[0]+o[3]*o[3]+o[6]*o[6],c=o[1]*o[1]+o[4]*o[4]+o[7]*o[7],h=o[2]*o[2]+o[5]*o[5]+o[8]*o[8];u<c&&(l=u,u=c,c=l,this.swapNegateColumn(o,0,1),this.swapNegateColumn(s,0,1)),u<h&&(l=u,u=h,h=l,this.swapNegateColumn(o,0,2),this.swapNegateColumn(s,0,2)),c<h&&(this.swapNegateColumn(o,1,2),this.swapNegateColumn(s,1,2)),this.setIdentity3(a),this.qrAnnihilate3(a,o,1,0),this.qrAnnihilate3(a,o,2,0),this.qrAnnihilate3(a,o,2,1);a[0]*a[0]+a[1]*a[1]+a[2]*a[2]<.001&&(a[0]=1),a[3]*a[3]+a[4]*a[4]+a[5]*a[5]<.001&&(a[4]=1),a[6]*a[6]+a[7]*a[7]+a[8]*a[8]<.001&&(a[8]=1)},setVectors3:function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];t[i]=r.x,t[i+n]=r.y,t[i+2*n]=r.z}},getColumnVector3:function(e,t,n,i,r){r.x=n[i],r.y=n[i+t],r.z=n[i+2*t]},index:function(e,t,n,i){return t*n+i},transpose:function(e,t,n,i){for(var r=0;r<e;r++)for(var a=0;a<t;a++)i[e*a+r]=n[t*r+a]},mult:function(e,t,n,i,r,a){for(var s=0;s<e;s++)for(var o=0;o<n;o++){for(var l=0,u=0;u<t;u++)l+=i[this.index(e,t,s,u)]*r[this.index(t,n,u,o)];a[this.index(e,n,s,o)]=l}},multRightTranspose:function(e,t,n,i,r,a){for(var s=0;s<e;s++)for(var o=0;o<n;o++){for(var l=0,u=0;u<t;u++)l+=i[this.index(e,t,s,u)]*r[this.index(n,t,o,u)];a[this.index(e,n,s,o)]=l}},permuteColumns:function(e,t,n,i,r){for(var a=0;a<t;a++)for(var s=i.indices[a],o=0;o<e;o++)r[this.index(e,t,o,a)]=n[this.index(e,t,o,s)]}};xt.register("MatrixOps3",Yv);var zv=function(){function e(t,n){_classCallCheck(this,e),this.normal=t,this.distance=n}return _createClass(e,[{key:"intersectWithRay",value:function(e){return e.pointAtDistance(e.distanceToPlane(this))}}],[{key:"fromTriangle",value:function(t,n,i){var r=i.minus(t).cross(n.minus(t));return 0===r.magnitude?null:(r.normalize(),new e(r,r.dot(t)))}}]),e}();xt.register("Plane3",zv),zv.XY=new zv(new un(0,0,1),0),zv.XZ=new zv(new un(0,1,0),0),zv.YZ=new zv(new un(1,0,0),0);var Uv=function(){function e(t,n,i,r){_classCallCheck(this,e),this.setXYZW(t,n,i,r)}return _createClass(e,[{key:"setXYZW",value:function(e,t,n,i){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0,this.z=void 0!==n?n:0,this.w=void 0!==i?i:1}},{key:"plus",value:function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}},{key:"timesScalar",value:function(t){return new e(this.x*t,this.y*t,this.z*t,this.w*t)}},{key:"timesQuaternion",value:function(t){return new e(this.x*t.w-this.z*t.y+this.y*t.z+this.w*t.x,-this.x*t.z+this.y*t.w+this.z*t.x+this.w*t.y,this.x*t.y-this.y*t.x+this.z*t.w+this.w*t.z,-this.x*t.x-this.y*t.y-this.z*t.z+this.w*t.w)}},{key:"timesVector3",value:function(e){return 0===e.magnitude?new un(0,0,0):new un(this.w*this.w*e.x+2*this.y*this.w*e.z-2*this.z*this.w*e.y+this.x*this.x*e.x+2*this.y*this.x*e.y+2*this.z*this.x*e.z-this.z*this.z*e.x-this.y*this.y*e.x,2*this.x*this.y*e.x+this.y*this.y*e.y+2*this.z*this.y*e.z+2*this.w*this.z*e.x-this.z*this.z*e.y+this.w*this.w*e.y-2*this.x*this.w*e.z-this.x*this.x*e.y,2*this.x*this.z*e.x+2*this.y*this.z*e.y+this.z*this.z*e.z-2*this.w*this.y*e.x-this.y*this.y*e.z+2*this.w*this.x*e.y-this.x*this.x*e.z+this.w*this.w*e.z)}},{key:"getMagnitude",value:function(){return Math.sqrt(this.magnitudeSquared)}},{key:"magnitude",get:function(){return this.getMagnitude()}},{key:"getMagnitudeSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"magnitudeSquared",get:function(){return this.getMagnitudeSquared()}},{key:"normalized",value:function(){var e=this.magnitude;return this.timesScalar(1/e)}},{key:"negated",value:function(){return new e(-this.x,-this.y,-this.z,-this.w)}},{key:"toRotationMatrix",value:function(){var e=this.magnitudeSquared,t=1===e?2:e>0?2/e:0,n=this.x*this.x*t,i=this.x*this.y*t,r=this.x*this.z*t,a=this.w*this.x*t,s=this.y*this.y*t,o=this.y*this.z*t,l=this.w*this.y*t,u=this.z*this.z*t,c=this.w*this.z*t;return oi.pool.fetch().columnMajor(1-(s+u),i+c,r-l,i-c,1-(n+u),o+a,r+l,o-a,1-(n+s))}}],[{key:"fromEulerAngles",value:function(t,n,i){var r=Math.sin(.5*i),a=Math.cos(.5*i),s=Math.sin(.5*n),o=Math.cos(.5*n),l=Math.sin(.5*t),u=Math.cos(.5*t),c=o*a,h=s*r,d=o*r,p=s*a;return new e(c*l+h*u,p*u+d*l,d*u-p*l,c*u-h*l)}},{key:"fromRotationMatrix",value:function(t){var n,i=t.m00(),r=t.m01(),a=t.m02(),s=t.m10(),o=t.m11(),l=t.m12(),u=t.m20(),c=t.m21(),h=t.m22(),d=i+o+h;return d>=0?new e(.5*(c-l)/(n=Math.sqrt(d+1)),.5*(a-u)/n,.5*(s-r)/n,.5*n):i>o&&i>h?new e(.5*(n=Math.sqrt(1+i-o-h)),.5*(s+r)/n,.5*(a+u)/n,.5*(c-l)/n):o>h?new e(.5*(s+r)/(n=Math.sqrt(1+o-i-h)),.5*n,.5*(c+l)/n,.5*(a-u)/n):new e(.5*(a+u)/(n=Math.sqrt(1+h-i-o)),.5*(c+l)/n,.5*n,.5*(s-r)/n)}},{key:"getRotationQuaternion",value:function(t,n){return e.fromRotationMatrix(oi.rotateAToB(t,n))}},{key:"slerp",value:function(t,n,i){if(t.x===n.x&&t.y===n.y&&t.z===n.z&&t.w===n.w)return t;var r=t.x*n.x+t.y*n.y+t.z*n.z+t.w*n.w;r<0&&(n=n.negated(),r=-r);var a=1-i,s=i;if(1-r>.1){var o=Math.acos(r),l=1/Math.sin(o);a=Math.sin((1-i)*o)*l,s=Math.sin(i*o)*l}return new e(a*t.x+s*n.x,a*t.y+s*n.y,a*t.z+s*n.z,a*t.w+s*n.w)}}]),e}();Uv.prototype.isQuaternion=!0,xt.register("Quaternion",Uv),Gi.mixInto(Uv,{initialize:Uv.prototype.setXYZW});var Wv=function(){function e(t,n){_classCallCheck(this,e),this.position=t,this.direction=n}return _createClass(e,[{key:"shifted",value:function(t){return new e(this.pointAtDistance(t),this.direction)}},{key:"pointAtDistance",value:function(e){return this.position.plus(this.direction.timesScalar(e))}},{key:"distanceToPlane",value:function(e){return(e.distance-this.position.dot(e.normal))/this.direction.dot(e.normal)}},{key:"toString",value:function(){return"".concat(this.position.toString()," => ").concat(this.direction.toString())}}]),e}();xt.register("Ray3",Wv);var jv=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){return _classCallCheck(this,n),t.call(this,e,i,e+r,i+a)}return _createClass(n)}(jn);xt.register("Rectangle",jv);var Xv=function(){function e(t,n){_classCallCheck(this,e),this.center=t,this.radius=n}return _createClass(e,[{key:"intersect",value:function(e,t){var n=e.direction,i=e.position,r=i.minus(this.center),a=n.dot(r),s=4*a*a-4*(r.magnitudeSquared-this.radius*this.radius);if(s<t)return null;var o=n.dot(this.center)-n.dot(i),l=Math.sqrt(s)/2,u=o-l,c=o+l;if(c<t)return null;var h=e.pointAtDistance(c),d=h.minus(this.center).normalized();if(u<t)return{distance:c,hitPoint:h,normal:d.negated(),fromOutside:!1};var p=e.pointAtDistance(u),f=p.minus(this.center).normalized();return{distance:u,hitPoint:p,normal:f,fromOutside:!0}}},{key:"intersections",value:function(e,t){var n=e.direction,i=e.position,r=i.minus(this.center),a=n.dot(r),s=4*a*a-4*(r.magnitudeSquared-this.radius*this.radius);if(s<t)return[];var o=n.dot(this.center)-n.dot(i),l=Math.sqrt(s)/2,u=o-l,c=o+l;if(c<t)return[];var h=e.pointAtDistance(c),d=h.minus(this.center).normalized(),p=e.pointAtDistance(u),f=p.minus(this.center).normalized(),m={distance:c,hitPoint:h,normal:d.negated(),fromOutside:!1},g={distance:u,hitPoint:p,normal:f,fromOutside:!0};return u<t?[m,g]:[g,m]}}]),e}();xt.register("Sphere3",Xv);var Qv=new ii;var Kv=function(){function e(t){_classCallCheck(this,e),this.matrix=ii.IDENTITY.copy(),this.inverse=ii.IDENTITY.copy(),this.matrixTransposed=ii.IDENTITY.copy(),this.inverseTransposed=ii.IDENTITY.copy(),this.inverseValid=!0,this.transposeValid=!0,this.inverseTransposeValid=!0,this.changeEmitter=new d,t&&this.setMatrix(t)}return _createClass(e,[{key:"setMatrix",value:function(e){this.matrix.set(e),this.invalidate()}},{key:"invalidate",value:function(){this.inverseValid=!1,this.transposeValid=!1,this.inverseTransposeValid=!1,this.changeEmitter.emit()}},{key:"prepend",value:function(e){Qv.set(this.matrix),this.matrix.set(e),this.matrix.multiplyMatrix(Qv),this.invalidate()}},{key:"append",value:function(e){this.matrix.multiplyMatrix(e),this.invalidate()}},{key:"prependTransform",value:function(e){this.prepend(e.matrix)}},{key:"appendTransform",value:function(e){this.append(e.matrix)}},{key:"applyToCanvasContext",value:function(e){e.setTransform(this.matrix.m00(),this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m03(),this.matrix.m13())}},{key:"copy",value:function(){var t=new e(this.matrix);t.inverse=this.inverse,t.matrixTransposed=this.matrixTransposed,t.inverseTransposed=this.inverseTransposed,t.inverseValid=this.inverseValid,t.transposeValid=this.transposeValid,t.inverseTransposeValid=this.inverseTransposeValid}},{key:"getMatrix",value:function(){return this.matrix}},{key:"getInverse",value:function(){return this.inverseValid||(this.inverseValid=!0,this.inverse.set(this.matrix),this.inverse.invert()),this.inverse}},{key:"getMatrixTransposed",value:function(){return this.transposeValid||(this.transposeValid=!0,this.matrixTransposed.set(this.matrix),this.matrixTransposed.transpose()),this.matrixTransposed}},{key:"getInverseTransposed",value:function(){return this.inverseTransposeValid||(this.inverseTransposeValid=!0,this.inverseTransposed.set(this.getInverse()),this.inverseTransposed.transpose()),this.inverseTransposed}},{key:"isIdentity",value:function(){return this.matrix.type===ii.Types.IDENTITY}},{key:"isFinite",value:function(){return this.matrix.isFinite()}},{key:"transformPosition3",value:function(e){return this.matrix.timesVector3(e)}},{key:"transformDelta3",value:function(e){return this.matrix.timesRelativeVector3(e)}},{key:"transformNormal3",value:function(e){return this.getInverse().timesTransposeVector3(e)}},{key:"transformDeltaX",value:function(e){return this.transformDelta3(new un(e,0,0)).x}},{key:"transformDeltaY",value:function(e){return this.transformDelta3(new un(0,e,0)).y}},{key:"transformDeltaZ",value:function(e){return this.transformDelta3(new un(0,0,e)).z}},{key:"transformRay",value:function(e){return new Wv(this.transformPosition3(e.position),this.transformPosition3(e.position.plus(e.direction)).minus(this.transformPosition3(e.position)))}},{key:"inversePosition3",value:function(e){return this.getInverse().timesVector3(e)}},{key:"inverseDelta3",value:function(e){return this.inversePosition3(e).minus(this.inversePosition3(un.ZERO))}},{key:"inverseNormal3",value:function(e){return this.matrix.timesTransposeVector3(e)}},{key:"inverseDeltaX",value:function(e){return this.inverseDelta3(new un(e,0,0)).x}},{key:"inverseDeltaY",value:function(e){return this.inverseDelta3(new un(0,e,0)).y}},{key:"inverseDeltaZ",value:function(e){return this.inverseDelta3(new un(0,0,e)).z}},{key:"inverseRay",value:function(e){return new Wv(this.inversePosition3(e.position),this.inversePosition3(e.position.plus(e.direction)).minus(this.inversePosition3(e.position)))}}]),e}();xt.register("Transform4",Kv);var Jv=xt,Zv=new c("griddle"),$v=QueryStringMachine.getAll({backgroundColor:{type:"string",defaultValue:"white"},slider:{type:"string",defaultValue:null},component:{type:"string",defaultValue:null},fontFamily:{type:"string",defaultValue:'"Helvetica Neue", Helvetica, Arial, "Lucida Grande"'}});Iy.register("sceneryPhetQueryParameters",$v);var eA=$v,tA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),i="number"==typeof e||"string"==typeof e?{size:e}:e||{},(i=k({family:eA.fontFamily},i)).family="".concat(i.family,", sans-serif"),t.call(this,i)}return _createClass(n)}(Qr);Iy.register("PhetFont",tA);var nA=new c("sun"),iA={fill:"white",stroke:"black",lineWidth:1,lineDash:[],xMargin:5,yMargin:5,cornerRadius:10,resize:!0,backgroundPickable:!0,excludeInvisibleChildrenFromBounds:!0,align:"left",minWidth:0,minHeight:0,tandem:xe.OPTIONAL},rA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=E()({},iA,i);return(r=t.call(this))._content=e,r._backgroundContainer=new jo,r._background=new iu(0,0,1,1,{lineWidth:a.lineWidth,pickable:a.backgroundPickable,lineDash:a.lineDash,cornerRadius:a.cornerRadius}),r.setStroke(a.stroke),r.setFill(a.fill),r.addChild(r._backgroundContainer),r.addChild(e),r.constraint=new aA(_assertThisInitialized(r),a),r.constraint.updateLayout(),r.constraint.enabled=a.resize,r.mutate(a),r}return _createClass(n,[{key:"getStroke",value:function(){return this._background.stroke}},{key:"stroke",get:function(){return this.getStroke()},set:function(e){this.setStroke(e)}},{key:"setStroke",value:function(e){this._background.stroke=e,this.constraint&&this.constraint.updateLayoutAutomatically()}},{key:"getFill",value:function(){return this._background.fill}},{key:"fill",get:function(){return this.getFill()},set:function(e){this.setFill(e)}},{key:"setFill",value:function(e){this._background.fill=e}},{key:"setExcludeInvisibleChildrenFromBounds",value:function(e){_get(_getPrototypeOf(n.prototype),"setExcludeInvisibleChildrenFromBounds",this).call(this,e),this.constraint.updateLayoutAutomatically()}},{key:"dispose",value:function(){this.constraint.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(vl(jo));_defineProperty(rA,"DEFAULT_PANEL_OPTIONS",iA);var aA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),(r=t.call(this,e)).panel=e,r.minWidth=i.minWidth,r.minHeight=i.minHeight,r.xMargin=i.xMargin,r.yMargin=i.yMargin,r.lineWidth=i.lineWidth,r.align=i.align,r.panel.localPreferredWidthProperty.lazyLink(r._updateLayoutListener),r.panel.localPreferredHeightProperty.lazyLink(r._updateLayoutListener),r.addNode(e._content),r}return _createClass(n,[{key:"layout",value:function(){_get(_getPrototypeOf(n.prototype),"layout",this).call(this);var e=this.panel,t=e._content,i=e._background,r=null===e.stroke?0:this.lineWidth,a=e.isChildIncludedInLayout(t);if(e._backgroundContainer.children=a?[i]:[],!a)return e.localMinimumWidth=null,void(e.localMinimumHeight=null);var s=ol(t)&&null!==t.minimumWidth?t.minimumWidth:t.width,o=dl(t)&&null!==t.minimumHeight?t.minimumHeight:t.height,l=Math.max(this.minWidth,s+2*this.xMargin)+r,u=Math.max(this.minHeight,o+2*this.yMargin)+r,c=null===e.localPreferredWidth?l:e.localPreferredWidth,h=null===e.localPreferredHeight?u:e.localPreferredHeight;ol(t)&&null!==e.localPreferredWidth&&(t.preferredWidth=c-r-2*this.xMargin),dl(t)&&null!==e.localPreferredHeight&&(t.preferredHeight=h-r-2*this.yMargin),i.setRect(0,0,c-r,h-r),"center"===this.align?t.center=i.center:"left"===this.align?(t.left=i.centerX-i.rectWidth/2+this.xMargin,t.centerY=i.centerY):(t.right=i.centerX+i.rectWidth/2-this.xMargin,t.centerY=i.centerY),e.localMinimumWidth=l,e.localMinimumHeight=u}},{key:"dispose",value:function(){this.panel.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.panel.localPreferredHeightProperty.unlink(this._updateLayoutListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(wp);nA.register("Panel",rA);var sA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n),r=A({borderColor:"black",borderWidth:1,barWidth:15,showOffScaleArrow:!0,offScaleArrowFill:"#bbb",offScaleArrowOffset:5,invalidBarColor:"gray",scaleProperty:new Nt(1)},r),(a=t.call(this)).barEntries=e,a.totalRangeProperty=i,a.borderWidth=r.borderWidth,a.scaleProperty=r.scaleProperty,a.showOffScaleArrow=r.showOffScaleArrow,a.offScaleArrowOffset=r.offScaleArrowOffset,a.invalidBarColor=r.invalidBarColor,a.bars=a.barEntries.map((function(e){return new iu(0,0,r.barWidth,0,{centerX:0})})),a.borderRectangle=new iu(0,0,r.barWidth+2*r.borderWidth,0,{fill:r.borderColor,centerX:0}),a.offScaleArrow=new Dy(0,0,0,r.barWidth,{fill:r.offScaleArrowFill,stroke:"black",headHeight:r.barWidth/2,headWidth:r.barWidth,tailWidth:3*r.barWidth/5,centerX:0});var s=[a.borderRectangle].concat(a.bars);return r.showOffScaleArrow&&s.push(a.offScaleArrow),r.children=s,a.mutate(r),a.update(),a}return _createClass(n,[{key:"update",value:function(){var e=this.scaleProperty.value,t=this.offScaleArrow.height+this.offScaleArrowOffset,n=this.totalRangeProperty.value;n=new Tt(n.min<0?n.min+this.borderWidth:n.min,n.max-this.borderWidth),this.showOffScaleArrow&&(n=new Tt(n.min<0?n.min+t:n.min,n.max-t));for(var i=0,r=!1,a=0;a<this.barEntries.length;a++){var s=this.barEntries[a].property.value*e;s<0&&(r=!0),i+=s}var o=0;if(r&&this.barEntries.length>1){o=n.constrainValue(i);var l=this.bars[0];l.fill=this.invalidBarColor,oA(l,0,o),l.visible=!0;for(var u=1;u<this.barEntries.length;u++)this.bars[u].visible=!1}else for(var c=0;c<this.barEntries.length;c++){var h=this.barEntries[c],d=this.bars[c];d.fill=h.color;var p=h.property.value*e,f=n.constrainValue(o+p);f!==o?(oA(d,o,f),d.visible=!0):d.visible=!1,o=f}o===n.max?(this.offScaleArrow.visible=!0,this.offScaleArrow.rotation=0,this.offScaleArrow.y=n.max+this.offScaleArrowOffset):o===n.min&&o<0?(this.offScaleArrow.visible=!0,this.offScaleArrow.rotation=Math.PI,this.offScaleArrow.y=n.min-this.offScaleArrowOffset):this.offScaleArrow.visible=!1,oA(this.borderRectangle,0,o+this.borderWidth*Math.sign(o)),this.borderRectangle.visible=0!==o}}]),n}(jo);function oA(e,t,n){e.rectY=Math.min(t,n),e.rectHeight=Math.abs(t-n)}Zv.register("BarNode",sA);var lA=sA,uA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n),r=A({barSpacing:12,xAxisOptions:{stroke:"black",lineWidth:1,minPadding:8,maxExtension:5},barOptions:{},barLabelOptions:null,labelBackgroundColor:Rr.TRANSPARENT},r),(a=t.call(this)).bars=e,r.barOptions=A({},r.barOptions,{rotation:Math.PI}),r.barLabelOptions=A({font:new tA({size:12,weight:"bold"}),rotation:-Math.PI/2,maxWidth:40},r.barLabelOptions),a.barNodes=e.map((function(e){var t=A({offScaleArrowFill:void 0===e.offScaleArrowFill?e.entries.length>1?"#bbb":e.entries[0].color:e.offScaleArrowFill},r.barOptions);return new lA(e.entries,i,t)})),a.barLabelNodes=e.map((function(e){var t=new gf({spacing:4});if(e.labelString){var n=new Pf(e.labelString,A({},r.barLabelOptions,{fill:e.labelColor||"black"})),i=new rA(n,{stroke:null,fill:r.labelBackgroundColor,cornerRadius:3,xMargin:0,yMargin:2});t.addChild(i)}return e.labelNode&&t.addChild(e.labelNode),t}));for(var s=new mf({spacing:r.barSpacing,align:"origin",children:a.barNodes}),o=new jo({children:a.barLabelNodes}),l=0;l<e.length;l++)void 0!==o.children[l].children[0]&&(o.children[l].centerX=a.barNodes[l].centerX,o.children[l].top=3);a.addChild(s),a.addChild(o);var u=new tu(-r.xAxisOptions.minPadding,0,s.width+r.xAxisOptions.maxExtension,0,r.xAxisOptions);a.addChild(u);var c=new Dy(0,0,0,-i.value.max,{tailWidth:.5,headHeight:9,headWidth:8});a.addChild(c);var h=function(e){c.setTailAndTip(-r.xAxisOptions.minPadding,0,-r.xAxisOptions.minPadding,-e.max),a.localBounds=a.localBounds.withMinY(Math.min(c.bottom,-e.max)).withMaxY(Math.max(r.xAxisOptions.lineWidth/2,-e.min,o.bottom))};return i.link(h),a.mutate(r),a.disposeBarChartNode=function(){i.unlink(h)},a}return _createClass(n,[{key:"dispose",value:function(){this.disposeBarChartNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"update",value:function(){for(var e=0;e<this.barNodes.length;e++)this.barNodes[e].update()}}]),n}(jo);Zv.register("BarChartNode",uA);var cA=function(){function e(t){_classCallCheck(this,e),this.data=[],this.emitter=new Et,t=A({color:new Rr("black"),lineWidth:1,lineJoin:"miter",radius:2,visibleProperty:new pt(!0)},t),this.color=t.color,this.lineWidth=t.lineWidth,this.lineJoin=t.lineJoin,this.radius=t.radius,this.visibleProperty=t.visibleProperty}return _createClass(e,[{key:"shiftData",value:function(){this.data.shift(),this.emitter.emit()}},{key:"getLength",value:function(){return this.data.length}},{key:"addDynamicSeriesListener",value:function(e){this.emitter.addListener(e)}},{key:"removeDynamicSeriesListener",value:function(e){this.emitter.removeListener(e)}},{key:"clear",value:function(){this.data.length=0,this.emitter.emit()}},{key:"addXYDataPoint",value:function(e,t){this.addDataPoint(new pn(e,t))}},{key:"addDataPoint",value:function(e){this.data.push(e),this.emitter.emit()}},{key:"getDataPoint",value:function(e){return this.data[e]}},{key:"hasData",value:function(){return this.data.length>0}},{key:"removeDataPoints",value:function(e){var t=this;e.forEach((function(e){t.data.slice().forEach((function(n,i){e.equals(n)&&t.data.splice(i,1)}))})),this.emitter.emit()}},{key:"removeDataPointsAtX",value:function(e){var t=this;e.forEach((function(e){t.data.slice().forEach((function(n,i){e===n.x&&t.data.splice(i,1)}))})),this.emitter.emit()}}]),e}();Zv.register("DynamicSeries",cA);var hA=cA,dA=T.byKeys(["SCATTER","LINE"]),pA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s){var o;_classCallCheck(this,n),s=A({plotStyle:dA.LINE},s),(o=t.call(this,{canvasBounds:r})).modelViewTransformProperty=a,o.plotStyle=s.plotStyle,o.dynamicSeries=e;var l=function(e){o.visible=e};e.visibleProperty.link(l);var u=function(){o.invalidatePaint()};return e.addDynamicSeriesListener(u),a.link(u),e.visibleProperty.link(u),o.disposeDynamicSeriesNode=function(){e.removeDynamicSeriesListener(u),e.visibleProperty.unlink(l),e.visibleProperty.unlink(u),a.unlink(u)},o}return _createClass(n,[{key:"paintCanvas",value:function(e){this.dynamicSeries.visibleProperty.get()&&(this.plotStyle===dA.LINE?this.drawDataLine(e):this.drawDataScatter(e))}},{key:"drawDataScatter",value:function(e){var t=this.dynamicSeries.color instanceof Rr?this.dynamicSeries.color.toCSS():this.dynamicSeries.color;e.fillStyle=t;for(var n=0;n<this.dynamicSeries.getLength();n++){e.beginPath();var i=this.modelViewTransformProperty.get().modelToViewPosition(this.dynamicSeries.getDataPoint(n));e.arc(i.x,i.y,this.dynamicSeries.radius,0,2*Math.PI),e.fill()}}},{key:"drawDataLine",value:function(e){e.beginPath();var t=this.dynamicSeries.color instanceof Rr?this.dynamicSeries.color.toCSS():this.dynamicSeries.color;e.strokeStyle=t,e.lineWidth=this.dynamicSeries.lineWidth,e.lineJoin=this.dynamicSeries.lineJoin;for(var n=!0,i=this.modelViewTransformProperty.get(),r=0;r<this.dynamicSeries.getLength();r++){var a=this.dynamicSeries.getDataPoint(r);if(isNaN(a.y))n=!0;else{var s=i.modelToViewPosition(a);n?e.moveTo(s.x,s.y):e.lineTo(s.x,s.y),n=!1}}e.stroke()}},{key:"setPlotStyle",value:function(e){e!==this.plotStyle&&(this.plotStyle=e,this.invalidatePaint())}},{key:"dispose",value:function(){this.disposeDynamicSeriesNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Zl);pA.PlotStyle=dA,Zv.register("DynamicSeriesNode",pA);var fA=pA,mA=T.byKeys(["MINOR_VERTICAL","MAJOR_VERTICAL","MINOR_HORIZONTAL","MAJOR_HORIZONTAL"]),gA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=!(r=A({majorHorizontalLineSpacing:null,majorVerticalLineSpacing:null,minorHorizontalLineSpacing:null,minorVerticalLineSpacing:null,modelViewTransformProperty:null,minorLineOptions:{stroke:"grey",lineWidth:1},majorLineOptions:{stroke:"black",lineWidth:3}},r)).modelViewTransformProperty;(a=t.call(this)).gridWidth=e,a.gridHeight=i,a.minorHorizontalLineSpacing=null,a.minorVerticalLineSpacing=null,a.majorVerticalLineSpacing=null,a.majorHorizontalLineSpacing=null,a.modelViewTransformProperty=r.modelViewTransformProperty||new dt(Fd.createIdentity()),a.minorHorizontalLines=new Hl(null,r.minorLineOptions),a.minorVerticalLines=new Hl(null,r.minorLineOptions),a.majorHorizontalLines=new Hl(null,r.majorLineOptions),a.majorVerticalLines=new Hl(null,r.majorLineOptions),a.children=[a.minorHorizontalLines,a.minorVerticalLines,a.majorHorizontalLines,a.majorVerticalLines];var o=a.drawAllLines.bind(_assertThisInitialized(a));return a.modelViewTransformProperty.lazyLink(o),a.setLineSpacings({majorVerticalLineSpacing:r.majorVerticalLineSpacing,majorHorizontalLineSpacing:r.majorHorizontalLineSpacing,minorVerticalLineSpacing:r.minorVerticalLineSpacing,minorHorizontalLineSpacing:r.minorHorizontalLineSpacing}),a.mutate(r),a.disposeGridNode=function(){a.modelViewTransformProperty.unlink(o),s&&a.modelViewTransformProperty.dispose()},a}return _createClass(n,[{key:"setLineSpacings",value:function(e){var t={majorVerticalLineSpacing:null,minorVerticalLineSpacing:null,majorHorizontalLineSpacing:null,minorHorizontalLineSpacing:null};e=A(t,e),this.validateMajorMinorPair(e.majorVerticalLineSpacing,e.minorVerticalLineSpacing),this.validateMajorMinorPair(e.majorHorizontalLineSpacing,e.minorHorizontalLineSpacing),this.majorVerticalLineSpacing===e.majorVerticalLineSpacing&&this.majorHorizontalLineSpacing===e.majorHorizontalLineSpacing||(this.majorVerticalLineSpacing=e.majorVerticalLineSpacing,this.majorHorizontalLineSpacing=e.majorHorizontalLineSpacing,this.drawMajorLines()),this.minorVerticalLineSpacing===e.minorVerticalLineSpacing&&this.minorHorizontalLineSpacing===e.minorHorizontalLineSpacing||(this.minorVerticalLineSpacing=e.minorVerticalLineSpacing,this.minorHorizontalLineSpacing=e.minorHorizontalLineSpacing,this.drawMinorLines())}},{key:"validateMajorMinorPair",value:function(e,t){}},{key:"setGridWidth",value:function(e){this.gridWidth=e,this.drawAllLines()}},{key:"setGridHeight",value:function(e){this.gridHeight=e,this.drawAllLines()}},{key:"drawMinorLines",value:function(){this.drawVerticalLines(this.minorVerticalLineSpacing,mA.MINOR_VERTICAL,this.minorVerticalLines),this.drawHorizontalLines(this.minorHorizontalLineSpacing,mA.MINOR_HORIZONTAL,this.minorHorizontalLines)}},{key:"drawMajorLines",value:function(){this.drawVerticalLines(this.majorVerticalLineSpacing,mA.MAJOR_VERTICAL,this.majorVerticalLines),this.drawHorizontalLines(this.majorHorizontalLineSpacing,mA.MAJOR_HORIZONTAL,this.majorHorizontalLines)}},{key:"drawVerticalLines",value:function(e,t,n){var i=this,r=new Ni,a=this.modelViewTransformProperty.get();this.getLinePositionsInGrid(e,t).forEach((function(e){var t=a.modelToViewX(e);r.moveTo(t,0),r.lineTo(t,i.gridHeight)})),n.lineDashOffset=-a.modelToViewY(0),n.shape=r}},{key:"drawHorizontalLines",value:function(e,t,n){var i=this,r=new Ni,a=this.modelViewTransformProperty.get();this.getLinePositionsInGrid(e,t).forEach((function(e){var t=a.modelToViewY(e);r.moveTo(0,t),r.lineTo(i.gridWidth,t)})),n.lineDashOffset=-a.modelToViewX(0),n.shape=r}},{key:"drawAllLines",value:function(){this.drawMajorLines(),this.drawMinorLines()}},{key:"getLinePositionsInGrid",value:function(e,t){var n=[];if(null===e)return n;var i,r,a,s=this.modelViewTransformProperty.get();if(t===mA.MAJOR_VERTICAL||t===mA.MINOR_VERTICAL?(i=s.viewToModelX(0),r=Math.abs(s.viewToModelDeltaX(this.gridWidth)),a=s.viewToModelX(this.gridWidth)):t!==mA.MAJOR_HORIZONTAL&&t!==mA.MINOR_HORIZONTAL||(i=s.viewToModelY(0),r=Math.abs(s.viewToModelDeltaY(this.gridHeight)),a=s.viewToModelY(this.gridHeight)),i>a){var o=i;i=a,a=o}for(var l=i+r,u=1e-7*(a-i),c=i+(e-En.toFixedNumber(i%e,10))%e;c<=l+u;c+=e)c>l&&(c=l),n.push(c);return n}},{key:"dispose",value:function(){this.disposeGridNode()}}]),n}(jo);gA.LineType=mA,Zv.register("GridNode",gA);var yA=gA,vA=iv("GRIDDLE");Zv.register("GriddleStrings",vA);var AA={getValuesInRangeWithAnchor:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=Math.floor((e-i)/n),a=Math.ceil((t-i)/n),s=[],o=r;o<=a;o++){var l=i+o*n;l>=e&&l<=t&&s.push(l)}return s}};Zv.register("GriddleUtils",AA);var bA=_createClass((function e(t){_classCallCheck(this,e),t=A({opacity:null,visible:!0,strokeStyle:null,lineWidth:1,radius:null},t),this.opacity=t.opacity,this.radius=t.radius,this.visible=t.visible,this.lineWidth=t.lineWidth,this.strokeStyle=t.strokeStyle}));Zv.register("PointStyle",bA);var SA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this,e,i)).pointStyle=r,a}return _createClass(n)}(pn);Zv.register("PointStyledVector2",SA);var EA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n),s=t.call(this,e,i,r,a);var o=new $l(4.5,{fill:e.color,centerX:i,centerY:r.height/2});s.addChild(o);var l=function(){var t=a.get(),n=e.getLength()-1;if(n>=0){var i=e.getDataPoint(n);isNaN(i.y)?o.centerY=t.modelToViewY(0):o.centerY=t.modelToViewY(i.y)}};return e.addDynamicSeriesListener(l),a.link(l),s.disposeSeismographDynamicSeriesNode=function(){e.removeDynamicSeriesListener(l),a.unlink(l)},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeSeismographDynamicSeriesNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(fA);Zv.register("SeismographDynamicSeriesNode",EA);var kA=EA,VA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){_classCallCheck(this,n),r=A({spacing:-2},r);var a=function(e){return new tu(0,0,0,6,{stroke:"white",centerX:e})},s=a(0),o=a(i),l=new Dy(s.right+1,s.centerY,o.left-1,o.centerY,{fill:"white",stroke:"white",doubleHead:!0,headHeight:3,headWidth:3.5,tailWidth:.5}),u=new jo({children:[s,o,l]});return e.maxWidth=u.width,-r.spacing>e.height&&(r.spacing=-e.height),r.children=[u,e],t.call(this,r)}return _createClass(n)}(gf);Zv.register("SpanNode",VA);var wA=VA,_A=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n),i=t.call(this),e=A({width:500,height:300,modelViewTransformProperty:null,defaultModelXRange:new Tt(0,4),defaultModelYRange:new Tt(-1,1),cornerRadius:5,verticalAxisLabelNode:null,horizontalAxisLabelNode:null,plotStyle:fA.PlotStyle.LINE,chartPanelOptions:null,showVerticalGridLabels:!0,showHorizontalGridLabels:!0,verticalGridLabelNumberOfDecimalPlaces:0,horizontalGridLabelNumberOfDecimalPlaces:0,gridLabelOptions:{},majorVerticalLineSpacing:1,majorHorizontalLineSpacing:1,gridNodeOptions:{majorLineOptions:{stroke:"lightGray",lineWidth:.8}},tandem:xe.OPTIONAL},e),i.chartWidth=e.width,i.chartHeight=e.height,i.showVerticalGridLabels=e.showVerticalGridLabels,i.showHorizontalGridLabels=e.showHorizontalGridLabels,i.verticalGridLabelNumberOfDecimalPlaces=e.verticalGridLabelNumberOfDecimalPlaces,i.horizontalGridLabelNumberOfDecimalPlaces=e.horizontalGridLabelNumberOfDecimalPlaces,i.majorHorizontalLineSpacing=e.majorHorizontalLineSpacing,i.majorVerticalLineSpacing=e.majorVerticalLineSpacing,i.plotStyle=e.plotStyle,i.gridLabelOptions=e.gridLabelOptions,e.chartPanelOptions=A({fill:"white",lineWidth:1,stroke:"black",right:i.chartWidth,pickable:!1},e.chartPanelOptions),e.chartPanelOptions=A({clipArea:Ni.roundedRectangleWithRadii(0,0,i.chartWidth,i.chartHeight,{topLeft:e.cornerRadius,topRight:e.cornerRadius,bottomLeft:e.cornerRadius,bottomRight:e.cornerRadius})},e.chartPanelOptions);var r=new iu(0,0,i.chartWidth,i.chartHeight,e.cornerRadius,e.cornerRadius,e.chartPanelOptions);i.modelViewTransformProperty=e.modelViewTransformProperty||new dt(i.createRectangularModelViewTransform(e.defaultModelXRange,e.defaultModelYRange));var a=A({majorHorizontalLineSpacing:i.majorHorizontalLineSpacing,majorVerticalLineSpacing:i.majorVerticalLineSpacing,modelViewTransformProperty:i.modelViewTransformProperty},e.gridNodeOptions);i.gridNode=new yA(i.chartWidth,i.chartHeight,a),r.addChild(i.gridNode),i.verticalGridLabelLayer=new jo,i.horizontalGridLabelLayer=new jo,i.addChild(i.verticalGridLabelLayer),i.addChild(i.horizontalGridLabelLayer);var s=i.chartWidth;i.dynamicSeriesMap=new Map,i.addChild(r),i.chartPanel=r,i.redrawLabels();var o=function(e,t){var n=e.matrix.minus(t.matrix),r=n.scaleVector,a=n.translation,s=0!==r.x||0!==a.x;(0!==r.y||0!==a.y)&&i.redrawVerticalLabels(),s&&i.redrawHorizontalLabels()};if(i.modelViewTransformProperty.lazyLink(o),i.scrollingChartNodeDisposeEmitter=new Et,r.addChild(new iu(0,0,i.chartWidth,i.chartHeight,e.cornerRadius,e.cornerRadius,{stroke:r.stroke,lineWidth:r.lineWidth,pickable:!1})),e.verticalAxisLabelNode&&(e.verticalAxisLabelNode.mutate({maxHeight:r.height,right:i.bounds.minX-8,centerY:r.centerY}),i.addChild(e.verticalAxisLabelNode)),e.horizontalAxisLabelNode){i.addChild(e.horizontalAxisLabelNode),e.horizontalAxisLabelNode.maxWidth=r.right-8;var l=i.showHorizontalGridLabels?i.horizontalGridLabelLayer.bottom+3:r.bottom+3;e.horizontalAxisLabelNode.mutate({top:l,centerX:s/2+r.bounds.minX}),e.horizontalAxisLabelNode.left<4&&(e.horizontalAxisLabelNode.left=4)}return i.mutate(e),i.disposeScrollingChartNode=function(){i.scrollingChartNodeDisposeEmitter.emit(),i.scrollingChartNodeDisposeEmitter.dispose(),i.modelViewTransformProperty.unlink(o)},i}return _createClass(n,[{key:"setVerticalGridLabelNumberOfDecimalPlaces",value:function(e){this.verticalGridLabelNumberOfDecimalPlaces=e,this.redrawVerticalLabels()}},{key:"setHorizontalGridLabelNumberOfDecimalPlaces",value:function(e){this.horizontalGridLabelNumberOfDecimalPlaces=e,this.redrawHorizontalLabels()}},{key:"addDynamicSeries",value:function(e){var t=new fA(e,this.chartWidth,new jn(0,0,this.chartWidth,this.chartHeight),this.modelViewTransformProperty);this.dynamicSeriesMap.set(e,t),this.chartPanel.addChild(t),this.scrollingChartNodeDisposeEmitter.addListener((function(){return t.dispose()}))}},{key:"addDynamicSeriesArray",value:function(e){e.forEach(this.addDynamicSeries.bind(this))}},{key:"removeDynamicSeries",value:function(e){this.chartPanel.removeChild(this.dynamicSeriesMap.get(e)),this.dynamicSeriesMap.delete(e)}},{key:"setLineSpacings",value:function(e){e=A({majorVerticalLineSpacing:null,majorHorizontalLineSpacing:null,minorVerticalLineSpacing:null,minorHorizontalLineSpacing:null},e),this.majorHorizontalLineSpacing=e.majorHorizontalLineSpacing,this.majorVerticalLineSpacing=e.majorVerticalLineSpacing,this.gridNode.setLineSpacings(e),this.redrawLabels()}},{key:"redrawVerticalLabels",value:function(){var e=this;if(this.showVerticalGridLabels){var t=[];this.gridNode.getLinePositionsInGrid(this.majorHorizontalLineSpacing,yA.LineType.MAJOR_HORIZONTAL).forEach((function(n){var i=e.modelViewTransformProperty.get().modelToViewY(n),r=e.chartPanel.localToParentPoint(new pn(e.gridNode.bounds.left,i)),a=new Xl(En.toFixed(n,e.verticalGridLabelNumberOfDecimalPlaces),A({rightCenter:r.plusXY(-3,0)},e.gridLabelOptions));t.push(a)})),this.verticalGridLabelLayer.children=t}}},{key:"redrawHorizontalLabels",value:function(){var e=this;if(this.showHorizontalGridLabels){var t=[];this.gridNode.getLinePositionsInGrid(this.majorVerticalLineSpacing,yA.LineType.MAJOR_VERTICAL).forEach((function(n){var i=e.modelViewTransformProperty.get().modelToViewX(n),r=e.chartPanel.localToParentPoint(new pn(i,e.gridNode.bounds.bottom)),a=new Xl(En.toFixed(n,e.horizontalGridLabelNumberOfDecimalPlaces),A({centerTop:r.plusXY(0,3)},e.gridLabelOptions));t.push(a)})),this.horizontalGridLabelLayer.children=t}}},{key:"redrawLabels",value:function(){this.redrawVerticalLabels(),this.redrawHorizontalLabels()}},{key:"setPlotStyle",value:function(e){this.plotStyle=e,this.dynamicSeriesMap.forEach((function(t){t.setPlotStyle(e)}))}},{key:"createRectangularModelViewTransform",value:function(e,t){return Fd.createRectangleInvertedYMapping(new jn(e.min,t.min,e.max,t.max),new jn(0,0,this.chartWidth,this.chartHeight))}},{key:"dispose",value:function(){this.disposeScrollingChartNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);Zv.register("XYChartNode",_A);var CA=_A,xA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=new dt(Fd.createIdentity());(a=A({verticalRanges:[new Tt(-1,1)],initialVerticalRangeIndex:0,verticalRangeProperty:new dt(new Tt(-1,1)),horizontalRangeProperty:new dt(new Tt(0,4)),numberHorizontalLines:5,numberVerticalLines:5,horizontalAxisLabelNode:null,showHorizontalGridLabels:!1,scrollGridNode:!1,gridLabelOptions:{fill:"white"},gridNodeOptions:{majorLineOptions:{stroke:"lightGray",lineDash:[5,5],lineWidth:.8,lineDashOffset:2.5}},rightMargin:10,tandem:xe.OPTIONAL},a)).gridNodeOptions.modelViewTransformProperty=o,(s=t.call(this,a)).rightMargin=a.rightMargin,s.verticalRangeProperty=a.verticalRangeProperty,s.horizontalRangeProperty=a.horizontalRangeProperty,s.addDynamicSeriesArray(i);var l=new dt(a.initialVerticalRangeIndex,{isValidValue:function(e){return e>=0&&e<a.verticalRanges.length}}),u=function(e){s.verticalRangeProperty.set(a.verticalRanges[e])};l.link(u);var c=s.chartWidth-a.rightMargin,h=nn.multilink([e,s.verticalRangeProperty],(function(e,t){var n=Fd.createRectangleInvertedYMapping(new jn(e-4,t.min,e,t.max),new jn(0,0,c,s.chartHeight));if(s.modelViewTransformProperty.set(n),a.scrollGridNode)o.set(n);else{var i=Fd.createRectangleInvertedYMapping(new jn(0,t.min,4,t.max),new jn(0,0,c,s.chartHeight));i.matrix.equals(o.get().matrix)||o.set(i)}})),d=o.get().modelToViewDeltaX(s.majorVerticalLineSpacing),p=new wA(r,d,{left:s.chartPanel.left,top:s.chartPanel.bottom+2});return a.horizontalAxisLabelNode&&a.horizontalAxisLabelNode.left<p.right+4&&(a.horizontalAxisLabelNode.left=p.right+4,a.horizontalAxisLabelNode.maxWidth=s.chartWidth-p.width-4),s.addChild(p),s.verticalRangeProperty.link((function(e){var t=e.getLength()/(a.numberHorizontalLines-1),n=s.horizontalRangeProperty.get().getLength()/(a.numberVerticalLines-1);s.setLineSpacings({majorVerticalLineSpacing:n,majorHorizontalLineSpacing:t})})),s.resetSeismographNode=function(){l.reset()},s.disposeSeismographNode=function(){l.unlink(u),nn.unmultilink(h)},s}return _createClass(n,[{key:"addDynamicSeries",value:function(e){var t=new kA(e,this.chartWidth-this.rightMargin,new jn(0,0,this.chartWidth,this.chartHeight),this.modelViewTransformProperty);this.chartPanel.addChild(t),this.scrollingChartNodeDisposeEmitter.addListener((function(){return t.dispose()}))}},{key:"reset",value:function(){this.resetSeismographNode()}},{key:"dispose",value:function(){this.disposeSeismographNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(CA);Zv.register("SeismographNode",xA);var PA=xA,TA=new Rr(50,50,200,.2),MA=Rr.DARK_GRAY,LA=new Rr(180,180,230),IA=Rr.DARK_GRAY,RA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),e=A({cursorOptions:null,chartPanelOptions:{pickable:!0},tandem:xe.OPTIONAL},e),(i=t.call(this,e))._cursorVisibleOverride=null,i.cursorValue=0,i.minRecordedXValue=0,i.maxRecordedXValue=0,i.dynamicSeriesListenerMap=new Map,i.dynamicSeriesArray=[],i.chartCursor=new DA(_assertThisInitialized(i),i.modelViewTransformProperty,e.cursorOptions),i.chartPanel.addChild(i.chartCursor),i.updateCursor(),i}return _createClass(n,[{key:"addDynamicSeries",value:function(e){var t=this;_get(_getPrototypeOf(n.prototype),"addDynamicSeries",this).call(this,e),this.dynamicSeriesArray.push(e);var i=function(){t.updateMinMaxRecordedValues(),t.updateCursor()};this.dynamicSeriesListenerMap.set(e,i),e.addDynamicSeriesListener(i)}},{key:"removeDynamicSeries",value:function(e){_get(_getPrototypeOf(n.prototype),"removeDynamicSeries",this).call(this,e);var t=this.dynamicSeriesArray.indexOf(e);this.dynamicSeriesArray.splice(t,1),e.removeDynamicSeriesListener(this.dynamicSeriesListenerMap.get(e)),this.dynamicSeriesListenerMap.delete(e)}},{key:"setCursorValue",value:function(e){var t=this.modelViewTransformProperty.get(),n=t.viewToModelX(0),i=t.viewToModelX(this.chartWidth+this.chartCursor.width/2);this.cursorValue=En.clamp(e,n,i),this.updateCursor()}},{key:"getCursorValue",value:function(){return this.cursorValue}},{key:"resetCursor",value:function(){this.chartCursor.reset()}},{key:"setCursorVisibleOverride",value:function(e){this._cursorVisibleOverride=e,this.updateCursorVisibility()}},{key:"updateCursor",value:function(){this.updateCursorVisibility(),this.chartCursor.isVisible()&&this.updateCursorPosition()}},{key:"updateCursorPosition",value:function(){this.moveCursorToValue(this.cursorValue)}},{key:"updateCursorVisibility",value:function(){var e=this.chartCursor.visible;if("boolean"==typeof this._cursorVisibleOverride)this.chartCursor.setVisible(this._cursorVisibleOverride);else{var t=this.modelViewTransformProperty.get().viewToModelX(this.chartWidth+this.chartCursor.width/2),n=this.modelViewTransformProperty.get().viewToModelX(0),i=this.cursorValue>=n&&this.cursorValue<=t,r=this.hasData(),a=i&&r;this.chartCursor.setVisible(a)}!this.chartCursor.visible&&e&&this.chartCursor.interruptDrag()}},{key:"hasData",value:function(){return _.some(this.dynamicSeriesArray,(function(e){return e.hasData()}))}},{key:"moveCursorToValue",value:function(e){var t=this.modelViewTransformProperty.get().modelToViewX(e);this.chartCursor.centerX=En.clamp(t,0,this.chartWidth),this.chartCursor.centerY=this.gridNode.centerY}},{key:"updateMinMaxRecordedValues",value:function(){var e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;this.dynamicSeriesArray.forEach((function(n){if(n.getLength()>0){var i=n.getDataPoint(0).x,r=n.getDataPoint(n.getLength()-1).x;i<e&&(e=i),r>t&&(t=r)}})),this.minRecordedXValue=e,this.maxRecordedXValue=t}}]),n}(CA),DA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n),r=A({startDrag:function(){},endDrag:function(){},drag:function(){},includeDragCue:!1,tandem:xe.OPTIONAL},r);var s=.013*e.chartWidth,o=e.chartHeight;(a=t.call(this,0,-o,s,o,0,0,{cursor:"ew-resize",fill:TA,stroke:MA,lineWidth:.4,lineDash:[4,4]})).chart=e,a.modelViewTransformProperty=i,a.mouseArea=a.localBounds.dilatedX(12),a.touchArea=a.localBounds.dilatedX(12),a.includeDragCue=r.includeDragCue,a.includeDragCue&&(a.dragCueArrowNode=new Dy(2*-s,0,2*s,0,{doubleHead:!0,headWidth:12,headHeight:10,fill:LA,stroke:IA,center:a.center.plusXY(0,.4*o)}),a.addChild(a.dragCueArrowNode));for(var l=new jo,u=.05*o,c=0;c<3;c++){var h=new NA(s/2,TA);h.top=c*(h.height+u),l.addChild(h)}return l.center=a.center,a.addChild(l),a.dragListener=new Sd({start:function(e,t){r.startDrag()},drag:function(e,t){var n=t.parentPoint.x,i=a.modelViewTransformProperty.get().viewToModelX(n);i=En.clamp(i,a.chart.minRecordedXValue,a.chart.maxRecordedXValue),a.chart.setCursorValue(i),r.drag()},end:function(){r.endDrag(),a.includeDragCue&&(a.dragCueArrowNode.visible=!1)},tandem:r.tandem.createTandem("dragListener")}),a.addInputListener(a.dragListener),a}return _createClass(n,[{key:"interruptDrag",value:function(){this.dragListener.interrupt()}},{key:"reset",value:function(){this.includeDragCue&&(this.dragCueArrowNode.visible=!0)}}]),n}(iu),NA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){_classCallCheck(this,n),r=A({lineWidth:.5},r);var a=i.darkerColor(.9),s=new Rr(a.getRed(),a.getGreen(),a.getBlue(),i.getAlpha()),o=i.brighterColor(.9),l=new Rr(o.getRed(),o.getGreen(),o.getBlue(),i.getAlpha()),u=e/2-r.lineWidth;return t.call(this,u,{fill:s,stroke:l,lineWidth:r.lineWidth})}return _createClass(n)}($l);Zv.register("XYCursorChartNode",RA);var qA=Zv,OA=new(function(){function e(){_classCallCheck(this,e),this.pendingLocks=[],this.loadComplete=!1,this.listeners=[]}return _createClass(e,[{key:"addListener",value:function(e){this.listeners.push(e)}},{key:"proceedIfReady",value:function(){0===this.pendingLocks.length&&(this.loadComplete=!0,this.listeners.forEach((function(e){return e()})))}},{key:"createLock",value:function(e){var t=this;return this.pendingLocks.push(e),function(){J(t.pendingLocks,e),t.proceedIfReady()}}}]),e}());y.register("asyncLoader",OA);var BA=OA,GA=new Image,HA=BA.createLock(GA);GA.onload=HA,GA.src="data:image/png;base64,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";var FA=GA,YA=iv("SCENERY_PHET");Iy.register("SceneryPhetStrings",YA);var zA=YA,UA=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({basePositionProperty:new Lp(new pn(0,0)),tipPositionProperty:new Lp(new pn(1,0)),hasValue:!0,dragBounds:jn.EVERYTHING,textPosition:new pn(0,30),modelViewTransform:Fd.createIdentity(),significantFigures:1,textColor:"white",textBackgroundColor:null,textBackgroundXMargin:4,textBackgroundYMargin:2,textBackgroundCornerRadius:2,textMaxWidth:200,textFont:new tA({size:16,weight:"bold"}),baseScale:.8,lineColor:"gray",tapeLineWidth:2,tipCircleColor:"rgba(0,0,0,0.1)",tipCircleRadius:10,crosshairColor:"rgb(224, 95, 32)",crosshairSize:5,crosshairLineWidth:2,isBaseCrosshairRotating:!0,isTipCrosshairRotating:!0,isTipDragBounded:!0,interactive:!0,baseDragStarted:_.noop,baseDragEnded:_.noop,tandem:xe.OPTIONAL},i);(r=t.call(this)).unitsProperty=e,r.significantFigures=a.significantFigures,r.dragBounds=a.dragBounds,r.modelViewTransformProperty=new dt(a.modelViewTransform),r.isTipDragBounded=a.isTipDragBounded,r.basePositionProperty=a.basePositionProperty,r.tipPositionProperty=a.tipPositionProperty,r._isTipUserControlledProperty=new dt(!1),r.isTipUserControlledProperty=r._isTipUserControlledProperty,r._isBaseUserControlledProperty=new dt(!1),r.isBaseUserControlledProperty=r._isBaseUserControlledProperty,r.measuredDistanceProperty=new Ut([r.basePositionProperty,r.tipPositionProperty],(function(e,t){return e.distance(t)}),{tandem:a.tandem.createTandem("measuredDistanceProperty"),phetioDocumentation:"The distance measured by the measuring tape",phetioValueType:Lt,units:r.basePositionProperty.units});var s=(new Ni).moveTo(-a.crosshairSize,0).moveTo(-a.crosshairSize,0).lineTo(a.crosshairSize,0).moveTo(0,-a.crosshairSize).lineTo(0,a.crosshairSize),o=new Hl(s,{stroke:a.crosshairColor,lineWidth:a.crosshairLineWidth}),l=new Hl(s,{stroke:a.crosshairColor,lineWidth:a.crosshairLineWidth}),u=new $l(a.tipCircleRadius,{fill:a.tipCircleColor}),c=new Zu({interactiveHighlightEnabled:!1});r.baseImage=new Bl(FA,{scale:a.baseScale,cursor:"pointer"}),c.addChild(r.baseImage);var h=new tu(r.basePositionProperty.value,r.tipPositionProperty.value,{stroke:a.lineColor,lineWidth:a.tapeLineWidth}),d=new Zu({children:[u,l],cursor:"pointer",interactiveHighlightEnabled:!1}),p=new Ut([r.unitsProperty,r.measuredDistanceProperty,zA.measuringTapeReadoutPatternStringProperty],(function(e,t,n){var i=En.toFixed(e.multiplier*t,r.significantFigures);return ic.fillIn(n,{distance:i,units:e.name})}),{tandem:a.tandem.createTandem("readoutStringProperty"),phetioValueType:Te,phetioDocumentation:"The text content of the readout on the measuring tape"});r.valueNode=new Xl(p,{font:a.textFont,fill:a.textColor,maxWidth:a.textMaxWidth}),r.valueBackgroundNode=new iu(0,0,1,1,{cornerRadius:a.textBackgroundCornerRadius,fill:a.textBackgroundColor});var f,m=function(){var e=r.valueNode.width+2*a.textBackgroundXMargin,t=r.valueNode.height+2*a.textBackgroundYMargin;r.valueBackgroundNode.setRect(0,0,e,t),r.valueBackgroundNode.center=r.valueNode.center};if(r.valueNode.boundsProperty.lazyLink(m),m(),d.touchArea=d.localBounds.dilated(15),r.baseImage.touchArea=r.baseImage.localBounds.dilated(20),r.baseImage.mouseArea=r.baseImage.localBounds.dilated(10),r.addChild(h),r.addChild(o),r.addChild(c),r.valueContainer=new jo({children:[r.valueBackgroundNode,r.valueNode]}),a.hasValue&&r.addChild(r.valueContainer),r.addChild(d),r.baseDragListener=null,a.interactive){var g;c.interactiveHighlightEnabled=!0,d.interactiveHighlightEnabled=!0,r.baseDragListener=new Sd({tandem:a.tandem.createTandem("baseDragListener"),start:function(e){r.moveToFront(),a.baseDragStarted(),r._isBaseUserControlledProperty.value=!0;var t=r.modelViewTransformProperty.value.modelToViewPosition(r.basePositionProperty.value);f=e.currentTarget.globalToParentPoint(e.pointer.point).minus(t)},drag:function(e,t){var n=t.currentTarget.globalToParentPoint(e.pointer.point).minus(f),i=r.modelViewTransformProperty.value.viewToModelPosition(n),s=r.dragBounds.closestPointTo(i),o=s.minus(r.basePositionProperty.value);if(r.basePositionProperty.set(s),!r.isTipUserControlledProperty.value){var l=o.add(r.tipPositionProperty.value);if(a.isTipDragBounded){var u=r.dragBounds.closestPointTo(l);r.tipPositionProperty.set(u)}else r.tipPositionProperty.set(l)}},end:function(){r._isBaseUserControlledProperty.value=!1,a.baseDragEnded()}}),r.baseImage.addInputListener(r.baseDragListener);var y=new Sd({tandem:a.tandem.createTandem("tipDragListener"),start:function(e){r.moveToFront(),r._isTipUserControlledProperty.value=!0;var t=r.modelViewTransformProperty.value.modelToViewPosition(r.tipPositionProperty.value);g=e.currentTarget.globalToParentPoint(e.pointer.point).minus(t)},drag:function(e,t){var n=t.currentTarget.globalToParentPoint(e.pointer.point).minus(g),i=r.modelViewTransformProperty.value.viewToModelPosition(n);a.isTipDragBounded?r.tipPositionProperty.value=r.dragBounds.closestPointTo(i):r.tipPositionProperty.value=i},end:function(){r._isTipUserControlledProperty.value=!1}});d.addInputListener(y)}var v=function(){r.valueNode.centerTop=r.baseImage.center.plus(a.textPosition.times(a.baseScale))};p.link(v);var A=nn.multilink([r.measuredDistanceProperty,e,r.modelViewTransformProperty,r.tipPositionProperty,r.basePositionProperty],(function(e,t,n,i,s){var l=n.modelToViewPosition(i),u=n.modelToViewPosition(s),c=r.baseImage.getRotation(),p=Math.atan2(l.y-u.y,l.x-u.x),f=p-c;o.center=u,d.center=l,r.baseImage.setRotation(0),r.baseImage.rightBottom=u,r.baseImage.rotateAround(r.baseImage.rightBottom,p),h.setLine(u.x,u.y,l.x,l.y),a.isTipCrosshairRotating&&d.rotateAround(l,f),a.isBaseCrosshairRotating&&o.rotateAround(u,f),v()}));return r.disposeMeasuringTapeNode=function(){A.dispose(),p.dispose(),c.dispose(),d.dispose()},r.mutate(a),r}return _createClass(n,[{key:"reset",value:function(){this.basePositionProperty.reset(),this.tipPositionProperty.reset()}},{key:"dispose",value:function(){this.disposeMeasuringTapeNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"setDragBounds",value:function(e){this.dragBounds=e.copy(),this.basePositionProperty.value=this.dragBounds.closestPointTo(this.basePositionProperty.value),this.isTipDragBounded&&(this.tipPositionProperty.value=this.dragBounds.closestPointTo(this.tipPositionProperty.value))}},{key:"getDragBounds",value:function(){return this.dragBounds.copy()}},{key:"getLocalBaseCenter",value:function(){return new pn(-this.baseImage.imageWidth/2,-this.baseImage.imageHeight/2)}},{key:"getLocalBaseBounds",value:function(){return this.baseImage.bounds.copy()}},{key:"startBaseDrag",value:function(e){this.baseDragListener&&this.baseDragListener.press(e)}}],[{key:"createIcon",value:function(e){var t=S()({tapeLength:30},e),i=new n(new dt({name:"",multiplier:1}),{tipPositionProperty:new Lp(new pn(t.tapeLength,0)),hasValue:!1,interactive:!1});t.children=[i];var r=new jo(t);return i.toImage((function(e){return r.setChildren([new Bl(e)])})),r}}]),n}(jo);Iy.register("MeasuringTapeNode",UA);var WA,jA=UA,XA=function(e,t){for(var n=t.replace(new RegExp("^.*,"),""),i=atob(n),r=new Uint8Array(i.length),a=0;a<r.length;a++)r[a]=i.charCodeAt(a);return r},QA=_createClass((function e(){_classCallCheck(this,e),this.audioBufferProperty=new st(null)})),KA=new c("tambo");window.AudioContext?WA=new window.AudioContext:window.webkitAudioContext?WA=new window.webkitAudioContext:(WA={},console.error("error: this browser does not support Web Audio")),KA.register("phetAudioContext",WA);var JA=WA,ZA="data:audio/mpeg;base64,//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAFAAAE5AAzMzMzMzMzMzMzMzMzMzMzMzMzZmZmZmZmZmZmZmZmZmZmZmZmZmaZmZmZmZmZmZmZmZmZmZmZmZmZmczMzMzMzMzMzMzMzMzMzMzMzMzM//////////////////////////8AAAA5TEFNRTMuOTlyAaUAAAAAAAAAABRAJAZmQgAAQAAABOTGvClKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjxrv+ggLoZGTXh9oJQAa222FG3ASABBG51MY/j4AAB4AYI3/H3//Pqd/zv0Jp/8//zn3n6Mmf/J7f//8jf+fOeeggHA4RXkGh8XEwHAMHD4udyCYuhAALhgJqWJAEDGMYxvHlyAHxc9P76dP//T/Rm//p+v9tvb0Tzr1XyfnelP/3b0//5vo86Mlm0dHQrscccRQg5oSYpziaiB52oQCkxnR6LQisRCEMhluyeqEhIiWMiSvQjhwDTCtCPyDkNrP+UsBTNwVsJGSD/+1LEFoAQMWtluYaQEWGP7H+wYAR9IvpDLBawV8OWbG5oShmbiVnh8GAU6ZIjnetMKuOcpmaSndX80HuS7puaIKq/6lvM36lIJf8+Zm6CFA0t3fV/91IOhPJ1GCH13q//5o6DJl9/F3ErtwAGRlJ26tx4H5gV4lzzrIqy8jTNBZl1Hep3doI2/x6AMOljV5/M4clzeagOVs4SmnmZk2fTyahylhxZ1R7/1HlnhEe4KgF3SISoKnviYs9T8sp4Ku5ICsAAg3RwNdct5GVqea2W4P/7UsQHgAuZRzrtmE8JO4qkaa4M4MXAzUcoyYPSsZe/D4w5DUicEmE/ziQka1VaLTh0y8+qp/UtRMpQoli5jYCz6St//RjTOrPXlI/KJaZ2RHX6mMrJqxfqVjPM/K/thi6pyAAPlyOxkEr9tPgR2ldNwBRI0383ZJR5NmIAG2zBZOw1tKaJR6jzjIxgTlVLjBgJmawwRo8JXAUYCz1gr/q+aVWur8tO+j4iUe////6ii3UCwZHQhxd93nYdy9H1MjPwThY/VGgQQLo200aOkCDF//tSxA+CCwg1HK3lIQHXlCPo97AIw8D44EBOcB8oGBIND4gcCBc+IFHC7wwUOA+oMiAaH1PDCw+mxbydxPV3/zjbCnci8p/9nIJTQYSH5vktZIAEdHIA5HkiS4k11MYsCUFS8QSbEVhJUnQlFpKIJNQhJJrBKEZ8kiKoJIkqToSj5KJJ6hiCTXCUJUZJEl45Ek9TCUfQkkyuSSbzS72V1mVruLnhMeBUsHREPDQiPA0VOiJwdKuBlR5Fqtbk3f///t8FdSogAuxJp2uAWhIWFmv/+1LEBgPGHADHoIhgIAAANIAAAATcLVLFRWKCwsLCyxUVFVf6xVmLCws1YqKior////2RVn/+LCwtTEFNRTMuOTkuM1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",$A=XA(JA,ZA),eb=BA.createLock(ZA),tb=new QA,nb=!1,ib=function(){nb||(eb(),nb=!0)},rb=JA.decodeAudioData($A.buffer,(function(e){null===tb.audioBufferProperty.value&&(tb.audioBufferProperty.set(e),ib())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),tb.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),ib()}));rb&&rb.then((function(e){null===tb.audioBufferProperty.value&&(tb.audioBufferProperty.set(e),ib())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),ib()}));var ab=tb,sb=[],ob=[],lb={addStateChangeListener:function(e,t){var n,i=sb.indexOf(e);-1===i?(sb.push(e),i=sb.length-1,n=[],ob.push(n),e.onstatechange=function(){_.clone(n).forEach((function(t){t(e.state)}))}):n=ob[i],n.push(t)},removeStateChangeListener:function(e,t){var n=sb.indexOf(e),i=ob[n],r=i.indexOf(t);i.splice(r,1)},hasListener:function(e,t){var n=!1,i=sb.indexOf(e);if(i>=0){var r=ob[i];r&&(n=r.includes(t))}return n}};KA.register("audioContextStateChangeMonitor",lb);var ub=lb,cb={DEFAULT_PARAM_CHANGE_TIME_CONSTANT:.015,DEFAULT_LINEAR_GAIN_CHANGE_TIME:.1,TWELFTH_ROOT_OF_TWO:Math.pow(2,1/12)};KA.register("soundConstants",cb);var hb=cb,db={detectSoundBounds:function(e){for(var t=e.length,n=[],i=[],r=0;r<e.numberOfChannels;r++){var a=e.getChannelData(r);n[r]=pb(a,t,.05),i[r]=fb(a,t,.05)}var s=e.sampleRate;return{soundStart:_.min(n)/s,soundEnd:_.max(i)/s}}},pb=function(e,t,n){var i,r=0,a=!1;for(i=0;i<t-1&&!a;i++)e[i]>n&&e[i+1]>e[i]&&(r=i,a=!0);var s=0;for(a=!1,i=r;i>0&&!a;i--){var o=e[i];o<=0&&(s=0===o?i:i+1,a=!0)}var l=0,u=0;for(i=0;i<s;i++)l=Math.max(l,e[i]),u=Math.min(u,e[i]);return s},fb=function(e,t,n){var i,r=t-1,a=!1;for(i=t-1;i>0&&!a;i--)e[i]<=-n&&e[i-1]<e[i]&&(r=i,a=!0);var s=r;for(a=!1,i=r;i<t-1&&!a;i++)e[i+1]>=0&&(s=i,a=!0);var o=0,l=0;for(i=s;i<t;i++)o=Math.max(o,e[i]),l=Math.min(l,e[i]);return s};KA.register("SoundUtils",db);var mb,gb=db,yb=hb.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,vb=function(){function e(t){var n=this;_classCallCheck(this,e);var i=S()({initialOutputLevel:1,audioContext:JA,connectImmediately:!1,enableControlProperties:[],additionalAudioNodes:[],enabledDuringPhetioStateSetting:!1},t);this.audioContext=i.audioContext,this._outputLevel=i.initialOutputLevel,this.connectionList=[],this.enableControlProperties=Yt(),this.fullyEnabledProperty=new pt(!0);var r=function(){n.fullyEnabledProperty.value=_.every(n.enableControlProperties,(function(e){return e.value}))};this.enableControlProperties.addItemAddedListener((function(e){e.link(r);n.enableControlProperties.addItemRemovedListener((function t(i){i===e&&(i.unlink(r),n.enableControlProperties.removeItemRemovedListener(t))}))})),i.enableControlProperties.forEach((function(e){n.addEnableControlProperty(e)})),this.locallyEnabledProperty=new pt(!0),this.addEnableControlProperty(this.locallyEnabledProperty),this.masterGainNode=this.audioContext.createGain(),this.masterGainNode.gain.setValueAtTime(this._outputLevel,this.audioContext.currentTime),i.connectImmediately&&this.masterGainNode.connect(this.audioContext.destination),this.fullyEnabledProperty.link((function(e){var t=e?0:n._outputLevel,i=e?n._outputLevel:0,r=n.audioContext.currentTime;n.masterGainNode.gain.setValueAtTime(t,r),n.masterGainNode.gain.linearRampToValueAtTime(i,n.audioContext.currentTime+hb.DEFAULT_LINEAR_GAIN_CHANGE_TIME)})),this.soundSourceDestination=this.masterGainNode;for(var a=i.additionalAudioNodes.length-1;a>=0;a--){var s=i.additionalAudioNodes[a];s.connect(this.soundSourceDestination),this.soundSourceDestination=s}xe.PHET_IO_ENABLED&&!i.enabledDuringPhetioStateSetting&&(xe.launched?this.addEnableControlProperty(mb):xe.addLaunchListener((function(){mb||(mb=Ut.not(phet.phetio.phetioEngine.phetioStateEngine.isSettingStateProperty)),n.addEnableControlProperty(mb)}))),this.disposeSoundGenerator=function(){n.enableControlProperties.clear()}}return _createClass(e,[{key:"connect",value:function(e){this.masterGainNode.connect(e),this.connectionList.push(e)}},{key:"disconnect",value:function(e){this.masterGainNode.disconnect(e),this.connectionList=_.without(this.connectionList,e)}},{key:"isConnectedTo",value:function(e){return this.connectionList.includes(e)}},{key:"setOutputLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yb;if(e!==this._outputLevel){var n=this.audioContext.currentTime;this.fullyEnabledProperty.value&&(this.masterGainNode.gain.cancelScheduledValues(n),0===t?this.masterGainNode.gain.setValueAtTime(e,n):"running"===this.audioContext.state?this.masterGainNode.gain.setTargetAtTime(e,n,t):this.masterGainNode.gain.linearRampToValueAtTime(e,n+hb.DEFAULT_LINEAR_GAIN_CHANGE_TIME)),this._outputLevel=e}}},{key:"outputLevel",get:function(){return this.getOutputLevel()},set:function(e){this.setOutputLevel(e)}},{key:"getOutputLevel",value:function(){return this._outputLevel}},{key:"addEnableControlProperty",value:function(e){this.enableControlProperties.push(e)}},{key:"removeEnableControlProperty",value:function(e){this.enableControlProperties.remove(e)}},{key:"locallyEnabled",get:function(){return this.locallyEnabledProperty.value},set:function(e){this.locallyEnabledProperty.value=e}},{key:"fullyEnabled",get:function(){return this.fullyEnabledProperty.value}},{key:"dispose",value:function(){this.disposeSoundGenerator()}}]),e}();KA.register("SoundGenerator",vb);var Ab=vb,bb=hb.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,Sb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({loop:!1,trimSilence:!0,initialPlaybackRate:1,initiateWhenDisabled:!1,rateChangesAffectPlayingSounds:!0},i);if((r=t.call(this,a)).wrappedAudioBuffer=e,r.loop=a.loop,r.rateChangesAffectPlayingSounds=a.rateChangesAffectPlayingSounds,r.initiateWhenDisabled=a.initiateWhenDisabled,r.soundStart=0,r.soundEnd=null,a.trimSilence){r.wrappedAudioBuffer.audioBufferProperty.link((function e(t){if(t){var n=gb.detectSoundBounds(t);r.soundStart=n.soundStart,r.soundEnd=n.soundEnd,r.wrappedAudioBuffer.audioBufferProperty.unlink(e)}}))}return r.activeBufferSources=[],r.localGainNode=r.audioContext.createGain(),r.localGainNode.connect(r.soundSourceDestination),r._playbackRate=a.initialPlaybackRate,r.isPlayingProperty=new pt(!1),r.timeOfDeferredPlayRequest=Number.NEGATIVE_INFINITY,r.audioContextStateChangeListener=function(e){"running"===e&&((r.loop||(Date.now()-r.timeOfDeferredPlayRequest)/1e3<.2)&&r.play(.1),ub.removeStateChangeListener(r.audioContext,r.audioContextStateChangeListener))},r.fullyEnabledProperty.lazyLink((function(e){r.loop||e||r.stop()})),r}return _createClass(n,[{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("running"===this.audioContext.state&&this.wrappedAudioBuffer.audioBufferProperty.value){var n=this.audioContext.currentTime;if(this.loop&&!this.isPlayingProperty.get()||!this.loop&&(this.fullyEnabled||this.initiateWhenDisabled)){var i=this.audioContext.createBufferSource();i.buffer=this.wrappedAudioBuffer.audioBufferProperty.value,i.loop=this.loop,i.loopStart=this.soundStart,this.soundEnd&&(i.loopEnd=this.soundEnd),this.localGainNode.gain.cancelScheduledValues(n),this.localGainNode.gain.setValueAtTime(1,n),i.connect(this.soundSourceDestination),this.activeBufferSources.push(i),this.loop||(i.onended=function(){var t=e.activeBufferSources.indexOf(i);t>-1&&e.activeBufferSources.splice(t,1),e.isPlayingProperty.value=e.activeBufferSources.length>0}),i.playbackRate.setValueAtTime(this._playbackRate,n),i.start(n+t,this.soundStart),this.isPlayingProperty.value=!0}}else"suspended"===this.audioContext.state&&(this.timeOfDeferredPlayRequest=Date.now(),ub.hasListener(this.audioContext,this.audioContextStateChangeListener)||ub.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener))}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1,t=e>0?e/4.61:hb.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,n=this.audioContext.currentTime,i=n+e;this.localGainNode.gain.cancelScheduledValues(n),this.localGainNode.gain.setTargetAtTime(0,n,t),this.activeBufferSources.forEach((function(e){e.stop(i)})),this.activeBufferSources.length=0,this.isPlayingProperty.value=!1,ub.hasListener(this.audioContext,this.audioContextStateChangeListener)&&ub.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener)}},{key:"setPlaybackRate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bb;if(this.rateChangesAffectPlayingSounds){var n=this.audioContext.currentTime;this.activeBufferSources.forEach((function(i){i.playbackRate.cancelScheduledValues(n),i.playbackRate.setTargetAtTime(e,n,t)}))}this._playbackRate=e}},{key:"getPlaybackRate",value:function(){return this._playbackRate}},{key:"playbackRate",get:function(){return this.getPlaybackRate()}},{key:"isPlaying",get:function(){return this.isPlayingProperty.value}},{key:"getNumberOfPlayingInstances",value:function(){return this.activeBufferSources.length}}]),n}(Ab);KA.register("SoundClip",Sb);var Eb=Sb,kb="data:audio/mpeg;base64,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",Vb=XA(JA,kb),wb=BA.createLock(kb),_b=new QA,Cb=!1,xb=function(){Cb||(wb(),Cb=!0)},Pb=JA.decodeAudioData(Vb.buffer,(function(e){null===_b.audioBufferProperty.value&&(_b.audioBufferProperty.set(e),xb())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),_b.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),xb()}));Pb&&Pb.then((function(e){null===_b.audioBufferProperty.value&&(_b.audioBufferProperty.set(e),xb())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),xb()}));var Tb=_b,Mb=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(Mb,"BASIC",new Mb),_defineProperty(Mb,"EXTRA",new Mb),_defineProperty(Mb,"enumeration",new re(Mb,{phetioDocumentation:"describes whether a sound is considered part of the basic or the extra sounds for the sim"})),KA.register("SoundScope",Mb);var Lb=Mb,Ib=hb.DEFAULT_LINEAR_GAIN_CHANGE_TIME,Rb=new(function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,{tandem:e,phetioState:!1,phetioDocumentation:"Controls the simulation's sound. For sims that do not support sound, this element and its children can be ignored."})).enabledProperty=new pt(phet.chipper.queryParameters.supportsSound,{tandem:e.createTandem("enabledProperty"),phetioState:!1,phetioDocumentation:"Determines whether sound is enabled."}),i.extraSoundEnabledProperty=new pt(phet.chipper.queryParameters.extraSoundInitiallyEnabled,{tandem:e.createTandem("extraSoundEnabledProperty"),phetioState:!1,phetioDocumentation:"Determines whether extra sound is enabled. Extra sound is additional sounds that can serve to improve the learning experience for individuals with visual disabilities. Note that not all simulations that support sound also support extra sound. Also note that the value is irrelevant when enabledProperty is false."}),i.soundGeneratorInfoArray=[],i._masterOutputLevel=1,i._reverbLevel=.02,i.gainNodesForCategories=new Map,i.initialized=!1,i.soundGeneratorsAwaitingAdd=[],i.masterGainNode=null,i.convolver=null,i.reverbGainNode=null,i.dryGainNode=null,i}return _createClass(n,[{key:"initialize",value:function(e,t,n,i,r,a){var s=this,o=S()({categories:["sim-specific","user-interface"]},a),l=JA.currentTime,u=JA.createDynamicsCompressor();u.threshold.setValueAtTime(-6,l),u.knee.setValueAtTime(5,l),u.ratio.setValueAtTime(12,l),u.attack.setValueAtTime(0,l),u.release.setValueAtTime(.25,l),u.connect(JA.destination),this.masterGainNode=JA.createGain(),this.masterGainNode.connect(u),this.convolver=JA.createConvolver();Tb.audioBufferProperty.link((function e(t){t&&(s.convolver.buffer=t,Tb.audioBufferProperty.unlink(e))})),this.reverbGainNode=JA.createGain(),this.reverbGainNode.connect(this.masterGainNode),this.reverbGainNode.gain.setValueAtTime(this._reverbLevel,JA.currentTime),this.convolver.connect(this.reverbGainNode),this.dryGainNode=JA.createGain(),this.dryGainNode.gain.setValueAtTime(1-this._reverbLevel,JA.currentTime),this.dryGainNode.gain.linearRampToValueAtTime(1-this._reverbLevel,JA.currentTime+Ib),this.dryGainNode.connect(this.masterGainNode),o.categories.forEach((function(e){var t=JA.createGain();t.connect(s.convolver),t.connect(s.dryGainNode),s.gainNodesForCategories.set(e,t)})),nn.multilink([this.enabledProperty,t,e,n,i,r],(function(e,t,n,i,r,a){var o=e&&t&&n&&i&&r&&!a?s._masterOutputLevel:0;s.masterGainNode.gain.linearRampToValueAtTime(o,JA.currentTime+Ib)}));var c=function(){window.removeEventListener("touchstart",h,!1),Cy.userGestureEmitter.hasListener(h)&&Cy.userGestureEmitter.removeListener(h)},h=function(){"running"!==JA.state?(phet.log&&phet.log("audio context not running, attempting to resume, state = ".concat(JA.state)),JA.resume().then((function(){phet.log&&phet.log("resume appears to have succeeded, phetAudioContext.state = ".concat(JA.state)),c()})).catch((function(e){var t="error when trying to resume audio context, err = ".concat(e);console.error(t)}))):c()};window.addEventListener("touchstart",h,!1),Cy.userGestureEmitter.addListener(h);var d=JA.state;ub.addStateChangeListener(JA,(function(e){phet.log&&phet.log("audio context state changed, old state = ".concat(d,", new state = ").concat(e,", audio context time = ").concat(JA.currentTime)),"running"!==e?(window.addEventListener("touchstart",h,!1),Cy.userGestureEmitter.hasListener(h)||Cy.userGestureEmitter.addListener(h)):console.log("AudioContext is now running."),d=e})),this.initialized=!0,this.soundGeneratorsAwaitingAdd.forEach((function(e){s.addSoundGenerator(e.soundGenerator,e.soundGeneratorAddOptions)})),this.soundGeneratorsAwaitingAdd.length=0}},{key:"hasSoundGenerator",value:function(e){return _.some(this.soundGeneratorInfoArray,(function(t){return t.soundGenerator===e}))}},{key:"addSoundGenerator",value:function(e,t){if(void 0===t&&(t={}),this.initialized){this.hasSoundGenerator(e);var n=S()({sonificationLevel:Lb.BASIC,associatedViewNode:null,categoryName:null},t);null===n.categoryName?(e.connect(this.convolver),e.connect(this.dryGainNode)):e.connect(this.gainNodesForCategories.get(n.categoryName));var i={soundGenerator:e,sonificationLevel:n.sonificationLevel};this.soundGeneratorInfoArray.push(i),e.addEnableControlProperty(this.enabledProperty),n.sonificationLevel===Lb.EXTRA&&e.addEnableControlProperty(this.extraSoundEnabledProperty),n.associatedViewNode&&e.addEnableControlProperty(new es(n.associatedViewNode))}else this.soundGeneratorsAwaitingAdd.push({soundGenerator:e,soundGeneratorAddOptions:t})}},{key:"removeSoundGenerator",value:function(e){if(this.initialized){for(var t=null,n=0;n<this.soundGeneratorInfoArray.length;n++)if(this.soundGeneratorInfoArray[n].soundGenerator===e){t=this.soundGeneratorInfoArray[n];break}e.isConnectedTo(this.convolver)&&e.disconnect(this.convolver),e.isConnectedTo(this.dryGainNode)&&e.disconnect(this.dryGainNode),this.gainNodesForCategories.forEach((function(t){e.isConnectedTo(t)&&e.disconnect(t)})),t&&this.soundGeneratorInfoArray.splice(this.soundGeneratorInfoArray.indexOf(t),1)}else console.warn("an attempt was made to remove a sound generator from an uninitialized sound manager, ignoring")}},{key:"setMasterOutputLevel",value:function(e){this.initialized?(this._masterOutputLevel=e,this.enabledProperty.value&&this.masterGainNode.gain.linearRampToValueAtTime(e,JA.currentTime+Ib)):console.warn("an attempt was made to set the master output level on an uninitialized sound manager, ignoring")}},{key:"masterOutputLevel",get:function(){return this.getMasterOutputLevel()},set:function(e){this.setMasterOutputLevel(e)}},{key:"getMasterOutputLevel",value:function(){return this._masterOutputLevel}},{key:"setOutputLevelForCategory",value:function(e,t){if(this.initialized){var n=this.gainNodesForCategories.get(e);n&&n.gain.setValueAtTime(t,JA.currentTime)}else console.warn("an attempt was made to set the output level for a sound category on an uninitialized sound manager, ignoring")}},{key:"getOutputLevelForCategory",value:function(e){if(!this.initialized)return console.warn("an attempt was made to get the output level for a sound category on an uninitialized sound manager, returning 0"),0;var t=this.gainNodesForCategories.get(e);return t.gain.value}},{key:"setReverbLevel",value:function(e){if(this.initialized){if(e!==this._reverbLevel){var t=JA.currentTime;this.reverbGainNode.gain.linearRampToValueAtTime(e,t+Ib),this.dryGainNode.gain.linearRampToValueAtTime(1-e,t+Ib),this._reverbLevel=e}}else console.warn("an attempt was made to set the reverb level on an uninitialized sound manager, ignoring")}},{key:"reverbLevel",get:function(){return this.getReverbLevel()},set:function(e){this.setReverbLevel(e)}},{key:"getReverbLevel",value:function(){return this._reverbLevel}},{key:"enabled",get:function(){return this.enabledProperty.value},set:function(e){this.enabledProperty.value=e}},{key:"sonificationLevel",get:function(){return this.extraSoundEnabledProperty.value?Lb.EXTRA:Lb.BASIC},set:function(e){this.extraSoundEnabledProperty.value=e===Lb.EXTRA}},{key:"logGain",value:function(e,t){t=t||1;Date.now()}},{key:"logMasterGain",value:function(e){this.masterGainNode&&this.logGain(this.masterGainNode,e)}},{key:"logReverbGain",value:function(e){this.reverbGainNode&&this.logGain(this.reverbGainNode,e)}}]),n}(Be))(xe.GENERAL_VIEW.createTandem("soundManager"));KA.register("soundManager",Rb);var Db=Rb,Nb=function(){function e(){_classCallCheck(this,e),this._basisSoundClip=null,this.soundPlayers=[]}return _createClass(e,[{key:"getSoundClipInstance",value:function(){return this._basisSoundClip||(this._basisSoundClip=new Eb(ab,{initialOutputLevel:.7,rateChangesAffectPlayingSounds:!1}),Db.addSoundGenerator(this._basisSoundClip,{categoryName:"user-interface"})),this._basisSoundClip}},{key:"getSelectionSoundPlayer",value:function(e){if(!this.soundPlayers[e]){var t=Math.pow(2,-e/12);this.soundPlayers[e]=new qb(this.getSoundClipInstance(),t)}return this.soundPlayers[e]}}]),e}(),qb=function(){function e(t,n){_classCallCheck(this,e),this.soundPlayer=t,this.playbackRate=n}return _createClass(e,[{key:"play",value:function(){this.soundPlayer.setPlaybackRate(this.playbackRate),this.soundPlayer.play()}},{key:"stop",value:function(){this.soundPlayer.stop()}}]),e}(),Ob=new Nb;KA.register("multiSelectionSoundPlayerFactory",Ob);var Bb=Ob,Gb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({centerColor:"black",radius:n.DEFAULT_RADIUS,selectedColor:"rgb( 143, 197, 250 )",deselectedColor:"white",xSpacing:8,stroke:"black",soundPlayer:Bb.getSelectionSoundPlayer(0),a11yNameAttribute:null,cursor:"pointer",disabledOpacity:Pr.DISABLED_OPACITY,tandem:xe.REQUIRED,tandemNameSuffix:"RadioButton",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,tagName:"input",inputType:"radio",containerTagName:"li",labelTagName:"label",appendLabel:!0,appendDescription:!0},a);(s=t.call(this)).value=i;var l=new jo,u=new $l(o.radius/3,{fill:o.centerColor}),c=new $l(o.radius,{fill:o.selectedColor,stroke:o.stroke}),h=new jo({children:[c,u]});l.addChild(h),l.addChild(r),r.left=c.right+o.xSpacing,r.centerY=c.centerY;var d=new jo,p=new $l(o.radius,{fill:o.deselectedColor,stroke:o.stroke});d.addChild(p),d.addChild(r),r.left=p.right+o.xSpacing,r.centerY=p.centerY;var f=new iu(l.bounds.union(d.bounds));l.pickable=d.pickable=!1,s.addChild(f),s.addChild(l),s.addChild(d);var m=function(e){l.visible=e===i,d.visible=!l.visible};e.link(m);var g=function(){e.set(i),o.soundPlayer.play()},y=new Ad({fire:g,tandem:o.tandem.createTandem("fireListener")});s.addInputListener(y);var v={change:g};s.addInputListener(v),e.value===i&&s.setPDOMAttribute("checked","checked");var A=function(e){s.pdomChecked=e===i};return e.link(A),null!==o.a11yNameAttribute&&s.setPDOMAttribute("name",o.a11yNameAttribute),s.mutate(o),s.disposeAquaRadioButton=function(){s.removeInputListener(y),s.removeInputListener(v),e.unlink(A),e.unlink(m),y.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeAquaRadioButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Hc(jo));function Hb(e,t){return e.map((function(e){return e.createNode(e.tandemName?t.createTandem(e.tandemName):xe.OPTIONAL)}))}_defineProperty(Gb,"DEFAULT_RADIUS",7),_defineProperty(Gb,"TANDEM_NAME_SUFFIX","RadioButton"),nA.register("AquaRadioButton",Gb);var Fb=0,Yb=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n),Fb++;for(var s=S()({radioButtonOptions:null,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,orientation:"vertical",spacing:3,disabledOpacity:Pr.DISABLED_OPACITY,tandem:xe.REQUIRED,tandemNameSuffix:"RadioButtonGroup",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,tagName:"ul",labelTagName:"h3",ariaRole:"radiogroup",groupFocusHighlight:!0},r),o=Hb(i,s.tandem),l=_.maxBy(o,(function(e){return e.width})).width,u=[],c=function(t){var n=i[t],r=o[t],a="vertical"===s.orientation?new jo({children:[new uu(l),r]}):r,c=new Gb(e,n.value,a,S()({a11yNameAttribute:"AquaRadioButtonGroup"+Fb,labelContent:n.labelContent||null,soundPlayer:Bb.getSelectionSoundPlayer(t),tandem:n.tandemName?s.tandem.createTandem(n.tandemName):s.tandem===xe.OPT_OUT?xe.OPT_OUT:xe.REQUIRED},s.radioButtonOptions));c.localBoundsProperty.link((function(e){"vertical"===s.orientation?(c.mouseArea=e.dilatedXY(s.mouseAreaXDilation,s.spacing/2),c.touchArea=e.dilatedXY(s.touchAreaXDilation,s.spacing/2)):(c.mouseArea=e.dilatedXY(s.spacing/2,s.mouseAreaYDilation),c.touchArea=e.dilatedXY(s.spacing/2,s.touchAreaYDilation))})),u.push(c)},h=0;h<i.length;h++)c(h);s.children=u,(a=t.call(this,s)).addAriaLabelledbyAssociation({thisElementName:Rh.PRIMARY_SIBLING,otherNode:_assertThisInitialized(a),otherElementName:Rh.LABEL_SIBLING});var d={keydown:function(e){return e.pointer.reserveForKeyboardDrag()}};return a.addInputListener(d),a.addLinkedElement(e,{tandem:s.tandem.createTandem("property")}),a.disposeAquaRadioButtonGroup=function(){a.removeInputListener(d),u.forEach((function(e){return e.dispose()})),o.forEach((function(e){return e.dispose()}))},a.radioButtons=u,a}return _createClass(n,[{key:"dispose",value:function(){this.disposeAquaRadioButtonGroup(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"getButton",value:function(e){var t=_.find(this.radioButtons,(function(t){return t.value===e}));return t}}]),n}(Qp);nA.register("AquaRadioButtonGroup",Yb);var zb=new Ni("M1120 1280h-832q-66 0 -113 -47t-47 -113v-832q0 -66 47 -113t113 -47h832q66 0 113 47t47 113v832q0 66 -47 113t-113 47zM1408 1120v-832q0 -119 -84.5 -203.5t-203.5 -84.5h-832q-119 0 -203.5 84.5t-84.5 203.5v832q0 119 84.5 203.5t203.5 84.5h832 q119 0 203.5 -84.5t84.5 -203.5z"),Ub=new Ni("M1408 606v-318q0 -119 -84.5 -203.5t-203.5 -84.5h-832q-119 0 -203.5 84.5t-84.5 203.5v832q0 119 84.5 203.5t203.5 84.5h832q63 0 117 -25q15 -7 18 -23q3 -17 -9 -29l-49 -49q-10 -10 -23 -10q-3 0 -9 2q-23 6 -45 6h-832q-66 0 -113 -47t-47 -113v-832 q0 -66 47 -113t113 -47h832q66 0 113 47t47 113v254q0 13 9 22l64 64q10 10 23 10q6 0 12 -3q20 -8 20 -29zM1639 1095l-814 -814q-24 -24 -57 -24t-57 24l-430 430q-24 24 -24 57t24 57l110 110q24 24 57 24t57 -24l263 -263l647 647q24 24 57 24t57 -24l110 -110 q24 -24 24 -57t-24 -57z"),Wb="data:audio/mpeg;base64,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VxjMbjCAqV6+9lyLbLv3a0X6ESHnjmkrTgX6ewW628bWpy6aAAAEIBKAAYVGgQJzEA7MHBAeERhQBG6YsEF4lDMeEoCAUYKgI6ZVAYEguZjC2ZGtMcWpghOAQLKNr1LwVPu2Wuurc61Zm1tOXWe/o1tDZJ5cXoLq47k/vbkMSqQ57UHqbUISVThclJqqsAa1V3dqUsXjENcTVSBUCQHmLDZKQCFtO+lwC+DVGKFZhA8Ck5ACX2THBAR54Dl4c+jQuNtZdZ7rPuOGX//7cMTJAk6AYtSvdwcB3graIe684Jd3Kc5TLcMqa1j+V2z++ZfljKYdvVqa/VlNNTWpkJR7VjzOVVd5NBQlGc8z5NIkUcNIozLbzkcqq84/8kUcf1PnK74dLEkq30DAFGtNIonJMclvNIy5wMFJGkUZk4lppFE4ldVr+qreaiclZEjO/scSJEtxTEFNRTMuOTguM6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqCQACQKKEgQswmgpKTiyiyizTjSizDzDy2eLzc/ypo0osoCEihIoDEA5BDcqWco0FBgUUBgQsQLAzjSizDzDy2drzcqpo0ov/+3LE5QJOoF7PjnWHApQz1oW8mbkoso404so8w+GdnZ4tv//+7VNSUWUWUKEihIELECxAoSBFmHxcNebNGlFmnCRQkCFiBYkUJFAYgWIFgZRZRZh5h9VVVUUJppI1VUxBTUUzLjk4LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7cMS2A9IFejpDGM3IAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",jb=XA(JA,Wb),Xb=BA.createLock(Wb),Qb=new QA,Kb=!1,Jb=function(){Kb||(Xb(),Kb=!0)},Zb=JA.decodeAudioData(jb.buffer,(function(e){null===Qb.audioBufferProperty.value&&(Qb.audioBufferProperty.set(e),Jb())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),Qb.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),Jb()}));Zb&&Zb.then((function(e){null===Qb.audioBufferProperty.value&&(Qb.audioBufferProperty.set(e),Jb())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),Jb()}));var $b=Qb,eS=function(){function e(t,n){_classCallCheck(this,e);var i=S()({soundClipOptions:{},soundManagerOptions:{}},n);this._soundClip=new Eb(t,i.soundClipOptions),Db.addSoundGenerator(this._soundClip,i.soundManagerOptions)}return _createClass(e,[{key:"play",value:function(){this._soundClip.play()}},{key:"stop",value:function(){this._soundClip.stop()}},{key:"getSoundClip",value:function(){return this._soundClip}}]),e}();KA.register("SoundClipPlayer",eS);var tS=eS,nS=new tS($b,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("checkboxCheckedSoundPlayer",nS);var iS=nS,rS="data:audio/mpeg;base64,//swxAAAB3BPLHWkgAEQCy03MPADAYAEAMYCIAZnV5vYJv2ZoxqgRhBhkBBkRJhwZa9g7/tbYe1+jC4beogQMZ4Z5zn7mgQQdxOH//////6SQAIzbNJJdtgAAAAAAHjcV2B1EBJLBB4wV9rCWp5eq0EHE43FpgLhkjdNEqGhFqhSQlQ4TwqZdZ7fN/Hm6YKiu/33NoUAACApAAAI//syxAOCSGxzQ123gDkDjCZJvLDmDQ0HhMRgBVEjBws2OIM9Cky1VU0REAhgK47nqWwHAkIYcB7ePHvXeo2cV1nG4uL6rjXjzXt951bbjQs/hQuyxEeFQaEGUgRohuYvQkhIfrBnlFyQoUla/qMye4qGxUqjhxTJIFPCOfamTewcOH2SkYCFVa21OLZrySygx+bV4B1xgBhA1DB0Bf/7MsQFAAfISyw1x4AxL4ssNzGAAigYRigH0YoI18mGQKOgZ+FY0UWnyRsLJgZYCShStOpdQYKdeV5/q9jbIDYPkLAYtiTETvrZLIYEb2u2uogAAAAAAhkChusjjbfkXleOGpiySKjhjUIlMla3JEsHQqgBs2ns50DIPtDIgjJE46JnUPRPPPOG5G8/yKxQADAZFTP1KgAAIX0AGkv/+zLEA4IIRJ9DPaUAMQuN5o2tmYqinck4ucZbhxEBHFls3WFfhr6dyvz3zgxEmEABChAREwQIwJRfc1jx6QHFWNNqQkrG5wvNNbdf1b//kxUACACHIGAlgmUgpccbebl+BkKCZXQyCAwpKkwRUzEk7AIAwgTBahUNNHisAuFoYmM12rXbbUJ2v5Cwa++fDf///+mgDERUoJgUemjg//swxAUDSExLJi3phxEQCmQBrbx0BkCOdSyG/xxiJyFwYUOAZiABRh0Zh64k8Pj7NAJTjWFStFgyvxBK5IhTLDstCt9Y/SAqpLqiYU1gRqYoIfCMbtwYtoG77YMaQdBGoPhoQOPIxjIsCrswBnOHTzqNAI9TIQEiAQc0oSX9JssKWBt5O9HJA8fEWBHxeXEQzXUAKsQAXwMjEM3O//syxAUCSDxVLM1lJzEbCWPFrmxBNqHM4RC+k5ZUzwUcEaSmKZZCdwJRBNZkJiwDdFN36YdSqdqUT6pYDZ5ScxSDVfZPSpL8M//b6NxDNtjDhTpxDmMDKQMMw1k08tNDTxrGMKLQxRDCMevDKlACBZi1WYsoiEOBwEwdI9e0vdBptNKZfgzJsVH29qtOpUET8k9v4mAAAExTEHgUKP/7MsQEggfQUyJNc0QA2AklmY2YpukjMG6N4KPFG4xmOjdBnIQqBgcbgGQGmcNGdaHtBQplqcsNdnbkroa0zXiUXxyr9wz/WF9usagQAkSHDHulGU3DjA44xIgQwADplHVAGUl7G/MbPAcXSMAgRGUSoN9OUp+zGuLf///V3//+ugKcCSTofFaj5oNcoyUgyJfAIDMwsQBGeEBQiGf/+zLEDgJHUD8UDOksQN6F39wxsAA60sBDGHr5bR5oZBEMkscKhnEIJPCh6j//////+n6AmBgKjhFZNEIgmCyGD2UQjAVEweC2peqxVyOIpL/WDXZ7cNcFTtQdJCEFQVGLPFgaUHJ6dhojDlVttOCJU4BB0qsXplV/tncqptv/p//+n//6abf////9QTTTTRVV9UEJK0kIixWmqoc///swxBiDxvgCi4CEYAgAADSAAAAE/1TTVEWK6UxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",aS=XA(JA,rS),sS=BA.createLock(rS),oS=new QA,lS=!1,uS=function(){lS||(sS(),lS=!0)},cS=JA.decodeAudioData(aS.buffer,(function(e){null===oS.audioBufferProperty.value&&(oS.audioBufferProperty.set(e),uS())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),oS.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),uS()}));cS&&cS.then((function(e){null===oS.audioBufferProperty.value&&(oS.audioBufferProperty.set(e),uS())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),uS()}));var hS=new tS(oS,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("checkboxUncheckedSoundPlayer",hS);var dS=hS,pS={valueType:"boolean"},fS=oi.pool.create(.025,0,0,0,-.025,0,0,0,1),mS=zb.transformed(fS),gS=Ub.transformed(fS),yS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({spacing:5,boxWidth:21,checkboxColor:"black",checkboxColorBackground:"white",touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,checkedSoundPlayer:iS,uncheckedSoundPlayer:dS,phetioLinkProperty:!0,cursor:"pointer",disabledOpacity:Pr.DISABLED_OPACITY,tandem:xe.REQUIRED,tandemNameSuffix:"Checkbox",phetioEventType:ce.USER,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,phetioReadOnly:Be.DEFAULT_OPTIONS.phetioReadOnly,tagName:"input",inputType:"checkbox",appendDescription:!0,checkedContextResponse:null,uncheckedContextResponse:null,voiceNameResponseOnSelection:!0},r);_defineProperty(_assertThisInitialized(a=t.call(this)),"_isMouseAreaCustomized",!1),_defineProperty(_assertThisInitialized(a),"_isTouchAreaCustomized",!1),_defineProperty(_assertThisInitialized(a),"_isSettingAreas",!1);var o=new zu((function(){e.value=!e.value,D(e.value,pS),e.value?(s.checkedSoundPlayer.play(),s.checkedContextResponse&&a.alertDescriptionUtterance(s.checkedContextResponse),a.voicingSpeakResponse({nameResponse:s.voiceNameResponseOnSelection?a.voicingNameResponse:null,contextResponse:gc.alertableToText(s.checkedContextResponse)})):(s.uncheckedSoundPlayer.play(),s.uncheckedContextResponse&&a.alertDescriptionUtterance(s.uncheckedContextResponse),a.voicingSpeakResponse({nameResponse:s.voiceNameResponseOnSelection?a.voicingNameResponse:null,contextResponse:gc.alertableToText(s.uncheckedContextResponse)}))}),{parameters:[],tandem:s.tandem.createTandem("toggleAction"),phetioDocumentation:"Emits when user input causes the checkbox to toggle, emitting a single arg: the new boolean value of the checkbox state.",phetioReadOnly:!0,phetioEventType:ce.USER});a.backgroundNode=new iu(0,-s.boxWidth,.95*s.boxWidth,.95*s.boxWidth,.2*s.boxWidth,.2*s.boxWidth,{fill:s.checkboxColorBackground}),a.uncheckedNode=new Hl(mS,{fill:s.checkboxColor});var l=s.boxWidth/a.uncheckedNode.width;a.uncheckedNode.scale(l),a.checkedNode=new Hl(gS,{scale:l,fill:s.checkboxColor});var u=new jo({children:[a.backgroundNode,a.checkedNode,a.uncheckedNode]}),c=new iu({});a.children=[u,i,c],a.constraint=new vS(_assertThisInitialized(a),u,a.checkedNode,i,c,s),a.constraint.updateLayout(),i.pickable=!1,i.pdomVisible=!1;var h=new Ad({fire:function(){return o.execute()},tandem:s.tandem.createTandem("fireListener")});a.addInputListener(h);var d=function(e){a.checkedNode.visible=e,a.uncheckedNode.visible=!e,a.pdomChecked=e};return e.link(d),a.mutate(s),a.setExcludeLabelSiblingFromInput(),s.phetioLinkProperty&&a.addLinkedElement(e,{tandem:s.tandem.createTandem("property")}),a.disposeCheckbox=function(){h.dispose(),e.hasListener(d)&&e.unlink(d),o.dispose()},a}return _createClass(n,[{key:"dispose",value:function(){this.constraint.dispose(),this.disposeCheckbox(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"setCheckboxColorBackground",value:function(e){this.backgroundNode.fill=e}},{key:"checkboxColorBackground",get:function(){return this.getCheckboxColorBackground()},set:function(e){this.setCheckboxColorBackground(e)}},{key:"getCheckboxColorBackground",value:function(){return this.backgroundNode.fill}},{key:"setCheckboxColor",value:function(e){this.checkedNode.fill=this.uncheckedNode.fill=e}},{key:"checkboxColor",get:function(){return this.getCheckboxColor()},set:function(e){this.setCheckboxColor(e)}},{key:"getCheckboxColor",value:function(){return this.checkedNode.fill}},{key:"setMouseArea",value:function(e){return this._isSettingAreas||(this._isMouseAreaCustomized=!0),_get(_getPrototypeOf(n.prototype),"setMouseArea",this).call(this,e)}},{key:"setTouchArea",value:function(e){return this._isSettingAreas||(this._isTouchAreaCustomized=!0),_get(_getPrototypeOf(n.prototype),"setTouchArea",this).call(this,e)}}]),n}(ul(Hc(jo))),vS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o){var l;return _classCallCheck(this,n),(l=t.call(this,e)).checkbox=e,l.checkboxNode=i,l.checkedNode=r,l.content=a,l.rectangle=s,l.options=o,l.checkbox.localPreferredWidthProperty.lazyLink(l._updateLayoutListener),l.addNode(a),l}return _createClass(n,[{key:"layout",value:function(){_get(_getPrototypeOf(n.prototype),"layout",this).call(this);var e=this.createLayoutProxy(this.content),t=e.minimumWidth,i=this.checkedNode.right-this.checkboxNode.left,r=i+this.options.spacing+t,a=null===this.checkbox.localPreferredWidth?r:this.checkbox.localPreferredWidth;ol(this.content)&&(e.preferredWidth=a-i-this.options.spacing),e.left=this.checkedNode.right+this.options.spacing,e.centerY=this.checkedNode.centerY,this.rectangle.rectBounds=this.checkboxNode.bounds.union(e.bounds).withMaxX(Math.max(this.checkboxNode.left+a,e.right)),this.checkbox._isSettingAreas=!0,this.checkbox._isTouchAreaCustomized||(this.checkbox.touchArea=this.checkbox.localBounds.dilatedXY(this.options.touchAreaXDilation,this.options.touchAreaYDilation)),this.checkbox._isMouseAreaCustomized||(this.checkbox.mouseArea=this.checkbox.localBounds.dilatedXY(this.options.mouseAreaXDilation,this.options.mouseAreaYDilation)),this.checkbox._isSettingAreas=!1,e.dispose(),this.checkbox.localMinimumWidth=r}},{key:"dispose",value:function(){this.checkbox.localPreferredWidthProperty.unlink(this._updateLayoutListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(wp);nA.register("Checkbox",yS);var AS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({enumeration:e.enumeration},i),a=S()({validValues:r.enumeration.values,phetioValueType:le({enumeration:r.enumeration})},r);return t.call(this,e,a)}return _createClass(n)}(dt),bS="data:audio/mpeg;base64,//swxAAABlAhPLTAgDE1De+/HoACAH4CwkCAJDo5gDgPRksn2WLHOB8EHShd5cHwfBBwgBBOJw/UCAY/lAxWD/4DB9+CH/6XQjMTIIcYUIQPQIRAIBAACUIawkYq7IQ/BawVqEc7mTjD+OFygBAnHbHq7UkLJ8aCnnrZlPpg3IkRJBgPH/MCQCI985/yAnHAAhmv3lHuAgAgAxJF//syxAOACHQpa7zBAAD8EunxpI3HUCEZHQlA2EYuDsSjE5EkSQGhUDYDxOARLoiBmIgalVgq4qWeWBqsNYKywNO+p/sxFyKwVOlXRFDtZ0S86oQ0C2W+wBOmlaWuS6+BIqZMz+AYy3FuwBkKXM2idVoKlYwUd/oIGgsbLpEbaCsmIyZRtbw6TPwj+mYmGr8QqnGHBLo3LKAAxKabZ//7MsQGAAhsl1OsPMcxAo3mpbCaAvIuuQRmW4WNHhDBJnoBORIlh+I9dvGCTCKP0kzo7rHHTi87diQ2XqnRN77y8lnKUl8zf+X0Fu0iCDV/9AP7el8Cw8raZKqiYShe+6bzYk0zXmEuGnBDcQhyRzPeI4Jbsmj5OxzZVhSX9adVU4Kk9r9esE3etv+/6wUIg3Wm62nA3Ab0EIcLUQ7/+zLECABGICs9oemDMLwEZrQcvFYyDBCUCgUAwQCUSvgROof5poGn9O7o70P/X9P/T+360+lAhIJVtyuNDljXzM7Ek0fGUB/ltZQF8iD7dBcVTs00f31POqR0/V/q/pjEe1z3jyAAQRBHGmSBEEVK6QIYH2miQZKNfgCVtiH9vVLp+w7an/d0jdUx9VnqZIJSvFtsaUFKKFBVCzoe//swxBwABSAhLaDl4nCsA+a0fDyG3vbgKx5OhNXyuPYt7kJJSg9B6heqxP93q/9P6IwSQ8LbYIFBVUF85RwseJPX6+Q7qIq7f/8ayokh7P//V8oyAABbhbGEIBBhOJgEGTBx6KjUiosS54l6y0i3jOz/6f///RVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxDWABEQTMaCF4HCNAmL0EJgGVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",SS=XA(JA,bS),ES=BA.createLock(bS),kS=new QA,VS=!1,wS=function(){VS||(ES(),VS=!0)},_S=JA.decodeAudioData(SS.buffer,(function(e){null===kS.audioBufferProperty.value&&(kS.audioBufferProperty.set(e),wS())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),kS.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),wS()}));_S&&_S.then((function(e){null===kS.audioBufferProperty.value&&(kS.audioBufferProperty.set(e),wS())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),wS()}));var CS=new tS(kS,{soundClipOptions:{initialOutputLevel:.5},soundManagerOptions:{categoryName:"user-interface"}});KA.register("pushButtonSoundPlayer",CS);var xS=CS,PS=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(PS,"IDLE",new PS),_defineProperty(PS,"OVER",new PS),_defineProperty(PS,"PRESSED",new PS),_defineProperty(PS,"enumeration",new re(PS)),nA.register("ButtonInteractionState",PS);var TS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[e.focusedProperty,e.overProperty,e.looksOverProperty,e.looksPressedProperty],(function(e,t,n,i){return n&&!i?PS.OVER:(t||e)&&i?PS.PRESSED:PS.IDLE}),{valueType:PS})}return _createClass(n)}(Jt);nA.register("PushButtonInteractionStateProperty",TS);var MS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({startCallback:_.noop,endCallback:_.noop,tandem:xe.REQUIRED,phetioState:Be.DEFAULT_OPTIONS.phetioState,phetioReadOnly:Be.DEFAULT_OPTIONS.phetioReadOnly,phetioFeatured:Be.DEFAULT_OPTIONS.phetioFeatured},e);return r.enabledPropertyOptions=k({phetioState:r.phetioState,phetioReadOnly:r.phetioReadOnly,phetioDocumentation:"When disabled, the button is grayed out and cannot be pressed",phetioFeatured:!0},r.enabledPropertyOptions),(i=t.call(this,r)).overProperty=new pt(!1),i.downProperty=new pt(!1,{reentrant:!0}),i.focusedProperty=new pt(!1),i.looksPressedProperty=new pt(!1),i.looksOverProperty=new pt(!1),i.produceSoundEmitter=new Et,i.interrupted=!1,i.listeners=[],i.looksPressedMultilink=null,i.looksOverMultilink=null,i.downProperty.lazyLink((function(e){e?r.startCallback():r.endCallback(i.looksOverProperty.get())})),i.enabledProperty.link((function(e){if(!e)for(var t=0;t<i.listeners.length;t++){var n=i.listeners[t];n.interrupt&&n.interrupt()}})),i.disposeButtonModel=function(){i.overProperty.dispose(),i.downProperty.dispose(),i.produceSoundEmitter.dispose(),i.looksPressedMultilink&&i.looksPressedMultilink.dispose(),i.looksOverMultilink&&i.looksOverMultilink.dispose(),i.listeners=[]},i}return _createClass(n,[{key:"dispose",value:function(){this.disposeButtonModel(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"createPressListener",value:function(e){var t=this;e=k({canStartPress:function(){return t.enabledProperty.value}},e);var n=new vd(e);this.listeners.push(n),n.isPressedProperty.lazyLink((function(e){t.interrupted=n.interrupted,t.downProperty.set(e)})),n.isOverProperty.lazyLink(this.overProperty.set.bind(this.overProperty)),n.isFocusedProperty.lazyLink(this.focusedProperty.set.bind(this.focusedProperty)),this.looksPressedMultilink&&this.looksPressedMultilink.dispose(),this.looksOverMultilink&&this.looksOverMultilink.dispose();var i=this.listeners.map((function(e){return e.looksPressedProperty}));i.push(this.downProperty),this.looksPressedMultilink=nn.multilinkAny(i,(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.looksPressedProperty.value=_.reduce(n,(function(e,t){return e||t}),!1)}));var r=this.listeners.map((function(e){return e.looksOverProperty}));return this.looksOverMultilink=nn.multilinkAny(r,(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.looksOverProperty.value=_.reduce(n,(function(e,t){return e||t}),!1)})),n}}]),n}(ec);nA.register("ButtonModel",MS);var LS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({fireOnDown:!1,listener:null,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:xe.REQUIRED,phetioReadOnly:Be.DEFAULT_OPTIONS.phetioReadOnly},e);(i=t.call(this,r)).isFiringProperty=new pt(!1),i.firedEmitter=new Et({tandem:r.tandem.createTandem("firedEmitter"),phetioDocumentation:"Emits when the button is fired",phetioReadOnly:r.phetioReadOnly,phetioEventType:ce.USER}),null!==r.listener&&i.firedEmitter.addListener(r.listener),r.fireOnHold&&(i.timer=new gt({callback:i.fire.bind(_assertThisInitialized(i)),delay:r.fireOnHoldDelay,interval:r.fireOnHoldInterval}));var a=function(e){if(e)i.enabledProperty.get()&&(r.fireOnDown&&i.fire(),i.timer&&i.timer.start(),(r.fireOnDown||i.timer)&&i.produceSoundEmitter.emit());else{var t=!r.fireOnDown&&(i.overProperty.get()||i.focusedProperty.get())&&i.enabledProperty.get()&&!i.interrupted;i.timer?i.timer.stop(t):t&&(i.produceSoundEmitter.emit(),i.fire())}};i.downProperty.link(a);var s=function(e){!e&&i.timer&&i.timer.stop(!1)};return i.enabledProperty.link(s),i.disposePushButtonModel=function(){i.isFiringProperty.value=!1,i.isFiringProperty.dispose(),i.firedEmitter.dispose(),i.downProperty.unlink(a),i.enabledProperty.unlink(s),i.timer&&(i.timer.dispose(),i.timer=null)},i}return _createClass(n,[{key:"dispose",value:function(){this.disposePushButtonModel(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"addListener",value:function(e){this.firedEmitter.addListener(e)}},{key:"removeListener",value:function(e){this.firedEmitter.removeListener(e)}},{key:"fire",value:function(){this.isFiringProperty.value=!0,this.firedEmitter.emit(),this.isFiringProperty.value=!1}}]),n}(MS);nA.register("PushButtonModel",LS);var IS={LIGHT_BLUE:new Rr(153,206,255),LIGHT_GRAY:new Rr(220,220,220)},RS=new Ao(.7),DS=new vo(1.2),NS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({content:null,minUnstrokedWidth:null,minUnstrokedHeight:null,xMargin:10,yMargin:5,xAlign:"center",yAlign:"center",xContentOffset:0,yContentOffset:0,baseColor:IS.LIGHT_BLUE,cursor:"pointer",buttonAppearanceStrategy:n.FlatAppearanceStrategy,buttonAppearanceStrategyOptions:{},contentAppearanceStrategy:null,contentAppearanceStrategyOptions:{},enabledAppearanceStrategy:function(e,t,n,i){n.filters=e?[]:[RS,DS],i&&(i.filters=e?[]:[Eo.FULL],i.opacity=e?1:Pr.DISABLED_OPACITY)},disabledColor:IS.LIGHT_GRAY,tagName:"button",tandem:xe.OPTIONAL,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},a);o.listenerOptions=k({tandem:o.tandem.createTandem("pressListener")},o.listenerOptions),o.enabledProperty=e.enabledProperty,_defineProperty(_assertThisInitialized(s=t.call(this)),"buttonNodeConstraint",null),s.content=o.content,s.buttonModel=e,s._settableBaseColorProperty=new Au(o.baseColor),s._disabledColorProperty=new Au(o.disabledColor),s.baseColorProperty=new Ut([s._settableBaseColorProperty,s.enabledProperty,s._disabledColorProperty],(function(e,t,n){return t?e:n})),s._pressListener=e.createPressListener(o.listenerOptions),s.addInputListener(s._pressListener),i.fill=s.baseColorProperty,s.addChild(i);var l,u=new o.buttonAppearanceStrategy(i,r,s.baseColorProperty,o.buttonAppearanceStrategyOptions);o.contentAppearanceStrategy&&o.content&&(l=new o.contentAppearanceStrategy(o.content,r,o.contentAppearanceStrategyOptions)),s.maxLineWidth=u.maxLineWidth;var c=null;if(o.content){var h=o.content;h.pickable=!1,s.buttonNodeConstraint=new OS(_assertThisInitialized(s),{content:o.content,xMargin:o.xMargin,yMargin:o.yMargin,maxLineWidth:s.maxLineWidth,minUnstrokedWidth:o.minUnstrokedWidth,minUnstrokedHeight:o.minUnstrokedHeight}),s.layoutSizeProperty=s.buttonNodeConstraint.layoutSizeProperty,c=new cf(h,{xAlign:o.xAlign,yAlign:o.yAlign,leftMargin:o.xMargin+o.xContentOffset,rightMargin:o.xMargin-o.xContentOffset,topMargin:o.yMargin+o.yContentOffset,bottomMargin:o.yMargin-o.yContentOffset}),nn.multilink([i.boundsProperty,s.layoutSizeProperty],(function(e,t){c.alignBounds=jn.point(e.center).dilatedXY(t.width/2,t.height/2)})),s.addChild(c)}else s.layoutSizeProperty=new st(new ms(o.minUnstrokedWidth+s.maxLineWidth,o.minUnstrokedHeight+s.maxLineWidth));return s.mutate(o),s.enabledProperty.link((function(e){return o.enabledAppearanceStrategy(e,_assertThisInitialized(s),i,c)})),s.disposeButtonNode=function(){c&&c.dispose(),u.dispose&&u.dispose(),l&&l.dispose&&l.dispose(),s._pressListener.dispose(),s.baseColorProperty.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.buttonNodeConstraint&&this.buttonNodeConstraint.dispose(),this.disposeButtonNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"setBaseColor",value:function(e){this._settableBaseColorProperty.paint=e}},{key:"baseColor",get:function(){return this.getBaseColor()},set:function(e){this.setBaseColor(e)}},{key:"getBaseColor",value:function(){return this._settableBaseColorProperty.paint}},{key:"pdomClick",value:function(){this._pressListener.click(null)}},{key:"isPDOMClicking",value:function(){return this._pressListener.pdomClickingProperty.get()}}]),n}(vl(Hc(jo))),qS=function(){function e(t,n,i,r){_classCallCheck(this,e);var a=new Au(i,{luminanceFactor:.4}),s=new Au(i,{luminanceFactor:-.4}),o=i,l=a,u=s,c=k({stroke:s},r),h="number"==typeof c.lineWidth?c.lineWidth:1;function d(e){switch(e){case PS.IDLE:t.fill=o;break;case PS.OVER:t.fill=l;break;case PS.PRESSED:t.fill=u;break;default:throw new Error("unsupported interactionState: ".concat(e))}}t.stroke=c.stroke||s,t.lineWidth=h,this.maxLineWidth=t.hasStroke()?h:0,t.cachedPaints=[o,l,u],n.link(d),this.disposeFlatAppearanceStrategy=function(){n.hasListener(d)&&n.unlink(d),a.dispose(),s.dispose()}}return _createClass(e,[{key:"dispose",value:function(){this.disposeFlatAppearanceStrategy()}}]),e}(),OS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),_defineProperty(_assertThisInitialized(r=t.call(this,e)),"layoutSizeProperty",new st(new ms(0,0))),_defineProperty(_assertThisInitialized(r),"isFirstLayout",!0),_defineProperty(_assertThisInitialized(r),"localPreferredWidth",0),_defineProperty(_assertThisInitialized(r),"localPreferredHeight",0),r.buttonNode=e,r.content=i.content,r.xMargin=i.xMargin,r.yMargin=i.yMargin,r.maxLineWidth=i.maxLineWidth,r.minUnstrokedWidth=i.minUnstrokedWidth,r.minUnstrokedHeight=i.minUnstrokedHeight,r.buttonNode.localPreferredWidthProperty.lazyLink(r._updateLayoutListener),r.buttonNode.localPreferredHeightProperty.lazyLink(r._updateLayoutListener),r.addNode(r.content,!1),r.layout(),r}return _createClass(n,[{key:"layout",value:function(){_get(_getPrototypeOf(n.prototype),"layout",this).call(this);var e=this.buttonNode,t=this.content,i=Math.max(this.isFirstLayout||e.widthSizable?(ol(t)?t.minimumWidth||0:t.width)+2*this.xMargin:e.localMinimumWidth,null===this.minUnstrokedWidth?0:this.minUnstrokedWidth+this.maxLineWidth),r=Math.max(this.isFirstLayout||e.heightSizable?(dl(t)?t.minimumHeight||0:t.height)+2*this.yMargin:e.localMinimumHeight,null===this.minUnstrokedHeight?0:this.minUnstrokedHeight+this.maxLineWidth);this.localPreferredWidth=this.isFirstLayout||ol(e)?null===e.localPreferredWidth?i:e.localPreferredWidth:this.localPreferredWidth,this.localPreferredHeight=this.isFirstLayout||dl(e)?null===e.localPreferredHeight?r:e.localPreferredHeight:this.localPreferredHeight,this.isFirstLayout=!1,this.layoutSizeProperty.value=new ms(this.localPreferredWidth,this.localPreferredHeight),e.localMinimumWidth=i,e.localMinimumHeight=r}},{key:"dispose",value:function(){this.buttonNode.localPreferredWidthProperty.unlink(this._updateLayoutListener),this.buttonNode.localPreferredHeightProperty.unlink(this._updateLayoutListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(wp);NS.FlatAppearanceStrategy=qS,nA.register("ButtonNode",NS);var BS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s,o,l=S()({size:null,minWidth:10,minHeight:10,xMargin:8,yMargin:5,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,touchAreaXShift:0,touchAreaYShift:0,mouseAreaXShift:0,mouseAreaYShift:0,stroke:null,lineWidth:.5,cornerRadius:4,leftTopCornerRadius:null,rightTopCornerRadius:null,leftBottomCornerRadius:null,rightBottomCornerRadius:null,buttonAppearanceStrategy:n.ThreeDAppearanceStrategy},r);l.content,l.size?(l.minUnstrokedWidth=l.size.width,l.minUnstrokedHeight=l.size.height):(void 0!==l.minWidth&&(l.minUnstrokedWidth=l.minWidth),void 0!==l.minHeight&&(l.minUnstrokedHeight=l.minHeight)),l.buttonAppearanceStrategyOptions||(l.buttonAppearanceStrategyOptions={stroke:l.stroke,lineWidth:l.lineWidth}),l.size?(s=l.size.width,o=l.size.height):(s=Math.max(l.content?l.content.width+2*l.xMargin:0,l.minWidth),o=Math.max(l.content?l.content.height+2*l.yMargin:0,l.minHeight));var u=new Hl(GS(s,o,l));if(l.size&&l.content){var c=l.content,h=Math.min((l.size.width-2*l.xMargin)/c.width,(l.size.height-2*l.yMargin)/c.height);l.content=new jo({children:[c],scale:h})}a=t.call(this,e,u,i,l);var d=!0;return nn.multilink([a.isWidthResizableProperty,a.isHeightResizableProperty,a.layoutSizeProperty],(function(e,t,n){(e||t)&&(u.shape=GS(e?n.width-a.maxLineWidth:s,t?n.height-a.maxLineWidth:o,l)),(d||e||t)&&(a.touchArea=u.localBounds.dilatedXY(l.touchAreaXDilation,l.touchAreaYDilation).shiftedXY(l.touchAreaXShift,l.touchAreaYShift),a.mouseArea=u.localBounds.dilatedXY(l.mouseAreaXDilation,l.mouseAreaYDilation).shiftedXY(l.mouseAreaXShift,l.mouseAreaYShift)),d=!1})),a}return _createClass(n)}(NS);function GS(e,t,n){var i=Math.min(e/2,t/2);return Ni.roundedRectangleWithRadii(0,0,e,t,{topLeft:Math.min(i,null!==n.leftTopCornerRadius?n.leftTopCornerRadius:n.cornerRadius),topRight:Math.min(i,null!==n.rightTopCornerRadius?n.rightTopCornerRadius:n.cornerRadius),bottomLeft:Math.min(i,null!==n.leftBottomCornerRadius?n.leftBottomCornerRadius:n.cornerRadius),bottomRight:Math.min(i,null!==n.rightBottomCornerRadius?n.rightBottomCornerRadius:n.cornerRadius)})}var HS=function(){function e(t,n,i,r){_classCallCheck(this,e);var a,s=r&&r.stroke?r.stroke:new Au(i,{luminanceFactor:-.4}),o=r&&void 0!==r.lineWidth?r.lineWidth:.5,l=S()({stroke:s,lineWidth:o,overStroke:s,overLineWidth:o,overFill:i,overButtonOpacity:1,selectedStroke:s,selectedLineWidth:o,selectedButtonOpacity:1,deselectedStroke:s,deselectedLineWidth:o,deselectedButtonOpacity:1},r),u=new Au(i,{luminanceFactor:.7}),c=new Au(i,{luminanceFactor:.5}),h=new Au(i,{luminanceFactor:.2}),d=new Au(i,{luminanceFactor:-.3}),p=new Au(i,{luminanceFactor:-.4}),f=new Au(i,{luminanceFactor:-.5}),m=new Ut([i],(function(e){return e.withAlpha(0)})),g=new Rr(255,255,255,.7),y=new Hl(null,{stroke:l.stroke,lineWidth:l.lineWidth,pickable:!1});t.addChild(y),this.maxLineWidth="number"==typeof l.lineWidth?l.lineWidth:0;var v=function(){var e=t.shape.bounds.width,r=t.shape.bounds.height;y.shape=t.shape;var s=Math.min(7/r,1),o=Math.max(1-3/r,0),p=Math.min(7/e,1),v=Math.max(1-3/e,0),A=new Ks(0,0,0,r).addColorStop(0,u).addColorStop(s,i).addColorStop(o,i).addColorStop(1,f),b=new Ks(0,0,e,0).addColorStop(0,g).addColorStop(p,m).addColorStop(v,m).addColorStop(1,f),S=new Ks(0,0,0,r).addColorStop(0,u).addColorStop(s,c).addColorStop(o,c).addColorStop(1,f),E=new Ks(0,0,e,0).addColorStop(0,g).addColorStop(p/2,new Rr(255,255,255,0)).addColorStop(v,m).addColorStop(1,d),k=new Ks(0,0,0,r).addColorStop(0,u).addColorStop(.67*s,d).addColorStop(o,h).addColorStop(1,f);t.cachedPaints=[A,S,k],y.cachedPaints=[b,E],a&&n.unlink(a),a=function(e){switch(e){case PS.IDLE:t.fill=A,t.stroke=l.deselectedStroke,t.lineWidth=l.deselectedLineWidth,t.opacity=l.deselectedButtonOpacity,y.fill=b,y.opacity=l.deselectedButtonOpacity;break;case PS.OVER:t.fill=S,t.stroke=l.overStroke,t.lineWidth=l.overLineWidth,t.opacity=l.overButtonOpacity,y.fill=E,y.opacity=l.overButtonOpacity;break;case PS.PRESSED:t.fill=k,t.stroke=l.selectedStroke,t.lineWidth=l.selectedLineWidth,t.opacity=l.selectedButtonOpacity,y.fill=E,y.opacity=l.selectedButtonOpacity;break;default:throw new Error("unsupported interactionState: ".concat(e))}},n.link(a)};t.selfBoundsProperty.link(v),this.disposeThreeDAppearanceStrategy=function(){t.selfBoundsProperty.unlink(v),n.hasListener(a)&&n.unlink(a),u.dispose(),c.dispose(),h.dispose(),d.dispose(),p.dispose(),f.dispose(),m.dispose()}}return _createClass(e,[{key:"dispose",value:function(){this.disposeThreeDAppearanceStrategy()}}]),e}();BS.ThreeDAppearanceStrategy=HS,nA.register("RectangularButton",BS);var FS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({soundPlayer:xS,tandem:xe.REQUIRED,tandemNameSuffix:"Button"},e),a=r.listener,s=_.omit(r,["listener"]),o=new LS(s);(i=t.call(this,o,new TS(o),s)).pushButtonModel=o,a&&i.addListener(a);var l=function(){r.soundPlayer.play()};return o.produceSoundEmitter.addListener(l),i.disposeRectangularPushButton=function(){o.produceSoundEmitter.removeListener(l),o.dispose()},i}return _createClass(n,[{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.disposeRectangularPushButton()}},{key:"addListener",value:function(e){this.pushButtonModel.addListener(e)}},{key:"removeListener",value:function(e){this.pushButtonModel.removeListener(e)}}]),n}(BS);nA.register("RectangularPushButton",FS);var YS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({alignChildren:n.CENTER,tandem:xe.OPTIONAL},r),o=Hb(i,s.tandem.createTandem("elements")),l=function(e){for(var t=0;t<i.length;t++){var n=i[t].value===e;o[t].visible=n,n&&0}};return e.link(l),s.children=o,s.alignChildren(s.children),(a=t.call(this,s)).disposeToggleNode=function(){e.unlink(l),o.forEach((function(e){return e.dispose()}))},a}return _createClass(n,[{key:"dispose",value:function(){this.disposeToggleNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"CENTER",value:function(e){for(var t=1;t<e.length;t++)e[t].center=e[0].center}},{key:"CENTER_X",value:function(e){for(var t=1;t<e.length;t++)e[t].centerX=e[0].centerX}},{key:"CENTER_Y",value:function(e){for(var t=1;t<e.length;t++)e[t].centerY=e[0].centerY}},{key:"LEFT",value:function(e){for(var t=1;t<e.length;t++)e[t].left=e[0].left}},{key:"BOTTOM",value:function(e){for(var t=1;t<e.length;t++)e[t].bottom=e[0].bottom}},{key:"CENTER_BOTTOM",value:function(e){for(var t=1;t<e.length;t++)e[t].centerBottom=e[0].centerBottom}},{key:"RIGHT",value:function(e){for(var t=1;t<e.length;t++)e[t].right=e[0].right}},{key:"NONE",value:function(e){}}]),n}(jo);nA.register("ToggleNode",YS);var zS=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){return _classCallCheck(this,n),t.call(this,e,[{value:!0,createNode:function(e){return i}},{value:!1,createNode:function(e){return r}}],a)}return _createClass(n)}(YS);nA.register("BooleanToggleNode",zS);var US="data:audio/mpeg;base64,//swxAAABdzxBVQRADFFHaWrNxAA6lqlJJEQAExvBGPAACkboRpPkaQjfnfz5z/zvk6HfzvO//6nzn/8n8Wo50RIcE5h04AwQBAIwAHAAGGKl44UnQFxrI7b6JARZgWfzRC7X2cjUCZG/TgeAfXziIB7AOgm3/Dlw5chhj/4aoJEnxOhr/+bkURTNP+37dN///zd5/WqMcFKOhHs//syxAMACFBlQBnXgAEQCuRbvLAAMh2cNcpzMDxDOxVSMlAjYsYOAlbMUQJ8hAkSABkLAPbGhQfrk7xotjWuYO3uc9FKLMWDXX39eK91WL8a4ARAYAYFAQZg2BpmMcTuZ9zx5rwEJFAZZgjA1mC8BuLASofGAOAMhs/U/GV40k0Dkso2K6Npbban/lI2Pnd6J3///t66ABTcYocjaf/7MsQDgAX8JTutseaw6RRnNZCJDkFdpsKMGTznDUOCFN3UBmSx0M4MasPlPO6Ar07embS//T/2f27SK//YUG03dpZI2oMaBN8MJA5tI6MkldtNZgLZ+dUe9LvQy6Odv9a9cr9VPRUaBtgq9EWmz6Xj3KZTzOv1ylUAC+0kk0oAEUn+I0HZ6jICCWahweFTlrz07qq2Ls9T3N/Xljr/+zLEEgAFSBMjQWBgUI8CIvA3vAbc1Vf//uoAABTglUoQoEElDJAFw2zpqMe6sqMzu59/9uvz32/t/onv/5FMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxC8DwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",WS=XA(JA,US),jS=BA.createLock(US),XS=new QA,QS=!1,KS=function(){QS||(jS(),QS=!0)},JS=JA.decodeAudioData(WS.buffer,(function(e){null===XS.audioBufferProperty.value&&(XS.audioBufferProperty.set(e),KS())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),XS.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),KS()}));JS&&JS.then((function(e){null===XS.audioBufferProperty.value&&(XS.audioBufferProperty.set(e),KS())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),KS()}));var ZS=XS,$S=new tS(ZS,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("toggleOffSoundPlayer",$S);var eE=$S,tE="data:audio/mpeg;base64,//swxAAAByAnDnWRADEZkyy3M0ALJQcEAMk013znpOVkWGNCg9vD4oJlTQcNxQBIJ0PxSUlJSCwfB8Hz+CAIAN/DH/gg78EHS7//9QIJSLq/wFHg+AwFAAAAAAfFvo6+SmoCLgXFVlJaBRlrks8EfgdfwNGNDIX1icAtgSPunkTDV42yCf+OWMmXBP4hJ/+RAZg8nmowgLA3CbIw//syxAOACDxjRhnXgAEOCqVnuqAERLIypm8wTCMyMagDMoYEAyRAAgCAQ9za/ELra7bNcNI9BMVmPx3pF7P7a/wstMTOL6//gwrwjSeVKioAAkqgEBggJpjMDZgiPBm+0xy7jJ482ppET4kOhhSHhg8CKMhgGASP09uliMpAaC+Gyqiiyjd9/QiJjzxL//////p9lUBqv86UKJp6wP/7MsQEgAWgKTMsbMLwvwUmdaCI3g146KXMwJVAHDYhAjvxQKf+SIBJPJWbIrZ/1aVs/k7Lf2//7QQilFbJGkVBjWeEsADYyEamuw0dNdmGxS1qmJCrAKrGJZ+TX/V+1zX0fitWyROXKQQiijI22kTAod9keTOhUgChZfu1VSXOv2ubHdG+h4jXu2fLMV00rQvomqNH8kAAAARGFj3/+zLEGgDFrBkvoeWAcKKCYxBngBYhtAWgNUjlVDuFH+de4qlT5ENEZ7/8t7K3cKjB1Q/kmOcRTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxDMDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",nE=XA(JA,tE),iE=BA.createLock(tE),rE=new QA,aE=!1,sE=function(){aE||(iE(),aE=!0)},oE=JA.decodeAudioData(nE.buffer,(function(e){null===rE.audioBufferProperty.value&&(rE.audioBufferProperty.set(e),sE())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),rE.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),sE()}));oE&&oE.then((function(e){null===rE.audioBufferProperty.value&&(rE.audioBufferProperty.set(e),sE())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),sE()}));var lE=rE,uE=new tS(lE,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("toggleOnSoundPlayer",uE);var cE=uE,hE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[e.looksOverProperty,e.looksPressedProperty],(function(e,t){return e&&!t?PS.OVER:t?PS.PRESSED:PS.IDLE}),{valueType:PS})}return _createClass(n)}(Kt);nA.register("ToggleButtonInteractionStateProperty",hE);var dE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({tandem:xe.REQUIRED},a);(s=t.call(this,o)).valueOff=e,s.valueOn=i,s.valueProperty=r;var l=function(e){(s.overProperty.get()||s.focusedProperty.get())&&s.enabledProperty.get()&&!s.interrupted&&(e||s.toggle())};s.downProperty.link(l),s.toggledEmitter=new Et({tandem:o.tandem.createTandem("toggledEmitter"),phetioDocumentation:"Emits when the button is toggled",phetioEventType:ce.USER});return s.toggledEmitter.addListener((function(){s.valueProperty.value=s.valueProperty.value===s.valueOff?s.valueOn:s.valueOff})),s.disposeToggleButtonModel=function(){s.downProperty.unlink(l),s.toggledEmitter.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeToggleButtonModel(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"toggle",value:function(){this.toggledEmitter.emit(),this.produceSoundEmitter.emit()}}]),n}(MS);nA.register("ToggleButtonModel",dE);var pE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({valueOffSoundPlayer:eE,valueOnSoundPlayer:cE,tandem:xe.REQUIRED,tandemNameSuffix:"Button"},a),l=new dE(i,r,e,o),u=new hE(l);(s=t.call(this,l,u,o)).addLinkedElement(e,{tandem:o.tandem.createTandem("property")});var c=function(){e.value===i?o.valueOffSoundPlayer.play():e.value===r&&o.valueOnSoundPlayer.play()};return s.buttonModel.produceSoundEmitter.addListener(c),s.disposeRectangularToggleButton=function(){s.buttonModel.produceSoundEmitter.removeListener(c),l.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeRectangularToggleButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(BS);nA.register("RectangularToggleButton",pE);var fE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=new zS(e,i,r),l=S()({content:o,tandem:xe.REQUIRED,tandemNameSuffix:"Button"},a);return(s=t.call(this,e,!1,!0,l)).disposeBooleanRectangularToggleButton=function(){o.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeBooleanRectangularToggleButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(pE);nA.register("BooleanRectangularToggleButton",fE);var mE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({sideLength:25,stroke:"black",touchAreaXDilation:5,touchAreaYDilation:5,tandem:xe.REQUIRED,tandemNameSuffix:"Button"},i);a.cornerRadius=.1*a.sideLength,a.xMargin=.2*a.sideLength,a.yMargin=a.xMargin,a.buttonAppearanceStrategy=NS.FlatAppearanceStrategy;var s=.6*a.sideLength,o={lineWidth:.15*a.sideLength,stroke:"white",centerX:a.sideLength/2,centerY:a.sideLength/2,pickable:!1},l=(new Ni).moveTo(s/2,0).lineTo(s/2,s).moveTo(0,s/2).lineTo(s,s/2),u=new Hl(l,o),c=(new Ni).moveTo(-s/2,0).lineTo(s/2,0),h=new Hl(c,o);r=t.call(this,e,h,u,a);var d=function(e){r.baseColor=e?"rgb( 255, 85, 0 )":"rgb( 0, 179, 0 )",r.setPDOMAttribute("aria-expanded",e)};return e.link(d),r.disposeExpandCollapseButton=function(){e.unlink(d)},r}return _createClass(n,[{key:"dispose",value:function(){this.disposeExpandCollapseButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(fE);nA.register("ExpandCollapseButton",mE);var gE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return En.toFixed(e,t)},yE=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(yE,"MOUSE",new yE),_defineProperty(yE,"TOUCH",new yE),_defineProperty(yE,"NONE",new yE),_defineProperty(yE,"enumeration",new re(yE));var vE=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.sim=t,this.simDisplay=n,this.activeProperty=new st(!1),this.visualTreeVisibleProperty=new pt(!1,{tandem:xe.OPT_OUT}),this.pdomTreeVisibleProperty=new pt(!1,{tandem:xe.OPT_OUT}),this.underPointerVisibleProperty=new pt(!0,{tandem:xe.OPT_OUT}),this.optionsVisibleProperty=new pt(!0,{tandem:xe.OPT_OUT}),this.previewVisibleProperty=new pt(!1,{tandem:xe.OPT_OUT}),this.selectedNodeContentVisibleProperty=new pt(!0,{tandem:xe.OPT_OUT}),this.selectedTrailContentVisibleProperty=new pt(!0,{tandem:xe.OPT_OUT}),this.highlightVisibleProperty=new pt(!0,{tandem:xe.OPT_OUT}),this.boundsVisibleProperty=new pt(!0,{tandem:xe.OPT_OUT}),this.selfBoundsVisibleProperty=new pt(!1,{tandem:xe.OPT_OUT}),this.getHelperNodeVisibleProperty=new pt(!0,{tandem:xe.OPT_OUT}),this.helperVisibleProperty=new pt(!0,{tandem:xe.OPT_OUT}),this.inputBasedPickingProperty=new pt(!0,{tandem:xe.OPT_OUT}),this.useLeafNodeProperty=new pt(!1,{tandem:xe.OPT_OUT}),this.pointerAreaTypeProperty=new AS(yE.MOUSE,{tandem:xe.OPT_OUT}),this.pointerPositionProperty=new st(pn.ZERO),this.overInterfaceProperty=new pt(!1,{tandem:xe.OPT_OUT}),this.selectedTrailProperty=new st(null),this.treeHoverTrailProperty=new st(null),this.pointerTrailProperty=new Ut([this.pointerPositionProperty,this.overInterfaceProperty,this.pointerAreaTypeProperty,this.inputBasedPickingProperty],(function(e,t,r,a){if(t)return null;if(!a)return LE(n.rootNode,e);var s=n.rootNode.hitTest(e,r===yE.MOUSE,r===yE.TOUCH);if(s&&!i.useLeafNodeProperty.value){for(;s.length>0&&0===s.lastNode().inputListeners.length;)s.removeDescendant();if(0===s.length)s=null;else{var o=s.lastNode().inputListeners[0];o instanceof vd&&o.targetNode&&o.targetNode!==s.lastNode()&&s.containsNode(o.targetNode)&&(s=s.subtrailTo(o.targetNode))}}return s}),{tandem:xe.OPT_OUT,useDeepEquality:!0}),this.previewTrailProperty=new Ut([this.selectedTrailProperty,this.treeHoverTrailProperty,this.pointerTrailProperty],(function(e,t,n){return e||(t||n)})),this.previewShapeProperty=new Ut([this.previewTrailProperty,this.inputBasedPickingProperty,this.pointerAreaTypeProperty],(function(e,t,n){return e?t?RE(e,n===yE.MOUSE,n===yE.TOUCH):RE(e,!1,!1):null})),this.helperNodeProperty=new Ut([this.selectedTrailProperty],(function(e){if(e){var t=e.lastNode();return function(e){return!!e.getHelperNode}(t)?t.getHelperNode():null}return null})),this.screenViewProperty=new st(null),this.imageDataProperty=new st(null),this.colorProperty=new Ut([this.pointerPositionProperty,this.imageDataProperty],(function(e,t){if(!t)return Rr.TRANSPARENT;var n=Math.floor(e.x/i.simDisplay.width*t.width),r=Math.floor(e.y/i.simDisplay.height*t.height),a=4*(n+t.width*r);return n<0||r<0||n>t.width||r>t.height?Rr.TRANSPARENT:new Rr(t.data[a],t.data[a+1],t.data[a+2],t.data[a+3]/255)}),{tandem:xe.OPT_OUT});var r=new pt(phet.chipper.queryParameters.fuzz,{tandem:xe.OPT_OUT});r.lazyLink((function(e){phet.chipper.queryParameters.fuzz=e}));var a=new pt(!1,{tandem:xe.OPT_OUT}),s=new st({name:"view units",multiplier:0}),o=new st(jn.NOTHING),l=new jo({renderer:"svg"}),u=new tn(this.pointerPositionProperty,{tandem:xe.OPT_OUT,bidirectional:!0,map:function(e){var t=i.screenViewProperty.value;if(t){var n=t.globalToLocalPoint(e);return"global: x: ".concat(gE(e.x),", y: ").concat(gE(e.y),"<br>view: x: ").concat(gE(n.x),", y: ").concat(gE(n.y))}return"-"}}),c=new Pf(u,{font:new tA(12)}),h=new tn(this.colorProperty,{tandem:xe.OPT_OUT,bidirectional:!0,map:function(e){return"".concat(e.toHexString()," ").concat(e.toCSS())}}),d=new Pf(h,{font:new tA(12)});this.colorProperty.link((function(e){d.fill=Rr.getLuminance(e)>128?Rr.BLACK:Rr.WHITE}));var p=new Rr("#804000"),f=new Rr("#208020"),g=new Rr(255,100,0),y=new Rr(0,0,255),v=new Rr(255,0,0),A=new Rr(200,0,200),b=new Ut([this.inputBasedPickingProperty,this.pointerAreaTypeProperty],(function(e,t){return e?t===yE.MOUSE?y:t===yE.TOUCH?v:A:g}),{tandem:xe.OPT_OUT}),S=new rA(d,{cornerRadius:0,stroke:null,fill:this.colorProperty}),E=new jo({visibleProperty:this.previewVisibleProperty}),k=new iu(0,0,200,200,{fill:new $s(new jo({children:[new iu(0,0,10,10,{fill:"#ddd"}),new iu(10,10,10,10,{fill:"#ddd"}),new iu(0,10,10,10,{fill:"#fafafa"}),new iu(10,0,10,10,{fill:"#fafafa"})]}),2,0,0,20,20),stroke:"black",visibleProperty:this.previewVisibleProperty});this.previewTrailProperty.link((function(e){if(E.removeAllChildren(),e){E.addChild(k);var t=e.lastNode();if(t.bounds.isValid()){var n=.9*window.devicePixelRatio*Math.min(k.selfBounds.width/t.width,k.selfBounds.height/t.height);E.addChild(new jo({scale:n/window.devicePixelRatio,center:k.center,children:[t.rasterized({resolution:n,sourceBounds:t.bounds.dilated(.01*t.bounds.width).roundedOut()})]}))}}}));var V=new gf({spacing:3,align:"left",visibleProperty:this.selectedNodeContentVisibleProperty});this.previewTrailProperty.link((function(e){V.children=e?PE(e):[]}));var w=new AE(r,"Fuzz"),C=new AE(a,"Measuring Tape"),x=new AE(this.visualTreeVisibleProperty,"Visual Tree"),P=new AE(this.pdomTreeVisibleProperty,"PDOM Tree"),T=new AE(this.inputBasedPickingProperty,"Input-based"),M=new AE(this.useLeafNodeProperty,"Use Leaf",{enabledProperty:this.inputBasedPickingProperty}),L=new AE(this.highlightVisibleProperty,"Highlight",{labelOptions:{fill:b}}),I=new AE(this.boundsVisibleProperty,"Bounds",{labelOptions:{fill:p}}),R=new AE(this.selfBoundsVisibleProperty,"Self Bounds",{labelOptions:{fill:f}}),D=new AE(this.getHelperNodeVisibleProperty,"getHelperNode()"),N=new Yb(this.pointerAreaTypeProperty,[{value:yE.MOUSE,createNode:function(e){return new Xl("Mouse",{fontSize:12})}},{value:yE.TOUCH,createNode:function(e){return new Xl("Touch",{fontSize:12})}},{value:yE.NONE,createNode:function(e){return new Xl("None",{fontSize:12})}}],{orientation:"horizontal",enabledProperty:this.inputBasedPickingProperty,radioButtonOptions:{xSpacing:3},spacing:10,tandem:xe.OPT_OUT}),q=new gf({align:"left",visibleProperty:this.selectedTrailContentVisibleProperty});this.previewTrailProperty.link((function(e){if(q.children=[],e){e.nodes.slice().forEach((function(t,n){q.addChild(new Pf("".concat(n>0?e.nodes[n-1].children.indexOf(t):"-"," ").concat(t.constructor.name),{font:new tA(12),fill:n===e.nodes.length-1?"black":"#bbb",layoutOptions:{leftMargin:10*n},cursor:"pointer",inputListeners:[new Ad({fire:function(){i.selectedTrailProperty.value=e.subtrailTo(t),G()},tandem:xe.OPT_OUT})]}))})),e.lastNode().children.forEach((function(t,n){q.addChild(new Pf("".concat(e.lastNode().children.indexOf(t)," ").concat(t.constructor.name),{font:new tA(12),fill:"#88f",layoutOptions:{leftMargin:10*e.nodes.length},cursor:"pointer",inputListeners:[new Ad({fire:function(){i.selectedTrailProperty.value=e.copy().addDescendant(t,n),G()},tandem:xe.OPT_OUT})]}))})),e.isVisible()||q.addChild(new Xl("invisible",{fill:"#60a",fontSize:12})),1!==e.getOpacity()&&q.addChild(new Xl("opacity: ".concat(e.getOpacity()),{fill:"#888",fontSize:12}));var t=_.some(e.nodes,(function(e){return!1===e.pickable||!e.visible})),n=_.some(e.nodes,(function(e){return e.inputListeners.length>0||!0===e.pickable}));!t&&n&&q.addChild(new Xl("Hit Tested",{fill:"#f00",fontSize:12})),e.getMatrix().isIdentity()||q.addChild(new jo({children:[new _E(e.getMatrix())]}))}}));var O=new kE(this.visualTreeVisibleProperty,this,(function(){return new SE(new bl(n.rootNode),i)})),B=new kE(this.pdomTreeVisibleProperty,this,(function(){return new EE(n._rootPDOMInstance,i)})),G=function(){O.focusSelected(),B.focusSelected()},H=new Hl(null,{visibleProperty:this.boundsVisibleProperty,stroke:p,fill:p.withAlpha(.1),lineDash:[2,2],lineDashOffset:2});this.previewTrailProperty.link((function(e){e&&e.lastNode().localBounds.isValid()?H.shape=Ni.bounds(e.lastNode().localBounds).transformed(e.getMatrix()):H.shape=null}));var F=new Hl(null,{visibleProperty:this.selfBoundsVisibleProperty,stroke:f,fill:f.withAlpha(.1),lineDash:[2,2],lineDashOffset:1});this.previewTrailProperty.link((function(e){e&&e.lastNode().selfBounds.isValid()?F.shape=Ni.bounds(e.lastNode().selfBounds).transformed(e.getMatrix()):F.shape=null}));var Y=new Ut([b],(function(e){return e.withAlpha(.2)}),{tandem:xe.OPT_OUT}),z=new Hl(null,{stroke:b,lineDash:[2,2],fill:Y,visibleProperty:this.highlightVisibleProperty});this.previewShapeProperty.link((function(e){z.shape=e}));var U=new jo({visibleProperty:this.getHelperNodeVisibleProperty});this.selectedTrailProperty.link((function(e){e&&(U.matrix=e.getMatrix())})),this.helperNodeProperty.link((function(e){U.removeAllChildren(),e&&U.addChild(e)})),l.addChild(H),l.addChild(F),l.addChild(z);var W=new jo;W.addInputListener(new vd({press:function(){i.selectedTrailProperty.value=i.pointerTrailProperty.value,G()},tandem:xe.OPT_OUT})),l.addChild(W),l.addChild(U);var j=new Qp({orientation:"vertical",spacing:5,align:"left",children:[c,S],visibleProperty:this.underPointerVisibleProperty}),X=new gf({spacing:3,align:"left",children:[VE("Tools"),new gf({spacing:3,align:"left",children:[new mf({spacing:10,children:[w,C]}),new mf({spacing:10,children:[x].concat(_toConsumableArray(n._accessible?[P]:[]))})]}),VE("Picking",void 0,{layoutOptions:{topMargin:3}}),new gf({spacing:3,align:"left",children:[new mf({spacing:10,children:[T,M]}),N]}),VE("Show",void 0,{layoutOptions:{topMargin:3}}),new gf({spacing:3,align:"left",children:[new mf({spacing:10,children:[L,D]}),new mf({spacing:10,children:[I,R]})]})],visibleProperty:this.optionsVisibleProperty}),Q=new gf({spacing:5,align:"left",children:[wE("Under Pointer",this.underPointerVisibleProperty,j,{layoutOptions:{topMargin:0}}),j,wE("Options",this.optionsVisibleProperty,X),X,wE("Preview",this.previewVisibleProperty,E),E,wE("Selected Trail",this.selectedTrailContentVisibleProperty,q),q,wE("Selected Node",this.selectedNodeContentVisibleProperty,V),V],visibleProperty:this.helperVisibleProperty}),K=new gf({spacing:5,align:"left",children:[wE("Helper",this.helperVisibleProperty,Q),new Ep,Q]}),J=new rA(K,{fill:"rgba(255,255,255,0.85)",stroke:"rgba(0,0,0,0.85)",cornerRadius:0});J.addInputListener(new Sd({translateNode:!0,targetNode:J,tandem:xe.OPT_OUT})),J.addInputListener({wheel:function(e){var t=e.domEvent.deltaY;J.y-=1*t}}),l.addChild(J),l.addChild(O),l.addChild(B);var Z=new jA(s,{visibleProperty:a,textBackgroundColor:"rgba(0,0,0,0.5)"});Z.basePositionProperty.value=new pn(100,300),Z.tipPositionProperty.value=new pn(200,300),l.addChild(Z);var $=function(e){i.helperDisplay.width=e.width,i.helperDisplay.height=e.height,o.value=o.value.withMaxX(e.width).withMaxY(e.height),W.mouseArea=new jn(0,0,e.width,e.height),W.touchArea=new jn(0,0,e.width,e.height),O.resize(e),B.resize(e)},ee=function(e){var t;i.overInterfaceProperty.value=J.bounds.containsPoint(i.pointerPositionProperty.value)||i.visualTreeVisibleProperty.value&&O.bounds.containsPoint(i.pointerPositionProperty.value)||i.pdomTreeVisibleProperty.value&&B.bounds.containsPoint(i.pointerPositionProperty.value)||U.containsPoint(i.pointerPositionProperty.value),null===(t=i.helperDisplay)||void 0===t||t.updateDisplay()};document.addEventListener("keyup",(function(e){"Escape"===e.key&&(i.selectedTrailProperty.value=null)})),this.activeProperty.lazyLink((function(e){if(e){t.activeProperty.value=!1;var n=t.selectedScreenProperty.value;n.hasView()?i.screenViewProperty.value=n.view:i.screenViewProperty.value=null,i.helperDisplay=new Cy(l,{assumeFullWindow:!0}),i.helperDisplay.initializeEvents(),t.dimensionProperty.link($),m.addListener(ee),document.body.appendChild(i.helperDisplay.domElement),i.helperDisplay.domElement.style.zIndex="10000";var r=function(e){i.pointerPositionProperty.value=e.pointer.point};i.helperDisplay.addInputListener({move:r,down:r,up:r}),i.screenViewProperty.value&&(s.value={name:"view units",multiplier:i.screenViewProperty.value.getGlobalToLocalMatrix().getScaleVector().x}),i.simDisplay.foreignObjectRasterization((function(e){if(e){var t=document.createElement("img");t.addEventListener("load",(function(){var e=t.width,n=t.height,r=document.createElement("canvas"),a=r.getContext("2d");r.width=e,r.height=n,a.drawImage(t,0,0),i.activeProperty.value&&(i.imageDataProperty.value=a.getImageData(0,0,e,n))})),t.src=e}else console.log("Could not load foreign object rasterization")}))}else t.dimensionProperty.unlink($),m.removeListener(ee),document.body.removeChild(i.helperDisplay.domElement),i.helperDisplay.dispose(),t.activeProperty.value=!0,i.imageDataProperty.value=null,i.visualTreeVisibleProperty.value=!1}))}return _createClass(e,null,[{key:"initialize",value:function(t,n){document.addEventListener("keydown",(function(i){i.ctrlKey&&"H"===i.key&&(e.helper||(e.helper=new e(t,n)),e.helper.activeProperty.value=!e.helper.activeProperty.value)}))}}]),e}();By.register("Helper",vE);var AE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){_classCallCheck(this,n);var a=S()({tandem:xe.OPT_OUT,boxWidth:14,labelOptions:{font:new tA(12)}},r);return t.call(this,e,new Pf(i,a.labelOptions),a)}return _createClass(n)}(yS),bE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({createChildren:function(){return[]},spacing:0,indent:5},i);(r=t.call(this,{excludeInvisibleChildrenFromBounds:!0})).selfNode=e,r.selfNode.centerY=0,r.expandedProperty=new st(!0),r.childTreeNodes=Yt({elements:a.createChildren()});var s=(new Ni).moveToPoint(pn.createPolar(4.8,3/4*Math.PI).plusXY(1.5,0)).lineTo(1.5,0).lineToPoint(pn.createPolar(4.8,5/4*Math.PI).plusXY(1.5,0));r.expandCollapseButton=new iu(-6,-6,12,12,{children:[new Hl(s,{stroke:"#888",lineCap:"round",lineWidth:1.5})],visible:!1,cursor:"pointer",right:0}),r.expandedProperty.link((function(e){r.expandCollapseButton.rotation=e?Math.PI/2:0})),r.expandCollapseButton.addInputListener(new Ad({fire:function(){r.expandedProperty.value=!r.expandedProperty.value},tandem:xe.OPT_OUT})),r.addChild(r.expandCollapseButton),r.childContainer=new Qp({orientation:"vertical",align:"left",spacing:a.spacing,children:r.childTreeNodes,x:a.indent,y:r.selfNode.bottom+a.spacing,visibleProperty:r.expandedProperty}),r.addChild(r.childContainer),r.addChild(e);var o=function(){r.childContainer.children=r.childTreeNodes,r.expandCollapseButton.visible=r.childTreeNodes.length>0};return r.childTreeNodes.addItemAddedListener((function(){o()})),r.childTreeNodes.addItemRemovedListener((function(){o()})),o(),r.mutate(a),r}return _createClass(n,[{key:"expand",value:function(){this.expandedProperty.value=!0}},{key:"collapse",value:function(){this.expandedProperty.value=!1}},{key:"expandRecusively",value:function(){this.expandedProperty.value=!0,this.childTreeNodes.forEach((function(e){e.expandRecusively()}))}},{key:"collapseRecursively",value:function(){this.expandedProperty.value=!1,this.childTreeNodes.forEach((function(e){e.collapseRecursively()}))}}]),n}(jo),SE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=e.lastNode(),s=e.isVisible(),o=new Qr({size:12}),l=new mf({spacing:5}),u=a.constructor.name;u&&l.addChild(new Xl(u,{font:o,pickable:!1,fill:s?"#000":"#60a"})),a instanceof Xl&&l.addChild(new Xl('"'+a.text+'"',{font:o,pickable:!1,fill:"#666"}));var c=iu.bounds(l.bounds,{children:[l],cursor:"pointer",fill:new Ut([i.selectedTrailProperty,i.pointerTrailProperty],(function(t,n){return t&&e.equals(t)?"rgba(0,128,255,0.4)":n&&e.equals(n)?"rgba(0,128,255,0.2)":"transparent"}),{tandem:xe.OPT_OUT})});return c.addInputListener({enter:function(){i.treeHoverTrailProperty.value=e},exit:function(){i.treeHoverTrailProperty.value=null}}),c.addInputListener(new Ad({fire:function(){i.selectedTrailProperty.value=e},tandem:xe.OPT_OUT})),r=t.call(this,c,{createChildren:function(){return e.lastNode().children.map((function(t){return new n(e.copy().addDescendant(t),i)}))}}),a.visible||(r.expandedProperty.value=!1),r.trail=e,r}return _createClass(n,[{key:"find",value:function(e){if(e.equals(this.trail))return this;var t=_.find(this.childTreeNodes,(function(t){return e.isExtensionOf(t.trail,!0)}));return t?t.find(e):null}}]),n}(bE),EE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=e.trail,s=a.isPDOMVisible(),o=new Qr({size:12}),l=new mf({spacing:5});if(a.nodes.length){var u=s?"#000":"#60a",c=a.lastNode();c.tagName&&l.addChild(new Xl(c.tagName,{font:new Qr({size:12,weight:"bold"}),fill:u})),c.labelContent&&l.addChild(new Xl(c.labelContent,{font:o,fill:"#800"})),c.innerContent&&l.addChild(new Xl(c.innerContent,{font:o,fill:"#080"})),c.descriptionContent&&l.addChild(new Xl(c.descriptionContent,{font:o,fill:"#444"}));var h=e.parent?e.parent.trail:new bl,d=a.nodes.slice(h.nodes.length).map((function(e){return e.constructor.name})).filter((function(e){return"Node"!==e})).join(",");d&&l.addChild(new Xl("(".concat(d,")"),{font:o,fill:"#008"}))}else l.addChild(new Xl("(root)",{font:o}));var p=iu.bounds(l.bounds,{children:[l],cursor:"pointer",fill:new Ut([i.selectedTrailProperty,i.pointerTrailProperty],(function(e,t){return e&&a.equals(e)?"rgba(0,128,255,0.4)":t&&a.equals(t)?"rgba(0,128,255,0.2)":"transparent"}),{tandem:xe.OPT_OUT})});return a.length&&(p.addInputListener({enter:function(){i.treeHoverTrailProperty.value=a},exit:function(){i.treeHoverTrailProperty.value=null}}),p.addInputListener(new Ad({fire:function(){i.selectedTrailProperty.value=a},tandem:xe.OPT_OUT}))),(r=t.call(this,p,{createChildren:function(){return e.children.map((function(e){return new n(e,i)}))}})).instance=e,r.trail=a,r}return _createClass(n,[{key:"find",value:function(e){if(e.equals(this.instance.trail))return this;var t=_.find(this.childTreeNodes,(function(t){return e.isExtensionOf(t.instance.trail,!0)}));return t?t.find(e):null}}]),n}(bE),kE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this,{fill:"rgba(255,255,255,0.85)",stroke:"black",rectWidth:400,visibleProperty:e,pickable:!0})).helper=i,a.treeContainer=new jo,a.addChild(a.treeContainer),a.addInputListener(new Sd({targetNode:_assertThisInitialized(a),drag:function(e,t){a.x=a.x+t.modelDelta.x},tandem:xe.OPT_OUT})),a.addInputListener({wheel:function(e){var t=e.domEvent.deltaX,n=e.domEvent.deltaY;a.treeNode&&(a.treeNode.x-=1*t,a.treeNode.y-=1*n),a.constrainTree()}}),i.pointerTrailProperty.lazyLink((function(){i.selectedTrailProperty.value||a.focusPointer()})),nn.multilink([i.activeProperty,e],(function(e,t){e&&t?(a.treeNode=r(),a.treeNode.x=500,a.treeNode.y=500,a.treeContainer.children=[a.treeNode],a.focusSelected(),a.constrainTree()):a.treeContainer.children=[]})),a}return _createClass(n,[{key:"resize",value:function(e){this.rectHeight=e.height,this.right=e.width,this.treeContainer.clipArea=Ni.bounds(this.localBounds.dilated(10))}},{key:"constrainTree",value:function(){this.treeNode&&(this.treeNode.bottom<this.selfBounds.bottom-5&&(this.treeNode.bottom=this.selfBounds.bottom-5),this.treeNode.top>this.selfBounds.top+5&&(this.treeNode.top=this.selfBounds.top+5),this.treeNode.right<this.selfBounds.right-8&&(this.treeNode.right=this.selfBounds.right-8),this.treeNode.left>this.selfBounds.left+8&&(this.treeNode.left=this.selfBounds.left+8))}},{key:"focusTrail",value:function(e){if(this.treeNode){var t=this.treeNode.find(e);if(t){var n=t.localToGlobalPoint(t.selfNode.center).y-this.centerY;this.treeNode.y-=n,this.constrainTree()}}}},{key:"focusPointer",value:function(){this.helper.pointerTrailProperty.value&&this.focusTrail(this.helper.pointerTrailProperty.value)}},{key:"focusSelected",value:function(){null!==this.helper.selectedTrailProperty.value&&this.focusTrail(this.helper.selectedTrailProperty.value)}}]),n}(iu),VE=function(e,t,n){return new Xl(e,A({fontSize:14,fontWeight:"bold",visibleProperty:t?new Ut([t.boundsProperty],(function(e){return!e.isEmpty()})):new st(!0)},n))},wE=function(e,t,n,i){var r=VE(e,n,i);return r.addInputListener(new Ad({fire:function(){t.value=!t.value},tandem:xe.OPT_OUT})),r.cursor="pointer",new mf({spacing:7,children:[new mE(t,{tandem:xe.OPT_OUT,sideLength:14}),r],visibleProperty:r.visibleProperty})},_E=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,{xSpacing:5,ySpacing:0,children:[new Xl(e.m00(),{layoutOptions:{column:0,row:0}}),new Xl(e.m01(),{layoutOptions:{column:1,row:0}}),new Xl(e.m02(),{layoutOptions:{column:2,row:0}}),new Xl(e.m10(),{layoutOptions:{column:0,row:1}}),new Xl(e.m11(),{layoutOptions:{column:1,row:1}}),new Xl(e.m12(),{layoutOptions:{column:2,row:1}}),new Xl(e.m20(),{layoutOptions:{column:0,row:2}}),new Xl(e.m21(),{layoutOptions:{column:1,row:2}}),new Xl(e.m22(),{layoutOptions:{column:2,row:2}})]})}return _createClass(n)}(af),CE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e,{maxWidth:15,maxHeight:15,stroke:"black",cursor:"pointer",strokePickable:!0})).addInputListener(new Ad({fire:function(){return IE(e.getSVGPath())},tandem:xe.OPT_OUT})),i}return _createClass(n)}(Hl),xE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,e.getImage(),{maxWidth:15,maxHeight:15})}return _createClass(n)}(Bl),PE=function(e){var t=[],n=e.lastNode(),i=ne(n.constructor).map((function(e){return e.name})).filter((function(e){return e&&"Object"!==e})),r=i.includes("Node")?i.slice(0,i.indexOf("Node")):i;r.length>0&&t.push(new Pf(r.map((function(e,t){return 0===t?"<b>".concat(e,"</b>"):"<br>&nbsp;".concat(_.repeat("  ",t),"extends ").concat(e)})).join(""),{font:new tA(12)}));var a=function(e,n){t.push(new mf({spacing:0,align:"top",children:[new Xl(e+": ",{fontSize:12}),n]}))},s=function(e,t){void 0!==t&&a(e,new Pf(""+t,{lineWrap:400,font:new tA(12),cursor:"pointer",inputListeners:[new Ad({fire:function(){return IE(""+t)},tandem:xe.OPT_OUT})]}))},o=function(e){return new mf({spacing:4,children:[new iu(0,0,10,10,{fill:e,stroke:"black",lineWidth:.5}),new Xl(e.toHexString(),{fontSize:12}),new Xl(e.toCSS(),{fontSize:12})],cursor:"pointer",inputListeners:[new Ad({fire:function(){return IE(e.toHexString())},tandem:xe.OPT_OUT})]})},l=function(e,t){var n=function(e){return new mf({spacing:3,children:[new Xl(e.ratio,{fontSize:12}),o(TE(e.color)||Rr.TRANSPARENT)]})};t instanceof Xs?t instanceof Ks?a(e,new gf({align:"left",spacing:3,children:[new Xl("LinearGradient (".concat(t.start.x,",").concat(t.start.y,") => (").concat(t.end.x,",").concat(t.end.y,")"),{fontSize:12})].concat(_toConsumableArray(t.stops.map(n)))})):t instanceof Js?a(e,new gf({align:"left",spacing:3,children:[new Xl("RadialGradient (".concat(t.start.x,",").concat(t.start.y,") ").concat(t.startRadius," => (").concat(t.end.x,",").concat(t.end.y,") ").concat(t.endRadius),{fontSize:12})].concat(_toConsumableArray(t.stops.map(n)))})):t instanceof Zs&&a(e,new gf({align:"left",spacing:3,children:[new Xl("Pattern",{fontSize:12}),new Bl(t.image,{maxWidth:10,maxHeight:10})]})):function(e,t){var n=TE(t);null!==n&&a(e,o(n))}(e,t)},u=function(e,t){t.equals(jn.NOTHING)||(t.equals(jn.EVERYTHING)?s(e,"everything"):a(e,new Pf("x: [".concat(t.minX,", ").concat(t.maxX,"]<br>y: [").concat(t.minY,", ").concat(t.maxY,"]"),{font:new tA(12)})))},c=function(e,t){return a(e,new CE(t))};return n.tandem.supplied&&s("tandem",n.tandem.phetioID.split(".").join(" ")),n instanceof eu&&s("element",n.element.constructor.name),ll(n)&&(!n.widthSizable&&s("widthSizable",n.widthSizable),null!==n.preferredWidth&&s("preferredWidth",n.preferredWidth),n.preferredWidth!==n.localPreferredWidth&&s("localPreferredWidth",n.localPreferredWidth),null!==n.minimumWidth&&s("minimumWidth",n.minimumWidth),n.minimumWidth!==n.localMinimumWidth&&s("localMinimumWidth",n.localMinimumWidth)),pl(n)&&(!n.heightSizable&&s("heightSizable",n.heightSizable),null!==n.preferredHeight&&s("preferredHeight",n.preferredHeight),n.preferredHeight!==n.localPreferredHeight&&s("localPreferredHeight",n.localPreferredHeight),null!==n.minimumHeight&&s("minimumHeight",n.minimumHeight),n.minimumHeight!==n.localMinimumHeight&&s("localMinimumHeight",n.localMinimumHeight)),n.layoutOptions&&s("layoutOptions",JSON.stringify(n.layoutOptions,null,2)),n instanceof Rp&&(!n.resize&&s("resize",n.resize),!n.layoutOrigin.equals(pn.ZERO)&&s("layoutOrigin",n.layoutOrigin)),n instanceof Qp&&(s("orientation",n.orientation),s("align",n.align),n.spacing&&s("spacing",n.spacing),n.lineSpacing&&s("lineSpacing",n.lineSpacing),s("justify",n.justify),n.justifyLines&&s("justifyLines",n.justifyLines),n.wrap&&s("wrap",n.wrap),n.stretch&&s("stretch",n.stretch),n.grow&&s("grow",n.grow),n.leftMargin&&s("leftMargin",n.leftMargin),n.rightMargin&&s("rightMargin",n.rightMargin),n.topMargin&&s("topMargin",n.topMargin),n.bottomMargin&&s("bottomMargin",n.bottomMargin),null!==n.minContentWidth&&s("minContentWidth",n.minContentWidth),null!==n.minContentHeight&&s("minContentHeight",n.minContentHeight),null!==n.maxContentWidth&&s("maxContentWidth",n.maxContentWidth),null!==n.maxContentHeight&&s("maxContentHeight",n.maxContentHeight)),n instanceof af&&(s("xAlign",n.xAlign),s("yAlign",n.yAlign),n.xSpacing&&s("xSpacing",n.xSpacing),n.ySpacing&&s("ySpacing",n.ySpacing),n.xStretch&&s("xStretch",n.xStretch),n.yStretch&&s("yStretch",n.yStretch),n.xGrow&&s("xGrow",n.xGrow),n.yGrow&&s("yGrow",n.yGrow),n.leftMargin&&s("leftMargin",n.leftMargin),n.rightMargin&&s("rightMargin",n.rightMargin),n.topMargin&&s("topMargin",n.topMargin),n.bottomMargin&&s("bottomMargin",n.bottomMargin),null!==n.minContentWidth&&s("minContentWidth",n.minContentWidth),null!==n.minContentHeight&&s("minContentHeight",n.minContentHeight),null!==n.maxContentWidth&&s("maxContentWidth",n.maxContentWidth),null!==n.maxContentHeight&&s("maxContentHeight",n.maxContentHeight)),n instanceof iu&&(u("rectBounds",n.rectBounds),(n.cornerXRadius||n.cornerYRadius)&&(n.cornerXRadius===n.cornerYRadius?s("cornerRadius",n.cornerRadius):(s("cornerXRadius",n.cornerXRadius),s("cornerYRadius",n.cornerYRadius)))),n instanceof tu&&(s("x1",n.x1),s("y1",n.y1),s("x2",n.x2),s("y2",n.y2)),n instanceof $l&&s("radius",n.radius),n instanceof Xl&&(s("text",n.text),s("font",n.font),"hybrid"!==n.boundsMethod&&s("boundsMethod",n.boundsMethod)),n instanceof Pf&&(s("text",n.text),s("font",n.font instanceof Qr?n.font.getFont():n.font),l("fill",n.fill),l("stroke",n.stroke),"hybrid"!==n.boundsMethod&&s("boundsMethod",n.boundsMethod),null!==n.lineWrap&&s("lineWrap",n.lineWrap)),n instanceof Bl&&(a("image",new xE(n)),s("imageWidth",n.imageWidth),s("imageHeight",n.imageHeight),1!==n.imageOpacity&&s("imageOpacity",n.imageOpacity),n.imageBounds&&u("imageBounds",n.imageBounds),n.initialWidth&&s("initialWidth",n.initialWidth),n.initialHeight&&s("initialHeight",n.initialHeight),n.hitTestPixels&&s("hitTestPixels",n.hitTestPixels)),(n instanceof Zl||n instanceof au)&&u("canvasBounds",n.canvasBounds),n instanceof Hl&&(n.shape&&c("shape",n.shape),"accurate"!==n.boundsMethod&&s("boundsMethod",n.boundsMethod)),(n instanceof Hl||n instanceof Xl)&&(l("fill",n.fill),l("stroke",n.stroke),n.lineDash.length&&s("lineDash",n.lineDash),n.fillPickable||s("fillPickable",n.fillPickable),n.strokePickable&&s("strokePickable",n.strokePickable),1!==n.lineWidth&&s("lineWidth",n.lineWidth),"butt"!==n.lineCap&&s("lineCap",n.lineCap),"miter"!==n.lineJoin&&s("lineJoin",n.lineJoin),0!==n.lineDashOffset&&s("lineDashOffset",n.lineDashOffset),10!==n.miterLimit&&s("miterLimit",n.miterLimit)),n.tagName&&s("tagName",n.tagName),n.accessibleName&&s("accessibleName",n.accessibleName),n.helpText&&s("helpText",n.helpText),n.pdomHeading&&s("pdomHeading",n.pdomHeading),n.containerTagName&&s("containerTagName",n.containerTagName),n.containerAriaRole&&s("containerAriaRole",n.containerAriaRole),n.innerContent&&s("innerContent",n.innerContent),n.inputType&&s("inputType",n.inputType),n.inputValue&&s("inputValue",n.inputValue),n.pdomNamespace&&s("pdomNamespace",n.pdomNamespace),n.ariaLabel&&s("ariaLabel",n.ariaLabel),n.ariaRole&&s("ariaRole",n.ariaRole),n.ariaValueText&&s("ariaValueText",n.ariaValueText),n.labelTagName&&s("labelTagName",n.labelTagName),n.labelContent&&s("labelContent",n.labelContent),n.appendLabel&&s("appendLabel",n.appendLabel),n.descriptionTagName&&s("descriptionTagName",n.descriptionTagName),n.descriptionContent&&s("descriptionContent",n.descriptionContent),n.appendDescription&&s("appendDescription",n.appendDescription),n.pdomVisible||s("pdomVisible",n.pdomVisible),n.pdomOrder&&s("pdomOrder",n.pdomOrder.map((function(e){return null===e?"null":e.constructor.name}))),n.visible||s("visible",n.visible),1!==n.opacity&&function(e,t){s(e,t)}("opacity",n.opacity),null!==n.pickable&&s("pickable",n.pickable),n.enabled||s("enabled",n.enabled),n.inputEnabled||s("inputEnabled",n.inputEnabled),null!==n.cursor&&s("cursor",n.cursor),n.transformBounds&&s("transformBounds",n.transformBounds),n.renderer&&s("renderer",n.renderer),n.usesOpacity&&s("usesOpacity",n.usesOpacity),n.layerSplit&&s("layerSplit",n.layerSplit),n.cssTransform&&s("cssTransform",n.cssTransform),n.excludeInvisible&&s("excludeInvisible",n.excludeInvisible),n.preventFit&&s("preventFit",n.preventFit),null!==n.webglScale&&s("webglScale",n.webglScale),n.matrix.isIdentity()||function(e,t){a(e,new _E(t))}("matrix",n.matrix),null!==n.maxWidth&&s("maxWidth",n.maxWidth),null!==n.maxHeight&&s("maxHeight",n.maxHeight),null!==n.clipArea&&c("clipArea",n.clipArea),null!==n.mouseArea&&(n.mouseArea instanceof jn?u("mouseArea",n.mouseArea):c("mouseArea",n.mouseArea)),null!==n.touchArea&&(n.touchArea instanceof jn?u("touchArea",n.touchArea):c("touchArea",n.touchArea)),n.inputListeners.length&&s("inputListeners",n.inputListeners.map((function(e){return e.constructor.name})).join(", ")),t.push(new lu(5,5)),u("localBounds",n.localBounds),n.localBoundsOverridden&&s("localBoundsOverridden",n.localBoundsOverridden),u("bounds",n.bounds),isFinite(n.width)&&s("width",n.width),isFinite(n.height)&&s("height",n.height),t.push(new FS({content:new Xl("Copy Path",{fontSize:12}),listener:function(){return IE("phet.joist.display.rootNode"+e.indices.map((function(e){return".children[ ".concat(e," ]")})).join(""))},tandem:xe.OPT_OUT})),t},TE=function(e){var t=e instanceof ht||e instanceof st?e.value:e;return null===t?null:Rr.toColor(t)},ME=function(e){if(e instanceof Xs)return!0;var t=TE(e);return!!t&&t.alpha>0},LE=function e(t,n){if(!t.visible)return null;var i=t._transform.getInverse().timesVector2(n),r=t.clipArea;if(null!==r&&!r.containsPoint(i))return null;for(var a=t._children.length-1;a>=0;a--){var s=e(t._children[a],i);if(s)return s.addAncestor(t,a)}if(t.selfBounds.containsPoint(i))if(t instanceof Hl&&t.hasShape()){if(ME(t.fill)&&t.getShape().containsPoint(i))return new bl(t);if(ME(t.stroke)&&t.getStrokedShape().containsPoint(i))return new bl(t)}else if(t.containsPointSelf(i))return new bl(t);return null},IE=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=navigator.clipboard)||void 0===n?void 0:n.writeText(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),RE=function(e,t,n){for(var i=function e(t,n,i){var r=Ni.union([].concat(_toConsumableArray(n&&t.mouseArea?[t.mouseArea instanceof Ni?t.mouseArea:Ni.bounds(t.mouseArea)]:[]),_toConsumableArray(i&&t.touchArea?[t.touchArea instanceof Ni?t.touchArea:Ni.bounds(t.touchArea)]:[]),[t.getSelfShape()],_toConsumableArray(t.children.filter((function(e){return e.visible&&!1!==e.pickable})).map((function(t){return e(t,n,i).transformed(t.matrix)})))).filter((function(e){return e.bounds.isValid()})));return t.hasClipArea()&&(r=r.shapeIntersection(t.clipArea)),r}(e.lastNode(),t,n),r=e.nodes.length-1;r>=0;r--){var a=e.nodes[r];a.hasClipArea()&&(i=i.shapeIntersection(a.clipArea)),i=i.transformed(a.matrix)}return i},DE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){_classCallCheck(this,n);var a=S()({fill:"white",highlightWidth:1,pickable:!1},r);a.spacing=e;var s=a.fill,o=Rr.toColor(s).withAlpha(0),l={fill:new Ks(0,0,0,i).addColorStop(0,o).addColorStop(.5,s).addColorStop(1,o)},u=new iu(0,0,a.highlightWidth,i,l),c=new iu(0,0,a.highlightWidth,i,l);return a.children=[u,c],t.call(this,a)}return _createClass(n)}(mf);By.register("HighlightNode",DE);var NE=DE,qE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({cursor:"pointer",listener:null,highlightExtensionWidth:0,highlightExtensionHeight:0,highlightCenterOffsetX:0,highlightCenterOffsetY:0,pointerAreaDilationX:0,pointerAreaDilationY:0,enabledPropertyOptions:{phetioFeatured:!1},disabledOpacity:Pr.DISABLED_OPACITY,tagName:"button"},r),o=function(t){return new NE(e.width+s.highlightExtensionWidth,e.height+s.highlightExtensionHeight,{centerX:e.centerX+s.highlightCenterOffsetX,centerY:e.centerY+s.highlightCenterOffsetY,fill:t,pickable:!1})},l=o("white"),u=o("black");s.children=[e,l,u],(a=t.call(this,s)).buttonModel=new LS(s);var c=new TS(a.buttonModel);a.interactionStateProperty=c,nn.multilink([c,i,a.buttonModel.enabledProperty],(function(e,t,n){var i=!t.equals(Rr.BLACK);l.visible=!i&&n&&(e===PS.OVER||e===PS.PRESSED),u.visible=i&&n&&(e===PS.OVER||e===PS.PRESSED)})),a.buttonModel.enabledProperty.link((function(e){a.cursor=e?s.cursor:null})),a._pressListener=a.buttonModel.createPressListener({tandem:s.tandem.createTandem("pressListener")}),a.addInputListener(a._pressListener),a.mouseArea=a.touchArea=Ni.bounds(a.bounds.dilatedXY(s.pointerAreaDilationX,s.pointerAreaDilationY));var h=eh.getOuterLineWidthFromNode(_assertThisInitialized(a));return a.focusHighlight=Ni.bounds(a.bounds.shiftedY(-h)),a}return _createClass(n,[{key:"isPDOMClicking",value:function(){return this._pressListener.pdomClickingProperty.get()}}]),n}(Hc(jo));By.register("JoistButton",qE);var OE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);for(var i=new Ni,r=0;r<3;r++)i.circle(0,3.543*r*2.5,2.5);return t.call(this,i,e)}return _createClass(n)}(Hl);By.register("KebabMenuIcon",OE);var BE=function(){function e(t){_classCallCheck(this,e),this.windowSize=t,this.samples=new Array(t),this.sampleIndex=0,this.total=0,this.numSamples=0,this.clear()}return _createClass(e,[{key:"clear",value:function(){this.total=0,this.numSamples=0;for(var e=0;e<this.windowSize;e++)this.samples[e]=0}},{key:"getRunningAverage",value:function(){return this.total/this.numSamples}},{key:"isSaturated",value:function(){return this.numSamples>=this.windowSize}},{key:"updateRunningAverage",value:function(e){return this.numSamples=Math.min(this.windowSize,this.numSamples+1),this.total-=this.samples[this.sampleIndex],this.total+=e,this.samples[this.sampleIndex]=e,this.sampleIndex=(this.sampleIndex+1)%this.windowSize,this.getRunningAverage()}}]),e}();xt.register("RunningAverage",BE);var GE=BE,HE=!1,FE=function(){function e(t){_classCallCheck(this,e);var n=S()({windowSize:2e3,memoryLimit:phet.chipper.queryParameters.memoryLimit},t);this.memoryLimit=1048576*n.memoryLimit,this.runningAverage=new GE(n.windowSize),this.lastMemory=0}return _createClass(e,[{key:"measure",value:function(){if(window.performance&&window.performance.memory&&window.performance.memory.usedJSHeapSize){var t=window.performance.memory.usedJSHeapSize;this.lastMemory=t;var n=this.runningAverage.updateRunningAverage(t);if(this.memoryLimit&&this.runningAverage.isSaturated()&&!HE&&n>this.memoryLimit&&t>.5*this.memoryLimit)throw HE=!0,new Error("Average memory used (".concat(e.memoryString(n),") is above our memoryLimit (").concat(e.memoryString(this.memoryLimit),"). Current memory: ").concat(e.memoryString(t),"."))}}}],[{key:"memoryString",value:function(e){return"".concat(Math.ceil(e/1048576),"MB")}}]),e}();By.register("MemoryMonitor",FE);var YE=function(){function e(){_classCallCheck(this,e),_defineProperty(this,"allTimes",[]),_defineProperty(this,"histogram",[]),_defineProperty(this,"longTimes",[]),_defineProperty(this,"frameStartTime",0),_defineProperty(this,"previousFrameStartTime",0);for(var t=0;t<30;t++)this.histogram.push(0);$("body").append('<div style="z-index: 99999999;position: absolute;color:red" id="phetProfiler" ></div>')}return _createClass(e,[{key:"frameStarted",value:function(){this.frameStartTime=Date.now()}},{key:"frameEnded",value:function(){if(this.allTimes.length>0&&this.allTimes.length%60==0){for(var e=0,t=0;t<this.allTimes.length;t++)e+=this.allTimes[t];var n=En.roundSymmetric(1e3/(e/this.allTimes.length)),i="".concat(n," FPS"),r=En.roundSymmetric(e/this.allTimes.length);i=(i="".concat(i+" — "+r,"ms/frame"))+" — "+this.histogram,this.longTimes.length>0&&(this.longTimes.sort((function(e,t){return t-e})),i=i+" — "+this.longTimes),$("#phetProfiler").html(i);for(var a=0;a<30;a++)this.histogram[a]=0;this.longTimes.length=0,this.allTimes.length=0}if(this.previousFrameStartTime){var s=this.frameStartTime-this.previousFrameStartTime;this.allTimes.push(s),s<30?this.histogram[s]++:this.longTimes.push(s)}this.previousFrameStartTime=this.frameStartTime}}],[{key:"start",value:function(t){var n=new e;t.frameStartedEmitter.addListener((function(){return n.frameStarted()})),t.frameEndedEmitter.addListener((function(){return n.frameEnded()}))}}]),e}();By.register("Profiler",YE);var zE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,S()({containerTagName:"section",tagName:"div",labelContent:e,labelTagName:"h2"},i))}return _createClass(n)}(jo);Iy.register("PDOMSectionNode",zE);var UE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,zA.a11y.simSection.controlAreaStringProperty,e)}return _createClass(n)}(zE);Iy.register("ControlAreaNode",UE);var WE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,zA.a11y.simSection.playAreaStringProperty,e)}return _createClass(n)}(zE);Iy.register("PlayAreaNode",WE);var jE=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n),(e=t.call(this)).openingSummaryNode=new jo({tagName:"p"});var i=new jo({tagName:"p",innerContent:zA.a11y.simSection.screenSummary.keyboardShortcutsHintStringProperty});return e.addChild(e.openingSummaryNode),e.addChild(i),e.pdomOrder=[e.openingSummaryNode,null,i],e}return _createClass(n,[{key:"setIntroString",value:function(e,t,n){this.openingSummaryNode.innerContent=n&&t?ic.fillIn(zA.a11y.simSection.screenSummary.multiScreenIntroStringProperty,{screen:t}):ic.fillIn(zA.a11y.simSection.screenSummary.singleScreenIntroPatternStringProperty,{sim:e})}}]),n}(jo);Iy.register("ScreenSummaryNode",jE);var XE=new jn(0,0,1024,618),QE=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({layoutBounds:XE.copy(),layerSplit:!0,excludeInvisible:!0,tandem:xe.REQUIRED,visiblePropertyOptions:{phetioState:!1,phetioReadOnly:!0},containerTagName:"article",tagName:"div",screenSummaryContent:null,includePDOMNodes:!0},e);return(i=t.call(this,r)).layoutBounds=r.layoutBounds,i.visibleBoundsProperty=new dt(r.layoutBounds),i.pdomTitleNode=new jo({tagName:"h1",focusHighlight:"invisible"}),i.pdomPlayAreaNode=new WE,i.pdomControlAreaNode=new UE,i.pdomScreenSummaryNode=new jE,i.screenSummaryContent=null,r.screenSummaryContent&&i.setScreenSummaryContent(r.screenSummaryContent),i.visibleProperty.lazyLink((function(e){e?(i.pdomTitleNode.focusable=!0,i.pdomTitleNode.focus()):i.pdomTitleNode.focusable=!1})),i.pdomTitleNode.addInputListener({blur:function(){i.pdomTitleNode.focusable=!1}}),i.pdomParentNode=new jo({children:r.includePDOMNodes?[i.pdomTitleNode,i.pdomScreenSummaryNode,i.pdomControlAreaNode,i.pdomPlayAreaNode]:[i.pdomTitleNode]}),i.addChild(i.pdomParentNode),i.pdomParentNode.pdomOrder=r.includePDOMNodes?[i.pdomTitleNode,i.pdomScreenSummaryNode,i.pdomPlayAreaNode,i.pdomControlAreaNode]:[i.pdomTitleNode],i}return _createClass(n,[{key:"setPDOMOrder",value:function(e){throw new Error("should not need to set accessible order on a ScreenView")}},{key:"setChildren",value:function(e){return jo.prototype.setChildren.call(this,e),this.pdomParentNode&&!this.hasChild(this.pdomParentNode)&&(this.addChild(this.pdomParentNode),this.pdomParentNode.moveToBack()),this}},{key:"getLayoutScale",value:function(e){return n.getLayoutScale(this.layoutBounds,e)}},{key:"layout",value:function(e){this.matrix=n.getLayoutMatrix(this.layoutBounds,e),this.visibleBoundsProperty.value=this.parentToLocalBounds(e)}},{key:"setScreenSummaryContent",value:function(e){this.screenSummaryContent&&this.pdomScreenSummaryNode.removeChild(this.screenSummaryContent),this.screenSummaryContent=e,this.pdomScreenSummaryNode.addChild(e)}},{key:"setScreenSummaryIntroAndTitle",value:function(e,t,n,i){this.pdomScreenSummaryNode.setIntroString(e,t,i),this.pdomTitleNode.innerContent=n}},{key:"getVoicingOverviewContent",value:function(){throw new Error("The ScreenView should implement getVoicingOverviewContent if Voicing is enabled")}},{key:"getVoicingDetailsContent",value:function(){throw new Error("The ScreenView should implement getVoicingDetailsContent when the Voicing feature is enabled.")}},{key:"getVoicingHintContent",value:function(){throw new Error("The ScreenView should implement getVoicingHintContent when Voicing is enabled.")}},{key:"step",value:function(e){}}],[{key:"getLayoutScale",value:function(e,t){return Math.min(t.width/e.width,t.height/e.height)}},{key:"getLayoutMatrix",value:function(e,t,i){var r=S()({verticalAlign:"center"},i),a=t.width,s=t.height,o=n.getLayoutScale(e,t),l=0,u=0;return o===a/e.width?(u=s/o-e.height,"center"===r.verticalAlign&&(u/=2)):o===s/e.height&&(l=(a/o-e.width)/2),oi.rowMajor(o,0,l*o+t.left,0,o,u*o+t.top,0,0,1)}}]),n}(jo);QE.DEFAULT_LAYOUT_BOUNDS=XE,By.register("ScreenView",QE);var KE=QE,JE=By,ZE=Rn,$E=new c("mobius"),ek=QueryStringMachine.getAll({mobiusCanvasSupersampling:{type:"number",defaultValue:1},mobiusCanvasSkipGamma:{type:"boolean",defaultValue:!0}});$E.register("MobiusQueryParameters",ek);var tk=ek,nk=function(e){_inherits(n,THREE.Texture);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=new jo({renderer:"canvas",preventFit:!0});s.addChild(e);var o=new Cy(s,{width:i,height:r,accessibility:!1});o.updateDisplay();var l=o.rootBackbone.blocks[0].canvas;return(a=t.call(this,l))._display=o,a._scene=s,a._width=i,a._height=r,a.needsUpdate=!0,a}return _createClass(n,[{key:"update",value:function(){this._display.updateDisplay(),this.needsUpdate=!0}},{key:"dispose",value:function(){this._display.dispose(),this._scene.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}();$E.register("NodeTexture",nk);var ik=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:un.ZERO;_classCallCheck(this,e),this.positionArray=t,this.normalArray=n,this.uvArray=i,this.positionIndex=3*r,this.normalIndex=3*r,this.uvIndex=2*r,this.offset=r,this.offsetPosition=a}return _createClass(e,[{key:"position",value:function(e,t,n){this.positionArray&&(this.positionArray[this.positionIndex++]=e+this.offsetPosition.x,this.positionArray[this.positionIndex++]=t+this.offsetPosition.y,this.positionArray[this.positionIndex++]=n+this.offsetPosition.z),this.offset++}},{key:"normal",value:function(e,t,n){this.normalArray&&(this.normalArray[this.normalIndex++]=e,this.normalArray[this.normalIndex++]=t,this.normalArray[this.normalIndex++]=n)}},{key:"uv",value:function(e,t){this.uvArray&&(this.uvArray[this.uvIndex++]=e,this.uvArray[this.uvIndex++]=t)}},{key:"getOffset",value:function(){return this.offset}}]),e}();$E.register("TriangleArrayWriter",ik);var rk=function(e){_inherits(n,THREE.BufferGeometry);var t=_createSuper(n);function n(e,i,r,a,s,o,l,u,c,h,d,p,f,m,g){var y;_classCallCheck(this,n),y=t.call(this);var v=new Float32Array(18),A=new Float32Array(18),b=new Float32Array(12);return n.updateArrays(v,A,b,e,i,r,a,s,o,l,u,c,h,d,p,f,m,g),y.addAttribute("position",new THREE.BufferAttribute(v,3)),y.addAttribute("normal",new THREE.BufferAttribute(A,3)),y.addAttribute("uv",new THREE.BufferAttribute(b,2)),y._update=function(e,t,i,r,a,s,o,l,u,c,h,d,p,f,m){n.updateArrays(v,A,b,e,t,i,r,a,s,o,l,u,c,h,d,p,f,m),y.attributes.position.needsUpdate=!0,y.attributes.normal.needsUpdate=!0,y.computeBoundingSphere()},y}return _createClass(n,[{key:"set",value:function(e,t,n,i,r,a,s,o,l,u,c,h,d,p,f){this._update(e,t,n,i,r,a,s,o,l,u,c,h,d,p,f)}}],[{key:"updateArrays",value:function(e,t,n,i,r,a,s,o,l,u,c,h,d,p,f,m,g,y){var v=arguments.length>18&&void 0!==arguments[18]?arguments[18]:0,A=arguments.length>19&&void 0!==arguments[19]?arguments[19]:un.ZERO,b=new ik(e,t,n,v,A);return b.position(i,r,a),b.position(s,o,l),b.position(u,c,h),b.position(i,r,a),b.position(u,c,h),b.position(d,p,f),b.uv(0,0),b.uv(1,0),b.uv(1,1),b.uv(0,0),b.uv(1,1),b.uv(0,1),b.normal(m,g,m),b.getOffset()}}]),n}();$E.register("Quad",rk);var ak=function(e){_inherits(n,THREE.Mesh);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=new rk(0,0,0,i,0,0,i,r,0,0,r,0,0,0,1),l=new THREE.MeshBasicMaterial(A({transparent:!0,depthTest:!1,map:e},a));return(s=t.call(this,o,l)).quadGeometry=o,s.basicMaterial=l,s.textureQuadWidth=i,s.textureQuadHeight=r,s}return _createClass(n,[{key:"updateTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.textureQuadWidth,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.textureQuadHeight;this.basicMaterial.map=e,this.basicMaterial.needsUpdate=!0,t===this.textureQuadWidth&&n===this.textureQuadHeight||(this.textureQuadWidth=t,this.textureQuadHeight=n,this.quadGeometry.set(0,0,0,t,0,0,t,n,0,0,n,0,0,0,1))}},{key:"dispose",value:function(){this.quadGeometry.dispose(),this.basicMaterial.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this)&&_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}();$E.register("TextureQuad",ak);var sk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=S()({phetioType:n.ThreeObject3DIO,tandem:xe.REQUIRED},e);return t.call(this,i)}return _createClass(n)}(Be);sk.ThreeObject3DIO=new U("ThreeObject3DIO",{valueType:sk,toStateObject:function(){return{}},stateSchema:{}}),$E.register("ThreeObject3DPhetioObject",sk);var ok=rl((function(e){return function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;_classCallCheck(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=r[r.length-1],o=r.slice(0,r.length-1);return(e=t.call.apply(t,[this].concat(_toConsumableArray(o)))).phetioObject=new sk(s),e}return _createClass(n,[{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this)&&_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.phetioObject.dispose()}}]),n}(e)}));$E.register("ThreeInstrumentable",ok);var lk=new Ni("M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"),uk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({font:Qr.DEFAULT,textFill:"black",maxTextWidth:null,tandem:xe.REQUIRED,tandemNameSuffix:"Button",innerContent:e},i);return r.content=new Xl(e,k({font:r.font,fill:r.textFill,maxWidth:r.maxTextWidth,tandem:r.tandem.createTandem("text")},r.textNodeOptions)),t.call(this,r)}return _createClass(n)}(FS);nA.register("TextPushButton",uk);var ck=function(e){var t=_.get(window,e);return void 0!==t?t:null};y.register("getGlobal",ck);var hk=ck,dk=new Rr(0,200,0),pk=new Rr(255,85,0),fk=new Rr(0,135,0),mk=new Rr(106,206,245),gk=new Rr(254,225,5),yk={ACCELERATION:new Rr(255,255,50),APPLIED_FORCE:new Rr(236,153,55),BUTTON_YELLOW:gk,ELASTIC_POTENTIAL_ENERGY:new Rr(0,204,255),FRICTION_FORCE:pk,GRAVITATIONAL_FORCE:new Rr(50,130,215),GRAVITATIONAL_POTENTIAL_ENERGY:new Rr(55,130,215),HEAT_THERMAL_ENERGY:pk,IMAGINARY_PART:new Rr(153,51,102),KINETIC_ENERGY:new Rr(30,200,45),MOMENTUM:new Rr(50,50,255),NET_WORK:dk,NORMAL_FORCE:new Rr(255,235,0),PHET_LOGO_BLUE:mk,PHET_LOGO_YELLOW:gk,POSITION:Rr.BLUE,REAL_PART:new Rr(255,153,0),RED_COLORBLIND:pk,RESET_ALL_BUTTON_BASE_COLOR:new Rr(247,151,34),GREEN_COLORBLIND:fk,TOTAL_ENERGY:new Rr(180,180,0),TOTAL_FORCE:dk,VELOCITY:new Rr(50,255,50),WALL_FORCE:new Rr(153,51,0),SCREEN_ICON_FRAME:"#dddddd"};Iy.register("PhetColorScheme",yk);var vk=yk,Ak=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=S()({iconLength:16,pathOptions:{stroke:"white",lineWidth:2.5,lineCap:"round"},baseColor:vk.RED_COLORBLIND,xMargin:4,yMargin:4,innerContent:zA.a11y.closeStringProperty,voicingNameResponse:zA.a11y.closeStringProperty},e),r=(new Ni).moveTo(-i.iconLength/2,-i.iconLength/2).lineTo(i.iconLength/2,i.iconLength/2).moveTo(i.iconLength/2,-i.iconLength/2).lineTo(-i.iconLength/2,i.iconLength/2);return i.content=new Hl(r,i.pathOptions),t.call(this,i)}return _createClass(n)}(FS);Iy.register("CloseButton",Ak);var bk="data:audio/mpeg;base64,//swxAAAB5gnMzRhAAEHDWyDNLAAAAAaAQAu7tjAQAAABgMBgNNiBBAWD7ykMQf1g+D5/qBMHwfB/iAEPWCDv+o5wfPg+8EAQBMHz6gQB8Hwfsu2uWDrkw/a9xgUaMwFxxwCLsWS7MHN7VJki8fVT75eTqpn7/Xt1QxW//lJVbnfNuFRTzwrLn/5GVBnKMy/FVs5dTYABARKCMRm//syxAQACHBHWZ2kAAEJi+jxpg1Qlry2AYclVGyMwNoFJ29hqHqa1TRqRMCoetKstcqUzHBxQdCJmVcSJ/EQdEo0FXSoNLGkav/ljqPtEvjAoAE0zuEoM3lMJlLY3Uj65AMeMzQN6QWeLFdCcxLNFy4dBVXVfZ1L+gIki4KPQVBb4dERU6CrsFSoaLVHv/Ev9Hw4ANdAAG7VBBhVdP/7MsQFAAh8YybVowABG49vdx6AAm8ODBg8FDy9pmwIBsHPVGiPMueyERxZdIFnSpkzI8fezb+0z6OJVv7HHw7XBWdXwa6/y34l6sq7uitTjFTEgsFYrFQqFQDAGrQXMbpbb3ZGQWPWvTnyyeKKHgQ/nvlUf/u74oOHp/8v3R/dl/UcSXDz+kMBEHI0p5efiDJqb/64foFiBSWqB2r/+zLEA4AIVDlivZGAAQePKiWmDNhtwTYmBYyxnJdmZwmMtZ8ZjInEMMpo+VFWESqmhsWBoClhKKEhCW5UNPCsFVgqImyWS6KTAhEUrYoO7kaAWIJCwQzbgl5XrFBB27xoQwfnY6kozJtFz0SgICsWM3VIKWs6qr0tgI15/pQomHhblqjycRUCWe1dUOpxFOiJ/ooQC+IEEBlVdh0r//swxAUACGCjMy0kSsDoiCAA95gpQaBI041ceup5PSlsv5QNXMyixFLVkTXWpYUBYy/lEl4YCdWlLoZ//zGlKUBEhV0SiFT+us7WdBXqAbQ2hdxgDfH4RQsI+kgo2RnWVECiCa0TrUSNjalrUVVKyg0yapYqqVlRTNVLFf/2P/1qVadsTFKlitVMQU1FMy45OS4zVVVVVVVVVVVV",Sk=XA(JA,bk),Ek=BA.createLock(bk),kk=new QA,Vk=!1,wk=function(){Vk||(Ek(),Vk=!0)},_k=JA.decodeAudioData(Sk.buffer,(function(e){null===kk.audioBufferProperty.value&&(kk.audioBufferProperty.set(e),wk())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),kk.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),wk()}));_k&&_k.then((function(e){null===kk.audioBufferProperty.value&&(kk.audioBufferProperty.set(e),wk())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),wk()}));var Ck=new tS(kk,{soundClipOptions:{initialOutputLevel:.4},soundManagerOptions:{categoryName:"user-interface"}});KA.register("generalCloseSoundPlayer",Ck);var xk=Ck,Pk="data:audio/mpeg;base64,//swxAAABswbPzQxABEQFyzDMlAAAAGoGRIdz0AAARQAAAAAMCd5QEAxBA4sPlz/BAMfw+ooc8EA/EAYKAh/qBBYfwfD4jB/4nD98ZXetEKIxIqnuursF7pTGkY4dNYcaZhOjzgxDNndb75ggdCsIvV3qoeM9HIX215a6Hftuc5FhwFRhvuJuhxbMPp+ir0KlAaCTHVtZuCsLISS//syxAYACGhJXR2jABEVIGmw8YpieZwGg6y5/p6bf69uls4kMS9HVvrXl8hI5WPBY8FawqGh3PYlLA0HQm6ZHvUe/4UB4ChNzls1AZIAAxJNQMBOy4KAeSsL0QgRcxFInzpyhsQ6tvdvaM160ZnbY/2bY19dTlJVJmhrQpT/Vf0eVjfzG////6PMYzmtqJdg0WqADvRwaGDBgBO5T//7MsQFgAkEZSA1swABDRYvdx5QAhmAEZHdFc2HHLBy/LcmfqWvq1yftVsQSJAxzSi25i5w6qqvMy/cjgNSoKu2Q1LHp1S4NCJQsHfLUSINPxK6oxocyIhmMRkMhQAQBuyhLerW2u5zoV4af2nULcHzwOiPxQjFU/nvIyflMKARabfnQqGI/v/FAIV6UJnPAgAca//9NZUgFEnVWuP/+zLEA4AIVL1vnYQAEQkIajDMpMja7T9a7DL+uzSEg2RRajlNmUzFPCBtL7Uyoa/iVlabnj1+Pi9f61X5WuJ9V1XhkOmtYltLGPI1//8s/0PMAKmLuWQPy0Hrh0Uy4C5MCaWoC5bwOjrQpVOQIn9JNDksr2zEBLvAp3LCI8Is9BX1FTsS50j5Us8OCIqEg73ZZ9QByyIAiddlUPU0//swxAUCSEyXLMywatDDBOHA8zBIRfBtlFDU3P7EItHsWE51WgaTVpJLPMzOMYE1qUSth4pRSd1WkZLqqrnGPUobBm4oDUDHol//+rJBUlwL0rYuAoOSuFITEsfTp5a46IhKRBQ6FQkBQCWJESR0KhIeNASKGnsJgJCf///1VUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVV",Tk=XA(JA,Pk),Mk=BA.createLock(Pk),Lk=new QA,Ik=!1,Rk=function(){Ik||(Mk(),Ik=!0)},Dk=JA.decodeAudioData(Tk.buffer,(function(e){null===Lk.audioBufferProperty.value&&(Lk.audioBufferProperty.set(e),Rk())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),Lk.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),Rk()}));Dk&&Dk.then((function(e){null===Lk.audioBufferProperty.value&&(Lk.audioBufferProperty.set(e),Rk())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),Rk()}));var Nk=new tS(Lk,{soundClipOptions:{initialOutputLevel:.4},soundManagerOptions:{categoryName:"user-interface"}});KA.register("generalOpenSoundPlayer",Nk);var qk=Nk,Ok=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"play",value:function(){}},{key:"stop",value:function(){}}]),e}());KA.register("nullSoundPlayer",Ok);var Bk=Ok,Gk=new U("DynamicMarkerIO",{supertype:U.ObjectIO,applyState:_.noop,toStateObject:function(){return{}},isValidValue:_.stubTrue,documentation:"IO Type used as a place holder for dynamic elements to be created when set for state."});V.register("DynamicMarkerIO",Gk);var Hk=Gk,Fk=function(e){var t=e.split("."),n=t.pop(),i=_.get(window,t);return i?i[n].bind(i):null};y.register("gracefulBind",Fk);var Yk=Fk,zk=function(e,t){return function(e){_inherits(i,e);var n=_createSuper(i);function i(){var e;_classCallCheck(this,i);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];e=n.call.apply(n,[this].concat(a));var o=a[t]||{},l=(a[a.length-1],Yk("phet.joist.sim.showPopup")),u=Yk("phet.joist.sim.hidePopup"),c=S()({showPopup:l,hidePopup:u,isModal:!0,layoutBounds:null,tandem:xe.OPTIONAL,focusOnShowNode:null,focusOnHideNode:null},o);return e.layoutBounds=c.layoutBounds,e._focusOnShowNode=c.focusOnShowNode,e._focusOnHideNode=c.focusOnHideNode,e._nodeToFocusOnHide=null,e.popupParent=new Uk(_assertThisInitialized(e),{show:e.show.bind(_assertThisInitialized(e)),hide:e.hide.bind(_assertThisInitialized(e)),layout:e.layout.bind(_assertThisInitialized(e))}),e.isShowingProperty=new pt(!1,{tandem:c.tandem.createTandem("isShowingProperty"),phetioReadOnly:!0,phetioFeatured:!0}),e.isShowingProperty.lazyLink((function(t){t?c.showPopup(e.popupParent,c.isModal):c.hidePopup(e.popupParent,c.isModal)})),e}return _createClass(i,[{key:"layout",value:function(e){this.layoutBounds&&(this.popupParent.matrix=KE.getLayoutMatrix(this.layoutBounds,e))}},{key:"show",value:function(){this._nodeToFocusOnHide=this._focusOnHideNode||Wc.pdomFocusedNode,this.isShowingProperty.value=!0,this._focusOnShowNode&&this._focusOnShowNode.focusable&&this._focusOnShowNode.focus()}},{key:"hide",value:function(){this.isShowingProperty.value=!1,this._nodeToFocusOnHide&&this._nodeToFocusOnHide.focusable&&this._nodeToFocusOnHide.focus()}},{key:"dispose",value:function(){this.hide(),this.isShowingProperty.dispose(),_get(_getPrototypeOf(i.prototype),"dispose",this).call(this)}}]),i}(e)},Uk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({children:[e]},i);return(r=t.call(this,a)).show=a.show,r.hide=a.hide,r.layout=a.layout,r}return _createClass(n)}(jo);nA.register("Popupable",zk);var Wk=zk,jk=iv("SUN");nA.register("SunStrings",jk);var Xk=jk,Qk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({xSpacing:10,ySpacing:10,topMargin:15,bottomMargin:15,leftMargin:null,maxWidthMargin:12,maxHeightMargin:12,closeButtonLength:18.2,closeButtonTopMargin:10,closeButtonRightMargin:10,title:null,titleAlign:"center",addAriaLabelledByFromTitle:!0,layoutStrategy:Kk,closeButtonListener:function(){return r.hide()},closeButtonColor:"black",closeButtonTouchAreaXDilation:0,closeButtonTouchAreaYDilation:0,closeButtonMouseAreaXDilation:0,closeButtonMouseAreaYDilation:0,closeButtonVoicingDialogTitle:null,closeButtonLastInPDOM:!1,openedSoundPlayer:qk,closedSoundPlayer:xk,sim:hk("phet.joist.sim"),showCallback:null,hideCallback:null,layoutBounds:KE.DEFAULT_LAYOUT_BOUNDS,focusOnShowNode:null,cornerRadius:10,resize:!0,fill:"white",stroke:"black",backgroundPickable:!0,maxHeight:null,maxWidth:null,tandem:xe.OPTIONAL,phetioType:n.DialogIO,phetioReadOnly:Be.DEFAULT_OPTIONS.phetioReadOnly,phetioState:Be.DEFAULT_OPTIONS.phetioState,visiblePropertyOptions:{phetioReadOnly:!0},tagName:"div",ariaRole:"dialog"},i);a.xMargin=0,a.yMargin=0,null===a.leftMargin&&(a.leftMargin=a.xSpacing+a.closeButtonLength+a.closeButtonRightMargin),!a.maxWidth&&a.layoutBounds&&(a.maxWidth=Jk(a.layoutBounds.width,a.maxWidthMargin)),!a.maxHeight&&a.layoutBounds&&(a.maxHeight=Jk(a.layoutBounds.height,a.maxHeightMargin));var s,o=new gc({priority:gc.MEDIUM_PRIORITY}),l=new Ak({iconLength:a.closeButtonLength,baseColor:"transparent",buttonAppearanceStrategy:NS.FlatAppearanceStrategy,xMargin:0,yMargin:0,listener:function(){l.voicingSpeakContextResponse({utterance:o}),a.closeButtonListener()},pathOptions:{stroke:a.closeButtonColor},tandem:a.tandem.createTandem("closeButton"),phetioReadOnly:a.phetioReadOnly,phetioState:!1,visiblePropertyOptions:{phetioFeatured:!1,phetioState:!1},enabledPropertyOptions:{phetioFeatured:!1},soundPlayer:Bk,tagName:"button",innerContent:Xk.a11y.closeStringProperty,voicingContextResponse:Xk.a11y.closedStringProperty});if(a.closeButtonVoicingDialogTitle){var u="string"==typeof a.closeButtonVoicingDialogTitle?new st(a.closeButtonVoicingDialogTitle):a.closeButtonVoicingDialogTitle;s=nn.multilink([Xk.a11y.titleClosePatternStringProperty,u],(function(e,t){l.voicingNameResponse=ic.fillIn(e,{title:t})}))}l.touchArea=l.bounds.dilatedXY(a.closeButtonTouchAreaXDilation,a.closeButtonTouchAreaYDilation),l.mouseArea=l.bounds.dilatedXY(a.closeButtonMouseAreaXDilation,a.closeButtonMouseAreaYDilation);var c=[a.title,e];a.closeButtonLastInPDOM?c.push(l):c.unshift(l),c=c.filter((function(e){return null!=e})),a.focusOnShowNode=a.focusOnShowNode?a.focusOnShowNode:c[0].focusable?c[0]:l;var h=new gf({children:a.title?[a.title,e]:[e],spacing:a.ySpacing,align:a.titleAlign}),d=new cf(h,{topMargin:a.topMargin,bottomMargin:a.bottomMargin,leftMargin:a.leftMargin}),p=new cf(l,{topMargin:a.closeButtonTopMargin,rightMargin:a.closeButtonRightMargin}),f=new mf({children:[d,p],spacing:a.xSpacing,align:"top"});(r=t.call(this,f,a)).isShowingProperty.lazyLink((function(e){e?(a.openedSoundPlayer.play(),a.showCallback&&a.showCallback()):(a.closedSoundPlayer.play(),a.hideCallback&&a.hideCallback())})),r.sim=a.sim,r.closeButton=l;var m=nn.multilink([r.sim.boundsProperty,r.sim.screenBoundsProperty,r.sim.scaleProperty,r.sim.selectedScreenProperty,r.isShowingProperty,r.localBoundsProperty],(function(e,t,n){e&&t&&n&&a.layoutStrategy(_assertThisInitialized(r),e,t,n)}));r.pdomOrder=c,a.title&&a.title.tagName&&a.addAriaLabelledByFromTitle&&r.addAriaLabelledbyAssociation({thisElementName:Rh.PRIMARY_SIBLING,otherNode:a.title,otherElementName:Rh.PRIMARY_SIBLING});var g={keydown:function(e){var t=e.domEvent;if(xa.isKeyEvent(e.domEvent,xa.KEY_ESCAPE))t.preventDefault(),r.hide();else if(xa.isKeyEvent(e.domEvent,xa.KEY_TAB)&&Qa.isFullScreen()){var n=Wc.pdomFocus.trail.getUniqueId(),i=Gs.getNextFocusable().id===n,a=Gs.getPreviousFocusable().id===n;i&&a&&t.preventDefault()}}};return r.addInputListener(g),r.disposeDialog=function(){m.dispose(),r.removeInputListener(g),s&&s.dispose(),l.dispose(),h.dispose(),f.removeAllChildren(),f.detach()},r}return _createClass(n,[{key:"dispose",value:function(){this.disposeDialog(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Wk(rA,1));function Kk(e,t,n,i){e.layoutBounds&&(e.center=e.layoutBounds.center)}function Jk(e,t){return e>2*t?e-2*t:e}_defineProperty(Qk,"DialogIO",new U("DialogIO",{valueType:Qk,supertype:Hk})),nA.register("Dialog",Qk);var Zk=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({reload:function(){return window.location.reload()},xSpacing:30,topMargin:30,bottomMargin:30,leftMargin:30},e),a=new Hl(lk,{fill:"#E87600",scale:.048}),s=new Xl(zA.webglWarning.contextLossFailureStringProperty,{font:new tA(12)}),o=new uk(zA.webglWarning.contextLossReloadStringProperty,{font:new tA(12),baseColor:"#E87600",listener:function(){return i.hide()}}),l=new mf({children:[a,s,o],spacing:10});return(i=t.call(this,l,r)).reload=r.reload,i.disposeContextLossFailureDialog=function(){s.dispose(),o.dispose()},i}return _createClass(n,[{key:"dispose",value:function(){this.disposeContextLossFailureDialog(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"hide",value:function(){this.reload(),_get(_getPrototypeOf(n.prototype),"hide",this).call(this)}},{key:"hideWithoutReload",value:function(){_get(_getPrototypeOf(n.prototype),"hide",this).call(this)}}]),n}(Qk);Iy.register("ContextLossFailureDialog",Zk);var $k=null,eV=new Float32Array(128),tV={vectorToThree:function(e){return new THREE.Vector3(e.x,e.y,e.z)},threeToVector:function(e){return new un(e.x,e.y,e.z)},colorToThree:function(e){return new THREE.Color(e.toNumber())},frontVertices:function(e,t){return eV.slice(0,tV.writeFrontVertices(eV,0,e,t))},topVertices:function(e,t){return eV.slice(0,tV.writeTopVertices(eV,0,e,t))},rightVertices:function(e,t){return eV.slice(0,tV.writeRightVertices(eV,0,e,t))},leftVertices:function(e,t){return eV.slice(0,tV.writeLeftVertices(eV,0,e,t))},writeTriangle:function(e,t,n,i,r,a,s,o,l,u,c){return e[t+0]=n,e[t+1]=i,e[t+2]=r,e[t+3]=a,e[t+4]=s,e[t+5]=o,e[t+6]=l,e[t+7]=u,e[t+8]=c,t+9},writeQuad:function(e,t,n,i,r,a,s,o,l,u,c,h,d,p){return t=tV.writeTriangle(e,t,n,i,r,a,s,o,l,u,c),t=tV.writeTriangle(e,t,n,i,r,l,u,c,h,d,p)},writeFrontVertices:function(e,t,n,i){return tV.writeQuad(e,t,n.minX,n.maxY,i,n.minX,n.minY,i,n.maxX,n.minY,i,n.maxX,n.maxY,i)},writeTopVertices:function(e,t,n,i){return tV.writeQuad(e,t,n.minX,i,n.maxY,n.maxX,i,n.maxY,n.maxX,i,n.minY,n.minX,i,n.minY)},writeRightVertices:function(e,t,n,i){return tV.writeQuad(e,t,i,n.minY,n.maxX,i,n.minY,n.minX,i,n.maxY,n.minX,i,n.maxY,n.maxX)},writeLeftVertices:function(e,t,n,i){return tV.writeQuad(e,t,i,n.minY,n.maxX,i,n.maxY,n.maxX,i,n.maxY,n.minX,i,n.minY,n.minX)},get textureLoader(){return $k||($k=new THREE.TextureLoader),$k},imageToTexture:function(e,t){return t?tV.textureLoader.load(e.src,BA.createLock()):tV.textureLoader.load(e.src)},isWebGLEnabled:function(){return phet.chipper.queryParameters.webgl&&ma.isWebGLSupported},showWebGLWarning:function(e){var t=new mf({children:[new Hl(lk,{fill:"#E87600",scale:.06}),new Xl(zA.webglWarning.bodyStringProperty,{font:new tA(16),fill:"#000",maxWidth:600})],spacing:12,align:"center",cursor:"pointer",center:e.layoutBounds.center});e.addChild(t),t.mouseArea=t.touchArea=t.localBounds,t.addInputListener({up:function(){as("https://phet.colorado.edu/webgl-disabled-page?simLocale=".concat(phet.joist.sim.locale))}})}};$E.register("ThreeUtils",tV);var nV=tV,iV=function(){function e(t){var n=this;_classCallCheck(this,e);var i=S()({backgroundProperty:new dt(Rr.BLACK),cameraPosition:new un(0,0,10)},t);this.activeScale=1,this.canvasWidth=0,this.canvasHeight=0,this.threeScene=new THREE.Scene,this.threeCamera=new THREE.PerspectiveCamera,this.threeCamera.near=1,this.threeCamera.far=100;try{this.threeRenderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0,preserveDrawingBuffer:phet.chipper.queryParameters.preserveDrawingBuffer})}catch(r){console.log(r),this.threeRenderer=null}this.threeRenderer&&this.threeRenderer.setPixelRatio(window.devicePixelRatio||1),this.contextLossDialog=null,this.threeRenderer&&this.threeRenderer.context.canvas.addEventListener("webglcontextlost",(function(e){n.showContextLossDialog()})),this.threeRenderer&&this.threeRenderer.context.canvas.addEventListener("webglcontextrestored",(function(e){n.contextLossDialog.hideWithoutReload()})),this.backgroundProperty=i.backgroundProperty,this.colorListener=function(e){n.threeRenderer&&n.threeRenderer.setClearColor(e.toNumber(),e.alpha)},this.backgroundProperty.link(this.colorListener),this.threeCamera.position.copy(nV.vectorToThree(i.cameraPosition)),this.dimensionsChangedEmitter=new d}return _createClass(e,[{key:"renderToCanvas",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Math.ceil(this.canvasWidth*t),i=Math.ceil(this.canvasHeight*t),r=n*e,a=i*e,s=document.createElement("canvas");if(s.width=n,s.height=i,this.threeRenderer){var o=new THREE.WebGLRenderTarget(r,a,{minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat});this.render(o);var l,u=new window.ArrayBuffer(r*a*4),c=new window.Uint8Array(u),h=this.threeRenderer.getContext();if(h.readPixels(0,0,r,a,h.RGBA,h.UNSIGNED_BYTE,c),1===e)l=new window.Uint8ClampedArray(u);else{l=new window.Uint8ClampedArray(n*i*4);var d=1/(e*e);if(tk.mobiusCanvasSkipGamma)for(var p=0;p<n;p++)for(var f=p*e,m=0;m<i;m++){for(var g=m*e,y=4*(p+m*n),v=0,A=0,b=0,S=0,E=0;E<e;E++)for(var k=0;k<e;k++){var V=4*(f+E+(g+k)*r),w=c[V+3];v+=c[V+0]*w,A+=c[V+1]*w,b+=c[V+2]*w,S+=w}0===S?(l[y+0]=0,l[y+1]=0,l[y+2]=0,l[y+3]=0):(l[y+0]=Math.floor(v/S),l[y+1]=Math.floor(A/S),l[y+2]=Math.floor(b/S),l[y+3]=Math.floor(S*d))}else for(var _=0;_<n;_++)for(var C=_*e,x=0;x<i;x++){for(var P=x*e,T=4*(_+x*n),M=0,L=0,I=0,R=0,D=0;D<e;D++)for(var N=0;N<e;N++){var q=4*(C+D+(P+N)*r),O=Math.pow(c[q+3],2.2);M+=Math.pow(c[q+0],2.2)*O,L+=Math.pow(c[q+1],2.2)*O,I+=Math.pow(c[q+2],2.2)*O,R+=O}0===R?(l[T+0]=0,l[T+1]=0,l[T+2]=0,l[T+3]=0):(l[T+0]=Math.floor(Math.pow(M/R,1/2.2)),l[T+1]=Math.floor(Math.pow(L/R,1/2.2)),l[T+2]=Math.floor(Math.pow(I/R,1/2.2)),l[T+3]=Math.floor(Math.pow(R*d,1/2.2)))}}var B=s.getContext("2d"),G=B.createImageData(n,i);G.data.set(l),B.putImageData(G,0,0),o.dispose()}return s}},{key:"showContextLossDialog",value:function(){this.contextLossDialog||(this.contextLossDialog=new Zk),this.contextLossDialog.show()}},{key:"getRaycasterFromScreenPoint",value:function(e){var t=2*e.x/this.canvasWidth-1,n=2*(1-e.y/this.canvasHeight)-1,i=new THREE.Vector3(t,n,0),r=new THREE.Raycaster;return r.setFromCamera(i,this.threeCamera),r}},{key:"projectPoint",value:function(e){var t=nV.vectorToThree(e);return t.project(this.threeCamera),isFinite(t.x)||(t.x=0),isFinite(t.y)||(t.y=0),new pn((t.x+1)*this.canvasWidth/2,(1-t.y)*this.canvasHeight/2)}},{key:"getRayFromScreenPoint",value:function(e){var t=this.getRaycasterFromScreenPoint(e).ray;return new Wv(nV.threeToVector(t.origin),nV.threeToVector(t.direction).normalize())}},{key:"setDimensions",value:function(e,t){this.canvasWidth=e,this.canvasHeight=t,this.threeCamera.updateProjectionMatrix(),this.threeRenderer&&this.threeRenderer.setSize(this.canvasWidth,this.canvasHeight),this.dimensionsChangedEmitter.emit()}},{key:"adjustViewOffset",value:function(e){var t=this.threeCamera.near*Math.tan(Math.PI/360*this.threeCamera.fov)/this.threeCamera.zoom,n=this.threeCamera.aspect*t,i=new jn(0,0,this.canvasWidth,this.canvasHeight).shifted(e.center.negated()),r=e.width,a=e.height,s=-n,o=t,l=(i.left*n/(.5*e.width)-s)*r/(2*n),u=(o- -i.top*t/(.5*e.height))*a/(2*t);this.threeCamera.setViewOffset(r,a,l,u,this.canvasWidth,this.canvasHeight),this.threeCamera.aspect=e.width/e.height,this.threeCamera.updateProjectionMatrix()}},{key:"width",get:function(){return this.canvasWidth}},{key:"height",get:function(){return this.canvasHeight}},{key:"render",value:function(e){this.threeRenderer&&(this.threeRenderer.setRenderTarget(e||null),this.threeRenderer.render(this.threeScene,this.threeCamera),this.threeRenderer.autoClear=!1)}},{key:"dispose",value:function(){this.threeRenderer&&this.threeRenderer.dispose(),this.threeScene.dispose(),this.backgroundProperty.unlink(this.colorListener)}}],[{key:"computeIsometricFOV",value:function(e,t,n,i,r){var a=t/i,s=n/r;return a>s?e:360*Math.atan(Math.tan(e*Math.PI/360)*s/a)/Math.PI}}]),e}();$E.register("ThreeStage",iV);var rV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({parentMatrixProperty:new dt(oi.IDENTITY),fov:50,getPhetioMouseHit:null},i);return(r=t.call(this)).layoutBounds=e,r._getPhetioMouseHit=a.getPhetioMouseHit,r.stage=new iV(a),r.stage.threeCamera.fov=a.fov,r.stage.threeCamera.aspect=r.layoutBounds.width/r.layoutBounds.height,r.parentMatrixProperty=a.parentMatrixProperty,r.backgroundEventTarget=new iu({}),r.addChild(r.backgroundEventTarget),r.stage.threeRenderer&&(r.domNode=new eu(r.stage.threeRenderer.domElement,{preventTransform:!0,pickable:!1}),r.domNode.invalidateDOM=function(){return r.domNode.invalidateSelf(new jn(0,0,0,0))},r.domNode.invalidateDOM(),r.domNode.renderToCanvasSelf=function(e,t){var n=e.context,i=t.timesMatrix(r.getUniqueTrail().getMatrix().inverted()).m00(),a=r.stage.renderToCanvas(tk.mobiusCanvasSupersampling,i);n.save(),n.setTransform(1,0,0,-1,0,a.height),n.drawImage(a,0,0),n.restore()},r.addChild(r.domNode)),r.viewOffsetListener=function(){var e=r.stage.width,t=r.stage.height;e&&t&&r.stage.adjustViewOffset(r.parentToGlobalBounds(new jn(0,0,r.layoutBounds.width,r.layoutBounds.height)))},r.parentMatrixProperty.lazyLink(r.viewOffsetListener),r.mutate(a),r}return _createClass(n,[{key:"getPhetioMouseHit",value:function(e){return this._getPhetioMouseHit&&this.isPhetioMouseHittable(e)?this._getPhetioMouseHit(e):_get(_getPrototypeOf(n.prototype),"getPhetioMouseHit",this).call(this,e)}},{key:"projectPoint",value:function(e){return this.stage.projectPoint(e)}},{key:"getRayFromScreenPoint",value:function(e){return this.stage.getRayFromScreenPoint(e)}},{key:"layout",value:function(e,t){var n=phet.joist.sim.dimensionProperty.value;e=n.width,t=n.height,this.stage.setDimensions(e,t),this.backgroundEventTarget.setRectBounds(this.globalToLocalBounds(new jn(0,0,e,t)));var i=e/this.layoutBounds.width,r=t/this.layoutBounds.height;0!==i&&0!==r&&(this.stage.activeScale=r>i?i:r,this.viewOffsetListener(),this.stage.threeRenderer&&this.domNode.invalidateDOM())}},{key:"render",value:function(e){this.stage.render(e)}},{key:"dispose",value:function(){this.parentMatrixProperty.unlink(this.viewOffsetListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.stage.dispose()}}]),n}(jo);$E.register("ThreeIsometricNode",rV);var aV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({fov:50},r);if((a=t.call(this)).stage=new iV(s),a.layoutWidth=e,a.layoutHeight=i,a.stage.threeCamera.fov=s.fov,a.stage.threeCamera.aspect=e/i,a.offsetProperty=new Lp(pn.ZERO),a.backgroundEventTarget=new iu(0,0,e,i),a.addChild(a.backgroundEventTarget),a.stage.threeRenderer){a.domNode=new eu(a.stage.threeRenderer.domElement,{preventTransform:!0,pickable:!1}),a.domNode.invalidateDOM=function(){return a.domNode.invalidateSelf(new jn(0,0,0,0))},a.domNode.invalidateDOM();var o=new oi;ma.prepareForTransform(a.stage.threeRenderer.domElement),a.offsetProperty.link((function(e){o.setToTranslation(e.x,e.y),ma.applyPreparedTransform(o,a.stage.threeRenderer.domElement)})),a.domNode.renderToCanvasSelf=function(e){var t=a.stage.renderToCanvas(tk.mobiusCanvasSupersampling),n=e.context;n.save(),n.setTransform(1,0,a.offsetProperty.value.x,-1,0,a.stage.canvasHeight+a.offsetProperty.value.y),n.drawImage(t,0,0),n.restore()},a.addChild(a.domNode)}return a.mutate(s),a}return _createClass(n,[{key:"projectPoint",value:function(e){return this.stage.projectPoint(e)}},{key:"getRayFromScreenPoint",value:function(e){return this.stage.getRayFromScreenPoint(e)}},{key:"layout",value:function(){var e=this.localToGlobalBounds(this.backgroundEventTarget.bounds).roundedOut();this.stage.setDimensions(e.width,e.height),this.offsetProperty.value=e.leftTop,this.stage.threeCamera.updateProjectionMatrix(),this.stage.threeRenderer&&this.domNode.invalidateDOM()}},{key:"render",value:function(e){this.stage.render(e)}},{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.stage.dispose()}}]),n}(jo);$E.register("ThreeNode",aV);var sV=new U("ThreeQuaternionIO",{valueType:THREE.Quaternion,documentation:"A numerical object representing a quaternion",toStateObject:function(e){return{x:e.x,y:e.y,z:e.z,w:e.w}},stateSchema:{x:Lt,y:Lt,z:Lt,w:Lt},fromStateObject:function(e){return new THREE.Quaternion(e.x,e.y,e.z,e.w)},applyState:function(e,t){e.set(t.x,t.y,t.z,t.w)},stateToArgsForConstructor:function(e){return[e.x,e.y,e.z,e.w]}});$E.register("ThreeQuaternionIO",sV);var oV=$E,lV=new c("nitroglycerin"),uV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({mainColor:"gray",highlightColor:"white",shadowColor:"black",highlightDiameterRatio:.5,highlightXOffset:-.4,highlightYOffset:-.4},i);return(r=t.call(this,e/2,a)).updateShadedSphereFill=function(){var e=r.radius,t=e*a.highlightXOffset,n=e*a.highlightYOffset;r.fill=new Js(t,n,0,t,n,2*e).addColorStop(0,a.highlightColor).addColorStop(a.highlightDiameterRatio,a.mainColor).addColorStop(1,a.shadowColor)},r.updateShadedSphereFill(),r}return _createClass(n,[{key:"invalidatePath",value:function(){_get(_getPrototypeOf(n.prototype),"invalidatePath",this).call(this),this.updateShadedSphereFill&&this.updateShadedSphereFill()}}]),n}($l);Iy.register("ShadedSphereNode",uV);var cV=function(){function e(t,n,i,r,a,s){_classCallCheck(this,e),this.symbol=t,this.covalentRadius=n,this.vanDerWaalsRadius=i,this.electronegativity=r,this.atomicWeight=a,this.color=s}return _createClass(e,[{key:"isSameElement",value:function(e){return e.symbol===this.symbol}},{key:"isHydrogen",value:function(){return this.isSameElement(e.H)}},{key:"isCarbon",value:function(){return this.isSameElement(e.C)}},{key:"isOxygen",value:function(){return this.isSameElement(e.O)}},{key:"toString",value:function(){return this.symbol}}],[{key:"getElementBySymbol",value:function(t){var n=e.elementMap.get(t);return n}}]),e}();_defineProperty(cV,"Ar",new cV("Ar",97,188,null,39.948,"#FFAFAF")),_defineProperty(cV,"B",new cV("B",85,192,2.04,10.811,"rgb(255,170,119)")),_defineProperty(cV,"Be",new cV("Be",105,153,1.57,9.012182,"rgb(194,255,95)")),_defineProperty(cV,"Br",new cV("Br",114,185,2.96,79.904,"rgb(190,30,20)")),_defineProperty(cV,"C",new cV("C",77,170,2.55,12.0107,"rgb(178,178,178)")),_defineProperty(cV,"Cl",new cV("Cl",100,175,3.16,35.4527,"rgb(136,242,21)")),_defineProperty(cV,"F",new cV("F",72,147,3.98,18.9984032,"rgb(245,255,36)")),_defineProperty(cV,"H",new cV("H",37,120,2.2,1.00794,"#ffffff")),_defineProperty(cV,"I",new cV("I",133,198,2.66,126.90447,"#940094")),_defineProperty(cV,"N",new cV("N",75,155,3.04,14.00674,"#0000ff")),_defineProperty(cV,"Ne",new cV("Ne",69,154,null,20.1797,"#1AFFFB")),_defineProperty(cV,"O",new cV("O",73,152,3.44,15.9994,vk.RED_COLORBLIND)),_defineProperty(cV,"P",new cV("P",110,180,2.19,30.973762,"rgb(255,154,0)")),_defineProperty(cV,"S",new cV("S",103,180,2.58,32.066,"rgb(212,181,59)")),_defineProperty(cV,"Si",new cV("Si",118,210,1.9,28.0855,"rgb(240,200,160)")),_defineProperty(cV,"Sn",new cV("Sn",145,217,1.96,118.71,"#668080")),_defineProperty(cV,"Xe",new cV("Xe",108,216,2.6,131.293,"#429eb0")),_defineProperty(cV,"elements",[cV.Ar,cV.B,cV.Be,cV.Br,cV.C,cV.Cl,cV.F,cV.H,cV.I,cV.N,cV.Ne,cV.O,cV.P,cV.S,cV.Si,cV.Sn,cV.Xe]),_defineProperty(cV,"elementMap",function(e){var t=new Map;return e.forEach((function(e){return t.set(e.symbol,e)})),t}(cV.elements)),lV.register("Element",cV);var hV=cV.P.covalentRadius,dV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r,a=S()({mainColor:e.color},i);return t.call(this,2*(r=e.covalentRadius,.11*(hV-.75*(hV-r))),a)}return _createClass(n)}(uV);lV.register("AtomNode",dV);var pV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({children:[new jo({children:e,center:pn.ZERO})]},i);return t.call(this,r)}return _createClass(n)}(jo),fV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({direction:"leftToRight",overlapPercent:.25},i),a=[],s=null;return e.forEach((function(e){var t=new dV(e,r.atomNodeOptions);if(a.push(t),null!==s){var n=r.overlapPercent*t.width;"leftToRight"===r.direction?t.left=s.right-n:t.right=s.left+n}s=t})),t.call(this,a,r)}return _createClass(n)}(pV);lV.register("HorizontalMoleculeNode",fV);var mV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.H,cV.C,cV.C,cV.H],S()({overlapPercent:.35},e))}return _createClass(n)}(fV);lV.register("C2H2Node",mV);var gV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.C,i),a=.165*r.width,s=new dV(cV.C,k({left:r.centerX+.25*r.width,centerY:r.centerY},i)),o=new dV(cV.H,k({centerX:r.left+a,centerY:r.top+a},i)),l=[new dV(cV.H,k({centerX:s.right-a,centerY:s.top+a},i)),o,r,s,new dV(cV.H,k({centerX:r.left+a,centerY:r.bottom-a},i)),new dV(cV.H,k({centerX:s.right-a,centerY:s.bottom-a},i))];return t.call(this,l,e)}return _createClass(n)}(pV);lV.register("C2H4Node",gV);var yV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.C,i),a=new dV(cV.C,k({centerX:r.right+.25*r.width,centerY:r.centerY},i)),s=new dV(cV.H,k({centerX:r.centerX,centerY:r.top},i)),o=new dV(cV.H,k({centerX:s.centerX,centerY:r.bottom},i)),l=new dV(cV.H,k({centerX:r.left,centerY:r.centerY},i)),u=new dV(cV.H,k({centerX:a.centerX,centerY:a.top},i)),c=[new dV(cV.H,k({centerX:a.centerX,centerY:a.bottom},i)),u,a,new dV(cV.Cl,k({left:a.centerX+.11*r.width,centerY:a.centerY},i)),l,r,o,s];return t.call(this,c,e)}return _createClass(n)}(pV);lV.register("C2H5ClNode",yV);var vV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.C,i),a=new dV(cV.C,k({centerX:r.right+.25*r.width,centerY:r.centerY},i)),s=new dV(cV.H,k({centerX:r.centerX,centerY:r.top},i)),o=new dV(cV.H,k({centerX:s.centerX,centerY:r.bottom},i)),l=new dV(cV.H,k({centerX:r.left,centerY:r.centerY},i)),u=new dV(cV.H,k({centerX:a.centerX,centerY:a.top},i)),c=new dV(cV.H,k({centerX:a.centerX,centerY:a.bottom},i)),h=new dV(cV.O,k({centerX:a.right,centerY:a.centerY},i)),d=[c,u,a,new dV(cV.H,k({centerX:h.right,centerY:h.centerY},i)),h,l,r,o,s];return t.call(this,d,e)}return _createClass(n)}(pV);lV.register("C2H5OHNode",vV);var AV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.C,i),a=new dV(cV.C,A({centerX:r.right+.25*r.width,centerY:r.centerY},i)),s=new dV(cV.H,A({centerX:r.centerX,centerY:r.top},i)),o=new dV(cV.H,A({centerX:s.centerX,centerY:r.bottom},i)),l=new dV(cV.H,A({centerX:r.left,centerY:r.centerY},i)),u=new dV(cV.H,A({centerX:a.centerX,centerY:a.top},i)),c=[new dV(cV.H,A({centerX:a.centerX,centerY:a.bottom},i)),u,a,new dV(cV.H,A({centerX:a.right,centerY:a.centerY},i)),l,r,o,s];return t.call(this,c,e)}return _createClass(n)}(pV);lV.register("C2H6Node",AV);var bV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.C,i),a=.165*r.width,s=new dV(cV.O,A({centerX:r.right+.25*r.width,centerY:r.centerY},i)),o=new dV(cV.H,A({centerX:r.left+a,centerY:r.top+a},i)),l=[o,r,s,new dV(cV.H,A({centerX:o.centerX,centerY:r.bottom-a},i))];return t.call(this,l,e)}return _createClass(n)}(pV);lV.register("CH2ONode",bV);var SV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.C,i),a=new dV(cV.H,A({centerX:r.centerX,centerY:r.top},i)),s=new dV(cV.H,A({centerX:a.centerX,centerY:r.bottom},i)),o=new dV(cV.H,A({centerX:r.left,centerY:r.centerY},i)),l=new dV(cV.O,A({centerX:r.right+.25*r.width,centerY:r.centerY},i)),u=[s,a,r,o,new dV(cV.H,A({centerX:l.right,centerY:l.centerY},i)),l];return t.call(this,u,e)}return _createClass(n)}(pV);lV.register("CH3OHNode",SV);var EV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.C,i),a=.165*r.width,s=new dV(cV.H,A({centerX:r.left+a,centerY:r.top+a},i)),o=new dV(cV.H,A({centerX:r.right-a,centerY:s.centerY},i)),l=new dV(cV.H,A({centerX:s.centerX,centerY:r.bottom-a},i)),u=[o,l,r,s,new dV(cV.H,A({centerX:o.centerX,centerY:l.centerY},i))];return t.call(this,u,e)}return _createClass(n)}(pV);lV.register("CH4Node",EV);var kV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.C],e)}return _createClass(n)}(fV);lV.register("CNode",kV);var VV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.O,cV.C,cV.O],e)}return _createClass(n)}(fV);lV.register("CO2Node",VV);var wV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.C,cV.O],e)}return _createClass(n)}(fV);lV.register("CONode",wV);var _V=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.S,cV.C,cV.S],e)}return _createClass(n)}(fV);lV.register("CS2Node",_V);var CV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.Cl,cV.Cl],e)}return _createClass(n)}(fV);lV.register("Cl2Node",CV);var xV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.F,cV.F],e)}return _createClass(n)}(fV);lV.register("F2Node",xV);var PV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.H,cV.H],e)}return _createClass(n)}(fV);lV.register("H2Node",PV);var TV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.O,i),a=new dV(cV.H,A({centerX:r.left,centerY:r.bottom-.25*r.height},i)),s=[r,a,new dV(cV.H,A({centerX:r.right,centerY:a.centerY},i))];return t.call(this,s,e)}return _createClass(n)}(pV);lV.register("H2ONode",TV);var MV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.S,i),a=new dV(cV.H,A({centerX:r.left,centerY:r.bottom-.25*r.height},i)),s=[r,a,new dV(cV.H,A({centerX:r.right,centerY:a.centerY},i))];return t.call(this,s,e)}return _createClass(n)}(pV);lV.register("H2SNode",MV);var LV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=S()({direction:"rightToLeft",overlapPercent:.5},e);return t.call(this,[cV.Cl,cV.H],i)}return _createClass(n)}(fV);lV.register("HClNode",LV);var IV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=S()({direction:"rightToLeft",overlapPercent:.5},e);return t.call(this,[cV.F,cV.H],i)}return _createClass(n)}(fV);lV.register("HFNode",IV);var RV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.N,cV.N],e)}return _createClass(n)}(fV);lV.register("N2Node",RV);var DV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.N,cV.N,cV.O],e)}return _createClass(n)}(fV);lV.register("N2ONode",DV);var NV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.N,i),a=new dV(cV.H,k({centerX:r.left,centerY:r.bottom-.25*r.height},i)),s=[a,new dV(cV.H,k({centerX:r.right,centerY:a.centerY},i)),r,new dV(cV.H,k({centerX:r.centerX,centerY:r.bottom},i))];return t.call(this,s,e)}return _createClass(n)}(pV);lV.register("NH3Node",NV);var qV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.N,i),a=new dV(cV.O,k({centerX:r.left,centerY:r.centerY+.25*r.height},i)),s=[a,r,new dV(cV.O,k({centerX:r.right,centerY:a.centerY},i))];return t.call(this,s,e)}return _createClass(n)}(pV);lV.register("NO2Node",qV);var OV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.N,cV.O],e)}return _createClass(n)}(fV);lV.register("NONode",OV);var BV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.O,cV.O],e)}return _createClass(n)}(fV);lV.register("O2Node",BV);var GV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.O,i),a=[new dV(cV.F,k({centerX:r.left,centerY:r.centerY+.25*r.height},i)),r,new dV(cV.F,k({centerX:r.right,centerY:r.centerY+.25*r.height},i))];return t.call(this,a,e)}return _createClass(n)}(pV);lV.register("OF2Node",GV);var HV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.P,i),a=new dV(cV.P,k({centerX:r.left+.3*r.width,centerY:r.bottom+.2*r.width},i)),s=new dV(cV.P,k({centerX:r.right,centerY:r.bottom},i)),o=[new dV(cV.P,k({centerX:r.left,centerY:r.centerY+.2*r.height},i)),s,a,r];return t.call(this,o,e)}return _createClass(n)}(pV);lV.register("P4Node",HV);var FV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.P,i),a=new dV(cV.Cl,k({centerX:r.left,centerY:r.bottom-.25*r.height},i)),s=[a,new dV(cV.Cl,k({centerX:r.right,centerY:a.centerY},i)),r,new dV(cV.Cl,k({centerX:r.centerX,centerY:r.bottom},i))];return t.call(this,s,e)}return _createClass(n)}(pV);lV.register("PCl3Node",FV);var YV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.P,i),a=new dV(cV.Cl,k({centerX:r.centerX,centerY:r.top},i)),s=new dV(cV.Cl,k({centerX:r.centerX,centerY:r.bottom},i)),o=[new dV(cV.Cl,k({centerX:r.right,centerY:r.centerY},i)),s,new dV(cV.Cl,k({centerX:r.left+.25*r.width,centerY:r.top+.25*r.height},i)),r,a,new dV(cV.Cl,k({centerX:r.left+.1*r.width,centerY:r.bottom-.1*r.height},i))];return t.call(this,o,e)}return _createClass(n)}(pV);lV.register("PCl5Node",YV);var zV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.P,i),a=new dV(cV.F,k({centerX:r.left,centerY:r.bottom-.25*r.height},i)),s=[a,new dV(cV.F,k({centerX:r.right,centerY:a.centerY},i)),r,new dV(cV.F,k({centerX:r.centerX,centerY:r.bottom},i))];return t.call(this,s,e)}return _createClass(n)}(pV);lV.register("PF3Node",zV);var UV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.P,i),a=new dV(cV.H,k({centerX:r.left,centerY:r.bottom-.25*r.height},i)),s=[a,new dV(cV.H,k({centerX:r.right,centerY:a.centerY},i)),r,new dV(cV.H,k({centerX:r.centerX,centerY:r.bottom},i))];return t.call(this,s,e)}return _createClass(n)}(pV);lV.register("PH3Node",UV);var WV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[cV.S],e)}return _createClass(n)}(fV);lV.register("SNode",WV);var jV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.S,i),a=[new dV(cV.O,k({centerX:r.left,centerY:r.centerY+.2*r.height},i)),r,new dV(cV.O,k({centerX:r.right,centerY:r.centerY+.2*r.height},i))];return t.call(this,a,e)}return _createClass(n)}(pV);lV.register("SO2Node",jV);var XV=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=null==e?void 0:e.atomNodeOptions,r=new dV(cV.S,i),a=new dV(cV.O,k({centerX:r.left,centerY:r.centerY+.2*r.height},i)),s=new dV(cV.O,k({centerX:r.right,centerY:r.centerY+.2*r.height},i)),o=[new dV(cV.O,k({centerX:r.centerX+.08*r.width,centerY:r.left+.08*r.height},i)),a,r,s];return t.call(this,o,e)}return _createClass(n)}(pV);lV.register("SO3Node",XV);var QV=1,KV=function(){function e(t){_classCallCheck(this,e),this.element=t,this.symbol=t.symbol,this.covalentRadius=t.covalentRadius,this.covalentDiameter=2*t.covalentRadius,this.electronegativity=t.electronegativity,this.atomicWeight=t.atomicWeight,this.color=t.color,this.reference=(QV++).toString(16),this.id="".concat(this.symbol,"_").concat(this.reference)}return _createClass(e,[{key:"hasSameElement",value:function(e){return this.element.isSameElement(e.element)}},{key:"isHydrogen",value:function(){return this.element.isHydrogen()}},{key:"isCarbon",value:function(){return this.element.isCarbon()}},{key:"isOxygen",value:function(){return this.element.isOxygen()}},{key:"toString",value:function(){return this.symbol}}],[{key:"createAtomFromSymbol",value:function(t){return new e(cV.getElementBySymbol(t))}}]),e}();lV.register("Atom",KV);var JV={createSymbol:function(e){return JV.toSubscript(JV.createSymbolWithoutSubscripts(e))},createSymbolWithoutSubscripts:function(e){for(var t="",n=1,i=e.length,r=0;r<i;r++)0===r?t+=e[r].symbol:e[r]===e[r-1]?n++:(n>1&&(t+=n),n=1,t+=e[r].symbol);return n>1&&(t+=n),t},nonCarbonHillSortValue:function(e){var t=1e3*e.symbol.charCodeAt(0);return e.symbol.length>1&&(t+=e.symbol.charCodeAt(1)),t},carbonHillSortValue:function(e){return e.isCarbon()?0:e.isHydrogen()?1:JV.nonCarbonHillSortValue(e)},toSubscript:function(e){for(var t="",n=!1,i=function(e){return e>="0"&&e<="9"},r=0;r<e.length;r++){var a=e.charAt(r);!n&&i(a)?(t+="<sub>",n=!0):n&&!i(a)&&(t+="</sub>",n=!1),t+=a}return n&&(t+="</sub>",n=!1),t},hillOrderedSymbol:function(e){var t=_.some(e,(function(e){return e.isCarbon()}))?JV.carbonHillSortValue:JV.nonCarbonHillSortValue,n=_.sortBy(e,t);return JV.createSymbol(n)}};lV.register("ChemUtils",JV);var ZV=lV;function $V(e){var t=[];return e((function(e){t.push(e)})),t}y.register("collect",$V);function ew(e,t,n){var i=[];return function e(t,r){return r.forEach((function(r,a){i.push(a),1===t?n.apply(void 0,_toConsumableArray([r].concat(i))):e(t-1,r),i.pop()}))}(e,t)}y.register("dimensionForEach",ew);function tw(e,t,n){var i=[];return function e(t,r){return r.map((function(r,a){i.push(a);var s=1===t?n.apply(void 0,_toConsumableArray([r].concat(i))):e(t-1,r);return i.pop(),s}))}(e,t)}y.register("dimensionMap",tw);var nw=function(){function e(t,n){_classCallCheck(this,e),this.eventModel=t,this.eventCallback=n,this.period=this.eventModel.getPeriodBeforeNextEvent(),this.timeBeforeNextEvent=this.period}return _createClass(e,[{key:"step",value:function(e){for(;e>=this.timeBeforeNextEvent;)e-=this.timeBeforeNextEvent,this.period=this.eventModel.getPeriodBeforeNextEvent(),this.timeBeforeNextEvent=this.period,this.eventCallback(e);this.timeBeforeNextEvent-=e}},{key:"getRatio",value:function(){return(this.period-this.timeBeforeNextEvent)/this.period}}]),e}();y.register("EventTimer",nw);var iw=function(){function e(t){_classCallCheck(this,e),this.rate=t}return _createClass(e,[{key:"getPeriodBeforeNextEvent",value:function(){return 1/this.rate}}]),e}();nw.ConstantEventModel=iw;var rw=function(){function e(t,n){_classCallCheck(this,e),this.rate=t,this.pseudoRandomNumberSource=n}return _createClass(e,[{key:"getPeriodBeforeNextEvent",value:function(){var e=this.pseudoRandomNumberSource();return 2*e/this.rate}}]),e}();nw.UniformEventModel=rw;var aw=function(){function e(t,n){_classCallCheck(this,e),this.rate=t,this.pseudoRandomNumberSource=n}return _createClass(e,[{key:"getPeriodBeforeNextEvent",value:function(){var e=this.pseudoRandomNumberSource();return-Math.log(e)/this.rate}}]),e}();nw.PoissonEventModel=aw;function sw(e,t){for(var n=[],i=2*e.length-1,r=0;r<i;r++)r%2==0?n.push(e[r/2]):n.push(t((r-1)/2));return n}y.register("interleave",sw);function ow(e){"string"==typeof e&&(e={src:e});var t=e.src,n=e.callback,i=void 0===e.async||e.async,r=void 0!==e.cacheBust&&e.cacheBust,a=!1,s=document.createElement("script");s.type="text/javascript",s.async=i,s.onload=s.onreadystatechange=function(){var e=this.readyState;e&&"complete"!==e&&"loaded"!==e||a||(a=!0,n&&n())},s.src=t+(r?"?random=".concat(Math.random().toFixed(10)):"");var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(s,o)}y.register("loadScript",ow);function lw(e){var t=[],n=e.length;if(n>1)for(var i=0;i<n-1;i++)for(var r=e[i],a=i+1;a<n;a++)t.push([r,e[a]]);return t}y.register("pairs",lw);function uw(e,t){for(var n=[],i=[],r=e.length,a=0;a<r;a++)t(e[a])?n.push(e[a]):i.push(e[a]);return[n,i]}y.register("partition",uw);var cw=y,hw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n),e=A({position:pn.ZERO,size:new ms(200,50),baseColor:"#ff0000",captionText:"",captionColor:"white",invertY:!1},e),(i=t.call(this,e)).position=e.position,i.baseColor=e.baseColor,i.captionText=e.captionText,i.captionColor=e.captionColor,i.size=e.size;var r=i.size,a=r.width/2,s=.25*r.height/2;i.holeShape=Ni.ellipse(0,0,a,s);var o=.875*r.height,l=e.invertY?1:-1;return i.containerShape=(new Ni).moveTo(.5*-r.width,0).lineTo(.4*-r.width,l*o*.8).cubicCurveTo(.3*-r.width,l*(.8*o+.25*r.height*.6),.3*r.width,l*(.8*o+.25*r.height*.6),.4*r.width,l*o*.8).lineTo(.5*r.width,0).ellipticalArc(0,0,a,s,0,-.01*Math.PI,-.99*Math.PI,!e.invertY).close(),i}return _createClass(n)}(Be);tc.register("Bucket",hw);var dw=hw,pw=function(){function e(t,n){_classCallCheck(this,e),this._numerator=t,this._denominator=n}return _createClass(e,[{key:"numerator",get:function(){return this._numerator},set:function(e){this._numerator=e}},{key:"denominator",get:function(){return this._denominator},set:function(e){this._denominator=e}},{key:"getValue",value:function(){return this.numerator/this.denominator}},{key:"value",get:function(){return this.getValue()}},{key:"isInteger",value:function(){return this.numerator%this.denominator==0}},{key:"toString",value:function(){return"".concat(this.numerator,"/").concat(this.denominator)}},{key:"copy",value:function(){return new e(this.numerator,this.denominator)}},{key:"reduce",value:function(){var e=En.gcd(this.numerator,this.denominator);return this.numerator=0===e?0:En.roundSymmetric(this.numerator/e),this.denominator=0===e?0:En.roundSymmetric(this.denominator/e),this}},{key:"reduced",value:function(){return this.copy().reduce()}},{key:"isReduced",value:function(){return 1===En.gcd(this.numerator,this.denominator)}},{key:"equals",value:function(e){return this.numerator===e.numerator&&this.denominator===e.denominator}},{key:"isLessThan",value:function(e){return-1===fw.set(this).subtract(e).sign}},{key:"sign",get:function(){return Math.sign(this.getValue())}},{key:"abs",value:function(){return new e(Math.abs(this.numerator),Math.abs(this.denominator))}},{key:"set",value:function(e){return this.numerator=e.numerator,this.denominator=e.denominator,this}},{key:"setToSum",value:function(e,t,n,i){var r=En.lcm(t,i);return this.numerator=En.roundSymmetric(e*r/t)+En.roundSymmetric(n*r/i),this.denominator=r,this}},{key:"add",value:function(e){return this.setToSum(this.numerator,this.denominator,e.numerator,e.denominator)}},{key:"plus",value:function(e){return this.copy().add(e)}},{key:"subtract",value:function(e){return this.setToSum(this.numerator,this.denominator,-e.numerator,e.denominator)}},{key:"minus",value:function(e){return this.copy().subtract(e)}},{key:"multiply",value:function(e){return this.numerator*=e.numerator,this.denominator*=e.denominator,this}},{key:"times",value:function(e){return this.copy().multiply(e)}},{key:"divide",value:function(e){return this.numerator*=e.denominator,this.denominator*=e.numerator,this}},{key:"divided",value:function(e){return this.copy().divide(e)}},{key:"plusInteger",value:function(t){return new e(this.numerator+t*this.denominator,this.denominator)}},{key:"minusInteger",value:function(t){return new e(this.numerator-t*this.denominator,this.denominator)}},{key:"timesInteger",value:function(t){return new e(this.numerator*t,this.denominator)}},{key:"dividedInteger",value:function(t){return new e(this.numerator,this.denominator*t)}},{key:"toStateObject",value:function(){return{numerator:this._numerator,denominator:this._denominator}}}],[{key:"fromInteger",value:function(t){return new e(t,1)}},{key:"fromDecimal",value:function(t){if(Number.isInteger(t))return e.fromInteger(t);var n=t-En.toFixedNumber(t,0),i=Math.pow(10,En.numberOfDecimalPlaces(n));return new e(En.toFixedNumber(t*i,0),i).reduce()}},{key:"fromStateObject",value:function(t){return new e(t.numerator,t.denominator)}}]),e}();_defineProperty(pw,"ZERO",new pw(0,1)),_defineProperty(pw,"ONE",new pw(1,1)),_defineProperty(pw,"FractionIO",new U("FractionIO",{valueType:pw,stateSchema:{numerator:Lt,denominator:Lt},toStateObject:function(e){return e.toStateObject()},fromStateObject:function(e){return pw.fromStateObject(e)}}));var fw=new pw(1,1);tc.register("Fraction",pw);var mw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),e=A({sphereRadius:10,usableWidthProportion:1,tandem:xe.OPTIONAL,phetioType:n.SphereBucketIO},e),(i=t.call(this,e)).sphereBucketTandem=e.tandem,i._sphereRadius=e.sphereRadius,i._usableWidthProportion=e.usableWidthProportion,i._verticalParticleOffset=e.verticalParticleOffset||.4*-i._sphereRadius,i._particles=[],i}return _createClass(n,[{key:"addParticleFirstOpen",value:function(e,t){e.destinationProperty.set(this.getFirstOpenPosition()),this.addParticle(e,t)}},{key:"addParticleNearestOpen",value:function(e,t){e.destinationProperty.set(this.getNearestOpenPosition(e.destinationProperty.get())),this.addParticle(e,t)}},{key:"addParticle",value:function(e,t){var n=this;t||e.positionProperty.set(e.destinationProperty.get()),this._particles.push(e);var i=function(){n.removeParticle(e)};e.userControlledProperty.lazyLink(i),e.bucketRemovalListener=i}},{key:"removeParticle",value:function(e,t){this._particles=_.without(this._particles,e),e.bucketRemovalListener&&(e.userControlledProperty.unlink(e.bucketRemovalListener),delete e.bucketRemovalListener),t||this.relayoutBucketParticles()}},{key:"containsParticle",value:function(e){return-1!==this._particles.indexOf(e)}},{key:"extractClosestParticle",value:function(e){var t=null;return this._particles.forEach((function(n){(null===t||t.positionProperty.get().distance(e)>n.positionProperty.get().distance(e))&&(t=n)})),null!==t&&t.userControlledProperty.set(!0),t}},{key:"getParticleList",value:function(){return this._particles}},{key:"reset",value:function(){this._particles.forEach((function(e){"function"==typeof e.bucketRemovalListener&&(e.userControlledProperty.unlink(e.bucketRemovalListener),delete e.bucketRemovalListener)})),Ui(this._particles)}},{key:"isPositionOpen",value:function(e){for(var t=!0,n=0;n<this._particles.length;n++){if(this._particles[n].destinationProperty.get().equals(e)){t=!1;break}}return t}},{key:"getFirstOpenPosition",value:function(){for(var e=pn.ZERO,t=this.size.width*this._usableWidthProportion-2*this._sphereRadius,n=(this.size.width-t)/2+this._sphereRadius,i=Math.floor(t/(2*this._sphereRadius)),r=0,a=0,s=!1;!s;){var o=new pn(this.position.x-this.size.width/2+n+2*a*this._sphereRadius,this.getYPositionForLayer(r));this.isPositionOpen(o)?(e=o,s=!0):++a>=i&&(r++,a=0,i--,n+=this._sphereRadius,0===i&&(i=1,n-=this._sphereRadius))}return e}},{key:"getLayerForYPosition",value:function(e){return Math.abs(En.roundSymmetric((e-(this.position.y+this._verticalParticleOffset))/(2*this._sphereRadius*.866)))}},{key:"getNearestOpenPosition",value:function(e){var t=this,n=0;_.each(this._particles,(function(e){var i=t.getLayerForYPosition(e.destinationProperty.get().y);i>n&&(n=i)}));for(var i=[],r=this.size.width*this._usableWidthProportion-2*this._sphereRadius,a=(this.size.width-r)/2+this._sphereRadius,s=Math.floor(r/(2*this._sphereRadius)),o=0;o<=n+1;o++){for(var l=0;l<s;l++){var u=new pn(this.position.x-this.size.width/2+a+2*l*this._sphereRadius,this.getYPositionForLayer(o));this.isPositionOpen(u)&&(0!==o&&2!==this.countSupportingParticles(u)||i.push(u))}s--,a+=this._sphereRadius,0===s&&(s=1,a-=this._sphereRadius)}var c=i[0]||pn.ZERO;return _.each(i,(function(t){t.distance(e)<c.distance(e)&&(c=t)})),c}},{key:"getYPositionForLayer",value:function(e){return this.position.y+this._verticalParticleOffset+e*this._sphereRadius*2*.866}},{key:"isDangling",value:function(e){return!(e.destinationProperty.get().y===this.position.y+this._verticalParticleOffset)&&this.countSupportingParticles(e.destinationProperty.get())<2}},{key:"countSupportingParticles",value:function(e){for(var t=0,n=0;n<this._particles.length;n++){var i=this._particles[n];i.destinationProperty.get().y<e.y&&i.destinationProperty.get().distance(e)<3*this._sphereRadius&&t++}return t}},{key:"relayoutBucketParticles",value:function(){var e;do{for(var t=0;t<this._particles.length;t++){e=!1;var n=this._particles[t];if(this.isDangling(n)){n.destinationProperty.set(this.getNearestOpenPosition(n.destinationProperty.get())),e=!0;break}}}while(e)}}]),n}(dw),gw=Ye(uo(U.ObjectIO));mw.SphereBucketIO=new U("SphereBucketIO",{valueType:mw,documentation:"A model of a bucket into which spherical objects can be placed.",stateSchema:{particles:gw},toStateObject:function(e){return{particles:gw.toStateObject(e._particles)}},applyState:function(e,t){e.reset(),gw.fromStateObject(t.particles).forEach((function(t){e.addParticle(t)}))}}),tc.register("SphereBucket",mw);var yw=tc,vw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({headFill:Rr.YELLOW,headStroke:null,eyeFill:"black",mouthStroke:"black",headLineWidth:1},i);r=t.call(this);var s=new Au(a.headFill);a.headStroke=a.headStroke||new Ut([s],(function(e){return e.darkerColor()})),r.addChild(new $l(e/2,{fill:a.headFill,stroke:a.headStroke,lineWidth:a.headLineWidth}));var o=.075*e;r.addChild(new $l(o,{fill:a.eyeFill,centerX:.2*-e,centerY:.1*-e})),r.addChild(new $l(o,{fill:a.eyeFill,centerX:.2*e,centerY:.1*-e}));var l=.05*e;return r.smileMouth=new Hl((new Ni).arc(0,.05*e,.25*e,.2*Math.PI,.8*Math.PI),{stroke:a.mouthStroke,lineWidth:l,lineCap:"round"}),r.addChild(r.smileMouth),r.frownMouth=new Hl((new Ni).arc(0,.4*e,.2*e,.75*-Math.PI,.25*-Math.PI),{stroke:a.mouthStroke,lineWidth:l,lineCap:"round"}),r.addChild(r.frownMouth),r.smile(),r.mutate(a),r}return _createClass(n,[{key:"smile",value:function(){return this.smileMouth.visible=!0,this.frownMouth.visible=!1,this}},{key:"frown",value:function(){return this.smileMouth.visible=!1,this.frownMouth.visible=!0,this}}]),n}(jo);Iy.register("FaceNode",vw);var Aw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,{}))._leftMargin=0,i._rightMargin=0,i._topMargin=0,i._bottomMargin=0,i._extension=0,i._roundMargins=!0,i._fillProperty=new Au(i.fill),i._borderOverrideProperty=new Au(null),i._borderProperty=new Ut([i._fillProperty,i._borderOverrideProperty],(function(e,t){return null===i._borderOverrideProperty.paint?e.withAlpha(0):t})),i.roundedShape=(new Ni).moveTo(0,0).arc(0,0,1,0,Math.PI/2,!1).close().makeImmutable(),i.rectangularShape=Ni.rectangle(0,0,1,1).makeImmutable(),i.leftSide=new iu(0,0,1,1),i.rightSide=new iu(0,0,1,1),i.topSide=new iu(0,0,1,1),i.bottomSide=new iu(0,0,1,1),i.topLeftCorner=new Hl(null),i.topRightCorner=new Hl(null),i.bottomLeftCorner=new Hl(null),i.bottomRightCorner=new Hl(null),i.invalidateGradients(),i.invalidateRoundMargins(),i.invalidateMargin(),i.mutate(e),i}return _createClass(n,[{key:"invalidateRoundMargins",value:function(){this._roundMargins?(this.topLeftCorner.shape=this.roundedShape,this.topRightCorner.shape=this.roundedShape,this.bottomLeftCorner.shape=this.roundedShape,this.bottomRightCorner.shape=this.roundedShape):(this.topLeftCorner.shape=this.rectangularShape,this.topRightCorner.shape=this.rectangularShape,this.bottomLeftCorner.shape=this.rectangularShape,this.bottomRightCorner.shape=this.rectangularShape)}},{key:"invalidateGradients",value:function(){var e=new Ks(0,0,1,0).addColorStop(this._extension,this._fillProperty).addColorStop(1,this._borderProperty),t=new Js(0,0,0,0,0,1).addColorStop(this._extension,this._fillProperty).addColorStop(1,this._borderProperty);this.leftSide.fill=e,this.rightSide.fill=e,this.topSide.fill=e,this.bottomSide.fill=e,this.topLeftCorner.fill=t,this.topRightCorner.fill=t,this.bottomLeftCorner.fill=t,this.bottomRightCorner.fill=t}},{key:"invalidateRectangle",value:function(){_get(_getPrototypeOf(n.prototype),"invalidateRectangle",this).call(this),this.invalidateMargin()}},{key:"invalidateMargin",value:function(){this.children=[].concat(_toConsumableArray(this._leftMargin>0&&this.rectHeight>0?[this.leftSide]:[]),_toConsumableArray(this._rightMargin>0&&this.rectHeight>0?[this.rightSide]:[]),_toConsumableArray(this._topMargin>0&&this.rectWidth>0?[this.topSide]:[]),_toConsumableArray(this._bottomMargin>0&&this.rectWidth>0?[this.bottomSide]:[]),_toConsumableArray(this._topMargin>0&&this._leftMargin>0?[this.topLeftCorner]:[]),_toConsumableArray(this._topMargin>0&&this._rightMargin>0?[this.topRightCorner]:[]),_toConsumableArray(this._bottomMargin>0&&this._leftMargin>0?[this.bottomLeftCorner]:[]),_toConsumableArray(this._bottomMargin>0&&this._rightMargin>0?[this.bottomRightCorner]:[]));var e=this.rectWidth,t=this.rectHeight,n=this.rectX,i=this.rectY,r=this.rectX+e,a=this._rectY+t;this.leftSide.hasParent()&&(this.leftSide.matrix=(new oi).rowMajor(-this._leftMargin,0,n,0,t,i,0,0,1)),this.rightSide.hasParent()&&(this.rightSide.matrix=(new oi).rowMajor(this._rightMargin,0,r,0,t,i,0,0,1)),this.topSide.hasParent()&&(this.topSide.matrix=(new oi).rowMajor(0,e,n,-this._topMargin,0,i,0,0,1)),this.bottomSide.hasParent()&&(this.bottomSide.matrix=(new oi).rowMajor(0,e,n,this._bottomMargin,0,a,0,0,1)),this.topLeftCorner.hasParent()&&(this.topLeftCorner.matrix=(new oi).rowMajor(-this._leftMargin,0,n,0,-this._topMargin,i,0,0,1)),this.topRightCorner.hasParent()&&(this.topRightCorner.matrix=(new oi).rowMajor(this._rightMargin,0,r,0,-this._topMargin,i,0,0,1)),this.bottomLeftCorner.hasParent()&&(this.bottomLeftCorner.matrix=(new oi).rowMajor(-this._leftMargin,0,n,0,this._bottomMargin,a,0,0,1)),this.bottomRightCorner.hasParent()&&(this.bottomRightCorner.matrix=(new oi).rowMajor(this._rightMargin,0,r,0,this._bottomMargin,a,0,0,1))}},{key:"dispose",value:function(){this._fillProperty.dispose(),this._borderOverrideProperty.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"setFill",value:function(e){return _get(_getPrototypeOf(n.prototype),"setFill",this).call(this,e),this._fillProperty.paint=e,this}},{key:"setStroke",value:function(e){return _get(_getPrototypeOf(n.prototype),"setStroke",this).call(this,e),this}},{key:"leftMargin",get:function(){return this._leftMargin},set:function(e){this._leftMargin!==e&&(this._leftMargin=e,this.invalidateMargin())}},{key:"rightMargin",get:function(){return this._rightMargin},set:function(e){this._rightMargin!==e&&(this._rightMargin=e,this.invalidateMargin())}},{key:"topMargin",get:function(){return this._topMargin},set:function(e){this._topMargin!==e&&(this._topMargin=e,this.invalidateMargin())}},{key:"bottomMargin",get:function(){return this._bottomMargin},set:function(e){this._bottomMargin!==e&&(this._bottomMargin=e,this.invalidateMargin())}},{key:"xMargin",get:function(){return this._leftMargin},set:function(e){this._leftMargin===e&&this._rightMargin===e||(this._leftMargin=e,this._rightMargin=e,this.invalidateMargin())}},{key:"yMargin",get:function(){return this._topMargin},set:function(e){this._topMargin===e&&this._bottomMargin===e||(this._topMargin=e,this._bottomMargin=e,this.invalidateMargin())}},{key:"margin",get:function(){return this._leftMargin},set:function(e){this._leftMargin===e&&this._rightMargin===e&&this._topMargin===e&&this._bottomMargin===e||(this._leftMargin=e,this._rightMargin=e,this._topMargin=e,this._bottomMargin=e,this.invalidateMargin())}},{key:"roundMargins",get:function(){return this._roundMargins},set:function(e){this._roundMargins!==e&&(this._roundMargins=e,this.invalidateRoundMargins())}},{key:"border",get:function(){return this._borderOverrideProperty.paint},set:function(e){this._borderOverrideProperty.paint!==e&&(this._borderOverrideProperty.paint=e)}},{key:"extension",get:function(){return this._extension},set:function(e){this._extension!==e&&(this._extension=e,this.invalidateGradients())}}]),n}(iu);Aw.prototype._mutatorKeys=[].concat(["roundMargins","border","extension","margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin"],_toConsumableArray(iu.prototype._mutatorKeys)),Iy.register("GradientRectangle",Aw);var bw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s){var o;_classCallCheck(this,n);var l=S()({stroke:"gray"},s);return o=t.call(this,null,l),e.link((function(e){for(var t=new Ni,n=-a*i+r.x,s=a*i+r.x,l=-a*i+r.y,u=a*i+r.y,c=-a;c<=a;c++){var h=c*i+r.x,d=c*i+r.y;t.moveTo(n,d).lineTo(s,d),t.moveTo(h,l).lineTo(h,u)}o.shape=e.modelToViewShape(t)})),o}return _createClass(n)}(Hl);Iy.register("GridNode",bw);var Sw=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){_classCallCheck(this,n);var a=S()({cursor:"pointer",baseColor:"white",stroke:"black",lineWidth:1,cornerRadius:4,xMargin:7,yMargin:5,touchAreaXDilation:7,touchAreaYDilation:7,arrowHeight:20,arrowWidth:20*Math.sqrt(3)/2,arrowFill:"black",arrowStroke:null,arrowLineWidth:1,numberOfArrows:1,arrowSpacing:-10,fireOnHold:!0,fireOnHoldDelay:400,fireOnHoldInterval:100,startCallback:_.noop,endCallback:_.noop},r);a.listener=i;for(var s=new Ni,o=0;o<a.numberOfArrows;o++){var l=o*(a.arrowHeight+a.arrowSpacing);if("up"===e)s.moveTo(a.arrowHeight/2,l).lineTo(a.arrowHeight,a.arrowWidth+l).lineTo(0,a.arrowWidth+l).close();else if("down"===e)s.moveTo(0,l).lineTo(a.arrowHeight,l).lineTo(a.arrowHeight/2,a.arrowWidth+l).close();else if("left"===e)s.moveTo(l,a.arrowHeight/2).lineTo(a.arrowWidth+l,0).lineTo(a.arrowWidth+l,a.arrowHeight).close();else{if("right"!==e)throw new Error("unsupported direction: ".concat(e));s.moveTo(l,0).lineTo(a.arrowWidth+l,a.arrowHeight/2).lineTo(l,a.arrowHeight).close()}}return a.content=new Hl(s,{fill:a.arrowFill,stroke:a.arrowStroke,lineWidth:a.arrowLineWidth,pickable:!1}),t.call(this,a)}return _createClass(n)}(FS);nA.register("ArrowButton",Sw);var Ew={},kw=function(e,t,n){var i=Ew,r=Ew;return e.hasOwnProperty(t)&&(i=e[t]),e.hasOwnProperty(n)&&(r=e[n]),i!==Ew?e[n]=i:delete e[n],r!==Ew?e[t]=r:delete e[t],e};y.register("swapObjectKeys",kw);var Vw=kw,ww="data:audio/mpeg;base64,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qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDE1gPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqv/7EMTWA8AAAaQAAAAgAAA0gAAABKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//sQxNYDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xDE1gPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",_w=XA(JA,ww),Cw=BA.createLock(ww),xw=new QA,Pw=!1,Tw=function(){Pw||(Cw(),Pw=!0)},Mw=JA.decodeAudioData(_w.buffer,(function(e){null===xw.audioBufferProperty.value&&(xw.audioBufferProperty.set(e),Tw())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),xw.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),Tw()}));Mw&&Mw.then((function(e){null===xw.audioBufferProperty.value&&(xw.audioBufferProperty.set(e),Tw())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),Tw()}));var Lw=xw,Iw="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAAEAAAE/QCbm5ubm5ubm5ubm5ubm5ubm5ubm5ubm5vBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHB4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4P////////////////////////////////8AAAAUTEFNRTMuMTAwBJgAAAAAAAAAABUgJAXmQQABpAAABP2CPnqIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//ugxAAAAZABXJQAACjSBy/7MvJBlbA24AeHxx+Z+DJ48Acl/O7e/c+wAAAAAAAEggodS1KhDIMHY9Flj8OAaLhIDnqje9htgSxoj0q3Fksjnr007hUgBFiJkAAAAJRul9HpGarkErUNUSqvEO5RRnr0CYblhVBIAACITTDJN3xrY6pMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpcJoKAAAAAArSgBAzM3OFUFV0GH4AAagOAQ5P8ZoVVMQU1FMy4xMDBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sgxNoAw8QpV9zxgCg6A+w4kAkEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7EMTlgMI4H1/EgQggMYHqUBQYBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sQxNYDwAAB/gAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",Rw=XA(JA,Iw),Dw=BA.createLock(Iw),Nw=new QA,qw=!1,Ow=function(){qw||(Dw(),qw=!0)},Bw=JA.decodeAudioData(Rw.buffer,(function(e){null===Nw.audioBufferProperty.value&&(Nw.audioBufferProperty.set(e),Ow())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),Nw.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),Ow()}));Bw&&Bw.then((function(e){null===Nw.audioBufferProperty.value&&(Nw.audioBufferProperty.set(e),Ow())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),Ow()}));var Gw=Nw,Hw=new tS(Lw,{soundClipOptions:{initialOutputLevel:.2},soundManagerOptions:{categoryName:"user-interface"}});KA.register("generalBoundaryBoopSoundPlayer",Hw);var Fw=Hw,Yw=new tS(Gw,{soundClipOptions:{initialOutputLevel:.2},soundManagerOptions:{categoryName:"user-interface"}});KA.register("generalSoftClickSoundPlayer",Yw);var zw=Yw,Uw=new tS(Lw,{soundClipOptions:{initialOutputLevel:.2,initialPlaybackRate:1/Math.pow(2,1/6)},soundManagerOptions:{categoryName:"user-interface"}}),Ww=new tS(Gw,{soundClipOptions:{initialOutputLevel:.2,initialPlaybackRate:1/Math.pow(2,1/6)},soundManagerOptions:{categoryName:"user-interface"}}),jw=function(e){return En.roundToInterval(e,1e-9)},Xw=function(e){return 1},Qw=function(){function e(t,n){_classCallCheck(this,e);var i=S()({middleMovingUpSoundPlayer:zw,middleMovingDownSoundPlayer:Ww,middleMovingUpPlaybackRateMapper:Xw,middleMovingDownPlaybackRateMapper:Xw,numberOfMiddleThresholds:null,interThresholdDelta:null,constrainValue:jw,minSoundPlayer:Uw,maxSoundPlayer:Fw,minimumInterMiddleSoundTime:.035},n);null===i.numberOfMiddleThresholds&&null===i.interThresholdDelta&&(i.numberOfMiddleThresholds=5),null!==i.numberOfMiddleThresholds?this.interThresholdDistance=t.getLength()/(i.numberOfMiddleThresholds+1):null!==i.interThresholdDelta?this.interThresholdDistance=i.interThresholdDelta:this.interThresholdDistance=t.getLength()/2,this.valueRange=t,this.middleMovingUpSoundPlayer=i.middleMovingUpSoundPlayer,this.middleMovingDownSoundPlayer=i.middleMovingDownSoundPlayer,this.middleMovingUpPlaybackRateMapper=i.middleMovingUpPlaybackRateMapper,this.middleMovingDownPlaybackRateMapper=i.middleMovingDownPlaybackRateMapper,this.minSoundPlayer=i.minSoundPlayer,this.maxSoundPlayer=i.maxSoundPlayer,this.minimumInterMiddleSoundTime=i.minimumInterMiddleSoundTime,this.timeOfMostRecentMiddleSound=0,this.constrainValue=i.constrainValue}return _createClass(e,[{key:"playSoundIfThresholdReached",value:function(e,t){if(e!==t){var n=this.constrainValue(e),i=this.constrainValue(t),r=this.mapValueToQuantizedRange(n),a=this.mapValueToQuantizedRange(i);(r.min!==a.min||n===r.min&&i!==a.min||n===r.max&&i!==a.max)&&this.playSoundForValueChange(e,t)}}},{key:"playSoundForValueChange",value:function(e,t){var n=this.constrainValue(e),i=this.constrainValue(t);if(n!==i||t!==e&&(e===this.valueRange.min||e===this.valueRange.max))if(e===this.valueRange.min)this.minSoundPlayer.play();else if(e===this.valueRange.max)this.maxSoundPlayer.play();else{var r,a,s=JA.currentTime;if(s-this.timeOfMostRecentMiddleSound>this.minimumInterMiddleSoundTime)n>i?(r=this.middleMovingUpPlaybackRateMapper,a=this.middleMovingUpSoundPlayer):(r=this.middleMovingUpPlaybackRateMapper,a=this.middleMovingDownSoundPlayer),r!==Xw&&a.setPlaybackRate(r(e)),a.play(),this.timeOfMostRecentMiddleSound=s}}},{key:"mapValueToQuantizedRange",value:function(e){var t=(e-this.valueRange.min)/this.valueRange.getLength(),n=Math.ceil(this.valueRange.getLength()/this.interThresholdDistance),i=Math.min(Math.floor(t*n),n-1);return new Tt(this.valueRange.min+i*this.interThresholdDistance,Math.min(this.valueRange.min+(i+1)*this.interThresholdDistance,this.valueRange.max))}}]),e}();_defineProperty(Qw,"NO_SOUND",new Qw(new Tt(0,1),{middleMovingUpSoundPlayer:Bk,minSoundPlayer:Bk,maxSoundPlayer:Bk})),KA.register("ValueChangeSoundPlayer",Qw);var Kw=Qw,Jw=function(e){return"".concat(e)},Zw={withNameResponse:!1,withObjectResponse:!0,onlyOnValueChange:!0},$w=function(e,t){return function(e){_inherits(i,e);var n=_createSuper(i);function i(){var e;_classCallCheck(this,i);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=a[t],l=o.enabledRangeProperty;var u={startInput:_.noop,endInput:_.noop,onInput:_.noop,constrainValue:_.identity,keyboardStep:(l.get().max-l.get().min)/20,shiftKeyboardStep:(l.get().max-l.get().min)/100,pageKeyboardStep:(l.get().max-l.get().min)/10,ariaOrientation:In.HORIZONTAL,panTargetNode:null,roundToStepSize:!1,a11yMapPDOMValue:_.identity,a11yMapValue:_.identity,a11yRepeatEqualValueText:!0,a11yCreateAriaValueText:Jw,a11yCreateContextResponseAlert:null,contextResponsePerValueChangeDelay:700,contextResponseMaxDelay:1500,a11yDependencies:[],voicingOnEndResponseOptions:Zw,tagName:"input",inputType:null},c=S()(u,o);c.inputType="range",a[t]=c;var h=_assertThisInitialized(e=n.call.apply(n,[this].concat(a)));Vl(_assertThisInitialized(e),["inputValue","setPDOMAttribute"]),e._valueProperty=c.valueProperty,e._enabledRangeProperty=l,e._startInput=c.startInput,e._onInput=c.onInput,e._endInput=c.endInput,e._constrainValue=c.constrainValue,e._a11yMapValue=c.a11yMapValue,e._panTargetNode=c.panTargetNode,e._keyboardStep=u.keyboardStep,e.setKeyboardStep(c.keyboardStep),e._shiftKeyboardStep=u.shiftKeyboardStep,e.setShiftKeyboardStep(c.shiftKeyboardStep),e._pageKeyboardStep=u.pageKeyboardStep,e.setPageKeyboardStep(c.pageKeyboardStep),e._shiftKey=!1,e._ariaOrientation=u.ariaOrientation,e.ariaOrientation=c.ariaOrientation,e._oldValue=null,e._valueOnStart=e._valueProperty.value,e._a11yCreateContextResponseAlert=c.a11yCreateContextResponseAlert,e._timesValueTextChangedBeforeAlerting=0,e._contextResponseUtterance=new gc,e._contextResponsePerValueChangeDelay=c.contextResponsePerValueChangeDelay,e._contextResponseMaxDelay=c.contextResponseMaxDelay,e._a11yInputHandled=!1,e._blockInput=!1,e._rangeKeysDown={},e._roundToStepSize=c.roundToStepSize,e._a11yMapPDOMValue=c.a11yMapPDOMValue,e._a11yCreateAriaValueText=c.a11yCreateAriaValueText,e._dependenciesMultilink=null,e._a11yRepeatEqualValueText=c.a11yRepeatEqualValueText,e._timesChangedBeforeAlerting=0,e._voicingOnEndResponseOptions=c.voicingOnEndResponseOptions,e.setA11yDependencies(c.a11yDependencies);var d=function(t){var n=e._getMappedValue(t.min),i=e._getMappedValue(t.max);h.setPDOMAttribute("min",n),h.setPDOMAttribute("max",i),e._updateSiblingStepAttribute()};e._enabledRangeProperty.link(d);var p=function(){var t=e._getMappedValue();h.setPDOMAttribute("aria-valuenow",t),h.inputValue=t};return e._valueProperty.link(p),e._disposeAccessibleValueHandler=function(){e._enabledRangeProperty.unlink(d),e._valueProperty.unlink(p),e._dependenciesMultilink&&e._dependenciesMultilink.dispose()},e}return _createClass(i,[{key:"setA11yDependencies",value:function(e){var t=this;this._dependenciesMultilink&&this._dependenciesMultilink.dispose(),this._dependenciesMultilink=nn.multilinkAny(e.concat([this._valueProperty]),(function(){t._updateAriaValueText(t._oldValue),t._oldValue=t._valueProperty.value}))}},{key:"_updateAriaValueText",value:function(e){var t=this._getMappedValue(),n=this._a11yCreateAriaValueText(t,this._valueProperty.value,e);this._a11yRepeatEqualValueText&&this.ariaValueText&&n===this.ariaValueText.replace(new RegExp(" ","g"),"")&&(n=this.ariaValueText+" "),this.ariaValueText=n}},{key:"alertContextResponse",value:function(){var e=this,t=!1;if(this._a11yCreateContextResponseAlert){var n=this._getMappedValue(),i=this._a11yCreateContextResponseAlert(n,this._valueProperty.value,this._valueOnStart);i&&(this._contextResponseUtterance.alert=i,this.forEachUtteranceQueue((function(n){t||(n.hasUtterance(e._contextResponseUtterance)?(t=!0,e._timesChangedBeforeAlerting++):e._timesChangedBeforeAlerting=1),e._contextResponseUtterance.alertStableDelay=Math.min(e._contextResponseMaxDelay,e._timesChangedBeforeAlerting*e._contextResponsePerValueChangeDelay),n.addToBack(e._contextResponseUtterance)})))}}},{key:"reset",value:function(){this._a11yCreateAriaValueText.reset&&this._a11yCreateAriaValueText.reset(),this._a11yCreateContextResponseAlert&&this._a11yCreateContextResponseAlert.reset&&this._a11yCreateContextResponseAlert.reset(),this._timesChangedBeforeAlerting=0,this._updateAriaValueText(null)}},{key:"_getMappedValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._valueProperty.value,t=this._a11yMapPDOMValue(e);return t}},{key:"getAccessibleValueHandlerInputListener",value:function(){return{keydown:this.handleKeyDown.bind(this),keyup:this.handleKeyUp.bind(this),input:this.handleInput.bind(this),change:this.handleChange.bind(this),blur:this.handleBlur.bind(this)}}},{key:"handleKeyDown",value:function(e){var t=e.domEvent,n=xa.getEventCode(t);if(n&&(this._shiftKey=t.shiftKey,xa.isKeyEvent(t,xa.KEY_TAB)&&(this._blockInput=!0),this.enabledProperty.get()&&xa.isRangeKey(t)&&(t.preventDefault(),!t.metaKey))){e.pointer.reserveForKeyboardDrag();var i=!0;this._anyKeysDown()||this._onInteractionStart(e),this._rangeKeysDown[n]=!0;var r,a=this._valueProperty.get();if(xa.isAnyKeyEvent(t,[xa.KEY_END,xa.KEY_HOME]))n===xa.KEY_END?a=this._enabledRangeProperty.get().max:n===xa.KEY_HOME&&(a=this._enabledRangeProperty.get().min);else n===xa.KEY_PAGE_UP||n===xa.KEY_PAGE_DOWN?(r=this.pageKeyboardStep,n===xa.KEY_PAGE_UP?a=this._valueProperty.get()+r:n===xa.KEY_PAGE_DOWN&&(a=this._valueProperty.get()-r)):xa.isArrowKey(t)&&(r=t.shiftKey?this.shiftKeyboardStep:this.keyboardStep,i=!t.shiftKey,n===xa.KEY_RIGHT_ARROW||n===xa.KEY_UP_ARROW?a=this._valueProperty.get()+r:n!==xa.KEY_LEFT_ARROW&&n!==xa.KEY_DOWN_ARROW||(a=this._valueProperty.get()-r),this._roundToStepSize&&(a=e_(a,this._valueProperty.get(),r)));var s=this._a11yMapValue(a,this._valueProperty.get()),o=s;i&&(o=this._constrainValue(s)),this._valueProperty.set(En.clamp(o,this._enabledRangeProperty.get().min,this._enabledRangeProperty.get().max)),this._onInput(e)}}},{key:"handleKeyUp",value:function(e){var t=xa.getEventCode(e.domEvent);this._allKeysUp()||(xa.SHIFT_KEYS.includes(t)&&(this._shiftKey=!1),this.enabledProperty.get()&&xa.isRangeKey(e.domEvent)&&(this._rangeKeysDown[t]=!1,this._allKeysUp()&&this._onInteractionEnd(e)))}},{key:"handleChange",value:function(e){this._a11yInputHandled||this.handleInput(e),this._a11yInputHandled=!1}},{key:"handleInput",value:function(e){if(this.enabledProperty.get()&&!this._blockInput){this._a11yInputHandled=!0;var t=this._valueProperty.get(),n=parseFloat(e.domEvent.target.value),i=this._shiftKey?this.shiftKeyboardStep:this.keyboardStep,r=this._getMappedValue();this._onInteractionStart(e),n>r?t=this._valueProperty.get()+i:n<r&&(t=this._valueProperty.get()-i),this._roundToStepSize&&(t=e_(t,this._valueProperty.get(),i)),t=En.clamp(t,this._enabledRangeProperty.get().min,this._enabledRangeProperty.get().max),this._valueProperty.set(this._constrainValue(this._a11yMapValue(t,this._valueProperty.get()))),this._onInput(e),this._onInteractionEnd(e)}this._blockInput=!1}},{key:"handleBlur",value:function(e){this._anyKeysDown()&&this._onInteractionEnd(e),this._shiftKey=!1,this._blockInput=!1,this._rangeKeysDown={}}},{key:"_onInteractionStart",value:function(e){this._valueOnStart=this._valueProperty.value,this._startInput(e)}},{key:"_onInteractionEnd",value:function(e){this.alertContextResponse(),this.voicingOnEndResponse(this._valueOnStart),this._endInput(e)}},{key:"setKeyboardStep",value:function(e){this._keyboardStep=e}},{key:"keyboardStep",get:function(){return this.getKeyboardStep()},set:function(e){this.setKeyboardStep(e)}},{key:"getKeyboardStep",value:function(){return this._keyboardStep}},{key:"setShiftKeyboardStep",value:function(e){this._shiftKeyboardStep=e}},{key:"shiftKeyboardStep",get:function(){return this.getShiftKeyboardStep()},set:function(e){this.setShiftKeyboardStep(e)}},{key:"getShiftKeyboardStep",value:function(){return this._shiftKeyboardStep}},{key:"getShiftKeyDown",value:function(){return this._shiftKey}},{key:"shiftKeyDown",get:function(){return this.getShiftKeyDown()}},{key:"setPageKeyboardStep",value:function(e){this._pageKeyboardStep=e}},{key:"pageKeyboardStep",get:function(){return this.getPageKeyboardStep()},set:function(e){this.setPageKeyboardStep(e)}},{key:"getPageKeyboardStep",value:function(){return this._pageKeyboardStep}},{key:"setAriaOrientation",value:function(e){this._ariaOrientation=e,this.setPDOMAttribute("aria-orientation",e.ariaOrientation)}},{key:"ariaOrientation",get:function(){return this._ariaOrientation},set:function(e){this.setAriaOrientation(e)}},{key:"getAriaOrientation",value:function(){return this._ariaOrientation}},{key:"_allKeysUp",value:function(){return _.every(this._rangeKeysDown,(function(e){return!e}))}},{key:"_anyKeysDown",value:function(){return!!_.find(this._rangeKeysDown,(function(e){return e}))}},{key:"_updateSiblingStepAttribute",value:function(){var e=Math.min(Math.min(this.keyboardStep,this.shiftKeyboardStep),this.pageKeyboardStep),t=Math.pow(10,-En.numberOfDecimalPlaces(e)),n=this._getMappedValue(this._enabledRangeProperty.get().min),i=this._getMappedValue(this._enabledRangeProperty.get().max);t/(i-n)<1e-5&&(t=i/100),this.setPDOMAttribute("step",t)}},{key:"voicingOnEndResponse",value:function(e,t){var n=k({},this._voicingOnEndResponseOptions,t),i=e!==this._valueProperty.value,r=this._valueProperty.value===this._enabledRangeProperty.value.min||this._valueProperty.value===this._enabledRangeProperty.value.max;(!n.onlyOnValueChange||r||i)&&this.voicingSpeakFullResponse({nameResponse:n.withNameResponse?this.voicingNameResponse:null,objectResponse:n.withObjectResponse?this.voicingObjectResponse:null,hintResponse:null})}},{key:"dispose",value:function(){this._disposeAccessibleValueHandler(),_get(_getPrototypeOf(i.prototype),"dispose",this).call(this)}}]),i}(Hc(e))};nA.register("AccessibleValueHandler",$w);var e_=function(e,t,n){var i=e;return 0!==n&&(i=En.roundSymmetric(i/n)*n,i=t_(i,t,n)),i},t_=function(e,t,n){var i=e,r=Math.abs(e-t),a=r>n,s=En.equalsEpsilon(r,n,1e-14);return a&&!s&&(i+=e>t?-1*n:n),i};$w.DEFAULT_TAG_NAME="input";var n_=$w,i_=function(e,t){return function(e){_inherits(i,e);var n=_createSuper(i);function i(){var e;_classCallCheck(this,i);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=a[t],l=S()({startDrag:_.noop,endDrag:_.noop,drag:_.noop},o);l.startInput=l.startDrag,l.endInput=l.endDrag,l.onInput=l.drag,a[t]=l,e=n.call.apply(n,[this].concat(a)),Vl(_assertThisInitialized(e),["addInputListener","removeInputListener"]);var u=e.getAccessibleValueHandlerInputListener();return e.addInputListener(u),e._disposeAccessibleSlider=function(){e.removeInputListener(u)},e}return _createClass(i,[{key:"dispose",value:function(){this._disposeAccessibleSlider(),_get(_getPrototypeOf(i.prototype),"dispose",this).call(this)}}]),i}(n_(e,t))};nA.register("AccessibleSlider",i_);var r_=i_,a_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n),(s=t.call(this)).rangeProperty=r instanceof Tt?new st(r):r;var o=S()({size:new ms(100,5),startDrag:_.noop,drag:_.noop,endDrag:_.noop,constrainValue:_.identity,enabledRangeProperty:s.rangeProperty,soundGenerator:h_.DEFAULT_SOUND,valueChangeSoundGeneratorOptions:{},voicingOnEndResponse:_.noop,leftVisualOverflow:0,rightVisualOverflow:0,tandem:xe.REQUIRED,tandemNameSuffix:"TrackNode"},a);o.soundGenerator===h_.DEFAULT_SOUND?o.soundGenerator=new Kw(s.rangeProperty.value,o.valueChangeSoundGeneratorOptions||{}):null===o.soundGenerator&&(o.soundGenerator=Kw.NO_SOUND),s.leftVisualOverflow=o.leftVisualOverflow,s.rightVisualOverflow=o.rightVisualOverflow,s.minimumSize=o.size,s.minimumWidth=s.minimumSize.width,s.internalWidthProperty=new Ut([s.localPreferredWidthProperty],(function(e){return(null===e?s.minimumSize.width:Math.max(s.minimumSize.width,e))-o.leftVisualOverflow-o.rightVisualOverflow})),s.sizeProperty=new Ut([s.internalWidthProperty],(function(e){return new ms(e,s.minimumSize.height)})),s.valueToPositionProperty=new Ut([s.rangeProperty,s.internalWidthProperty],(function(e,t){return new Gv(e.min,e.max,0,t,!0)}));var l=function(t,n){var i=e.value,r=n.subtrailTo(_assertThisInitialized(s)).getTransform().inversePosition2(t.pointer.point).x,a=s.valueToPositionProperty.value.inverse(r),l=o.enabledRangeProperty.value.constrainValue(a),u=o.constrainValue(l);e.set(u),"down"===t.type&&o.soundGenerator.playSoundIfThresholdReached(u,i)};s.addChild(i);var u=e.value;return s.dragListener=new Sd({tandem:o.tandem.createTandem("dragListener"),start:function(t,n){o.startDrag(t),u=e.value,l(t,n.pressedTrail)},drag:function(e,t){o.drag(e),l(e,t.pressedTrail)},end:function(e){o.endDrag(e),o.voicingOnEndResponse(u)}}),i.addInputListener(s.dragListener),s.mutate(o),s.disposeSliderTrack=function(){s.dragListener.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeSliderTrack(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(ul(jo));nA.register("SliderTrack",a_);var s_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({fillEnabled:"white",fillDisabled:"gray",stroke:"black",lineWidth:1,cornerRadius:0},r),o=new iu({fill:s.fillDisabled,stroke:s.stroke,lineWidth:s.lineWidth,cornerRadius:s.cornerRadius,cursor:"default",pickable:!1}),l=new iu({fill:s.fillEnabled,stroke:s.stroke,lineWidth:s.lineWidth,cornerRadius:s.cornerRadius}),u=new jo({children:[o,l]});a=t.call(this,e,u,i,k({leftVisualOverflow:null!==s.stroke?s.lineWidth/2:0,rightVisualOverflow:null!==s.stroke?s.lineWidth/2:0},s));var c=nn.multilink([s.enabledRangeProperty,a.valueToPositionProperty,a.sizeProperty],(function(e,t,n){var i=t.evaluate(e.min),r=t.evaluate(e.max);o.setRect(0,0,n.width,n.height),l.setRect(i,0,r-i,n.height)}));return a.disposeDefaultSliderTrack=function(){c.dispose()},a}return _createClass(n,[{key:"dispose",value:function(){this.disposeDefaultSliderTrack(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(a_);nA.register("DefaultSliderTrack",s_);var o_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({size:new ms(22,45),fillHighlighted:"rgb( 71, 207, 255 )",centerLineStroke:"white",fill:"rgb( 50, 145, 184 )",stroke:"black",lineWidth:1,tandem:xe.REQUIRED,tandemNameSuffix:"ThumbNode"},e);void 0===r.cornerRadius&&(r.cornerRadius=.25*r.size.width),r.cachedPaints=[r.fill,r.fillHighlighted],i=t.call(this,0,0,r.size.width,r.size.height,r);var a=iu.bounds(i.bounds.dilated(5),{fill:"transparent",localBounds:i.bounds,pickable:!1});i.addChild(a);i.addChild(new Hl(Ni.lineSegment(r.size.width/2,3,r.size.width/2,r.size.height-3),{stroke:r.centerLineStroke}));var s=new vd({attach:!1,tandem:xe.OPT_OUT});return s.isHighlightedProperty.link((function(e){i.fill=e?r.fillHighlighted:r.fill})),i.addInputListener(s),i}return _createClass(n)}(iu);nA.register("SliderThumb",o_);var l_=-Math.PI/2,u_=new ms(100,5),c_=new ms(17,34),h_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({orientation:In.HORIZONTAL,trackNode:null,trackSize:null,trackFillEnabled:"white",trackFillDisabled:"gray",trackStroke:"black",trackLineWidth:1,trackCornerRadius:0,trackPickable:!0,trackBoundsDilation:!0,thumbNode:null,thumbSize:null,thumbFill:"rgb(50,145,184)",thumbFillHighlighted:"rgb(71,207,255)",thumbStroke:"black",thumbLineWidth:1,thumbCenterLineStroke:"white",thumbTouchAreaXDilation:11,thumbTouchAreaYDilation:11,thumbMouseAreaXDilation:0,thumbMouseAreaYDilation:0,thumbYOffset:0,tickLabelSpacing:6,majorTickLength:25,majorTickStroke:"black",majorTickLineWidth:1,minorTickLength:10,minorTickStroke:"black",minorTickLineWidth:1,cursor:"pointer",startDrag:_.noop,drag:_.noop,endDrag:_.noop,constrainValue:_.identity,disabledOpacity:Pr.DISABLED_OPACITY,soundGenerator:n.DEFAULT_SOUND,valueChangeSoundGeneratorOptions:{},phetioLinkedProperty:null,tandem:xe.REQUIRED,tandemNameSuffix:"Slider",phetioType:n.SliderIO,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},r),o=i instanceof Tt?new st(i):i;if(s.ariaOrientation=s.orientation,s.soundGenerator===n.DEFAULT_SOUND?s.soundGenerator=new Kw(o.value,s.valueChangeSoundGeneratorOptions||{}):null===s.soundGenerator&&(s.soundGenerator=Kw.NO_SOUND),s.soundGenerator!==Kw.NO_SOUND){var l=e.value,u=s.drag;s.drag=function(t){t.isFromPDOM()?s.soundGenerator.playSoundForValueChange(e.value,l):s.soundGenerator.playSoundIfThresholdReached(e.value,l),u(t),l=e.value}}var c=_.pick(s,jo.REQUIRES_BOUNDS_OPTION_KEYS),h=_.omit(s,jo.REQUIRES_BOUNDS_OPTION_KEYS);h.orientation===In.VERTICAL&&(h.trackSize&&(h.trackSize=h.trackSize.swapped()),h.thumbSize&&(h.thumbSize=h.thumbSize.swapped()),Vw(h,"thumbTouchAreaXDilation","thumbTouchAreaYDilation"),Vw(h,"thumbMouseAreaXDilation","thumbMouseAreaYDilation")),h.trackSize=h.trackSize||u_,h.thumbSize=h.thumbSize||c_;var d=s.tandem.createTandem(n.THUMB_NODE_TANDEM_NAME);xe.VALIDATION&&h.thumbNode;var p=h.thumbNode||new o_({size:h.thumbSize,fill:h.thumbFill,fillHighlighted:h.thumbFillHighlighted,stroke:h.thumbStroke,lineWidth:h.thumbLineWidth,centerLineStroke:h.thumbCenterLineStroke,tandem:d}),f=!h.enabledRangeProperty;h.enabledRangeProperty=h.enabledRangeProperty||(i instanceof Tt?new dt(i,{valueType:Tt,isValidValue:function(e){return e.min>=i.min&&e.max<=i.max},tandem:s.tandem.createTandem("enabledRangeProperty"),phetioValueType:Tt.RangeIO,phetioDocumentation:"Sliders support two ranges: the outer range which specifies the min and max of the track and the enabledRangeProperty, which determines how low and high the thumb can be dragged within the track."}):i),h.panTargetNode=p,h.valueProperty=e,_defineProperty(_assertThisInitialized(a=t.call(this,h)),"ticks",[]),_defineProperty(_assertThisInitialized(a),"proposedValue",null),a.orientation=h.orientation,a.enabledRangeProperty=h.enabledRangeProperty,a.tickOptions=_.pick(s,"tickLabelSpacing","majorTickLength","majorTickStroke","majorTickLineWidth","minorTickLength","minorTickStroke","minorTickLineWidth");var m=[];a.majorTicksParent=new jo,a.minorTicksParent=new jo,m.push(a.majorTicksParent),m.push(a.minorTicksParent);var g=s.tandem.createTandem(n.TRACK_NODE_TANDEM_NAME);xe.VALIDATION&&s.trackNode;var y=new jo;m.push(y),a.track=s.trackNode||new s_(e,i,{size:h.trackSize,fillEnabled:h.trackFillEnabled,fillDisabled:h.trackFillDisabled,stroke:h.trackStroke,lineWidth:h.trackLineWidth,cornerRadius:h.trackCornerRadius,startDrag:h.startDrag,drag:h.drag,endDrag:h.endDrag,constrainValue:h.constrainValue,enabledRangeProperty:a.enabledRangeProperty,soundGenerator:s.soundGenerator,pickable:h.trackPickable,voicingOnEndResponse:a.voicingOnEndResponse.bind(_assertThisInitialized(a)),tandem:g}),m.push(a.track),p.setCenterY(a.track.centerY+s.thumbYOffset),m.push(p);var v=new jo({children:m});s.orientation===In.VERTICAL&&(v.rotation=l_),a.addChild(v),s.thumbNode||!s.thumbTouchAreaXDilation&&!s.thumbTouchAreaYDilation||(p.touchArea=p.localBounds.dilatedXY(s.thumbTouchAreaXDilation,s.thumbTouchAreaYDilation)),s.thumbNode||!s.thumbMouseAreaXDilation&&!s.thumbMouseAreaYDilation||(p.mouseArea=p.localBounds.dilatedXY(s.thumbMouseAreaXDilation,s.thumbMouseAreaYDilation));var A=0,b=e.value,E=new Sd({tandem:p.tandem.createTandem("dragListener"),start:function(t,n){if(a.enabledProperty.get()){b=e.value,s.startDrag(t);var i=n.pressedTrail.subtrailTo(v).getTransform();A=i.inversePosition2(t.pointer.point).x-p.centerX}},drag:function(t,n){if(a.enabledProperty.get()){var i=n.pressedTrail.subtrailTo(v).getTransform().inversePosition2(t.pointer.point).x-A;a.proposedValue=a.track.valueToPositionProperty.value.inverse(i);var r=a.enabledRangeProperty.get().constrainValue(a.proposedValue);e.set(s.constrainValue(r)),s.drag(t)}},end:function(e){a.enabledProperty.get()&&(s.endDrag(e),a.voicingOnEndResponse(b)),a.proposedValue=null}});p.addInputListener(E),a.thumbDragListener=E,a.trackDragListener=a.track.dragListener;var k=nn.multilink([e,a.track.valueToPositionProperty],(function(e,t){p.centerX=t.evaluate(e)}));a.enabledRangeProperty.link((function(t){if(!e.isPhetioInstrumented()||!phet.joist.sim.isSettingPhetioStateProperty.value)if(null===a.proposedValue)e.set(En.clamp(e.value,t.min,t.max));else{var n=En.clamp(a.proposedValue,t.min,t.max),i=s.constrainValue(n);e.set(i)}}));var V=new p_(_assertThisInitialized(a),a.track,p,v,s.orientation,y,a.ticks);a.disposeSlider=function(){V.dispose(),p.dispose&&p.dispose(),a.track.dispose&&a.track.dispose(),k.dispose(),f&&a.enabledRangeProperty.dispose(),E.dispose()},a.focusHighlight=new nh(p);var w=s.phetioLinkedProperty||(e instanceof ht?e:null);return w&&a.addLinkedElement(w,{tandem:s.tandem.createTandem("valueProperty")}),!f&&a.enabledRangeProperty instanceof ht&&a.addLinkedElement(a.enabledRangeProperty,{tandem:s.tandem.createTandem("enabledRangeProperty")}),a.mutate(c),a}return _createClass(n,[{key:"majorTicksVisible",get:function(){return this.getMajorTicksVisible()},set:function(e){this.setMajorTicksVisible(e)}},{key:"minorTicksVisible",get:function(){return this.getMinorTicksVisible()},set:function(e){this.setMinorTicksVisible(e)}},{key:"dispose",value:function(){this.disposeSlider(),this.ticks.forEach((function(e){e.dispose()})),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"addMajorTick",value:function(e,t){this.addTick(this.majorTicksParent,e,t,this.tickOptions.majorTickLength,this.tickOptions.majorTickStroke,this.tickOptions.majorTickLineWidth)}},{key:"addMinorTick",value:function(e,t){this.addTick(this.minorTicksParent,e,t,this.tickOptions.minorTickLength,this.tickOptions.minorTickStroke,this.tickOptions.minorTickLineWidth)}},{key:"addTick",value:function(e,t,n,i,r,a){this.ticks.push(new d_(e,t,n,i,r,a,this.tickOptions,this.orientation,this.track))}},{key:"setMajorTicksVisible",value:function(e){this.majorTicksParent.visible=e}},{key:"getMajorTicksVisible",value:function(){return this.majorTicksParent.visible}},{key:"setMinorTicksVisible",value:function(e){this.minorTicksParent.visible=e}},{key:"getMinorTicksVisible",value:function(){return this.minorTicksParent.visible}}]),n}(vl(r_(jo,0)));_defineProperty(h_,"DEFAULT_SOUND",new Kw(new Tt(0,1))),_defineProperty(h_,"THUMB_NODE_TANDEM_NAME","thumbNode"),_defineProperty(h_,"TRACK_NODE_TANDEM_NAME","trackNode");var d_=function(){function e(t,n,i,r,a,s,o,l,u){_classCallCheck(this,e),this.parent=t,this.value=n,this.label=i,this.labelXProperty=new Ut([u.valueToPositionProperty],(function(e){return e.evaluate(n)})),this.tickNode=new jo,t.addChild(this.tickNode);var c=new Hl((new Ni).moveTo(0,u.top).lineTo(0,u.top-r),{stroke:a,lineWidth:s});this.labelXProperty.link((function(e){c.x=e})),this.tickNode.addChild(c),i&&(l===In.VERTICAL&&(i.rotation=-l_),this.tickNode.addChild(i),this.manualConstraint=of.create(this.tickNode,[c,i],(function(e,t){t.centerX=e.centerX,t.bottom=e.top-o.tickLabelSpacing})),i.pickable=!1)}return _createClass(e,[{key:"dispose",value:function(){this.parent.removeChild(this.tickNode),this.labelXProperty.dispose(),this.manualConstraint&&this.manualConstraint.dispose()}}]),e}(),p_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o,l){var u;return _classCallCheck(this,n),(u=t.call(this,e)).slider=e,u.track=i,u.thumb=r,u.sliderPartsNode=a,u.orientation=s,u.trackSpacer=o,u.ticks=l,s===In.HORIZONTAL?(e.heightSizable=!1,u.preferredProperty=u.slider.localPreferredWidthProperty):(e.widthSizable=!1,u.preferredProperty=u.slider.localPreferredHeightProperty),u.preferredProperty.lazyLink(u._updateLayoutListener),u.track.rangeProperty.lazyLink(u._updateLayoutListener),u.thumb.localBoundsProperty.lazyLink(u._updateLayoutListener),u.addNode(i),u.layout(),u}return _createClass(n,[{key:"layout",value:function(){_get(_getPrototypeOf(n.prototype),"layout",this).call(this);var e=this.slider,t=this.track,i=this.thumb;this.trackSpacer.localBounds=t.localBounds.dilatedX(i.width/2);var r=t.leftVisualOverflow+t.rightVisualOverflow,a=t.minimumWidth,s=a-r,o=function(e){return En.linear(t.rangeProperty.value.min,t.rangeProperty.value.max,0,1,e)},l=-i.width/2-t.leftVisualOverflow,u=i.width/2-t.leftVisualOverflow,c=new Tt(l,a+u);if(this.ticks.forEach((function(e){var t=s*o(e.value),n=e.tickNode.width/2;c.includeRange(new Tt(-n,n).shifted(t))})),e.widthSizable&&null!==this.preferredProperty.value){var h=Mv.max.apply(Mv,[Mv.linear(1,u)].concat(_toConsumableArray(this.ticks.map((function(e){var t=o(e.value);return Mv.linear(t,e.tickNode.width/2-r*t)}))))).minus(Mv.min.apply(Mv,[Mv.constant(l)].concat(_toConsumableArray(this.ticks.map((function(e){var t=o(e.value);return Mv.linear(t,-e.tickNode.width/2-r*t)})))))),d=h.withXValues([a-1,a].concat(_toConsumableArray(h.points.map((function(e){return e.x})).filter((function(e){return e>a+1e-10}))))).inverted();t.preferredWidth=Math.max(a,d.evaluate(this.preferredProperty.value))}else t.preferredWidth=t.minimumWidth;var p=c.getLength();this.orientation===In.HORIZONTAL?e.localMinimumWidth=p:e.localMinimumHeight=p}},{key:"dispose",value:function(){this.preferredProperty.unlink(this._updateLayoutListener),this.track.rangeProperty.unlink(this._updateLayoutListener),this.thumb.localBoundsProperty.unlink(this._updateLayoutListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(wp);h_.SliderIO=new U("SliderIO",{valueType:h_,documentation:"A traditional slider component, with a knob and possibly tick marks",supertype:jo.NodeIO}),nA.register("Slider",h_);var f_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){return _classCallCheck(this,n),t.call(this,e,i,S()({orientation:In.HORIZONTAL},r))}return _createClass(n)}(h_);nA.register("HSlider",f_);var m_={VALUE_NAMED_PLACEHOLDER:"{{value}}",VALUE_NUMBERED_PLACEHOLDER:"{0}"};nA.register("SunConstants",m_);var g_=m_,y_={PLUS:"+",MINUS:"−",TIMES:"×",DIVIDE:"÷",DOT:"⋅",UNARY_PLUS:"+",UNARY_MINUS:"-",EQUAL_TO:"=",NOT_EQUAL_TO:"≠",GREATER_THAN:">",LESS_THAN:"<",LESS_THAN_OR_EQUAL:"≤",GREATER_THAN_OR_EQUAL:"≥",PERCENT:"%",INFINITY:"∞",PI:"π",PLUS_MINUS:"±",THETA:"θ",NO_VALUE:"—",DEGREES:"°"};Iy.register("MathSymbols",y_);var v_=y_,A_=new tA(20),b_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({align:"right",valuePattern:g_.VALUE_NAMED_PLACEHOLDER,decimalPlaces:0,numberFormatter:null,useRichText:!1,useFullHeight:!1,textOptions:{font:A_,fill:"black",maxWidth:null,phetioReadOnly:!0},xMargin:8,yMargin:2,cornerRadius:0,backgroundFill:"white",backgroundStroke:"lightGray",backgroundLineWidth:1,backgroundLineDash:[],minBackgroundWidth:0,noValueString:v_.NO_VALUE,noValueAlign:null,noValuePattern:null,tandem:xe.OPTIONAL,phetioType:n.NumberDisplayIO},r),o=new st(s.numberFormatter?s.numberFormatter:function(e){return null===s.decimalPlaces?"".concat(e):En.toFixed(e,s.decimalPlaces)});s.noValueAlign||(s.noValueAlign=s.align);var l=function(e){return e.includes(g_.VALUE_NUMBERED_PLACEHOLDER)?ic.format(e,g_.VALUE_NAMED_PLACEHOLDER):e},u="string"==typeof s.valuePattern?new st(l(s.valuePattern)):new Ut([s.valuePattern],l);s.noValuePattern||(s.noValuePattern=new Ut([u],(function(e){return e})));var c="string"==typeof s.noValuePattern?new st(s.noValuePattern):s.noValuePattern,h=new Ut([o],(function(e){return S_(i.min,s.noValueString,e)})),d=new Ut([o],(function(e){return S_(i.max,s.noValueString,e)})),p=new Ut([u,h,d],(function(e,t,n){return ic.fillIn(e,{value:t.length>n.length?t:n})})),f=s.useRichText?Pf:Xl,m=new Ut([e,c,u,o],(function(e,t,n,i){var r=null===e&&t?t:n,a=S_(e,s.noValueString,i);return ic.fillIn(r,{value:a})})),g=k({},s.textOptions,{maxWidth:null}),y=new f(m,k({tandem:s.tandem.createTandem("valueText")},g)),v=y.height,A=new iu({cornerRadius:s.cornerRadius,fill:s.backgroundFill,stroke:s.backgroundStroke,lineWidth:s.backgroundLineWidth,lineDash:s.backgroundLineDash});return p.link((function(e){var t=new f(e,_.omit(g,"tandem"));y.maxWidth=null!==s.textOptions.maxWidth?s.textOptions.maxWidth:0!==t.width?t.width:null,t.maxWidth=y.maxWidth,A.rectWidth=Math.max(s.minBackgroundWidth,t.width+2*s.xMargin),A.rectHeight=(s.useFullHeight?v:t.height)+2*s.yMargin})),s.children=[A,y],(a=t.call(this)).numberFormatterProperty=o,a.valueText=y,a.backgroundNode=A,of.create(_assertThisInitialized(a),[y,A],(function(t,n){var i=null===e.value?s.noValueAlign:s.align;"center"===i?t.centerX=n.centerX:"left"===i?t.left=n.left+s.xMargin:t.right=n.right-s.xMargin,t.centerY=n.centerY})),a.mutate(s),a.disposeNumberDisplay=function(){m.dispose(),u.dispose()},a}return _createClass(n,[{key:"setNumberFormatter",value:function(e){this.numberFormatterProperty.value=e}},{key:"recomputeText",value:function(){}},{key:"dispose",value:function(){this.disposeNumberDisplay(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"setNumberFont",value:function(e){this.valueText.font=e}},{key:"numberFont",set:function(e){this.setNumberFont(e)}},{key:"setNumberFill",value:function(e){this.valueText.fill=e}},{key:"numberFill",set:function(e){this.setNumberFill(e)}},{key:"setBackgroundFill",value:function(e){this.backgroundNode.fill=e}},{key:"backgroundFill",get:function(){return this.getBackgroundFill()},set:function(e){this.setBackgroundFill(e)}},{key:"getBackgroundFill",value:function(){return this.backgroundNode.fill}},{key:"setBackgroundStroke",value:function(e){this.backgroundNode.stroke=e}},{key:"backgroundStroke",set:function(e){this.setBackgroundStroke(e)}}]),n}(jo);Iy.register("NumberDisplay",b_);var S_=function(e,t,n){var i=t;return null!==e&&(i=n(e)),i};b_.NumberDisplayIO=new U("NumberDisplayIO",{valueType:b_,supertype:jo.NodeIO,documentation:"A numeric readout with a background"});var E_=["startDrag","endDrag","leftStart","leftEnd","rightStart","rightEnd"],k_=["touchAreaXDilation","touchAreaYDilation","mouseAreaXDilation","mouseAreaYDilation"],V_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n),function(e){!e.startCallback&&e.endCallback;e.arrowButtonOptions&&w_(e.arrowButtonOptions);e.sliderOptions&&w_(e.sliderOptions)}(a||{});var o=S()({numberDisplayOptions:{},sliderOptions:{},arrowButtonOptions:{},titleNodeOptions:{},startCallback:_.noop,endCallback:_.noop,delta:1,disabledOpacity:.5,layoutFunction:n.createLayoutFunction1(),includeArrowButtons:!0,tandem:xe.REQUIRED,tandemNameSuffix:"Control",phetioType:n.NumberControlIO,phetioEnabledPropertyInstrumented:!0,visiblePropertyOptions:{phetioFeatured:!0}},a);s=t.call(this);var l=o.arrowButtonOptions&&o.arrowButtonOptions.hasOwnProperty("scale"),u=function(){return h.enabledRangeProperty?h.enabledRangeProperty.value:r},c=function(e){var t=En.roundToInterval(e,h.delta);return u().constrainValue(t)},h=k({arrowButtonOptions:{touchAreaXDilation:3.5,touchAreaYDilation:7,mouseAreaXDilation:0,mouseAreaYDilation:0,enabledEpsilon:0,leftStart:o.startCallback,leftEnd:o.endCallback,rightStart:o.startCallback,rightEnd:o.endCallback,enabledPropertyOptions:{phetioReadOnly:!0,phetioFeatured:!1}},sliderOptions:{startDrag:o.startCallback,endDrag:o.endCallback,majorTickLength:20,minorTickStroke:"rgba( 0, 0, 0, 0.3 )",majorTicks:[],minorTickSpacing:0,constrainValue:c,valueChangeSoundGeneratorOptions:{interThresholdDelta:o.delta,constrainValue:c},tandem:o.tandem.createTandem(n.SLIDER_TANDEM_NAME)},numberDisplayOptions:{textOptions:{font:new tA(12),stringPropertyOptions:{phetioFeatured:!0}},tandem:o.tandem.createTandem("numberDisplay"),visiblePropertyOptions:{phetioFeatured:!0}},titleNodeOptions:{font:new tA(12),maxWidth:null,fill:"black",tandem:o.tandem.createTandem("titleText")}},o);h.enabledRangeProperty&&(h.sliderOptions.enabledRangeProperty=h.enabledRangeProperty);var d=_.pick(h.arrowButtonOptions,k_);h.arrowButtonOptions=_.omit(h.arrowButtonOptions,k_),h.arrowButtonOptions.tagName=null,s.groupFocusHighlight=h.includeArrowButtons,h.sliderOptions.trackNode||(h.sliderOptions=k({trackSize:new ms(180,3)},h.sliderOptions)),h.sliderOptions.thumbNode||(h.sliderOptions=k({thumbSize:new ms(17,34),thumbTouchAreaXDilation:6},h.sliderOptions)),h.sliderOptions=k({shiftKeyboardStep:h.delta,phetioType:h_.SliderIO},h.sliderOptions),h.sliderOptions.thumbFill&&!h.sliderOptions.thumbFillHighlighted&&(s.thumbFillProperty=new Au(h.sliderOptions.thumbFill),h.sliderOptions.thumbFillHighlighted=new Ut([s.thumbFillProperty],(function(e){return e.brighterColor()})));var p=new Xl(e,h.titleNodeOptions),f=new b_(i,r,h.numberDisplayOptions);s.slider=new f_(i,r,h.sliderOptions);var m=null,g=null,y=null;if(h.includeArrowButtons){if(m=new Sw("left",(function(){var e=i.get()-h.delta;e=En.roundToInterval(e,h.delta),e=Math.max(e,u().min),i.set(e)}),k({startCallback:h.arrowButtonOptions.leftStart,endCallback:h.arrowButtonOptions.leftEnd,tandem:h.tandem.createTandem("decrementButton")},h.arrowButtonOptions)),g=new Sw("right",(function(){var e=i.get()+h.delta;e=En.roundToInterval(e,h.delta),e=Math.min(e,u().max),i.set(e)}),k({startCallback:h.arrowButtonOptions.rightStart,endCallback:h.arrowButtonOptions.rightEnd,tandem:h.tandem.createTandem("incrementButton")},h.arrowButtonOptions)),!l){m.setScaleMagnitude(1);var v=f.localBounds.height/m.height;m.setScaleMagnitude(v),g.setScaleMagnitude(v)}m.touchArea=m.localBounds.dilatedXY(d.touchAreaXDilation,d.touchAreaYDilation).shiftedX(-d.touchAreaXDilation),g.touchArea=g.localBounds.dilatedXY(d.touchAreaXDilation,d.touchAreaYDilation).shiftedX(d.touchAreaXDilation),m.mouseArea=m.localBounds.dilatedXY(d.mouseAreaXDilation,d.mouseAreaYDilation).shiftedX(-d.mouseAreaXDilation),g.mouseArea=g.localBounds.dilatedXY(d.mouseAreaXDilation,d.mouseAreaYDilation).shiftedX(d.mouseAreaXDilation),y=function(){var e=i.value;m.enabled=e-h.arrowButtonOptions.enabledEpsilon>u().min&&!s.slider.isFocused(),g.enabled=e+h.arrowButtonOptions.enabledEpsilon<u().max&&!s.slider.isFocused()},i.lazyLink(y),h.enabledRangeProperty&&h.enabledRangeProperty.lazyLink(y),y(),s.slider.addInputListener({focus:function(){m.enabled=!1,g.enabled=!1},blur:function(){return y()}})}for(var A=h.sliderOptions.majorTicks,b=0;b<A.length;b++)s.slider.addMajorTick(A[b].value,A[b].label);if(h.sliderOptions.minorTickSpacing>0)for(var E=function(e){_.find(A,(function(t){return t.value===e}))||s.slider.addMinorTick(e),e+=h.sliderOptions.minorTickSpacing,V=e},V=r.min;V<=r.max;)E(V);return h.children=[h.layoutFunction(p,f,s.slider,m,g)],s.mutate(h),s.numberDisplay=f,s.disposeNumberControl=function(){p.dispose(),f.dispose(),s.slider.dispose(),s.thumbFillProperty&&s.thumbFillProperty.dispose(),m&&m.dispose(),g&&g.dispose(),y&&i.unlink(y),y&&h.enabledRangeProperty&&h.enabledRangeProperty.unlink(y)},s}return _createClass(n,[{key:"redrawNumberDisplay",value:function(){this.numberDisplay.recomputeText()}},{key:"dispose",value:function(){this.disposeNumberControl(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"withMinMaxTicks",value:function(e,t,i,r){var a=S()({tickLabelFont:new tA(12)},r);return a.sliderOptions=k({majorTicks:[{value:i.min,label:new Xl(i.min,{font:a.tickLabelFont})},{value:i.max,label:new Xl(i.max,{font:a.tickLabelFont})}]},a.sliderOptions),new n(e,t,i,a)}},{key:"createLayoutFunction1",value:function(e){var t=S()({align:"center",titleXSpacing:5,arrowButtonsXSpacing:15,ySpacing:5},e);return function(e,n,i,r,a){return new gf({align:t.align,spacing:t.ySpacing,children:[new mf({spacing:t.titleXSpacing,children:[e,n]}),new mf({spacing:t.arrowButtonsXSpacing,resize:!1,children:[r,i,a]})]})}}},{key:"createLayoutFunction2",value:function(e){var t=S()({align:"center",xSpacing:5,ySpacing:5},e);return function(e,n,i,r,a){return new gf({align:t.align,spacing:t.ySpacing,resize:!1,children:[new mf({spacing:t.xSpacing,children:[e,r,n,a]}),i]})}}},{key:"createLayoutFunction3",value:function(e){var t=S()({alignTitle:"center",alignNumber:"center",titleLeftIndent:0,xSpacing:5,ySpacing:5},e);return function(e,n,i,r,a){var s=new gf({spacing:t.ySpacing,resize:!1,align:t.alignTitle,children:[new cf(e,{leftMargin:t.titleLeftIndent}),new gf({spacing:t.ySpacing,resize:!1,align:t.alignNumber,children:[new mf({spacing:t.xSpacing,children:[r,n,a]}),i]})]});return e.boundsProperty.lazyLink((function(){s.updateLayout()})),s}}},{key:"createLayoutFunction4",value:function(e){var t=S()({sliderPadding:0,verticalSpacing:5,arrowButtonSpacing:5,hasReadoutProperty:null,layoutInvisibleButtons:!1,createBottomContent:null},e);return function(e,n,i,r,a){var s=!!r,o=new mf({spacing:t.arrowButtonSpacing,children:s?[r,i,a]:[i],excludeInvisibleChildrenFromBounds:!t.layoutInvisibleButtons});return new gf({spacing:t.verticalSpacing,children:[new mf({spacing:t.sliderPadding,children:[e,new jo({children:[n],visibleProperty:t.hasReadoutProperty||null,excludeInvisibleChildrenFromBounds:!0})],layoutOptions:{stretch:!0}}),new jo({children:[t.createBottomContent?t.createBottomContent(o):o],layoutOptions:{xMargin:t.sliderPadding}})]})}}}]),n}(jo);function w_(e){var t=Object.keys(e);return E_.filter((function(e){return _.includes(t,e)})).length>0}_defineProperty(V_,"SLIDER_TANDEM_NAME","slider"),V_.NumberControlIO=new U("NumberControlIO",{valueType:V_,documentation:"A number control with a title, slider and +/- buttons",supertype:jo.NodeIO}),Iy.register("NumberControl",V_);var __=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),r=t.call(this);var a=S()({baseColor:new Rr(80,130,230),lightFactor:.5,lighterFactor:.1,darkFactor:.5,darkerFactor:.1,cornerRadius:10,lightSource:"leftTop",lightOffset:.525,darkOffset:.375},i),s=a.lightSource.includes("left"),o=a.lightSource.includes("Top"),l=a.cornerRadius;r.lighterPaintProperty=new Au(a.baseColor,{luminanceFactor:a.lightFactor+a.lighterFactor}),r.lightPaintProperty=new Au(a.baseColor,{luminanceFactor:a.lightFactor}),r.darkPaintProperty=new Au(a.baseColor,{luminanceFactor:-a.darkFactor}),r.darkerPaintProperty=new Au(a.baseColor,{luminanceFactor:-a.darkFactor-a.darkerFactor});var u=o?r.lighterPaintProperty:r.darkerPaintProperty,c=s?r.lightPaintProperty:r.darkPaintProperty,h=s?r.darkPaintProperty:r.lightPaintProperty,d=o?r.darkerPaintProperty:r.lighterPaintProperty,p=a.lightOffset*l,f=a.darkOffset*l,m=o?p:f,g=s?p:f,y=s?f:p,v=o?f:p,A=iu.roundedBounds(e,l,l,{pickable:!1}),b=iu.roundedBounds(e,l,l,{pickable:!1});A.fill=new Ks(A.left,0,A.right,0).addColorStop(0,c).addColorStop(g/b.width,a.baseColor).addColorStop(1-y/b.width,a.baseColor).addColorStop(1,h),b.fill=new Ks(0,b.top,0,b.bottom).addColorStop(0,u).addColorStop(m/b.height,new Ut([u],(function(e){return e.withAlpha(0)}))).addColorStop(1-v/b.height,new Ut([d],(function(e){return e.withAlpha(0)}))).addColorStop(1,d);var E=(new Ni).moveTo(0,0).arc(0,0,l,-Math.PI/2,0,!1).close(),k={leftTop:-Math.PI/2,rightTop:0,rightBottom:Math.PI/2,leftBottom:Math.PI}[a.lightSource],V=e.eroded(l),w=new Hl(E,{x:s?V.minX:V.maxX,y:o?V.minY:V.maxY,rotation:k,fill:new Js(0,0,0,0,0,l).addColorStop(0,a.baseColor).addColorStop(1-p/l,a.baseColor).addColorStop(1,r.lighterPaintProperty),pickable:!1}),_=new Hl(E,{x:s?V.maxX:V.minX,y:o?V.maxY:V.minY,rotation:k+Math.PI,fill:new Js(0,0,0,0,0,l).addColorStop(0,a.baseColor).addColorStop(1-f/l,a.baseColor).addColorStop(1,r.darkerPaintProperty),pickable:!1}),C=iu.roundedBounds(e,l,l,{stroke:new Ut([h],(function(e){return e.withAlpha(.4)}))});return r.addChild(A),r.addChild(b),r.addChild(w),r.addChild(_),r.addChild(C),r.mutate(a),r}return _createClass(n,[{key:"dispose",value:function(){this.lighterPaintProperty.dispose(),this.lightPaintProperty.dispose(),this.darkPaintProperty.dispose(),this.darkerPaintProperty.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);Iy.register("ShadedRectangle",__);var C_=Iy,x_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[e.focusedProperty,e.overProperty,e.looksOverProperty,e.looksPressedProperty,e.valueProperty],(function(t,n,i,r,a){var s=a===e.valueDown;return!i||r||s?(n||t)&&(r||s)||s?PS.PRESSED:PS.IDLE:PS.OVER}),{valueType:PS})}return _createClass(n)}(Zt);nA.register("StickyToggleButtonInteractionStateProperty",x_);var P_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({tandem:xe.REQUIRED},a);(s=t.call(this,o)).valueUp=e,s.valueDown=i,s.valueProperty=r,s.toggledEmitter=new Et({tandem:o.tandem.createTandem("toggledEmitter"),phetioDocumentation:"Emits when the button is toggled",phetioEventType:ce.USER}),s.toggledEmitter.addListener((function(){s.valueProperty.value=s.valueProperty.value===s.valueUp?s.valueDown:s.valueUp})),s.pressedWhileDownProperty=new pt(!1);var l=function(t){var n=s.overProperty.get()||s.focusedProperty.get();s.enabledProperty.get()&&n&&!s.interrupted&&(t&&r.value===e&&(s.toggle(),s.pressedWhileDownProperty.set(!1)),t||r.value!==i||(s.pressedWhileDownProperty.get()?s.toggle():s.pressedWhileDownProperty.set(!0))),t||n||s.pressedWhileDownProperty.set(!0)};s.downProperty.link(l);var u=function(e){s.downProperty.set(e===i)};r.link(u);var c=function(e){e&&s.pressedWhileDownProperty.set(!0)};return s.enabledProperty.link(c),s.disposeToggleButtonModel=function(){s.downProperty.unlink(l),s.enabledProperty.unlink(c),r.unlink(u),s.toggledEmitter.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeToggleButtonModel(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"toggle",value:function(){this.toggledEmitter.emit(),this.produceSoundEmitter.emit()}}]),n}(MS);nA.register("StickyToggleButtonModel",P_);var T_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=new P_(i,r,e,a),l=new x_(o);return(s=t.call(this,o,l,a)).disposeRectangularStickyToggleButton=function(){o.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeRectangularStickyToggleButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(BS);nA.register("RectangularStickyToggleButton",T_);var M_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,e,!1,!0,i)}return _createClass(n)}(T_);nA.register("BooleanRectangularStickyToggleButton",M_);var L_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({radius:r&&r.content?null:30,lineWidth:.5,stroke:null,touchAreaDilation:0,mouseAreaDilation:0,touchAreaXShift:0,touchAreaYShift:0,mouseAreaXShift:0,mouseAreaYShift:0,cursor:"pointer",xMargin:5,yMargin:5,buttonAppearanceStrategy:n.ThreeDAppearanceStrategy},r);s.content,s.radius&&(s.minUnstrokedWidth=2*s.radius,s.minUnstrokedHeight=2*s.radius),s.buttonAppearanceStrategyOptions||(s.buttonAppearanceStrategyOptions={stroke:s.stroke,lineWidth:s.lineWidth});var o=s.radius||Math.max(s.content.width+2*s.xMargin,s.content.height+2*s.yMargin)/2;if(s.content&&s.radius){var l=s.content,u=Math.min(2*(s.radius-s.xMargin)/l.width,2*(s.radius-s.yMargin)/l.height);s.content=new jo({children:[l],scale:u})}var c=new $l(o);a=t.call(this,e,c,i,s);var h=c.localBounds.width/2;return a.touchArea=Ni.circle(s.touchAreaXShift,s.touchAreaYShift,h+s.touchAreaDilation),a.mouseArea=Ni.circle(s.mouseAreaXShift,s.mouseAreaYShift,h+s.mouseAreaDilation),a.focusHighlight=Ni.circle(0,0,h+5),a}return _createClass(n)}(NS),I_=function(){function e(t,n,i,r){_classCallCheck(this,e);var a=r&&r.stroke?r.stroke:new Au(i,{luminanceFactor:-.4}),s=r&&void 0!==r.lineWidth?r.lineWidth:.3,o=S()({stroke:a,lineWidth:s,overStroke:a,overLineWidth:s,overButtonOpacity:1,selectedStroke:a,selectedLineWidth:s,selectedButtonOpacity:1,deselectedStroke:a,deselectedLineWidth:s,deselectedButtonOpacity:1,overFill:i},r),l=new Au(i,{luminanceFactor:.8}),u=new Au(i,{luminanceFactor:.7}),c=new Au(i,{luminanceFactor:.3}),h=new Au(i,{luminanceFactor:-.1}),d=new Au(i,{luminanceFactor:-.2}),p=new Au(i,{luminanceFactor:-.4}),f=new Au(i,{luminanceFactor:-.5}),m=new Ut([i],(function(e){return e.withAlpha(0)})),g=t.width/2,y=g-2.5,v=g+2.5,A=new Js(2.5,2.5,y,2.5,2.5,v).addColorStop(0,i).addColorStop(1,u),b=new Js(-2.5,-2.5,y,-2.5,-2.5,v).addColorStop(0,m).addColorStop(1,f),E=new Js(2.5,2.5,y,2.5,2.5,v).addColorStop(0,c).addColorStop(1,l),k=new Js(-2.5,-2.5,y,-2.5,-2.5,v).addColorStop(0,m).addColorStop(1,f),V=new Js(-2.5,-2.5,0,0,0,v).addColorStop(0,h).addColorStop(.6,d).addColorStop(.8,i).addColorStop(1,l),w=new $l(g,{stroke:o.stroke?o.stroke:p,lineWidth:o.lineWidth,pickable:!1});function _(e){switch(e){case PS.IDLE:t.fill=A,t.stroke=o.deselectedStroke,t.lineWidth=o.deselectedLineWidth,t.opacity=o.deselectedButtonOpacity,w.fill=b,w.opacity=o.deselectedButtonOpacity;break;case PS.OVER:t.fill=E,t.stroke=o.overStroke,t.lineWidth=o.overLineWidth,t.opacity=o.overButtonOpacity,w.fill=k,w.opacity=o.overButtonOpacity;break;case PS.PRESSED:t.fill=V,t.stroke=o.selectedStroke,t.lineWidth=o.selectedLineWidth,t.opacity=o.selectedButtonOpacity,w.fill=k,w.opacity=o.selectedButtonOpacity;break;default:throw new Error("unsupported interactionState: ".concat(e))}}t.addChild(w),this.maxLineWidth=w.hasStroke()&&o&&"number"==typeof o.lineWidth?o.lineWidth:0,t.cachedPaints=[A,E,V],w.cachedPaints=[b,k],n.link(_),this.disposeThreeDAppearanceStrategy=function(){n.hasListener(_)&&n.unlink(_),l.dispose(),u.dispose(),c.dispose(),h.dispose(),d.dispose(),p.dispose(),f.dispose(),m.dispose()}}return _createClass(e,[{key:"dispose",value:function(){this.disposeThreeDAppearanceStrategy()}}]),e}();L_.ThreeDAppearanceStrategy=I_,nA.register("RoundButton",L_);var R_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({soundPlayer:xS,tandem:xe.REQUIRED,tandemNameSuffix:"Button"},a),l=new P_(i,r,e,o),u=new x_(l);s=t.call(this,l,u,o);var c=function(){return o.soundPlayer.play()};l.produceSoundEmitter.addListener(c);var h=function(t){return s.setPDOMAttribute("aria-pressed",e.value===r)};return e.link(h),s.disposeRoundStickyToggleButton=function(){e.unlink(h),l.produceSoundEmitter.removeListener(c),l.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeRoundStickyToggleButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(L_);nA.register("RoundStickyToggleButton",R_);var D_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){return _classCallCheck(this,n),t.call(this,e,!1,!0,i)}return _createClass(n)}(R_);nA.register("BooleanRoundStickyToggleButton",D_);var N_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({valueOffSoundPlayer:eE,valueOnSoundPlayer:cE,tandem:xe.REQUIRED,tandemNameSuffix:"Button"},a),l=new dE(i,r,e,o),u=new hE(l);(s=t.call(this,l,u,o)).addLinkedElement(e,{tandem:o.tandem.createTandem("property")});var c=function(){e.value===i?o.valueOffSoundPlayer.play():e.value===r&&o.valueOnSoundPlayer.play()};return s.buttonModel.produceSoundEmitter.addListener(c),s.disposeRoundToggleButton=function(){s.buttonModel.produceSoundEmitter.removeListener(c),l.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeRoundToggleButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(L_);nA.register("RoundToggleButton",N_);var q_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({content:null,tandem:xe.REQUIRED,tandemNameSuffix:"Button"},a),l=new zS(e,i,r,{tandem:o.tandem.createTandem("toggleNode")});return o.content=l,(s=t.call(this,e,!1,!0,o)).disposeBooleanRoundToggleButton=function(){l.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeBooleanRoundToggleButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(N_);nA.register("BooleanRoundToggleButton",q_);var O_={up:0,down:Math.PI,left:-Math.PI/2,right:Math.PI/2},B_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({arrowDirection:"up",arrowSize:new ms(20,7),arrowStroke:"black",arrowLineWidth:3,arrowLineCap:"round",touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,baseColor:"rgba( 200, 200, 200, 0.5 )",stroke:"black",buttonAppearanceStrategy:NS.FlatAppearanceStrategy,cornerRadius:4},e),a=(new Ni).moveTo(0,0).lineTo(r.arrowSize.width/2,-r.arrowSize.height).lineTo(r.arrowSize.width,0);a=a.transformed(oi.rotation2(O_[r.arrowDirection])),r.content=new Hl(a,{stroke:r.arrowStroke,lineWidth:r.arrowLineWidth,lineCap:r.arrowLineCap});var s=r.arrowDirection,o=r.cornerRadius;return r.leftTopCornerRadius="up"===s||"left"===s?o:0,r.rightTopCornerRadius="up"===s||"right"===s?o:0,r.leftBottomCornerRadius="down"===s||"left"===s?o:0,r.rightBottomCornerRadius="down"===s||"right"===s?o:0,(i=t.call(this,r)).touchArea=G_(_assertThisInitialized(i),s,r.touchAreaXDilation,r.touchAreaYDilation),i.mouseArea=G_(_assertThisInitialized(i),s,r.mouseAreaXDilation,r.mouseAreaYDilation),i}return _createClass(n)}(FS);function G_(e,t,n,i){var r=null;if(n||i)switch(t){case"up":r=e.localBounds.dilatedXY(n,i/2).shiftedY(-i/2);break;case"down":r=e.localBounds.dilatedXY(n,i/2).shiftedY(i/2);break;case"left":r=e.localBounds.dilatedXY(n/2,i).shiftedX(-n/2);break;case"right":r=e.localBounds.dilatedXY(n/2,i).shiftedX(n/2);break;default:throw new Error("unsupported arrowDirection: ".concat(t))}return r}nA.register("CarouselButton",B_);var H_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){return _classCallCheck(this,n),t.call(this,[e.looksOverProperty,e.looksPressedProperty],(function(e,t){return e&&!t?PS.OVER:t?PS.PRESSED:PS.IDLE}),{valueType:PS})}return _createClass(n)}(Kt);nA.register("MomentaryButtonInteractionStateProperty",H_);var F_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({tandem:xe.REQUIRED,phetioReadOnly:Be.DEFAULT_OPTIONS.phetioReadOnly},a);s=t.call(this,o);var l=function(t){t?s.enabledProperty.get()&&r.set(i):r.set(e)};s.downProperty.lazyLink(l);var u=function(e){s.downProperty.set(e===i)};return r.link(u),s.disposeMomentaryButtonModel=function(){s.downProperty.unlink(l),r.unlink(u)},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeMomentaryButtonModel(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(MS);nA.register("MomentaryButtonModel",F_);var Y_=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(Y_,"SELECTED",new Y_),_defineProperty(Y_,"DESELECTED",new Y_),_defineProperty(Y_,"OVER",new Y_),_defineProperty(Y_,"PRESSED",new Y_),_defineProperty(Y_,"enumeration",new re(Y_)),nA.register("RadioButtonInteractionState",Y_);var z_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){return _classCallCheck(this,n),t.call(this,[e.focusedProperty,e.overProperty,e.looksOverProperty,e.looksPressedProperty,i],(function(e,t,n,i,a){var s=a===r;return!n||i||s?(t||e)&&i?Y_.PRESSED:s?Y_.SELECTED:Y_.DESELECTED:Y_.OVER}),{valueType:Y_})}return _createClass(n)}(Zt);nA.register("RadioButtonInteractionStateProperty",z_);var U_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({tandem:xe.REQUIRED,tandemNameSuffix:"Button"},a),l=new F_(i,r,e,o);return(s=t.call(this,l,new H_(l),o)).disposeRectangularMomentaryButton=function(){l.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeRectangularMomentaryButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(BS);nA.register("RectangularMomentaryButton",U_);var W_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({soundPlayer:null,baseColor:IS.LIGHT_BLUE,buttonAppearanceStrategy:n.FlatAppearanceStrategy,buttonAppearanceStrategyOptions:{overButtonOpacity:.8,overStroke:null,selectedStroke:Rr.BLACK,selectedLineWidth:1.5,selectedButtonOpacity:1,deselectedStroke:new Rr(50,50,50),deselectedLineWidth:1,deselectedButtonOpacity:.6},contentAppearanceStrategy:n.ContentAppearanceStrategy,contentAppearanceStrategyOptions:{overContentOpacity:.8,selectedContentOpacity:1,deselectedContentOpacity:.6},tagName:"input",inputType:"radio",labelTagName:"label",containerTagName:"li",appendDescription:!0,appendLabel:!0,tandem:xe.REQUIRED,tandemNameSuffix:"Button",phetioReadOnly:Be.DEFAULT_OPTIONS.phetioReadOnly},r),o=new MS({tandem:s.tandem}),l=new z_(o,e,i);(a=t.call(this,o,l,s)).interactionStateProperty=l,e.value===i&&a.setPDOMAttribute("checked","checked");var u=function(e){a.pdomChecked=e===i};e.link(u),a.property=e,a.value=i,a.firedEmitter=new Et({tandem:s.tandem.createTandem("firedEmitter"),phetioDocumentation:"Emits when the radio button is pressed",phetioReadOnly:s.phetioReadOnly,phetioEventType:ce.USER}),a.firedEmitter.addListener((function(){return e.set(i)})),o.downProperty.link((function(e){e||!o.overProperty.get()&&!o.focusedProperty.get()||o.interrupted||(a.fire(),a.voicingSpeakFullResponse({hintResponse:null}))}));var c=s.soundPlayer||xS,h=function(){c.play()};return o.produceSoundEmitter.addListener(h),a.disposeRectangularRadioButton=function(){e.unlink(u),a.firedEmitter.dispose(),o.produceSoundEmitter.removeListener(h),o.dispose(),a.interactionStateProperty.dispose()},a}return _createClass(n,[{key:"dispose",value:function(){this.disposeRectangularRadioButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"fire",value:function(){this.buttonModel.enabledProperty.get()&&(this.firedEmitter.emit(),this.buttonModel.produceSoundEmitter.emit())}}]),n}(BS);_defineProperty(W_,"TANDEM_NAME_SUFFIX","RadioButton"),_defineProperty(W_,"FlatAppearanceStrategy",function(){function e(t,n,i,r){_classCallCheck(this,e);var a=S()({stroke:i,lineWidth:1,deselectedButtonOpacity:1,deselectedLineWidth:1,deselectedStroke:"gray",overButtonOpacity:.8,overFill:null,overLineWidth:0,overStroke:null,selectedButtonOpacity:1,selectedLineWidth:1,selectedStroke:"black"},r),s=new Au(i,{luminanceFactor:-.4}),o=new Au(a.overFill||i,{luminanceFactor:r&&r.overFill?0:.4}),l=new Au(a.overStroke||a.deselectedStroke,{luminanceFactor:r&&r.overStroke?0:-.4});function u(e){switch(e){case Y_.SELECTED:t.fill=i,t.stroke=a.selectedStroke,t.lineWidth=a.selectedLineWidth,t.opacity=a.selectedButtonOpacity;break;case Y_.DESELECTED:t.fill=i,t.stroke=a.deselectedStroke,t.lineWidth=a.deselectedLineWidth,t.opacity=a.deselectedButtonOpacity;break;case Y_.OVER:t.fill=o,t.stroke=l,t.lineWidth=Math.max(a.overLineWidth,a.deselectedLineWidth),t.opacity=a.overButtonOpacity;break;case Y_.PRESSED:t.fill=s,t.stroke=a.deselectedStroke,t.lineWidth=a.deselectedLineWidth,t.opacity=a.selectedButtonOpacity;break;default:throw new Error("unsupported interactionState: ".concat(e))}}this.maxLineWidth=Math.max(a.selectedLineWidth,a.deselectedLineWidth,a.overLineWidth),t.cachedPaints=[i,o,s,l,a.selectedStroke,a.deselectedStroke],n.link(u),this.disposeFlatAppearanceStrategy=function(){n.hasListener(u)&&n.unlink(u),l.dispose(),o.dispose(),s.dispose()}}return _createClass(e,[{key:"dispose",value:function(){this.disposeFlatAppearanceStrategy()}}]),e}()),_defineProperty(W_,"ContentAppearanceStrategy",function(){function e(t,n,i){_classCallCheck(this,e);var r=S()({deselectedContentOpacity:1,overContentOpacity:1,selectedContentOpacity:1},i);function a(e){if(null!==t)switch(e){case Y_.DESELECTED:t.opacity=r.deselectedContentOpacity;break;case Y_.OVER:t.opacity=r.overContentOpacity;break;case Y_.SELECTED:t.opacity=r.selectedContentOpacity;break;case Y_.PRESSED:t.opacity=r.deselectedContentOpacity;break;default:throw new Error("unsupported state: ".concat(e))}}n.link(a),this.disposeContentAppearanceStrategy=function(){n.hasListener(a)&&n.unlink(a)}}return _createClass(e,[{key:"dispose",value:function(){this.disposeContentAppearanceStrategy()}}]),e}()),nA.register("RectangularRadioButton",W_);var j_=0,X_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({soundPlayers:null,labelAlign:"bottom",labelSpacing:0,a11yHighlightXDilation:0,a11yHighlightYDilation:0,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,radioButtonOptions:{baseColor:IS.LIGHT_BLUE,cornerRadius:4,xMargin:5,yMargin:5,xAlign:"center",yAlign:"center",buttonAppearanceStrategyOptions:{selectedStroke:"black",selectedLineWidth:1.5,selectedButtonOpacity:1,deselectedStroke:new Rr(50,50,50),deselectedLineWidth:1,deselectedButtonOpacity:.6,overButtonOpacity:.8},contentAppearanceStrategy:W_.ContentAppearanceStrategy,contentAppearanceStrategyOptions:{overContentOpacity:.8,selectedContentOpacity:1,deselectedContentOpacity:.6}},spacing:10,orientation:"vertical",disabledOpacity:Pr.DISABLED_OPACITY,tandem:xe.REQUIRED,tandemNameSuffix:"ButtonGroup",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,tagName:"ul",labelTagName:"h3",ariaRole:"radiogroup",groupFocusHighlight:!0},r);j_++;for(var o=new Map,l=Math.max(s.radioButtonOptions.buttonAppearanceStrategyOptions.selectedLineWidth,s.radioButtonOptions.buttonAppearanceStrategyOptions.deselectedLineWidth),u=Hb(i,s.tandem),c=_.maxBy(u,(function(e){return e.width})).width,h=_.maxBy(u,(function(e){return e.height})).height,d=[],p=[],f=[],m=s.radioButtonOptions.xMargin,g=s.radioButtonOptions.yMargin,y=0;y<i.length;y++){var v=i[y],A=k({content:u[y],minWidth:c+2*m,minHeight:h+2*g,soundPlayer:s.soundPlayers?s.soundPlayers[y]:Bb.getSelectionSoundPlayer(y),tandem:v.tandemName?s.tandem.createTandem(v.tandemName):s.tandem===xe.OPT_OUT?xe.OPT_OUT:xe.REQUIRED,phetioDocumentation:v.phetioDocumentation||""},s.radioButtonOptions);v.labelContent&&(A.labelContent=v.labelContent,A.voicingNameResponse=v.labelContent),v.descriptionContent&&(A.descriptionContent=v.descriptionContent),v.voicingContextResponse&&(A.voicingContextResponse=v.voicingContextResponse);var b=new W_(e,v.value,A);o.set(v.value,b),b.setPDOMAttribute("name","RectangularRadioButtonGroup"+j_);var E=new iu(0,0,l+c+2*m,l+h+2*g,{fill:"rgba(0,0,0,0)",center:b.center});b.addChild(E);var V=void 0;if(v.label){var w=v.label,C="bottom"===s.labelAlign||"top"===s.labelAlign?"vertical":"horizontal",x="left"===s.labelAlign||"top"===s.labelAlign?[w,b]:[b,w];V=new Qp({children:x,spacing:s.labelSpacing,orientation:C}),w.pickable=!1,s.radioButtonOptions.contentAppearanceStrategy&&f.push(new s.radioButtonOptions.contentAppearanceStrategy(w,b.interactionStateProperty,s.radioButtonOptions.contentAppearanceStrategyOptions))}else V=b;d.push(V),p.push({radioButton:b,layoutNode:V})}s.children=d;var P=_.maxBy(p,(function(e){return e.layoutNode.width})).layoutNode.width,T=_.maxBy(p,(function(e){return e.layoutNode.height})).layoutNode.height;p.forEach((function(e){e.radioButton.touchArea=Ni.rectangle(-s.touchAreaXDilation-l/2,-s.touchAreaYDilation-l/2,P+2*s.touchAreaXDilation,T+2*s.touchAreaYDilation),e.radioButton.mouseArea=Ni.rectangle(-s.mouseAreaXDilation-l/2,-s.mouseAreaYDilation-l/2,P+2*s.mouseAreaXDilation,T+2*s.mouseAreaYDilation);var t=eh.getDilationCoefficient(e.layoutNode);e.radioButton.focusHighlight=Ni.rectangle(-s.a11yHighlightXDilation-l/2-t,-s.a11yHighlightYDilation-l/2-t,P+2*(s.a11yHighlightXDilation+t),T+2*(s.a11yHighlightYDilation+t))})),(a=t.call(this,s)).radioButtonMap=o,a.addAriaLabelledbyAssociation({thisElementName:Rh.PRIMARY_SIBLING,otherNode:_assertThisInitialized(a),otherElementName:Rh.LABEL_SIBLING});var M={keydown:function(e){return e.pointer.reserveForKeyboardDrag()}};return a.addInputListener(M),a.addLinkedElement(e,{tandem:s.tandem.createTandem("property")}),a.disposeRadioButtonGroup=function(){a.removeInputListener(M),d.forEach((function(e){return e.dispose()})),f.forEach((function(e){return e.dispose&&e.dispose()})),u.forEach((function(e){return e.dispose()}))},a}return _createClass(n,[{key:"getButtonForValue",value:function(e){var t=this.radioButtonMap.get(e);return t}},{key:"dispose",value:function(){this.radioButtonMap.clear(),this.disposeRadioButtonGroup(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Qp);nA.register("RectangularRadioButtonGroup",X_);var Q_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({tandem:xe.REQUIRED,tandemNameSuffix:"Button"},a),l=new F_(i,r,e,o);return(s=t.call(this,l,new H_(l),o)).disposeRoundMomentaryButton=function(){l.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeRoundMomentaryButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(L_);nA.register("RoundMomentaryButton",Q_);var K_=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({soundPlayer:xS,tandem:xe.REQUIRED,tandemNameSuffix:"Button"},e),a=r.listener,s=_.omit(r,["listener"]),o=new LS(s);(i=t.call(this,o,new TS(o),s)).pushButtonModel=o,a&&i.addListener(a);var l=function(){r.soundPlayer.play()};return o.produceSoundEmitter.addListener(l),i.disposeRoundPushButton=function(){o.produceSoundEmitter.removeListener(l),o.dispose()},i}return _createClass(n,[{key:"dispose",value:function(){_get(_getPrototypeOf(n.prototype),"dispose",this).call(this),this.disposeRoundPushButton()}},{key:"addListener",value:function(e){this.pushButtonModel.addListener(e)}},{key:"removeListener",value:function(e){this.pushButtonModel.removeListener(e)}}]),n}(L_);nA.register("RoundPushButton",K_);var J_="data:audio/mpeg;base64,//swxAAAA8ADNZQRgDGHni23MIAC1bbaiNgdgM+wEHBiogUAbxA4MT+////gh//8Mf4YzNI0kYiNYjDZaLJCYAZZgbhKQTNx5Vp34WpSu/bhLvzLYwWSHokUhx0EBR4FA/Mp8sOz3gcWfL9YqH7kKIkzd9fLvSkB201St7337UyHKf7X9Pf//Ue9/6irjy/l3s5gqCo1lPVlVSBj//syxAOACFB7hZyUgDEUCu008ZpKfZq0pMq3UhCDwXYfD+n5X+IUp5YiEYMB0CgRCwfQF0AmAUjAlZVJuE4ZaTbKK0AIJCxUAwrWLf////l1oFP9Yo2m1QI89G8bsISUXc8TjPs5pDlVUzUq1VJLFYcIlvdQS0P1lohZFx5hFpVDCPaSKlRsdgIslDzfeqxt8iVd+v6aClA3ydRso//7MsQDgAhYV13sGEqhEJFpcZMJqE0gGS8ZU3ekWmMRbO4kqZnMgAHAFiPmBRdQFgRZHZrTNwZcRTYLKU4qxy3ieKohBwSNif5UwYc4W/ywiEYAtIWoggTByJ+YPcFxgdYE5MVlD41ZJSYBdPF8gQIZtZPy/cZWxBR5Bm7WwZdGkolTRTQXLpSOcoUvf3in/dyBZwzRXAF3ieJEAxD/+zLEBAAIkJlXlYaAARIWb3MegACpLHqwdgk0mfJ913UT0LiL5W+nIh+DsKATQJ4F0E4PF8c7FxaaaCZ80SpqZbfX7J/99fN0p/Onf+zSaVmKSAKAgKAgMAAAAAEBCVMt4sfsyRdHO3PTH0SBFi4jhEgNBinEXeeDSKeby9zBMKun3/pKZ6L//H/6T/p/82bkkAyj/5m7WOWuRFpI//swxAOACDgvi7zDADEQkW289AoWMABHxkZCUEwfjodDiYmpiWw9NWjIAhJEFkFSo4GnxwiDsrBoGn/g0DT64Kgq9BUFQWBo3WFDf4B//ljZRUwaFSyREkApYqDmkM8qYgtylZx9ZL7knEF4rFKLgqfa4GHahJbD5q+ZdeybNpd1LOzqJVWdmJgs9uNUoK61I9Pf1runDP5da2kA//syxAQACHita6eYTzEMFSdkzAigHGL2uEMDLL6xtFmUuujunUP9ODzjFKbt2J5yt77uOmiJWXQ6GAbIjvu17WVn/dDEccwhLJLW6dXU/dcsEAvP8BAST22Qg8WJEX2Cxxs84/BnOt15rGZwVs2FEtKWVPRHZitdbuySkumtHlb0M/U5QwcQRYSLI91T/epbUqPPogEGy4Ldq0ABj//7MsQEgAfcrTesFG1owIRiqMyYmD9U8MBcisSsURTFgBykNZkSUjL+oDB8VGCT310AYfb2ZlVRgEvbASNp8ptD8y7lYYlvxtFsCgAAYAQABAzjzrwIrmT2cuLIZOOOhHHQELC2rOtlix709VXnYiej4dx2rz2Vd/xL6QQAAHCikADAVHicCJrfesiRcXCNaoKuuneW+r1dXxFDvZf/+zLEEQBFcCEJoLHi8JuFVvDMGGz/vqeWI50KHuGnJHLWAAQIl4qgkpSn8oGq1rUCoSk3UAhEYtCgKWWwwIDo////4sLVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",Z_=XA(JA,J_),$_=BA.createLock(J_),eC=new QA,tC=!1,nC=function(){tC||($_(),tC=!0)},iC=JA.decodeAudioData(Z_.buffer,(function(e){null===eC.audioBufferProperty.value&&(eC.audioBufferProperty.set(e),nC())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),eC.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),nC()}));iC&&iC.then((function(e){null===eC.audioBufferProperty.value&&(eC.audioBufferProperty.set(e),nC())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),nC()}));var rC=new tS(eC,{soundClipOptions:{initialOutputLevel:.2},soundManagerOptions:{categoryName:"user-interface"}});KA.register("switchToLeftSoundPlayer",rC);var aC=rC,sC="data:audio/mpeg;base64,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",oC=XA(JA,sC),lC=BA.createLock(sC),uC=new QA,cC=!1,hC=function(){cC||(lC(),cC=!0)},dC=JA.decodeAudioData(oC.buffer,(function(e){null===uC.audioBufferProperty.value&&(uC.audioBufferProperty.set(e),hC())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),uC.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),hC()}));dC&&dC.then((function(e){null===uC.audioBufferProperty.value&&(uC.audioBufferProperty.set(e),hC())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),hC()}));var pC=new tS(uC,{soundClipOptions:{initialOutputLevel:.2},soundManagerOptions:{categoryName:"user-interface"}});KA.register("switchToRightSoundPlayer",pC);var fC=pC,mC=new ms(60,30),gC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({size:mC,toggleWhileDragging:null,dragThreshold:3,toggleThreshold:1,thumbFill:null,thumbStroke:"black",thumbTouchAreaXDilation:8,thumbTouchAreaYDilation:8,thumbMouseAreaXDilation:0,thumbMouseAreaYDilation:0,trackFillLeft:null,trackFillRight:null,trackStroke:"black",cursor:"pointer",disabledOpacity:Pr.DISABLED_OPACITY,switchToLeftSoundPlayer:aC,switchToRightSoundPlayer:fC,tandem:xe.REQUIRED,tandemNameSuffix:"Switch",phetioEventType:ce.USER,phetioReadOnly:Be.DEFAULT_OPTIONS.phetioReadOnly,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0,tagName:"button",ariaRole:"switch"},a),l=null;o.trackFillLeft&&o.trackFillRight||(l=new Ks(0,0,0,o.size.height).addColorStop(0,"rgb( 40, 40, 40 )").addColorStop(1,"rgb( 200, 200, 200 )")),o.trackFillLeft=o.trackFillLeft||l,o.trackFillRight=o.trackFillRight||l,o.thumbFill=o.thumbFill||new Ks(0,0,0,o.size.height).addColorStop(0,"white").addColorStop(1,"rgb( 200, 200, 200 )"),s=t.call(this);var u=o.size.height/2,c=new iu(0,0,o.size.width,o.size.height,u,u,{stroke:o.trackStroke,fill:o.trackFillLeft});s.addChild(c);var h=new iu(0,0,o.size.width,o.size.height,u,u,{stroke:o.trackStroke,fill:o.trackFillRight});s.addChild(h);var d=new iu(0,0,.5*o.size.width,o.size.height,u,u,{fill:o.thumbFill,stroke:o.thumbStroke});s.addChild(d),(o.thumbTouchAreaXDilation||o.thumbTouchAreaYDilation)&&(d.touchArea=Ni.roundRect(-o.thumbTouchAreaXDilation,-o.thumbTouchAreaYDilation,.5*o.size.width+2*o.thumbTouchAreaXDilation,o.size.height+2*o.thumbTouchAreaYDilation,u,u)),(o.thumbMouseAreaXDilation||o.thumbMouseAreaYDilation)&&(d.mouseArea=Ni.roundRect(-o.thumbMouseAreaXDilation,-o.thumbMouseAreaYDilation,.5*o.size.width+2*o.thumbMouseAreaXDilation,o.size.height+2*o.thumbMouseAreaYDilation,u,u));var p=function(e){var t=c.lineWidth/2;e===i?d.left=-t:d.right=o.size.width+t,h.rectWidth=d.right-t,s.setPDOMAttribute("aria-pressed",e!==i),s.setPDOMAttribute("aria-checked",e!==i)};e.link(p);var f=o.dragThreshold*o.dragThreshold,m=new pn(0,0),g=!1,y=new zu((function(t){e.value=t,t===i?o.switchToLeftSoundPlayer.play():o.switchToRightSoundPlayer.play()}),{parameters:[{validValues:[i,r],phetioPrivate:!0}],tandem:o.tandem.createTandem("toggleAction"),phetioDocumentation:"Occurs when the switch is toggled via user interaction",phetioReadOnly:o.phetioReadOnly,phetioEventType:ce.USER}),v=function(){return d.centerX<c.centerX?i:r},A=new Sd({tandem:o.tandem.createTandem("dragListener"),canStartPress:function(e){return!e||"move"!==e.type&&"enter"!==e.type||_.includes(e.trail.nodes,d)},start:function(){m.setXY(0,0),g=!1},drag:function(t,n){m.add(n.modelDelta),g=g||m.magnitudeSquared>f;var i=n.getCurrentTarget().globalToLocalPoint(t.pointer.point),r=d.width/2,a=c.lineWidth/2;d.centerX=En.clamp(i.x,r-a,o.size.width-r+a),h.rectWidth=d.right-a;var s=i.x<(1-2*o.toggleThreshold)*r||i.x>(2*o.toggleThreshold-1)*r+o.size.width,l=v();(!0===o.toggleWhileDragging||s&&null===o.toggleWhileDragging)&&e.value!==l&&y.execute(l)},end:function(){var t=e.value===i?r:i,n=g?v():t;e.value!==n&&y.execute(n),p(n)},allowClick:!0});return s.addInputListener(A),s.mutate(o),s.addLinkedElement(e,{tandem:o.tandem.createTandem("property")}),s.switchToLeftSoundPlayer=o.switchToLeftSoundPlayer,s.switchToRightSoundPlayer=o.switchToRightSoundPlayer,s.disposeToggleSwitch=function(){e.unlink(p),y.dispose(),A.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeToggleSwitch(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Hc(jo));nA.register("ToggleSwitch",gC);var yC=function(e,t){e.opacity=t?1:Pr.DISABLED_OPACITY},vC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o){var l;_classCallCheck(this,n);var u=S()({toggleSwitchOptions:{enabledPropertyOptions:{phetioFeatured:!1}},setEnabled:yC,centerOnSwitch:!1,cursor:"pointer",disabledOpacity:Pr.DISABLED_OPACITY,spacing:8,tandem:xe.REQUIRED,tandemNameSuffix:"Switch",visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},o),c=new gC(e,i,a,k({tandem:u.tandem.createTandem("toggleSwitch")},u.toggleSwitchOptions)),h=r,d=s;if(u.centerOnSwitch){var p=new ff;h=new cf(r,{group:p,xAlign:"right"}),d=new cf(s,{group:p,xAlign:"left"})}u.children=[h,c,d],l=t.call(this,u);var f=function(e){u.setEnabled&&(u.setEnabled(r,e===i),u.setEnabled(s,e===a))};e.link(f);var m=new vd({release:function(){e.value!==i&&c.switchToLeftSoundPlayer.play(),e.value=i},tandem:r.tandem.createTandem("pressListener")});r.addInputListener(m);var g=new vd({release:function(){e.value!==a&&c.switchToRightSoundPlayer.play(),e.value=a},tandem:s.tandem.createTandem("pressListener")});return s.addInputListener(g),l.disposeABSwitch=function(){e.unlink(f),c.dispose(),r.removeInputListener(m),s.removeInputListener(g),m.dispose(),g.dispose()},l}return _createClass(n,[{key:"dispose",value:function(){this.disposeABSwitch(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(mf);nA.register("ABSwitch",vC);var AC="data:audio/mpeg;base64,//swxAAABSAbF7TAgDE5nqu/MHICAAAAcDYkDIEtmZ+0OAIDonAEAIOjgnenW/yhz/g+fh+CEocif//+c5RVQlRIdHdXcHffj/DYYCgBdaS6OzOU+xCNTd7EPI6nQ7mODNUkXlljx1AXgvbsgTi8z3+Z7a8aMfHP9uQFmXb1f/cmZM/9//sIhYP//sNqQJAgNJhWTyGAwFAoAATS//syxAeACW0Hgbi1EBESBuvjNGAAfDtZrw0MQaBPJj2MwQyJDLEhJZGoPjAvCMnP3dlJiAtJ8xr/PKk5hYV//3KDxif//6MYVcnt//+VFswo04EQAACAAC9YdezBqNoZHHQDlUSCuyZAkxazLI1qAeiR+JfccaBj1xti9B5JXrESzzBnSIgoXKxEzkQCos+pbPmxfwWXkwAAFm+93//7MsQDgAh4Z1G5gwABEY3y9x5iAuzlQAAAAAB2Wop4QsaAhgpWdRTKJsZcpp1XP57ykSikyYckLZ4Ty1TSs+HageepBZpVjXhgAMSIXXKmU65I0d/7dt7v7sNgMBwALVb09GkvHVk7fqBciIEitH44DchaeFCkbZVn3vi+3iz997uspO3MNCwv4nKHDdB/+gTro/8WA6oYAgMAeW//+zLEAwAIZH9bHaGAAQMgrTTxid9Ko07zWxQmamYZMUXJVhdXnyiL/VNVCqJJVOgImNStCjd9bH2ZjwZ/qQYUyG79QVWCpgKmMChqVd/4VIkkywFXa2uRpIAhLLU5m1VG6LimpHOKzIapjKZdQGJoCUbq7bMoVyt+j5W6t+WZ/r/KqPLMbv1Kxurf//8tBTuFZBUABV3GwiMDZuFj//swxAUCB4SDK0ywaICeAyN0wyROlYmGu6/rSDZ4E2kDhIFxZeHE1XJXBGqqqgLGqsZQ8m6ArsXr1fUvL1lChr+v/7fq//SC5HLZU2AEjwW0VUCig+dQNmTNmsUQ+tQt+EhX+skFfU3+n+u7/hV6TEFNRTMuOTkuNaqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",bC=XA(JA,AC),SC=BA.createLock(AC),EC=new QA,kC=!1,VC=function(){kC||(SC(),kC=!0)},wC=JA.decodeAudioData(bC.buffer,(function(e){null===EC.audioBufferProperty.value&&(EC.audioBufferProperty.set(e),VC())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),EC.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),VC()}));wC&&wC.then((function(e){null===EC.audioBufferProperty.value&&(EC.audioBufferProperty.set(e),VC())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),VC()}));var _C=new tS(EC,{soundClipOptions:{initialOutputLevel:.5},soundManagerOptions:{categoryName:"user-interface"}});KA.register("accordionBoxClosedSoundPlayer",_C);var CC=_C,xC="data:audio/mpeg;base64,//swxAAABsArNnTzABEnmTA3HoACAAIOAYznNNVnYDYAWAjClBSA3BwKB48VkSUAABBynBhYP5QMCc+T4JnwQcoH/6gff/Of/l4gAIJkjluslkskluuAAAkTmCV7K1w6pqz7VkryDnmQVVFCJY0HRFDgrNPT7QRsUHNV+KVNJRPtYt0/426/nj/Tv/sPVjjhtrzPbywAATqIdRsL//syxAOACHStW/2RACEMj6e2smAEqYAYhGmdJfGbQRJM6d5rUVhcXmZTOP9blIoBChWlL5hQoqBgpUdHqJ/1McBGpaGctDO3++hgIUqDV8QgqAAntdpnEwAD6ruLLBhIIEPkpGtP5xWnwVF2czcptv1Fgk0VRRGN9VJRU46pQrSVRX///853QKKZ0dz3cGnwCKBwcHYEIC0hEM5EMv/7MsQEAAiQXW+5hIAREZRslzKwACEMBgAAD9/MyuFW/l8vMAkS99TuX45zufo9JjH/gbUAtafz/MqCaqJP4IIAARGcawPpR8H3iefS7zg45qAIBFAAV1AtJXsx44xwqAZ24lKIsEc5bDMUuS6XnBEXQqAakxM3KX8vlruv28Pc++21X/p71t0ufET/PUOSB+v8FT3Fl3GALLrbdbr/+zLEA4AIWHtvuPWAEROSLXcegALRIIBAAAAIpME09Jpkm6HEpcYWjTFeQLCjn4NAjRM5fbfr4UULuXdO+HtlGqi0a/9EFQ66zxGCz/4GGlyg0HFHJZM7ZIAwEAAAErGUoi0JXI6UF+hiurPpjdxalUIbk1pRYWEUpY39w/BVt/p1i48ySduL+KRKEg8sPo/yoV/yLlIIpJIQSCOJ//swxAODxLAbO7xggDAAADSAAAAEweQCRznEiWHEqW49z3nuJf8Fbqzvw1+e6j3TPf/BakxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",PC=XA(JA,xC),TC=BA.createLock(xC),MC=new QA,LC=!1,IC=function(){LC||(TC(),LC=!0)},RC=JA.decodeAudioData(PC.buffer,(function(e){null===MC.audioBufferProperty.value&&(MC.audioBufferProperty.set(e),IC())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),MC.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),IC()}));RC&&RC.then((function(e){null===MC.audioBufferProperty.value&&(MC.audioBufferProperty.set(e),IC())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),IC()}));var DC=new tS(MC,{soundClipOptions:{initialOutputLevel:.5},soundManagerOptions:{categoryName:"user-interface"}});KA.register("accordionBoxOpenedSoundPlayer",DC);var NC=DC,qC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({titleNode:null,expandedProperty:null,resize:!0,cursor:"pointer",lineWidth:1,cornerRadius:10,stroke:"black",fill:"rgb( 238, 238, 238 )",minWidth:0,titleAlignX:"center",titleAlignY:"center",titleXMargin:10,titleYMargin:2,titleXSpacing:5,showTitleWhenExpanded:!0,titleBarExpandCollapse:!0,buttonAlign:"left",buttonXMargin:4,buttonYMargin:2,contentAlign:"center",contentXMargin:15,contentYMargin:8,contentXSpacing:5,contentYSpacing:8,expandedSoundPlayer:NC,collapsedSoundPlayer:CC,tagName:"div",headingTagName:"h3",accessibleNameBehavior:n.ACCORDION_BOX_ACCESSIBLE_NAME_BEHAVIOR,voicingNameResponse:null,voicingObjectResponse:null,voicingContextResponse:null,voicingHintResponse:null,tandem:xe.REQUIRED,tandemNameSuffix:"AccordionBox",phetioType:n.AccordionBoxIO,phetioEventType:ce.USER,visiblePropertyOptions:{phetioFeatured:!0}},i);a.titleBarOptions=k({fill:null,stroke:null},a.titleBarOptions),a.expandCollapseButtonOptions=k({sideLength:16,cursor:a.cursor,valueOnSoundPlayer:a.expandedSoundPlayer,valueOffSoundPlayer:a.collapsedSoundPlayer,voicingNameResponse:a.voicingNameResponse,voicingObjectResponse:a.voicingObjectResponse,voicingContextResponse:a.voicingContextResponse,voicingHintResponse:a.voicingHintResponse,tandem:a.tandem.createTandem("expandCollapseButton")},a.expandCollapseButtonOptions),(r=t.call(this))._contentAlign=a.contentAlign,r._contentNode=e,r._cornerRadius=a.cornerRadius,r._buttonXMargin=a.buttonXMargin,r._buttonYMargin=a.buttonYMargin,r._contentXMargin=a.contentXMargin,r._contentYMargin=a.contentYMargin,r._contentXSpacing=a.contentXSpacing,r._contentYSpacing=a.contentYSpacing,r._titleAlignX=a.titleAlignX,r._titleAlignY=a.titleAlignY,r._titleXMargin=a.titleXMargin,r._titleYMargin=a.titleYMargin,r._titleXSpacing=a.titleXSpacing,r._minWidth=a.minWidth,r._showTitleWhenExpanded=a.showTitleWhenExpanded,r._buttonAlign=a.buttonAlign,r.disposeEmitterAccordionBox=new Et,r.titleNode=a.titleNode,r.titleNode||(r.titleNode=new Xl("",{tandem:a.tandem.createTandem("titleText")}),r.disposeEmitterAccordionBox.addListener((function(){return r.titleNode.dispose()}))),r.titleNode.pickable=!1,r.expandedProperty=a.expandedProperty,r.expandedProperty||(r.expandedProperty=new pt(!0,{tandem:a.tandem.createTandem("expandedProperty")}),r.disposeEmitterAccordionBox.addListener((function(){return r.expandedProperty.dispose()}))),r.expandCollapseButton=new mE(r.expandedProperty,a.expandCollapseButtonOptions),r.disposeEmitterAccordionBox.addListener((function(){return r.expandCollapseButton.dispose()}));var s={fill:a.fill,cornerRadius:a.cornerRadius};r.expandedBox=new iu(s),r.collapsedBox=new iu(s),r.workaroundBox=new iu({fill:"transparent",pickable:!1}),r.expandedTitleBar=new OC(null,k({lineWidth:a.lineWidth,cursor:a.cursor},a.titleBarOptions)),r.disposeEmitterAccordionBox.addListener((function(){return r.expandedTitleBar.dispose()})),r.expandedBox.addChild(r.expandedTitleBar),r.collapsedTitleBar=new BC(k({cornerRadius:a.cornerRadius,cursor:a.cursor},a.titleBarOptions)),r.disposeEmitterAccordionBox.addListener((function(){return r.collapsedTitleBar.dispose()})),r.collapsedBox.addChild(r.collapsedTitleBar),a.titleBarExpandCollapse?r.collapsedTitleBar.addInputListener({down:function(){r.expandCollapseButton.isEnabled()&&(r.phetioStartEvent("expanded"),r.expandedProperty.value=!0,a.expandedSoundPlayer.play(),r.phetioEndEvent())}}):(r.expandedTitleBar.interactiveHighlight="invisible",r.collapsedTitleBar.interactiveHighlight="invisible"),a.showTitleWhenExpanded&&a.titleBarExpandCollapse&&r.expandedTitleBar.addInputListener({down:function(){r.expandCollapseButton.isEnabled()&&(r.phetioStartEvent("collapsed"),a.collapsedSoundPlayer.play(),r.expandedProperty.value=!1,r.phetioEndEvent())}});var o=function(){var e=r.expandCollapseButton.visible&&r.expandCollapseButton.pickable;r.collapsedTitleBar.pickable=e,r.expandedTitleBar.pickable=e};if(r.expandCollapseButton.visibleProperty.lazyLink(o),r.expandCollapseButton.pickableProperty.lazyLink(o),r.expandCollapseButton.enabledProperty.link((function(e){var t=a.titleBarExpandCollapse&&e;r.collapsedTitleBar.cursor=t&&a.cursor||null,r.expandedTitleBar.cursor=t&&a.cursor||null})),r.expandCollapseButton.setFocusHighlight(new nh(r.expandedTitleBar)),a.stroke){var l={stroke:a.stroke,lineWidth:a.lineWidth,cornerRadius:a.cornerRadius,pickable:!1};r.expandedBoxOutline=new iu(l),r.expandedBox.addChild(r.expandedBoxOutline),r.collapsedBoxOutline=new iu(l),r.collapsedBox.addChild(r.collapsedBoxOutline)}r.expandedBox.addChild(r._contentNode),r.containerNode=new jo,r.addChild(r.containerNode);var u=new jo({tagName:"div",ariaRole:"region",pdomOrder:[r._contentNode],ariaLabelledbyAssociations:[{otherNode:r.expandCollapseButton,otherElementName:Rh.PRIMARY_SIBLING,thisElementName:Rh.PRIMARY_SIBLING}]}),c=new jo({tagName:a.headingTagName,pdomOrder:[r.expandCollapseButton]}),h=new jo({children:[c,u]});if(r.addChild(h),r.layout(),a.resize){var d=r.layout.bind(_assertThisInitialized(r));e.boundsProperty.lazyLink(d),r.titleNode.boundsProperty.lazyLink(d),r.disposeEmitterAccordionBox.addListener((function(){e.boundsProperty.unlink(d),r.titleNode.boundsProperty.unlink(d)}))}var p=function(e){r.expandedBox.visible=e,r.collapsedBox.visible=!e,r.workaroundBox.rectBounds=(e?r.expandedBox:r.collapsedBox).bounds.dilated(10),r.titleNode.visible=e&&a.showTitleWhenExpanded||!e,h.setPDOMAttribute("aria-hidden",!e),r.expandCollapseButton.voicingSpeakFullResponse({hintResponse:null})};return r.expandedProperty.link(p),r.disposeEmitterAccordionBox.addListener((function(){return r.expandedProperty.unlink(p)})),r.mutate(_.omit(a,"cursor")),r.resetAccordionBox=function(){a.expandedProperty||r.expandedProperty.reset()},r}return _createClass(n,[{key:"dispose",value:function(){this.disposeEmitterAccordionBox.emit(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"reset",value:function(){this.resetAccordionBox()}},{key:"layout",value:function(){var e=this._contentNode.bounds.isValid();if(this.containerNode.children=e?[this.expandedBox,this.collapsedBox,this.workaroundBox,this.titleNode,this.expandCollapseButton]:[],e){var t=this.getCollapsedBoxHeight(),n=this.getBoxWidth(),i=this.getExpandedBoxHeight();this.expandedBox.rectWidth=n,this.expandedBox.rectHeight=i;var r=this.expandedBox.selfBounds;this.expandedBoxOutline&&(this.expandedBoxOutline.rectWidth=n,this.expandedBoxOutline.rectHeight=i),this.expandedTitleBar.shape=this.getTitleBarShape(),this.collapsedBox.rectWidth=n,this.collapsedBox.rectHeight=t,this.workaroundBox.localBounds=this.collapsedBox.bounds,this.collapsedTitleBar.rectWidth=n,this.collapsedTitleBar.rectHeight=t,this.collapsedBoxOutline&&(this.collapsedBoxOutline.rectWidth=n,this.collapsedBoxOutline.rectHeight=t),this._contentNode.bottom=r.bottom-this._contentYMargin;var a=r.left+this._contentXMargin,s=r.right-this._contentXMargin;this._showTitleWhenExpanded||("left"===this._buttonAlign?a+=this.expandCollapseButton.width+this._contentXSpacing:s-=this.expandCollapseButton.width+this._contentXSpacing),"left"===this._contentAlign?this._contentNode.left=a:"right"===this._contentAlign?this._contentNode.right=s:this._contentNode.centerX=(a+s)/2;var o=r.left+this._titleXMargin,l=r.right-this._titleXMargin;"left"===this._buttonAlign?(this.expandCollapseButton.left=r.left+this._buttonXMargin,o=this.expandCollapseButton.right+this._titleXSpacing):(this.expandCollapseButton.right=r.right-this._buttonXMargin,l=this.expandCollapseButton.left-this._titleXSpacing),"left"===this._titleAlignX?this.titleNode.left=o:"right"===this._titleAlignX?this.titleNode.right=l:this.titleNode.centerX=r.centerX,"top"===this._titleAlignY?(this.expandCollapseButton.top=this.collapsedBox.top+Math.max(this._buttonYMargin,this._titleYMargin),this.titleNode.top=this.expandCollapseButton.top):(this.expandCollapseButton.centerY=this.collapsedBox.centerY,this.titleNode.centerY=this.expandCollapseButton.centerY)}}},{key:"getTitleBarShape",value:function(){return Ni.roundedRectangleWithRadii(0,0,this.getBoxWidth(),this.getCollapsedBoxHeight(),{topLeft:this._cornerRadius,topRight:this._cornerRadius})}},{key:"getBoxWidth",value:function(){var e=Math.max(this._minWidth,this._buttonXMargin+this.expandCollapseButton.width+this._titleXSpacing+this.titleNode.width+this._titleXMargin);return"center"===this._titleAlignX&&(e=Math.max(e,2*(this._buttonXMargin+this.expandCollapseButton.width+this._titleXSpacing)+this.titleNode.width),e=Math.max(e,2*this._titleXMargin+this.titleNode.width)),this._showTitleWhenExpanded?Math.max(e,this._contentNode.width+2*this._contentXMargin):Math.max(e,this.expandCollapseButton.width+this._contentNode.width+this._buttonXMargin+this._contentXMargin+this._contentXSpacing)}},{key:"getCollapsedBoxHeight",value:function(){return Math.max(this.expandCollapseButton.height+2*this._buttonYMargin,this.titleNode.height+2*this._titleYMargin)}},{key:"getExpandedBoxHeight",value:function(){return this._showTitleWhenExpanded?this.getCollapsedBoxHeight()+this._contentNode.height+this._contentYMargin+this._contentYSpacing:Math.max(this.expandCollapseButton.height+2*this._buttonYMargin,this._contentNode.height+2*this._contentYMargin)}}]),n}(jo);_defineProperty(qC,"ACCORDION_BOX_ACCESSIBLE_NAME_BEHAVIOR",(function(e,t,n,i){return i.push((function(){e.expandCollapseButton.accessibleName=n})),t}));var OC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(Ku(Hl)),BC=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(Ku(iu));qC.AccordionBoxIO=new U("AccordionBoxIO",{valueType:qC,supertype:jo.NodeIO,events:["expanded","collapsed"]}),nA.register("AccordionBox",qC);var GC=new c("twixt"),HC=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"value",value:function(e){throw new Error("Unimplemented easing value")}},{key:"derivative",value:function(e){throw new Error("Unimplemented easing derivative")}},{key:"secondDerivative",value:function(e){throw new Error("Unimplemented easing secondDerivative")}}],[{key:"polynomialEaseInValue",value:function(e,t){return Math.pow(t,e)}},{key:"polynomialEaseOutValue",value:function(e,t){return 1-Math.pow(1-t,e)}},{key:"polynomialEaseInOutValue",value:function(t,n){return n<=.5?.5*Math.pow(2*n,t):1-e.polynomialEaseInOutValue(t,1-n)}},{key:"polynomialEaseInDerivative",value:function(e,t){return e*Math.pow(t,e-1)}},{key:"polynomialEaseOutDerivative",value:function(e,t){return e*Math.pow(1-t,e-1)}},{key:"polynomialEaseInOutDerivative",value:function(t,n){return n<=.5?Math.pow(2,t-1)*t*Math.pow(n,t-1):e.polynomialEaseInOutDerivative(t,1-n)}},{key:"polynomialEaseInSecondDerivative",value:function(e,t){return(e-1)*e*Math.pow(t,e-2)}},{key:"polynomialEaseOutSecondDerivative",value:function(e,t){return-(e-1)*e*Math.pow(1-t,e-2)}},{key:"polynomialEaseInOutSecondDerivative",value:function(t,n){return n<=.5?Math.pow(2,t-1)*(t-1)*t*Math.pow(n,t-2):-e.polynomialEaseInOutSecondDerivative(t,1-n)}},{key:"polynomialEaseIn",value:function(t){var n=new e;return n.value=e.polynomialEaseInValue.bind(n,t),n.derivative=e.polynomialEaseInDerivative.bind(n,t),n.secondDerivative=e.polynomialEaseInSecondDerivative.bind(n,t),n}},{key:"polynomialEaseOut",value:function(t){var n=new e;return n.value=e.polynomialEaseOutValue.bind(n,t),n.derivative=e.polynomialEaseOutDerivative.bind(n,t),n.secondDerivative=e.polynomialEaseOutSecondDerivative.bind(n,t),n}},{key:"polynomialEaseInOut",value:function(t){var n=new e;return n.value=e.polynomialEaseInOutValue.bind(n,t),n.derivative=e.polynomialEaseInOutDerivative.bind(n,t),n.secondDerivative=e.polynomialEaseInOutSecondDerivative.bind(n,t),n}}]),e}();HC.LINEAR=HC.polynomialEaseIn(1),HC.QUADRATIC_IN=HC.polynomialEaseIn(2),HC.QUADRATIC_OUT=HC.polynomialEaseOut(2),HC.QUADRATIC_IN_OUT=HC.polynomialEaseInOut(2),HC.CUBIC_IN=HC.polynomialEaseIn(3),HC.CUBIC_OUT=HC.polynomialEaseOut(3),HC.CUBIC_IN_OUT=HC.polynomialEaseInOut(3),HC.QUARTIC_IN=HC.polynomialEaseIn(4),HC.QUARTIC_OUT=HC.polynomialEaseOut(4),HC.QUARTIC_IN_OUT=HC.polynomialEaseInOut(4),HC.QUINTIC_IN=HC.polynomialEaseIn(5),HC.QUINTIC_OUT=HC.polynomialEaseOut(5),HC.QUINTIC_IN_OUT=HC.polynomialEaseInOut(5),GC.register("Easing",HC);var FC=HC,YC=function(){function e(t){_classCallCheck(this,e),(t=A({setValue:null,getValue:null,property:null,object:null,attribute:null,to:null,delta:null,speed:null,from:null,easing:FC.CUBIC_IN_OUT,blend:e.DEFAULT_BLEND,distance:e.DEFAULT_DISTANCE,add:e.DEFAULT_ADD},t)).object&&(t.setValue=e.OBJECT_SET(t.object,t.attribute),t.getValue=e.OBJECT_GET(t.object,t.attribute)),t.property&&(t.setValue=e.PROPERTY_SET(t.property),t.getValue=e.PROPERTY_GET(t.property)),this.getValue=t.getValue,this.setValue=t.setValue,this.easing=t.easing,this.from=t.from,this.to=t.to,this.delta=t.delta,this.speed=t.speed,this.blend=t.blend,this.distance=t.distance,this.add=t.add,this.startingValue=null,this.endingValue=null}return _createClass(e,[{key:"computeStartEnd",value:function(){this.startingValue=null!==this.from?this.from:this.getValue(),this.endingValue=null!==this.to?this.to:this.add(this.startingValue,this.delta)}},{key:"update",value:function(e){this.setValue(this.blend(this.startingValue,this.endingValue,this.easing.value(e)))}},{key:"hasPreferredDuration",value:function(){return null!==this.speed}},{key:"getPreferredDuration",value:function(){return null===this.speed?null:this.speed*this.distance(this.startingValue,this.delta)}}],[{key:"DEFAULT_BLEND",value:function(e,t,n){if(0===n)return e;if(1===n)return t;if("number"==typeof e&&"number"==typeof t)return e+(t-e)*n;if("object"===_typeof(e)&&"object"===_typeof(t)&&"function"==typeof e.blend)return e.blend(t,n);throw new Error("Blending not supported for: ".concat(e,", ").concat(t,", pass in a blend option"))}},{key:"DEFAULT_DISTANCE",value:function(e,t){if("number"==typeof e&&"number"==typeof t)return Math.abs(e-t);if("object"===_typeof(e)&&"object"===_typeof(t)&&"function"==typeof e.distance)return e.distance(t);throw new Error("Distance (required for speed) by default not supported for: ".concat(e,", ").concat(t,", pass in a distance option"))}},{key:"DEFAULT_ADD",value:function(e,t){if("number"==typeof e&&"number"==typeof t)return e+t;if("object"===_typeof(e)&&"object"===_typeof(t)&&"function"==typeof e.plus)return e.plus(t);throw new Error("Addition (required for delta) by default not supported for: ".concat(e,", ").concat(t,", pass in an add option"))}},{key:"OBJECT_SET",value:function(e,t){return function(n){e[t]=n}}},{key:"OBJECT_GET",value:function(e,t){return function(){return e[t]}}},{key:"PROPERTY_SET",value:function(e){return function(t){e.value=t}}},{key:"PROPERTY_GET",value:function(e){return function(){return e.value}}}]),e}();GC.register("AnimationTarget",YC);var zC=YC,UC=function(){function e(t){if(_classCallCheck(this,e),t=A({targets:null,duration:null,delay:0,stepEmitter:mt},t),this.targets=_.map(null===t.targets?[t]:t.targets,(function(e){return new zC(e)})),this.duration=t.duration,this.delay=t.delay,this.length=0,this.remainingDelay=0,this.remainingAnimation=0,this.runningProperty=new pt(!1),this.animatingProperty=new pt(!1),this.startEmitter=new Et,this.beginEmitter=new Et,this.finishEmitter=new Et({parameters:[{valueType:"number"}]}),this.stopEmitter=new Et,this.endedEmitter=new Et,this.updateEmitter=new Et,t.stepEmitter){var n=this.step.bind(this);this.runningProperty.link((function(e){e&&!t.stepEmitter.hasListener(n)?t.stepEmitter.addListener(n):!e&&t.stepEmitter.hasListener(n)&&t.stepEmitter.removeListener(n)}))}}return _createClass(e,[{key:"start",value:function(e){return this.runningProperty.value||(this.remainingDelay=this.delay,this.runningProperty.value=!0,this.startEmitter.emit(),this.step(void 0!==e?e:0)),this}},{key:"stop",value:function(){return this.runningProperty.value?(this.runningProperty.value=!1,this.stopEmitter.emit(),this.endedEmitter.emit(),this):this}},{key:"step",value:function(e){if(!this.runningProperty.value)return this;if(!this.animatingProperty.value){if(this.remainingDelay-=e,e=-this.remainingDelay,this.remainingDelay>0)return this;this.length=this.duration;for(var t=0;t<this.targets.length;t++){var n=this.targets[t];n.computeStartEnd(),null===this.length&&(this.length=n.getPreferredDuration())}this.remainingAnimation=this.length,this.animatingProperty.value=!0,this.beginEmitter.emit()}this.remainingAnimation-=e,e=-this.remainingAnimation;for(var i=this.length>0?En.clamp((this.length-this.remainingAnimation)/this.length,0,1):1,r=0;r<this.targets.length;r++)this.targets[r].update(i);return this.updateEmitter.emit(),1===i&&(this.animatingProperty.value=!1,this.runningProperty.value=!1,this.finishEmitter.emit(e),this.endedEmitter.emit()),this}},{key:"then",value:function(e){return this.finishEmitter.addListener((function(t){return e.start(t)})),e}}]),e}();GC.register("Animation",UC);var WC=UC,jC=new ms(20,7),XC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({orientation:"horizontal",fill:"white",stroke:"black",lineWidth:1,cornerRadius:4,defaultPageNumber:0,itemsPerPage:4,spacing:10,margin:10,buttonColor:"rgba( 200, 200, 200, 0.5 )",buttonStroke:"derived",buttonDisabledColor:IS.LIGHT_GRAY,buttonLineWidth:1,arrowSize:jC,arrowStroke:"black",arrowLineWidth:3,hideDisabledButtons:!1,buttonSoundPlayer:xS,buttonTouchAreaXDilation:0,buttonTouchAreaYDilation:0,buttonMouseAreaXDilation:0,buttonMouseAreaYDilation:0,separatorsVisible:!1,separatorColor:"rgb( 180, 180, 180 )",separatorLineWidth:.5,animationEnabled:!0,animationDuration:.4,stepEmitter:mt,tandem:xe.OPTIONAL,visiblePropertyOptions:{phetioFeatured:!0}},i),s="horizontal"===a.orientation,o=_.maxBy(e,(function(e){return e.width})).width,l=_.maxBy(e,(function(e){return e.height})).height,u=s?o:l,c={xMargin:5,yMargin:5,cornerRadius:a.cornerRadius,baseColor:a.buttonColor,disabledColor:a.buttonDisabledColor,stroke:"derived"===a.buttonStroke?void 0:a.buttonStroke,lineWidth:a.buttonLineWidth,minWidth:s?0:o+2*a.margin,minHeight:s?l+2*a.margin:0,arrowSize:a.arrowSize,arrowStroke:a.arrowStroke,arrowLineWidth:a.arrowLineWidth,touchAreaXDilation:a.buttonTouchAreaXDilation,touchAreaYDilation:a.buttonTouchAreaYDilation,mouseAreaXDilation:a.buttonMouseAreaXDilation,mouseAreaYDilation:a.buttonMouseAreaYDilation,soundPlayer:a.buttonSoundPlayer,enabledPropertyOptions:{phetioReadOnly:!0,phetioFeatured:!1}},h=new B_(k({arrowDirection:s?"right":"down",tandem:a.tandem.createTandem("nextButton")},c)),d=new B_(k({arrowDirection:s?"left":"up",tandem:a.tandem.createTandem("previousButton")},c)),p=a.separatorsVisible?e.length-1:0,f=e.length*(u+a.spacing)+p*a.spacing+a.spacing,m=s?f:o+2*a.margin,g=s?l+2*a.margin:f,y=a.spacing+u/2,v={stroke:a.separatorColor,lineWidth:a.separatorLineWidth};(r=t.call(this)).animationEnabled=a.animationEnabled;var b=new iu(0,0,m,g);e.forEach((function(e){var t;(s?(e.centerX=y,e.centerY=a.margin+l/2):(e.centerX=a.margin+o/2,e.centerY=y),b.addChild(e),y+=a.spacing+u,a.separatorsVisible)&&(s?(t=new Sp(k({preferredHeight:g,centerX:e.centerX+u/2+a.spacing,centerY:e.centerY},v)),b.addChild(t),y=t.centerX+a.spacing+u/2):(t=new Ep(k({preferredWidth:m,centerX:e.centerX,centerY:e.centerY+u/2+a.spacing},v)),b.addChild(t),y=t.centerY+a.spacing+u/2))}));var E=a.itemsPerPage*(u+a.spacing);a.separatorsVisible&&(E+=a.itemsPerPage*a.spacing);var V=E+a.spacing;a.separatorsVisible&&(V-=a.spacing);var w=s?V:b.width,C=s?b.height:V,x=s?Ni.rectangle(a.spacing/2,0,w-a.spacing,C):Ni.rectangle(0,a.spacing/2,w,C-a.spacing),P=new jo({children:[b],clipArea:x});r.backgroundWidth=s?w+h.width+d.width:w,r.backgroundHeight=s?C:C+h.height+d.height;var T=new iu(0,0,r.backgroundWidth,r.backgroundHeight,a.cornerRadius,a.cornerRadius,{fill:a.fill}),M=new iu(0,0,r.backgroundWidth,r.backgroundHeight,a.cornerRadius,a.cornerRadius,{stroke:a.stroke,pickable:!1});s?(h.centerY=d.centerY=P.centerY=T.centerY,h.right=T.right,d.left=T.left,P.centerX=T.centerX):(h.centerX=d.centerX=P.centerX=T.centerX,h.bottom=T.bottom,d.top=T.top,P.centerY=T.centerY);var L=e.length/a.itemsPerPage;Number.isInteger(L)||(L=Math.floor(L+1));var I=new Nt(a.defaultPageNumber,{tandem:a.tandem.createTandem("pageNumberProperty"),numberType:"Integer",validValues:_.range(L),phetioFeatured:!0}),R=null,D=function(e){if(h.enabled=e<L-1,d.enabled=e>0,a.hideDisabledButtons&&(h.visible=h.enabled,d.visible=d.enabled),R&&R.stop(),r.animationEnabled&&!phet.joist.sim.isSettingPhetioStateProperty.value){var t={duration:a.animationDuration,stepEmitter:a.stepEmitter,easing:FC.CUBIC_IN_OUT};t=A(s?{getValue:function(){return b.left},setValue:function(e){b.left=e},to:-e*E}:{getValue:function(){return b.top},setValue:function(e){b.top=e},to:-e*E},t),(R=new WC(t)).start()}else s?b.left=-e*E:b.top=-e*E};return I.link(D),h.addListener((function(){return I.set(I.get()+1)})),d.addListener((function(){return I.set(I.get()-1)})),r.items=e,r.itemsPerPage=a.itemsPerPage,r.numberOfPages=L,r.pageNumberProperty=I,a.children=[T,P,h,d,M],r.disposeCarousel=function(){I.unlink(D)},r.mutate(a),r}return _createClass(n,[{key:"dispose",value:function(){this.disposeCarousel(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.animationEnabled;this.animationEnabled=e,this.pageNumberProperty.reset(),this.animationEnabled=t}},{key:"scrollToItemIndex",value:function(e){this.pageNumberProperty.set(this.itemIndexToPageNumber(e))}},{key:"scrollToItem",value:function(e){this.scrollToItemIndex(this.items.indexOf(e))}},{key:"isItemVisible",value:function(e){var t=this.items.indexOf(e);return this.pageNumberProperty.get()===this.itemIndexToPageNumber(t)}},{key:"itemIndexToPageNumber",value:function(e){return Math.floor(e/this.itemsPerPage)}}]),n}(jo);nA.register("Carousel",XC);var QC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({stroke:"rgb( 100, 100, 100 )"},i);return t.call(this,0,0,0,e,r)}return _createClass(n)}(tu);nA.register("VSeparatorDeprecated",QC);var KC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({cursor:"pointer",align:"left",xMargin:6,highlightFill:"rgb( 245, 245, 245 )",highlightCornerRadius:4,tagName:"li",focusable:!0,ariaRole:"option",positionInPDOM:!0,voicingFocusListener:function(){return s.comboBoxListItemNodeVoicingFocusListener()},comboBoxVoicingNameResponsePattern:g_.VALUE_NAMED_PLACEHOLDER,tandem:xe.REQUIRED,tandemNameSuffix:"Item",phetioType:My,phetioState:!0,visiblePropertyOptions:{phetioFeatured:!0}},a);o.comboBoxVoicingNameResponsePattern=o.comboBoxVoicingNameResponsePattern.get?o.comboBoxVoicingNameResponsePattern.get():o.comboBoxVoicingNameResponsePattern,o.innerContent=e.a11yLabel||null,o.voicingObjectResponse=e.a11yLabel||null,o.voicingNameResponse=ic.fillIn(o.comboBoxVoicingNameResponsePattern,{value:e.a11yLabel});var l=new iu({cornerRadius:o.highlightCornerRadius}),u=new jo({children:[e.node]});i.link((function(e){l.rectWidth=e,u.maxWidth=e})),r.link((function(e){l.rectHeight=e,u.maxHeight=e}));var c=function(){"left"===o.align?u.left=l.left+o.xMargin:"right"===o.align?u.right=l.right-o.xMargin:u.centerX=l.centerX,u.centerY=l.centerY};return u.boundsProperty.lazyLink(c),c(),o.children=[l,u],(s=t.call(this,o))._supplyOpenResponseOnNextFocus=!1,s.item=e,s.localBoundsProperty.link((function(e){s.focusHighlight=Ni.bounds(e)})),s.addInputListener({enter:function(){l.fill=o.highlightFill},exit:function(){l.fill=null}}),s}return _createClass(n,[{key:"supplyOpenResponseOnNextFocus",value:function(){this._supplyOpenResponseOnNextFocus=!0}},{key:"comboBoxListItemNodeVoicingFocusListener",value:function(){this.voicingSpeakFullResponse({nameResponse:this._supplyOpenResponseOnNextFocus?this.voicingNameResponse:null,objectResponse:this._supplyOpenResponseOnNextFocus?null:this.voicingObjectResponse,contextResponse:null,hintResponse:this._supplyOpenResponseOnNextFocus?this.voicingHintResponse:null}),this._supplyOpenResponseOnNextFocus=!1}}]),n}(Hc(jo));nA.register("ComboBoxListItemNode",KC);var JC=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o,l){var u;_classCallCheck(this,n);var c=S()({highlightFill:"rgb( 245, 245, 245 )",comboBoxListItemNodeOptions:{},xMargin:12,yMargin:8,backgroundPickable:!0,tagName:"ul",ariaRole:"listbox",groupFocusHighlight:!0,focusable:!0,openedSoundPlayer:qk,closedNoChangeSoundPlayer:xk,visiblePropertyOptions:{phetioReadOnly:!0}},l),h=new zu((function(t){var n=e.value,i=t.currentTarget;a(),e.value=i.item.value,r(),u.voiceOnNewSelection(e.value,n,i),t.abort()}),{parameters:[{phetioPrivate:!0,valueType:ed}],tandem:o.createTandem("fireAction"),phetioEventType:ce.USER}),d={up:function(e){h.execute(e)},keyup:function(e){e.domEvent&&xa.isAnyKeyEvent(e.domEvent,[xa.KEY_ENTER,xa.KEY_SPACE])&&h.execute(e)},click:function(e){h.execute(e)}},p=ex.getMaxItemWidthProperty(i),f=ex.getMaxItemHeightProperty(i),m=new Ut([p],(function(e){return e+c.xMargin})),g=new Ut([f],(function(e){return e+c.yMargin})),y=[];i.forEach((function(e,t){var n=new KC(e,m,g,k({align:c.align,highlightFill:c.highlightFill,highlightCornerRadius:c.cornerRadius,xMargin:.5*c.xMargin,tandem:e.tandemName?o.createTandem(e.tandemName):xe.OPTIONAL},c.comboBoxListItemNodeOptions));y.push(n),n.addInputListener(d)}));var v,A=new gf({spacing:0,excludeInvisibleChildrenFromBounds:!0,children:y});(u=t.call(this,A,k({},c,{xMargin:c.xMargin/2,yMargin:c.yMargin/2}))).voiceOnSelectionNode=s;var b=i.map((function(e){return e.soundPlayer?e.soundPlayer:Bb.getSelectionSoundPlayer(i.indexOf(e))}));return u.visibleProperty.lazyLink((function(t){if(t)c.openedSoundPlayer.play(),v=e.value;else if(v===e.value)c.closedNoChangeSoundPlayer.play();else{var n=i.findIndex((function(t){return t.value===e.value}));b[n].play()}})),u.addInputListener({focus:function(){if(u.visible){var t=u.getListItemNode(e.value);t.supplyOpenResponseOnNextFocus(),t.focus()}},keydown:function(e){if(e.domEvent&&xa.isAnyKeyEvent(e.domEvent,[xa.KEY_ESCAPE,xa.KEY_TAB]))r(),a();else if(e.domEvent&&xa.isAnyKeyEvent(e.domEvent,[xa.KEY_DOWN_ARROW,xa.KEY_UP_ARROW])){e.domEvent.preventDefault();var t=xa.isKeyEvent(e.domEvent,xa.KEY_DOWN_ARROW)?1:-1,n=u.visibleListItemNodes.indexOf(u.getFocusedItemNode()),i=n+t;u.visibleListItemNodes[i]&&u.visibleListItemNodes[i].focus(),e.pointer.reserveForKeyboardDrag()}else e.domEvent&&xa.isKeyEvent(e.domEvent,xa.KEY_HOME)?u.visibleListItemNodes[0].focus():e.domEvent&&xa.isKeyEvent(e.domEvent,xa.KEY_END)&&u.visibleListItemNodes[u.visibleListItemNodes.length-1].focus()}}),u.listItemNodes=y,u.visibleListItemNodes=y.slice(),u.disposeComboBoxListBox=function(){for(var e=0;e<y.length;e++)y[e].dispose();h.dispose(),p.dispose(),f.dispose()},u}return _createClass(n,[{key:"dispose",value:function(){this.disposeComboBoxListBox(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"setItemVisible",value:function(e,t){this.getListItemNode(e).visible=t,this.visibleListItemNodes=_.filter(this.listItemNodes,(function(e){return e.visible}))}},{key:"isItemVisible",value:function(e){return this.getListItemNode(e).visible}},{key:"getListItemNode",value:function(e){var t=_.find(this.listItemNodes,(function(t){return t.item.value===e}));return t}},{key:"getFocusedItemNode",value:function(){var e=_.find(this.listItemNodes,(function(e){return e.focused}));return e}},{key:"voiceOnNewSelection",value:function(e,t,n){var i={nameResponse:n.voicingNameResponse,objectResponse:null,contextResponse:n.voicingContextResponse,hintResponse:null};t===e&&(i.contextResponse=null),this.voiceOnSelectionNode.voicingSpeakResponse(i)}}]),n}(rA);nA.register("ComboBoxListBox",JC);var ZC=function(e,t,n,i){return i.push((function(){e.button.accessibleName=n})),t},$C=function(e,t,n,i){return i.push((function(){e.button.helpText=n})),t},ex=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({align:"left",listPosition:"below",labelNode:null,labelXSpacing:10,disabledOpacity:.5,cornerRadius:4,highlightFill:"rgb( 245, 245, 245 )",xMargin:12,yMargin:8,buttonFill:"white",buttonStroke:"black",buttonLineWidth:1,buttonTouchAreaXDilation:0,buttonTouchAreaYDilation:0,buttonMouseAreaXDilation:0,buttonMouseAreaYDilation:0,listFill:"white",listStroke:"black",listLineWidth:1,openedSoundPlayer:qk,closedNoChangeSoundPlayer:xk,tagName:"div",accessibleNameBehavior:ZC,helpTextBehavior:$C,comboBoxVoicingNameResponsePattern:g_.VALUE_NAMED_PLACEHOLDER,comboBoxVoicingContextResponse:null,comboBoxVoicingHintResponse:null,tandem:xe.REQUIRED,tandemNameSuffix:"ComboBox",phetioType:n.ComboBoxIO,phetioEventType:ce.USER,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},a);(s=t.call(this)).listPosition=o.listPosition,null!==o.labelNode&&s.addChild(o.labelNode);var l=o.labelNode?new Ut([s.localPreferredWidthProperty,o.labelNode.boundsProperty],(function(e,t){return null===e?null:e-t.width-o.labelXSpacing}),{reentrant:!0}):s.localPreferredWidthProperty,u=s.localMinimumWidthProperty,c=null;return o.labelNode&&(u=new st(null),c=nn.lazyMultilink([u,o.labelNode.boundsProperty],(function(e,t){s.localMinimumWidth=null===e?null:e+o.labelXSpacing+t.width}))),s.button=new nx(e,i,{align:o.align,arrowDirection:"below"===o.listPosition?"down":"up",cornerRadius:o.cornerRadius,xMargin:o.xMargin,yMargin:o.yMargin,baseColor:o.buttonFill,stroke:o.buttonStroke,lineWidth:o.buttonLineWidth,touchAreaXDilation:o.buttonTouchAreaXDilation,touchAreaYDilation:o.buttonTouchAreaYDilation,mouseAreaXDilation:o.buttonMouseAreaXDilation,mouseAreaYDilation:o.buttonMouseAreaYDilation,localPreferredWidthProperty:l,localMinimumWidthProperty:u,comboBoxVoicingNameResponsePattern:o.comboBoxVoicingNameResponsePattern,tandem:o.tandem.createTandem("button")}),s.addChild(s.button),o.labelNode&&of.create(_assertThisInitialized(s),[s.button,o.labelNode],(function(e,t){e.left=t.right+o.labelXSpacing,e.centerY=t.centerY})),s.listBox=new JC(e,i,s.hideListBox.bind(_assertThisInitialized(s)),(function(){s.button.blockNextVoicingFocusListener(),s.button.focus()}),s.button,o.tandem.createTandem("listBox"),{align:o.align,highlightFill:o.highlightFill,xMargin:o.xMargin,yMargin:o.yMargin,cornerRadius:o.cornerRadius,fill:o.listFill,stroke:o.listStroke,lineWidth:o.listLineWidth,visible:!1,comboBoxListItemNodeOptions:{comboBoxVoicingNameResponsePattern:o.comboBoxVoicingNameResponsePattern,voicingContextResponse:o.comboBoxVoicingContextResponse,voicingHintResponse:o.comboBoxVoicingHintResponse},openedSoundPlayer:o.openedSoundPlayer,closedNoChangeSoundPlayer:o.closedNoChangeSoundPlayer,ariaLabelledbyAssociations:[{otherNode:s.button,otherElementName:Rh.LABEL_SIBLING,thisElementName:Rh.PRIMARY_SIBLING}]}),r.addChild(s.listBox),s.listParent=r,s.opacityProperty.link((function(e){s.listBox.opacityProperty.value=e})),s.mutate(o),s.button.addListener((function(){s.listBox.visibleProperty.value=!s.listBox.visibleProperty.value,s.listBox.visibleProperty.value&&s.listBox.focus()})),s.display=null,s.clickToDismissListener={down:function(e){(!phet.chipper.isFuzzEnabled()||Nh.nextDouble()<.005)&&(e.trail.containsNode(s.button)||e.trail.containsNode(s.listBox)||s.hideListBox())}},s.dismissWithFocusListener=function(e){e&&!e.trail.containsNode(s.listBox)&&s.hideListBox()},Wc.pdomFocusProperty.link(s.dismissWithFocusListener),s.listBox.localBoundsProperty.lazyLink((function(){return s.moveListBox()})),s.listBox.visibleProperty.link((function(e){e?(s.scaleListBox(),s.listBox.moveToFront(),s.moveListBox(),s.display=s.getUniqueTrail().rootNode().getRootedDisplays()[0],s.display.addInputListener(s.clickToDismissListener)):s.display&&s.display.hasInputListener(s.clickToDismissListener)&&(s.display.removeInputListener(s.clickToDismissListener),s.display=null)})),s.displayOnlyProperty=new pt(!1,{tandem:o.tandem.createTandem("displayOnlyProperty"),phetioFeatured:!0,phetioDocumentation:"disables interaction with the ComboBox and makes it appear like a display that shows the current selection"}),s.displayOnlyProperty.link((function(e){s.hideListBox(),s.button.setDisplayOnly(e),s.pickable=!e})),s.addLinkedElement(e,{tandem:o.tandem.createTandem("property")}),s.disposeComboBox=function(){s.display&&s.display.hasInputListener(s.clickToDismissListener)&&s.display.removeInputListener(s.clickToDismissListener),Wc.pdomFocusProperty.unlink(s.dismissWithFocusListener),s.displayOnlyProperty.dispose(),s.listBox.dispose(),s.button.dispose(),o.labelNode&&(l.dispose(),u.dispose(),c&&c.dispose())},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeComboBox(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"showListBox",value:function(){this.listBox.visibleProperty.value=!0}},{key:"hideListBox",value:function(){this.listBox.visibleProperty.value=!1}},{key:"scaleListBox",value:function(){if(!this.listBox.localBounds.isEmpty()){var e=this.button.localToGlobalBounds(this.button.localBounds).width/this.button.localBounds.width,t=this.listBox.localToGlobalBounds(this.listBox.localBounds).width/this.listBox.localBounds.width;this.listBox.scale(e/t)}}},{key:"moveListBox",value:function(){if("above"===this.listPosition){var e=this.localToGlobalPoint(new pn(this.button.left,this.button.top)),t=this.listParent.globalToLocalPoint(e);this.listBox.left=t.x,this.listBox.bottom=t.y}else{var n=this.localToGlobalPoint(new pn(this.button.left,this.button.bottom)),i=this.listParent.globalToLocalPoint(n);this.listBox.left=i.x,this.listBox.top=i.y}}},{key:"setItemVisible",value:function(e,t){this.listBox.setItemVisible(e,t)}},{key:"isItemVisible",value:function(e){return this.listBox.isItemVisible(e)}}],[{key:"getMaxItemWidthProperty",value:function(e){var t=_.flatten(e.map((function(e){var t=[e.node.boundsProperty];return ll(e.node)&&(t.push(e.node.isWidthResizableProperty),t.push(e.node.minimumWidthProperty)),t})));return new Ut(t,(function(){return Math.max.apply(Math,_toConsumableArray(e.map((function(e){return ol(e.node)?e.node.minimumWidth||0:e.node.width}))))}))}},{key:"getMaxItemHeightProperty",value:function(e){var t=e.map((function(e){return e.node.boundsProperty}));return new Ut(t,(function(){return Math.max.apply(Math,_toConsumableArray(e.map((function(e){return e.node.height}))))}))}}]),n}(ul(jo));_defineProperty(ex,"ITEM_TANDEM_NAME_SUFFIX","Item"),_defineProperty(ex,"ComboBoxIO",new U("ComboBoxIO",{valueType:ex,documentation:"A combo box is composed of a push button and a listbox. The listbox contains items that represent choices. Pressing the button pops up the listbox. Selecting from an item in the listbox sets the value of an associated Property. The button shows the item that is currently selected.",supertype:jo.NodeIO,events:["listBoxShown","listBoxHidden"]})),nA.register("ComboBox",ex);var tx=function(e,t,n){return t.labelTagName="span",t.labelContent=n,t},nx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({align:"left",arrowDirection:"down",arrowFill:"black",comboBoxVoicingNameResponsePattern:g_.VALUE_NAMED_PLACEHOLDER,cursor:"pointer",baseColor:"white",buttonAppearanceStrategy:NS.FlatAppearanceStrategy,xMargin:12,yMargin:8,stroke:"black",lineWidth:1,soundPlayer:Bk,enabledPropertyOptions:{phetioFeatured:!1},visiblePropertyOptions:{phetioFeatured:!1},localPreferredWidthProperty:new st(null),localMinimumWidthProperty:new st(null),tandem:xe.OPTIONAL,containerTagName:"div",accessibleNameBehavior:tx},r),o=s.xMargin,l=s.yMargin,u=ex.getMaxItemWidthProperty(i),c=ex.getMaxItemHeightProperty(i),h=new Hl(null,{fill:s.arrowFill}),d=new jo({layoutOptions:{yMargin:l,grow:1,xAlign:s.align},children:[_.find(i,(function(t){return t.value===e.value})).node]}),p=new QC(0,{stroke:"black",lineWidth:s.lineWidth});s.content=new af({rows:[[d,p,h]]}),nn.multilink([u,c],(function(e,t){var n,i,r,a=t+2*l,u=a,c=.35*u,f=2*c*Math.sqrt(3)/3,m=o,g=o-s.lineWidth/2,y=-s.lineWidth/2;h.shape=(n=s.arrowDirection,i=f,r=c,"up"===n?(new Ni).moveTo(0,r).lineTo(i/2,0).lineTo(i,r).close():(new Ni).moveTo(0,0).lineTo(i,0).lineTo(i/2,r).close()),h.mutateLayoutOptions({minContentWidth:u,minContentHeight:u}),d.mutateLayoutOptions({minContentWidth:e,minContentHeight:t,leftMargin:m,rightMargin:g}),p.y2=a,p.mutateLayoutOptions({rightMargin:y})})),s.xMargin=0,s.yMargin=0,(a=t.call(this,s)).minimumWidthProperty.link((function(e){s.localMinimumWidthProperty.value=e}));var f=function(e){a.preferredWidth=e};s.localPreferredWidthProperty.link(f),a._blockNextVoicingFocusListener=!1,a.voicingFocusListener=function(){!a._blockNextVoicingFocusListener&&a.defaultFocusListener(),a._blockNextVoicingFocusListener=!1};var m=null,g=function(e){d.removeAllChildren(),m=_.find(i,(function(t){return t.value===e})),d.addChild(m.node),a.innerContent=m.a11yLabel||null,a.voicingNameResponse=ic.fillIn(s.comboBoxVoicingNameResponsePattern,{value:m.a11yLabel})};return e.link(g),a.ariaLabelledbyAssociations=[{otherNode:_assertThisInitialized(a),otherElementName:Rh.LABEL_SIBLING,thisElementName:Rh.PRIMARY_SIBLING},{otherNode:_assertThisInitialized(a),otherElementName:Rh.PRIMARY_SIBLING,thisElementName:Rh.PRIMARY_SIBLING}],Du.mutateNode(_assertThisInitialized(a),"listbox"),a.disposeComboBoxButton=function(){u.dispose(),c.dispose(),e.unlink(g),s.localPreferredWidthProperty.unlink(f)},a.arrow=h,a.vSeparator=p,a}return _createClass(n,[{key:"setDisplayOnly",value:function(e){this.arrow.visible=!e,this.vSeparator.visible=!e}},{key:"blockNextVoicingFocusListener",value:function(){this._blockNextVoicingFocusListener=!0}},{key:"dispose",value:function(){this.disposeComboBoxButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(FS);nA.register("ComboBoxButton",nx);var ix=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);for(var s=S()({interactive:!1,orientation:"horizontal",dotRadius:3,lineWidth:1,dotSpacing:10,dotTouchAreaDilation:0,dotMouseAreaDilation:0,currentPageFill:"black",currentPageStroke:null,pageFill:"rgb( 200, 200, 200 )",pageStroke:null,tandem:xe.REQUIRED,tandemNameSuffix:"PageControl",visiblePropertyOptions:{phetioFeatured:!0}},r),o="horizontal"===s.orientation,l=new vd({press:function(t){t.currentTarget instanceof rx&&(e.value=t.currentTarget.pageNumber)},tandem:s.tandem.createTandem("pressListener")}),u=[],c=0;c<i;c++){var h=c*(2*s.dotRadius+s.dotSpacing),d=new rx(c,s.dotRadius,{fill:s.pageFill,stroke:s.pageStroke,lineWidth:s.lineWidth,x:o?h:0,y:o?0:h});u.push(d),d.touchArea=0===s.dotTouchAreaDilation?null:Ni.circle(0,0,s.dotRadius+s.dotTouchAreaDilation),d.mouseArea=0===s.dotMouseAreaDilation?null:Ni.circle(0,0,s.dotRadius+s.dotMouseAreaDilation),s.interactive&&(d.cursor="pointer",d.addInputListener(l))}var p=function(e,t){null!==t&&(u[t].fill=s.pageFill,u[t].stroke=s.pageStroke),u[e].fill=s.currentPageFill,u[e].stroke=s.currentPageStroke};return e.link(p),s.children=u,(a=t.call(this,s)).disposePageControl=function(){e.unlink(p)},a}return _createClass(n,[{key:"dispose",value:function(){this.disposePageControl(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo),rx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),(a=t.call(this,i,r)).pageNumber=e,a}return _createClass(n)}($l);nA.register("PageControl",ix);var ax=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({itemNodeOptions:{align:"left",overColor:Rr.grayColor(245),selectedColor:"yellow",xMargin:6,yMargin:2},carouselOptions:{arrowSize:new ms(20,4),orientation:"vertical",spacing:0,margin:0,itemsPerPage:15},pageControlOptions:{interactive:!0},buttonOptions:{arrowDirection:"down",baseColor:"rgb( 218, 236, 255 )",xMargin:6,yMargin:4},tandem:xe.OPTIONAL},r);s.carouselOptions.itemsPerPage=Math.min(s.carouselOptions.itemsPerPage,i.length),s.carouselOptions.tandem=s.carouselOptions.tandem||s.tandem.createTandem("carousel"),s.buttonOptions.tandem=s.buttonOptions.tandem||s.tandem.createTandem("button"),a=t.call(this);var o=new ff,l=_.map(i,(function(t){return new sx(e,t,o,s.itemNodeOptions)})),u=[],c=new XC(l,s.carouselOptions);u.push(c);var h=null;c.numberOfPages>1&&(h=new ix(c.pageNumberProperty,c.numberOfPages,k({orientation:s.carouselOptions.orientation},s.pageControlOptions)),u.push(h));var d=new mf({spacing:4,children:u}),p=new nx(e,i,k({listener:function(){d.visible=!d.visible},widthSizable:s.widthSizable,localPreferredWidthProperty:a.localPreferredWidthProperty,localMinimumWidthProperty:a.localMinimumWidthProperty},s.buttonOptions)),f=new gf({spacing:0,align:"left",children:[p,d]});s.children=[f],a.mutate(s);var m=function(){d.visible=!1};e.link(m);var g={down:function(e){if(!phet.chipper.isFuzzEnabled()||Nh.nextDouble()<.25){var t=e.trail;t.containsNode(p)||t.containsNode(c)||h&&t.containsNode(h)||(d.visible=!1)}}},y=null;return d.visibleProperty.link((function(e){e?(y=a.getUniqueTrail().rootNode().getRootedDisplays()[0]).addInputListener(g):y&&y.hasInputListener(g)&&(y.removeInputListener(g),y=null)})),a.disposeCarouselComboBox=function(){e.unlink(m),p.dispose(),h&&h.dispose(),c.dispose(),l.forEach((function(e){return e.dispose()}))},a}return _createClass(n,[{key:"dispose",value:function(){this.disposeCarouselComboBox(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(ul(jo)),sx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({align:"left",xMargin:6,yMargin:2,overColor:Rr.grayColor(245),selectedColor:"yellow",tandem:xe.OPTIONAL},a),l=new cf(i.node,{xAlign:o.align,group:r}),u=new iu(0,0,1,1);l.boundsProperty.link((function(e){u.setRectBounds(e.dilatedXY(o.xMargin,o.yMargin))})),o.children=[u,l],s=t.call(this,o);var c=new vd({press:function(){e.value=i.value},tandem:o.tandem.createTandem("pressListener")});s.addInputListener(c);var h=new nn([e,c.isOverProperty],(function(e,t){e===i.value?u.fill=o.selectedColor:u.fill=t?o.overColor:"transparent"}));return s.disposeCarouselItemNode=function(){h.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeCarouselItemNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);nA.register("CarouselComboBox",ax);var ox=function(){function e(t,n){_classCallCheck(this,e),this.touchThreshold=t,this.mouseThreshold=n,this.items=[]}return _createClass(e,[{key:"addDraggableItem",value:function(e){this.items.push(e)}},{key:"removeDraggableItem",value:function(e){var t=_.indexOf(this.items,e);this.items.splice(t,1)}},{key:"down",value:function(e){if(e.target===e.currentTarget){var t=0;if(e.pointer.isTouchLike()&&(t=this.touchThreshold),e.pointer instanceof Kh&&(t=this.mouseThreshold),t){for(var n=null,i=Number.POSITIVE_INFINITY,r=e.pointer.point,a=this.items.length,s=0;s<a;s++){var o=this.items[s],l=o.computeDistance(r);l<i&&(i=l,n=o)}n&&i<t&&n.startDrag(e)}}}}]),e}();nA.register("ClosestDragListener",ox);var lx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({stroke:"rgb( 100, 100, 100 )"},i);return t.call(this,0,0,e,0,r)}return _createClass(n)}(tu);nA.register("HSeparatorDeprecated",lx);var ux=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){return _classCallCheck(this,n),t.call(this,e,i,S()({orientation:"horizontal"},r))}return _createClass(n)}(Yb);nA.register("HorizontalAquaRadioButtonGroup",ux);var cx=new Ni("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"),hx=new Hl(cx,{fill:"rgba(0,0,0,0.7)",maxWidth:15.5}),dx=hx.width+2,px=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o){var l;_classCallCheck(this,n);var u=S()({separatorBefore:!1,checkedProperty:null,handleFocusCallback:null,textFill:"black",cursor:"pointer",tandem:xe.OPTIONAL,phetioDocumentation:"Item buttons shown in a popup menu",phetioEventType:ce.USER,tagName:"button",containerTagName:"li",containerAriaRole:"none",ariaRole:"menuitem",positionInPDOM:!0},o);l=t.call(this),s&&l.setVisibleProperty(is);var c=function(e){l.innerContent=e,l.voicingNameResponse=e};i.link(c),l.present=a;var h=new Xl(i,{font:new tA(18),fill:u.textFill,maxWidth:400}),d=new iu({cornerRadius:5});h.boundsProperty.link((function(e){l.localMinimumWidth=e.width+2+5+dx,d.rectHeight=e.height+3+3})),l.localPreferredWidthProperty.link((function(e){null===e&&(e=l.localMinimumWidth),e&&(d.rectWidth=e)})),l.addChild(d),l.addChild(h),of.create(_assertThisInitialized(l),[d,h],(function(e,t){t.left=e.left+2+dx,t.centerY=e.centerY})),l.addInputListener({enter:function(){d.fill="#a6d2f4"},exit:function(){d.fill=null}}),l.addInputListener(new Ad({tandem:u.tandem.createTandem("inputListener"),fire:function(t){e(t),r(t),u.handleFocusCallback&&u.handleFocusCallback(t)}})),l.separatorBefore=u.separatorBefore;var p=null;if(u.checkedProperty){var f=new jo({children:[hx],right:h.left-2,centerY:h.centerY});p=function(e){f.visible=e},u.checkedProperty.link(p),l.addChild(f)}return l.mutate(u),l.disposeMenuItem=function(){u.checkedProperty&&p&&u.checkedProperty.hasListener(p)&&u.checkedProperty.unlink(p),i.hasListener(c)&&i.unlink(c),h.dispose()},l}return _createClass(n,[{key:"dispose",value:function(){this.disposeMenuItem(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(ul(Hc(jo)));nA.register("MenuItem",px);var fx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s){var o;return _classCallCheck(this,n),(o=t.call(this)).nodeProperty=new dt(null),o._constructInstance=function(){return Reflect.construct(e,[].concat(_toConsumableArray(i),[A(_.mapValues(a,(function(e){return e.value})),r)]))},o.multilink=nn.multilink(_.values(a),o.replaceCopy.bind(_assertThisInitialized(o))),o.mutate(s),o}return _createClass(n,[{key:"replaceCopy",value:function(){var e=this._constructInstance(),t=this.nodeProperty.value;this.nodeProperty.value=e,this.addChild(e),t&&(this.removeChild(t),this.disposeCopy(t))}},{key:"disposeCopy",value:function(e){e.dispose&&e.dispose()}},{key:"dispose",value:function(){this.multilink.dispose(),this.disposeCopy(this.nodeProperty.value),this.nodeProperty.dispose(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);nA.register("MutableOptionsNode",fx);var mx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({phetioValueType:Te},i);return t.call(this,e,r)}return _createClass(n)}(dt),gx=function(e,t){return function(e){_inherits(i,e);var n=_createSuper(i);function i(){var e;_classCallCheck(this,i);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=a[t],l=S()({timerDelay:400,timerInterval:100,ariaOrientation:In.VERTICAL},o);a[t]=l;var u=_assertThisInitialized(e=n.call.apply(n,[this].concat(a)));Vl(_assertThisInitialized(e),["addInputListener"]),e._callbackTimer=new gt({delay:l.timerDelay,interval:l.timerInterval}),e.incrementDownEmitter=new Et({parameters:[{valueType:"boolean"}]}),e.decrementDownEmitter=new Et({parameters:[{valueType:"boolean"}]}),u.setPDOMAttribute("aria-roledescription",Xk.a11y.numberSpinnerRoleDescriptionStringProperty);var c=null,h=null,d={keydown:function(t){if(e.enabledProperty.get()&&xa.isRangeKey(t.domEvent)){var n=t.domEvent;n.preventDefault(),n.metaKey||e._callbackTimer.isRunning()||(e._accessibleNumberSpinnerHandleKeyDown(t),c=e._accessibleNumberSpinnerHandleKeyDown.bind(_assertThisInitialized(e),t),h=n,e._callbackTimer.addCallback(c),e._callbackTimer.start())}},keyup:function(t){var n=xa.getEventCode(t.domEvent);xa.isRangeKey(t.domEvent)&&(h&&n===xa.getEventCode(h)&&(e._emitKeyState(t.domEvent,!1),e._callbackTimer.stop(!1),e._callbackTimer.removeCallback(c),c=null,h=null),e.handleKeyUp(t))},blur:function(t){c&&(e._emitKeyState(h,!1),e._callbackTimer.stop(!1),e._callbackTimer.removeCallback(c)),e.handleBlur(t)},input:e.handleInput.bind(_assertThisInitialized(e)),change:e.handleChange.bind(_assertThisInitialized(e))};return u.addInputListener(d),e._disposeAccessibleNumberSpinner=function(){e._callbackTimer.dispose(),e.incrementDownEmitter.dispose(),e.decrementDownEmitter.dispose(),u.removeInputListener(d)},e}return _createClass(i,[{key:"_accessibleNumberSpinnerHandleKeyDown",value:function(e){this.handleKeyDown(e),this._emitKeyState(e.domEvent,!0)}},{key:"_emitKeyState",value:function(e,t){D(e,{valueType:Event}),xa.isAnyKeyEvent(e,[xa.KEY_UP_ARROW,xa.KEY_RIGHT_ARROW])?this.incrementDownEmitter.emit(t):xa.isAnyKeyEvent(e,[xa.KEY_DOWN_ARROW,xa.KEY_LEFT_ARROW])&&this.decrementDownEmitter.emit(t)}},{key:"dispose",value:function(){this._disposeAccessibleNumberSpinner(),_get(_getPrototypeOf(i.prototype),"dispose",this).call(this)}}]),i}(n_(e,t))};nA.register("AccessibleNumberSpinner",gx);var yx=gx,vx=["up","down","over","out"],Ax=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({color:new Rr(0,0,255),backgroundColor:"white",cornerRadius:6,xMargin:3,yMargin:3,decimalPlaces:0,font:new tA(24),incrementFunction:function(e){return e+1},decrementFunction:function(e){return e-1},timerDelay:400,timerInterval:100,noValueString:v_.NO_VALUE,align:"center",touchAreaXDilation:10,touchAreaYDilation:10,mouseAreaXDilation:0,mouseAreaYDilation:5,backgroundStroke:"gray",backgroundLineWidth:.5,arrowHeight:6,arrowYSpacing:3,arrowStroke:"black",arrowLineWidth:.25,valueMaxWidth:null,onInput:_.noop,incrementEnabledFunction:function(e,t){return null!=e&&e<t.max},decrementEnabledFunction:function(e,t){return null!=e&&e>t.min},disabledOpacity:Pr.DISABLED_OPACITY,valueChangedSoundPlayer:zw,boundarySoundPlayer:Fw,cursor:"pointer",valueProperty:e,enabledRangeProperty:i,pageKeyboardStep:2,voicingObjectResponse:function(){return e.value},tandem:xe.REQUIRED,tandemNameSuffix:"Picker",phetioReadOnly:Be.DEFAULT_OPTIONS.phetioReadOnly,visiblePropertyOptions:{phetioFeatured:!0},phetioEnabledPropertyInstrumented:!0},r);s.formatValue||(s.formatValue=function(e){return En.toFixed(e,s.decimalPlaces)});var o=null;void 0===s.pressedColor&&(o=new Au(s.color),s.pressedColor=new Ut([o],(function(e){return e.darkerColor()})));var l=e.value,u=s.onInput;s.onInput=function(){u(),e.value!==l&&(e.value===i.get().max||e.value===i.get().min?s.boundarySoundPlayer.play():s.valueChangedSoundPlayer.play()),l=e.value};var c=s.incrementFunction(e.get())-e.get();s.keyboardStep=c,s.shiftKeyboardStep=c;var h=_.pick(s,jo.REQUIRES_BOUNDS_OPTION_KEYS);a=t.call(this,_.omit(s,jo.REQUIRES_BOUNDS_OPTION_KEYS));for(var d=new mx("up",{validValues:vx}),p=new mx("down",{validValues:vx}),f=new Ut([e,i],s.incrementEnabledFunction),m=new Ut([e,i],s.decrementEnabledFunction),g=new Xl("",{font:s.font,pickable:!1}),y=i.get().min,v=[];y<=i.get().max;)v.push(y),y=s.incrementFunction(y);var A=Math.max.apply(null,v.map((function(e){return g.text=s.formatValue(e),g.width})));null!==s.valueMaxWidth&&(A=Math.min(A,s.valueMaxWidth));var b=A+2*s.xMargin,E=g.height+2*s.yMargin,V=s.cornerRadius;g.maxWidth=A;var w=new Hl((new Ni).arc(V,V,V,Math.PI,3*Math.PI/2,!1).arc(b-V,V,V,-Math.PI/2,0,!1).lineTo(b,E/2+1).lineTo(0,E/2+1).close(),{pickable:!1}),C=new Hl((new Ni).arc(b-V,E-V,V,0,Math.PI/2,!1).arc(V,E-V,V,Math.PI/2,Math.PI,!1).lineTo(0,E/2).lineTo(b,E/2).close(),{pickable:!1}),x=new iu(0,0,b,E,V,V,{pickable:!1,stroke:s.backgroundStroke,lineWidth:s.backgroundLineWidth}),P=new ms(.5*b,s.arrowHeight),T={stroke:s.arrowStroke,lineWidth:s.arrowLineWidth,pickable:!1};a.incrementArrow=new Hl((new Ni).moveTo(P.width/2,0).lineTo(P.width,P.height).lineTo(0,P.height).close(),T),a.incrementArrow.centerX=w.centerX,a.incrementArrow.bottom=w.top-s.arrowYSpacing,a.decrementArrow=new Hl((new Ni).moveTo(P.width/2,P.height).lineTo(0,0).lineTo(P.width,0).close(),T),a.decrementArrow.centerX=C.centerX,a.decrementArrow.top=C.bottom+s.arrowYSpacing;var M=new jo({children:[w,a.incrementArrow]});M.addChild(new iu(M.localBounds));var L=new jo({children:[C,a.decrementArrow]});L.addChild(new iu(L.localBounds)),a.addChild(M),a.addChild(L),a.addChild(x),a.addChild(g),M.touchArea=Ni.rectangle(M.left-s.touchAreaXDilation/2,M.top-s.touchAreaYDilation,M.width+s.touchAreaXDilation,M.height+s.touchAreaYDilation),L.touchArea=Ni.rectangle(L.left-s.touchAreaXDilation/2,L.top,L.width+s.touchAreaXDilation,L.height+s.touchAreaYDilation),M.mouseArea=Ni.rectangle(M.left-s.mouseAreaXDilation/2,M.top-s.mouseAreaYDilation,M.width+s.mouseAreaXDilation,M.height+s.mouseAreaYDilation),L.mouseArea=Ni.rectangle(L.left-s.mouseAreaXDilation/2,L.top,L.width+s.mouseAreaXDilation,L.height+s.mouseAreaYDilation);var I={up:s.color,over:s.color,down:s.pressedColor,out:s.color,disabled:"rgb(176,176,176)"},R=Sx(s.color,s.backgroundColor,s.color,E),D=Sx(s.pressedColor,s.backgroundColor,s.pressedColor,E),N={up:s.backgroundColor,over:R,down:D,out:D,disabled:s.backgroundColor},q={fireOnHold:!0,fireOnHoldDelay:s.timerDelay,fireOnHoldInterval:s.timerInterval};a.incrementInputListener=new bx(d,k({tandem:s.tandem.createTandem("incrementInputListener"),fire:function(t){e.set(Math.min(s.incrementFunction(e.get()),i.get().max)),s.onInput(t),a.voicingSpeakFullResponse({nameResponse:null,hintResponse:null})}},q)),M.addInputListener(a.incrementInputListener),a.decrementInputListener=new bx(p,k({tandem:s.tandem.createTandem("decrementInputListener"),fire:function(t){e.set(Math.max(s.decrementFunction(e.get()),i.get().min)),s.onInput(t),a.voicingSpeakFullResponse({nameResponse:null,hintResponse:null})}},q)),L.addInputListener(a.decrementInputListener),f.link((function(e){!e&&a.incrementInputListener.interrupt(),M.pickable=e})),m.link((function(e){!e&&a.decrementInputListener.interrupt(),L.pickable=e}));var O=function(e){if(null==e)g.text=s.noValueString,g.x=(b-g.width)/2;else if(g.text=s.formatValue(e),"center"===s.align)g.centerX=w.centerX;else if("right"===s.align)g.right=w.right-s.xMargin;else{if("left"!==s.align)throw new Error("unsupported value for options.align: ".concat(s.align));g.left=w.left+s.xMargin}g.centerY=E/2};e.link(O),nn.multilink([d,f],(function(e,t){Ex(e,t,w,a.incrementArrow,N,I)})),nn.multilink([p,m],(function(e,t){Ex(e,t,C,a.decrementArrow,N,I)}));var B=a.localBounds.dilated(eh.getDilationCoefficient(_assertThisInitialized(a)));return a.focusHighlight=new eh(Ni.roundedRectangleWithRadii(B.minX,B.minY,B.width,B.height,{topLeft:s.cornerRadius,topRight:s.cornerRadius,bottomLeft:s.cornerRadius,bottomRight:s.cornerRadius})),a.incrementDownEmitter.addListener((function(e){d.value=e?"down":"up"})),a.decrementDownEmitter.addListener((function(e){p.value=e?"down":"up"})),a.addLinkedElement(e,{tandem:s.tandem.createTandem("valueProperty")}),a.mutate(h),a.disposeNumberPicker=function(){o&&o.dispose(),f.dispose(),m.dispose(),e.hasListener(O)&&e.unlink(O)},a}return _createClass(n,[{key:"dispose",value:function(){this.disposeNumberPicker(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"setArrowsVisible",value:function(e){e||(this.incrementInputListener.interrupt(),this.decrementInputListener.interrupt()),this.incrementArrow.visible=e,this.decrementArrow.visible=e}}],[{key:"createIcon",value:function(e,t){var i=S()({highlightIncrement:!1,highlightDecrement:!1,range:new Tt(e-1,e+1),numberPickerOptions:{pickable:!1,tandem:xe.OPT_OUT}},t),r=new n(new Nt(e),new dt(i.range),i.numberPickerOptions);return r.removeFromPDOM(),i.highlightDecrement&&(r.decrementInputListener.isOverProperty.value=!0),i.highlightIncrement&&(r.incrementInputListener.isOverProperty.value=!0),r}}]),n}(yx(jo,0)),bx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;return _classCallCheck(this,n),r=t.call(this,i),nn.multilink([r.isOverProperty,r.isPressedProperty],(function(t,n){e.set(t&&!n?"over":t&&n?"down":t||n?"out":"up")})),r}return _createClass(n)}(Ad);function Sx(e,t,n,i){return new Ks(0,0,0,i).addColorStop(0,e).addColorStop(.5,t).addColorStop(1,n)}function Ex(e,t,n,i,r,a){if(t)if(i.stroke="black","up"===e)n.fill=r.up,i.fill=a.up;else if("over"===e)n.fill=r.over,i.fill=a.over;else if("down"===e)n.fill=r.down,i.fill=a.down;else{if("out"!==e)throw new Error("unsupported buttonState: ".concat(e));n.fill=r.out,i.fill=a.out}else n.fill=r.disabled,i.fill=a.disabled,i.stroke=a.disabled}nA.register("NumberPicker",Ax);var kx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s,o=S()({arrowsPosition:"bothRight",arrowsScale:null,arrowButtonFill:"white",arrowButtonStroke:"black",arrowButtonLineWidth:1,deltaValue:1,xSpacing:5,ySpacing:3,numberDisplayOptions:{cornerRadius:5,backgroundStroke:"black"},touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,valueProperty:e,enabledRangeProperty:i,disabledOpacity:Pr.DISABLED_OPACITY,interactiveHighlight:"invisible",tandem:xe.REQUIRED,tandemNameSuffix:"Spinner",phetioEnabledPropertyInstrumented:!0},r),l=o.incrementFunction||function(e){return e+o.deltaValue},u=o.decrementFunction||function(e){return e-o.deltaValue},c=new b_(e,i.value,k({tandem:o.tandem.createTandem("numberDisplay")},o.numberDisplayOptions)),h={baseColor:o.arrowButtonFill,stroke:o.arrowButtonStroke,lineWidth:o.arrowButtonLineWidth,focusable:!1,enabledPropertyOptions:{phetioReadOnly:!0,phetioFeatured:!1}},d=new Sw("topBottom"===o.arrowsPosition||"bothRight"===o.arrowsPosition?"up":"right",(function(){return e.set(l(e.get()))}),k({tandem:o.tandem.createTandem("incrementButton")},h)),p=new Sw("topBottom"===o.arrowsPosition||"bothRight"===o.arrowsPosition?"down":"left",(function(){return e.set(u(e.get()))}),k({tandem:o.tandem.createTandem("decrementButton")},h));s||(s="leftRight"===o.arrowsPosition?c.height/d.height:"topBottom"===o.arrowsPosition?c.width/d.width:"bothRight"===o.arrowsPosition?(c.height/2-o.ySpacing/2)/d.height:(c.width/2-o.xSpacing/2)/d.width),o.arrowsScale&&(s*=o.arrowsScale),d.setScaleMagnitude(s),p.setScaleMagnitude(s);c.boundsProperty.link((function(){"leftRight"===o.arrowsPosition?(d.left=c.right+o.xSpacing,p.right=c.left-o.xSpacing,d.centerY=p.centerY=c.centerY):"topBottom"===o.arrowsPosition?(d.centerX=p.centerX=c.centerX,d.bottom=c.top-o.ySpacing,p.top=c.bottom+o.ySpacing):"bothRight"===o.arrowsPosition?(d.left=p.left=c.right+o.xSpacing,d.bottom=c.centerY-o.ySpacing/2,p.top=c.centerY+o.ySpacing/2):(d.left=c.centerX+o.xSpacing/2,p.right=c.centerX-o.xSpacing/2,d.top=p.top=c.bottom+o.ySpacing)})),(o.touchAreaXDilation||o.touchAreaYDilation)&&(d.touchArea=d.localBounds.dilatedXY(o.touchAreaXDilation,o.touchAreaYDilation),p.touchArea=p.localBounds.dilatedXY(o.touchAreaXDilation,o.touchAreaYDilation),"bothRight"===o.arrowsPosition?(d.touchArea=d.touchArea.shiftedY(-o.touchAreaYDilation),p.touchArea=p.touchArea.shiftedY(o.touchAreaYDilation)):"bothBottom"===o.arrowsPosition&&(d.touchArea=d.touchArea.shiftedX(o.touchAreaXDilation),p.touchArea=p.touchArea.shiftedX(-o.touchAreaXDilation))),(o.mouseAreaXDilation||o.mouseAreaYDilation)&&(d.mouseArea=d.localBounds.dilatedXY(o.mouseAreaXDilation,o.mouseAreaYDilation),p.mouseArea=p.localBounds.dilatedXY(o.mouseAreaXDilation,o.mouseAreaYDilation),"bothRight"===o.arrowsPosition?(d.mouseArea=d.mouseArea.shiftedY(-o.mouseAreaYDilation),p.mouseArea=p.mouseArea.shiftedY(o.mouseAreaYDilation)):"bothBottom"===o.arrowsPosition&&(d.mouseArea=d.mouseArea.shiftedX(o.mouseAreaXDilation),p.mouseArea=p.mouseArea.shiftedX(-o.mouseAreaXDilation))),o.children=[c,d,p],o.keyboardStep=0,o.shiftKeyboardStep=0,o.pageKeyboardStep=0;var f=_.pick(o,jo.REQUIRES_BOUNDS_OPTION_KEYS);a=t.call(this,_.omit(o,jo.REQUIRES_BOUNDS_OPTION_KEYS));var m=function(){d.enabled=l(e.value)<=i.value.max,p.enabled=u(e.value)>=i.value.min},g=function(e){m()};e.link(g);var y=function(t){e.value=t.constrainValue(e.value),m()};i.link(y);var v=function(e){return e&&d.pdomClick()},A=function(e){return e&&p.pdomClick()};return a.incrementDownEmitter.addListener(v),a.decrementDownEmitter.addListener(A),a.disposeNumberSpinner=function(){c.dispose(),d.dispose(),p.dispose(),a.incrementDownEmitter.removeListener(v),a.decrementDownEmitter.removeListener(A),e.unlink(g),i.unlink(y)},a.mutate(f),a.addLinkedElement(e,{tandem:o.tandem.createTandem("property")}),a}return _createClass(n,[{key:"dispose",value:function(){this.disposeNumberSpinner(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(yx(jo,0));nA.register("NumberSpinner",kx);var Vx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({trackFillLeft:"white",trackFillRight:"rgb( 0, 200, 0 )"},i);return t.call(this,e,!1,!0,r)}return _createClass(n)}(gC);nA.register("OnOffSwitch",Vx);var wx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){return _classCallCheck(this,n),r=S()({orientation:In.VERTICAL},r),t.call(this,e,i,r)}return _createClass(n)}(h_);nA.register("VSlider",wx);var _x=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){return _classCallCheck(this,n),t.call(this,e,i,S()({orientation:"vertical",align:"left"},r))}return _createClass(n)}(Yb);nA.register("VerticalAquaRadioButtonGroup",_x);var Cx=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);for(var a=S()({checkboxOptions:{},touchAreaXDilation:5,mouseAreaXDilation:5,spacing:10,align:"left",tandem:xe.REQUIRED},i),s=Hb(e,a.tandem),o=[],l=0,u=0;u<s.length;u++)l=Math.max(l,s[u].width);a.children=[];for(var c=0;c<e.length;c++){var h=e[c],d=s[c],p=new jo({children:[new uu(l),d]}),f=a.spacing/2,m=new yS(h.property,p,A({},a.checkboxOptions,h.options,{tandem:h.tandemName?a.tandem.createTandem(h.tandemName):xe.OPTIONAL,mouseAreaXDilation:a.mouseAreaXDilation,touchAreaXDilation:a.touchAreaXDilation,mouseAreaYDilation:f,touchAreaYDilation:f}));o.push(m),a.children.push(m)}return(r=t.call(this,a)).disposeVerticalCheckboxGroup=function(){o.forEach((function(e){return e.dispose()})),s.forEach((function(e){return e.dispose()}))},r}return _createClass(n,[{key:"dispose",value:function(){this.disposeVerticalCheckboxGroup(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(gf);nA.register("VerticalCheckboxGroup",Cx);var xx=nA,Px="data:audio/mpeg;base64,//swxAAAB5g/PnT2AAEODWz3MPACATcwAQxWRG8v4t4m5Y0gGrH+vEEIQ0J864QJgfEs//KUlhYscDHWH/BDD+7p8EAQBB3pBAEAQBABg+fwQAAABLbkkl+wAAAAAAApUEcylxWEbBYbjKTtTlM3eamWe5RAcBxA6VypWY/T+Lr1S1waL6rSucRXH9ORv3pvMuaX8aPVHAAHBUpB//syxAMCSChfPF28ABkDiqWd3bC1gSAHIAIB+Eua0PmBBI8GxoUDjBQgFHgkCKwrcSkWU6j9Sd+KaBUriJjhajVnvzMt1d7qnsZ///XxGarCW8ICUBSEMlofMKEEMUxHBpw1wME1UzDAIKgQMlzDhMDDKBify5qB0oNf2gp6peEUEQRlcTW9MN8XxQTaJeim2apgHXh0BA42HdjNLf/7MsQFggh4Wyguaea5EwulXc0k5sOdsU8HATEgJBsocOAYml+fvgPRkTAMqGk6FmJpDTjOn1MGkcUStpHsmIbInFwJGEsLanJYVDH8wCQSw4BWcJUpo5emDQ4bvFJ8R8GGQ8Y04EKYPAAk7BdNV8H2mJ54aS6xWdoQwIjE7LBlCLKCIUyihd/5O1Pr/Z//r//+ugAkgUDASheRbs7/+zLEBQIIMF0i7mknUQqKI43cjOo+4jDKZN4nQ+nnzAIQAIFAOgYZUEPnmTwex2HYpllk6m47QrXB/jCOonH1PVe/P+7f/yX////+oAJ/YCSrrMBgnNhCHMIDzMAgfM3JgRnS+W8QBgr0D4Pqy1k7lMfZVff9q1aA+omBkMhA4OM8FGFw99bPp+T/fX//9dUAKAcCZaSBQNNowTBB//swxAaDB/xNGm7hhtEICaLN3DDSlmkhAGok1mBAQFtknQ4AT4+pYJAiw0w4BwzUW4PaQgrVEGL6z0z0QVwH+d6Zr///6v8oAG7eA3pboQCSbFGAYeB2anAuc/ywAh/BhEZkqxPg7Bp8kJci1ITUM1YE9UZUPaWOT+Ks/zzcz8VejwR+j/T+z9HSADd3AQ+ZeKCgZHp2Fh8NAB5O//syxAkDR9RNFG7hJpD2jqINzpSynmlDBxw8IELTAVYo5IBlgwaHhk9qYTAyl58Dpjtf6q3Dv1vTRnvlv8S/6P9ABicJuxgUDmP6IKqoMDx1iggKEpYCCGUl4HnjMrXBkpxbk2rPIg7z9PwGIK9Ap1blL/0jaJjb9f+W/PU/5aoApe4BRQuWYMAobdPOYFIYaMk6fJDqYhBGg0Dsu//7MsQOgwiUUQZu4MdRBQogTdwY6oFDoaFxGnF+6NKF+px/5Pgxp7nlue5Ehb/4DjJz2n9+z8633/7v/KgFMbgIZImmDYHG86VGIYtGiJdHPZNmA4QJDruegBSAp2mvCtqonzjRyjPTPpc6RzbxeJPndFfzH/Zkv/9X75b/LSHIAAIqqsBDGcsQI0YnBj5+kYCQsu4vQoAi2rOVhXH/+zLED4JGvEEAbm0jUKoO4KmTCVZRFoN0WXzjW0zW6Q28yWOZvKPjXpnMNBsVda1ccCOMpS9GgcVUAh+JxR+hMHbWqv3wolHgh/gLfq3QCfwYlZ2+kmoAAAqSPYAAAZXQtxfw5RFhnCEoyBHegrALYEK6pBnXpBhS/4ci6AoaNlhus1y3kjUghRNDGRIyxJtzBboYMpeic0Op0DSX//swxCMCxQBO96eMy3C2A0AB73hMkPMgl18xMmNDDAXHMEdYykxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",Tx=XA(JA,Px),Mx=BA.createLock(Px),Lx=new QA,Ix=!1,Rx=function(){Ix||(Mx(),Ix=!0)},Dx=JA.decodeAudioData(Tx.buffer,(function(e){null===Lx.audioBufferProperty.value&&(Lx.audioBufferProperty.set(e),Rx())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),Lx.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),Rx()}));Dx&&Dx.then((function(e){null===Lx.audioBufferProperty.value&&(Lx.audioBufferProperty.set(e),Rx())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),Rx()}));var Nx=new tS(Lx,{soundClipOptions:{initialOutputLevel:.8},soundManagerOptions:{categoryName:"user-interface"}});KA.register("boundaryReachedSoundPlayer",Nx);var qx="data:audio/mpeg;base64,//swxAAABognHnWRADEriei3OrACCEgYAPOkFXghY6uD++Piw3kA4B4y7hchMBxIxLKSksCwfB8Hw+7wfB8H3/E4P+GP/++D58AABoNsRiAAegAAAcAAwfGEzHKEwATU0FYIw6Dg+OLEOCqwYUAazcxYAwgAWZl5g4CTyjQM3o0EQLO/PjeedH/0g7/quk7v////9CoAAgKS3agA//syxAOACFhpYb2WADkFBWUpz2ROAUr4AUY00DNWPwkiueFpjWamdXncJm4WSUvPYHtdLyIybUkqNbEdOAeIJqJS89odMGRdRGULsKEKKu9sAAFgQA2oDCIoIgGYfBxqSpmFgSkaq7FxnJizGCsESGsoBS/52SlqFCkhXIYlBMPwLKiSRYVd1f///7f/lUfvy2gAAL45ZHAEVS5wEP/7MsQFgkd0HRVM9wJwooOhqMw8TrAOxggWZrdB4KswIKoWwjoMDKpkDpawRH8EDMvQbb5c2fQ5IXBwEGakBD9/3/5ub1lQm4/cLYHDTARtPRS+xTotNKqDqFAVBUFeVBUFU4lBYO8sDQNB3iIGqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+zLEFwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//swxFsDwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//syxJ6DwAABpAAAACAAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",Ox=XA(JA,qx),Bx=BA.createLock(qx),Gx=new QA,Hx=!1,Fx=function(){Hx||(Bx(),Hx=!0)},Yx=JA.decodeAudioData(Ox.buffer,(function(e){null===Gx.audioBufferProperty.value&&(Gx.audioBufferProperty.set(e),Fx())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),Gx.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),Fx()}));Yx&&Yx.then((function(e){null===Gx.audioBufferProperty.value&&(Gx.audioBufferProperty.set(e),Fx())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),Fx()}));var zx=new tS(Gx,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("grabSoundPlayer",zx);var Ux="data:audio/mpeg;base64,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",Wx=XA(JA,Ux),jx=BA.createLock(Ux),Xx=new QA,Qx=!1,Kx=function(){Qx||(jx(),Qx=!0)},Jx=JA.decodeAudioData(Wx.buffer,(function(e){null===Xx.audioBufferProperty.value&&(Xx.audioBufferProperty.set(e),Kx())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),Xx.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),Kx()}));Jx&&Jx.then((function(e){null===Xx.audioBufferProperty.value&&(Xx.audioBufferProperty.set(e),Kx())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),Kx()}));var Zx=new tS(Xx,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("pauseSoundPlayer",Zx);var $x="data:audio/mpeg;base64,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",eP=XA(JA,$x),tP=BA.createLock($x),nP=new QA,iP=!1,rP=function(){iP||(tP(),iP=!0)},aP=JA.decodeAudioData(eP.buffer,(function(e){null===nP.audioBufferProperty.value&&(nP.audioBufferProperty.set(e),rP())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),nP.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),rP()}));aP&&aP.then((function(e){null===nP.audioBufferProperty.value&&(nP.audioBufferProperty.set(e),rP())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),rP()}));var sP=new tS(nP,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("playSoundPlayer",sP);var oP="data:audio/mpeg;base64,//swxAAABpAhE1WQgDEChGf3OiJCAAAJRgWMA3lCIUyXzv3PfM52Qw9nimjE2HsTh+X09sHwQBB10u/y4e//+gEAQ5cP/u//4nAABASEQsFsvw9GFpIAMRiGNLEgMlRmNb+1MIjHNu4KFilyMxQYzAAc3e/P+566F6J7olttvvTZ9lv1/6++U+z1qgAJHLdLYAABaRtXAaLgn8Bq//syxAiAiaBvUb22ADjOA6MNz+wKcSQr2BxEgs/qJ0XkEPODBEPhEBEOh7HwdhJLwTjcKQmIaxUepm3yySi6sRnp0hr1J8lYfUroW0RJYrMlFAAMN5mqFGCchxplBCFCZuwLfmAFg8RsPKaZAGhqJlpCZMCBA+iTjFW///////Xb//1B2gACzEgggAM2IOQFMKEH4x1EgzS0KJMJgP/7MsQMAkZUGwtNe0BwqQNgNawkjoI6rU0xQyo8AgUADX4Q45so+ubX4c/Qr//w0AVA5axJGw1awwFk8Bk0bAWushk77jjeDg6Vcjgr38sDQNfUJZ3KgqCoK0xBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEIYPAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxGWDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxKkDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsS7g8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEu4PAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//swxLwDwAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",lP=XA(JA,oP),uP=BA.createLock(oP),cP=new QA,hP=!1,dP=function(){hP||(uP(),hP=!0)},pP=JA.decodeAudioData(lP.buffer,(function(e){null===cP.audioBufferProperty.value&&(cP.audioBufferProperty.set(e),dP())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),cP.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),dP()}));pP&&pP.then((function(e){null===cP.audioBufferProperty.value&&(cP.audioBufferProperty.set(e),dP())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),dP()}));var fP=new tS(cP,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("releaseSoundPlayer",fP);var mP="data:audio/mpeg;base64,//swxAADBmUg7gCM3gjdH+EKkCADXz1BJf+Sv+D////B/+wLRCz8Ob7nQMDFvER3BwvY1oeojPpiEQYQL0nv/PTaE9Mj+CGSDyAlZCn+8ALh+7wp/1AwM6X1dlkJsf90b/9q79N/rXbyJO1mvPWrJd51MyMpH2ewI2SON/D/ewqahUQACtOQSosYwemRvEQowgEMcAgGEnpMUTvv//syxA4ACWhZFlm3gBFDi2o3N4ACrPHCPBpQhfbtmAGADTeZ8V0FwZZz7p/u/7+JQnto6loivZdV4Z1XlUuVdY1Lv+XQAAaMTt1uEgAAAAAAAQ8AArHCEEcJahjISY0EG2FI4VnM4hqpkY8GtFIRBaKjcwWceAuhbBTW6J8QDSFrH/mEBxb5d8U53t7PlPAT2yll2jZVACnAARxCcv/7MsQDgkgkcTrd5IA5BAvmCd0NJwsw0uCYBQDJggBQmDskmY6QmZhRg+GCmBMoavWoyp1qZ9gRJUQaaFMf69Sa+yTfVe4x/3OVdnVKMdKDDvJ8gUKw4NzA4GAUJBhODx2QtRhi5B4/L5/Up6DBhyokLWexBtC7iXyfKsZbB1IHwsB9K4vS+CEluYQqOR1866oAMyABVggADJrmg5n/+zLEBgJIfGE2zHjFsQIJ5MmvbIl6YGQHxijkGGCiVoaIA7gQAgYCIETlr1EgBV3RdMlXzWbjsuq6UvqokR/EJJkyOmHTj41omg1p0jAzELohQsQEB1CaikKiLmCCpiHEnncwfadxBGfHpoo+CBIBDCLIqAshdpPKZeluUP5zbxQ5Fvu3t44/T/SvuKjVZsAAAibS0LyzYwBg4UmQ//swxAeCSRxvOG5oy2kGiScdjuSUyKaeHhoOrm7C+YolB04mHJEmPFg4ujKsBTWWAOCpfJlb1d2tzlTmTiLTV3bp7za0Z/919hjJC4APjwAlCbqVZYa9YIgfTGCoeGQZ8GAyeg5QzFUojk+KBe8LhA45CbHJ6Wx5yp6IS93Z2hpf1lDT/OnWyBVfjBwNDw7BVQA2AAC20yWHGcEh//syxAWCSLRTNsz3ZLkJC2fZnrDmJOtswTCEwVN8w4N80jCgRg+bgQ2ZlAGvCpvr+ZeNGYDibCEiEtbiF7+U8GyfPP4FqrmjcgsZvxZu2TncBoq1zVeNoY3tzesBa4DAHRBDkHKgFGZqaGFJMGK8lmeI9GGYaDIEgYMS87YKktC0Pz1IYF1ycmq1d0oztLpbo5gygAAB90/gLdWCH//7MsQFgkeAWThscMVhCQzoqY2xHxCNEsAkwwkGjTICZWaqqJgEyHApoFgGLG1qpMAIEeuJRoLRRABh1Kd0TrzK2zTrRhwIQoA4D5tDKCOUoYhib/itAWJjBk7QIQA3VAMuAxkaMcQTn4E7xdMJHCYATHJ8d7xtudt5pTp/HOv92wABEZXvyYJqAACc4AAh5LJFIWLDCEUAnCYgIj7/+zLECgJHZGNFLG0I8N6L51mNmK4yEwQ9TLMqnwSCuIOiZh5cUHAqAFrkflFRxoKSzB1zNV+bVtzTFHMF8HTNtWTD7ASgQgc8wMwEIoVoSwAJZC4xnnwayFLcWOArlnjWXqlphKpea1oUJjGplVrUSVbIaiwACIKXqAIbCkJolC4htvvMPaJlGBGYs2GDTZ7rCAg0SGnnVO/c3LyA//swxBSARyBfQkzsyrjmjOoo/bCnJEpkPd0gZ9iC7vtGGGKl2kAAGUwCYNUOItz9IT7nuDEarEhGGGU6xn4Q6OKkFzuWPvOXdUnrrRKeZPeqVXa/AuutA8vEkmy0FMVcAAVUU0IjaWiOiMxgzCUhZ452o+UIOYiwkOM20SlAsByQFGEgK1KgqRcBUIw4K60iIsW3kfsKtgyMuAJc//syxB6CRyRfPE1warjhDShc/aSnMUBRTh/IBPpIoaDjIcYxIsSxGgc6qlMXBVILmTyCxPmJV0cW5rMG2YbGyBvyyM8l55zY60oAAIU4AAAIaSrYqIQEfElFgTjnMJHw2qQzO5RX6DQMYziCHJljXIGj1Lg/uRPwjmJqURp8anVTfz/nwJWgAAylAgV/25sFV0/TWgoQTu6sMMgQ5f/7MsQpgEeEa0NM8Mcw4ozpacyZHxExUrTH9IkGJYwZHotnZK1ACitNzotE/KtCjBtkWyT9CpJAAE04AAAIGSFa0o8/kXFQCJSNOjlJMXBfPZVljvn0SHByx0nZmaLtLZhUWI5MxZ8Vqyq/kRNb2FhWAQhF4JzlAWIwJGUCBBgo+ZpSGWanAYmIEgCUkgQuDGq0yGTougTEXYxG8sf/+zLEMwBHPFtBTuUouOEI5pm/bMZ7l8v/mPO/hZqS//RVAAAOQAAABeSt7bAgBtszxhYB4GhfmCazGYHQSxoQqCi4uCYPNhyKv5nqAI+IEn81YVP23nVTg1UKuJgFBcym6jqc1tgSKh7+GcQgsYlghYvyKyCSZhDpfp7VtsLhMhne1ss5ulprWdgGhF1////+lQAAmgBXCzVTjx0u//swxD2CR1RJMU9tKKDTh+Xhn2jGmIARjRpwsB9K/Rp2OQcULFsrMTgiJbVVFARDTgVIrO2LM68uO+Xe6zoLygqYDAHXZYv9C93GliIAACIpsJhZlACo2KnowEyySIHOkHgQ+aPVbNfq0Idrtr///3feAEAAQNgC8i/YOQQHX0FADwKHQYrzKQgCvBcYRHzAgjoF1LnpKoJPe2+e//syxEkCBsBJLw13JjDHhual3LEWrn0OVaiFf///////+sxI8BpgATI1M9DEswQBM5HQWsHIy9CZMJBRtJKIlYABR29sLIgCFgqVFEs/rzNwr16lxYzk0Z+XTSEQCCAaYLrFgYBAgVEmUMG/hn5EUmnhYmUaAkKOhzS6R4YwrNB5+N09H+Wozq88qPEZf/7//+x3rXWiaAA8DIxYRv/7MsRZAsboNyjMe0Rg4YcjQb9swKRhyQCk0QC4oGAk5NY/jOVggMbME4ayRZYUkctGgKLVUbKAgFH2NxZ/52lux9zP73//c1l0f////9m/zSoAYUYAACIg6AStCbiiMpEADA0QTO3szEocjNHR5sswK0CJHEaIaHHaDxon+uQx2/vt1HT+z////6cb9qVYwBnDKpuBeYELM+DoUNT/+zLEZQMHeDkmTXdGMQmJI8m/bMDzfQbiMjoeMxKQWjBMAHMKIOwUOcyQHoIyJdArUH6cSRQxIZHHqep/7/dm+gAPGACIGIX5smYGDLCmKBGdTnm6GiiZYY1YTx1RIeKgO2Q9j4eT/DoIYkNeluT+WUtBez//+mz+pX7jFgKFVaY0D5jYKGAAYYPFpiQqGY9KaK18Zj8BnHvCuFxe//swxGmCR2RHKu7pKLDtiOMBv2jIIxmZF8Y0QmBDgMMlANpjL4zGpXS16K1hPX0GxomhBGQuZhxKHHQwKmNkAiHzBdYytG2gIEWD2sLFBWQnbWwKXmHg0MBwWp554rO1RUAB2G/VFKedTFtPHfo/+z/r8+Y+NgyRCPYKpxnY+AAYEmJoRObfqEZknjeGtw6MiMOSJyXKGrAElmIA//syxHGDx1A3IG17JgDsh2LBz3DAAULJfLtM4iEspM564AP//////R7/SgAKAADCBEEJICixwVRlMVATFDgzGtNGA7sxnAzxgeBgbKonCvXFQykQQgswmAL+UWfmxSfdMGV////UJHIBCjtSJHYxkuBwSIAc0iWMzl+4w9wNwj+AZkmFQsde7wdWgcASELlYukkOySVRrlq3XDW6Nv/7MsR6g4iMLxxt+2YQ+Qbiwb9wwKKMJiAaczkM0yBfYsOOo5MLlbkwJQtDGxZDD8EBg6GmDOQUHgGpAeFEvrRuMVKX9ascvQ1Y0DQDhBYpAJUAiQIIqHhhQzaw9Z2DOxjMuhBipf8yY7ywAX0T2XLRxQNY4Ifo06c5/f93T0//o/+6T1MOpjIiBEQCxg0RQxrE7RA+1oQ1BEwwgA7/+zDEfQPHXDUabfuGANeG4oG/cMBIYwLBQxCV4HGcjSiEJBO0KRUtDKrdm4ef//////1P0SAWJAAUgK8B7ha0wDSy5dQ2dzYbwzNQEw1aX4VYcWMDpDQ1tjRerYl7y6marf//orbXQzEH0HP0U0AISQC0hKmN0MDByAK8YAOOZjDCSAMDgE0adk+VJhTBMEBZgZAS8FWW39NCYrv/+zLEiAMGjDsWDXuGAOmGo82uDNqf///p/6v9uvpCgCIxk4AHdsBA5CBAYnMSCT5mqzTUsDgjzYoE5TwUAV2ZRKRI7GobqUUvzvVwO7/////9vxXVYK9yiYaJgUkDVQUggWtZJMswWJzvUFMzDEcES1TkN+hVkFtgYfVyshBp9CVHASd9/+lfVoffs/aT/+3oSkBBgT5AlYk6rQms//syxJSDBzw1FA3roIDkBWNNnujApKRAhozVgIwtAQowEhGngjd6dRpDYQBq26snZ3+jl3//5H/9LPxm6ggbKSQTGkBwJDr9AEAZRWZh0SYgjAAdh4nEPHBJ1I+L20Vnud4NBUNXf//9lH9PR6myyEnLxTHIxkgIFsgoOhuNFBgNIiwaOJzpdEzxASS7XUMuZitqGWgTH0gqoIlpBP/7MsSfA4boLRZte2YA5YaiAb7owLmO6v9fR6/KM+v+tPb6ahpQsqVkpWKwJLBg4DAOB0YyeFg4COajuYRQYQP8HpT1wceQNLJHn2f///47Y9VxKxrhCkWPuCFhWo81A1FdTJHImAMYU1ZBCzE1tMDAQ7B43PHRwJxW4JQqQFtJU2s7///1dLdz7TLkFTS2Co0qLGjYngEk7e9diUP/+zDEqoMHICsabPMmEM4Eow2e5MIIZrVcxtoYKA8xbIDmUnGddoh0rLaVhaELboGA3I///+32tj0qUhAXA4lABA0VFRzYs5Bxwo8cRAZqIgBjC0wyrCVrVBy0Sl3U0lLcrNkmJX3vXQ9xHrF1kft9KnLd0/5XIPY0tSK0DTykPgmqBACpusgAjZhT0YwByozh1IJWKp2KmeLt9Ov/+zLEt4MG7C8QLXcGENuFYg2eZMLR2pQ6RirmqAoCYKg0PHnDwUA5I6x8afWSCCjoaGWkABNLoLs3MMFnGvzaGfMY2VvKaYxjfVvVP6f/9DGVtSlb//VsrzTGDCnJFXIg08GgaduIVUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxMQDx4gzCgzwxsDphiFBzJkQVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsTMggc4KQgN5YhA0YShqJwkmlVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zDE2QBG9BsHQYXiANIdX3A0iMBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",gP=XA(JA,mP),yP=BA.createLock(mP),vP=new QA,AP=!1,bP=function(){AP||(yP(),AP=!0)},SP=JA.decodeAudioData(gP.buffer,(function(e){null===vP.audioBufferProperty.value&&(vP.audioBufferProperty.set(e),bP())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),vP.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),bP()}));SP&&SP.then((function(e){null===vP.audioBufferProperty.value&&(vP.audioBufferProperty.set(e),bP())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),bP()}));var EP=new tS(vP,{soundClipOptions:{initialOutputLevel:.39,enabledDuringPhetioStateSetting:!0},soundManagerOptions:{categoryName:"user-interface"}});KA.register("resetAllSoundPlayer",EP);var kP="data:audio/mpeg;base64,//swxAAABriDQRQRgAEmkW2XHpAAAJQAAHgAAGAAAABIDu4cDd3/r/1wAAAAAARC/9EREd3d3PQDFg/D/lAfflAx/BMH9QP/ghBDaMSKQDL9Jl8zrxkLJ1driXbAMCtXKORoVLbBiwvIKx8m21HBZEfMq/0x/+KVG0Sv/////Uc0dO+i8Kkj3feKlhICwuZ+X8KkA4p+8BQpQAET//syxAOAB+BfSzzDADDmiiFBjAzgIQWVhDQDISg5HQzTHx2LQbHxpFGUeaRR9PJpFGqnPX9VQTICeoDA0eWdqBpYb9GV2lga/wVf/Boz4EawwCWbQYHfhmyxUqUCkE48QHSMRwuglOIhIgJrr1hocKgoLSa/2MFBBwSJBQkaQDIkNVC6Xfi9TEFNRTMuOTkuM1VVVVVVVVVVVVVVVQ==",VP=XA(JA,kP),wP=BA.createLock(kP),_P=new QA,CP=!1,xP=function(){CP||(wP(),CP=!0)},PP=JA.decodeAudioData(VP.buffer,(function(e){null===_P.audioBufferProperty.value&&(_P.audioBufferProperty.set(e),xP())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),_P.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),xP()}));PP&&PP.then((function(e){null===_P.audioBufferProperty.value&&(_P.audioBufferProperty.set(e),xP())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),xP()}));var TP=new tS(_P,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("softClickSoundPlayer",TP);var MP=new tS(ZS,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("stepBackwardSoundPlayer",MP);var LP=new tS(lE,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});KA.register("stepForwardSoundPlayer",LP);var IP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),(r=t.call(this,i)).soundClips=[];for(var a=0;a<e.length;a++){var s=e[a],o=new Eb(s.sound,s.options);o.connect(r.soundSourceDestination),r.soundClips.push(o)}return r}return _createClass(n,[{key:"play",value:function(){this.soundClips.forEach((function(e){return e.play()}))}},{key:"stop",value:function(){this.soundClips.forEach((function(e){return e.stop()}))}},{key:"connect",value:function(e){this.soundClips.forEach((function(t){return t.connect(e)}))}},{key:"dispose",value:function(){this.soundClips.forEach((function(e){return e.dispose()}))}},{key:"isPlaying",get:function(){return _.some(this.soundClips,(function(e){return e.isPlaying}))}},{key:"setOutputLevel",value:function(e,t){this.soundClips.forEach((function(n){return n.setOutputLevel(e,t)}))}}]),n}(Ab);KA.register("CompositeSoundClip",IP);var RP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({initialOutputLevel:.7,loop:!0,trimSilence:!0,fadeStartDelay:.2,fadeTime:.15,delayBeforeStop:.1,playbackRateSpanOctaves:2,playbackRateCenterOffset:0,resetInProgressProperty:null},a);(s=t.call(this,i,o)).fadeTime=o.fadeTime,s.delayBeforeStop=o.delayBeforeStop,s.nonFadedOutputLevel=void 0===o.initialOutputLevel?1:o.initialOutputLevel,s.remainingFadeTime=0,s.setOutputLevel(0,0);var l=function(e){if(!o.resetInProgressProperty||!o.resetInProgressProperty.value){var t=Math.log(e/r.min)/Math.log(r.max/r.min),n=Math.pow(2,(t-.5)*o.playbackRateSpanOctaves)+o.playbackRateCenterOffset;s.setPlaybackRate(n),s.setOutputLevel(s.nonFadedOutputLevel),s.isPlaying||s.play(),s.remainingFadeTime=o.fadeStartDelay+o.fadeTime+s.delayBeforeStop}};return e.lazyLink(l),s.disposeContinuousPropertySoundGenerator=function(){return e.unlink(l)},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeContinuousPropertySoundGenerator(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"step",value:function(e){if(this.remainingFadeTime>0){if(this.remainingFadeTime=Math.max(this.remainingFadeTime-e,0),this.remainingFadeTime<this.fadeTime+this.delayBeforeStop&&this.outputLevel>0){var t=Math.max((this.remainingFadeTime-this.delayBeforeStop)/this.fadeTime,0);this.setOutputLevel(t*this.nonFadedOutputLevel)}0===this.remainingFadeTime&&this.isPlaying&&this.stop(0)}}},{key:"reset",value:function(){this.stop(0),this.remainingFadeTime=0}}]),n}(Eb);KA.register("ContinuousPropertySoundGenerator",RP);var DP="data:audio/mpeg;base64,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VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",NP=XA(JA,DP),qP=BA.createLock(DP),OP=new QA,BP=!1,GP=function(){BP||(qP(),BP=!0)},HP=JA.decodeAudioData(NP.buffer,(function(e){null===OP.audioBufferProperty.value&&(OP.audioBufferProperty.set(e),GP())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),OP.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),GP()}));HP&&HP.then((function(e){null===OP.audioBufferProperty.value&&(OP.audioBufferProperty.set(e),GP())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),GP()}));var FP=OP,YP=function(){function e(t,n,i){_classCallCheck(this,e);var r=S()({tolerateOutOfRangeValues:!1},i);this.minValue=t.min,this.maxValue=t.max,this.span=t.getLength(),this.numBins=n,this.options=r}return _createClass(e,[{key:"mapToBin",value:function(e){this.options.tolerateOutOfRangeValues;var t=(e-this.minValue)/this.span;return Math.min(Math.floor(t*this.numBins),this.numBins-1)}}]),e}();KA.register("BinMapper",YP);var zP=YP,UP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({sound:FP,initialOutputLevel:1,numBins:7,playbackRateRange:new Tt(1,1),alwaysPlayOnChangesProperty:null,playSoundAtMin:!0,playSoundAtMax:!0,outOfRangeValuesOK:!1},r);a=t.call(this,s.sound,s);var o=new zP(i,s.numBins,{tolerateOutOfRangeValues:s.outOfRangeValuesOK}),l=function(e,t){var n=o.mapToBin(e),r=o.mapToBin(t);if(s.alwaysPlayOnChangesProperty&&s.alwaysPlayOnChangesProperty.value||e===i.min&&s.playSoundAtMin||e===i.max&&s.playSoundAtMax||n!==r){var l=(e-i.min)/i.getLength()*(s.playbackRateRange.max-s.playbackRateRange.min)+s.playbackRateRange.min;a.setPlaybackRate(l),a.play()}};return e.lazyLink(l),a.disposeDiscreteSoundGenerator=function(){e.unlink(l)},a}return _createClass(n,[{key:"dispose",value:function(){this.disposeDiscreteSoundGenerator(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Eb);KA.register("DiscreteSoundGenerator",UP);var WP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({initialPlaybackRate:1},i);return(r=t.call(this,a)).activeBufferSources=[],r.valueToWrappedAudioBufferMap=e,r.localGainNode=r.audioContext.createGain(),r.localGainNode.connect(r.soundSourceDestination),r.fullyEnabledProperty.lazyLink((function(e){e||r.stopAll()})),r.playbackRate=void 0===a.initialPlaybackRate?1:a.initialPlaybackRate,r.audioContextStateChangeListener=null,r.timeOfDeferredPlayRequest=Number.NEGATIVE_INFINITY,r}return _createClass(n,[{key:"playAssociatedSound",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.valueToWrappedAudioBufferMap.get(e);if("running"===this.audioContext.state){if(this.fullyEnabled&&i.audioBufferProperty.value){var r=this.audioContext.currentTime;this.localGainNode.gain.cancelScheduledValues(r),this.localGainNode.gain.setValueAtTime(1,r);var a=this.audioContext.createBufferSource();a.buffer=i.audioBufferProperty.value,a.playbackRate.setValueAtTime(this.playbackRate,this.audioContext.currentTime),a.connect(this.localGainNode),this.activeBufferSources.push(a),a.onended=function(){var e=t.activeBufferSources.indexOf(a);e>-1&&t.activeBufferSources.splice(e,1)},a.start(r+n)}}else this.audioContextStateChangeListener&&ub.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener),this.timeOfDeferredPlayRequest=Date.now(),this.audioContextStateChangeListener=function(){(Date.now()-t.timeOfDeferredPlayRequest)/1e3<.2&&t.playAssociatedSound(e,.1),ub.removeStateChangeListener(t.audioContext,t.audioContextStateChangeListener),t.audioContextStateChangeListener=null},ub.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener)}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e}},{key:"stopAll",value:function(){var e=this.audioContext.currentTime+.1;this.localGainNode.gain.linearRampToValueAtTime(0,e),this.activeBufferSources.forEach((function(t){t.stop(e)})),this.activeBufferSources.length=0}}]),n}(Ab);KA.register("MultiClip",WP);var jP=WP,XP=hb.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,QP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r,a,s=S()({noiseType:"pink",lowPassCutoffFrequency:null,highPassCutoffFrequency:null,centerFrequency:null,qFactor:1,lfoInitiallyEnabled:!1,lfoInitialFrequency:2,lfoInitialDepth:1,lfoType:"sine"},e),o=(i=t.call(this,s)).audioContext.currentTime;s.lowPassCutoffFrequency&&((r=i.audioContext.createBiquadFilter()).type="lowpass",r.frequency.setValueAtTime(s.lowPassCutoffFrequency,o)),s.highPassCutoffFrequency&&((a=i.audioContext.createBiquadFilter()).type="highpass",a.frequency.setValueAtTime(s.highPassCutoffFrequency,o)),s.qFactor&&s.centerFrequency?(i.bandPassFilter=i.audioContext.createBiquadFilter(),i.bandPassFilter.type="bandpass",i.bandPassFilter.frequency.setValueAtTime(s.centerFrequency,o),i.bandPassFilter.Q.setValueAtTime(s.qFactor,o)):i.bandPassFilter=null;var l=2*i.audioContext.sampleRate;i.noiseBuffer=i.audioContext.createBuffer(1,l,i.audioContext.sampleRate);var u,c=i.noiseBuffer.getChannelData(0);if("white"===s.noiseType)for(var h=0;h<l;h++)c[h]=2*Nh.nextDouble()-1;else if("pink"===s.noiseType)for(var d=0,p=0,f=0,m=0,g=0,y=0,v=0,A=0;A<l;A++)d=.99886*d+.0555179*(u=2*Nh.nextDouble()-1),p=.99332*p+.0750759*u,f=.969*f+.153852*u,m=.8665*m+.3104856*u,g=.55*g+.5329522*u,y=-.7616*y-.016898*u,c[A]=d+p+f+m+g+y+v+.5362*u,c[A]*=.11,v=.115926*u;else{if("brown"!==s.noiseType)throw new Error("unexpected value for noiseType: ".concat(s.noiseType));for(var b=0,E=0;E<l;E++)u=2*Nh.nextDouble()-1,c[E]=(b+.02*u)/1.02,b=c[E],c[E]*=3.5}i.noiseSource=null,i.lfo=i.audioContext.createOscillator(),i.lfo.type=s.lfoType,i.lfo.frequency.setValueAtTime(s.lfoInitialFrequency,o),i.lfo.start(),i.lfoAttenuatorGainNode=i.audioContext.createGain(),i.lfoAttenuatorGainNode.gain.value=s.lfoInitialDepth/2,i.lfo.connect(i.lfoAttenuatorGainNode),i.lfoControlledGainNode=i.audioContext.createGain(),i.lfoControlledGainNode.gain.value=.5,s.lfoInitiallyEnabled?(i.lfoAttenuatorGainNode.gain.setTargetAtTime(.5,i.audioContext.currentTime,XP),i.lfoAttenuatorGainNode.connect(i.lfoControlledGainNode.gain)):i.lfoAttenuatorGainNode.gain.setTargetAtTime(1,i.audioContext.currentTime,XP),i.lfoControlledGainNode.connect(i.soundSourceDestination);var k=i.lfoControlledGainNode;return a&&(a.connect(k),k=a),r&&(r.connect(k),k=r),i.bandPassFilter&&(i.bandPassFilter.connect(k),k=i.bandPassFilter),i.noiseSourceConnectionPoint=k,i.isPlaying=!1,i.timeOfDeferredStartRequest=Number.NEGATIVE_INFINITY,i.audioContextStateChangeListener=function(e){"running"===e&&i.isPlaying&&(i.start(),ub.removeStateChangeListener(i.audioContext,i.audioContextStateChangeListener))},i}return _createClass(n,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("running"===this.audioContext.state){var t=this.audioContext.currentTime;this.isPlaying||(this.noiseSource=this.audioContext.createBufferSource(),this.noiseSource.buffer=this.noiseBuffer,this.noiseSource.loop=!0,this.noiseSource.connect(this.noiseSourceConnectionPoint),this.noiseSource.start(t+e))}else this.timeOfDeferredStartRequest=Date.now(),ub.hasListener(this.audioContext,this.audioContextStateChangeListener)||ub.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener);this.isPlaying=!0}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.isPlaying&&this.noiseSource&&(this.noiseSource.stop(e),this.noiseSource=null),this.isPlaying=!1}},{key:"setLfoFrequency",value:function(e){this.lfo.frequency.setTargetAtTime(e,this.audioContext.currentTime,XP)}},{key:"setLfoDepth",value:function(e){this.lfoAttenuatorGainNode.gain.setTargetAtTime(e/2,this.audioContext.currentTime,.05)}},{key:"setLfoEnabled",value:function(e){e?(this.lfoAttenuatorGainNode.gain.setTargetAtTime(.5,this.audioContext.currentTime,XP),this.lfoAttenuatorGainNode.connect(this.lfoControlledGainNode.gain)):(this.lfoAttenuatorGainNode.disconnect(this.lfoControlledGainNode.gain),this.lfoAttenuatorGainNode.gain.setTargetAtTime(1,this.audioContext.currentTime,XP))}},{key:"setBandpassFilterCenterFrequency",value:function(e,t){t=t||XP,null!==this.bandPassFilter&&this.bandPassFilter.frequency.setTargetAtTime(e,this.audioContext.currentTime,t)}}]),n}(Ab);KA.register("NoiseGenerator",QP);var KP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({initialFrequency:440,initialWaveformType:"sine"},e);return(i=t.call(this,r)).oscillatorNode=null,i.frequency=r.initialFrequency,i.waveformType=r.initialWaveformType,i}return _createClass(n,[{key:"play",value:function(){this.oscillatorNode||(this.oscillatorNode=JA.createOscillator(),this.oscillatorNode.type=this.waveformType,this.oscillatorNode.frequency.setValueAtTime(this.frequency,JA.currentTime),this.oscillatorNode.connect(this.masterGainNode),this.oscillatorNode.start())}},{key:"stop",value:function(){this.oscillatorNode&&(this.oscillatorNode.stop(),this.oscillatorNode=null)}},{key:"setWaveformType",value:function(e){this.waveformType=e,this.oscillatorNode&&(this.oscillatorNode.type=e)}}]),n}(Ab);KA.register("OscillatorSoundGenerator",KP);var JP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({pitchRange:new Tt(220,660),numPopGenerators:8},e);(i=t.call(this,r)).pitchRange=r.pitchRange;var a=i.audioContext.createDynamicsCompressor(),s=i.audioContext.currentTime;return a.threshold.setValueAtTime(-3,s),a.knee.setValueAtTime(0,s),a.ratio.setValueAtTime(12,s),a.attack.setValueAtTime(0,s),a.release.setValueAtTime(.25,s),a.connect(i.soundSourceDestination),i.soundSources=[],_.times(r.numPopGenerators,(function(){var e=i.audioContext.createOscillator(),t=i.audioContext.currentTime;e.type="sine",e.frequency.setValueAtTime(r.pitchRange.min,t),e.start(0);var n=i.audioContext.createGain();n.gain.setValueAtTime(0,t),e.connect(n),n.connect(a),i.soundSources.push({oscillator:e,gainNode:n})})),i.nextSoundSourceIndex=0,i}return _createClass(n,[{key:"playPop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.02;if(this.fullyEnabled){var n=this.pitchRange.min,i=this.pitchRange.max,r=n+e*(i-n),a=this.soundSources[this.nextSoundSourceIndex];this.nextSoundSourceIndex=(this.nextSoundSourceIndex+1)%this.soundSources.length;var s=this.audioContext.currentTime;a.gainNode.gain.cancelScheduledValues(s),a.oscillator.frequency.setValueAtTime(r/2,s),a.gainNode.gain.setValueAtTime(0,s),a.oscillator.frequency.linearRampToValueAtTime(2*r,s+t),a.gainNode.gain.setTargetAtTime(1,s,.005),a.gainNode.gain.setTargetAtTime(0,s+t,.005)}}}]),n}(Ab);KA.register("PitchedPopGenerator",JP);var ZP=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({linkLazily:!0},r);a=t.call(this,i,s);var o=function(e){a.playAssociatedSound(e)};return s.linkLazily?e.lazyLink(o):e.link(o),a.disposePropertyMultiClip=function(){e.unlink(o)},a}return _createClass(n,[{key:"dispose",value:function(){this.disposePropertyMultiClip()}}]),n}(jP);KA.register("PropertyMultiClip",ZP);var $P=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({initialOutputLevel:.7,soundClipOptions:null,arpeggiate:!1,arpeggiateTime:.1,chordPlaybackRates:[Math.pow(2,1/12),Math.pow(2,4/12),Math.pow(2,7/12)]},i);return a.soundClipOptions,(r=t.call(this,a)).arpeggiate=a.arpeggiate,r.arpeggiateTime=a.arpeggiateTime,r.playbackSoundClips=a.chordPlaybackRates.map((function(t){var n=new Eb(e,A({initialPlaybackRate:t},a.soundClipOptions));return n.connect(r.soundSourceDestination),n})),r.isPlayingProperty=Ut.or(r.playbackSoundClips.map((function(e){return e.isPlayingProperty}))),r}return _createClass(n,[{key:"play",value:function(){var e=this;this.playbackSoundClips.forEach((function(t,n){var i=e.arpeggiate?n*e.arpeggiateTime/e.playbackSoundClips.length:0;t.play(i)}))}},{key:"stop",value:function(){this.playbackSoundClips.forEach((function(e){e.stop()}))}},{key:"dispose",value:function(){this.playbackSoundClips.forEach((function(e){return e.dispose()})),this.playbackSoundClips.length=0,_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Ab);KA.register("SoundClipChord",$P);var eT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({frequencyProperty:null,depthProperty:null,waveformProperty:null},e);(i=t.call(this,r)).myEnabledProperty=i.enabledProperty,i.frequencyProperty=r.frequencyProperty||new Nt(5),i.depthProperty=r.depthProperty||new Nt(.9),i.waveformProperty=r.waveformProperty||new dt("sine"),i.modulatedGainNode=JA.createGain(),i.modulatedGainNode.gain.value=.5;var a=JA.createGain();a.connect(i.modulatedGainNode.gain);var s=null,o=function(e){var t=JA.currentTime;if(e){var n=i.depthProperty.value;a.gain.setValueAtTime(n/2,JA.currentTime),i.modulatedGainNode.gain.setValueAtTime(1-n/2,JA.currentTime),(s=JA.createOscillator()).frequency.setValueAtTime(i.frequencyProperty.value,t),s.type=i.waveformProperty.value,s.connect(a),s.start()}else s.stop(),s=null,i.modulatedGainNode.gain.setValueAtTime(1,t)};i.enabledProperty.link(o);var l=function(e){s&&(a.gain.setValueAtTime(e/2,JA.currentTime),i.modulatedGainNode.gain.setValueAtTime(1-e/2,JA.currentTime))};i.depthProperty.link(l);var u=function(e){s&&(s.type=e)};i.waveformProperty.link(u);var c=function(e){s&&s.frequency.setValueAtTime(e,JA.currentTime)};return i.frequencyProperty.link(c),i.disposeAmplitudeModulator=function(){i.enabledProperty.unlink(o),i.depthProperty.unlink(l),i.waveformProperty.unlink(u),i.frequencyProperty.unlink(c)},i}return _createClass(n,[{key:"dispose",value:function(){this.disposeAmplitudeModulator(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"getConnectionPoint",value:function(){return this.modulatedGainNode}},{key:"connect",value:function(e){this.modulatedGainNode.connect(e)}}]),n}(ec);KA.register("AmplitudeModulator",eT);var tT=function(e){_inherits(n,_wrapNativeSuper(AudioWorkletNode));var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({logZeroValues:!1},e);return(i=t.call(this,JA,"peak-detector")).port.onmessage=function(e){if(void 0!==e.data.peak){var t=e.data.peak;(t>0||r.logZeroValues)&&console.log("peak = ".concat(t))}},i}return _createClass(n)}();console.log("loading peak-detector module on audio rendering thread..."),JA.audioWorklet.addModule("../../tambo/js/peak-detector.js").then((function(){console.log("peak detector worklet loaded successfully")})).catch((function(e){console.warn("error while loading peak detector worklet, peak detector probably won't work, error: ".concat(e))})),KA.register("PeakDetectorAudioNode",tT);var nT=iv("TAMBO");KA.register("TamboStrings",nT);var iT=KA,rT=new U("Float64ArrayIO",{valueType:Float64Array,toStateObject:function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},fromStateObject:function(e){return new Float64Array(e)},stateSchema:F.asValue("Float64Array",{isValidValue:function(e){return Array.isArray(e)&&void 0===e.find((function(e){return"number"!=typeof e}))}}),applyState:function(e,t){return e.set(t)}});V.register("Float64ArrayIO",rT);var aT=new Map,sT={valueType:Array,isValidValue:function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))}};function oT(e,t){var n=e.typeName+","+t.typeName;return aT.has(n)||aT.set(n,new U("MapIO<".concat(e.typeName,",").concat(t.typeName,">"),{valueType:Map,isValidValue:function(n){var i,r=_createForOfIteratorHelper(n);try{for(r.s();!(i=r.n()).done;){var a=_slicedToArray(i.value,2),s=a[0],o=a[1];if(!I.isValueValid(s,e.validator))return!1;if(!I.isValueValid(o,t.validator))return!1}}catch(l){r.e(l)}finally{r.f()}return!0},parameterTypes:[e,t],toStateObject:function(n){var i,r=[],a=_createForOfIteratorHelper(n);try{for(a.s();!(i=a.n()).done;){var s=_slicedToArray(i.value,2),o=s[0],l=s[1];r.push([e.toStateObject(o),t.toStateObject(l)])}}catch(u){a.e(u)}finally{a.f()}return r},fromStateObject:function(n){var i=n.map((function(n){return[e.fromStateObject(n[0]),t.fromStateObject(n[1])]}));return new Map(i)},documentation:"IO Type for the built-in JS Map type, with the key and value types specified.",stateSchema:F.asValue("Map<".concat(e.typeName,",").concat(t.typeName,">"),{isValidValue:function(e){if(!I.isValueValid(e,sT))return!1;for(var t=0;t<e.length;t++){var n=e[t];if(!Array.isArray(n))return!1;if(2!==n.length)return!1}return!0}})})),aT.get(n)}V.register("MapIO",oT);var lT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){return _classCallCheck(this,n),t.call(this,e,i,_objectSpread(_objectSpread({},r),{},{isValidTandemName:function(e){return/^[a-zA-Z0-9_]+$/.test(e)}}))}return _createClass(n,[{key:"getArchetypalPhetioID",value:function(){return window.phetio.PhetioIDUtils.append(this.parentTandem.getArchetypalPhetioID(),"archetype")}}]),n}(xe);_defineProperty(lT,"DYNAMIC_ARCHETYPE_NAME","archetype"),V.register("DynamicTandem",lT);var uT=lT;var cT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({phetioState:!1,tandem:xe.OPTIONAL,supportsDynamicState:!0,containerSuffix:"Container",phetioDynamicElementName:void 0},r);if(Array.isArray(i),s.phetioDynamicElementName=s.tandem.name.slice(0,s.tandem.name.length-s.containerSuffix.length),(a=t.call(this,s)).supportsDynamicState=s.supportsDynamicState,a.phetioDynamicElementName=s.phetioDynamicElementName,a.createElement=e,a.defaultArguments=i,a._archetype=a.createArchetype(),a.elementCreatedEmitter=new Et({parameters:[{valueType:Be,phetioType:s.phetioType.parameterTypes[0],name:"element"},{name:"phetioID",phetioType:Te}],tandem:s.tandem.createTandem("elementCreatedEmitter"),phetioDocumentation:"Emitter that fires whenever a new dynamic element is added to the container."}),a.elementDisposedEmitter=new Et({parameters:[{valueType:Be,phetioType:s.phetioType.parameterTypes[0],name:"element"},{name:"phetioID",phetioType:Te}],tandem:s.tandem.createTandem("elementDisposedEmitter"),phetioDocumentation:"Emitter that fires whenever a dynamic element is removed from the container."}),xe.PHET_IO_ENABLED&&(a.elementCreatedEmitter.addListener((function(e){return a.createdEventListener(e)})),a.elementDisposedEmitter.addListener((function(e){return a.disposedEventListener(e)}))),a.notificationsDeferred=!1,a.deferredCreations=[],a.deferredDisposals=[],xe.PHET_IO_ENABLED&&a.supportsDynamicState&&!a.phetioIsArchetype){var o=phet.phetio.phetioEngine.phetioStateEngine;o.onBeforeStateSetEmitter.addListener((function(e,t){a.tandem.hasAncestor(t)&&(a.clear(),a.setNotificationsDeferred(!0))})),o.stateSetEmitter.addListener((function(){a.notificationsDeferred&&a.setNotificationsDeferred(!1)})),o.addSetStateHelper((function(e,t){for(var n=!1,i=0;a.deferredCreations.length>0;){if(i>200)throw new Error("Too many iterations in deferred creations, stillToSetIDs = "+t.join(", "));var r=a.deferredCreations[0];a.stateSetOnAllChildrenOfDynamicElement(r.tandem.phetioID,t)&&(a.notifyElementCreatedWhileDeferred(r),n=!0),i++}return n}))}return a}return _createClass(n,[{key:"stateSetOnAllChildrenOfDynamicElement",value:function(e,t){for(var n=0;n<t.length;n++)if(phetio.PhetioIDUtils.isAncestor(e,t[n]))return!1;return!0}},{key:"createArchetype",value:function(){if(_.hasIn(window,"phet.joist.sim")&&phet.joist.sim.isConstructionCompleteProperty.value)return null;if(xe.PHET_IO_ENABLED&&phet.preloads.phetio.createArchetypes){var e=Array.isArray(this.defaultArguments)?this.defaultArguments:this.defaultArguments(),t=this.createElement.apply(this,[this.tandem.createTandem("archetype")].concat(_toConsumableArray(e)));return this.isPhetioInstrumented()&&t.markDynamicElementArchetype(),t}return null}},{key:"createDynamicElement",value:function(e,t,n){var i;i=this.tandem.hasChild(e)?this.tandem.createTandem(e,this.tandem.getExtendedOptions()):new uT(this.tandem,e,this.tandem.getExtendedOptions());var r=this.createElement.apply(this,[i].concat(_toConsumableArray(t)));return xe.PHET_IO_ENABLED&&D(r,n.validator),r}},{key:"assertDynamicPhetioObject",value:function(e){xe.PHET_IO_ENABLED&&xe.VALIDATION}},{key:"emitDataStreamEvent",value:function(e,t,n){this.phetioStartEvent(t,{data:A({phetioID:e.tandem.phetioID},n)}),this.phetioEndEvent()}},{key:"createdEventListener",value:function(e){var t=e.phetioState?{state:this.phetioType.parameterTypes[0].toStateObject(e)}:null;this.emitDataStreamEvent(e,"created",t)}},{key:"disposedEventListener",value:function(e){this.emitDataStreamEvent(e,"disposed")}},{key:"dispose",value:function(){}},{key:"disposeElement",value:function(e){e.dispose(),this.notificationsDeferred?this.deferredDisposals.push(e):this.elementDisposedEmitter.emit(e,e.tandem.phetioID)}},{key:"notifyElementDisposedWhileDeferred",value:function(e){this.elementDisposedEmitter.emit(e,e.tandem.phetioID),J(this.deferredDisposals,e)}},{key:"notifyElementCreated",value:function(e){this.notificationsDeferred?this.deferredCreations.push(e):this.elementCreatedEmitter.emit(e,e.tandem.phetioID)}},{key:"notifyElementCreatedWhileDeferred",value:function(e){this.elementCreatedEmitter.emit(e,e.tandem.phetioID),J(this.deferredCreations,e)}},{key:"setNotificationsDeferred",value:function(e){if(!e){for(;this.deferredCreations.length>0;)this.notifyElementCreatedWhileDeferred(this.deferredCreations[0]);for(;this.deferredDisposals.length>0;)this.notifyElementDisposedWhileDeferred(this.deferredDisposals[0])}this.notificationsDeferred=e}},{key:"archetype",get:function(){return function(e){if(null===e)throw new Error("archetype should exist");return e}(this._archetype)}},{key:"getMetadata",value:function(e){var t=_get(_getPrototypeOf(n.prototype),"getMetadata",this).call(this,e);return A({phetioDynamicElementName:this.phetioDynamicElementName},t)}}]),n}(Be);V.register("PhetioDynamicElementContainer",cT);var hT=cT,dT=new Map,pT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;return _classCallCheck(this,n),r=S()({tandem:xe.OPTIONAL,containerSuffix:"Capsule"},r),(a=t.call(this,e,i,r)).element=null,a}return _createClass(n,[{key:"disposeElement",value:function(){_get(_getPrototypeOf(n.prototype),"disposeElement",this).call(this,this.element),this.element=null}},{key:"hasElement",value:function(){return null!==this.element}},{key:"getElement",value:function(){if(!this.element){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.create(t)}return this.element}},{key:"clear",value:function(){this.element&&this.disposeElement()}},{key:"create",value:function(e){return this.element=this.createDynamicElement(this.phetioDynamicElementName,e,xe.PHET_IO_ENABLED?this.phetioType.parameterTypes[0]:null),this.notifyElementCreated(this.element),this.element}}]),n}(hT);_defineProperty(pT,"PhetioCapsuleIO",(function(e){return dT.has(e)||dT.set(e,new U("PhetioCapsuleIO<".concat(e.typeName,">"),{valueType:pT,documentation:"An array that sends notifications when its values have changed.",parameterTypes:[e],metadataDefaults:{phetioDynamicElementName:null},addChildElement:function(t,n,i){var r=e.stateToArgsForConstructor(i);return t.create(r,!0)}})),dT.get(e)})),V.register("PhetioCapsule",pT);var fT=new Map,mT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({tandem:xe.OPTIONAL,containerSuffix:"Group"},r);return(a=t.call(this,e,i,s))._array=[],a.groupElementIndex=0,a.countProperty=new Nt(0,{tandem:s.tandem.createTandem("countProperty"),phetioDocumentation:"the number of elements in the group",phetioReadOnly:!0,phetioFeatured:!0,numberType:"Integer"}),a}return _createClass(n,[{key:"dispose",value:function(){}},{key:"disposeElement",value:function(e){J(this._array,e),this.countProperty.value=this._array.length,_get(_getPrototypeOf(n.prototype),"disposeElement",this).call(this,e)}},{key:"getArray",value:function(){return this._array}},{key:"getArrayCopy",value:function(){return this._array.slice()}},{key:"getElement",value:function(e){return this._array[e]}},{key:"getLastElement",value:function(){return this.getElement(this.count-1)}},{key:"count",get:function(){return this.countProperty.value}},{key:"filter",value:function(e){return this._array.filter(e)}},{key:"includes",value:function(e){return this._array.includes(e)}},{key:"indexOf",value:function(e){return this._array.indexOf(e)}},{key:"forEach",value:function(e){this._array.forEach(e)}},{key:"find",value:function(e){return this._array.find(e)}},{key:"map",value:function(e){return this._array.map(e)}},{key:"clear",value:function(e){for(var t=S()({resetIndex:!0},e);this._array.length>0;)this.disposeElement(this._array[0]);t.resetIndex&&(this.groupElementIndex=0)}},{key:"createCorrespondingGroupElement",value:function(e){var t=window.phetio.PhetioIDUtils.getGroupElementIndex(e);this.groupElementIndex===t&&this.groupElementIndex++;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.createIndexedElement(t,i)}},{key:"createNextElement",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.createIndexedElement(this.groupElementIndex++,t)}},{key:"createIndexedElement",value:function(e,t){var n=this.phetioDynamicElementName+window.phetio.PhetioIDUtils.GROUP_SEPARATOR+e,i=xe.PHET_IO_ENABLED?this.phetioType.parameterTypes[0]:null,r=this.createDynamicElement(n,t,i);return this._array.push(r),this.countProperty.value=this._array.length,this.notifyElementCreated(r),r}}]),n}(hT);_defineProperty(mT,"PhetioGroupIO",(function(e){return fT.has(e)||fT.set(e,new U("PhetioGroupIO<".concat(e.typeName,">"),{isValidValue:function(e){return e instanceof(window.phet?phet.tandem.PhetioGroup:V.PhetioGroup)},documentation:"An array that sends notifications when its values have changed.",metadataDefaults:{phetioDynamicElementName:null},parameterTypes:[e],addChildElement:function(t,n,i){var r=e.stateToArgsForConstructor(i),a=window.phetio.PhetioIDUtils.getGroupElementIndex(n),s=t.createIndexedElement(a,r,!0);return t.groupElementIndex=Math.max(a+1,t.groupElementIndex),s}})),fT.get(e)})),V.register("PhetioGroup",mT);n(37);var gT=V,yT=new c("tappi"),vT=_createClass((function e(t,n,i,r){_classCallCheck(this,e),this.x=t,this.y=n,this.time=i,this.name=r}));yT.register("VibrationTestEvent",vT);var AT=vT,bT=function(){function e(t){var n=this;_classCallCheck(this,e),this.events=[],window.addEventListener("message",(function(e){if("string"==typeof e.data&&"requestVibrationData"===e.data){var i=n.dataToString();t.saveTestEvents(i)}}))}return _createClass(e,[{key:"addTestEvent",value:function(e){this.events.push(e)}},{key:"dataToString",value:function(){var e="";return this.events.forEach((function(t){e+="".concat(t.x,","),e+="".concat(t.y,","),e+="".concat(t.time,","),e+="".concat(t.name,";")})),e}}]),e}();yT.register("VibrationTestEventRecorder",bT);var ST=function(){function e(t){var n=this;_classCallCheck(this,e),this.eventRecorder=t,this.elapsedTime=0,this._pointerListener={up:function(e){var t=e.pointer.point,i=new AT(t.x,t.y,n.elapsedTime,"".concat(e.pointer.type,"up"));n.eventRecorder.addTestEvent(i),n.handleRelease()},cancel:function(e){n.handleRelease()},move:function(e){var t=e.pointer.point,i=new AT(t.x,t.y,n.elapsedTime,"".concat(e.pointer.type,"move"));n.eventRecorder.addTestEvent(i)}},this.pointer=null}return _createClass(e,[{key:"handleRelease",value:function(e){this.pointer.removeInputListener(this._pointerListener),this.pointer=null}},{key:"interrupt",value:function(){this.pointer&&(this.pointer.removeInputListener(this._pointerListener),this.pointer=null)}},{key:"down",value:function(e){if(null===this.pointer){this.pointer=e.pointer;var t=e.pointer.point,n=new AT(t.x,t.y,this.elapsedTime,"".concat(e.pointer.type,"down"));this.eventRecorder.addTestEvent(n),e.pointer.addInputListener(this._pointerListener,!1)}}},{key:"click",value:function(e){var t=e.target.globalBounds.center;console.log(t);var n=new AT(t.x,t.y,this.elapsedTime,e.pointer.type);this.eventRecorder.addTestEvent(n)}},{key:"setElapsedTime",value:function(e){this.elapsedTime=e}}]),e}();yT.register("VibrationTestInputListener",ST);var ET=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n),a=A({labelFont:new tA(24)},a),(s=t.call(this)).vibratingProperty=e,s.timeProperty=new Nt(0),s.vibrationSeries=new hA({color:"orange"});var o=new Xl("Vibration",{rotation:-Math.PI/2,font:a.labelFont}),l=new Xl("Time (s)",{font:a.labelFont}),u=new PA(s.timeProperty,[s.vibrationSeries],new Xl(""),{width:i,height:r,verticalAxisLabelNode:o,horizontalAxisLabelNode:l,numberVerticalLines:10,numberHorizontalLines:3,verticalRanges:[new Tt(-1.5,1.5)]}),c=new jo;c.addChild(u);var h=new rA(c,{fill:"lightgrey"});return s.addChild(h),s.mutate(a),s}return _createClass(n,[{key:"step",value:function(e){this.timeProperty.set(this.timeProperty.get()+e);var t=this.vibratingProperty.get()?1:-1;for(this.vibrationSeries.addXYDataPoint(this.timeProperty.get(),t);this.vibrationSeries.getDataPoint(0).x<this.timeProperty.value-10;)this.vibrationSeries.shiftData()}}]),n}(jo);yT.register("VibrationChart",ET);var kT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n),(i=t.call(this)).timeProperty=new Nt(0),i.vibratingProperty=e;var r=new iu(0,0,40,75,4,4,{fill:"white"}),a=new iu(0,0,r.width-5,r.height-20,{fill:"white",center:r.center}),s=new $l(2,{fill:"black",center:r.centerBottom.minusXY(0,5)}),o=new iu(0,0,.35*r.width,.03*r.height,4,4,{fill:"black",center:r.centerTop.plusXY(0,5)});r.addChild(a),r.addChild(s),r.addChild(o);var l=new Ni;l.moveTo(0,0),l.zigZagTo(0,a.height,.1*r.width,3,!0);var u=r.leftCenter.minusXY(8,0),c=r.rightCenter.plusXY(8,0);i.leftVibrationPath=new Hl(l,{stroke:"orange",lineWidth:4,rightCenter:u}),i.leftVibrationPath.setScaleMagnitude(-1,1),i.rightVibrationPath=new Hl(l,{stroke:"orange",lineWidth:4,leftCenter:c}),r.addChild(i.leftVibrationPath),r.addChild(i.rightVibrationPath);var h=new iu(0,0,r.width,r.height+10,5,5,{fill:"black"});return r.center=h.center,h.addChild(r),i.addChild(h),i.vibratingProperty.link((function(e){a.fill=e?"lightblue":"grey",i.leftVibrationPath.visible=e,i.rightVibrationPath.visible=e,i.leftVibrationPath.center=u,i.rightVibrationPath.center=c})),i}return _createClass(n,[{key:"step",value:function(e){if(this.timeProperty.set(this.timeProperty.get()+e),this.vibratingProperty.get()){var t=-Math.sin(70*this.timeProperty.get()),n=.5*Math.sin(10*this.timeProperty.get());this.rightVibrationPath.translate(t,n),this.leftVibrationPath.translate(t,n)}}}]),n}(jo);yT.register("VibrationIndicator",kT);var VT=function(){function e(t,n){_classCallCheck(this,e),_defineProperty(this,"patternIndex",0),_defineProperty(this,"patternValue",0),_defineProperty(this,"valueTime",0),_defineProperty(this,"runningPattern",!1);var i=S()({repeat:!0,sharpness:1,intensity:1,activePattern:[]},n);this.vibrationManageriOS=t,this.activePattern=i.activePattern,this.repeat=i.repeat,this.intensity=i.intensity,this.sharpness=i.sharpness,this.pendingPattern=this.activePattern}return _createClass(e,[{key:"step",value:function(e){this.runningPattern&&(this.valueTime+=e,this.valueTime>=this.patternValue&&(this.valueTime=0,this.patternIndex++,this.patternIndex<this.activePattern.length?(this.patternValue=this.activePattern[this.patternIndex],this.patternIndex%2==0?this.vibrationManageriOS.vibrateContinuous({intensity:this.intensity,sharpness:this.sharpness}):this.vibrationManageriOS.stop()):this.repeat?(_.isEqual(this.pendingPattern,this.activePattern)||this.setNewActivePattern(this.pendingPattern),this.start()):this.stop()))}},{key:"setNewActivePattern",value:function(e){this.activePattern=e,this.resetPattern()}},{key:"setPattern",value:function(e){this.pendingPattern=e,this.runningPattern||this.setNewActivePattern(this.pendingPattern)}},{key:"setIntensity",value:function(e){this.intensity=e}},{key:"setSharpness",value:function(e){this.sharpness=e}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"start",value:function(){this.runningPattern=!0,this.resetPattern(),this.vibrationManageriOS.vibrateContinuous({intensity:this.intensity,sharpness:this.sharpness})}},{key:"stop",value:function(){this.runningPattern&&(this.vibrationManageriOS.stop(),this.runningPattern=!1,this.resetPattern())}},{key:"resetPattern",value:function(){this.patternIndex=0,this.patternValue=this.activePattern[this.patternIndex],this.valueTime=0}}]),e}();yT.register("ContinuousPatternVibrationController",VT);var wT=function(){function e(){if(_classCallCheck(this,e),!window.webkit)throw new Error("not on this device!");this.vibrationMessageHandlers=window.webkit.messageHandlers}return _createClass(e,[{key:"vibrate",value:function(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateMessageHandler&&this.vibrationMessageHandlers.vibrateMessageHandler.postMessage({duration:e})}},{key:"vibrateForever",value:function(){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateForeverMessageHandler&&this.vibrationMessageHandlers.vibrateForeverMessageHandler.postMessage({})}},{key:"vibrateContinuous",value:function(e){var t=S()({pattern:[],sharpness:1,intensity:1,frequency:null,duration:null},e);this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateContinuousMessageHandler&&this.vibrationMessageHandlers.vibrateContinuousMessageHandler.postMessage({pattern:t.pattern,sharpness:t.sharpness,duration:t.duration,intensity:t.intensity,frequency:t.frequency})}},{key:"vibrateTransient",value:function(e){var t=S()({sharpness:1,intensity:1},e);this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateTransientMessageHandler&&this.vibrationMessageHandlers.vibrateTransientMessageHandler.postMessage({sharpness:t.sharpness,intensity:t.intensity})}},{key:"vibrateAtFrequency",value:function(e,t){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateFrequencyMessageHandler&&this.vibrationMessageHandlers.vibrateFrequencyMessageHandler.postMessage({duration:e,frequency:t})}},{key:"vibrateAtFrequencyForever",value:function(e,t){t="number"==typeof t?t:1,t=En.clamp(t,0,1),this.debug("".concat(t)),this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateFrequencyForeverMessageHandler&&this.vibrationMessageHandlers.messageHandlers.vibrateFrequencyForeverMessageHandler.postMessage({frequency:e,intensity:t})}},{key:"vibrateWithCustomPattern",value:function(e,t,n){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateWithCustomPatternMessageHandler&&this.vibrationMessageHandlers.vibrateWithCustomPatternMessageHandler.postMessage({vibrationPattern:e,duration:t,loopForever:n})}},{key:"vibrateWithCustomPatternDuration",value:function(e,t){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateWithCustomPatternDurationMessageHandler&&this.vibrationMessageHandlers.vibrateWithCustomPatternDurationMessageHandler.postMessage({vibrationPattern:e,duration:t})}},{key:"vibrateWithCustomPatternForever",value:function(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrateWithCustomPatternForeverMessageHandler&&this.vibrationMessageHandlers.vibrateWithCustomPatternForeverMessageHandler.postMessage({vibrationPattern:e})}},{key:"setVibrationIntensity",value:function(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrationIntensityMessageHandler&&this.vibrationMessageHandlers.vibrationIntensityMessageHandler.postMessage({intensity:e})}},{key:"setVibrationSharpness",value:function(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.vibrationSharpnessMessageHandler&&this.vibrationMessageHandlers.vibrationSharpnessMessageHandler.postMessage({sharpness:e})}},{key:"stop",value:function(){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.stopMessageHandler&&this.vibrationMessageHandlers.stopMessageHandler.postMessage({})}},{key:"saveTestEvents",value:function(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.saveDataMessageHandler&&this.vibrationMessageHandlers.saveDataMessageHandler.postMessage({dataString:e})}},{key:"debug",value:function(e){this.vibrationMessageHandlers&&this.vibrationMessageHandlers.debugMessageHandler&&this.vibrationMessageHandlers.debugMessageHandler.postMessage({debugString:e})}}]),e}();yT.register("VibrationManageriOS",wT);var _T={HZ_2_5:[200,200],HZ_5:[100,100],HZ_10:[50,50],HZ_25:[25,25],MOTOR_CALL:null,HZ_50:[10,10],HZ_200:[5,5],QUICK_BALL_ROLL:[70,100],SLOW_BALL_ROLL:[700,300],FLUTTER:[10,10,10,10,10,20,10,20,10,20,10,20,10,20,10,50,10,50,10,50,10,50,10,50,10,70,10,70,10,70,10],SLOW_DOWN:[70,300,70,400,100,500,200,500],HEARTBEAT:[100,100,150,1e3],QUICK_HEARTBEAT:[50,50,100,700],interactionSuccess:function(e){e.vibrateTransient(),mt.setTimeout((function(){e.vibrateTransient(),mt.setTimeout((function(){e.vibrateTransient()}),150)}),150)}};yT.register("VibrationPatterns",_T);var CT=[8,8],xT=[Number.MAX_SAFE_INTEGER,0],PT=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.apply(this,arguments)}return _createClass(n)}(ee);_defineProperty(PT,"HIGH",new PT),_defineProperty(PT,"LOW",new PT),_defineProperty(PT,"enumeration",new re(PT));var TT=_.noop,MT=[Number.MAX_SAFE_INTEGER],LT=new(function(){function e(){_classCallCheck(this,e),_defineProperty(this,"enabledProperty",new pt(!0)),_defineProperty(this,"vibratingProperty",new pt(!1)),_defineProperty(this,"intensityProperty",new AS(PT.HIGH)),_defineProperty(this,"_runningVibration",!1),_defineProperty(this,"_vibrationPattern",MT),_defineProperty(this,"_intensityDuration",0),_defineProperty(this,"_timeRunningCurrentInterval",0),_defineProperty(this,"_patternTimeLimit",Number.POSITIVE_INFINITY),_defineProperty(this,"_timeRunningCurrentPattern",0),_defineProperty(this,"_currentIntervalIndex",0),_defineProperty(this,"_vibrationIntensityPattern",xT),_defineProperty(this,"_navigatorVibrationCallback",TT),_defineProperty(this,"expandedPatternInterval",TT)}return _createClass(e,[{key:"initialize",value:function(e,t){var n=this;this.setVibrationIntensity(this.intensityProperty.get()),nn.multilink([this.vibratingProperty,this.intensityProperty],(function(e,t){n.controlNavigator()})),nn.multilink([this.enabledProperty,e,t],(function(e,t,i){e&&t&&i&&n.stopVibrate()}))}},{key:"controlNavigator",value:function(){var e=this;if(this._navigatorVibrationCallback&&(mt.clearInterval(this._navigatorVibrationCallback),this._navigatorVibrationCallback=TT,navigator.vibrate(0)),this.vibratingProperty.get()){var t=function(){navigator.vibrate(e._vibrationIntensityPattern)};this._navigatorVibrationCallback=mt.setInterval(t,this._intensityDuration),t()}}},{key:"startVibrate",value:function(e){this.resetTimingVariables(),this._runningVibration=!0,this._vibrationPattern=e||MT}},{key:"stopVibrate",value:function(){this._runningVibration=!1,this.vibratingProperty.set(!1)}},{key:"startTimedVibrate",value:function(e,t){this.resetTimingVariables(),this._patternTimeLimit=e,this._runningVibration=!0,this._vibrationPattern=t||MT}},{key:"startRepeatingVibrationPattern",value:function(e){this.stopRepeatingVibrationPattern();var t=e.reduce((function(e,t){return e+t}),0);phet.log&&phet.log("providedPatternDuration = ".concat(t));var n=Math.floor(5e3/t)+1;phet.log&&phet.log("repeatCount = ".concat(n));var i=[],r=0;_.times(n,(function(){e.forEach((function(e){i.push(e),r+=e}))})),phet.log&&phet.log("expandedPattern = ".concat(i)),phet.log&&phet.log("expandedPattern.length = ".concat(i.length)),phet.log&&phet.log("totalPatternTime = ".concat(r)),navigator.vibrate(i),this.expandedPatternInterval=mt.setInterval((function(){navigator.vibrate(i),phet.log&&phet.log("restarting pattern")}),r)}},{key:"stopRepeatingVibrationPattern",value:function(){navigator.vibrate(0),this.expandedPatternInterval!==TT&&(mt.clearInterval(this.expandedPatternInterval),this.expandedPatternInterval=TT)}},{key:"isVibrating",value:function(){return this.vibratingProperty.get()}},{key:"isRunningPattern",value:function(){return this._runningVibration}},{key:"setVibrationIntensity",value:function(e){e===PT.LOW?this._vibrationIntensityPattern=CT:e===PT.HIGH&&(this._vibrationIntensityPattern=xT);var t=_.reduce(this._vibrationIntensityPattern,(function(e,t){return e+t}));this._intensityDuration="number"==typeof t?t:0,this.intensityProperty.set(e)}},{key:"resetTimingVariables",value:function(){this._timeRunningCurrentInterval=0,this._timeRunningCurrentPattern=0,this._currentIntervalIndex=0,this._patternTimeLimit=Number.POSITIVE_INFINITY}},{key:"step",value:function(e){if(e*=1e3,this._runningVibration){var t=this._vibrationPattern[this._currentIntervalIndex];if(this._timeRunningCurrentInterval>t){var n=this._currentIntervalIndex+1;this._currentIntervalIndex=n<this._vibrationPattern.length?n:0,this._timeRunningCurrentInterval=0}else this._currentIntervalIndex%2==0?this.vibratingProperty.set(!0):this.vibratingProperty.set(!1);this._timeRunningCurrentInterval+=e,this._timeRunningCurrentPattern+=e,this._timeRunningCurrentPattern>=this._patternTimeLimit&&this.stopVibrate()}}}]),e}());yT.register("vibrationManager",LT);var IT=yT,RT=function(){function e(t){_classCallCheck(this,e),t=A({valueProperty:new dt(0),velocityProperty:new dt(0),damping:1,force:1,targetValue:0},t),this.valueProperty=t.valueProperty,this.velocityProperty=t.velocityProperty,this._damping=t.damping,this._force=t.force,this.timeElapsed=0,this._targetValue=t.targetValue}return _createClass(e,[{key:"targetValue",get:function(){return this._targetValue},set:function(e){this._targetValue=e,this.recompute()}},{key:"damping",get:function(){return this._damping},set:function(e){this._damping=e,this.recompute()}},{key:"force",get:function(){return this._force},set:function(e){this._force=e,this.recompute()}},{key:"recompute",value:function(){this.timeElapsed=0,this.harmonic=new Dv(1,Math.sqrt(4*this._force)*this._damping,this._force,this.valueProperty.value-this._targetValue,this.velocityProperty.value)}},{key:"step",value:function(e){this.timeElapsed+=e,this.valueProperty.value=this._targetValue+this.harmonic.getValue(this.timeElapsed),this.velocityProperty.value=this.harmonic.getDerivative(this.timeElapsed)}}]),e}();GC.register("DampedAnimation",RT);function DT(e){return e}y.register("required",DT);var NT=DT,qT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s={fromTargets:NT(r.fromTargets),toTargets:NT(r.toTargets),resetNode:NT(r.resetNode),targetOptions:null};r=A({},s,r);var o=A({},r.targetOptions),l=[];return e&&(l=l.concat(r.fromTargets.map((function(t){return A(t,{object:e},o)})))),i&&(l=l.concat(r.toTargets.map((function(e){return A(e,{object:i},o)})))),(a=t.call(this,A({targets:l},_.omit(r,_.keys(s))))).endedEmitter.addListener((function(){e&&r.resetNode(e),i&&r.resetNode(i)})),a}return _createClass(n,null,[{key:"slideLeft",value:function(e,t,i,r){return n.createSlide(t,i,"x",e.width,!0,r)}},{key:"slideRight",value:function(e,t,i,r){return n.createSlide(t,i,"x",e.width,!1,r)}},{key:"slideUp",value:function(e,t,i,r){return n.createSlide(t,i,"y",e.height,!0,r)}},{key:"slideDown",value:function(e,t,i,r){return n.createSlide(t,i,"y",e.height,!1,r)}},{key:"wipeLeft",value:function(e,t,i,r){return n.createWipe(e,t,i,"maxX","minX",r)}},{key:"wipeRight",value:function(e,t,i,r){return n.createWipe(e,t,i,"minX","maxX",r)}},{key:"wipeUp",value:function(e,t,i,r){return n.createWipe(e,t,i,"maxY","minY",r)}},{key:"wipeDown",value:function(e,t,i,r){return n.createWipe(e,t,i,"minY","maxY",r)}},{key:"dissolve",value:function(e,t,i){function r(e,t,n){return Math.pow((1-n)*e+n*t,i.gamma)}return i=A({gamma:1},i),new n(e,t,A({fromTargets:[{attribute:"opacity",from:1,to:0,blend:r}],toTargets:[{attribute:"opacity",from:0,to:1,blend:r}],resetNode:function(e){e.opacity=1}},i))}},{key:"createSlide",value:function(e,t,i,r,a,s){var o=a?-1:1;return new n(e,t,A({fromTargets:[{attribute:i,from:0,to:r*o}],toTargets:[{attribute:i,from:-r*o,to:0}],resetNode:function(e){e[i]=0}},s))}},{key:"createWipe",value:function(e,t,i,r,a,s){var o=e.copy(),l=e.copy();function u(e,t,n){return Ni.bounds(e.blend(t,n))}return o[r]=e[a],l[a]=e[r],new n(t,i,A({fromTargets:[{attribute:"clipArea",from:e,to:o,blend:u}],toTargets:[{attribute:"clipArea",from:l,to:e,blend:u}],resetNode:function(e){e.clipArea=null}},s))}}]),n}(WC);GC.register("Transition",qT);var OT=qT,BT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),i=A({content:null,useBoundsClip:!0,cachedNodes:[]},i),(r=t.call(this)).transitionBoundsProperty=e,r.useBoundsClip=i.useBoundsClip,r.cachedNodes=i.cachedNodes,r.fromContent=i.content,r.toContent=null,r.children=r.cachedNodes;for(var a=0;a<r.cachedNodes.length;a++){var s=r.cachedNodes[a];s.visible=s===r.fromContent}return r.fromContent&&!_.includes(r.cachedNodes,r.fromContent)&&r.addChild(r.fromContent),r.transition=null,r.paddingNode=new jo,r.addChild(r.paddingNode),r.boundsListener=r.onBoundsChange.bind(_assertThisInitialized(r)),r.transitionBoundsProperty.link(r.boundsListener),r.mutate(i),r}return _createClass(n,[{key:"step",value:function(e){this.transition&&this.transition.step(e)}},{key:"interrupt",value:function(){this.transition&&this.transition.stop()}},{key:"onBoundsChange",value:function(e){this.interrupt(),this.useBoundsClip&&(this.clipArea=Ni.bounds(e)),this.paddingNode.localBounds=e}},{key:"slideLeftTo",value:function(e,t){return this.interrupt(),this.startTransition(e,OT.slideLeft(this.transitionBoundsProperty.value,this.fromContent,e,t))}},{key:"slideRightTo",value:function(e,t){return this.interrupt(),this.startTransition(e,OT.slideRight(this.transitionBoundsProperty.value,this.fromContent,e,t))}},{key:"slideUpTo",value:function(e,t){return this.interrupt(),this.startTransition(e,OT.slideUp(this.transitionBoundsProperty.value,this.fromContent,e,t))}},{key:"slideDownTo",value:function(e,t){return this.interrupt(),this.startTransition(e,OT.slideDown(this.transitionBoundsProperty.value,this.fromContent,e,t))}},{key:"wipeLeftTo",value:function(e,t){return this.interrupt(),this.startTransition(e,OT.wipeLeft(this.transitionBoundsProperty.value,this.fromContent,e,t))}},{key:"wipeRightTo",value:function(e,t){return this.interrupt(),this.startTransition(e,OT.wipeRight(this.transitionBoundsProperty.value,this.fromContent,e,t))}},{key:"wipeUpTo",value:function(e,t){return this.interrupt(),this.startTransition(e,OT.wipeUp(this.transitionBoundsProperty.value,this.fromContent,e,t))}},{key:"wipeDownTo",value:function(e,t){return this.interrupt(),this.startTransition(e,OT.wipeDown(this.transitionBoundsProperty.value,this.fromContent,e,t))}},{key:"dissolveTo",value:function(e,t){return this.interrupt(),this.startTransition(e,OT.dissolve(this.fromContent,e,t))}},{key:"startTransition",value:function(e,t){var n=this;return this.interrupt(),this.toContent=e,e&&(_.includes(this.cachedNodes,e)?e.visible=!0:this.addChild(e)),this.transition=t,this.fromContent&&(this.fromContent.pickable=!1),this.toContent&&(this.toContent.pickable=!1),t.endedEmitter.addListener((function(){n.fromContent&&(n.fromContent.pickable=null),n.toContent&&(n.toContent.pickable=null),n.transition=null,n.fromContent&&(_.includes(n.cachedNodes,n.fromContent)?n.fromContent.visible=!1:n.removeChild(n.fromContent)),n.fromContent=n.toContent,n.toContent=null})),t.start(),t}},{key:"dispose",value:function(){this.interrupt(),this.transitionBoundsProperty.unlink(this.boundsListener),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);GC.register("TransitionNode",BT);var GT=GC,HT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=S()({alertStableDelay:500},e);return t.call(this,i)}return _createClass(n)}(gc);rc.register("ActivationUtterance",HT);var FT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n),x("Please use AccessibleValueHander.a11yCreateContextResponseAlert(), see https://github.com/phetsims/sun/issues/685");var i=S()({alertStableDelay:1e3},e);return t.call(this,i)}return _createClass(n)}(gc);rc.register("ValueChangeUtterance",FT);var YT=rc,zT=new c("vegas"),UT=iv("VEGAS");zT.register("VegasStrings",UT);var WT=UT,jT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),r=t.call(this);var a=S()({faceDiameter:160,maxTextWidth:300},i),s=new vw(a.faceDiameter),o=new Pf(WT.youCompletedAllLevelsStringProperty,{font:new tA(25),lineWrap:300,maxWidth:a.maxTextWidth,maxHeight:300}),l=new FS({content:new Xl(WT.doneStringProperty,{font:new tA(30),maxWidth:a.maxTextWidth}),listener:e,baseColor:"yellow"});return r.addChild(new rA(new gf({children:[s,o,l],spacing:20}),{xMargin:50,yMargin:20})),r.mutate(a),r}return _createClass(n)}(jo);zT.register("AllLevelsCompletedNode",jT);var XT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n),r=t.call(this);var a=S()({fill:"white",stroke:"black",lineWidth:2},i);r.addChild(new $l(e,a)),r.addChild(new $l(.15*e,{fill:a.stroke}));var s={stroke:a.stroke,lineWidth:a.lineWidth,lineCap:"round",lineJoin:"round"};return r.addChild(new tu(0,0,0,.75*-e,s)),r.addChild(new tu(0,0,.45*e,.3*e,s)),r.centerX=e,r.centerY=e,r.mutate(a),r}return _createClass(n)}(jo);Iy.register("SimpleClockIcon",XT);var QT=function(){function e(){_classCallCheck(this,e),this.isRunningProperty=new pt(!1),this.elapsedTimeProperty=new Nt(0),this.intervalId=null}return _createClass(e,[{key:"reset",value:function(){this.isRunningProperty.reset(),this.elapsedTimeProperty.reset()}},{key:"start",value:function(){var e=this;this.isRunningProperty.value||(this.elapsedTimeProperty.value=0,this.intervalId=mt.setInterval((function(){e.elapsedTimeProperty.value=e.elapsedTimeProperty.value+1}),1e3),this.isRunningProperty.value=!0)}},{key:"stop",value:function(){this.isRunningProperty.value&&(mt.clearInterval(this.intervalId),this.intervalId=null,this.isRunningProperty.value=!1)}},{key:"restart",value:function(){this.stop(),this.start()}}],[{key:"formatTime",value:function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*n),r=n>9||0===t?n:"0".concat(n),a=i>9?i:"0".concat(i);return t>0?ic.format(WT.pattern["0hours"]["1minutes"]["2secondsStringProperty"].value,t,r,a):ic.format(WT.pattern["0minutes"]["1secondsStringProperty"].value,r,a)}}]),e}();zT.register("GameTimer",QT);var KT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({barFill:"lightGray",barStroke:null,barHeight:50,xMargin:10,yMargin:8,floatToTop:!1,dynamicAlignment:!0},r),o=new iu({fill:s.barFill,stroke:s.barStroke}),l=[o];s.children=l.concat(s.children||[]),a=t.call(this,s);var u=new dt(jn.EVERYTHING,{valueType:jn});a.positioningBoundsProperty=u;var c=function(t){var n=s.floatToTop?t.top:e.top;o.setRect(t.minX,n,t.width,s.barHeight),u.value=new jn((s.dynamicAlignment?o.left:e.minX)+s.xMargin,o.top,(s.dynamicAlignment?o.right:e.maxX)-s.xMargin,o.bottom)};return i.link(c),a.disposeStatusBar=function(){i.hasListener(c)&&i.unlink(c)},a}return _createClass(n,[{key:"dispose",value:function(){this.disposeStatusBar(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);_defineProperty(KT,"DEFAULT_FONT",new tA(20)),_defineProperty(KT,"DEFAULT_TEXT_FILL",Rr.BLACK),Iy.register("StatusBar",KT);var JT=KT,ZT=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({clockIconRadius:15,font:JT.DEFAULT_FONT,textFill:"black",spacing:8},i),s=new XT(a.clockIconRadius),o=new Xl("",{font:a.font,fill:a.textFill});a.children=[s,o],r=t.call(this,a);var l=function(e){o.text=QT.formatTime(e)};return e.link(l),r.disposeElapsedTimeNode=function(){e.hasListener(l)&&e.unlink(l)},r}return _createClass(n,[{key:"dispose",value:function(){this.disposeElapsedTimeNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(mf);zT.register("ElapsedTimeNode",ZT);var $T=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({font:JT.DEFAULT_FONT,textFill:"black",scoreDecimalPlaces:0},i),s=new Ut([WT.pattern.score.numberStringProperty,e],(function(e,t){return ic.fillIn(e,{score:En.toFixed(t,a.scoreDecimalPlaces)})})),o=new Xl(s,{font:a.font,fill:a.textFill});return a.children=[o],(r=t.call(this,a)).disposeScoreDisplayLabeledNumber=function(){s.dispose()},r}return _createClass(n,[{key:"dispose",value:function(){this.disposeScoreDisplayLabeledNumber(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(jo);zT.register("ScoreDisplayLabeledNumber",$T);var eM=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a){var s;_classCallCheck(this,n);var o=S()({challengeIndexProperty:null,numberOfChallengesProperty:null,levelProperty:null,elapsedTimeProperty:null,timerEnabledProperty:null,levelVisible:!0,challengeNumberVisible:!0,font:JT.DEFAULT_FONT,textFill:JT.DEFAULT_TEXT_FILL,createScoreDisplay:function(e){return new $T(e,{font:a&&a.font?a.font:JT.DEFAULT_FONT,textFill:a&&a.textFill?a.textFill:JT.DEFAULT_TEXT_FILL})},startOverButtonText:WT.startOverStringProperty,clockIconRadius:15,xSpacing:50,xMargin:20,yMargin:10,barFill:null,barStroke:null,tandem:xe.REQUIRED},a);o.startOverButtonOptions=k({font:o.font,textFill:o.textFill,baseColor:vk.BUTTON_YELLOW,xMargin:10,yMargin:8,listener:_.noop,tandem:o.tandem.createTandem("startOverButton"),maxWidth:.2*(e.width-2*o.xMargin)},o.startOverButtonOptions),o.levelTextOptions=k({fill:o.textFill,font:o.font},o.levelTextOptions),o.challengeTextOptions=k({fill:o.textFill,font:o.font},o.challengeTextOptions);var l,u,c=new iu({fill:o.barFill,stroke:o.barStroke}),h=[];if(o.levelProperty&&o.levelVisible){var d=new Ut([WT.label.levelStringProperty,o.levelProperty],(function(e,t){return ic.format(e,t)}));l=new Xl(d,k({tandem:o.tandem.createTandem("levelText")},o.levelTextOptions)),h.push(l)}if(o.challengeIndexProperty&&o.numberOfChallengesProperty){var p=new Ut([WT.pattern["0challenge"]["1maxStringProperty"],o.challengeIndexProperty,o.numberOfChallengesProperty],(function(e,t,n){return ic.format(e,t+1,n)}));u=new Xl(p,k({tandem:o.tandem.createTandem("challengeNumberText")},o.challengeTextOptions)),h.push(u)}var f,m=o.createScoreDisplay(r);h.push(m),o.elapsedTimeProperty&&o.timerEnabledProperty&&(f=new ZT(o.elapsedTimeProperty,{visibleProperty:o.timerEnabledProperty,clockIconRadius:o.clockIconRadius,font:o.font,textFill:o.textFill}),h.push(f));var g=new uk(o.startOverButtonText,o.startOverButtonOptions),y=new mf({excludeInvisibleChildrenFromBounds:!1,spacing:o.xSpacing,children:h,maxWidth:e.width-2*o.xMargin-g.width-o.xSpacing});return o.children=[c,y,g],o.barHeight=Math.max(y.height,m.height)+2*o.yMargin,s=t.call(this,e,i,o),nn.multilink([s.positioningBoundsProperty,y.boundsProperty,g.boundsProperty],(function(e,t,n){y.left=e.left,y.centerY=e.centerY,g.right=e.right,g.centerY=e.centerY})),s.disposeFiniteStatusBar=function(){l.dispose(),u.dispose(),m.dispose(),f&&f.dispose(),g.dispose(),f&&f.dispose()},s}return _createClass(n,[{key:"dispose",value:function(){this.disposeFiniteStatusBar(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(JT);zT.register("FiniteStatusBar",eM);var tM="data:audio/mpeg;base64,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",nM=XA(JA,tM),iM=BA.createLock(tM),rM=new QA,aM=!1,sM=function(){aM||(iM(),aM=!0)},oM=JA.decodeAudioData(nM.buffer,(function(e){null===rM.audioBufferProperty.value&&(rM.audioBufferProperty.set(e),sM())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),rM.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),sM()}));oM&&oM.then((function(e){null===rM.audioBufferProperty.value&&(rM.audioBufferProperty.set(e),sM())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),sM()}));var lM=rM,uM="data:audio/mpeg;base64,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",cM=XA(JA,uM),hM=BA.createLock(uM),dM=new QA,pM=!1,fM=function(){pM||(hM(),pM=!0)},mM=JA.decodeAudioData(cM.buffer,(function(e){null===dM.audioBufferProperty.value&&(dM.audioBufferProperty.set(e),fM())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),dM.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),fM()}));mM&&mM.then((function(e){null===dM.audioBufferProperty.value&&(dM.audioBufferProperty.set(e),fM())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),fM()}));var gM=dM,yM="data:audio/mpeg;base64,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",vM=XA(JA,yM),AM=BA.createLock(yM),bM=new QA,SM=!1,EM=function(){SM||(AM(),SM=!0)},kM=JA.decodeAudioData(vM.buffer,(function(e){null===bM.audioBufferProperty.value&&(bM.audioBufferProperty.set(e),EM())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),bM.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),EM()}));kM&&kM.then((function(e){null===bM.audioBufferProperty.value&&(bM.audioBufferProperty.set(e),EM())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),EM()}));var VM=bM,wM="data:audio/mpeg;base64,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rcqD2R7/qIYKJG/9Azn/82LE9SF8MkAoecWJ3+7ln//p3eVssagYfLLVWpFsBSTS9XGPBlhsglzxxYUqGQUUNti0RsFhRx8L8JiBRrDeuRaKSxIstMLx8EErzlr28r2zSlzQhwLsXjxSOmw+j+T5ViiEuq6zgsSFTpqJvTfXUtUjxGraSKGswqMn+ZK1zIUgVrr97ZP/3G////xX1/dP9Jys1+lO7aMz7lys//NixOwfEipIPHtFiJOxrXZUs7rYzIxbmIyEc6HcYUqCyhFuY0NODixGI01CvRnMLyPi8NsYV0K27mL1NszULTTZPdysOoT4Iz++320JhqmYI9EWCuz22XTdP8J5wyA9PL/MxgWVssmZi+lWyShpEhuj6163+YnnqqCWa3V0v/q6jX6v7f/v//29/pps1J/7z/7/renjtfe4pryNm//zYsT/I+xKOAp8hTWGp2hoNuo92gVXUxxXmNQ9W2LRxPy219LYugk1ohxcqIpMQU1F/xBanxmeWRua0Ozw/o0VeTerG9bvcSrkpt+DvtR1yTRvg+YGt4z8T/otwfB9mrbtJA/dTuPlpfrWk0HP+pjoe7+r6mlRoR/dOenSjLrn06//9eaR/9/Pt7Kltkrnos7bMZmWU33qqGlj1JX/82DE/yPsfjAAe014sUS8R6js2YZZTnQGwuaOKSedMks+31kX/f2dcRhaEJVMQU1FMy45OS4zVVVVIAIFv5GAd6zrKjRF8MjrgPlyauokYTR6CTy4RBUMtr6qwAl8WCTsWtWh0+nu4lytvtQzGpNXqGjnSk03DNrLsnfO2H+UzWrrsX26lOp/+RHz/hRJclJGHI7/Ph5G3XaHsfX/82LE+iKsgjAKec18jt/eRDrF1R/Ilnir0k1MoR7D8ZHRTOiR9yEorMFd2BOqTICEWMZSzIIlmEQKzlVn2QweKnKVjX1Yxqt6lhn6hWMz/opZjGMbXob/Q3/qFayGM/Qz/ylLmfyt0ev/T/NmM/0KUrSgIluv9WrXce1at+s7WZnDlS09b2TkxJRkfPVWuphCUtPMxLnkoSiUqOT3//NixPIgjII1lkFG/KEcQOolruW2uW2xWJ3zY6EZedEoSo2Vq11adXW1rWToykxBTUUzLjk5LjOqqpdsIyaZkZlTRGRbTMjMqYSMi2mZGZU0RkW0zIzKmEjIj/mRk1/kZH/+0IyMy3IyIyp/+ZEZU8zL///yMiMv/zI7q6uvm7GUVlUk0kk0k0l4ThV1ebGSqFEQkQyHhsgIy6Bs8f/zYsT+I7SCCCgomVwwpIhkaEQyNDZARoG2HNKrKpJqLqrKrJpLqLppJ0GLVUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/82DE9SEMbTGKCFNdVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",_M=XA(JA,wM),CM=BA.createLock(wM),xM=new QA,PM=!1,TM=function(){PM||(CM(),PM=!0)},MM=JA.decodeAudioData(_M.buffer,(function(e){null===xM.audioBufferProperty.value&&(xM.audioBufferProperty.set(e),TM())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),xM.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),TM()}));MM&&MM.then((function(e){null===xM.audioBufferProperty.value&&(xM.audioBufferProperty.set(e),TM())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),TM()}));var LM=xM,IM="data:audio/mpeg;base64,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",RM=XA(JA,IM),DM=BA.createLock(IM),NM=new QA,qM=!1,OM=function(){qM||(DM(),qM=!0)},BM=JA.decodeAudioData(RM.buffer,(function(e){null===NM.audioBufferProperty.value&&(NM.audioBufferProperty.set(e),OM())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),NM.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),OM()}));BM&&BM.then((function(e){null===NM.audioBufferProperty.value&&(NM.audioBufferProperty.set(e),OM())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),OM()}));var GM=NM,HM=new Eb(VM),FM=new Eb(lM),YM=new Eb(GM),zM=new Eb(gM),UM=new Eb(LM),WM=!1;var jM=function(){function e(){_classCallCheck(this,e),WM||(Db.addSoundGenerator(HM),Db.addSoundGenerator(FM),Db.addSoundGenerator(YM),Db.addSoundGenerator(zM),Db.addSoundGenerator(UM),WM=!0)}return _createClass(e,[{key:"correctAnswer",value:function(){HM.play()}},{key:"wrongAnswer",value:function(){FM.play()}},{key:"challengeComplete",value:function(){UM.play()}},{key:"gameOverZeroScore",value:function(){FM.play()}},{key:"gameOverImperfectScore",value:function(){YM.play()}},{key:"gameOverPerfectScore",value:function(){zM.play()}}]),e}();zT.register("GameAudioPlayer",jM);var XM=new tA(24),QM=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({descriptionTextOptions:{font:XM},vBoxOptions:{align:"left",spacing:20},maxContentWidth:.75*KE.DEFAULT_LAYOUT_BOUNDS.width,tandem:xe.REQUIRED},i);a.title&&(a.title=new jo({children:[a.title],maxWidth:a.maxContentWidth}));var s=e.map((function(e,t){return new Pf(e,S()({tandem:a.tandem.createTandem("level".concat(t,"DescriptionText"))},a.descriptionTextOptions))}));a.gameLevels&&s.forEach((function(e,t){e.visible=a.gameLevels.includes(t+1)}));var o=new gf(S()({children:s,maxWidth:a.maxContentWidth},a.vBoxOptions));return(r=t.call(this,o,a)).disposeGameInfoDialog=function(){s.forEach((function(e){return e.dispose()}))},r}return _createClass(n,[{key:"dispose",value:function(){this.disposeGameInfoDialog(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(Qk);zT.register("GameInfoDialog",QM);var KM="data:audio/mpeg;base64,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VVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7MsSFAMQYRv2jCSqwfoPTuPekJ1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zDEqIPAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+zLEu4PAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",JM=XA(JA,KM),ZM=BA.createLock(KM),$M=new QA,eL=!1,tL=function(){eL||(ZM(),eL=!0)},nL=JA.decodeAudioData(JM.buffer,(function(e){null===$M.audioBufferProperty.value&&($M.audioBufferProperty.set(e),tL())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),$M.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),tL()}));nL&&nL.then((function(e){null===$M.audioBufferProperty.value&&($M.audioBufferProperty.set(e),tL())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),tL()}));var iL=$M,rL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){_classCallCheck(this,n);var i=S()({xMargin:8,yMargin:10.9,baseColor:vk.BUTTON_YELLOW},e);if(!i.soundPlayer){var r=new Eb(iL,{initialOutputLevel:.35});Db.addSoundGenerator(r,{categoryName:"user-interface"}),i.soundPlayer=r}var a=new Ry(0,0,-28.5,0,{tailWidth:8,headWidth:18,headHeight:15});return i.content=new Hl(a,{fill:"black"}),t.call(this,i)}return _createClass(n)}(FS);Iy.register("BackButton",rL);var aL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({outerRadius:15,innerRadius:7.5,numberStarPoints:5},e);i=t.call(this);var a=2*r.numberStarPoints;return _.times(a,(function(e){var t=e/a*Math.PI*2-Math.PI/2,n=e%2==0?r.outerRadius:r.innerRadius;i.lineTo(n*Math.cos(t),n*Math.sin(t))})),i.close(),i.makeImmutable(),i}return _createClass(n)}(Ni);Iy.register("StarShape",aL);var sL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({value:1,emptyFill:"#e1e1e1",emptyStroke:"#d3d1d1 ",emptyLineWidth:1.5,emptyLineJoin:"round",filledFill:"#fcff03",filledStroke:"black",filledLineWidth:1.5,filledLineJoin:"round",starShapeOptions:{}},e);i=t.call(this);var a=new oL({stroke:r.emptyStroke,fill:r.emptyFill,lineWidth:r.emptyLineWidth,lineJoin:r.emptyLineJoin,starShapeOptions:r.starShapeOptions});if(i.addChild(a),r.value>0){var s=new oL({stroke:r.filledStroke,fill:r.filledFill,lineWidth:r.filledLineWidth,lineJoin:r.filledLineJoin,starShapeOptions:r.starShapeOptions});if(r.value<1){var o=s.starShapeBounds,l=o.dilated(1.5*r.filledLineWidth);s.clipArea=Ni.bounds(l.withMaxX(o.left+r.value*o.width))}i.addChild(s)}return i.mutate(r),i}return _createClass(n)}(jo),oL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({starShapeOptions:{}},e);r.boundsMethod="none";var a=new aL(r.starShapeOptions);return(i=t.call(this,a,r)).starShapeBounds=a.getBounds(),i}return _createClass(n,[{key:"computeShapeBounds",value:function(){return this.starShapeBounds}}]),n}(Hl);Iy.register("StarNode",sL);var lL=sL,uL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({font:JT.DEFAULT_FONT,textFill:"black",scoreDecimalPlaces:0,starNodeOptions:{starShapeOptions:{outerRadius:10,innerRadius:5},filledLineWidth:1.5,emptyLineWidth:1.5},spacing:5},i);r=t.call(this,a);var s=function(e){var t=[];0===e?t.push(new lL(k({value:0},a.starNodeOptions))):(t.push(new Xl(En.toFixed(e,a.scoreDecimalPlaces),{font:a.font,fill:a.textFill})),t.push(new lL(k({value:1},a.starNodeOptions)))),r.children=t};return e.link(s),r.disposeScoreDisplayNumberAndStar=function(){e.unlink(s)},r}return _createClass(n,[{key:"dispose",value:function(){this.disposeScoreDisplayNumberAndStar(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(mf);zT.register("ScoreDisplayNumberAndStar",uL);var cL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s){var o;_classCallCheck(this,n);var l=S()({backButtonListener:_.noop,xMargin:20,yMargin:10,spacing:10,createScoreDisplay:function(e){return new uL(e)}},s),u=new rL({listener:l.backButtonListener,xMargin:8,yMargin:10,tandem:l.tandem.createTandem("backButton")}),c=new mf({spacing:l.spacing,align:"center",children:[u,r],maxWidth:.7*e.width}),h=l.createScoreDisplay(a);return h.maxWidth=.2*e.width,l.children=[c,h],l.barHeight=Math.max(c.height,h.height)+2*l.yMargin,(o=t.call(this,e,i,l)).positioningBoundsProperty.link((function(e){c.left=e.left,c.centerY=e.centerY,h.right=e.right,h.centerY=e.centerY})),h.localBoundsProperty.link((function(){h.right=o.positioningBoundsProperty.value.right})),o.disposeInfiniteStatusBar=function(){h.dispose()},o}return _createClass(n,[{key:"dispose",value:function(){this.disposeInfiniteStatusBar(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(JT);zT.register("InfiniteStatusBar",cL);var hL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({numberOfStars:1,perfectScore:1,starNodeOptions:{starShapeOptions:{outerRadius:10,innerRadius:5},filledLineWidth:1.5,emptyLineWidth:1.5},spacing:3},i),s=a.numberOfStars,o=a.perfectScore;r=t.call(this,a);var l=function(e){for(var t=[],n=e/o,i=Math.floor(n*s),l=0;l<i;l++)t.push(new lL(k({value:1},a.starNodeOptions)));var u=n*s-i;u>1e-6&&t.push(new lL(k({value:u},a.starNodeOptions)));for(var c=s-t.length,h=0;h<c;h++)t.push(new lL(k({value:0},a.starNodeOptions)));r.children=t};return e.link(l),r.disposeScoreDisplayStars=function(){e.unlink(l)},r}return _createClass(n,[{key:"dispose",value:function(){this.disposeScoreDisplayStars(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(mf);zT.register("ScoreDisplayStars",hL);var dL=new tA({size:28,weight:"bold"}),pL=new tA({size:22,weight:"bold"}),fL=new tA(26),mL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r,a,s,o,l,u,c,h){var d;_classCallCheck(this,n);var p=S()({levelVisible:!0,ySpacing:30,titleFont:dL,infoFont:pL,buttonFont:fL,buttonFill:"rgb( 255, 255, 0 )",starDiameter:62,contentMaxWidth:null,fill:"rgb( 180, 205, 255 )",stroke:"black",lineWidth:2,cornerRadius:35,xMargin:20,yMargin:20,tandem:xe.REQUIRED},h),f=[],m=i/r,g=WT.keepTryingStringProperty;m>.95?g=WT.excellentStringProperty:m>.75?g=WT.greatStringProperty:m>=.5&&(g=WT.goodStringProperty);var y=new Xl(g,{font:p.titleFont,maxWidth:p.contentMaxWidth});f.push(y);var v=new hL(new dt(i),{numberOfStars:a,perfectScore:r,starNodeOptions:{starShapeOptions:{innerRadius:p.starDiameter/4,outerRadius:p.starDiameter/2}},maxWidth:p.contentMaxWidth});if(f.push(v),p.levelVisible){var A=new Ut([WT.label.levelStringProperty],(function(t){return ic.format(t,e)}));f.push(new Xl(A,{font:p.infoFont,maxWidth:p.contentMaxWidth}))}var b=new Ut([WT.label.score.maxStringProperty],(function(e){return ic.format(e,i,r)}));if(f.push(new Xl(b,{font:p.infoFont,maxWidth:p.contentMaxWidth})),s){var E,k=new Ut([WT.label.timeStringProperty],(function(e){return ic.format(e,QT.formatTime(o))}));E=u?new Ut([k,WT.yourNewBestStringProperty],(function(e,t){return"".concat(e,"<br>").concat(t)})):null!==l?new Ut([k,WT.pattern["0yourBestStringProperty"]],(function(e,t){return"".concat(e,"<br>").concat(ic.format(t,QT.formatTime(l)))})):k,f.push(new Pf(E,{font:p.infoFont,align:"center",maxWidth:p.contentMaxWidth}))}var V=new uk(WT.continueStringProperty,{listener:c,font:p.buttonFont,baseColor:p.buttonFill,tandem:p.tandem.createTandem("continueButton"),maxWidth:p.contentMaxWidth});f.push(V);var w=new gf({children:f,spacing:p.ySpacing});return(d=t.call(this,w,p)).disposeLevelCompletedNode=function(){f.forEach((function(e){return e.dispose()}))},d}return _createClass(n,[{key:"dispose",value:function(){this.disposeLevelCompletedNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(rA);zT.register("LevelCompletedNode",mL);var gL="data:audio/mpeg;base64,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",yL=XA(JA,gL),vL=BA.createLock(gL),AL=new QA,bL=!1,SL=function(){bL||(vL(),bL=!0)},EL=JA.decodeAudioData(yL.buffer,(function(e){null===AL.audioBufferProperty.value&&(AL.audioBufferProperty.set(e),SL())}),(function(e){console.warn("decode of audio data failed, using stubbed sound, error: "+e),AL.audioBufferProperty.set(JA.createBuffer(1,1,JA.sampleRate)),SL()}));EL&&EL.then((function(e){null===AL.audioBufferProperty.value&&(AL.audioBufferProperty.set(e),SL())})).catch((function(e){console.warn("promise rejection caught for audio decode, error = "+e),SL()}));var kL=AL,VL=new tA(24),wL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var a;_classCallCheck(this,n);var s=S()({buttonWidth:150,buttonHeight:150,createScoreDisplay:function(){return new hL(i)},scoreDisplayProportion:.2,scoreDisplayMinXMargin:10,scoreDisplayMinYMargin:5,iconToScoreDisplayYSpace:10,bestTimeProperty:null,bestTimeVisibleProperty:null,bestTimeFill:"black",bestTimeFont:VL,bestTimeYSpacing:10,cornerRadius:10,baseColor:"rgb( 242, 255, 204 )",xMargin:10,yMargin:10,soundPlayerIndex:0,tandem:xe.REQUIRED},r),o=s.buttonWidth-2*s.xMargin,l=s.createScoreDisplay(i),u=s.buttonHeight*s.scoreDisplayProportion,c=new iu(0,0,o,u,{cornerRadius:s.cornerRadius,fill:"white",stroke:"black",pickable:!1});l.maxWidth=c.width-2*s.scoreDisplayMinXMargin,l.maxHeight=c.height-2*s.scoreDisplayMinYMargin;var h=s.buttonHeight-c.height-2*s.yMargin-s.iconToScoreDisplayYSpace,d=new ms(o,h),p=n.createSizedImageNode(e,d);p.centerX=c.centerX,p.bottom=c.top-s.iconToScoreDisplayYSpace;var f=function(){l.center=c.center};if(l.boundsProperty.lazyLink(f),f(),s.content=new jo({children:[p,c,l]}),void 0===s.soundPlayer){var m=new Eb(kL,{initialOutputLevel:.5,rateChangesAffectPlayingSounds:!1});Db.addSoundGenerator(m,{categoryName:"user-interface"}),s.soundPlayer={play:function(){m.setPlaybackRate(Math.pow(hb.TWELFTH_ROOT_OF_TWO,s.soundPlayerIndex),0),m.play()},stop:function(){m.stop()}}}a=t.call(this,s);var g=null,y=null;if(s.bestTimeProperty){var v=new Xl("",{font:s.bestTimeFont,fill:s.bestTimeFill,maxWidth:a.width}),A=a.centerX;v.top=a.bottom+s.bestTimeYSpacing,a.addChild(v),g=function(e){v.text=e?QT.formatTime(e):"",v.centerX=A},s.bestTimeProperty.link(g),s.bestTimeVisibleProperty&&(y=function(e){v.visible=e},s.bestTimeVisibleProperty.link(y))}return a.disposeLevelSelectionButton=function(){l.dispose(),s.bestTimeProperty&&g&&s.bestTimeProperty.hasListener(g)&&s.bestTimeProperty.unlink(g),s.bestTimeVisibleProperty&&y&&s.bestTimeVisibleProperty.hasListener(y)&&s.bestTimeVisibleProperty.unlink(y)},a}return _createClass(n,[{key:"dispose",value:function(){this.disposeLevelSelectionButton(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}],[{key:"createSizedImageNode",value:function(e,t){if(e.scale(Math.min(t.width/e.bounds.width,t.height/e.bounds.height)),Math.abs(e.bounds.width-t.width)<1e-4&&Math.abs(e.bounds.height-t.height)<1e-4)return e;var n=iu.dimension(t);return e.center=n.center,n.addChild(e),n}}]),n}(FS);zT.register("LevelSelectionButton",wL);var _L=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a,s=S()({flowBoxOptions:{orientation:"horizontal",spacing:10},tandem:xe.REQUIRED},i),o={group:new ff},l=e.map((function(e,t){var n=xe.OPT_OUT;if(s.tandem.supplied){var i=e.tandemName||"level".concat(t+1,"Button");n=s.tandem.createTandem(i)}return new wL(new cf(e.icon,o),e.scoreProperty,k({tandem:n},s.levelSelectionButtonOptions,e.options))}));return s.gameLevels&&l.forEach((function(e,t){e.visible=s.gameLevels.includes(t+1)})),a=s.createLayoutNode?s.createLayoutNode(l):new Qp(k({children:l},s.flowBoxOptions)),s.children=[a],(r=t.call(this,s)).buttons=l,r}return _createClass(n,[{key:"focusLevelSelectionButton",value:function(e){this.buttons[e-1].focus()}}]),n}(jo);zT.register("LevelSelectionButtonGroup",_L);var CL=new Image,xL=BA.createLock(CL);CL.onload=xL,CL.src="data:image/png;base64,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";var PL=CL,TL=new tA(20),ML=new tA({size:38,weight:"bold"}),LL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){_classCallCheck(this,n);var r=S()({phetGirlScale:.6,buttonsFont:TL,buttonsWidth:145,buttonsYSpacing:20,keepGoingButtonListener:_.noop,newLevelButtonListener:_.noop,scoreDisplayOptions:{font:ML,spacing:8,starNodeOptions:{outerRadius:20,innerRadius:10,filledLineWidth:2}},closeButtonLastInPDOM:!0,tandem:xe.OPTIONAL},i),a=new Bl(PL,{scale:r.phetGirlScale}),s="number"==typeof e?new Nt(e):e,o=new uL(s,r.scoreDisplayOptions),l={font:r.buttonsFont,minWidth:r.buttonsWidth,maxWidth:r.buttonsWidth},u=new FS(k({},l,{content:new Xl(WT.newLevelStringProperty,{font:TL}),listener:r.newLevelButtonListener,baseColor:vk.PHET_LOGO_YELLOW,tandem:r.tandem.createTandem("newLevelButton")})),c=new FS(k({},l,{content:new Xl(WT.keepGoingStringProperty,{font:TL}),listener:r.keepGoingButtonListener,baseColor:"white",tandem:r.tandem.createTandem("keepGoingButton")})),h=new gf({children:[u,c],spacing:r.buttonsYSpacing}),d=(a.height-o.height-h.height)/2,p=new gf({children:[o,h],align:"center",spacing:d}),f=new mf({align:"bottom",children:[a,p],spacing:52});return r.focusOnShowNode=u,t.call(this,f,r)}return _createClass(n)}(Qk);zT.register("RewardDialog",LL);var IL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n);var r=S()({nodes:null,scaleForResolution:2,stepEmitter:null},e);return(i=t.call(this,r)).scaleForResolution=r.scaleForResolution,i.rewardImages=[],i.canvasDisplayBounds=new jn(0,0,0,0),i.transformTracker=null,i.isInitialized=!1,i.stepEmitterListener=function(e){return i.step(e)},r.stepEmitter&&r.stepEmitter.addListener(i.stepEmitterListener),i.nodes=r.nodes||n.createRandomNodes([new vw(40,{headStroke:"black",headLineWidth:1.5}),new lL],150),i.cachedImages=_.uniq(i.nodes).map((function(e){var t={image:null,node:e,width:e.width,height:e.height},n=new jo({children:[e],scale:i.scaleForResolution});return n.toImage((function(e){t.image=e,n.dispose()})),t})),i.initializer=function(){return i.initialize()},xe.PHET_IO_ENABLED&&phet.phetio.phetioEngine.phetioStateEngine.stateSetEmitter.addListener(i.initializer),i.disposeRewardNode=function(){r.stepEmitter&&r.stepEmitter.removeListener(i.stepEmitterListener),i.transformTracker&&i.transformTracker.dispose(),xe.PHET_IO_ENABLED&&phet.phetio.phetioEngine.phetioStateEngine.stateSetEmitter.removeListener(i.initializer)},i}return _createClass(n,[{key:"dispose",value:function(){this.disposeRewardNode(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}},{key:"paintCanvas",value:function(e){e.scale(1/this.scaleForResolution,1/this.scaleForResolution),this.rewardImages.forEach((function(t){t.cachedImage.image&&e.drawImage(t.cachedImage.image,t.x,t.y)}))}},{key:"getScreenView",value:function(){return this.getUniqueTrail((function(e){return e instanceof KE})).rootNode()}},{key:"initialize",value:function(){var e=this,t=hk("phet.joist.display");if(!this.isInitialized&&this.getUniqueTrail().length>0){var n=this.getUniqueTrail(),i=n.nodes.indexOf(this.getScreenView()),r=n.slice(i),a=function(){e.canvasDisplayBounds=r.globalToLocalBounds(t.bounds);var n=e.globalToLocalBounds(t.bounds);e.setCanvasBounds(n)};this.transformTracker=new Mu(n),this.transformTracker.addListener(a),a(),this.rewardImages=this.nodes.map((function(t){var n=_.find(e.cachedImages,(function(e){return e.node===t}));return{cachedImage:n,x:e.randomX(n.width),y:e.randomY(n.height),speed:200*(Nh.nextDouble()+1)}})),this.isInitialized=!0}}},{key:"randomX",value:function(e){return(Nh.nextDouble()*this.canvasDisplayBounds.width+this.canvasDisplayBounds.left)*this.scaleForResolution-e/2}},{key:"randomY",value:function(e){return this.canvasDisplayBounds.top-Nh.nextDouble()*this.canvasDisplayBounds.height*2-200-e}},{key:"step",value:function(e){var t=this;this.initialize();var n=this.canvasDisplayBounds.height*this.scaleForResolution;this.rewardImages.forEach((function(i){i.y+=i.speed*e,i.y>n&&(i.x=t.randomX(i.cachedImage.width),i.y=t.randomY(i.cachedImage.height))})),this.invalidatePaint()}}],[{key:"createRandomNodes",value:function(e,t){for(var n=[],i=0;i<t;i++)n.push(e[i%e.length]);return n}}]),n}(Zl);zT.register("RewardNode",IL);var RL=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var r;_classCallCheck(this,n);var a=S()({font:JT.DEFAULT_FONT,textFill:"black",spacing:5},i),s=new Xl(WT.scoreStringProperty,{font:a.font,fill:a.textFill}),o=new hL(e,a);return a.children=[s,o],(r=t.call(this,a)).disposeScoreDisplayLabeledStars=function(){s.dispose(),o.dispose()},r}return _createClass(n,[{key:"dispose",value:function(){this.disposeScoreDisplayLabeledStars(),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(mf);function DL(e){return{public:!0,type:"array",elementSchema:{type:"number",isValidValue:function(t){return Number.isInteger(t)&&t>0&&t<=e}},defaultValue:Array.from({length:e},(function(e,t){return t+1})),isValidValue:function(e){return null===e||e.length>0&&e.length===_.uniq(e).length&&_.every(e,(function(e,t,n){return 0===t||n[t-1]<=e}))}}}zT.register("ScoreDisplayLabeledStars",RL),zT.register("getGameLevelsSchema",DL);var NL=QueryStringMachine.getAll({component:{type:"string",defaultValue:null}});zT.register("vegasQueryParameters",NL);var qL=zT;if(!window.hasOwnProperty("_"))throw new Error("Underscore/Lodash not found: _");if(!window.hasOwnProperty("$"))throw new Error("jQuery not found: $");window.axon=Tn,window.bamboo=Cv,window.dot=Jv,window.griddle=qA,window.joist=JE,window.kite=ZE,window.mobius=oV,window.nitroglycerin=ZV,window.phetCore=cw,window.phetcommon=yw,window.scenery=Cr,window.sceneryPhet=C_,window.sun=xx,window.tambo=iT,window.tandem=gT,window.tappi=IT,window.twixt=GT,window.utteranceQueue=YT,window.vegas=qL,window.scenery.Utils.polyfillRequestAnimationFrame()}()}()}();